<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>NetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ï¼ˆä¸‰ï¼‰ï¼šUI ç•Œé¢è®¾è®¡ä¸å®ç°</title>
      <link href="/2025/11/02/NetCmdRegister-%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9AUI-%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
      <url>/2025/11/02/NetCmdRegister-%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9AUI-%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1>NetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ï¼ˆä¸‰ï¼‰ï¼šUI ç•Œé¢è®¾è®¡ä¸å®ç°</h1><p>å¤§å®¶å¥½ï¼æˆ‘æ˜¯ NetCmdRegister çš„å¼€å‘è€…ã€‚åœ¨å‰ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ­å»ºäº†é¡¹ç›®åŸºç¡€å¹¶æ·±å…¥ç†è§£äº† Electron çš„æ¶æ„ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é‡ç‚¹æ¢è®¨ç”¨æˆ·ç•Œé¢çš„è®¾è®¡ä¸å®ç°ï¼Œè¿™æ˜¯ç”¨æˆ·ä¸æˆ‘ä»¬çš„åº”ç”¨ç›´æ¥äº¤äº’çš„éƒ¨åˆ†ã€‚</p><h2 id="è®¾è®¡ç†å¿µä¸ç”¨æˆ·ä½“éªŒ">è®¾è®¡ç†å¿µä¸ç”¨æˆ·ä½“éªŒ</h2><h3 id="è®¾è®¡åŸåˆ™">è®¾è®¡åŸåˆ™</h3><p>åœ¨è®¾è®¡ NetCmdRegister çš„ç•Œé¢æ—¶ï¼Œæˆ‘éµå¾ªäº†å‡ ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š</p><ol><li><strong>åŠŸèƒ½ä¼˜å…ˆ</strong>ï¼šç•Œé¢æœåŠ¡äºåŠŸèƒ½ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰æ˜ç¡®ç”¨é€”</li><li><strong>ç›´è§‚æ“ä½œ</strong>ï¼šç”¨æˆ·æ— éœ€å­¦ä¹ å°±èƒ½ç†è§£å¦‚ä½•æ“ä½œ</li><li><strong>ä¿¡æ¯æ¸…æ™°</strong>ï¼šé‡è¦çŠ¶æ€å’Œåé¦ˆä¸€ç›®äº†ç„¶</li><li><strong>è§†è§‰å±‚æ¬¡</strong>ï¼šé€šè¿‡å¸ƒå±€å’Œé¢œè‰²å»ºç«‹æ¸…æ™°çš„ä¿¡æ¯å±‚çº§</li></ol><h3 id="è‰²å½©ç³»ç»Ÿè®¾è®¡">è‰²å½©ç³»ç»Ÿè®¾è®¡</h3><p>æˆ‘é€‰æ‹©äº† <strong>Slate è‰²ç³»</strong> ä½œä¸ºåŸºç¡€è‰²è°ƒï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><ul><li>ä¸“ä¸šä¸”ä¸åˆºçœ¼ï¼Œé€‚åˆé•¿æ—¶é—´ä½¿ç”¨</li><li>è‰¯å¥½çš„å¯¹æ¯”åº¦ï¼Œç¡®ä¿å¯è¯»æ€§</li><li>ä¸ç°ä»£å¼€å‘å·¥å…·é£æ ¼ä¸€è‡´</li></ul><p><strong>åŠŸèƒ½è‰²ç³»åˆ†é…ï¼š</strong></p><ul><li>ğŸŸ¢ <strong>ç»¿è‰²</strong>ï¼šæˆåŠŸçŠ¶æ€ã€å¯åŠ¨æ“ä½œã€å‘é€åŠŸèƒ½</li><li>ğŸ”´ <strong>çº¢è‰²</strong>ï¼šé”™è¯¯çŠ¶æ€ã€åœæ­¢æ“ä½œã€åˆ é™¤åŠŸèƒ½</li><li>ğŸ”µ <strong>è“è‰²</strong>ï¼šä¿¡æ¯æ€§æ“ä½œã€å¯¼å…¥åŠŸèƒ½</li><li>ğŸŸ£ <strong>ç´«è‰²</strong>ï¼šç‰¹æ®ŠåŠŸèƒ½ï¼ˆå®šæ—¶å‘é€ï¼‰</li></ul><h2 id="HTML-ç»“æ„æ·±åº¦è§£æ">HTML ç»“æ„æ·±åº¦è§£æ</h2><h3 id="æ–‡æ¡£åŸºç¡€ä¸å…ƒä¿¡æ¯">æ–‡æ¡£åŸºç¡€ä¸å…ƒä¿¡æ¯</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">author</span>=<span class="hljs-string">&quot;jinbilianshao&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>NetCmdRegister - ç½‘ç»œå‘½ä»¤æ³¨å†Œå™¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;tailwindcss.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;styles.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>å…³é”®è®¾ç½®è§£æï¼š</strong></p><p><strong>å­—ç¬¦ç¼–ç </strong></p><ul><li><code>UTF-8</code> ç¡®ä¿ä¸­æ–‡å­—ç¬¦æ­£ç¡®æ˜¾ç¤º</li><li>æ”¯æŒå¤šè¯­è¨€ç¯å¢ƒ</li></ul><p><strong>è§†å£è®¾ç½®</strong></p><ul><li><code>width=device-width</code> é€‚é…ç§»åŠ¨è®¾å¤‡</li><li><code>initial-scale=1.0</code> é˜²æ­¢é»˜è®¤ç¼©æ”¾</li></ul><p><strong>Tailwind CSS å¼•å…¥</strong></p><ul><li>ä½¿ç”¨ CDN ç‰ˆæœ¬ç®€åŒ–éƒ¨ç½²</li><li>æ— éœ€æ„å»ºæ­¥éª¤ï¼Œé€‚åˆå°å‹é¡¹ç›®</li></ul><h3 id="æ•´ä½“å¸ƒå±€æ¶æ„">æ•´ä½“å¸ƒå±€æ¶æ„</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-slate-50 font-sans text-slate-800 flex flex-col min-h-screen&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;max-w-7xl mx-auto p-4 md:p-6 lg:p-8 flex-grow w-full&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- é¡µé¢å†…å®¹ --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span><span class="hljs-comment">&lt;!-- é¡µè„š --&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>å¸ƒå±€æŠ€æœ¯è¯¦è§£ï¼š</strong></p><p><strong>Flexbox å‚ç›´å¸ƒå±€</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex flex-col min-h-screen&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>flex</code> å¯ç”¨å¼¹æ€§å¸ƒå±€</li><li><code>flex-col</code> å‚ç›´æ–¹å‘æ’åˆ—</li><li><code>min-h-screen</code> æœ€å°é«˜åº¦ä¸ºè§†å£é«˜åº¦</li></ul><p><strong>å“åº”å¼å®¹å™¨</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;max-w-7xl mx-auto p-4 md:p-6 lg:p-8&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>max-w-7xl</code> æœ€å¤§å®½åº¦çº¦æŸï¼ˆ~80remï¼‰</li><li><code>mx-auto</code> æ°´å¹³å±…ä¸­</li><li>å“åº”å¼å†…è¾¹è·ï¼šå°å±å¹• 1remï¼Œä¸­å±å¹• 1.5remï¼Œå¤§å±å¹• 2rem</li></ul><h2 id="æ ¸å¿ƒåŠŸèƒ½åŒºåŸŸè®¾è®¡">æ ¸å¿ƒåŠŸèƒ½åŒºåŸŸè®¾è®¡</h2><h3 id="1-é¡µé¢å¤´éƒ¨è®¾è®¡">1. é¡µé¢å¤´éƒ¨è®¾è®¡</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-center mb-6&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-4xl font-bold text-slate-900&quot;</span>&gt;</span>ç½‘ç»œå‘½ä»¤æ³¨å†Œå™¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-slate-500 mt-2&quot;</span>&gt;</span>ä¸€ä¸ªç”¨äºæµ‹è¯•å’Œè°ƒè¯• UDP å‘½ä»¤çš„å·¥å…·<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>è®¾è®¡è€ƒé‡ï¼š</strong></p><ul><li><strong>ä¸»æ ‡é¢˜</strong>ï¼šå¤§å­—å·åŠ ç²—ï¼Œå»ºç«‹è§†è§‰ç„¦ç‚¹</li><li><strong>å‰¯æ ‡é¢˜</strong>ï¼šè¾ƒå°å­—å·ï¼Œç°è‰²é™ä½è§†è§‰æƒé‡</li><li><strong>å±…ä¸­å¯¹é½</strong>ï¼šåˆ›å»ºå¹³è¡¡çš„è§†è§‰æ„Ÿå—</li><li><strong>åº•éƒ¨å¤–è¾¹è·</strong>ï¼šä¸åç»­å†…å®¹å»ºç«‹æ¸…æ™°åˆ†éš”</li></ul><h3 id="2-ç½‘æ ¼å¸ƒå±€ç³»ç»Ÿ">2. ç½‘æ ¼å¸ƒå±€ç³»ç»Ÿ</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid grid-cols-1 lg:grid-cols-3 gap-6 h-full&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å·¦ä¾§ä¸»è¦å†…å®¹åŒº --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;lg:col-span-2 space-y-6&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- å³ä¾§æ—¥å¿—åŒº --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;lg:col-span-1 space-y-4 flex flex-col&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>å“åº”å¼ç½‘æ ¼ç­–ç•¥ï¼š</strong></p><p><strong>å°å±å¹•å¸ƒå±€</strong>ï¼ˆé»˜è®¤ï¼‰</p><ul><li><code>grid-cols-1</code>ï¼šå•åˆ—å¸ƒå±€</li><li>å‚ç›´å †å æ‰€æœ‰å†…å®¹</li><li>ç¡®ä¿ç§»åŠ¨è®¾å¤‡ä¸Šçš„å¯ç”¨æ€§</li></ul><p><strong>å¤§å±å¹•å¸ƒå±€</strong>ï¼ˆâ‰¥1024pxï¼‰</p><ul><li><code>lg:grid-cols-3</code>ï¼šä¸‰åˆ—ç½‘æ ¼</li><li>å·¦ä¾§å  2/3ï¼Œå³ä¾§å  1/3</li><li>å……åˆ†åˆ©ç”¨å®½å±ç©ºé—´</li></ul><p><strong>é—´è·ç³»ç»Ÿ</strong></p><ul><li><code>gap-6</code>ï¼šå…ƒç´ é—´ 1.5rem é—´è·</li><li><code>space-y-6</code>ï¼šå‚ç›´æ–¹å‘ 1.5rem é—´è·</li><li>å»ºç«‹æ¸…æ™°çš„è§†è§‰åˆ†ç»„</li></ul><h2 id="ç»„ä»¶çº§è®¾è®¡è¯¦è§£">ç»„ä»¶çº§è®¾è®¡è¯¦è§£</h2><h3 id="æœåŠ¡æ§åˆ¶åŒºåŸŸ">æœåŠ¡æ§åˆ¶åŒºåŸŸ</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-white p-6 rounded-xl shadow-md ring-1 ring-slate-200&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-2xl font-semibold text-slate-700 mb-4 border-b border-slate-200 pb-3&quot;</span>&gt;</span>æœåŠ¡æ§åˆ¶<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center justify-between flex-wrap gap-4&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- çŠ¶æ€æŒ‡ç¤º --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center space-x-3&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;udp-status-indicator&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;w-4 h-4 rounded-full bg-red-500 transition-colors&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;udp-status-text&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;font-semibold text-red-500 transition-colors&quot;</span>&gt;</span>æœåŠ¡å·²åœæ­¢<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- æ§åˆ¶è¾“å…¥å’ŒæŒ‰é’® --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center space-x-4&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;local-port&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mr-2 text-sm font-medium text-slate-600&quot;</span>&gt;</span>æœ¬åœ°ç›‘å¬ç«¯å£:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;local-port&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;8001&quot;</span> </span><br><span class="hljs-tag">                       <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;w-24 rounded-md border-slate-300 shadow-sm p-2 text-sm focus:ring-slate-500 focus:border-slate-500&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;toggle-udp-btn&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-green-600 text-white py-2 px-4 rounded-md font-bold hover:bg-green-700 transition-all shadow-md flex items-center space-x-2&quot;</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- SVG å›¾æ ‡ --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å¯åŠ¨æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>ç»„ä»¶è®¾è®¡è¦ç‚¹ï¼š</strong></p><p><strong>è§†è§‰å®¹å™¨</strong></p><ul><li><code>bg-white</code> ç™½è‰²èƒŒæ™¯çªå‡ºå†…å®¹</li><li><code>rounded-xl</code> å¤§åœ†è§’ç°ä»£æ„Ÿ</li><li><code>shadow-md</code> é€‚åº¦é˜´å½±åˆ›é€ æ·±åº¦</li><li><code>ring-1 ring-slate-200</code> ç»†è¾¹æ¡†å®šä¹‰è¾¹ç•Œ</li></ul><p><strong>çŠ¶æ€æŒ‡ç¤ºå™¨</strong></p><ul><li>åœ†å½¢è®¾è®¡ï¼š<code>w-4 h-4 rounded-full</code></li><li>é¢œè‰²è¯­ä¹‰ï¼šçº¢è‰²åœæ­¢ï¼Œç»¿è‰²è¿è¡Œ</li><li><code>transition-colors</code> å¹³æ»‘çŠ¶æ€åˆ‡æ¢</li></ul><p><strong>è¡¨å•æ§ä»¶</strong></p><ul><li>æ ‡ç­¾ä½¿ç”¨ <code>text-sm font-medium</code> ç¡®ä¿å¯è¯»æ€§</li><li>è¾“å…¥æ¡† <code>rounded-md border-slate-300</code> ç»Ÿä¸€è¾¹æ¡†æ ·å¼</li><li><code>focus:ring-slate-500</code> èšç„¦çŠ¶æ€è§†è§‰åé¦ˆ</li></ul><h3 id="å‘½ä»¤åˆ—è¡¨-Tab-ç³»ç»Ÿ">å‘½ä»¤åˆ—è¡¨ Tab ç³»ç»Ÿ</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-white rounded-xl shadow-md ring-1 ring-slate-200&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;border-b border-slate-200&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;-mb-px flex space-x-6 px-6&quot;</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Tabs&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tab-list-btn&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tab-btn active shrink-0 border-b-2 py-4 px-1 text-base font-medium&quot;</span> <span class="hljs-attr">data-tab</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>                å‘½ä»¤åˆ—è¡¨<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tab-add-btn&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tab-btn shrink-0 border-b-2 py-4 px-1 text-base font-medium&quot;</span> <span class="hljs-attr">data-tab</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span><br>                æ·»åŠ /ç¼–è¾‘<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p-6&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- Tab å†…å®¹åŒºåŸŸ --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>Tab è®¾è®¡æŠ€æœ¯ï¼š</strong></p><p><strong>å¯¼èˆªæ å¸ƒå±€</strong></p><ul><li><code>-mb-px</code> è´Ÿè¾¹è·ä¸å†…å®¹åŒºåŸŸè¾¹æ¡†é‡å </li><li><code>flex space-x-6</code> æ°´å¹³ç­‰é—´è·æ’åˆ—</li><li><code>shrink-0</code> é˜²æ­¢æŒ‰é’®è¢«å‹ç¼©</li></ul><p><strong>æ¿€æ´»çŠ¶æ€ç®¡ç†</strong>é€šè¿‡ CSS ç±»æ§åˆ¶æ¿€æ´»çŠ¶æ€ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.tab-btn</span><span class="hljs-selector-class">.active</span> &#123;<br>    <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#4f46e5</span>; <span class="hljs-comment">/* indigo-600 */</span><br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#4f46e5</span>; <span class="hljs-comment">/* indigo-600 */</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å‘½ä»¤æ·»åŠ è¡¨å•">å‘½ä»¤æ·»åŠ è¡¨å•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tab-panel-add&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hidden&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;space-y-4 max-w-md mx-auto&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;command-name&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;block text-sm font-medium text-slate-600&quot;</span>&gt;</span>å‘½ä»¤åç§°<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;command-name&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;ä¾‹å¦‚: è®¾å¤‡é‡å¯&quot;</span> </span><br><span class="hljs-tag">                   <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mt-1 block w-full rounded-md border-slate-300 shadow-sm p-2 focus:ring-slate-500 focus:border-slate-500&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;command-payload&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;block text-sm font-medium text-slate-600&quot;</span>&gt;</span>å‘½ä»¤å†…å®¹ (åå…­è¿›åˆ¶)<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;command-payload&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;3&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;ä¾‹å¦‚: 01 02 03 FF 0A&quot;</span> </span><br><span class="hljs-tag">                      <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mt-1 block w-full rounded-md border-slate-300 shadow-sm p-2 focus:ring-slate-500 focus:border-slate-500&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;add-command-btn&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;w-full bg-slate-600 text-white py-2 px-4 rounded-md font-bold hover:bg-slate-700 transition-colors shadow-md flex items-center justify-center space-x-2&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- SVG å›¾æ ‡ --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ·»åŠ /æ›´æ–°å‘½ä»¤<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>è¡¨å•è®¾è®¡æœ€ä½³å®è·µï¼š</strong></p><p><strong>æ ‡ç­¾å…³è”</strong></p><ul><li><code>for</code> å±æ€§ä¸ <code>id</code> å¯¹åº”ï¼Œæé«˜å¯è®¿é—®æ€§</li><li><code>block</code> æ˜¾ç¤ºç¡®ä¿æ ‡ç­¾ç‹¬å ä¸€è¡Œ</li></ul><p><strong>è¾“å…¥æ¡†è®¾è®¡</strong></p><ul><li><code>mt-1</code> åœ¨æ ‡ç­¾å’Œè¾“å…¥æ¡†é—´åˆ›å»ºé—´è·</li><li><code>w-full</code> å……åˆ†åˆ©ç”¨å¯ç”¨å®½åº¦</li><li><code>p-2</code> å……è¶³çš„å†…è¾¹è·ä¾¿äºç‚¹å‡»</li></ul><p><strong>æŒ‰é’®è®¾è®¡</strong></p><ul><li><code>w-full</code> å…¨å®½æŒ‰é’®ï¼Œç§»åŠ¨è®¾å¤‡å‹å¥½</li><li><code>flex items-center justify-center</code> å›¾æ ‡æ–‡å­—å±…ä¸­</li><li><code>space-x-2</code> å›¾æ ‡æ–‡å­—é—´è·</li></ul><h3 id="å‘½ä»¤åˆ—è¡¨ç®¡ç†">å‘½ä»¤åˆ—è¡¨ç®¡ç†</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tab-panel-list&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center justify-between bg-slate-100 p-2 rounded-md mb-3&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center space-x-2&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;select-all-checkbox&quot;</span> </span><br><span class="hljs-tag">                   <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h-4 w-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;select-all-checkbox&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-sm font-medium text-slate-600&quot;</span>&gt;</span>å…¨é€‰<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center space-x-2&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- æ“ä½œæŒ‰é’®ç»„ --&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;registered-commands-list&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;space-y-2 min-h-[10rem] max-h-64 overflow-y-auto custom-scrollbar border p-2 rounded-md bg-slate-50&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>åˆ—è¡¨ç®¡ç†åŠŸèƒ½ï¼š</strong></p><p><strong>å·¥å…·æ è®¾è®¡</strong></p><ul><li><code>bg-slate-100</code> æµ…ç°è‰²èƒŒæ™¯åŒºåˆ†åŠŸèƒ½åŒºåŸŸ</li><li><code>flex justify-between</code> å·¦å³åˆ†ç»„å¸ƒå±€</li><li><code>space-x-2</code> ç´§å‡‘æŒ‰é’®é—´è·</li></ul><p><strong>åˆ—è¡¨å®¹å™¨</strong></p><ul><li><code>min-h-[10rem]</code> æœ€å°é«˜åº¦ç¡®ä¿å¸ƒå±€ç¨³å®š</li><li><code>max-h-64</code> æœ€å¤§é«˜åº¦é˜²æ­¢è¿‡åº¦å¢é•¿</li><li><code>custom-scrollbar</code> è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼</li></ul><h3 id="å‘½ä»¤å‘é€åŒºåŸŸ">å‘½ä»¤å‘é€åŒºåŸŸ</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-white p-6 rounded-xl shadow-md ring-1 ring-slate-200&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-2xl font-semibold text-slate-700 mb-4 border-b border-slate-200 pb-3&quot;</span>&gt;</span>å‘½ä»¤å‘é€<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;space-y-4&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- ç›®æ ‡åœ°å€è¾“å…¥ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-end justify-between space-x-4&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex-grow grid grid-cols-1 md:grid-cols-2 gap-4&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;dest-ip&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;block text-sm font-medium text-slate-600&quot;</span>&gt;</span>ç›®æ ‡IPåœ°å€<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dest-ip&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;127.0.0.1&quot;</span> </span><br><span class="hljs-tag">                           <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mt-1 block w-full rounded-md border-slate-300 shadow-sm p-2 focus-visible:outline-indigo-500&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;dest-port&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;block text-sm font-medium text-slate-600&quot;</span>&gt;</span>ç›®æ ‡ç«¯å£<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dest-port&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;8000&quot;</span> </span><br><span class="hljs-tag">                           <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mt-1 block w-full rounded-md border-slate-300 shadow-sm p-2 focus-visible:outline-indigo-500&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;send-selected-btn&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-green-600 text-white h-10 px-6 rounded-md font-bold hover:bg-green-700 transition-colors shadow-md flex items-center justify-center space-x-2 flex-shrink-0&quot;</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- å‘é€å›¾æ ‡ --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å‘é€æ‰€é€‰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <br>        <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;border-slate-200&quot;</span>&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- å®šæ—¶å‘é€æ§åˆ¶ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-end justify-between space-x-4&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex-grow&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;send-interval-input&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;block text-sm font-medium text-slate-600&quot;</span>&gt;</span>å®šæ—¶å‘é€é—´éš” (æ¯«ç§’)<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;send-interval-input&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1000&quot;</span> </span><br><span class="hljs-tag">                       <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mt-1 block w-full rounded-md border-slate-300 shadow-sm p-2 focus-visible:outline-indigo-500&quot;</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- è­¦å‘Šä¿¡æ¯ --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;interval-warning&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hidden items-center space-x-1 text-xs text-orange-500 mt-1&quot;</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- è­¦å‘Šå›¾æ ‡ --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ä½äº20msçš„é—´éš”å¯èƒ½ä¸å‡†ç¡®å¹¶å¤§é‡æ¶ˆè€—CPUã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;toggle-scheduled-send-btn&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-indigo-600 text-white h-10 px-6 rounded-md font-bold hover:bg-indigo-700 transition-colors shadow-md flex items-center justify-center space-x-2 flex-shrink-0&quot;</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- æ’­æ”¾/åœæ­¢å›¾æ ‡ --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;scheduled-send-btn-text&quot;</span>&gt;</span>å¼€å§‹å®šæ—¶<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>å‘é€åŠŸèƒ½è®¾è®¡ï¼š</strong></p><p><strong>ç½‘æ ¼å¸ƒå±€é€‚é…</strong></p><ul><li><code>grid grid-cols-1 md:grid-cols-2</code> å“åº”å¼ç½‘æ ¼</li><li>å°å±å¹•å•åˆ—ï¼Œä¸­å±å¹•åŒåˆ—</li><li>å……åˆ†åˆ©ç”¨æ°´å¹³ç©ºé—´</li></ul><p><strong>åŠŸèƒ½åˆ†åŒº</strong></p><ul><li><code>hr</code> å…ƒç´ è§†è§‰åˆ†éš”å¸¸è§„å‘é€å’Œå®šæ—¶å‘é€</li><li>ä¸åŒçš„æŒ‰é’®é¢œè‰²åŒºåˆ†åŠŸèƒ½ç±»å‹</li></ul><p><strong>äº¤äº’åé¦ˆ</strong></p><ul><li>åŠ¨æ€æ˜¾ç¤ºçš„è­¦å‘Šä¿¡æ¯</li><li>æŒ‰é’®çŠ¶æ€å˜åŒ–åæ˜ æ“ä½œæ¨¡å¼</li></ul><h3 id="å®æ—¶æ—¥å¿—æ˜¾ç¤º">å®æ—¶æ—¥å¿—æ˜¾ç¤º</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-white p-6 rounded-xl shadow-md ring-1 ring-slate-200 flex flex-col&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex justify-between items-center border-b border-slate-200 pb-3 mb-4&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-2xl font-semibold text-slate-700&quot;</span>&gt;</span>å®æ—¶æ—¥å¿—<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;clear-log-btn&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-red-600 text-white py-1 px-3 rounded-md font-bold hover:bg-red-700 transition-colors shadow-sm text-sm&quot;</span>&gt;</span><br>            æ¸…ç©ºæ—¥å¿—<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;log-container&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-slate-800 text-slate-200 p-4 rounded-md font-mono text-sm shadow-inner overflow-y-auto custom-scrollbar max-h-[680px] min-h-[680px]&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;log-empty-state&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center justify-center h-full text-slate-700&quot;</span>&gt;</span>æ—¥å¿—ä¸ºç©º<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ—¥å¿—åŒºåŸŸè®¾è®¡ï¼š</strong></p><p><strong>æ ‡é¢˜æ å¸ƒå±€</strong></p><ul><li><code>flex justify-between</code> æ ‡é¢˜å’ŒæŒ‰é’®ä¸¤ç«¯å¯¹é½</li><li><code>border-b</code> åº•éƒ¨è¾¹æ¡†è§†è§‰åˆ†éš”</li></ul><p><strong>æ—¥å¿—å®¹å™¨</strong></p><ul><li><code>bg-slate-800</code> æ·±è‰²èƒŒæ™¯å‡å°‘è§†è§‰ç–²åŠ³</li><li><code>font-mono</code> ç­‰å®½å­—ä½“ä¾¿äºé˜…è¯»åå…­è¿›åˆ¶</li><li><code>max-h-[680px] min-h-[680px]</code> å›ºå®šé«˜åº¦ç¡®ä¿å¸ƒå±€ç¨³å®š</li></ul><h2 id="è‡ªå®šä¹‰æ ·å¼ä¸ä¼˜åŒ–">è‡ªå®šä¹‰æ ·å¼ä¸ä¼˜åŒ–</h2><h3 id="æ»šåŠ¨æ¡ç¾åŒ–">æ»šåŠ¨æ¡ç¾åŒ–</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.custom-scrollbar</span>::-webkit-scrollbar &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">8px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">8px</span>;<br>&#125;<br><span class="hljs-selector-class">.custom-scrollbar</span>::-webkit-scrollbar-thumb &#123;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">156</span>, <span class="hljs-number">163</span>, <span class="hljs-number">175</span>, <span class="hljs-number">0.6</span>);<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;<br>&#125;<br><span class="hljs-selector-class">.custom-scrollbar</span>::-webkit-scrollbar-thumb:hover &#123;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">107</span>, <span class="hljs-number">114</span>, <span class="hljs-number">128</span>, <span class="hljs-number">0.8</span>);<br>&#125;<br><span class="hljs-selector-class">.custom-scrollbar</span>::-webkit-scrollbar-track &#123;<br>    <span class="hljs-attribute">background</span>: transparent;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ»šåŠ¨æ¡è®¾è®¡è€ƒé‡ï¼š</strong></p><ul><li>é€‚å½“å®½åº¦ä¸å½±å“å†…å®¹æ˜¾ç¤º</li><li>åŠé€æ˜è®¾è®¡èå…¥æ•´ä½“é£æ ¼</li><li>æ‚¬åœçŠ¶æ€æä¾›äº¤äº’åé¦ˆ</li></ul><h3 id="Tab-ç»„ä»¶æ ·å¼">Tab ç»„ä»¶æ ·å¼</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.tab-btn</span> &#123;<br>    <span class="hljs-attribute">border-color</span>: transparent;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#475569</span>; <span class="hljs-comment">/* slate-600 */</span><br>&#125;<br><span class="hljs-selector-class">.tab-btn</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#cbd5e1</span>; <span class="hljs-comment">/* slate-300 */</span><br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#1e293b</span>; <span class="hljs-comment">/* slate-800 */</span><br>&#125;<br><span class="hljs-selector-class">.tab-btn</span><span class="hljs-selector-class">.active</span> &#123;<br>    <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#4f46e5</span>; <span class="hljs-comment">/* indigo-600 */</span><br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#4f46e5</span>; <span class="hljs-comment">/* indigo-600 */</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>çŠ¶æ€ç®¡ç†ç­–ç•¥ï¼š</strong></p><ul><li>é»˜è®¤çŠ¶æ€ï¼šé€æ˜è¾¹æ¡†ï¼Œä¸­ç­‰ç°è‰²æ–‡å­—</li><li>æ‚¬åœçŠ¶æ€ï¼šæ˜¾ç¤ºè¾¹æ¡†ï¼Œæ·±è‰²æ–‡å­—</li><li>æ¿€æ´»çŠ¶æ€ï¼šå“ç‰Œè‰²è¾¹æ¡†å’Œæ–‡å­—</li></ul><h2 id="å›¾æ ‡ç³»ç»Ÿè®¾è®¡">å›¾æ ‡ç³»ç»Ÿè®¾è®¡</h2><h3 id="SVG-å›¾æ ‡ä½¿ç”¨">SVG å›¾æ ‡ä½¿ç”¨</h3><p>åœ¨æ•´ä¸ªç•Œé¢ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†ç»Ÿä¸€çš„ SVG å›¾æ ‡ç³»ç»Ÿï¼š</p><p><strong>æ’­æ”¾å›¾æ ‡</strong>ï¼ˆæœåŠ¡æ§åˆ¶ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h-5 w-5&quot;</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">&quot;0 0 20 20&quot;</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">&quot;currentColor&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">fill-rule</span>=<span class="hljs-string">&quot;evenodd&quot;</span> <span class="hljs-attr">d</span>=<span class="hljs-string">&quot;M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z&quot;</span> <span class="hljs-attr">clip-rule</span>=<span class="hljs-string">&quot;evenodd&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ·»åŠ å›¾æ ‡</strong>ï¼ˆå‘½ä»¤æ·»åŠ ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h-5 w-5&quot;</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">&quot;0 0 20 20&quot;</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">&quot;currentColor&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">fill-rule</span>=<span class="hljs-string">&quot;evenodd&quot;</span> <span class="hljs-attr">d</span>=<span class="hljs-string">&quot;M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z&quot;</span> <span class="hljs-attr">clip-rule</span>=<span class="hljs-string">&quot;evenodd&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>å›¾æ ‡è®¾è®¡åŸåˆ™ï¼š</strong></p><ul><li>ç»Ÿä¸€å°ºå¯¸ï¼š<code>h-5 w-5</code>ï¼ˆ20Ã—20pxï¼‰</li><li>å½“å‰é¢œè‰²ï¼š<code>fill-currentColor</code> ç»§æ‰¿æ–‡å­—é¢œè‰²</li><li>ç®€æ´æ˜äº†ï¼šé¿å…è¿‡åº¦å¤æ‚çš„å›¾å½¢</li></ul><h2 id="å“åº”å¼è®¾è®¡ç­–ç•¥">å“åº”å¼è®¾è®¡ç­–ç•¥</h2><h3 id="æ–­ç‚¹ç³»ç»Ÿ">æ–­ç‚¹ç³»ç»Ÿ</h3><p>Tailwind CSS ä½¿ç”¨ç§»åŠ¨ä¼˜å…ˆçš„æ–­ç‚¹ç³»ç»Ÿï¼š</p><ul><li><strong>é»˜è®¤</strong>ï¼šç§»åŠ¨è®¾å¤‡æ ·å¼ï¼ˆ&lt; 768pxï¼‰</li><li><strong>md</strong>ï¼šä¸­ç­‰å±å¹•ï¼ˆâ‰¥ 768pxï¼‰</li><li><strong>lg</strong>ï¼šå¤§å±å¹•ï¼ˆâ‰¥ 1024pxï¼‰</li><li><strong>xl</strong>ï¼šè¶…å¤§å±å¹•ï¼ˆâ‰¥ 1280pxï¼‰</li></ul><h3 id="å“åº”å¼æ¨¡å¼ç¤ºä¾‹">å“åº”å¼æ¨¡å¼ç¤ºä¾‹</h3><p><strong>ç½‘æ ¼å¸ƒå±€å“åº”</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>é—´è·å“åº”</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p-4 md:p-6 lg:p-8&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ˜¾ç¤ºéšè—å“åº”</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hidden md:block&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="å¯è®¿é—®æ€§è€ƒè™‘">å¯è®¿é—®æ€§è€ƒè™‘</h2><h3 id="è¯­ä¹‰åŒ–-HTML">è¯­ä¹‰åŒ– HTML</h3><ul><li>ä½¿ç”¨ <code>section</code>ã€<code>nav</code>ã€<code>header</code> ç­‰è¯­ä¹‰åŒ–æ ‡ç­¾</li><li>ä¸º Tab å¯¼èˆªæ·»åŠ  <code>aria-label=&quot;Tabs&quot;</code></li><li>è¡¨å•æ§ä»¶æ­£ç¡®å…³è” <code>label</code> å’Œ <code>input</code></li></ul><h3 id="é”®ç›˜å¯¼èˆª">é”®ç›˜å¯¼èˆª</h3><ul><li>æ‰€æœ‰åŠŸèƒ½æŒ‰é’®éƒ½å¯é”®ç›˜è®¿é—®</li><li>è¡¨å•æ§ä»¶æœ‰æ¸…æ™°çš„èšç„¦çŠ¶æ€</li><li>Tab é¡ºåºç¬¦åˆç”¨æˆ·é¢„æœŸ</li></ul><h3 id="é¢œè‰²å¯¹æ¯”åº¦">é¢œè‰²å¯¹æ¯”åº¦</h3><ul><li>æ–‡æœ¬ä¸èƒŒæ™¯æœ‰è¶³å¤Ÿå¯¹æ¯”åº¦</li><li>çŠ¶æ€é¢œè‰²æœ‰æ˜ç¡®çš„è¯­ä¹‰å«ä¹‰</li><li>ä¸å•çº¯ä¾èµ–é¢œè‰²ä¼ é€’ä¿¡æ¯</li></ul><h2 id="æ€§èƒ½ä¼˜åŒ–è€ƒè™‘">æ€§èƒ½ä¼˜åŒ–è€ƒè™‘</h2><h3 id="CSS-ä¼˜åŒ–">CSS ä¼˜åŒ–</h3><ul><li>ä½¿ç”¨ Tailwind CSS çš„å®ç”¨ç±»ï¼Œå‡å°‘è‡ªå®šä¹‰ CSS</li><li>å†…è”å…³é”®æ ·å¼ï¼Œå‡å°‘ HTTP è¯·æ±‚</li><li>åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜é™æ€èµ„æº</li></ul><h3 id="å¸ƒå±€ç¨³å®šæ€§">å¸ƒå±€ç¨³å®šæ€§</h3><ul><li>ä¸ºåŠ¨æ€å†…å®¹å®¹å™¨è®¾ç½® <code>min-height</code></li><li>ä½¿ç”¨ <code>flex-shrink-0</code> é˜²æ­¢é‡è¦å…ƒç´ è¢«å‹ç¼©</li><li>ä¸ºæ»šåŠ¨å®¹å™¨è®¾ç½®å›ºå®šé«˜åº¦</li></ul><h2 id="å¼€å‘å·¥ä½œæµå»ºè®®">å¼€å‘å·¥ä½œæµå»ºè®®</h2><h3 id="ç»„ä»¶åŒ–æ€ç»´">ç»„ä»¶åŒ–æ€ç»´</h3><p>è™½ç„¶è¿™æ˜¯ä¸€ä¸ªå•æ–‡ä»¶ HTMLï¼Œä½†åœ¨å¼€å‘æ—¶åº”ä¿æŒç»„ä»¶åŒ–æ€ç»´ï¼š</p><ol><li><strong>åŠŸèƒ½åŒºåŸŸåˆ†ç¦»</strong>ï¼šæ¯ä¸ª section éƒ½æ˜¯ç‹¬ç«‹çš„ç»„ä»¶</li><li><strong>æ ·å¼æ¨¡å—åŒ–</strong>ï¼šç›¸å…³æ ·å¼é›†ä¸­ç®¡ç†</li><li><strong>çŠ¶æ€ç‹¬ç«‹</strong>ï¼šæ¯ä¸ªç»„ä»¶ç®¡ç†è‡ªå·±çš„çŠ¶æ€</li></ol><h3 id="è°ƒè¯•æŠ€å·§">è°ƒè¯•æŠ€å·§</h3><p><strong>æµè§ˆå™¨å¼€å‘è€…å·¥å…·</strong></p><ul><li>ä½¿ç”¨å…ƒç´ æ£€æŸ¥å™¨è°ƒè¯•å¸ƒå±€</li><li>ç½‘ç»œé¢æ¿ç›‘æ§èµ„æºåŠ è½½</li><li>æ§åˆ¶å°æŸ¥çœ‹ JavaScript é”™è¯¯</li></ul><p><strong>å“åº”å¼æµ‹è¯•</strong></p><ul><li>ä½¿ç”¨æµè§ˆå™¨è®¾å¤‡æ¨¡æ‹Ÿå™¨</li><li>æµ‹è¯•ä¸åŒå±å¹•å°ºå¯¸ä¸‹çš„è¡¨ç°</li><li>éªŒè¯äº¤äº’çŠ¶æ€çš„è§†è§‰åé¦ˆ</li></ul><h2 id="ç»“è¯­">ç»“è¯­</h2><p>é€šè¿‡æœ¬ç« çš„è¯¦ç»†è®²è§£ï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº† NetCmdRegister ç”¨æˆ·ç•Œé¢çš„è®¾è®¡æ€è·¯å’Œå®ç°ç»†èŠ‚ã€‚æˆ‘ä»¬æ¶µç›–äº†ï¼š</p><ol><li><strong>æ•´ä½“å¸ƒå±€æ¶æ„</strong>ï¼šå“åº”å¼ç½‘æ ¼ç³»ç»Ÿå’Œå®¹å™¨è®¾è®¡</li><li><strong>ç»„ä»¶çº§è®¾è®¡</strong>ï¼šæ¯ä¸ªåŠŸèƒ½åŒºåŸŸçš„è¯¦ç»†å®ç°</li><li><strong>äº¤äº’è®¾è®¡</strong>ï¼šçŠ¶æ€ç®¡ç†ã€åé¦ˆæœºåˆ¶å’Œç”¨æˆ·ä½“éªŒ</li><li><strong>è§†è§‰è®¾è®¡</strong>ï¼šè‰²å½©ç³»ç»Ÿã€å›¾æ ‡è®¾è®¡å’Œæ ·å¼ä¼˜åŒ–</li><li><strong>æŠ€æœ¯å®ç°</strong>ï¼šTailwind CSS çš„é«˜çº§ç”¨æ³•å’Œè‡ªå®šä¹‰æ ·å¼</li></ol><p>è¿™äº›è®¾è®¡å†³ç­–å…±åŒåˆ›é€ äº†ä¸€ä¸ªæ—¢ç¾è§‚åˆå®ç”¨çš„ç”¨æˆ·ç•Œé¢ï¼Œä¸ºåç»­çš„åŠŸèƒ½å®ç°å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚</p><p>åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨æ¸²æŸ“è¿›ç¨‹çš„æ ¸å¿ƒé€»è¾‘ï¼Œå­¦ä¹ å¦‚ä½•è®©è¿™ä¸ªé™æ€ç•Œé¢å˜å¾—ç”ŸåŠ¨èµ·æ¥ï¼Œå®ç°å®Œæ•´çš„ç”¨æˆ·äº¤äº’åŠŸèƒ½ã€‚</p><p><strong>ä¸‹ä¸€ç¯‡é¢„å‘Š</strong>ï¼šã€ŠNetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ï¼ˆå››ï¼‰ï¼šæ¸²æŸ“è¿›ç¨‹çš„æ ¸å¿ƒé€»è¾‘ã€‹â€”â€”æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ JavaScript å®ç°ç•Œé¢äº¤äº’ã€çŠ¶æ€ç®¡ç†å’Œæ•°æ®æŒä¹…åŒ–ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> NetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> js </tag>
            
            <tag> electron </tag>
            
            <tag> NetCmdRegister </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ï¼ˆäºŒï¼‰ï¼šé¡¹ç›®æ­å»ºä¸çª—å£åˆ›å»º</title>
      <link href="/2025/11/02/NetCmdRegister-%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E4%B8%8E%E7%AA%97%E5%8F%A3%E5%88%9B%E5%BB%BA/"/>
      <url>/2025/11/02/NetCmdRegister-%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E4%B8%8E%E7%AA%97%E5%8F%A3%E5%88%9B%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1>NetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ï¼ˆäºŒï¼‰ï¼šé¡¹ç›®æ­å»ºä¸çª—å£åˆ›å»º</h1><p>å¤§å®¶å¥½ï¼æˆ‘æ˜¯ NetCmdRegister çš„å¼€å‘è€…ã€‚åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†é¡¹ç›®çš„æ•´ä½“æ¦‚å†µå’ŒæŠ€æœ¯æ¶æ„ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨é¡¹ç›®çš„æ­å»ºè¿‡ç¨‹å’Œçª—å£åˆ›å»ºçš„ç»†èŠ‚ã€‚è¿™æ˜¯æ•´ä¸ªåº”ç”¨å¼€å‘çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯ç†è§£ Electron åº”ç”¨ç”Ÿå‘½å‘¨æœŸçš„å…³é”®ã€‚</p><h2 id="ç¯å¢ƒå‡†å¤‡ä¸é¡¹ç›®åˆå§‹åŒ–">ç¯å¢ƒå‡†å¤‡ä¸é¡¹ç›®åˆå§‹åŒ–</h2><h3 id="å¼€å‘ç¯å¢ƒè¦æ±‚">å¼€å‘ç¯å¢ƒè¦æ±‚</h3><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p><p><strong>Node.js ç¯å¢ƒ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ£€æŸ¥ Node.js ç‰ˆæœ¬</span><br>node --version  <span class="hljs-comment"># éœ€è¦ 16.x æˆ–æ›´é«˜ç‰ˆæœ¬</span><br><br><span class="hljs-comment"># æ£€æŸ¥ npm ç‰ˆæœ¬  </span><br>npm --version   <span class="hljs-comment"># éœ€è¦ 8.x æˆ–æ›´é«˜ç‰ˆæœ¬</span><br></code></pre></td></tr></table></figure><p><strong>æ¨èå¼€å‘å·¥å…·</strong></p><ul><li><strong>Visual Studio Code</strong> - ä»£ç ç¼–è¾‘å™¨</li><li><strong>Git</strong> - ç‰ˆæœ¬æ§åˆ¶</li><li><strong>Chrome DevTools</strong> - è°ƒè¯•å·¥å…·ï¼ˆå†…ç½®åœ¨ Electron ä¸­ï¼‰</li></ul><h3 id="é¡¹ç›®åˆå§‹åŒ–æ­¥éª¤">é¡¹ç›®åˆå§‹åŒ–æ­¥éª¤</h3><p><strong>1. åˆ›å»ºé¡¹ç›®ç›®å½•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> net-cmd-register<br><span class="hljs-built_in">cd</span> net-cmd-register<br></code></pre></td></tr></table></figure><p><strong>2. åˆå§‹åŒ– package.json</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm init -y<br></code></pre></td></tr></table></figure><p>è¿™ä¼šç”Ÿæˆä¸€ä¸ªåŸºç¡€çš„ <code>package.json</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œå®šåˆ¶åŒ–é…ç½®ã€‚</p><h2 id="æ·±åº¦è§£æ-package-json">æ·±åº¦è§£æ package.json</h2><h3 id="åŸºç¡€é…ç½®è¯¦è§£">åŸºç¡€é…ç½®è¯¦è§£</h3><p>è®©æˆ‘ä»¬é€è¡Œåˆ†æ <code>package.json</code> çš„å…³é”®é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;net-cmd-register&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ç½‘ç»œå‘½ä»¤æ³¨å†Œå™¨ï¼Œç”¨äºæµ‹è¯•ç½‘å£ä¸‹å‘ä¸åŒå‘½ä»¤çš„æµ‹è¯•å·¥å…·ã€‚&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;main&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./main.js&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.1.4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;author&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;liansixin&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;license&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MIT&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><strong>å­—æ®µè¯´æ˜ï¼š</strong></p><ul><li><strong><code>name</code></strong>: é¡¹ç›®åç§°ï¼Œéµå¾ª kebab-case å‘½åè§„èŒƒ</li><li><strong><code>description</code></strong>: é¡¹ç›®æè¿°ï¼Œæ¸…æ™°è¯´æ˜åº”ç”¨ç”¨é€”</li><li><strong><code>main</code></strong>: <strong>è¿™æ˜¯ Electron åº”ç”¨æœ€é‡è¦çš„é…ç½®</strong>ï¼ŒæŒ‡å®šäº†ä¸»è¿›ç¨‹çš„å…¥å£æ–‡ä»¶</li><li><strong><code>version</code></strong>: è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼Œéµå¾ª major.minor.patch è§„åˆ™</li><li><strong><code>author</code></strong>: ä½œè€…ä¿¡æ¯</li><li><strong><code>license</code></strong>: å¼€æºè®¸å¯è¯</li></ul><h3 id="è„šæœ¬å‘½ä»¤é…ç½®">è„šæœ¬å‘½ä»¤é…ç½®</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron .&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron-builder&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;build:linux&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron-builder --linux&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><strong>è„šæœ¬å‘½ä»¤è¯¦è§£ï¼š</strong></p><p><strong><code>npm start</code> - å¼€å‘ç¯å¢ƒå¯åŠ¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">electron .<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å‘Šè¯‰ Electron ä»å½“å‰ç›®å½•å¯åŠ¨åº”ç”¨ï¼ŒElectron ä¼šè‡ªåŠ¨æŸ¥æ‰¾ <code>package.json</code> ä¸­ <code>main</code> å­—æ®µæŒ‡å®šçš„å…¥å£æ–‡ä»¶ã€‚</p><p><strong><code>npm run build</code> - åº”ç”¨æ‰“åŒ…</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">electron-builder<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ electron-builder å°†åº”ç”¨æ‰“åŒ…ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ”¯æŒ Windowsã€Linuxã€macOSã€‚</p><p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨è„šæœ¬å‘½ä»¤ï¼Ÿ</strong></p><ul><li>ç»Ÿä¸€å¼€å‘æµç¨‹</li><li>ç®€åŒ–å¤æ‚å‘½ä»¤</li><li>ä¾¿äºå›¢é˜Ÿåä½œ</li><li>é›†æˆåˆ° CI/CD æµç¨‹</li></ul><h3 id="ä¾èµ–ç®¡ç†">ä¾èµ–ç®¡ç†</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;devDependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;electron&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^37.2.4&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;electron-builder&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^26.0.12&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><strong>ä¾èµ–é€‰æ‹©ç­–ç•¥ï¼š</strong></p><p><strong>Electron ç‰ˆæœ¬é€‰æ‹©</strong></p><ul><li>é€‰æ‹© LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬ç¡®ä¿ç¨³å®šæ€§</li><li>é¿å…ä½¿ç”¨è¿‡æ–°çš„ç‰ˆæœ¬ï¼Œé˜²æ­¢å…¼å®¹æ€§é—®é¢˜</li><li>å®šæœŸæ›´æ–°ä»¥è·å¾—å®‰å…¨ä¿®å¤</li></ul><p><strong>ç‰ˆæœ¬å·è¯­ä¹‰</strong></p><ul><li><code>^37.2.4</code>ï¼šå…è®¸è‡ªåŠ¨æ›´æ–°åˆ° 37.x.x çš„æœ€æ–°ç‰ˆæœ¬</li><li>ä¿æŒä¾èµ–æ›´æ–°ä½†é¿å…ç ´åæ€§å˜æ›´</li></ul><p><strong>å®‰è£…ä¾èµ–</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install electron --save-dev<br>npm install electron-builder --save-dev<br></code></pre></td></tr></table></figure><h2 id="ä¸»è¿›ç¨‹å…¥å£ï¼šmain-js-æ·±åº¦è§£æ">ä¸»è¿›ç¨‹å…¥å£ï¼šmain.js æ·±åº¦è§£æ</h2><h3 id="æ¨¡å—å¯¼å…¥ä¸æ¶æ„è®¾è®¡">æ¨¡å—å¯¼å…¥ä¸æ¶æ„è®¾è®¡</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; app, <span class="hljs-title class_">BrowserWindow</span>, ipcMain, dialog &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;electron&#x27;</span>);<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><span class="hljs-keyword">const</span> dgram = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;dgram&#x27;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs/promises&#x27;</span>);<br></code></pre></td></tr></table></figure><p><strong>æ¨¡å—å¯¼å…¥ç­–ç•¥ï¼š</strong></p><p><strong>Electron æ ¸å¿ƒæ¨¡å—</strong></p><ul><li><code>app</code>: æ§åˆ¶åº”ç”¨ç”Ÿå‘½å‘¨æœŸ</li><li><code>BrowserWindow</code>: åˆ›å»ºå’Œç®¡ç†çª—å£</li><li><code>ipcMain</code>: å¤„ç†è¿›ç¨‹é—´é€šä¿¡</li><li><code>dialog</code>: æ˜¾ç¤ºåŸç”Ÿå¯¹è¯æ¡†</li></ul><p><strong>Node.js å†…ç½®æ¨¡å—</strong></p><ul><li><code>path</code>: è·¯å¾„å¤„ç†ï¼Œç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§</li><li><code>dgram</code>: UDP ç½‘ç»œé€šä¿¡æ ¸å¿ƒæ¨¡å—</li><li><code>fs</code>: æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</li></ul><p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ require è€Œä¸æ˜¯ importï¼Ÿ</strong></p><ul><li>Electron åŸºäº CommonJS æ¨¡å—ç³»ç»Ÿ</li><li>ç¡®ä¿ä¸ Node.js ç”Ÿæ€çš„å…¼å®¹æ€§</li><li>ç®€åŒ–æ„å»ºé…ç½®</li></ul><h3 id="å…¨å±€çŠ¶æ€ç®¡ç†">å…¨å±€çŠ¶æ€ç®¡ç†</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> udpServer = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">let</span> udpClient = <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure><p><strong>çŠ¶æ€ç®¡ç†è®¾è®¡æ€è·¯ï¼š</strong></p><ol><li><strong>å•ä¸€æ•°æ®æº</strong>ï¼šæ‰€æœ‰ UDP ç›¸å…³çŠ¶æ€é›†ä¸­ç®¡ç†</li><li><strong>æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶åˆ›å»ºï¼Œé€€å‡ºæ—¶æ¸…ç†</li><li><strong>é”™è¯¯è¾¹ç•Œ</strong>ï¼šé€šè¿‡ null æ£€æŸ¥é¿å…æœªåˆå§‹åŒ–è®¿é—®</li></ol><h3 id="çª—å£åˆ›å»ºå‡½æ•°è¯¦è§£">çª—å£åˆ›å»ºå‡½æ•°è¯¦è§£</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createWindow</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> win = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>(&#123;<br>    <span class="hljs-attr">width</span>: <span class="hljs-number">1200</span>,<br>    <span class="hljs-attr">height</span>: <span class="hljs-number">950</span>,<br>    <span class="hljs-attr">webPreferences</span>: &#123;<br>      <span class="hljs-attr">preload</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&#x27;preload.js&#x27;</span>),<br>      <span class="hljs-attr">contextIsolation</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">false</span><br>    &#125;<br>  &#125;);<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>çª—å£é…ç½®å‚æ•°æ·±åº¦è§£æï¼š</strong></p><p><strong>å°ºå¯¸è®¾è®¡è€ƒé‡</strong></p><ul><li><code>width: 1200</code>ï¼šé€‚åº”å¤§å¤šæ•°ç°ä»£æ˜¾ç¤ºå™¨</li><li><code>height: 950</code>ï¼šæä¾›å……è¶³çš„å·¥ä½œç©ºé—´ï¼Œé¿å…è¿‡åº¦æ»šåŠ¨</li></ul><p><strong>å®‰å…¨é…ç½®è¯¦è§£</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">webPreferences</span>: &#123;<br>  <span class="hljs-attr">preload</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&#x27;preload.js&#x27;</span>),  <span class="hljs-comment">// é¢„åŠ è½½è„šæœ¬</span><br>  <span class="hljs-attr">contextIsolation</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¯ç”¨ä¸Šä¸‹æ–‡éš”ç¦»</span><br>  <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">false</span>   <span class="hljs-comment">// ç¦ç”¨ Node.js é›†æˆ</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä¸ºä»€ä¹ˆè¿™æ ·çš„å®‰å…¨é…ç½®ï¼Ÿ</strong></p><p><strong><code>contextIsolation: true</code></strong></p><ul><li>å°†æ¸²æŸ“è¿›ç¨‹ä¸ä¸»è¿›ç¨‹éš”ç¦»</li><li>é˜²æ­¢æ¶æ„ä»£ç è®¿é—® Node.js API</li><li>æ˜¯ç°ä»£ Electron åº”ç”¨çš„å®‰å…¨æœ€ä½³å®è·µ</li></ul><p><strong><code>nodeIntegration: false</code></strong></p><ul><li>æ¸²æŸ“è¿›ç¨‹ä¸èƒ½ç›´æ¥è®¿é—® Node.js</li><li>æ‰€æœ‰ç³»ç»Ÿè®¿é—®å¿…é¡»é€šè¿‡é¢„åŠ è½½è„šæœ¬</li><li>å¤§å¹…æé«˜åº”ç”¨å®‰å…¨æ€§</li></ul><p><strong><code>preload</code> è·¯å¾„å¤„ç†</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&#x27;preload.js&#x27;</span>)<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>path.join</code> å’Œ <code>__dirname</code> ç¡®ä¿è·¨å¹³å°è·¯å¾„å…¼å®¹æ€§ã€‚</p><h3 id="å†…å®¹åŠ è½½ä¸å¼€å‘å·¥å…·">å†…å®¹åŠ è½½ä¸å¼€å‘å·¥å…·</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">win.<span class="hljs-title function_">loadFile</span>(<span class="hljs-string">&#x27;index.html&#x27;</span>);<br><br><span class="hljs-comment">// å¼€å‘æ—¶å–æ¶ˆæ³¨é‡Šå¯ä»¥æ‰“å¼€å¼€å‘è€…å·¥å…·</span><br><span class="hljs-comment">// win.webContents.openDevTools();</span><br></code></pre></td></tr></table></figure><p><strong>å†…å®¹åŠ è½½ç­–ç•¥ï¼š</strong></p><p><strong><code>win.loadFile('index.html')</code></strong></p><ul><li>åŠ è½½æœ¬åœ° HTML æ–‡ä»¶</li><li>ç›¸å¯¹äºåº”ç”¨ç¨‹åºæ ¹ç›®å½•</li><li>æ”¯æŒæ–‡ä»¶åè®®ï¼ˆfile://ï¼‰</li></ul><p><strong>å¼€å‘è€…å·¥å…·ç®¡ç†</strong></p><ul><li>å¼€å‘é˜¶æ®µï¼šå¯ç”¨å¼€å‘è€…å·¥å…·ä¾¿äºè°ƒè¯•</li><li>ç”Ÿäº§ç¯å¢ƒï¼šæ³¨é‡Šæ‰ï¼Œé¿å…ç”¨æˆ·è¯¯æ“ä½œ</li><li>å¯é€‰ï¼šé€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶</li></ul><h2 id="åº”ç”¨ç”Ÿå‘½å‘¨æœŸæ·±åº¦è§£æ">åº”ç”¨ç”Ÿå‘½å‘¨æœŸæ·±åº¦è§£æ</h2><h3 id="åº”ç”¨å¯åŠ¨æµç¨‹">åº”ç”¨å¯åŠ¨æµç¨‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript">app.<span class="hljs-title function_">whenReady</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title function_">createWindow</span>();<br>  <br>  app.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;activate&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">BrowserWindow</span>.<span class="hljs-title function_">getAllWindows</span>().<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-title function_">createWindow</span>();<br>    &#125;<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿå‘½å‘¨æœŸäº‹ä»¶è¯¦è§£ï¼š</strong></p><p><strong><code>app.whenReady()</code></strong></p><ul><li>åº”ç”¨å®Œæˆåˆå§‹åŒ–åè§¦å‘</li><li>è¿”å› Promiseï¼Œä¾¿äºä½¿ç”¨ async/await</li><li>è¿™æ˜¯åˆ›å»ºçª—å£çš„å®‰å…¨æ—¶æœº</li></ul><p><strong><code>activate</code> äº‹ä»¶ï¼ˆmacOS ç‰¹æœ‰ï¼‰</strong></p><ul><li>å½“ç”¨æˆ·ç‚¹å‡» Dock å›¾æ ‡æ—¶è§¦å‘</li><li>å¦‚æœæ²¡æœ‰æ‰“å¼€çš„çª—å£ï¼Œåˆ›å»ºæ–°çª—å£</li><li>æä¾›ç±»ä¼¼åŸç”Ÿ macOS åº”ç”¨çš„è¡Œä¸º</li></ul><h3 id="åº”ç”¨å…³é—­æµç¨‹">åº”ç”¨å…³é—­æµç¨‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">app.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;window-all-closed&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">platform</span> !== <span class="hljs-string">&#x27;darwin&#x27;</span>) &#123;<br>    <span class="hljs-keyword">if</span> (udpServer) udpServer.<span class="hljs-title function_">close</span>();<br>    <span class="hljs-keyword">if</span> (udpClient) udpClient.<span class="hljs-title function_">close</span>();<br>    app.<span class="hljs-title function_">quit</span>();<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>è·¨å¹³å°å…³é—­ç­–ç•¥ï¼š</strong></p><p><strong>å¹³å°å·®å¼‚å¤„ç†</strong></p><ul><li><strong>Windows/Linux</strong>ï¼šæ‰€æœ‰çª—å£å…³é—­æ—¶é€€å‡ºåº”ç”¨</li><li><strong>macOS</strong>ï¼šçª—å£å…³é—­ä½†åº”ç”¨ç»§ç»­è¿è¡Œï¼Œç¬¦åˆå¹³å°æƒ¯ä¾‹</li></ul><p><strong>èµ„æºæ¸…ç†æœ€ä½³å®è·µ</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (udpServer) udpServer.<span class="hljs-title function_">close</span>();<br><span class="hljs-keyword">if</span> (udpClient) udpClient.<span class="hljs-title function_">close</span>();<br></code></pre></td></tr></table></figure><ul><li>æ˜¾å¼é‡Šæ”¾ç½‘ç»œèµ„æº</li><li>é¿å…ç«¯å£å ç”¨é—®é¢˜</li><li>ç¡®ä¿å¹²å‡€çš„åº”ç”¨é€€å‡º</li></ul><h2 id="å¼€å‘å·¥ä½œæµä¸è°ƒè¯•æŠ€å·§">å¼€å‘å·¥ä½œæµä¸è°ƒè¯•æŠ€å·§</h2><h3 id="å¼€å‘ç¯å¢ƒæ­å»º">å¼€å‘ç¯å¢ƒæ­å»º</h3><p><strong>1. é¡¹ç›®ç»“æ„åˆ›å»º</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">net-cmd-register/<br>â”œâ”€â”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.js</span><br>â”œâ”€â”€ preload<span class="hljs-selector-class">.js</span><br>â”œâ”€â”€ index<span class="hljs-selector-class">.html</span><br>â”œâ”€â”€ renderer<span class="hljs-selector-class">.js</span><br>â”œâ”€â”€ package<span class="hljs-selector-class">.json</span><br>â””â”€â”€ styles.css<br></code></pre></td></tr></table></figure><p><strong>2. å¼€å‘å‘½ä»¤é…ç½®</strong>åœ¨ <code>package.json</code> ä¸­æ·»åŠ å¼€å‘è„šæœ¬ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;dev&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron . --enable-logging&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;dev-debug&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron . --inspect=5858&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="è°ƒè¯•æŠ€å·§">è°ƒè¯•æŠ€å·§</h3><p><strong>ä¸»è¿›ç¨‹è°ƒè¯•</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åœ¨ main.js ä¸­æ·»åŠ </span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ä¸»è¿›ç¨‹å¯åŠ¨æˆåŠŸ&#x27;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;åº”ç”¨è·¯å¾„:&#x27;</span>, __dirname);<br></code></pre></td></tr></table></figure><p><strong>æ¸²æŸ“è¿›ç¨‹è°ƒè¯•</strong></p><ul><li>ä½¿ç”¨ <code>win.webContents.openDevTools()</code> æ‰“å¼€å¼€å‘è€…å·¥å…·</li><li>æˆ–è€…åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­æŒ‰ F12ï¼ˆå¦‚æœå¯ç”¨ï¼‰</li></ul><p><strong>è¿›ç¨‹é—´é€šä¿¡è°ƒè¯•</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åœ¨ preload.js ä¸­æ·»åŠ æ—¥å¿—</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;é¢„åŠ è½½è„šæœ¬æ‰§è¡Œ&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2><h3 id="é—®é¢˜1ï¼šçª—å£åˆ›å»ºå¤±è´¥">é—®é¢˜1ï¼šçª—å£åˆ›å»ºå¤±è´¥</h3><p><strong>ç—‡çŠ¶</strong>ï¼šåº”ç”¨å¯åŠ¨ä½†æ²¡æœ‰æ˜¾ç¤ºçª—å£</p><p><strong>æ’æŸ¥æ­¥éª¤ï¼š</strong></p><ol><li>æ£€æŸ¥ <code>package.json</code> ä¸­çš„ <code>main</code> å­—æ®µ</li><li>ç¡®è®¤ <code>main.js</code> æ–‡ä»¶è·¯å¾„æ­£ç¡®</li><li>æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯</li></ol><h3 id="é—®é¢˜2ï¼šå®‰å…¨è­¦å‘Š">é—®é¢˜2ï¼šå®‰å…¨è­¦å‘Š</h3><p><strong>ç—‡çŠ¶</strong>ï¼šå¼€å‘æ—¶çœ‹åˆ°å®‰å…¨ç›¸å…³è­¦å‘Š</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// æ­£ç¡®çš„å®‰å…¨é…ç½®</span><br><span class="hljs-attr">webPreferences</span>: &#123;<br>  <span class="hljs-attr">preload</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&#x27;preload.js&#x27;</span>),<br>  <span class="hljs-attr">contextIsolation</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é—®é¢˜3ï¼šè·¯å¾„é—®é¢˜">é—®é¢˜3ï¼šè·¯å¾„é—®é¢˜</h3><p><strong>ç—‡çŠ¶</strong>ï¼šåœ¨ä¸åŒå¹³å°ä¸Šè·¯å¾„é”™è¯¯</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ä½¿ç”¨ path æ¨¡å—å¤„ç†è·¯å¾„</span><br><span class="hljs-keyword">const</span> configPath = path.<span class="hljs-title function_">join</span>(app.<span class="hljs-title function_">getPath</span>(<span class="hljs-string">&#x27;userData&#x27;</span>), <span class="hljs-string">&#x27;config.json&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="æœ€ä½³å®è·µæ€»ç»“">æœ€ä½³å®è·µæ€»ç»“</h2><h3 id="ä»£ç ç»„ç»‡">ä»£ç ç»„ç»‡</h3><p><strong>1. æ¨¡å—åŒ–è®¾è®¡</strong></p><ul><li>ä¸»è¿›ç¨‹é€»è¾‘é›†ä¸­åœ¨ <code>main.js</code></li><li>æ¸²æŸ“é€»è¾‘åœ¨ <code>renderer.js</code></li><li>é€šä¿¡æ¡¥æ¢åœ¨ <code>preload.js</code></li></ul><p><strong>2. é”™è¯¯å¤„ç†</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">app.<span class="hljs-title function_">whenReady</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title function_">createWindow</span>();<br>&#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;åº”ç”¨å¯åŠ¨å¤±è´¥:&#x27;</span>, error);<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>3. èµ„æºç®¡ç†</strong></p><ul><li>åŠæ—¶é‡Šæ”¾ç½‘ç»œè¿æ¥</li><li>æ¸…ç†äº‹ä»¶ç›‘å¬å™¨</li><li>ç®¡ç†çª—å£å¼•ç”¨</li></ul><h3 id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</h3><p><strong>1. å»¶è¿ŸåŠ è½½</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// éå…³é”®åŠŸèƒ½å¯ä»¥å»¶è¿Ÿåˆå§‹åŒ–</span><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title function_">initializeSecondaryFeatures</span>();<br>&#125;, <span class="hljs-number">1000</span>);<br></code></pre></td></tr></table></figure><p><strong>2. å†…å­˜ç®¡ç†</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åŠæ—¶æ¸…é™¤å¼•ç”¨</span><br>win.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;closed&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  win = <span class="hljs-literal">null</span>;<br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="å®æˆ˜ç»ƒä¹ ">å®æˆ˜ç»ƒä¹ </h2><p>ä¸ºäº†åŠ æ·±ç†è§£ï¼Œå»ºè®®ä½ å°è¯•ä»¥ä¸‹ç»ƒä¹ ï¼š</p><p><strong>ç»ƒä¹ 1ï¼šåˆ›å»ºåŸºç¡€çª—å£</strong></p><ol><li>æŒ‰ç…§æ–‡ç« æ­¥éª¤åˆå§‹åŒ–é¡¹ç›®</li><li>åˆ›å»ºåŸºæœ¬çš„ <code>main.js</code> æ–‡ä»¶</li><li>å®ç°çª—å£åˆ›å»ºå’Œç”Ÿå‘½å‘¨æœŸç®¡ç†</li></ol><p><strong>ç»ƒä¹ 2ï¼šæ·»åŠ å®‰å…¨é…ç½®</strong></p><ol><li>é…ç½®ä¸Šä¸‹æ–‡éš”ç¦»</li><li>è®¾ç½®é¢„åŠ è½½è„šæœ¬è·¯å¾„</li><li>ç¦ç”¨ Node.js é›†æˆ</li></ol><p><strong>ç»ƒä¹ 3ï¼šè·¨å¹³å°æµ‹è¯•</strong></p><ol><li>æµ‹è¯•ä¸åŒå¹³å°çš„å…³é—­è¡Œä¸º</li><li>éªŒè¯è·¯å¾„å¤„ç†çš„å…¼å®¹æ€§</li></ol><h2 id="ç»“è¯­">ç»“è¯­</h2><p>é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œæˆ‘ä»¬æ·±å…¥æŒæ¡äº†ï¼š</p><ol><li><strong>é¡¹ç›®åˆå§‹åŒ–</strong>ï¼šä»é›¶æ­å»º Electron é¡¹ç›®ç»“æ„</li><li><strong>é…ç½®ç®¡ç†</strong>ï¼špackage.json çš„è¯¦ç»†é…ç½®è§£æ</li><li><strong>çª—å£åˆ›å»º</strong>ï¼šBrowserWindow çš„å®Œæ•´é…ç½®é€‰é¡¹</li><li><strong>å®‰å…¨å®è·µ</strong>ï¼šç°ä»£ Electron åº”ç”¨çš„å®‰å…¨é…ç½®</li><li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šåº”ç”¨å¯åŠ¨å’Œå…³é—­çš„å®Œæ•´æµç¨‹</li><li><strong>è°ƒè¯•æŠ€å·§</strong>ï¼šå¼€å‘è¿‡ç¨‹ä¸­çš„é—®é¢˜æ’æŸ¥æ–¹æ³•</li></ol><p>è¿™äº›çŸ¥è¯†ä¸ºåç»­çš„åŠŸèƒ½å¼€å‘å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ç”¨æˆ·ç•Œé¢çš„è®¾è®¡ä¸å®ç°ï¼ŒåŒ…æ‹¬ HTML ç»“æ„ã€CSS æ ·å¼å’Œå‰ç«¯äº¤äº’é€»è¾‘ã€‚</p><p>å¦‚æœä½ åœ¨å®è·µè¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚æˆ‘ä¼šåŠæ—¶å›å¤å¹¶æä¾›å¸®åŠ©ï¼</p><p><strong>ä¸‹ä¸€ç¯‡é¢„å‘Š</strong>ï¼šã€ŠNetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ï¼ˆä¸‰ï¼‰ï¼šUI ç•Œé¢è®¾è®¡ä¸å®ç°ã€‹â€”â€”æˆ‘ä»¬å°†ä½¿ç”¨ HTML å’Œ Tailwind CSS æ„å»ºç°ä»£åŒ–çš„å·¥ä½œç•Œé¢ï¼Œå¹¶å®ç°å®Œæ•´çš„ç”¨æˆ·äº¤äº’é€»è¾‘ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> NetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> js </tag>
            
            <tag> electron </tag>
            
            <tag> NetCmdRegister </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ï¼ˆä¸€ï¼‰ï¼šç³»åˆ—ä»‹ç»ä¸é¡¹ç›®æ¦‚è§ˆ</title>
      <link href="/2025/11/02/NetCmdRegister-%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%B3%BB%E5%88%97%E4%BB%8B%E7%BB%8D%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%A7%88/"/>
      <url>/2025/11/02/NetCmdRegister-%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E7%B3%BB%E5%88%97%E4%BB%8B%E7%BB%8D%E4%B8%8E%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%A7%88/</url>
      
        <content type="html"><![CDATA[<h1>NetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ï¼ˆä¸€ï¼‰ï¼šç³»åˆ—ä»‹ç»ä¸é¡¹ç›®æ¦‚è§ˆ</h1><p>å¤§å®¶å¥½ï¼æˆ‘æ˜¯ NetCmdRegister åº”ç”¨çš„å¼€å‘è€…ã€‚æ¬¢è¿é˜…è¯»è¿™ä¸ªç³»åˆ—åšå®¢çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼åœ¨è¿™ä¸ªç³»åˆ—ä¸­ï¼Œæˆ‘å°†è¯¦ç»†è®²è§£å¦‚ä½•ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªå®Œæ•´çš„ Electron æ¡Œé¢åº”ç”¨â€”â€”NetCmdRegisterã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-NetCmdRegisterï¼Ÿ">ä»€ä¹ˆæ˜¯ NetCmdRegisterï¼Ÿ</h2><h3 id="åº”ç”¨èƒŒæ™¯ä¸å®šä½">åº”ç”¨èƒŒæ™¯ä¸å®šä½</h3><p>åœ¨æˆ‘æ—¥å¸¸çš„ç½‘ç»œè®¾å¤‡å¼€å‘å’Œè°ƒè¯•å·¥ä½œä¸­ï¼Œç»å¸¸éœ€è¦ä¸å„ç§ç½‘ç»œè®¾å¤‡è¿›è¡Œ UDP é€šä¿¡æµ‹è¯•ã€‚ç°æœ‰çš„ç½‘ç»œè°ƒè¯•å·¥å…·è™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†å¾€å¾€å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>åŠŸèƒ½è¿‡äºå¤æ‚ï¼Œå­¦ä¹ æˆæœ¬é«˜</li><li>ç¼ºå°‘ä¸“é—¨çš„å‘½ä»¤ç®¡ç†åŠŸèƒ½</li><li>ç•Œé¢ä¸å¤Ÿç›´è§‚ï¼Œä¸‘ï¼ï¼ï¼</li><li>ä¸æ”¯æŒé…ç½®çš„å¯¼å…¥å¯¼å‡º</li></ul><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘å†³å®šå¼€å‘ä¸€ä¸ªä¸“é—¨é’ˆå¯¹ UDP å‘½ä»¤æµ‹è¯•çš„æ¡Œé¢å·¥å…·â€”â€”NetCmdRegisterã€‚</p><h3 id="æ ¸å¿ƒåŠŸèƒ½è¯¦è§£">æ ¸å¿ƒåŠŸèƒ½è¯¦è§£</h3><p><strong>1. å‘½ä»¤æ³¨å†Œç®¡ç†</strong></p><ul><li>å¯ä»¥ä¿å­˜å¸¸ç”¨çš„ UDP å‘½ä»¤æ¨¡æ¿</li><li>æ”¯æŒå‘½ä»¤çš„æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤</li><li>å‘½ä»¤åç§°å’Œå†…å®¹åˆ†å¼€å­˜å‚¨ï¼Œä¾¿äºç®¡ç†</li></ul><p><strong>2. UDP å‘½ä»¤å‘é€</strong></p><ul><li>æ”¯æŒå‘æŒ‡å®š IP åœ°å€å’Œç«¯å£å‘é€å‘½ä»¤</li><li>å®Œæ•´çš„åå…­è¿›åˆ¶æ•°æ®æ”¯æŒ</li><li>æ‰¹é‡å‘é€é€‰ä¸­çš„å¤šä¸ªå‘½ä»¤</li></ul><p><strong>3. æœ¬åœ° UDP ç›‘å¬</strong></p><ul><li>å¯ä»¥ç›‘å¬æœ¬åœ°ä»»æ„ç«¯å£</li><li>å®æ—¶æ˜¾ç¤ºæ¥æ”¶åˆ°çš„æ•°æ®</li><li>è‡ªåŠ¨æ ¼å¼åŒ–ä¸ºåå…­è¿›åˆ¶æ˜¾ç¤º</li></ul><p><strong>4. é«˜çº§åŠŸèƒ½</strong></p><ul><li>å®šæ—¶å‘é€ï¼šæŒ‰æŒ‡å®šé—´éš”è‡ªåŠ¨å‘é€å‘½ä»¤</li><li>é…ç½®å¯¼å…¥å¯¼å‡ºï¼šæ”¯æŒ JSON å’Œ CFG æ ¼å¼</li><li>è¯¦ç»†çš„æ—¥å¿—è®°å½•ï¼šæ‰€æœ‰æ“ä½œéƒ½æœ‰å®Œæ•´æ—¥å¿—</li></ul><h3 id="é€‚ç”¨åœºæ™¯">é€‚ç”¨åœºæ™¯</h3><p>è¿™ä¸ªå·¥å…·ç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>ç½‘ç»œè®¾å¤‡å¼€å‘è°ƒè¯•</li><li>ç‰©è”ç½‘è®¾å¤‡æµ‹è¯•</li><li>åè®®åˆ†æå’ŒéªŒè¯</li><li>è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬å¼€å‘</li><li>åµŒå…¥å¼è°ƒè¯•æµ‹è¯•</li></ul><h2 id="Electron-æ ¸å¿ƒæ¶æ„è¯¦è§£">Electron æ ¸å¿ƒæ¶æ„è¯¦è§£</h2><h3 id="ä¸ºä»€ä¹ˆé€‰æ‹©-Electronï¼Ÿ">ä¸ºä»€ä¹ˆé€‰æ‹© Electronï¼Ÿ</h3><p>åœ¨æŠ€æœ¯é€‰å‹é˜¶æ®µï¼Œæˆ‘è€ƒè™‘äº†å¤šç§æ¡Œé¢åº”ç”¨å¼€å‘æ–¹æ¡ˆï¼š</p><ul><li><strong>Qt/C++</strong>ï¼šæ€§èƒ½å¥½ï¼Œä½†å­¦ä¹ æ›²çº¿é™¡å³­ï¼ˆä¸»è¦æ˜¯UIéš¾å†™çš„å¥½çœ‹QAQï¼‰</li><li><strong>Java Swing</strong>ï¼šè·¨å¹³å°ï¼Œä½†ç•Œé¢ç°ä»£åŒ–ç¨‹åº¦ä¸å¤Ÿï¼ˆè¿™ä¸ªä¸‘åˆ°çˆ†ï¼‰</li><li><strong>.NET</strong>ï¼šWindows å¹³å°ä¼˜ç§€ï¼Œä½†è·¨å¹³å°æ”¯æŒæœ‰é™ï¼ˆåµŒå…¥å¼é¢†åŸŸå¯èƒ½ä¼šç”¨åˆ°linuxï¼‰</li><li><strong>Electron</strong>ï¼šå®Œç¾å¹³è¡¡äº†å¼€å‘æ•ˆç‡å’Œè·¨å¹³å°éœ€æ±‚</li></ul><p>æœ€ç»ˆé€‰æ‹© Electron çš„ä¸»è¦åŸå› ï¼š</p><ul><li>è¿˜ç®—ç†Ÿæ‚‰çš„ Web æŠ€æœ¯æ ˆ</li><li>å¼ºå¤§çš„è·¨å¹³å°èƒ½åŠ›ï¼ˆwinï¼Œlinuxï¼‰</li><li>ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ</li><li>ç°ä»£åŒ–çš„ UI å¼€å‘ä½“éªŒï¼ˆæƒ³å†™å¥½çœ‹å¾ˆå®¹æ˜“ï¼‰</li></ul><h3 id="ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹æ·±åº¦è§£æ">ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹æ·±åº¦è§£æ</h3><p><strong>ä¸»è¿›ç¨‹ (Main Process)</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åœ¨ main.js ä¸­</span><br><span class="hljs-keyword">const</span> &#123; app, <span class="hljs-title class_">BrowserWindow</span> &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;electron&#x27;</span>)<br><br><span class="hljs-comment">// ä¸»è¿›ç¨‹è´Ÿè´£åˆ›å»ºçª—å£</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">createWindow</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> win = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>(&#123;<br>    <span class="hljs-attr">width</span>: <span class="hljs-number">1200</span>,<br>    <span class="hljs-attr">height</span>: <span class="hljs-number">950</span><br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸»è¿›ç¨‹æ˜¯åº”ç”¨çš„&quot;æ§åˆ¶ä¸­å¿ƒ&quot;ï¼Œå®ƒçš„ä¸»è¦èŒè´£åŒ…æ‹¬ï¼š</p><ul><li><strong>çª—å£ç®¡ç†</strong>ï¼šåˆ›å»ºã€å…³é—­åº”ç”¨çª—å£</li><li><strong>åº”ç”¨ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šå¤„ç†å¯åŠ¨ã€é€€å‡ºç­‰äº‹ä»¶</li><li><strong>åŸç”ŸåŠŸèƒ½</strong>ï¼šè®¿é—®æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œæ¥å£ç­‰</li><li><strong>è¿›ç¨‹é—´é€šä¿¡</strong>ï¼šä¸æ¸²æŸ“è¿›ç¨‹å®‰å…¨åœ°äº¤æ¢æ•°æ®</li></ul><p><strong>æ¸²æŸ“è¿›ç¨‹ (Renderer Process)</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åœ¨ renderer.js ä¸­</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;send-button&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-comment">// å¤„ç†ç”¨æˆ·äº¤äº’</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>æ¸²æŸ“è¿›ç¨‹æ˜¯æ¯ä¸ªçª—å£çš„&quot;å±•ç¤ºå±‚&quot;ï¼Œç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ul><li><strong>åŸºäº Chromium</strong>ï¼šæ‹¥æœ‰å®Œæ•´çš„æµè§ˆå™¨ç¯å¢ƒ</li><li><strong>æ²™ç›’ç¯å¢ƒ</strong>ï¼šé»˜è®¤ä¸èƒ½ç›´æ¥è®¿é—®ç³»ç»Ÿèµ„æº</li><li><strong>UI æ¸²æŸ“</strong>ï¼šè´Ÿè´£æ˜¾ç¤ºç•Œé¢å’Œå“åº”ç”¨æˆ·æ“ä½œ</li><li><strong>é€šè¿‡ IPC é€šä¿¡</strong>ï¼šé€šè¿‡é¢„åŠ è½½è„šæœ¬ä¸ä¸»è¿›ç¨‹å®‰å…¨é€šä¿¡</li></ul><h3 id="è¿›ç¨‹é—´é€šä¿¡çš„é‡è¦æ€§">è¿›ç¨‹é—´é€šä¿¡çš„é‡è¦æ€§</h3><p>åœ¨ Electron ä¸­ï¼Œä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹æ˜¯éš”ç¦»çš„ï¼Œå®ƒä»¬ä¹‹é—´çš„é€šä¿¡å¿…é¡»é€šè¿‡ IPCï¼ˆInter-Process Communicationï¼‰æœºåˆ¶ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">æ¸²æŸ“è¿›ç¨‹ â†’ é¢„åŠ è½½è„šæœ¬ â†’ ä¸»è¿›ç¨‹<br>ä¸»è¿›ç¨‹ â†’ æ¸²æŸ“è¿›ç¨‹ï¼ˆé€šè¿‡äº‹ä»¶ï¼‰<br></code></pre></td></tr></table></figure><p>è¿™ç§è®¾è®¡æ—¢ä¿è¯äº†å®‰å…¨æ€§ï¼ˆæ¸²æŸ“è¿›ç¨‹ä¸èƒ½éšæ„è®¿é—®ç³»ç»Ÿèµ„æºï¼‰ï¼Œåˆæä¾›äº†è¶³å¤Ÿçš„çµæ´»æ€§ã€‚</p><h2 id="æŠ€æœ¯æ ˆæ·±åº¦è§£æ">æŠ€æœ¯æ ˆæ·±åº¦è§£æ</h2><h3 id="å‰ç«¯æŠ€æœ¯æ ˆ">å‰ç«¯æŠ€æœ¯æ ˆ</h3><p><strong>HTML5</strong></p><ul><li>è¯­ä¹‰åŒ–æ ‡ç­¾ï¼Œæé«˜å¯è¯»æ€§</li><li>ç°ä»£è¡¨å•å…ƒç´ ï¼Œæ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</li><li>æœ¬åœ°å­˜å‚¨æ”¯æŒ</li></ul><p><strong>Tailwind CSS</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å®ç”¨ä¼˜å…ˆçš„ CSS ç±» --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded&quot;</span>&gt;</span><br>  ç‚¹å‡»æˆ‘<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é€‰æ‹© Tailwind CSS çš„åŸå› ï¼š</p><ul><li><strong>å®ç”¨ä¼˜å…ˆ</strong>ï¼šä¸éœ€è¦ç¼–å†™è‡ªå®šä¹‰ CSS</li><li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šå†…ç½®å“åº”å¼å‰ç¼€</li><li><strong>è®¾è®¡ä¸€è‡´æ€§</strong>ï¼šä½¿ç”¨é¢„å®šä¹‰çš„è®¾è®¡ç³»ç»Ÿ</li><li><strong>å¼€å‘æ•ˆç‡</strong>ï¼šå¿«é€ŸåŸå‹å¼€å‘</li></ul><p><strong>JavaScript ES6+</strong></p><ul><li>ç°ä»£è¯­æ³•ç‰¹æ€§</li><li>æ¨¡å—åŒ–å¼€å‘</li><li>Promise å’Œ async/await</li><li>ç®­å¤´å‡½æ•°ç­‰è¯­æ³•ç³–</li></ul><h3 id="åç«¯æŠ€æœ¯æ ˆ">åç«¯æŠ€æœ¯æ ˆ</h3><p><strong>Node.js</strong></p><ul><li>äº‹ä»¶é©±åŠ¨ï¼Œéé˜»å¡ I/O</li><li>ä¸°å¯Œçš„å†…ç½®æ¨¡å—</li><li>å¼ºå¤§çš„åŒ…ç®¡ç†ç”Ÿæ€ç³»ç»Ÿ</li></ul><p><strong>å…³é”® Node.js æ¨¡å—ï¼š</strong></p><ul><li><code>dgram</code>ï¼šUDP æ•°æ®æŠ¥å¥—æ¥å­—</li><li><code>fs</code>ï¼šæ–‡ä»¶ç³»ç»Ÿæ“ä½œ</li><li><code>path</code>ï¼šè·¯å¾„å¤„ç†</li><li><code>events</code>ï¼šäº‹ä»¶è§¦å‘å™¨</li></ul><h3 id="å¼€å‘å·¥å…·é“¾">å¼€å‘å·¥å…·é“¾</h3><p><strong>Electron</strong></p><ul><li>ç‰ˆæœ¬ï¼š^37.2.4</li><li>æä¾›å®Œæ•´çš„æ¡Œé¢åº”ç”¨è¿è¡Œæ—¶</li></ul><p><strong>electron-builder</strong></p><ul><li>ç‰ˆæœ¬ï¼š^26.0.12</li><li>åº”ç”¨æ‰“åŒ…å’Œåˆ†å‘</li><li>æ”¯æŒå¤šç§ç›®æ ‡æ ¼å¼</li></ul><h2 id="é¡¹ç›®ç»“æ„æ·±åº¦åˆ†æ">é¡¹ç›®ç»“æ„æ·±åº¦åˆ†æ</h2><h3 id="æ–‡ä»¶ç»„ç»‡æ¶æ„">æ–‡ä»¶ç»„ç»‡æ¶æ„</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs axapta">NetCmdRegister/<br>â”œâ”€â”€ main.js              <span class="hljs-meta"># ä¸»è¿›ç¨‹å…¥å£</span><br>â”œâ”€â”€ preload.js           <span class="hljs-meta"># é¢„åŠ è½½è„šæœ¬</span><br>â”œâ”€â”€ <span class="hljs-keyword">index</span>.html           <span class="hljs-meta"># ç”¨æˆ·ç•Œé¢</span><br>â”œâ”€â”€ renderer.js          <span class="hljs-meta"># æ¸²æŸ“è¿›ç¨‹é€»è¾‘</span><br>â”œâ”€â”€ styles.css           <span class="hljs-meta"># è‡ªå®šä¹‰æ ·å¼</span><br>â”œâ”€â”€ package.json         <span class="hljs-meta"># é¡¹ç›®é…ç½®</span><br>â””â”€â”€ tailwindcss.js       <span class="hljs-meta"># Tailwind CSS</span><br></code></pre></td></tr></table></figure><h3 id="æ ¸å¿ƒæ–‡ä»¶èŒè´£">æ ¸å¿ƒæ–‡ä»¶èŒè´£</h3><p><strong>main.js - åº”ç”¨å¤§è„‘</strong></p><ul><li>åˆ›å»ºå’Œç®¡ç†åº”ç”¨çª—å£</li><li>å¤„ç† UDP ç½‘ç»œé€šä¿¡</li><li>æ–‡ä»¶å¯¼å…¥å¯¼å‡ºåŠŸèƒ½</li><li>åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</li></ul><p><strong>preload.js - å®‰å…¨æ¡¥æ¢</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// æš´éœ²å®‰å…¨çš„ API ç»™æ¸²æŸ“è¿›ç¨‹</span><br>contextBridge.<span class="hljs-title function_">exposeInMainWorld</span>(<span class="hljs-string">&#x27;electronAPI&#x27;</span>, &#123;<br>  <span class="hljs-attr">sendUDPCommand</span>: <span class="hljs-function">(<span class="hljs-params">command</span>) =&gt;</span> ipcRenderer.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">&#x27;send-udp-command&#x27;</span>, command),<br>  <span class="hljs-comment">// æ›´å¤š API...</span><br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>index.html - ç”¨æˆ·ç•Œé¢</strong></p><ul><li>å®šä¹‰åº”ç”¨çš„æ•´ä½“å¸ƒå±€</li><li>ç»„ç»‡å„ä¸ªåŠŸèƒ½åŒºåŸŸ</li><li>é›†æˆ Tailwind CSS</li></ul><p><strong>renderer.js - äº¤äº’é€»è¾‘</strong></p><ul><li>DOM æ“ä½œå’Œäº‹ä»¶å¤„ç†</li><li>çŠ¶æ€ç®¡ç†</li><li>ä¸ä¸»è¿›ç¨‹é€šä¿¡</li></ul><h3 id="è®¾è®¡æ¨¡å¼åº”ç”¨">è®¾è®¡æ¨¡å¼åº”ç”¨</h3><p>åœ¨ NetCmdRegister ä¸­ï¼Œæˆ‘åº”ç”¨äº†å¤šç§è®¾è®¡æ¨¡å¼ï¼š</p><p><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ä¸»è¿›ç¨‹å‘æ¸²æŸ“è¿›ç¨‹å‘é€äº‹ä»¶</span><br>win.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;log-message&#x27;</span>, <span class="hljs-string">&#x27;UDPæœåŠ¡å·²å¯åŠ¨&#x27;</span>)<br><br><span class="hljs-comment">// æ¸²æŸ“è¿›ç¨‹ç›‘å¬äº‹ä»¶</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">onLogMessage</span>(<span class="hljs-function">(<span class="hljs-params">message, type</span>) =&gt;</span> &#123;<br>  <span class="hljs-title function_">addLog</span>(message, type)<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>å‘½ä»¤æ¨¡å¼</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å‘½ä»¤å¯¹è±¡å°è£…</span><br><span class="hljs-keyword">const</span> command = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;è®¾å¤‡é‡å¯&#x27;</span>,<br>  <span class="hljs-attr">payload</span>: <span class="hljs-string">&#x27;01 02 03 FF&#x27;</span>,<br>  <span class="hljs-attr">ip</span>: <span class="hljs-string">&#x27;192.168.1.100&#x27;</span>,<br>  <span class="hljs-attr">port</span>: <span class="hljs-number">8000</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ¨¡å—æ¨¡å¼</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åŠŸèƒ½æ¨¡å—åŒ–ç»„ç»‡</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">UDPService</span> = &#123;<br>  <span class="hljs-title function_">startServer</span>(<span class="hljs-params">port</span>) &#123; <span class="hljs-comment">/* ... */</span> &#125;,<br>  <span class="hljs-title function_">stopServer</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">/* ... */</span> &#125;,<br>  <span class="hljs-title function_">sendCommand</span>(<span class="hljs-params">command</span>) &#123; <span class="hljs-comment">/* ... */</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¼€å‘ç†å¿µä¸æœ€ä½³å®è·µ">å¼€å‘ç†å¿µä¸æœ€ä½³å®è·µ</h2><h3 id="å®‰å…¨æ€§è€ƒè™‘">å®‰å…¨æ€§è€ƒè™‘</h3><p><strong>ä¸Šä¸‹æ–‡éš”ç¦»</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>(&#123;<br>  <span class="hljs-attr">webPreferences</span>: &#123;<br>    <span class="hljs-attr">contextIsolation</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¯ç”¨ä¸Šä¸‹æ–‡éš”ç¦»</span><br>    <span class="hljs-attr">preload</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&#x27;preload.js&#x27;</span>)  <span class="hljs-comment">// é¢„åŠ è½½è„šæœ¬</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>æœ€å°æƒé™åŸåˆ™</strong></p><ul><li>æ¸²æŸ“è¿›ç¨‹åªèƒ½é€šè¿‡é¢„åŠ è½½è„šæœ¬æš´éœ²çš„ API è®¿é—®ç³»ç»ŸåŠŸèƒ½</li><li>æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½è¿›è¡ŒéªŒè¯å’Œæ¸…ç†</li><li>æ–‡ä»¶æ“ä½œé™åˆ¶åœ¨ç”¨æˆ·æ˜ç¡®é€‰æ‹©çš„æ–‡ä»¶</li></ul><h3 id="ç”¨æˆ·ä½“éªŒè®¾è®¡">ç”¨æˆ·ä½“éªŒè®¾è®¡</h3><p><strong>ç›´è§‚çš„ç•Œé¢å¸ƒå±€</strong></p><ul><li>åŠŸèƒ½åŒºåŸŸæ¸…æ™°åˆ’åˆ†</li><li>çŠ¶æ€å¯è§†åŒ–ï¼ˆé¢œè‰²ã€å›¾æ ‡ï¼‰</li><li>å®æ—¶åé¦ˆ</li></ul><p><strong>é”™è¯¯å¤„ç†</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">try</span> &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">sendUDPCommand</span>(command)<br>  <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`å‘é€æˆåŠŸ: <span class="hljs-subst">$&#123;command.name&#125;</span>`</span>, <span class="hljs-string">&#x27;sent&#x27;</span>)<br>&#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>  <span class="hljs-title function_">addLog</span>(<span class="hljs-string">`å‘é€å¤±è´¥: <span class="hljs-subst">$&#123;error.message&#125;</span>`</span>, <span class="hljs-string">&#x27;error&#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€§èƒ½ä¼˜åŒ–</strong></p><ul><li>è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§é‡å‘½ä»¤æ—¶ï¼‰</li><li>é˜²æŠ–å¤„ç†ï¼ˆé¢‘ç¹æ“ä½œï¼‰</li><li>å†…å­˜ç®¡ç†ï¼ˆåŠæ—¶æ¸…ç†èµ„æºï¼‰</li></ul><h2 id="å­¦ä¹ è·¯å¾„å»ºè®®">å­¦ä¹ è·¯å¾„å»ºè®®</h2><p>å¦‚æœä½ æ˜¯ä¸€ä¸ª Electron æ–°æ‰‹ï¼Œæˆ‘å»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºå­¦ä¹ ï¼š</p><ol><li><strong>HTML/CSS/JavaScript åŸºç¡€</strong></li><li><strong>Node.js åŸºæœ¬æ¦‚å¿µ</strong></li><li><strong>Electron æ ¸å¿ƒæ¦‚å¿µ</strong></li><li><strong>IPC é€šä¿¡æœºåˆ¶</strong></li><li><strong>å®‰å…¨æœ€ä½³å®è·µ</strong></li><li><strong>æ‰“åŒ…å’Œåˆ†å‘</strong></li></ol><h2 id="ç»“è¯­">ç»“è¯­</h2><p>é€šè¿‡è¿™ç¬¬ä¸€ç¯‡åšå®¢ï¼Œæˆ‘å¸Œæœ›ä½ å¯¹ NetCmdRegister æœ‰äº†å…¨é¢çš„äº†è§£ã€‚æˆ‘ä»¬ä»‹ç»äº†ï¼š</p><ul><li>åº”ç”¨çš„åŠŸèƒ½å®šä½å’Œæ ¸å¿ƒç‰¹æ€§</li><li>Electron æ¶æ„çš„æ ¸å¿ƒæ¦‚å¿µ</li><li>æŠ€æœ¯æ ˆçš„é€‰æ‹©ç†ç”±</li><li>é¡¹ç›®ç»“æ„å’Œè®¾è®¡æ¨¡å¼</li><li>å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒçš„è€ƒè™‘</li></ul><p>åœ¨ä¸‹ä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥è®²è§£é¡¹ç›®çš„æ­å»ºè¿‡ç¨‹å’Œçª—å£åˆ›å»ºçš„ç»†èŠ‚ã€‚ä½ å°†å­¦ä¹ åˆ°å¦‚ä½•ä»é›¶å¼€å§‹åˆ›å»ºä¸€ä¸ª Electron åº”ç”¨ï¼Œé…ç½®å¼€å‘ç¯å¢ƒï¼Œä»¥åŠç†è§£åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p><p>å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼æˆ‘å¾ˆä¹æ„ä¸å¤§å®¶äº¤æµè®¨è®ºã€‚</p><p><strong>ä¸‹ä¸€ç¯‡é¢„å‘Š</strong>ï¼šã€ŠNetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ï¼ˆäºŒï¼‰ï¼šé¡¹ç›®æ­å»ºä¸çª—å£åˆ›å»ºã€‹â€”â€”æˆ‘ä»¬å°†äº²æ‰‹æ­å»ºå¼€å‘ç¯å¢ƒï¼Œåˆ›å»ºç¬¬ä¸€ä¸ª Electron çª—å£ï¼Œå¹¶æ·±å…¥ç†è§£åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> NetCmdRegister åº”ç”¨å¼€å‘è¯¦è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> electron </tag>
            
            <tag> NetCmdRegister </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å½»åº•æ¸…é™¤ WSL ç¯å¢ƒä¸­ç”Ÿæˆçš„ `Zone.Identifier` æ–‡ä»¶æ–¹æ¡ˆ</title>
      <link href="/2025/11/02/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4-WSL-%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%94%9F%E6%88%90%E7%9A%84-Zone-Identifier-%E6%96%87%E4%BB%B6%E6%96%B9%E6%A1%88/"/>
      <url>/2025/11/02/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4-WSL-%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%94%9F%E6%88%90%E7%9A%84-Zone-Identifier-%E6%96%87%E4%BB%B6%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h1>ğŸ§¹ å½»åº•æ¸…é™¤ WSL ç¯å¢ƒä¸­ç”Ÿæˆçš„ <code>Zone.Identifier</code> æ–‡ä»¶æ–¹æ¡ˆ</h1><blockquote><p>ä½œè€…ï¼šlsxå‘å¸ƒæ—¶é—´ï¼š2025-10-30æ ‡ç­¾ï¼šWSLã€Windows 11ã€Bashã€è„šæœ¬å·¥å…·ã€æ–‡ä»¶ç³»ç»Ÿ</p></blockquote><hr><h2 id="ä¸€ã€é—®é¢˜èƒŒæ™¯">ä¸€ã€é—®é¢˜èƒŒæ™¯</h2><p>åœ¨ Windows 11 çš„ç¯å¢ƒä¸‹ä½¿ç”¨ <strong>WSLï¼ˆWindows Subsystem for Linuxï¼‰</strong> æ—¶ï¼Œè®¸å¤šå¼€å‘è€…å¯èƒ½éƒ½é‡åˆ°è¿‡ä¸€ä¸ªéå¸¸æ¼äººçš„é—®é¢˜ï¼šå½“ä½ åœ¨ <strong>Windows ä¸ WSL æ–‡ä»¶ç³»ç»Ÿä¹‹é—´æ‹·è´æ–‡ä»¶</strong> æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ç±»éšè—æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">xxx:</span>Zone.Identifier<br></code></pre></td></tr></table></figure><p>è¿™äº›æ–‡ä»¶çš„å­˜åœ¨é€šå¸¸å¹¶ä¸ä¼šå½±å“æ­£å¸¸ä½¿ç”¨ï¼Œä½†å®ƒä»¬ä¼šï¼š</p><ul><li>åœ¨ <code>git status</code> ä¸­æ˜¾ç¤ºä¸ºâ€œæœªçŸ¥æ–‡ä»¶â€ï¼Œå½±å“ç‰ˆæœ¬ç®¡ç†ï¼›</li><li>åœ¨è„šæœ¬æˆ–ç¼–è¯‘ä»»åŠ¡ä¸­è¢«è¯¯è¯†åˆ«ä¸ºè¾“å…¥æ–‡ä»¶ï¼›</li><li>åœ¨é€’å½’éå†æˆ–æ–‡ä»¶åŒ¹é…æ“ä½œæ—¶é€ æˆå¹²æ‰°ï¼›</li><li>åœ¨æŸäº›ç¼–è¾‘å™¨æˆ–å·¥å…·ä¸­è§¦å‘è§£æé”™è¯¯ã€‚</li></ul><p>ç®€å•æ¥è¯´ï¼Œ<strong>å®ƒä»¬æ²¡ä»€ä¹ˆç”¨ï¼Œä½†éå¸¸ç¢çœ¼ã€‚</strong></p><hr><h2 id="äºŒã€è¿™äº›æ–‡ä»¶åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ">äºŒã€è¿™äº›æ–‡ä»¶åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>è¿™äº› <code>:Zone.Identifier</code> æ–‡ä»¶æ˜¯ <strong>Windows NTFS çš„é™„åŠ æ•°æ®æµï¼ˆAlternate Data Stream, ADSï¼‰</strong>ã€‚å½“ä½ ä»ç½‘ç»œä¸‹è½½æ–‡ä»¶æˆ–å¤åˆ¶è‡ªä¸åŒå®‰å…¨åŒºåŸŸçš„æ¥æºæ—¶ï¼ŒWindows ä¼šè‡ªåŠ¨ä¸ºæ–‡ä»¶æ·»åŠ ä¸€ä¸ªé™„åŠ å±æ€§ï¼Œç”¨æ¥æ ‡è®°â€œæ–‡ä»¶æ¥æºçš„å®‰å…¨åŒºåŸŸâ€ã€‚</p><p>ä¾‹å¦‚ï¼Œé€šè¿‡æµè§ˆå™¨ä¸‹è½½çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¼šé™„å¸¦ä¸€ä¸ª <code>Zone.Identifier</code> æµï¼Œå…¶å†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[ZoneTransfer]</span><br><span class="hljs-attr">ZoneId</span>=<span class="hljs-number">3</span><br><span class="hljs-attr">ReferrerUrl</span>=https://example.com/<br></code></pre></td></tr></table></figure><p>è¿™åœ¨ Windows ä¸‹ç”¨äº <strong>å®‰å…¨æç¤º</strong>ï¼ˆâ€œæ­¤æ–‡ä»¶æ¥è‡ªäº’è”ç½‘ï¼Œæ˜¯å¦ç¡®å®šè¦è¿è¡Œï¼Ÿâ€ï¼‰ã€‚ä½†æ˜¯ï¼Œåœ¨ WSL ä¸­ï¼Œè¿™ç§é™„åŠ ä¿¡æ¯è¢«è§†ä¸ºä¸€ä¸ª<strong>ç‹¬ç«‹çš„ä¼ªæ–‡ä»¶</strong>ï¼Œä»è€Œæ˜¾å¾—å¾ˆçªå…€ã€‚</p><hr><h2 id="ä¸‰ã€è§£å†³æ€è·¯">ä¸‰ã€è§£å†³æ€è·¯</h2><p>WSL ç¯å¢ƒä¸­å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ <code>find</code> å‘½ä»¤æ¥é€’å½’æ‰«ææ•´ä¸ªç›®å½•ï¼Œç­›é€‰å‡ºæ‰€æœ‰åŒ¹é… <code>*Zone.Identifier</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œç„¶åç»Ÿä¸€åˆ é™¤ã€‚</p><p>æ‰‹åŠ¨æ“ä½œå½“ç„¶å¯è¡Œï¼Œä½†æ•ˆç‡ä½ã€å®¹æ˜“è¯¯åˆ ã€‚å› æ­¤æˆ‘ç¼–å†™äº†ä¸€ä¸ªç®€å•ã€å¯å¤ç”¨çš„ <strong>Bash è„šæœ¬å·¥å…·</strong>ï¼Œç”¨äºè‡ªåŠ¨æ¸…ç†è¿™äº›æ–‡ä»¶ã€‚</p><hr><h2 id="å››ã€è„šæœ¬å†…å®¹">å››ã€è„šæœ¬å†…å®¹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/usr/bin/env bash</span><br><span class="hljs-comment"># remove_Zone.sh â€”â€” é€’å½’åˆ é™¤æ‰€æœ‰ &quot;xxx:Zone.Identifier&quot; æ–‡ä»¶</span><br><span class="hljs-comment"># ç”¨æ³•:  ./remove_Zone.sh  [èµ·å§‹ç›®å½•ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•]</span><br><br><span class="hljs-built_in">set</span> -euo pipefail<br><br>ROOT_DIR=<span class="hljs-variable">$&#123;1:-.&#125;</span>          <span class="hljs-comment"># ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºæ ¹ç›®å½•ï¼Œç¼ºçœä¸ºå½“å‰ç›®å½•</span><br>PATTERN=<span class="hljs-string">&quot;*Zone.Identifier&quot;</span> <span class="hljs-comment"># åŒ¹é…æ‰€æœ‰ä»¥ Zone.Identifier ç»“å°¾çš„æ–‡ä»¶</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;å¼€å§‹æ‰«æï¼š<span class="hljs-variable">$ROOT_DIR</span>&quot;</span><br><span class="hljs-built_in">mapfile</span> -d <span class="hljs-string">&#x27;&#x27;</span> -t TARGETS &lt; &lt;(<br>    find <span class="hljs-string">&quot;<span class="hljs-variable">$ROOT_DIR</span>&quot;</span> -<span class="hljs-built_in">type</span> f -name <span class="hljs-string">&quot;<span class="hljs-variable">$PATTERN</span>&quot;</span> -print0<br>)<br><br><span class="hljs-keyword">if</span> ((<span class="hljs-variable">$&#123;#TARGETS[@]&#125;</span> == <span class="hljs-number">0</span>)); <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;âœ… æœªå‘ç° Zone.Identifier æ–‡ä»¶&quot;</span><br><span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;å°†åˆ é™¤ä»¥ä¸‹ %d ä¸ªæ–‡ä»¶ï¼š\n&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#TARGETS[@]&#125;</span>&quot;</span><br>    <span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;%s\n&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;TARGETS[@]&#125;</span>&quot;</span><br>    <span class="hljs-built_in">read</span> -rp <span class="hljs-string">&quot;ç¡®è®¤åˆ é™¤ï¼Ÿ(y/N) &quot;</span> CONFIRM<br>    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$CONFIRM</span> =~ ^[Yy]$ ]]; <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">rm</span> -v -- <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;TARGETS[@]&#125;</span>&quot;</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ğŸ—‘ï¸  åˆ é™¤å®Œæˆ&quot;</span><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;å·²å–æ¶ˆ&quot;</span><br>    <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><hr><h2 id="äº”ã€ä½¿ç”¨æ–¹æ³•">äº”ã€ä½¿ç”¨æ–¹æ³•</h2><ol><li><p>å°†è„šæœ¬ä¿å­˜ä¸º <code>remove_Zone.sh</code></p></li><li><p>èµ‹äºˆæ‰§è¡Œæƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> +x remove_Zone.sh<br></code></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œè„šæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./remove_Zone.sh<br></code></pre></td></tr></table></figure><p>æˆ–æŒ‡å®šç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./remove_Zone.sh /mnt/c/Users/lsx/Downloads<br></code></pre></td></tr></table></figure></li><li><p>æ ¹æ®æç¤ºç¡®è®¤åˆ é™¤ã€‚</p></li></ol><p>æ‰§è¡Œè¿‡ç¨‹ç¤ºä¾‹ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs stylus">å¼€å§‹æ‰«æï¼š.<br>å°†åˆ é™¤ä»¥ä¸‹ <span class="hljs-number">3</span> ä¸ªæ–‡ä»¶ï¼š<br>./readme<span class="hljs-selector-class">.md</span>:Zone<span class="hljs-selector-class">.Identifier</span><br>./install<span class="hljs-selector-class">.exe</span>:Zone<span class="hljs-selector-class">.Identifier</span><br>./docs/setup<span class="hljs-selector-class">.pdf</span>:Zone<span class="hljs-selector-class">.Identifier</span><br>ç¡®è®¤åˆ é™¤ï¼Ÿ(<span class="hljs-attribute">y</span>/N) y<br>removed <span class="hljs-string">&#x27;./readme.md:Zone.Identifier&#x27;</span><br>removed <span class="hljs-string">&#x27;./install.exe:Zone.Identifier&#x27;</span><br>removed <span class="hljs-string">&#x27;./docs/setup.pdf:Zone.Identifier&#x27;</span><br>ğŸ—‘ï¸  åˆ é™¤å®Œæˆ<br></code></pre></td></tr></table></figure><hr><h2 id="å…­ã€è„šæœ¬è¯´æ˜ä¸ä¼˜åŒ–ç‚¹">å…­ã€è„šæœ¬è¯´æ˜ä¸ä¼˜åŒ–ç‚¹</h2><table><thead><tr><th>åŠŸèƒ½ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>set -euo pipefail</code></td><td>ç¡®ä¿è„šæœ¬åœ¨é‡åˆ°é”™è¯¯ã€æœªå®šä¹‰å˜é‡æˆ–ç®¡é“é”™è¯¯æ—¶ç«‹å³é€€å‡ºï¼Œæé«˜å®‰å…¨æ€§</td></tr><tr><td><code>find ... -print0</code> + <code>mapfile -d ''</code></td><td>é¿å…æ–‡ä»¶åä¸­åŒ…å«ç©ºæ ¼æˆ–ç‰¹æ®Šå­—ç¬¦æ—¶å‡ºç°é—®é¢˜</td></tr><tr><td>äº¤äº’å¼ç¡®è®¤åˆ é™¤</td><td>é˜²æ­¢è¯¯åˆ æ–‡ä»¶</td></tr><tr><td><code>rm -v</code></td><td>è¾“å‡ºæ¯ä¸ªåˆ é™¤çš„æ–‡ä»¶ï¼Œæ–¹ä¾¿ç¡®è®¤ç»“æœ</td></tr></tbody></table><p>å¯é€‰ä¼˜åŒ–ï¼š</p><ul><li><p>è‹¥æƒ³<strong>æ— äº¤äº’æ‰¹é‡åˆ é™¤</strong>ï¼Œå¯åœ¨å‘½ä»¤è¡Œä¸­ç›´æ¥åŠ å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./remove_Zone.sh &lt;ç›®å½•&gt; &lt;&lt;&lt; <span class="hljs-string">&quot;y&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>è‹¥å¸Œæœ›è„šæœ¬æ”¯æŒå¤šçº¿ç¨‹åˆ é™¤ï¼Œå¯åœ¨ <code>rm</code> å‰ä½¿ç”¨ <code>xargs -P</code> å½¢å¼ä¼˜åŒ–ã€‚</p></li></ul><hr><h2 id="ä¸ƒã€è¿›é˜¶å»ºè®®">ä¸ƒã€è¿›é˜¶å»ºè®®</h2><p>å¦‚æœä½ ç»å¸¸åœ¨ WSL ä¸­é‡åˆ°æ­¤é—®é¢˜ï¼Œå¯ä»¥å°†è„šæœ¬æ³¨å†Œä¸ºå…¨å±€å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">cp</span> remove_Zone.sh /usr/local/bin/remove_Zone<br></code></pre></td></tr></table></figure><p>ä¹‹ååªéœ€æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">remove_Zone<br></code></pre></td></tr></table></figure><p>å³å¯å…¨ç›˜æ‰«ææ¸…ç†ã€‚</p><hr><h2 id="å…«ã€æ€»ç»“">å…«ã€æ€»ç»“</h2><p><code>Zone.Identifier</code> æ–‡ä»¶è™½ç„¶æºäº Windows çš„å®‰å…¨æœºåˆ¶ï¼Œä½†åœ¨ WSL ç¯å¢ƒä¸­å´æˆäº†å¤šä½™çš„â€œåƒåœ¾ä¿¡æ¯â€ã€‚é€šè¿‡è¿™ä¸€ç®€å•çš„è„šæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°æ‰¹é‡æ£€æµ‹ä¸å®‰å…¨æ¸…é™¤ï¼Œè®©é¡¹ç›®ç›®å½•æ›´åŠ å¹²å‡€ã€‚</p><blockquote><p>âœ… <strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong>ã€Œè®© WSL å›å½’çº¯å‡€ï¼Œè®©è„šæœ¬è‡ªåŠ¨æ›¿ä½ æ¸…ç† Windows ç•™ä¸‹çš„â€œå°¾å·´â€ã€‚ã€</p></blockquote><hr><p><strong>é™„æ³¨ï¼š</strong></p><ul><li>æœ¬è„šæœ¬é€‚ç”¨äº WSL 1 å’Œ WSL 2ï¼›</li><li>ä¸å½±å“åŸæ–‡ä»¶å†…å®¹ï¼›</li><li>è‹¥åœ¨ Windows ç¯å¢ƒä¸­æ‰§è¡Œï¼Œè¯·ç¡®ä¿æ–‡ä»¶ç³»ç»Ÿæ”¯æŒ ADSï¼Œå¦åˆ™ä¸ç”Ÿæ•ˆã€‚</li></ul><hr>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ã€ä¸€å‘¨ä¸€ç®—æ³•ã€‘ç¬¬ä¸‰å‘¨ï¼šå½’å¹¶æ’åº Â· æ€è€ƒé¢˜ä¸ç»ƒä¹ è¯¦è§£</title>
      <link href="/2025/11/02/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%B8%89%E5%91%A8%EF%BC%9A-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F-%C2%B7-%E6%80%9D%E8%80%83%E9%A2%98%E4%B8%8E%E7%BB%83%E4%B9%A0%E8%AF%A6%E8%A7%A3/"/>
      <url>/2025/11/02/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%B8%89%E5%91%A8%EF%BC%9A-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F-%C2%B7-%E6%80%9D%E8%80%83%E9%A2%98%E4%B8%8E%E7%BB%83%E4%B9%A0%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1>ğŸ§  å½’å¹¶æ’åº Â· æ€è€ƒé¢˜ä¸ç»ƒä¹ è¯¦è§£</h1><blockquote><p>â€œç†è§£é€’å½’çš„æœ€å¥½æ–¹å¼ï¼Œå°±æ˜¯äº²æ‰‹ç”»å‡ºé€’å½’æ ‘ï¼›ç†è§£åˆå¹¶çš„æœ€å¥½æ–¹å¼ï¼Œå°±æ˜¯äº²æ‰‹å®ç°é“¾è¡¨ç‰ˆæœ¬ã€‚â€</p></blockquote><hr><h2 id="ğŸ§©-æ€è€ƒé¢˜ä¸€ï¼šé“¾è¡¨ä¸Šçš„å½’å¹¶æ’åº">ğŸ§© æ€è€ƒé¢˜ä¸€ï¼šé“¾è¡¨ä¸Šçš„å½’å¹¶æ’åº</h2><h3 id="â“-é—®é¢˜">â“ é—®é¢˜</h3><p><strong>ä¸ºä»€ä¹ˆå½’å¹¶æ’åºåœ¨é“¾è¡¨æ’åºä¸­è¡¨ç°éå¸¸ä¼˜ç§€ï¼Ÿ</strong></p><h3 id="ğŸ’¡-è¯¦è§£">ğŸ’¡ è¯¦è§£</h3><p><strong>æ ¸å¿ƒç­”æ¡ˆ</strong>ï¼šå› ä¸ºé“¾è¡¨çš„åˆå¹¶æ“ä½œå¯ä»¥åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> çš„é¢å¤–ç©ºé—´å†…å®Œæˆï¼Œé¿å…äº†æ•°ç»„ç‰ˆæœ¬ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> çš„ç©ºé—´å¼€é”€ã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡ä»£ç å¯¹æ¯”æ¥ç†è§£ï¼š</p><h4 id="ğŸ”¹-æ•°ç»„ç‰ˆæœ¬çš„åˆå¹¶ï¼ˆéœ€è¦é¢å¤–ç©ºé—´ï¼‰">ğŸ”¹ æ•°ç»„ç‰ˆæœ¬çš„åˆå¹¶ï¼ˆéœ€è¦é¢å¤–ç©ºé—´ï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// æ•°ç»„åˆå¹¶ï¼šéœ€è¦ O(n) é¢å¤–ç©ºé—´</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">temp</span><span class="hljs-params">(right - left + <span class="hljs-number">1</span>)</span></span>;  <span class="hljs-comment">// ğŸš¨ é¢å¤–ç©ºé—´å¼€é”€</span><br>    <span class="hljs-comment">// ... åˆå¹¶é€»è¾‘</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ğŸ”¹-é“¾è¡¨ç‰ˆæœ¬çš„åˆå¹¶ï¼ˆåŸåœ°æ“ä½œï¼‰">ğŸ”¹ é“¾è¡¨ç‰ˆæœ¬çš„åˆå¹¶ï¼ˆåŸåœ°æ“ä½œï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// é“¾è¡¨èŠ‚ç‚¹å®šä¹‰</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListNode</span> &#123;<br>    <span class="hljs-type">int</span> val;<br>    ListNode* next;<br>    <span class="hljs-built_in">ListNode</span>(<span class="hljs-type">int</span> x) : <span class="hljs-built_in">val</span>(x), <span class="hljs-built_in">next</span>(<span class="hljs-literal">nullptr</span>) &#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">// é“¾è¡¨åˆå¹¶ï¼šO(1) é¢å¤–ç©ºé—´</span><br><span class="hljs-function">ListNode* <span class="hljs-title">mergeLists</span><span class="hljs-params">(ListNode* l1, ListNode* l2)</span> </span>&#123;<br>    <span class="hljs-function">ListNode <span class="hljs-title">dummy</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>;        <span class="hljs-comment">// ğŸ¯ ä»…ä½¿ç”¨ä¸€ä¸ªå“¨å…µèŠ‚ç‚¹</span><br>    ListNode* tail = &amp;dummy;<br>    <br>    <span class="hljs-keyword">while</span> (l1 &amp;&amp; l2) &#123;<br>        <span class="hljs-keyword">if</span> (l1-&gt;val &lt;= l2-&gt;val) &#123;<br>            tail-&gt;next = l1;<br>            l1 = l1-&gt;next;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            tail-&gt;next = l2;<br>            l2 = l2-&gt;next;<br>        &#125;<br>        tail = tail-&gt;next;<br>    &#125;<br>    <br>    tail-&gt;next = l1 ? l1 : l2;<br>    <span class="hljs-keyword">return</span> dummy.next;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ğŸ“Š-æ€§èƒ½å¯¹æ¯”">ğŸ“Š æ€§èƒ½å¯¹æ¯”</h3><table><thead><tr><th>ç‰¹æ€§</th><th>æ•°ç»„ç‰ˆæœ¬</th><th>é“¾è¡¨ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>ç©ºé—´å¤æ‚åº¦</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼ˆé€’å½’æ ˆï¼‰</td></tr><tr><td>åˆå¹¶æ“ä½œ</td><td>éœ€è¦æ‹·è´æ•°æ®</td><td>ç›´æ¥ä¿®æ”¹æŒ‡é’ˆ</td></tr><tr><td>ç¼“å­˜å‹å¥½æ€§</td><td>âœ… å¥½</td><td>âŒ å·®ï¼ˆå†…å­˜ä¸è¿ç»­ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>éšæœºè®¿é—®éœ€æ±‚</td><td>åŠ¨æ€æ•°æ®ç»“æ„</td></tr></tbody></table><h3 id="ğŸ¯-LeetCode-å®æˆ˜">ğŸ¯ LeetCode å®æˆ˜</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// LeetCode #148 - é“¾è¡¨æ’åº</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">ListNode* <span class="hljs-title">sortList</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!head || !head-&gt;next) <span class="hljs-keyword">return</span> head;<br>        <br>        <span class="hljs-comment">// å¿«æ…¢æŒ‡é’ˆæ‰¾ä¸­ç‚¹</span><br>        ListNode* slow = head;<br>        ListNode* fast = head-&gt;next;<br>        <span class="hljs-keyword">while</span> (fast &amp;&amp; fast-&gt;next) &#123;<br>            slow = slow-&gt;next;<br>            fast = fast-&gt;next-&gt;next;<br>        &#125;<br>        <br>        <span class="hljs-comment">// åˆ†å‰²é“¾è¡¨</span><br>        ListNode* mid = slow-&gt;next;<br>        slow-&gt;next = <span class="hljs-literal">nullptr</span>;<br>        <br>        <span class="hljs-comment">// é€’å½’æ’åº</span><br>        ListNode* left = <span class="hljs-built_in">sortList</span>(head);<br>        ListNode* right = <span class="hljs-built_in">sortList</span>(mid);<br>        <br>        <span class="hljs-comment">// åˆå¹¶</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">mergeLists</span>(left, right);<br>    &#125;<br>    <br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-function">ListNode* <span class="hljs-title">mergeLists</span><span class="hljs-params">(ListNode* l1, ListNode* l2)</span> </span>&#123;<br>        <span class="hljs-function">ListNode <span class="hljs-title">dummy</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>;<br>        ListNode* tail = &amp;dummy;<br>        <br>        <span class="hljs-keyword">while</span> (l1 &amp;&amp; l2) &#123;<br>            <span class="hljs-keyword">if</span> (l1-&gt;val &lt;= l2-&gt;val) &#123;<br>                tail-&gt;next = l1;<br>                l1 = l1-&gt;next;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                tail-&gt;next = l2;<br>                l2 = l2-&gt;next;<br>            &#125;<br>            tail = tail-&gt;next;<br>        &#125;<br>        <br>        tail-&gt;next = l1 ? l1 : l2;<br>        <span class="hljs-keyword">return</span> dummy.next;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ”-æ€è€ƒé¢˜äºŒï¼šé€’å½’æ·±åº¦è®¡ç®—">ğŸ” æ€è€ƒé¢˜äºŒï¼šé€’å½’æ·±åº¦è®¡ç®—</h2><h3 id="â“-é—®é¢˜-2">â“ é—®é¢˜</h3><p><strong>è‹¥æ•°ç»„é•¿åº¦æ˜¯ 1024ï¼Œé€’å½’æ·±åº¦æ˜¯å¤šå°‘ï¼Ÿ</strong></p><h3 id="ğŸ’¡-è¯¦è§£-2">ğŸ’¡ è¯¦è§£</h3><p><strong>ç›´æ¥è®¡ç®—</strong>ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mn>2</mn></msub><mn>1024</mn><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">\log_2 1024 = 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9386em;vertical-align:-0.2441em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1024</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span></span></p><p><strong>é€’å½’æ ‘å¯è§†åŒ–</strong>ï¼š</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs prolog">å±‚çº§ <span class="hljs-number">0</span>: [<span class="hljs-number">0.</span><span class="hljs-number">.1023</span>]        (å¤§å°: <span class="hljs-number">1024</span>)<br>å±‚çº§ <span class="hljs-number">1</span>: [<span class="hljs-number">0.</span><span class="hljs-number">.511</span>] [<span class="hljs-number">512.</span><span class="hljs-number">.1023</span>]  (å¤§å°: <span class="hljs-number">512</span>)<br>å±‚çº§ <span class="hljs-number">2</span>: [<span class="hljs-number">0.</span><span class="hljs-number">.255</span>] [<span class="hljs-number">256.</span><span class="hljs-number">.511</span>] ... (å¤§å°: <span class="hljs-number">256</span>)<br>...<br>å±‚çº§ <span class="hljs-number">10</span>: [<span class="hljs-number">0</span>] [<span class="hljs-number">1</span>] [<span class="hljs-number">2</span>] ... [<span class="hljs-number">1023</span>] (å¤§å°: <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><strong>ä»£ç éªŒè¯</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">calculateDepth</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> currentDepth = <span class="hljs-number">0</span>)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> currentDepth;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">calculateDepth</span>(n / <span class="hljs-number">2</span>, currentDepth + <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">// æµ‹è¯•</span><br>cout &lt;&lt; <span class="hljs-string">&quot;1024çš„é€’å½’æ·±åº¦: &quot;</span> &lt;&lt; <span class="hljs-built_in">calculateDepth</span>(<span class="hljs-number">1024</span>) &lt;&lt; endl;<br><span class="hljs-comment">// è¾“å‡º: 1024çš„é€’å½’æ·±åº¦: 10</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ¯-é€šç”¨å…¬å¼">ğŸ¯ é€šç”¨å…¬å¼</h3><p>å¯¹äºé•¿åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> çš„æ•°ç»„ï¼Œå½’å¹¶æ’åºé€’å½’æ·±åº¦ä¸ºï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>æ·±åº¦</mtext><mo>=</mo><mo stretchy="false">âŒˆ</mo><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mn>2</mn></msub><mi>n</mi><mo stretchy="false">âŒ‰</mo></mrow><annotation encoding="application/x-tex">\text{æ·±åº¦} = \lceil \log_2 n \rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord cjk_fallback">æ·±åº¦</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">âŒˆ</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">âŒ‰</span></span></span></span></span></p><table><thead><tr><th>æ•°ç»„é•¿åº¦</th><th>é€’å½’æ·±åº¦</th><th>é€’å½’è°ƒç”¨æ¬¡æ•°</th></tr></thead><tbody><tr><td>16</td><td>4</td><td>31</td></tr><tr><td>1024</td><td>10</td><td>2047</td></tr><tr><td>1,048,576</td><td>20</td><td>~2ç™¾ä¸‡</td></tr></tbody></table><hr><h2 id="âš¡-æ€è€ƒé¢˜ä¸‰ï¼šè¿­ä»£ç‰ˆå½’å¹¶æ’åº">âš¡ æ€è€ƒé¢˜ä¸‰ï¼šè¿­ä»£ç‰ˆå½’å¹¶æ’åº</h2><h3 id="â“-é—®é¢˜-3">â“ é—®é¢˜</h3><p><strong>è¯·å°è¯•å®ç°è¿­ä»£ç‰ˆï¼ˆéé€’å½’ç‰ˆï¼‰å½’å¹¶æ’åº</strong></p><h3 id="ğŸ’¡-è¯¦è§£-3">ğŸ’¡ è¯¦è§£</h3><p>è¿­ä»£ç‰ˆæœ¬é¿å…äº†é€’å½’è°ƒç”¨ï¼Œä½¿ç”¨å¾ªç¯è‡ªåº•å‘ä¸Šåˆå¹¶ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">iterativeMergeSort</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> </span>&#123;<br>    <span class="hljs-type">int</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">temp</span><span class="hljs-params">(n)</span></span>;<br>    <br>    <span class="hljs-comment">// ğŸ¯ ä»å¤§å°ä¸º1çš„å­æ•°ç»„å¼€å§‹ï¼Œæ¯æ¬¡ç¿»å€</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> size = <span class="hljs-number">1</span>; size &lt; n; size *= <span class="hljs-number">2</span>) &#123;<br>        <span class="hljs-comment">// éå†æ‰€æœ‰æˆå¯¹çš„å­æ•°ç»„</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> leftStart = <span class="hljs-number">0</span>; leftStart &lt; n; leftStart += <span class="hljs-number">2</span> * size) &#123;<br>            <span class="hljs-type">int</span> mid = std::<span class="hljs-built_in">min</span>(leftStart + size - <span class="hljs-number">1</span>, n - <span class="hljs-number">1</span>);<br>            <span class="hljs-type">int</span> rightEnd = std::<span class="hljs-built_in">min</span>(leftStart + <span class="hljs-number">2</span> * size - <span class="hljs-number">1</span>, n - <span class="hljs-number">1</span>);<br>            <br>            <span class="hljs-comment">// åˆå¹¶ arr[leftStart..mid] å’Œ arr[mid+1..rightEnd]</span><br>            <span class="hljs-built_in">iterativeMerge</span>(arr, temp, leftStart, mid, rightEnd);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">iterativeMerge</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; temp, </span></span><br><span class="hljs-params"><span class="hljs-function">                   <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    <span class="hljs-type">int</span> i = left, j = mid + <span class="hljs-number">1</span>, k = left;<br>    <br>    <span class="hljs-keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= right) &#123;<br>        <span class="hljs-keyword">if</span> (arr[i] &lt;= arr[j]) &#123;<br>            temp[k++] = arr[i++];<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            temp[k++] = arr[j++];<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">while</span> (i &lt;= mid) temp[k++] = arr[i++];<br>    <span class="hljs-keyword">while</span> (j &lt;= right) temp[k++] = arr[j++];<br>    <br>    <span class="hljs-comment">// æ‹·è´å›åŸæ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> idx = left; idx &lt;= right; ++idx) &#123;<br>        arr[idx] = temp[idx];<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æµ‹è¯•</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; arr = &#123;<span class="hljs-number">38</span>, <span class="hljs-number">27</span>, <span class="hljs-number">43</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>, <span class="hljs-number">82</span>, <span class="hljs-number">10</span>&#125;;<br>    <span class="hljs-built_in">iterativeMergeSort</span>(arr);<br>    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;è¿­ä»£ç‰ˆæ’åºç»“æœ: &quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ğŸ”„-æ‰§è¡Œè¿‡ç¨‹ç¤ºä¾‹">ğŸ”„ æ‰§è¡Œè¿‡ç¨‹ç¤ºä¾‹</h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs inform7">åˆå§‹: <span class="hljs-comment">[38, 27, 43, 3, 9, 82, 10]</span><br><br>size=1: åˆå¹¶ç›¸é‚»å…ƒç´ <br><span class="hljs-comment">[27, 38]</span> <span class="hljs-comment">[3, 43]</span> <span class="hljs-comment">[9, 82]</span> <span class="hljs-comment">[10]</span><br><br>size=2: åˆå¹¶å¤§å°ä¸º2çš„å—<br><span class="hljs-comment">[3, 27, 38, 43]</span> <span class="hljs-comment">[9, 10, 82]</span><br><br>size=4: åˆå¹¶å¤§å°ä¸º4çš„å—<br><span class="hljs-comment">[3, 9, 10, 27, 38, 43, 82]</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ“Š-é€’å½’-vs-è¿­ä»£å¯¹æ¯”">ğŸ“Š é€’å½’ vs è¿­ä»£å¯¹æ¯”</h3><table><thead><tr><th>ç‰¹æ€§</th><th>é€’å½’ç‰ˆæœ¬</th><th>è¿­ä»£ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>ä»£ç å¯è¯»æ€§</td><td>âœ… æ›´ç›´è§‚</td><td>âŒ ç¨å¤æ‚</td></tr><tr><td>ç©ºé—´å¼€é”€</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n + \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td></tr><tr><td>å‡½æ•°è°ƒç”¨</td><td>æœ‰é€’å½’å¼€é”€</td><td>æ— é€’å½’å¼€é”€</td></tr><tr><td>ç¼“å­˜å‹å¥½</td><td>âŒ å·®</td><td>âœ… æ›´å¥½</td></tr></tbody></table><hr><h2 id="ğŸ¯-æ€è€ƒé¢˜å››ï¼šå•ç¼“å†²åŒºåˆå¹¶ä¼˜åŒ–">ğŸ¯ æ€è€ƒé¢˜å››ï¼šå•ç¼“å†²åŒºåˆå¹¶ä¼˜åŒ–</h2><h3 id="â“-é—®é¢˜-4">â“ é—®é¢˜</h3><p><strong>ä½ èƒ½åœ¨ <code>merge()</code> å‡½æ•°ä¸­åªç”¨ä¸€ä¸ªç¼“å†²åŒºå®Œæˆå·¦å³åˆå¹¶å—ï¼Ÿ</strong></p><h3 id="ğŸ’¡-è¯¦è§£-4">ğŸ’¡ è¯¦è§£</h3><p><strong>æŒ‘æˆ˜</strong>ï¼šä¼ ç»Ÿçš„åˆå¹¶éœ€è¦ä¸¤ä¸ªä¸´æ—¶æ•°ç»„ L å’Œ Rï¼Œèƒ½å¦åªç”¨ä¸€ä¸ªï¼Ÿ</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨å•ä¸ªç¼“å†²åŒºï¼Œä½†éœ€è¦å·§å¦™çš„æ‹·è´ç­–ç•¥ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">optimizedMerge</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    <span class="hljs-comment">// ğŸ¯ åªä½¿ç”¨ä¸€ä¸ªä¸´æ—¶ç¼“å†²åŒº</span><br>    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">buffer</span><span class="hljs-params">(arr.begin() + left, arr.begin() + right + <span class="hljs-number">1</span>)</span></span>;<br>    <br>    <span class="hljs-type">int</span> n1 = mid - left + <span class="hljs-number">1</span>;    <span class="hljs-comment">// å·¦åŠéƒ¨åˆ†é•¿åº¦</span><br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = n1, k = left;  <span class="hljs-comment">// i: å·¦åŠæŒ‡é’ˆ, j: å³åŠæŒ‡é’ˆ, k: åŸæ•°ç»„æŒ‡é’ˆ</span><br>    <br>    <span class="hljs-keyword">while</span> (i &lt; n1 &amp;&amp; j &lt; buffer.<span class="hljs-built_in">size</span>()) &#123;<br>        <span class="hljs-keyword">if</span> (buffer[i] &lt;= buffer[j]) &#123;<br>            arr[k++] = buffer[i++];<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            arr[k++] = buffer[j++];<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¤„ç†å‰©ä½™å…ƒç´ </span><br>    <span class="hljs-keyword">while</span> (i &lt; n1) arr[k++] = buffer[i++];<br>    <span class="hljs-keyword">while</span> (j &lt; buffer.<span class="hljs-built_in">size</span>()) arr[k++] = buffer[j++];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ğŸ”„-åˆå¹¶è¿‡ç¨‹æ¼”ç¤º">ğŸ”„ åˆå¹¶è¿‡ç¨‹æ¼”ç¤º</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus">åŸæ•°ç»„: <span class="hljs-selector-attr">[3, 27, 38, 43, 9, 10, 82]</span><br><span class="hljs-attribute">left</span>=<span class="hljs-number">0</span>, mid=<span class="hljs-number">3</span>, right=<span class="hljs-number">6</span><br><br>ç¼“å†²åŒº: <span class="hljs-selector-attr">[3, 27, 38, 43, 9, 10, 82]</span><br>        â†‘<span class="hljs-selector-tag">i</span>        â†‘j<br><br>æ¯”è¾ƒ buffer<span class="hljs-selector-attr">[i]</span>=<span class="hljs-number">3</span> vs buffer<span class="hljs-selector-attr">[j]</span>=<span class="hljs-number">9</span> â†’ å–<span class="hljs-number">3</span><br>æ¯”è¾ƒ buffer<span class="hljs-selector-attr">[i]</span>=<span class="hljs-number">27</span> vs buffer<span class="hljs-selector-attr">[j]</span>=<span class="hljs-number">9</span> â†’ å–<span class="hljs-number">9</span><br>æ¯”è¾ƒ buffer<span class="hljs-selector-attr">[i]</span>=<span class="hljs-number">27</span> vs buffer<span class="hljs-selector-attr">[j]</span>=<span class="hljs-number">10</span> â†’ å–<span class="hljs-number">10</span><br>æ¯”è¾ƒ buffer<span class="hljs-selector-attr">[i]</span>=<span class="hljs-number">27</span> vs buffer<span class="hljs-selector-attr">[j]</span>=<span class="hljs-number">82</span> â†’ å–<span class="hljs-number">27</span><br>...<br>æœ€ç»ˆ: <span class="hljs-selector-attr">[3, 9, 10, 27, 38, 43, 82]</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ“ˆ-ç©ºé—´ä¼˜åŒ–æ•ˆæœ">ğŸ“ˆ ç©ºé—´ä¼˜åŒ–æ•ˆæœ</h3><table><thead><tr><th>ç‰ˆæœ¬</th><th>ä¸´æ—¶ç©ºé—´</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¼ ç»Ÿç‰ˆæœ¬</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>Ã—</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo>=</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">2 \times \frac{n}{2} = n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></td><td>ä¸¤ä¸ªä¸´æ—¶æ•°ç»„</td></tr><tr><td>ä¼˜åŒ–ç‰ˆæœ¬</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></td><td>ä¸€ä¸ªç¼“å†²åŒº</td></tr><tr><td>é“¾è¡¨ç‰ˆæœ¬</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td>ä»…å“¨å…µèŠ‚ç‚¹</td></tr></tbody></table><p><strong>è™½ç„¶ç©ºé—´å¤æ‚åº¦ä»æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Œä½†ï¼š</strong></p><ul><li>å‡å°‘å†…å­˜åˆ†é…æ¬¡æ•°</li><li>ä»£ç æ›´ç®€æ´</li><li>å®é™…æ€§èƒ½å¯èƒ½æ›´å¥½</li></ul><hr><h2 id="ğŸš€-æ‰©å±•ç»ƒä¹ ">ğŸš€ æ‰©å±•ç»ƒä¹ </h2><h3 id="ğŸ§©-ç»ƒä¹ 1ï¼šå½’å¹¶æ’åºçš„æ€§èƒ½æµ‹è¯•">ğŸ§© ç»ƒä¹ 1ï¼šå½’å¹¶æ’åºçš„æ€§èƒ½æµ‹è¯•</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;random&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">performanceTest</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> size : &#123;<span class="hljs-number">1000</span>, <span class="hljs-number">10000</span>, <span class="hljs-number">100000</span>, <span class="hljs-number">1000000</span>&#125;) &#123;<br>        <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">arr</span><span class="hljs-params">(size)</span></span>;<br>        std::random_device rd;<br>        <span class="hljs-function">std::mt19937 <span class="hljs-title">gen</span><span class="hljs-params">(rd())</span></span>;<br>        std::uniform_int_distribution&lt;&gt; <span class="hljs-built_in">dis</span>(<span class="hljs-number">1</span>, size);<br>        <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; ++i) &#123;<br>            arr[i] = <span class="hljs-built_in">dis</span>(gen);<br>        &#125;<br>        <br>        <span class="hljs-keyword">auto</span> start = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();<br>        <span class="hljs-built_in">mergeSort</span>(arr, <span class="hljs-number">0</span>, arr.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">auto</span> end = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();<br>        <br>        <span class="hljs-keyword">auto</span> duration = std::chrono::<span class="hljs-built_in">duration_cast</span>&lt;std::chrono::milliseconds&gt;(end - start);<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;å¤§å° &quot;</span> &lt;&lt; size &lt;&lt; <span class="hljs-string">&quot;: &quot;</span> &lt;&lt; duration.<span class="hljs-built_in">count</span>() &lt;&lt; <span class="hljs-string">&quot; ms&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ğŸ§©-ç»ƒä¹ 2ï¼šå½’å¹¶æ’åºçš„ç¨³å®šç‰ˆæœ¬">ğŸ§© ç»ƒä¹ 2ï¼šå½’å¹¶æ’åºçš„ç¨³å®šç‰ˆæœ¬</h3><p>ç¡®ä¿åœ¨ç›¸ç­‰æ—¶ä¿æŒåŸå§‹é¡ºåºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">stableMerge</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    <span class="hljs-comment">// å…³é”®ï¼šä½¿ç”¨ &lt;= è€Œä¸æ˜¯ &lt; æ¥ä¿æŒç¨³å®šæ€§</span><br>    <span class="hljs-keyword">if</span> (L[i] &lt;= R[j]) &#123;  <span class="hljs-comment">// ğŸ¯ ç›¸ç­‰æ—¶ä¼˜å…ˆå–å·¦è¾¹çš„</span><br>        arr[k++] = L[i++];<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        arr[k++] = R[j++];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ğŸ§©-ç»ƒä¹ 3ï¼šå¤šè·¯å½’å¹¶æ’åº">ğŸ§© ç»ƒä¹ 3ï¼šå¤šè·¯å½’å¹¶æ’åº</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¸‰è·¯å½’å¹¶æ’åº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">threeWayMergeSort</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (right - left &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span>;<br>    <br>    <span class="hljs-type">int</span> third1 = left + (right - left) / <span class="hljs-number">3</span>;<br>    <span class="hljs-type">int</span> third2 = left + <span class="hljs-number">2</span> * (right - left) / <span class="hljs-number">3</span>;<br>    <br>    <span class="hljs-built_in">threeWayMergeSort</span>(arr, left, third1);<br>    <span class="hljs-built_in">threeWayMergeSort</span>(arr, third1 + <span class="hljs-number">1</span>, third2);<br>    <span class="hljs-built_in">threeWayMergeSort</span>(arr, third2 + <span class="hljs-number">1</span>, right);<br>    <br>    <span class="hljs-built_in">threeWayMerge</span>(arr, left, third1, third2, right);<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ’-æ€»ç»“">ğŸ’ æ€»ç»“</h2><p>é€šè¿‡è¿™å››ä¸ªæ€è€ƒé¢˜ï¼Œæˆ‘ä»¬æ·±å…¥ç†è§£äº†ï¼š</p><ol><li><strong>æ•°æ®ç»“æ„é€‚åº”æ€§</strong>ï¼šé“¾è¡¨ä¸Šçš„å½’å¹¶æ’åºç©ºé—´æ•ˆç‡æ›´é«˜</li><li><strong>é€’å½’æœ¬è´¨</strong>ï¼šæ·±åº¦ä¸æ•°æ®è§„æ¨¡çš„å¯¹æ•°å…³ç³»</li><li><strong>ç®—æ³•å˜å½¢</strong>ï¼šè¿­ä»£ç‰ˆæœ¬é¿å…é€’å½’å¼€é”€</li><li><strong>ç©ºé—´ä¼˜åŒ–</strong>ï¼šå•ç¼“å†²åŒºåˆå¹¶çš„æŠ€å·§</li></ol><blockquote><p>ğŸ¯ â€œä¼˜ç§€çš„ç®—æ³•å·¥ç¨‹å¸ˆä¸ä»…ä¼šä½¿ç”¨æ ‡å‡†å®ç°ï¼Œæ›´æ‡‚å¾—æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©æœ€ä¼˜å˜ç§ã€‚â€</p></blockquote><p>è¿™äº›æ·±å…¥ç†è§£ä¸ºæˆ‘ä»¬å­¦ä¹ æ›´å¤æ‚çš„åˆ†æ²»ç®—æ³•ï¼ˆå¦‚å¿«é€Ÿæ’åºã€å¤–éƒ¨æ’åºï¼‰å¥ å®šäº†åšå®åŸºç¡€ã€‚</p><hr>]]></content>
      
      
      <categories>
          
          <category> ä¸€å‘¨ä¸€ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> C++ </tag>
            
            <tag> å½’å¹¶æ’åº </tag>
            
            <tag> æ€è€ƒä¸ç»ƒä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ä¸€å‘¨ä¸€ç®—æ³•ã€‘ç¬¬ä¸‰å‘¨ï¼šå½’å¹¶æ’åº</title>
      <link href="/2025/11/02/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%B8%89%E5%91%A8%EF%BC%9A%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/"/>
      <url>/2025/11/02/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%B8%89%E5%91%A8%EF%BC%9A%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h1>ğŸ§® ä¸€å‘¨ä¸€ä¸ªç®—æ³• Â· ç¬¬ 3 å‘¨</h1><h2 id="å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰â€”â€”åˆ†æ²»æ€æƒ³çš„ç¬¬ä¸€æ¬¡ç™»åœº"><strong>å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰â€”â€”åˆ†æ²»æ€æƒ³çš„ç¬¬ä¸€æ¬¡ç™»åœº</strong></h2><blockquote><p>â€œDivide and Conquerâ€ â€”â€” åˆ†è€Œæ²»ä¹‹ï¼Œç®—æ³•çš„çµé­‚ã€‚å½’å¹¶æ’åºä¸ä»…æ˜¯é«˜æ•ˆæ’åºç®—æ³•çš„ä»£è¡¨ï¼Œæ›´æ˜¯ç†è§£<strong>é€’å½’ã€å¤æ‚åº¦åˆ†æä¸ç®—æ³•åˆ†å±‚ç»“æ„</strong>çš„æœ€ä½³å…¥å£ã€‚</p></blockquote><hr><h2 id="ğŸ§­-ä¸€ã€å¼•è¨€ï¼šå¦‚ä½•è®©-æ’åº-å¹¶è¡Œèµ·æ¥ï¼Ÿ">ğŸ§­ ä¸€ã€å¼•è¨€ï¼šå¦‚ä½•è®©&quot;æ’åº&quot;å¹¶è¡Œèµ·æ¥ï¼Ÿ</h2><p>å‡è®¾ä½ è¦ç»™ä¸€å‰¯ 1000 å¼ çš„æ‰‘å…‹ç‰Œæ’åºã€‚æœ€ç›´è§‚çš„æƒ³æ³•æ˜¯ä¸€ä¸ªäººä»å¤´åˆ°å°¾æ…¢æ…¢æ’å¥½ï¼ˆå†’æ³¡/æ’å…¥ï¼‰ã€‚ä½†å¦‚æœä½ æŠŠ 1000 å¼ ç‰Œåˆ†æˆ 4 ä»½ï¼Œå››ä¸ªäººåŒæ—¶å„è‡ªæ’å¥½ï¼Œå†åˆå¹¶å‘¢ï¼Ÿ</p><p>âœ… æ¯äººå·¥ä½œé‡å˜å°‘ï¼›âœ… æœ€ååªéœ€<strong>åˆå¹¶</strong>å››ä»½æœ‰åºç‰Œï¼›âœ… è¿™å°±æ˜¯å½’å¹¶æ’åºçš„æ ¸å¿ƒæ€æƒ³ï¼š</p><blockquote><p><strong>Divideï¼ˆåˆ’åˆ†ï¼‰ â†’ Conquerï¼ˆè§£å†³ï¼‰ â†’ Combineï¼ˆåˆå¹¶ï¼‰</strong></p></blockquote><hr><h2 id="ğŸ§©-äºŒã€ç®—æ³•æ€æƒ³">ğŸ§© äºŒã€ç®—æ³•æ€æƒ³</h2><h3 id="ğŸŒ±-æ€æƒ³æ¦‚æ‹¬ï¼š">ğŸŒ± æ€æƒ³æ¦‚æ‹¬ï¼š</h3><ol><li>å°†æ•°ç»„ä¸€åˆ†ä¸ºäºŒï¼›</li><li>å¯¹å·¦å³ä¸¤éƒ¨åˆ†åˆ†åˆ«é€’å½’æ’åºï¼›</li><li>å°†ä¸¤ä¸ªæœ‰åºå­æ•°ç»„<strong>åˆå¹¶</strong>ä¸ºä¸€ä¸ªæ–°çš„æœ‰åºæ•°ç»„ã€‚</li></ol><h3 id="å›¾ç¤ºè¯´æ˜ï¼š">å›¾ç¤ºè¯´æ˜ï¼š</h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs inform7">åŸæ•°ç»„: <span class="hljs-comment">[38, 27, 43, 3, 9, 82, 10]</span><br><br>åˆ†è§£:<br><span class="hljs-comment">[38, 27, 43, 3]</span>       <span class="hljs-comment">[9, 82, 10]</span><br>   â†“                      â†“<br><span class="hljs-comment">[38, 27]</span> <span class="hljs-comment">[43, 3]</span>      <span class="hljs-comment">[9, 82]</span> <span class="hljs-comment">[10]</span><br>   â†“        â†“           â†“       â†“<br><span class="hljs-comment">[27, 38]</span> <span class="hljs-comment">[3, 43]</span>      <span class="hljs-comment">[9, 82]</span> <span class="hljs-comment">[10]</span><br>   â†“        â†“           â†“       â†“<br>   <span class="hljs-comment">[3, 27, 38, 43]</span>     <span class="hljs-comment">[9, 10, 82]</span><br>         â†“                â†“<br>     <span class="hljs-comment">[3, 9, 10, 27, 38, 43, 82]</span><br></code></pre></td></tr></table></figure><hr><h2 id="âš™ï¸-ä¸‰ã€ä¼ªä»£ç ">âš™ï¸ ä¸‰ã€ä¼ªä»£ç </h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">procedure MergeSort(A, left, right):<br>    if left &gt;= right:<br>        return<br>    mid â† (left + right) / 2<br>    MergeSort(A, left, mid)<br>    MergeSort(A, mid + 1, right)<br>    Merge(A, left, mid, right)<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ”§-åˆå¹¶ï¼ˆMergeï¼‰æ“ä½œ">ğŸ”§ åˆå¹¶ï¼ˆMergeï¼‰æ“ä½œ</h3><p>å°†ä¸¤ä¸ªæœ‰åºå­æ•°ç»„ <code>[left..mid]</code> å’Œ <code>[mid+1..right]</code> åˆå¹¶æˆä¸€ä¸ªæ–°çš„æœ‰åºæ•°ç»„ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs text">procedure Merge(A, left, mid, right):<br>    L â† A[left..mid]<br>    R â† A[mid+1..right]<br>    i â† 0, j â† 0, k â† left<br>    while i &lt; len(L) and j &lt; len(R):<br>        if L[i] â‰¤ R[j]:<br>            A[k] â† L[i]; i â† i + 1<br>        else:<br>            A[k] â† R[j]; j â† j + 1<br>        k â† k + 1<br>    // æ‹·è´å‰©ä½™å…ƒç´ <br>    while i &lt; len(L): A[k++] â† L[i++]<br>    while j &lt; len(R): A[k++] â† R[j++]<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ’»-å››ã€C-å®ç°">ğŸ’» å››ã€C++ å®ç°</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    <span class="hljs-type">int</span> n1 = mid - left + <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> n2 = right - mid;<br><br>    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">L</span><span class="hljs-params">(n1)</span>, <span class="hljs-title">R</span><span class="hljs-params">(n2)</span></span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n1; ++i)<br>        L[i] = arr[left + i];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n2; ++j)<br>        R[j] = arr[mid + <span class="hljs-number">1</span> + j];<br><br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>, k = left;<br><br>    <span class="hljs-keyword">while</span> (i &lt; n1 &amp;&amp; j &lt; n2) &#123;<br>        <span class="hljs-keyword">if</span> (L[i] &lt;= R[j]) &#123;<br>            arr[k++] = L[i++];<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            arr[k++] = R[j++];<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (i &lt; n1) arr[k++] = L[i++];<br>    <span class="hljs-keyword">while</span> (j &lt; n2) arr[k++] = R[j++];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mergeSort</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (left &gt;= right) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-type">int</span> mid = left + (right - left) / <span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">mergeSort</span>(arr, left, mid);<br>    <span class="hljs-built_in">mergeSort</span>(arr, mid + <span class="hljs-number">1</span>, right);<br>    <span class="hljs-built_in">merge</span>(arr, left, mid, right);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; arr = &#123;<span class="hljs-number">38</span>, <span class="hljs-number">27</span>, <span class="hljs-number">43</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>, <span class="hljs-number">82</span>, <span class="hljs-number">10</span>&#125;;<br>    <span class="hljs-built_in">mergeSort</span>(arr, <span class="hljs-number">0</span>, arr.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>);<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æ’åºç»“æœï¼š&quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tap">æ’åºç»“æœï¼š3<span class="hljs-number"> 9 </span>10<span class="hljs-number"> 27 </span>38<span class="hljs-number"> 43 </span>82<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ“ˆ-äº”ã€å¤æ‚åº¦åˆ†æï¼ˆæ•°å­¦è§†è§’ï¼‰">ğŸ“ˆ äº”ã€å¤æ‚åº¦åˆ†æï¼ˆæ•°å­¦è§†è§’ï¼‰</h2><h3 id="1ï¸âƒ£-æ—¶é—´å¤æ‚åº¦ï¼ˆé€’å½’å…³ç³»å¼ï¼‰">1ï¸âƒ£ æ—¶é—´å¤æ‚åº¦ï¼ˆé€’å½’å…³ç³»å¼ï¼‰</h3><p>å½’å¹¶æ’åºçš„è¿è¡Œæ—¶é—´æ»¡è¶³ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn><mi>T</mi><mrow><mo fence="true">(</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo fence="true">)</mo></mrow><mo>+</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) = 2T\left(\frac{n}{2}\right) + O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.836em;vertical-align:-0.686em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><p>è§£é‡Šï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">2T(n/2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord">/2</span><span class="mclose">)</span></span></span></span>ï¼šé€’å½’ä¸¤æ¬¡å¤„ç†å­æ•°ç»„ï¼›</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼šåˆå¹¶æ“ä½œã€‚</li></ul><p>ä½¿ç”¨ <strong>ä¸»å®šç†ï¼ˆMaster Theoremï¼‰</strong>ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>a</mi><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>b</mi><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) = aT(n/b) + f(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><p>å…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">a = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">b = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">f(n) = n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></p><p>ç”±äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>n</mi><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mi>b</mi></msub><mi>a</mi></mrow></msup><mo>=</mo><msup><mi>n</mi><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mn>2</mn></msub><mn>2</mn></mrow></msup><mo>=</mo><msup><mi>n</mi><mn>1</mn></msup></mrow><annotation encoding="application/x-tex">n^{\log_b a} = n^{\log_2 2} = n^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span>ï¼Œä¸” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n) = O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Œæ»¡è¶³ç¬¬äºŒç§æƒ…å†µï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) = O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><p>âœ… æœ€ç»ˆç»“æœï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) = O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><hr><h3 id="2ï¸âƒ£-ç©ºé—´å¤æ‚åº¦">2ï¸âƒ£ ç©ºé—´å¤æ‚åº¦</h3><p>éœ€è¦é¢å¤–æ•°ç»„å­˜æ”¾ä¸´æ—¶åˆå¹¶ç»“æœï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(n) = O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><hr><h3 id="3ï¸âƒ£-ç¨³å®šæ€§åˆ†æ">3ï¸âƒ£ ç¨³å®šæ€§åˆ†æ</h3><p>âœ… ç¨³å®šï¼šå½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>R</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">L[i] = R[j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span> æ—¶ä¼˜å…ˆæ‹·è´å·¦ä¾§å…ƒç´ ã€‚</p><hr><h2 id="ğŸ”¢-å…­ã€æ•°å­¦æ·±å…¥ï¼šä¸ºä»€ä¹ˆæ˜¯-O-n-log-n-ï¼Ÿ">ğŸ”¢ å…­ã€æ•°å­¦æ·±å…¥ï¼šä¸ºä»€ä¹ˆæ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Ÿ</h2><p>æˆ‘ä»¬ä»é€’å½’æ ‘è§’åº¦ç†è§£ï¼š</p><p>æ¯ä¸€å±‚çš„åˆå¹¶ä»£ä»·éƒ½æ˜¯ <strong>n</strong>ï¼š</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs excel">ç¬¬<span class="hljs-number">0</span>å±‚ï¼š<span class="hljs-number">1</span>ä¸ªå­é—®é¢˜ï¼Œå¤§å°<span class="hljs-built_in">n</span> â†’ ä»£ä»· <span class="hljs-built_in">n</span><br>ç¬¬<span class="hljs-number">1</span>å±‚ï¼š<span class="hljs-number">2</span>ä¸ªå­é—®é¢˜ï¼Œå¤§å°<span class="hljs-built_in">n</span>/<span class="hljs-number">2</span> â†’ ä»£ä»· <span class="hljs-number">2</span>*(<span class="hljs-built_in">n</span>/<span class="hljs-number">2</span>) = <span class="hljs-built_in">n</span><br>ç¬¬<span class="hljs-number">2</span>å±‚ï¼š<span class="hljs-number">4</span>ä¸ªå­é—®é¢˜ï¼Œå¤§å°<span class="hljs-built_in">n</span>/<span class="hljs-number">4</span> â†’ ä»£ä»· <span class="hljs-number">4</span>*(<span class="hljs-built_in">n</span>/<span class="hljs-number">4</span>) = <span class="hljs-built_in">n</span><br>...<br>æ€»å±‚æ•° â‰ˆ <span class="hljs-built_in">log</span>â‚‚<span class="hljs-built_in">n</span><br></code></pre></td></tr></table></figure><p>æ€»ä»£ä»·ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>n</mi><mo>+</mo><mi>n</mi><mo>+</mo><mi>n</mi><mo>+</mo><mo>â‹¯</mo><mo>+</mo><mi>n</mi><mo>=</mo><mi>n</mi><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mn>2</mn></msub><mi>n</mi></mrow><annotation encoding="application/x-tex">n + n + n + \cdots + n = n \log_2 n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9386em;vertical-align:-0.2441em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span></span></span></span></span></p><p>å› æ­¤ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) = O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p><hr><h2 id="ğŸš€-ä¸ƒã€å·¥ç¨‹ç‰¹æ€§ä¸å®è·µä¼˜åŒ–">ğŸš€ ä¸ƒã€å·¥ç¨‹ç‰¹æ€§ä¸å®è·µä¼˜åŒ–</h2><table><thead><tr><th>ä¼˜åŒ–æ–¹å‘</th><th>æ€æƒ³</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><strong>å°åŒºé—´æ”¹ç”¨æ’å…¥æ’åº</strong></td><td>å½“å­æ•°ç»„é•¿åº¦ &lt; 16ï¼Œç”¨æ’å…¥æ’åºæ›´å¿«</td><td>CPU Cacheå‹å¥½</td></tr><tr><td><strong>åŸåœ°åˆå¹¶ä¼˜åŒ–</strong></td><td>é¿å…ä¸´æ—¶æ•°ç»„</td><td>å‡å°‘ç©ºé—´å¼€é”€ï¼ˆä½†å®ç°å¤æ‚ï¼‰</td></tr><tr><td><strong>å¤šçº¿ç¨‹å½’å¹¶</strong></td><td>ä¸¤ä¸ªå­é—®é¢˜å¹¶è¡Œ</td><td>å¤§å¹…æé«˜å¤šæ ¸æ€§èƒ½</td></tr><tr><td><strong>å¤–éƒ¨æ’åºï¼ˆç£ç›˜å½’å¹¶ï¼‰</strong></td><td>é€‚åˆå¤§æ•°æ®é›†</td><td>I/O ä¼˜åŒ–</td></tr></tbody></table><hr><h2 id="ğŸ§ -å…«ã€æ€è€ƒä¸ç»ƒä¹ ">ğŸ§  å…«ã€æ€è€ƒä¸ç»ƒä¹ </h2><ol><li><p>ä¸ºä»€ä¹ˆå½’å¹¶æ’åºåœ¨é“¾è¡¨æ’åºä¸­è¡¨ç°éå¸¸ä¼˜ï¼Ÿï¼ˆæç¤ºï¼šåˆå¹¶é“¾è¡¨å¯ä»¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> æ“ä½œï¼Œæ— éœ€ç§»åŠ¨å†…å­˜ï¼‰</p></li><li><p>è‹¥æ•°ç»„é•¿åº¦æ˜¯ 1024ï¼Œé€’å½’æ·±åº¦æ˜¯å¤šå°‘ï¼Ÿï¼ˆæç¤ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mn>2</mn></msub><mn>1024</mn><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">\log_2 1024 = 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9386em;vertical-align:-0.2441em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1024</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span>ï¼‰</p></li><li><p>è¯·å°è¯•å®ç° <strong>è¿­ä»£ç‰ˆï¼ˆéé€’å½’ç‰ˆï¼‰</strong> å½’å¹¶æ’åºã€‚</p></li><li><p>ä½ èƒ½åœ¨ <code>merge()</code> å‡½æ•°ä¸­åªç”¨ä¸€ä¸ªç¼“å†²åŒºå®Œæˆå·¦å³åˆå¹¶å—ï¼Ÿ</p></li></ol><hr><h2 id="ğŸŒ±-ä¹ã€å»¶ä¼¸é˜…è¯»">ğŸŒ± ä¹ã€å»¶ä¼¸é˜…è¯»</h2><ul><li><p>ã€Šç®—æ³•å¯¼è®ºã€‹ç¬¬ 2.3 ç« ï¼šå½’å¹¶æ’åº</p></li><li><p>ã€Šè®¡ç®—æœºç¨‹åºè®¾è®¡è‰ºæœ¯ï¼ˆTAOCPï¼‰ã€‹å· 3 Â§5.2.4</p></li><li><p>LeetCode æ¨èé¢˜ç›®ï¼š</p><ul><li><a href="https://leetcode.com/problems/sort-list/">#148. Sort List</a>ï¼ˆé“¾è¡¨å½’å¹¶æ’åºï¼‰</li><li><a href="https://leetcode.com/problems/sort-an-array/">#912. Sort an Array</a></li></ul></li></ul><hr><h2 id="âœ¨-åã€æ€»ç»“">âœ¨ åã€æ€»ç»“</h2><table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ—¶é—´å¤æ‚åº¦</strong></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td></tr><tr><td><strong>ç©ºé—´å¤æ‚åº¦</strong></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td></tr><tr><td><strong>ç¨³å®šæ€§</strong></td><td>âœ… ç¨³å®š</td></tr><tr><td><strong>æ˜¯å¦åŸåœ°æ’åº</strong></td><td>âŒ å¦ï¼ˆéœ€è¾…åŠ©æ•°ç»„ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¤§æ•°æ®ã€é“¾è¡¨æ’åºã€å¤–éƒ¨æ’åº</td></tr></tbody></table><blockquote><p>â€œå½’å¹¶æ’åºæ˜¯ç®—æ³•çš„ç¬¬ä¸€æ¬¡å“²å­¦æ€è€ƒâ€”â€”æŠŠé—®é¢˜æ‹†åˆ†æˆèƒ½è§£å†³çš„å°é—®é¢˜ï¼Œå†ç»„åˆå›ç­”æ¡ˆã€‚â€</p></blockquote><hr><p>ğŸ”œ <strong>ä¸‹å‘¨é¢„å‘Šï¼ˆç¬¬ 4 å‘¨ï¼‰</strong></p><blockquote><p><strong>å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰â€”â€”â€œåˆ†æ²»&quot;é‡ä¸Š&quot;éšæœºâ€</strong>æˆ‘ä»¬å°†çœ‹åˆ°ï¼šç›¸åŒçš„åˆ†æ²»æ€æƒ³ï¼Œå¦‚ä½•åœ¨&quot;æœŸæœ›å¤æ‚åº¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>&quot;ä¸­è·‘å¾—æ›´å¿«ã€‚</p></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> ä¸€å‘¨ä¸€ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> C++ </tag>
            
            <tag> å½’å¹¶æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠFreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ã€‹ç¬¬2.2ç¯‡ï¼šESP32 ç¯å¢ƒæ­å»º (ESP-IDF + VSCode) å®Œæ•´æŒ‡å—</title>
      <link href="/2025/10/25/%E3%80%8AFreeRTOS-%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B%E3%80%8B%E7%AC%AC2-2%E7%AF%87%EF%BC%9AESP32-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-ESP-IDF-VSCode-%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/"/>
      <url>/2025/10/25/%E3%80%8AFreeRTOS-%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B%E3%80%8B%E7%AC%AC2-2%E7%AF%87%EF%BC%9AESP32-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-ESP-IDF-VSCode-%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<h1>ã€ŠFreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ã€‹ç¬¬2.2ç¯‡ï¼šESP32 ç¯å¢ƒæ­å»º (ESP-IDF + VSCode) å®Œæ•´æŒ‡å—</h1><p><strong>å‰¯æ ‡é¢˜ï¼šä»â€œé›†æˆå¼€å‘ç¯å¢ƒâ€åˆ°â€œå¯æ‰©å±• SDKâ€ï¼Œä½“éªŒç°ä»£ IoT å·¥ä½œæµ</strong></p><p>â­ <strong>éš¾åº¦ç­‰çº§ï¼šâ˜…â˜†â˜† åŸºç¡€</strong></p><p><strong>æ ‡ç­¾</strong>ï¼š<code>FreeRTOS</code>, <code>ESP32</code>, <code>ESP-IDF</code>, <code>VSCode</code>, <code>ç¯å¢ƒæ­å»º</code>, <code>IoT</code>, <code>CLI</code></p><h2 id="ğŸ“-å®æˆ˜é—®é¢˜åœºæ™¯">ğŸ“ å®æˆ˜é—®é¢˜åœºæ™¯</h2><p>æ¬¢è¿æ¥åˆ° ESP32 çš„ä¸–ç•Œï¼å¦‚æœä½ æ˜¯ï¼ˆæˆ–æ›¾ç»æ˜¯ï¼‰ä¸€ä¸ª Keil MDK ç”¨æˆ·ï¼Œä½ åœ¨è¿™é‡Œå°†ç»å†ä¸€æ¬¡å¼ºçƒˆçš„â€œæ–‡åŒ–å†²å‡»â€ï¼š</p><ul><li>â€œæ²¡æœ‰ CubeMX è¿™æ ·çš„å›¾å½¢åŒ–é…ç½®å·¥å…·å—ï¼Ÿï¼ˆå‰§é€ï¼šæœ‰ï¼Œä½†é•¿å¾—ä¸ä¸€æ ·ï¼‰â€</li><li>â€œä¸ºä»€ä¹ˆæ²¡æœ‰ä¸€ä¸ª<code>.exe</code>æ–‡ä»¶èƒ½ä¸€é”®å®‰è£…æ‰€æœ‰ä¸œè¥¿ï¼Ÿâ€</li><li>â€œä»€ä¹ˆæ˜¯ <code>idf.py</code>ï¼Ÿä»€ä¹ˆæ˜¯ <code>menuconfig</code>ï¼Ÿæˆ‘åªæ˜¯æƒ³ç¼–è¯‘ä¸€ä¸ªå·¥ç¨‹ï¼â€</li><li>â€œä¸ºä»€ä¹ˆå®‰è£…ä¸€ä¸ªåµŒå…¥å¼ç¯å¢ƒï¼Œå®ƒå´è¦æˆ‘å®‰è£… Python å’Œ Gitï¼Ÿâ€</li><li>â€œæˆ‘ç‚¹å‡»äº†â€˜çƒ§å½•â€™ï¼Œä½†ç»ˆç«¯æç¤º <code>COM port access is denied</code>â€¦â€</li></ul><p>ç¬¬ 2.1 ç¯‡ä¸­ï¼ŒSTM32 + Keil æä¾›çš„æ˜¯ä¸€ä¸ª<strong>é«˜åº¦é›†æˆçš„å›¾å½¢åŒ– IDE</strong>ã€‚è€Œ ESP32 + ESP-IDF + VSCode æä¾›çš„æ˜¯ä¸€ä¸ª<strong>åŸºäºå‘½ä»¤è¡Œçš„ SDK + ç°ä»£åŒ–ç¼–è¾‘å™¨</strong>çš„ç»„åˆã€‚</p><p>è¿™ç§â€œç°ä»£å·¥ä½œæµâ€è™½ç„¶åˆçœ‹æ›´å¤æ‚ï¼Œä½†å®ƒæ›´é€æ˜ã€æ›´å¼ºå¤§ã€æ›´æ˜“äºè‡ªåŠ¨åŒ–å’Œç‰ˆæœ¬æ§åˆ¶ã€‚æœ¬ç¯‡çš„ä»»åŠ¡å°±æ˜¯å¸¦ä½ å¹³ç¨³åº¦è¿‡è¿™ä¸ªâ€œå†²å‡»æœŸâ€ï¼Œè®©ä½ ä½“éªŒåˆ°è¿™å¥—å·¥å…·é“¾çš„çœŸæ­£é­…åŠ›ã€‚</p><h2 id="ğŸ¯-æœ¬ç¯‡èƒ½åŠ›ç›®æ ‡">ğŸ¯ æœ¬ç¯‡èƒ½åŠ›ç›®æ ‡</h2><ol><li>âœ… <strong>ç†è§£ ESP-IDF å“²å­¦</strong>ï¼šæ˜ç™½ ESP-IDFï¼ˆä¹é‘«ç‰©è”ç½‘å¼€å‘æ¡†æ¶ï¼‰ä¸ FreeRTOS çš„<strong>åŸç”Ÿ</strong>å…³ç³»ã€‚</li><li>âœ… <strong>è‡ªåŠ¨åŒ–å·¥å…·é“¾å®‰è£…</strong>ï¼šä½¿ç”¨ VSCode çš„ <strong>Espressif IDF å®˜æ–¹æ‰©å±•</strong>ï¼Œä¸€é”®å®Œæˆï¼ˆPython, Git, ç¼–è¯‘å™¨ç­‰ï¼‰å¤æ‚å·¥å…·é“¾çš„å®‰è£…ã€‚</li><li>âœ… <strong>æ‰“é€šå¼€å‘é“¾è·¯</strong>ï¼šè·‘é€šå®˜æ–¹ <code>hello_world</code> ç¤ºä¾‹ï¼ŒéªŒè¯ <strong>ç¼–è¯‘ â†’ çƒ§å½• â†’ ç›‘è§†</strong> å…¨æµç¨‹ã€‚</li><li>âœ… <strong>æŒæ¡æ ¸å¿ƒå·¥å…·</strong>ï¼šå­¦ä¼šä½¿ç”¨ VSCode ç•Œé¢æŒ‰é’®ã€<code>menuconfig</code>ï¼ˆé…ç½®å™¨ï¼‰å’Œ <code>ESP_LOGx</code>ï¼ˆæ—¥å¿—ç³»ç»Ÿï¼‰ã€‚</li><li>âœ… <strong>æœ€ç»ˆæˆæœ</strong>ï¼šæˆåŠŸåœ¨ ESP32 ä¸Šè¿è¡Œä¸€ä¸ª<strong>çœŸæ­£çš„ FreeRTOS ä»»åŠ¡</strong>ï¼Œå¹¶æ‰“å°å‡ºæ—¥å¿—ã€‚</li></ol><h2 id="ğŸ§ -ç†è®ºç®€æï¼šESP-IDF-æ¶æ„-â€”â€”-FreeRTOS-å³æ˜¯åº•å±‚">ğŸ§  ç†è®ºç®€æï¼šESP-IDF æ¶æ„ â€”â€” FreeRTOS å³æ˜¯åº•å±‚</h2><p>ä¸ STM32 <em>ä¹‹ä¸Šå¯é€‰</em> FreeRTOS ä¸åŒï¼ŒESP-IDF çš„æ¶æ„<strong>åŸç”ŸåŸºäº</strong> FreeRTOSã€‚</p><p><strong>FreeRTOS æ˜¯ ESP-IDF çš„â€œåœ°åŸºâ€ï¼Œè€Œä¸æ˜¯â€œå¸ç¯·â€ã€‚</strong></p><ol><li><strong>ESP-IDF (SDK)</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªåºå¤§çš„è½¯ä»¶åŒ…ï¼ˆSDK - è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼‰ã€‚å®ƒ<strong>åŒ…å«</strong>äº† FreeRTOS å†…æ ¸ã€HAL é©±åŠ¨ã€TCP/IP åè®®æ ˆ (LwIP)ã€Wi-Fi/è“ç‰™é©±åŠ¨ã€æ–‡ä»¶ç³»ç»Ÿã€å®‰å…¨åº“ç­‰ç­‰ã€‚</li><li><strong>VSCode (ç¼–è¾‘å™¨)</strong>ï¼šä½ çš„ä»£ç ç¼–è¾‘å™¨ã€‚</li><li><strong>Espressif IDF æ‰©å±• (èƒ¶æ°´)</strong>ï¼šè¿™æ˜¯ä¹é‘«å®˜æ–¹æä¾›çš„ VSCode æ’ä»¶ã€‚å®ƒæ˜¯<strong>æœ¬ç¯‡æ•™ç¨‹çš„æ ¸å¿ƒ</strong>ã€‚å®ƒä¸ºä½ æä¾›äº†å›¾å½¢åŒ–æŒ‰é’®ï¼ˆç¼–è¯‘ã€çƒ§å½•ã€ç›‘è§†ï¼‰ï¼Œå¹¶è‡ªåŠ¨ç®¡ç†å¤æ‚çš„å·¥å…·é“¾ã€‚</li><li><strong><code>menuconfig</code> (é…ç½®å™¨)</strong>ï¼šè¿™å°±æ˜¯ ESP32 çš„â€œCubeMXâ€ã€‚å®ƒæ˜¯ä¸€ä¸ª<strong>åŸºäºç»ˆç«¯çš„å›¾å½¢èœå•</strong>ï¼ˆTUI - Text-based User Interfaceï¼‰ï¼Œç”¨äºé…ç½® ESP-IDF çš„æ‰€æœ‰é€‰é¡¹ï¼ˆåŒ…æ‹¬ FreeRTOS å†…æ ¸é…ç½®ã€Wi-Fi å¯†ç ã€CPU é¢‘ç‡ã€æ—¥å¿—ç­‰çº§ç­‰ï¼‰ã€‚</li><li><strong><code>app_main()</code> (ä½ çš„å…¥å£)</strong>ï¼šåœ¨ ESP-IDF ä¸­ï¼Œä½ å†™çš„ <code>app_main()</code> å‡½æ•°<strong>å¹¶ä¸æ˜¯çœŸæ­£çš„ <code>main()</code> å‡½æ•°</strong>ã€‚ç³»ç»Ÿå¯åŠ¨åï¼ŒESP-IDF ä¼šå…ˆåˆå§‹åŒ–åº•å±‚ç¡¬ä»¶å’Œ FreeRTOSï¼Œç„¶å<strong>åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ FreeRTOS ä»»åŠ¡</strong>ï¼Œè¿™ä¸ªä»»åŠ¡çš„å…¥å£ç‚¹å°±æ˜¯ <code>app_main()</code>ã€‚<ul><li><strong>ç»“è®ºï¼šä½ åœ¨ ESP-IDF ä¸­å†™çš„ <code>hello_world</code>ï¼Œå¤©ç”Ÿå°±æ˜¯è·‘åœ¨ FreeRTOS ä»»åŠ¡é‡Œçš„ã€‚</strong></li></ul></li></ol><hr><h2 id="ğŸ› ï¸-å®æ“æ­¥éª¤">ğŸ› ï¸ å®æ“æ­¥éª¤</h2><p>æœ¬æ•™ç¨‹ä»¥ç¬¬0ç¯‡æ¨èçš„ <strong>ESP32-DevKitC V4 (WROOM-32 æ¨¡ç»„)</strong> å’Œ <strong>VSCode</strong> ä¸ºä¾‹ã€‚</p><h3 id="ç¬¬1éƒ¨åˆ†ï¼šå®‰è£…-VSCode-å’Œ-Espressif-IDF-æ‰©å±•">ç¬¬1éƒ¨åˆ†ï¼šå®‰è£… VSCode å’Œ Espressif IDF æ‰©å±•</h3><ol><li><strong>å®‰è£… VSCode</strong>ï¼šä»å®˜ç½‘ <a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a> ä¸‹è½½å¹¶å®‰è£…æœ€æ–°ç‰ˆ VSCodeã€‚</li><li><strong>å®‰è£…é©±åŠ¨ (CP210x)</strong>ï¼šç¡®ä¿ä½ å·²å®‰è£… ESP32 DevKitC V4 çš„ USB è½¬ä¸²å£é©±åŠ¨ï¼ˆCP210xï¼‰ã€‚ï¼ˆè§ç¬¬0ç¯‡æ¸…å•ï¼‰</li><li><strong>å®‰è£… ESP-IDF æ‰©å±•</strong>ï¼š<ul><li>æ‰“å¼€ VSCodeã€‚</li><li>ç‚¹å‡»å·¦ä¾§çš„<strong>æ‰©å±•</strong>å›¾æ ‡ (Extensions, <code>Ctrl+Shift+X</code>)ã€‚</li><li>åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ <code>Espressif IDF</code>ã€‚</li><li>æ‰¾åˆ°<strong>å®˜æ–¹</strong>ï¼ˆæœ‰è“è‰²å¯¹å‹¾ï¼‰çš„æ‰©å±•ï¼Œç‚¹å‡» <code>Install</code>ã€‚</li></ul></li></ol><h3 id="ç¬¬2éƒ¨åˆ†ï¼š-æœ€å…³é”®-è‡ªåŠ¨åŒ–å·¥å…·é“¾å®‰è£…-Onboarding">ç¬¬2éƒ¨åˆ†ï¼š[æœ€å…³é”®] è‡ªåŠ¨åŒ–å·¥å…·é“¾å®‰è£… (Onboarding)</h3><ol><li>å®‰è£…æ‰©å±•åï¼ŒVSCode å¯èƒ½ä¼šè‡ªåŠ¨å¼¹å‡ºâ€œESP-IDF è®¾ç½®â€å‘å¯¼ã€‚</li><li>å¦‚æœæ²¡æœ‰ï¼ŒæŒ‰ <code>F1</code> é”®ï¼Œåœ¨å¼¹å‡ºçš„å‘½ä»¤æ¡†ä¸­è¾“å…¥ <code>ESP-IDF: Configure ESP-IDF extension</code> (é…ç½® ESP-IDF æ‰©å±•)ï¼Œç„¶åå›è½¦ã€‚</li><li><strong>é€‰æ‹© <code>EXPRESS</code> æ¨¡å¼</strong>ï¼šè¿™æ˜¯ä¸ºåˆå­¦è€…å‡†å¤‡çš„<strong>ä¸€é”®å®‰è£…æ¨¡å¼</strong>ã€‚</li><li><strong>é€‰æ‹© ESP-IDF ç‰ˆæœ¬</strong>ï¼šé€‰æ‹©ä¸€ä¸ªç¨³å®šçš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚ <code>v4.4.5</code> æˆ– <code>v5.0.2</code> (æœ¬ç³»åˆ—å°†åŸºäº <code>v4.4.x</code>ï¼Œå…¼å®¹æ€§æœ€å¥½)ã€‚</li><li><strong>é€‰æ‹©å®‰è£…è·¯å¾„</strong>ï¼š<ul><li><code>ESP-IDF container directory</code> (SDK å­˜æ”¾ç›®å½•)ï¼šé€‰æ‹©ä¸€ä¸ª<strong>å…¨è‹±æ–‡ã€æ— ç©ºæ ¼</strong>çš„è·¯å¾„ï¼Œä¾‹å¦‚ <code>D:\esp</code>ã€‚</li><li><code>ESP-IDF Tools directory</code> (å·¥å…·é“¾å­˜æ”¾ç›®å½•)ï¼šå®ƒä¼šè‡ªåŠ¨è®¾ä¸º <code>container</code> ç›®å½•ä¸‹çš„ <code>.espressif</code>ï¼Œä¿æŒé»˜è®¤å³å¯ã€‚</li></ul></li><li><strong>ç‚¹å‡» <code>Install</code></strong>ï¼š<ul><li><strong>å»å–æ¯å’–å•¡æˆ–è€…å»æ‰“å±€ç‹è€…</strong>ã€‚è¿™ä¸€æ­¥ä¼šæŒç»­ 10 åˆ° 30 åˆ†é’Ÿã€‚</li><li>æ‰©å±•æ­£åœ¨åå°è‡ªåŠ¨ä¸‹è½½å’Œå®‰è£…ï¼š<code>ESP-IDF SDK</code>ã€<code>Python</code> è™šæ‹Ÿç¯å¢ƒã€<code>Xtensa-gcc</code> ç¼–è¯‘å™¨ã€<code>CMake</code>ã€<code>Ninja</code> ç­‰æ‰€æœ‰ä¾èµ–ã€‚</li><li>ä½ å¯ä»¥åœ¨ VSCode çš„ç»ˆç«¯è¾“å‡ºä¸­çœ‹åˆ°æ»šåŠ¨çš„æ—¥å¿—ã€‚</li></ul></li><li><strong>éªŒè¯æˆåŠŸ</strong>ï¼šå½“æ‰€æœ‰æ­¥éª¤éƒ½æ˜¾ç¤ºç»¿è‰²å¯¹å‹¾ âœ…ï¼Œè¡¨ç¤ºç¯å¢ƒå·²å®Œç¾å°±ç»ªã€‚</li></ol><h3 id="ç¬¬3éƒ¨åˆ†ï¼šç¼–è¯‘ã€çƒ§å½•å’Œç›‘è§†-hello-world">ç¬¬3éƒ¨åˆ†ï¼šç¼–è¯‘ã€çƒ§å½•å’Œç›‘è§† <code>hello_world</code></h3><ol><li><p><strong>åŠ è½½ç¤ºä¾‹é¡¹ç›®</strong>ï¼š</p><ul><li>æŒ‰ <code>F1</code> é”®ï¼Œè¾“å…¥ <code>ESP-IDF: Show Examples Projects</code> (æ˜¾ç¤ºç¤ºä¾‹é¡¹ç›®)ã€‚</li><li>é€‰æ‹©ä½ åˆšæ‰å®‰è£…çš„ ESP-IDF ç‰ˆæœ¬ (e.g., <code>v4.4.5</code>)ã€‚</li><li>åœ¨å·¦ä¾§åˆ—è¡¨ä¸­ï¼Œé€‰æ‹© <code>get-started</code> -&gt; <code>hello_world</code>ã€‚</li><li>ç‚¹å‡» <code>Create project using example 'hello_world'</code> (ä½¿ç”¨ç¤ºä¾‹åˆ›å»ºé¡¹ç›®)ã€‚</li><li>é€‰æ‹©ä¸€ä¸ª<strong>æ–°çš„</strong>æ–‡ä»¶å¤¹ï¼ˆä¾‹å¦‚ <code>FreeRTOS-Tutorial/esp32/ESP32_P2_HelloWorld</code>ï¼‰å­˜æ”¾ä½ çš„å·¥ç¨‹ã€‚</li><li>VSCode ä¼šè‡ªåŠ¨æ‰“å¼€è¿™ä¸ªæ–°å·¥ç¨‹ï¼Œå¹¶è¯¢é—®â€œæ˜¯å¦ä¿¡ä»»æ­¤æ–‡ä»¶å¤¹â€ï¼Œé€‰æ‹©â€œæ˜¯â€ã€‚</li></ul></li><li><p>ç†Ÿæ‚‰ VSCode åº•éƒ¨çŠ¶æ€æ ï¼ˆä½ çš„â€œé©¾é©¶èˆ±â€ï¼‰ï¼š</p><p>è¿™æ˜¯ ESP-IDF æ‰©å±•çš„æ ¸å¿ƒ UIï¼Œå®ƒå–ä»£äº† Keil çš„å·¥å…·æ æŒ‰é’®ã€‚</p><p>ä»å·¦åˆ°å³ä¾æ¬¡æ˜¯ï¼š</p><ul><li><code>COM Port</code> (ç‚¹å‡»é€‰æ‹©ä½ çš„ ESP32 ç«¯å£ï¼Œå¦‚ <code>COM3</code>)</li><li><code>Target</code> (ç‚¹å‡»é€‰æ‹©ä½ çš„èŠ¯ç‰‡ï¼Œå¦‚ <code>esp32</code>)</li><li><code>Launch SDK Configuration editor (menuconfig)</code> (âš™ï¸ å›¾æ ‡ï¼Œå³â€œCubeMXâ€)</li><li><code>Build</code> (ğŸ—ï¸ å›¾æ ‡ï¼Œç¼–è¯‘)</li><li><code>Flash</code> (âš¡ï¸ å›¾æ ‡ï¼Œçƒ§å½•)</li><li><code>Monitor</code> (ğŸ”Œ å›¾æ ‡ï¼Œæ‰“å¼€ä¸²å£ç›‘è§†å™¨)</li><li><code>Build, Flash and Monitor</code> (ğŸš€ å›¾æ ‡ï¼Œå…¨å®¶æ¡¶ä¸€é”®æ‰§è¡Œ)</li></ul></li><li><p><strong>ä¸€é”®è¿è¡Œ</strong>ï¼š</p><ul><li>å°†ä½ çš„ ESP32 å¼€å‘æ¿è¿æ¥åˆ°ç”µè„‘ã€‚</li><li>(1) ç‚¹å‡»çŠ¶æ€æ çš„ <code>COM Port</code>ï¼Œé€‰æ‹©ä½ çš„ ESP32 å¯¹åº”çš„ä¸²å£ã€‚</li><li>(2) ç‚¹å‡»çŠ¶æ€æ æœ€å³ä¾§çš„ <code>Build, Flash and Monitor</code> (ğŸš€) æŒ‰é’®ã€‚</li></ul></li><li><p><strong>è§‚å¯Ÿç»ˆç«¯</strong>ï¼š</p><ul><li>VSCode çš„ç»ˆç«¯ä¼šè‡ªåŠ¨å¼€å§‹å·¥ä½œï¼š</li><li><strong>(Build)</strong> <code>ninja</code> å¼€å§‹å…¨é€Ÿç¼–è¯‘â€¦</li><li><strong>(Flash)</strong> ç¼–è¯‘æˆåŠŸåï¼Œ<code>esptool.py</code> è‡ªåŠ¨è¿æ¥å¹¶çƒ§å½•â€¦</li><li><strong>(Monitor)</strong> çƒ§å½•æˆåŠŸåï¼Œ<code>idf_monitor.py</code> è‡ªåŠ¨æ‰“å¼€ä¸²å£ç›‘è§†å™¨ã€‚</li></ul></li><li><p><strong>éªŒè¯</strong>ï¼šä½ åœ¨ç»ˆç«¯ä¸­ä¼šçœ‹åˆ°å¦‚ä¸‹å¾ªç¯æ‰“å°çš„æ—¥å¿—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">...<br>I (312) main_task: Calling app_main()<br>I (312) hello_world: Hello world!<br>I (1312) hello_world: Restarting <span class="hljs-keyword">in</span> 10 seconds...<br>I (2312) hello_world: Restarting <span class="hljs-keyword">in</span> 9 seconds...<br>...<br>I (11312) hello_world: Restarting <span class="hljs-keyword">in</span> 0 seconds...<br>I (11312) main_task: Returned from app_main()<br>I (11322) main_task: Calling app_main()<br>I (11322) hello_world: Hello world!<br>...<br></code></pre></td></tr></table></figure><p><strong>æ­å–œï¼ä½ å·²åœ¨ ESP32 ä¸ŠæˆåŠŸè¿è¡Œäº†ä½ çš„ç¬¬ä¸€ä¸ª FreeRTOS ä»»åŠ¡ï¼</strong></p></li></ol><h2 id="âœ…-å…¨éƒ¨ä»£ç -hello-world">âœ… å…¨éƒ¨ä»£ç  (hello_world)</h2><p><code>hello_world</code> ç¤ºä¾‹çš„æ ¸å¿ƒä»£ç  (<code>main/hello_world_main.c</code>)ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* esp32/ESP32_P2_HelloWorld/main/hello_world_main.c */</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;sdkconfig.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;freertos/FreeRTOS.h&quot;</span> <span class="hljs-comment">// [å…³é”®] è‡ªåŠ¨å¼•å…¥ FreeRTOS</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;freertos/task.h&quot;</span>     <span class="hljs-comment">// [å…³é”®] è‡ªåŠ¨å¼•å…¥ Task</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;esp_system.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;esp_spi_flash.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;esp_log.h&quot;</span> <span class="hljs-comment">// [å…³é”®] å¼•å…¥ ESP-IDF çš„æ—¥å¿—ç³»ç»Ÿ</span></span><br><br><span class="hljs-comment">// [å…³é”®] å®šä¹‰ä¸€ä¸ª TAGï¼Œç”¨äºæ—¥å¿—è¾“å‡º</span><br><span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">char</span> *TAG = <span class="hljs-string">&quot;hello_world&quot;</span>;<br><br><span class="hljs-comment">// [å…³é”®] è¿™å°±æ˜¯ä½ çš„ç¬¬ä¸€ä¸ª FreeRTOS ä»»åŠ¡å…¥å£ï¼</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">app_main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    <span class="hljs-comment">// ä½¿ç”¨ ESP_LOGI (Info çº§åˆ«) æ‰“å°æ—¥å¿—</span><br>    ESP_LOGI(TAG, <span class="hljs-string">&quot;Hello world!&quot;</span>);<br><br>    <span class="hljs-comment">/* æ‰“å°èŠ¯ç‰‡ä¿¡æ¯ (å¯é€‰) */</span><br>    <span class="hljs-type">esp_chip_info_t</span> chip_info;<br>    esp_chip_info(&amp;chip_info);<br>    ESP_LOGI(TAG, <span class="hljs-string">&quot;This is %s chip with %d CPU core(s), WiFi%s%s, &quot;</span>,<br>             CONFIG_IDF_TARGET,<br>             chip_info.cores,<br>             (chip_info.features &amp; CHIP_FEATURE_BT) ? <span class="hljs-string">&quot;/BT&quot;</span> : <span class="hljs-string">&quot;&quot;</span>,<br>             (chip_info.features &amp; CHIP_FEATURE_BLE) ? <span class="hljs-string">&quot;/BLE&quot;</span> : <span class="hljs-string">&quot;&quot;</span>);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">10</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        ESP_LOGI(TAG, <span class="hljs-string">&quot;Restarting in %d seconds...&quot;</span>, i);<br>        <br>        <span class="hljs-comment">// [å…³é”®] vTaskDelay() æ˜¯ FreeRTOS çš„æ ‡å‡† API</span><br>        <span class="hljs-comment">// pdMS_TO_TICKS() æ˜¯ä¸€ä¸ªå®ï¼Œå°†æ¯«ç§’(ms)è½¬æ¢ä¸º Ticks</span><br>        vTaskDelay(pdMS_TO_TICKS(<span class="hljs-number">1000</span>));<br>    &#125;<br>    <br>    ESP_LOGI(TAG, <span class="hljs-string">&quot;Restarting now.&quot;</span>);<br>    fflush(<span class="hljs-built_in">stdout</span>); <span class="hljs-comment">// åˆ·æ–°æ ‡å‡†è¾“å‡º</span><br>    esp_restart(); <span class="hljs-comment">// é‡å¯ ESP32</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ”-è°ƒè¯•æŠ€å·§ï¼šæ—¥å¿—ä¸é…ç½®">ğŸ” è°ƒè¯•æŠ€å·§ï¼šæ—¥å¿—ä¸é…ç½®</h2><p>åœ¨ ESP32 å¼€å‘ä¸­ï¼Œ<code>printf</code> å¾ˆå°‘è¢«ä½¿ç”¨ï¼Œ<code>ESP_LOGx</code> æ˜¯ä½ çš„â€œå¬è¯Šå™¨â€ï¼Œ<code>menuconfig</code> åˆ™æ˜¯ä½ çš„â€œç‘å£«å†›åˆ€â€ã€‚</p><ol><li><strong>ESP-IDF æ—¥å¿—ç³»ç»Ÿ (<code>ESP_LOGx</code>)</strong><ul><li><code>ESP_LOGE(TAG, &quot;Error: %d&quot;, err_code);</code> (Error, çº¢è‰²)</li><li><code>ESP_LOGW(TAG, &quot;Warning: %s&quot;, &quot;check value&quot;);</code> (Warning, é»„è‰²)</li><li><code>ESP_LOGI(TAG, &quot;Info: Booting up...&quot;);</code> (Info, ç»¿è‰² - é»˜è®¤çº§åˆ«)</li><li><code>ESP_LOGD(TAG, &quot;Debug: val=0x%X&quot;, val);</code> (Debug, é»˜è®¤å…³é—­)</li><li><code>ESP_LOGV(TAG, &quot;Verbose: entering func&quot;);</code> (Verbose, é»˜è®¤å…³é—­)</li><li>æ—¥å¿—çš„è¯¦ç»†çº§åˆ«å¯ä»¥åœ¨ <code>menuconfig</code> ä¸­å…¨å±€è®¾ç½®ã€‚</li></ul></li><li><strong>SDK é…ç½®å™¨ (<code>menuconfig</code>)</strong><ul><li><strong>å¦‚ä½•æ‰“å¼€</strong>ï¼šç‚¹å‡» VSCode åº•éƒ¨çŠ¶æ€æ çš„ âš™ï¸ å›¾æ ‡ (æˆ– <code>F1</code> -&gt; <code>ESP-IDF: SDK Configuration editor</code>)ã€‚</li><li><strong>ç•Œé¢</strong>ï¼šå®ƒä¼šæ‰“å¼€ä¸€ä¸ªâ€œå¤å¤â€çš„ç»ˆç«¯èœå•ã€‚</li><li><strong>æ“ä½œ</strong>ï¼šä½¿ç”¨<strong>é”®ç›˜ä¸Šä¸‹é”®</strong>ç§»åŠ¨ï¼Œ<code>Enter</code> è¿›å…¥ï¼Œ<code>Esc</code> é€€å‡ºï¼Œ<code>Y</code> é€‰ä¸­ï¼Œ<code>N</code> å–æ¶ˆï¼Œ<code>?</code> æŸ¥çœ‹å¸®åŠ©ï¼Œ<code>S</code> ä¿å­˜ï¼Œ<code>Q</code> é€€å‡ºã€‚</li><li><strong>ä½œç”¨</strong>ï¼šç­‰åŒäº CubeMXã€‚ä½ å¯ä»¥é…ç½® FreeRTOS (<code>Component config -&gt; FreeRTOS</code>)ï¼Œè®¾ç½®æ—¥å¿—çº§åˆ« (<code>Component config -&gt; Log output</code>)ï¼Œé…ç½® Wi-Fiï¼Œç­‰ç­‰ã€‚</li><li><strong>ä¿å­˜</strong>ï¼šä¿®æ”¹é…ç½®åï¼ŒæŒ‰ <code>S</code> ä¿å­˜ï¼Œ<code>Q</code> é€€å‡ºã€‚<strong>ä½ çš„ä¿®æ”¹ï¼ˆä¾‹å¦‚æ—¥å¿—çº§åˆ«ï¼‰éœ€è¦é‡æ–° <code>Build</code> (ç¼–è¯‘) æ‰ä¼šç”Ÿæ•ˆã€‚</strong></li></ul></li></ol><h2 id="âš ï¸-å¸¸è§é”™è¯¯ä¸ä¿®å¤">âš ï¸ å¸¸è§é”™è¯¯ä¸ä¿®å¤</h2><ol><li><strong>[æœ€å¸¸è§] é”™è¯¯: <code>A fatal error occurred: Failed to connect to ESP32: ... Access is denied.</code></strong><ul><li><strong>åŸå› </strong>: COM ç«¯å£è¢«å ç”¨äº†ã€‚</li><li><strong>ä¿®å¤</strong>: <strong>å…³é—­</strong>æ‰€æœ‰å…¶ä»–å¯èƒ½å ç”¨è¯¥ COM å£çš„ç¨‹åºï¼šMobaXterm, PuTTY, ä¸²å£åŠ©æ‰‹, ç”šè‡³ Arduino IDEã€‚VSCode çš„ <code>Monitor</code> (ç›‘è§†å™¨) ä¹Ÿä¼šå ç”¨å®ƒï¼Œå¦‚æœä½ æƒ³ <code>Flash</code> (çƒ§å½•)ï¼Œå¿…é¡»å…ˆ<strong>å…³é—­</strong>ï¼ˆç‚¹å‡» ğŸ”Œ å›¾æ ‡æˆ–æŒ‰ <code>Ctrl+C</code>ï¼‰æ­£åœ¨è¿è¡Œçš„ <code>Monitor</code> ç»ˆç«¯ã€‚</li></ul></li><li><strong>[æœ€å¸¸è§] é”™è¯¯: çƒ§å½•æ—¶ï¼Œç»ˆç«¯å¡åœ¨ <code>Connecting...</code></strong><ul><li><strong>åŸå›  1</strong>: ä½ çš„ ESP32 å¼€å‘æ¿æ¯”è¾ƒè€ï¼Œéœ€è¦æ‰‹åŠ¨è¿›å…¥ Bootloader æ¨¡å¼ã€‚</li><li><strong>ä¿®å¤ 1</strong>: <strong>æŒ‰ä½ <code>BOOT</code> æŒ‰é’®</strong>ï¼ŒåŒæ—¶<strong>æŒ‰ä¸€ä¸‹ <code>EN(RST)</code> æŒ‰é’®</strong>ï¼Œç„¶åå†æ¾å¼€ <code>BOOT</code> æŒ‰é’®ã€‚æ­¤æ—¶å†ç‚¹å‡» <code>Flash</code>ã€‚</li><li><strong>åŸå›  2</strong>: é©±åŠ¨é—®é¢˜æˆ– USB çº¿é—®é¢˜ã€‚</li></ul></li><li><strong>é”™è¯¯: <code>idf.py not found</code> æˆ– <code>xtensa-esp32-elf-gcc not found</code></strong><ul><li><strong>åŸå› </strong>: ESP-IDF çš„å·¥å…·é“¾ç¯å¢ƒå˜é‡æœªåŠ è½½ã€‚ä½ å¯èƒ½æ‰“å¼€äº†ä¸€ä¸ªæ™®é€šçš„ VSCode ç»ˆç«¯ï¼Œè€Œä¸æ˜¯ ESP-IDF ä¸“ç”¨ç»ˆç«¯ã€‚</li><li><strong>ä¿®å¤</strong>: <strong>ä¸è¦</strong>ä½¿ç”¨ VSCode è‡ªå·±çš„ <code>Terminal -&gt; New Terminal</code>ã€‚<strong>å§‹ç»ˆ</strong>ä½¿ç”¨ ESP-IDF æ‰©å±•çš„æŒ‰é’® (å¦‚ ğŸš€) æˆ– <code>F1</code> -&gt; <code>ESP-IDF: Open ESP-IDF Terminal</code>ï¼Œåè€…ä¼šè‡ªåŠ¨åŠ è½½æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚</li></ul></li><li><strong>é”™è¯¯: <code>Build</code> å¤±è´¥ï¼Œæç¤º Python é”™è¯¯æˆ– <code>Git failed</code></strong><ul><li><strong>åŸå› </strong>: ä½ çš„å·¥å…·é“¾ï¼ˆç¬¬2éƒ¨åˆ†ï¼‰æ²¡æœ‰å®‰è£…æˆåŠŸã€‚</li><li><strong>ä¿®å¤</strong>: é‡æ–°è¿è¡Œ <code>F1</code> -&gt; <code>ESP-IDF: Configure ESP-IDF extension</code>ï¼Œé€‰æ‹© <code>EXPRESS</code> æ¨¡å¼ï¼Œè®©å®ƒé‡æ–°æ£€æŸ¥å’Œå®‰è£…æ‰€æœ‰ä¾èµ–ã€‚</li></ul></li><li><strong>ç°è±¡: æ¿å­ä¸æ–­é‡å¯ï¼Œæ—¥å¿—ä¸­ç–¯ç‹‚æ‰“å° <code>Brownout detector was triggered</code> (ä½ç”µå‹æ£€æµ‹è§¦å‘)</strong><ul><li><strong>åŸå› </strong>: USB ä¾›ç”µä¸è¶³ã€‚ESP32 åœ¨ Wi-Fi å¯åŠ¨æˆ–çƒ§å½•æ—¶åŠŸè€—å¾ˆé«˜ã€‚</li><li><strong>ä¿®å¤</strong>: æ¢ä¸€æ ¹<strong>è´¨é‡å¥½</strong>çš„ USB æ•°æ®çº¿ï¼ˆä¸è¦ç”¨ä¾¿å®œçš„å……ç”µçº¿ï¼‰ï¼Œæˆ–æ¢ä¸€ä¸ªä¾›ç”µæ›´å¼ºçš„ USB 3.0 ç«¯å£ï¼Œæˆ–ä½¿ç”¨å¤–éƒ¨ 5V ç”µæºã€‚</li></ul></li></ol><h2 id="ğŸ¯-ç»ƒä¹ æŒ‘æˆ˜">ğŸ¯ ç»ƒä¹ æŒ‘æˆ˜</h2><ol><li><strong>[åŸºç¡€] <code>hello_world</code> æ‰“å¡</strong>ï¼š<ul><li>ä¸¥æ ¼æŒ‰ç…§ <strong>Part 3</strong>ï¼Œå®Œæ•´è·‘é€š <code>hello_world</code> ç¤ºä¾‹ã€‚</li><li>åœ¨è¯„è®ºåŒºæˆ–ç¤¾ç¾¤æ‰“å¡ï¼Œé™„ä¸Šä½ çš„ VSCode <strong>ç»ˆç«¯ç›‘è§†å™¨</strong>çš„æ—¥å¿—æˆªå›¾ã€‚</li></ul></li><li><strong>[è¿›é˜¶] å®šåˆ¶ä½ çš„ <code>hello_world</code></strong>ï¼š<ul><li>(1) æ‰“å¼€ <code>main/hello_world_main.c</code> æ–‡ä»¶ã€‚</li><li>(2) å°† <code>static const char *TAG = &quot;hello_world&quot;;</code> ä¿®æ”¹ä¸º <code>static const char *TAG = &quot;My_P2_Test&quot;;</code>ã€‚</li><li>(3) å°† <code>ESP_LOGI(TAG, &quot;Hello world!&quot;);</code> ä¿®æ”¹ä¸º <code>ESP_LOGI(TAG, &quot;Hello from [è¿™é‡Œå†™ä½ çš„åå­—]!&quot;);</code>ã€‚</li><li>(4) å°† <code>vTaskDelay(pdMS_TO_TICKS(1000));</code> ä¿®æ”¹ä¸º <code>vTaskDelay(pdMS_TO_TICKS(3000));</code> (å»¶æ—¶ 3 ç§’)ã€‚</li><li>(5) ç‚¹å‡» ğŸš€ (Build, Flash, Monitor) æŒ‰é’®ï¼Œè§‚å¯Ÿä½ çš„ä¿®æ”¹æ˜¯å¦ç”Ÿæ•ˆã€‚</li></ul></li><li><strong>[æŒ‘æˆ˜] æ¢ç´¢ <code>menuconfig</code></strong>ï¼š<ul><li>(1) ç‚¹å‡» âš™ï¸ (<code>menuconfig</code>) å›¾æ ‡ã€‚</li><li>(2) ä½¿ç”¨é”®ç›˜ï¼Œè¿›å…¥ <code>Component config</code> -&gt; <code>Log output</code>ã€‚</li><li>(3) å°† <code>Default log verbosity</code> (é»˜è®¤æ—¥å¿—è¯¦ç»†çº§åˆ«) ä» <code>Info</code> ä¿®æ”¹ä¸º <code>Debug</code> (æŒ‰ <code>Enter</code> é”®é€‰æ‹©)ã€‚</li><li>(4) æŒ‰ <code>S</code> ä¿å­˜ï¼ŒæŒ‰ <code>Q</code> é€€å‡ºã€‚</li><li>(5) <strong>é‡æ–°ç‚¹å‡» ğŸš€ (Build, Flash, Monitor)</strong>ã€‚</li><li>(6) è§‚å¯Ÿç»ˆç«¯ï¼Œä½ çœ‹åˆ°äº†ä»€ä¹ˆï¼Ÿ(æç¤ºï¼šä½ ä¼šçœ‹åˆ°æµ·é‡çš„ã€ç³»ç»Ÿåº•å±‚çš„ Debug æ—¥å¿—åˆ·å±ï¼Œè¯æ˜ä½ æˆåŠŸä¿®æ”¹äº† SDK çš„æ ¸å¿ƒé…ç½®)ã€‚</li></ul></li></ol><h2 id="ğŸ“-é™„å½•ï¼šSTM32-vs-ESP32-å·¥ä½œæµå¯¹æ¯”">ğŸ“ é™„å½•ï¼šSTM32 vs ESP32 å·¥ä½œæµå¯¹æ¯”</h2><table><thead><tr><th><strong>å¯¹æ¯”é¡¹</strong></th><th><strong>STM32 (Keil MDK)</strong></th><th><strong>ESP32 (VSCode + IDF)</strong></th></tr></thead><tbody><tr><td><strong>å“²å­¦</strong></td><td><strong>é›†æˆ IDE</strong> (All-in-One)</td><td><strong>SDK + ç¼–è¾‘å™¨</strong> (Modular)</td></tr><tr><td><strong>RTOS è§’è‰²</strong></td><td>å¯é€‰ä¸­é—´ä»¶ (Middleware)</td><td><strong>ç³»ç»ŸåŸºçŸ³</strong> (Foundation)</td></tr><tr><td><strong>é…ç½®å·¥å…·</strong></td><td><code>STM32CubeMX</code> (å›¾å½¢ GUI)</td><td><code>menuconfig</code> (ç»ˆç«¯ TUI)</td></tr><tr><td><strong>ç¼–è¯‘/çƒ§å½•</strong></td><td>Keil å·¥å…·æ æŒ‰é’®</td><td>VSCode åº•éƒ¨çŠ¶æ€æ æŒ‰é’® (èƒŒåæ˜¯ <code>idf.py</code>)</td></tr><tr><td><strong>è°ƒè¯•</strong></td><td><code>ST-Link</code> (JTAG/SWD)</td><td><code>ESP_LOGx</code> (æ—¥å¿—) / <code>JTAG</code> (éœ€ ESP-Prog)</td></tr><tr><td><strong>æ ¸å¿ƒä¾èµ–</strong></td><td>MDK-ARM ç¼–è¯‘å™¨</td><td><code>Python</code>, <code>Git</code>, <code>CMake</code>, <code>Xtensa-GCC</code></td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>å›¾å½¢åŒ–ï¼Œæ˜“ä¸Šæ‰‹</td><td>å‘½ä»¤è¡Œï¼Œåˆå­¦é™¡å³­ï¼Œä½†åŠŸèƒ½æ›´å¼º</td></tr></tbody></table><hr><p>ä¸‹ä¸€ç¯‡é¢„å‘Šï¼š</p><p>ä¸¤å¤§å¹³å°çš„ç¯å¢ƒéƒ½å·²å°±ç»ªï¼ä»ä¸‹ä¸€ç¯‡å¼€å§‹ï¼Œæˆ‘ä»¬å°†æ­£å¼ç¼–å†™ FreeRTOS ä»£ç ã€‚</p><p>ã€Šç¬¬3ç¯‡ ç¬¬ä¸€ä¸ª FreeRTOS å·¥ç¨‹ï¼šLED é—ªçƒå¤šä»»åŠ¡ã€‹ï¼Œæˆ‘ä»¬å°†å®ç°æœ¬ç³»åˆ—ç¬¬ä¸€ä¸ªçœŸæ­£çš„å¤šä»»åŠ¡ç¨‹åºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> FreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FreeRTOS </tag>
            
            <tag> ESP32 </tag>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
            <tag> ESP-IDF </tag>
            
            <tag> VSCode </tag>
            
            <tag> IoT </tag>
            
            <tag> CLI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠFreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ã€‹ç¬¬2.1ç¯‡ï¼šSTM32 ç¯å¢ƒæ­å»º (CubeMX + Keil) ä¸å·¥ç¨‹çƒ§å½•å…¨æµç¨‹</title>
      <link href="/2025/10/25/%E3%80%8AFreeRTOS-%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B%E3%80%8B%E7%AC%AC2-1%E7%AF%87%EF%BC%9ASTM32-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-CubeMX-Keil-%E4%B8%8E%E5%B7%A5%E7%A8%8B%E7%83%A7%E5%BD%95%E5%85%A8%E6%B5%81%E7%A8%8B/"/>
      <url>/2025/10/25/%E3%80%8AFreeRTOS-%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B%E3%80%8B%E7%AC%AC2-1%E7%AF%87%EF%BC%9ASTM32-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-CubeMX-Keil-%E4%B8%8E%E5%B7%A5%E7%A8%8B%E7%83%A7%E5%BD%95%E5%85%A8%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1>ã€ŠFreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ã€‹ç¬¬2.1ç¯‡ï¼šSTM32 ç¯å¢ƒæ­å»º (CubeMX + Keil) ä¸å·¥ç¨‹çƒ§å½•å…¨æµç¨‹</h1><p>â­ <strong>éš¾åº¦ç­‰çº§ï¼šâ˜…â˜†â˜† åŸºç¡€</strong></p><p><strong>æ ‡ç­¾</strong>ï¼š<code>FreeRTOS</code>, <code>STM32</code>, <code>CubeMX</code>, <code>Keil</code>, <code>HAL</code>, <code>ç¯å¢ƒæ­å»º</code>, <code>ST-Link</code></p><h2 id="ğŸ“-å®æˆ˜é—®é¢˜åœºæ™¯">ğŸ“ å®æˆ˜é—®é¢˜åœºæ™¯</h2><p>åœ¨ç¬¬0ç¯‡ä¸­ï¼Œæˆ‘ä»¬å‡†å¤‡å¥½äº†æ‰€æœ‰çš„â€œåŸææ–™â€ï¼ˆç¡¬ä»¶æ¿å¡ã€è½¯ä»¶å·¥å…·ï¼‰ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬é¢ä¸´ç€ç¬¬ä¸€ä¸ªâ€œå·¥ç¨‹â€é—®é¢˜ï¼š</p><ul><li>â€œæˆ‘å¦‚ä½•å°†è¿™äº›ç‹¬ç«‹çš„å·¥å…·ï¼ˆCubeMX, Keil, ST-Linkï¼‰ç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„å¼€å‘å·¥ä½œæµï¼Ÿâ€</li><li>â€œCubeMX ç”Ÿæˆçš„å‡ ç™¾ä¸ªæ–‡ä»¶ï¼Œåˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿæˆ‘åº”è¯¥åœ¨å“ªé‡Œå†™ä»£ç ï¼Ÿâ€</li><li>â€œä¸ºä»€ä¹ˆæˆ‘ç‚¹å‡»â€˜ä¸‹è½½â€™ï¼ŒKeil æ€»æ˜¯æç¤ºâ€˜No ST-Link detectedâ€™æˆ–â€˜Flash Download failedâ€™ï¼Ÿâ€</li><li>â€œåœ¨ STM32 ä¸Šå¯ç”¨ FreeRTOSï¼Œæœ€å…³é”®çš„æ­¥éª¤æ˜¯ä»€ä¹ˆï¼Ÿâ€</li></ul><p>æœ¬ç¯‡å°†æ‰‹æŠŠæ‰‹å¸¦ä½ <strong>ä» 0 å¼€å§‹</strong>ï¼Œå»ºç«‹ä¸€ä¸ª<strong>æ ‡å‡†ã€å¯å¤ç°ã€ç¨³å®š</strong>çš„ STM32 FreeRTOS é¡¹ç›®æ¨¡æ¿ã€‚æˆ‘ä»¬å°†æ‰“é€šâ€œé…ç½®-ç¼–è¯‘-çƒ§å½•-è¿è¡Œâ€çš„å®Œæ•´é—­ç¯ã€‚è¿™æ˜¯ä½ åç»­æ‰€æœ‰ STM32 å®éªŒçš„åŸºçŸ³ã€‚</p><h2 id="ğŸ¯-æœ¬ç¯‡èƒ½åŠ›ç›®æ ‡">ğŸ¯ æœ¬ç¯‡èƒ½åŠ›ç›®æ ‡</h2><ol><li><p>âœ… <strong>æŒæ¡ CubeMX</strong>ï¼šå­¦ä¼šä½¿ç”¨ CubeMX å®Œæˆ MCU çš„æ ¸å¿ƒé…ç½®ï¼ˆæ—¶é’Ÿã€è°ƒè¯•ã€GPIOï¼‰ã€‚</p></li><li><p>âœ… <strong>æ‰“é€šå·¥å…·é“¾</strong>ï¼šè·‘é€šä¸€ä¸ª<strong>è£¸æœº (Bare-Metal) LED é—ªçƒç¨‹åº</strong>ï¼ŒéªŒè¯ CubeMX â†’ Keil â†’ ST-Link â†’ ç¡¬ä»¶çš„å…¨é“¾è·¯ã€‚</p></li><li><p>âœ… é›†æˆ RTOSï¼šå­¦ä¼š</p><p>åœ¨ CubeMX ä¸­æ­£ç¡®å¯ç”¨ FreeRTOS (CMSIS-RTOS V1)ã€‚</p></li><li><p>âœ… <strong>è§£å†³å…³é”®å†²çª</strong>ï¼šç†è§£å¹¶è§£å†³ FreeRTOS ä¸ HAL åº“ä¹‹é—´æœ€è‘—åçš„ <strong>SysTick æ—¶é’ŸåŸºå‡†å†²çª</strong>ã€‚</p></li><li><p>âœ… <strong>æœ€ç»ˆæˆæœ</strong>ï¼šæˆåŠŸç¼–è¯‘ä¸€ä¸ª<strong>å·²åŒ…å« FreeRTOS å†…æ ¸</strong>çš„å·¥ç¨‹ï¼Œå¹¶å¯åŠ¨è°ƒåº¦å™¨ï¼Œä¸ºç¬¬3ç¯‡æ·»åŠ ä»»åŠ¡åšå¥½ä¸‡å…¨å‡†å¤‡ã€‚</p></li></ol><h2 id="ğŸ§ -ç†è®ºç®€æï¼šSTM32-å¼€å‘â€œä¸‰å‰‘å®¢â€">ğŸ§  ç†è®ºç®€æï¼šSTM32 å¼€å‘â€œä¸‰å‰‘å®¢â€</h2><p>å¯¹äºåˆå­¦è€…ï¼Œç†è§£ CubeMX, Keil, HAL åº“ä¸‰è€…çš„å…³ç³»è‡³å…³é‡è¦ï¼š</p><ol><li><strong>STM32CubeMX (é…ç½®å™¨ &amp; ä»£ç ç”Ÿæˆå™¨)</strong><ul><li><strong>ä½œç”¨</strong>ï¼šä¸€ä¸ªå›¾å½¢åŒ–å·¥å…·ï¼Œå¸®ä½ â€œç‚¹èœâ€ã€‚</li><li><strong>ä½ åšä»€ä¹ˆ</strong>ï¼šåœ¨å›¾å½¢ç•Œé¢ä¸Šç‚¹å‡»ï¼Œé€‰æ‹©ä½ è¦å¯ç”¨å“ªä¸ªå¤–è®¾ï¼ˆå¦‚ GPIOã€UARTï¼‰ã€é…ç½®æ—¶é’Ÿæ ‘ã€é€‰æ‹©ä¸­é—´ä»¶ï¼ˆå¦‚ FreeRTOSï¼‰ã€‚</li><li><strong>å®ƒåšä»€ä¹ˆ</strong>ï¼šä¸ºä½ ç”Ÿæˆæ‰€æœ‰ç¹ççš„<strong>åˆå§‹åŒ– C ä»£ç </strong>ï¼ˆå¦‚ <code>MX_GPIO_Init()</code>ï¼‰å’Œ Keil MDK å·¥ç¨‹æ–‡ä»¶ã€‚</li></ul></li><li><strong>Keil MDK (IDE / ç¼–è¯‘å™¨ / è°ƒè¯•å™¨)</strong><ul><li><strong>ä½œç”¨</strong>ï¼šâ€œå¨æˆ¿å’Œå¨å¸ˆâ€ã€‚</li><li><strong>ä½ åšä»€ä¹ˆ</strong>ï¼šåœ¨ Keil ä¸­ç¼–å†™<strong>æ ¸å¿ƒåº”ç”¨é€»è¾‘</strong>ï¼ˆä¾‹å¦‚ <code>while(1)</code> é‡Œçš„é—ªç¯ä»£ç ï¼Œæˆ– FreeRTOS çš„ä»»åŠ¡å‡½æ•°ï¼‰ã€‚</li><li><strong>å®ƒåšä»€ä¹ˆ</strong>ï¼šç¼–è¯‘ä½ çš„ä»£ç å’Œ CubeMX ç”Ÿæˆçš„ä»£ç ï¼Œå°†å®ƒä»¬é“¾æ¥æˆä¸€ä¸ª <code>.hex</code> æˆ– <code>.axf</code> æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ ST-Link çƒ§å½•åˆ°èŠ¯ç‰‡ä¸­ï¼Œå¹¶æä¾›è°ƒè¯•åŠŸèƒ½ã€‚</li></ul></li><li><strong>HAL åº“ (ç¡¬ä»¶æŠ½è±¡å±‚)</strong><ul><li><strong>ä½œç”¨</strong>ï¼šâ€œæ ‡å‡†èœè°±â€ã€‚</li><li><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šST å®˜æ–¹æä¾›çš„é©±åŠ¨åº“ã€‚CubeMX ç”Ÿæˆçš„ä»£ç <strong>ä¾èµ–</strong>äºå®ƒã€‚</li><li><strong>å®ƒåšä»€ä¹ˆ</strong>ï¼šå®ƒæä¾›äº†ç»Ÿä¸€çš„ APIï¼Œè®©ä½ æ‘†è„±ç¹ççš„å¯„å­˜å™¨æ“ä½œã€‚<ul><li>è£¸æœºå¯„å­˜å™¨æ“ä½œï¼š<code>GPIOA-&gt;BSRR = (1 &lt;&lt; 5);</code> (æ™¦æ¶©éš¾æ‡‚)</li><li>HAL åº“æ“ä½œï¼š<code>HAL_GPIO_WritePin(GPIOA, GPIO_PIN_5, GPIO_PIN_SET);</code> (æ¸…æ™°æ˜“æ‡‚)</li></ul></li></ul></li></ol><p>æˆ‘ä»¬çš„å·¥ä½œæµï¼š</p><p>åœ¨ CubeMX ä¸­é…ç½® â†’ ç”Ÿæˆä»£ç  â†’ åœ¨ Keil ä¸­ç¼–å†™ä¸šåŠ¡é€»è¾‘ â†’ åœ¨ Keil ä¸­ç¼–è¯‘å’Œçƒ§å½• â†’ ï¼ˆè°ƒè¯•ï¼‰ â†’ ï¼ˆæœ‰æ–°éœ€æ±‚ï¼Ÿï¼‰ â†’ å›åˆ° CubeMX ä¿®æ”¹é…ç½® â†’ â€¦</p><hr><h2 id="ğŸ› ï¸-å®æ“æ­¥éª¤">ğŸ› ï¸ å®æ“æ­¥éª¤</h2><p>æœ¬æ•™ç¨‹ä»¥ç¬¬0ç¯‡æ¨èçš„ <strong>STM32F407VET6 (å°é»‘æ¿)</strong> å’Œ <strong>ST-Link V2</strong> ä¸ºä¾‹ã€‚</p><h3 id="ç¬¬1éƒ¨åˆ†ï¼šè£¸æœº-LED-é—ªçƒ-éªŒè¯å·¥å…·é“¾">ç¬¬1éƒ¨åˆ†ï¼šè£¸æœº LED é—ªçƒ (éªŒè¯å·¥å…·é“¾)</h3><p>åœ¨é›†æˆ RTOS ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆä¿è¯è£¸æœºèƒ½è·‘é€šã€‚</p><h4 id="1-CubeMX-åˆ›å»ºå·¥ç¨‹ä¸é…ç½®">1. CubeMX: åˆ›å»ºå·¥ç¨‹ä¸é…ç½®</h4><ol><li>æ‰“å¼€ <code>STM32CubeMX</code>ã€‚</li><li>ç‚¹å‡» <code>File</code> â†’ <code>New Project</code> (æˆ– <code>ACCESS TO MCU SELECTOR</code>)ã€‚</li><li>åœ¨ <code>MCU/MPU Selector</code> æœç´¢æ¡†ä¸­è¾“å…¥ <code>STM32F407VET6</code>ã€‚</li><li>åœ¨ä¸‹æ–¹åˆ—è¡¨ä¸­é€‰ä¸­å®ƒï¼Œç‚¹å‡» <code>Start Project</code>ã€‚</li><li><strong>[å…³é”®] é…ç½®è°ƒè¯•æ¥å£</strong>ï¼š<ul><li>åœ¨å·¦ä¾§ <code>System Core</code> ä¸­é€‰æ‹© <code>SYS</code>ã€‚</li><li>åœ¨ <code>Debug</code> ä¸‹æ‹‰æ¡†ä¸­ï¼Œé€‰æ‹© <code>Serial Wire</code>ã€‚</li><li><em>(è¿™æ˜¯æ–°æ‰‹æœ€å®¹æ˜“å¿˜çš„ä¸€æ­¥ï¼å¦‚æœä¸é€‰ï¼ŒèŠ¯ç‰‡çƒ§å½•ä¸€æ¬¡åå¯èƒ½å°±å†ä¹Ÿæ— æ³•è¿æ¥äº†)</em></li></ul></li><li><strong>[å…³é”®] é…ç½®æ—¶é’Ÿæº</strong>ï¼š<ul><li><code>System Core</code> â†’ <code>RCC</code>ã€‚</li><li>åœ¨ <code>High Speed Clock (HSE)</code> ä¸‹æ‹‰æ¡†ä¸­ï¼Œé€‰æ‹© <code>Crystal/Ceramic Resonator</code> (æ™¶ä½“/é™¶ç“·è°æŒ¯å™¨)ã€‚</li></ul></li><li><strong>é…ç½® LED å¯¹åº”çš„ GPIO</strong>ï¼š<ul><li>(F407VET6 å°é»‘æ¿çš„ LED é€šå¸¸åœ¨ <code>PA0</code> æˆ– <code>PA1</code>ï¼Œè¯·æ ¹æ®ä½ çš„æ¿å­ç¡®è®¤)ã€‚</li><li>å‡è®¾ä¸º <code>PA0</code>ã€‚åœ¨å³ä¾§èŠ¯ç‰‡å¼•è„šå›¾ä¸Šæ‰¾åˆ° <code>PA0</code>ï¼Œå•å‡»å®ƒï¼Œé€‰æ‹© <code>GPIO_Output</code>ã€‚</li><li><em>(å¯é€‰)</em>ï¼šåœ¨ <code>System Core</code> â†’ <code>GPIO</code> ä¸­é€‰ä¸­ <code>PA0</code>ï¼Œåœ¨ <code>User Label</code> æ è¾“å…¥ <code>LED_D1</code>ï¼Œæ–¹ä¾¿è®°å¿†ã€‚</li></ul></li></ol><h4 id="2-CubeMX-é…ç½®æ—¶é’Ÿæ ‘">2. CubeMX: é…ç½®æ—¶é’Ÿæ ‘</h4><ol><li>åˆ‡æ¢åˆ° <code>Clock Configuration</code> æ ‡ç­¾é¡µã€‚</li><li><code>Input frequency (HSE)</code> å¤„åº”ä¸º <code>8</code> MHz (F407 å°é»‘æ¿é€šå¸¸å¤–æ¥ 8MHz æ™¶æŒ¯)ã€‚</li><li><code>PLL Source Mux</code> é€‰æ‹© <code>HSE</code>ã€‚</li><li>åœ¨ <code>HCLK (MHz)</code> è¾“å…¥æ¡†ä¸­ï¼Œç›´æ¥è¾“å…¥ <code>168</code> (F407 çš„æœ€é«˜ä¸»é¢‘)ï¼Œç„¶åæŒ‰å›è½¦ã€‚</li><li>CubeMX ä¼šè‡ªåŠ¨è§£ç®—å‡ºæ‰€æœ‰ PLL åˆ†é¢‘ç³»æ•°ã€‚å¼¹çª—æç¤ºæ—¶ï¼Œç‚¹å‡» <code>OK</code>ã€‚æ—¶é’Ÿæ ‘ä¼šè‡ªåŠ¨å˜è“ã€‚</li></ol><h4 id="3-CubeMX-ç”Ÿæˆ-Keil-å·¥ç¨‹">3. CubeMX: ç”Ÿæˆ Keil å·¥ç¨‹</h4><ol><li>åˆ‡æ¢åˆ° <code>Project Manager</code> æ ‡ç­¾é¡µã€‚</li><li><code>Project Name</code>: <code>STM32_P2_BareMetal_Blink</code></li><li><code>Project Location</code>: é€‰æ‹©ä½ ä»£ç ä»“ä¸­çš„ <code>stm32/</code> ç›®å½•ã€‚</li><li><code>Toolchain / IDE</code>: é€‰æ‹© <code>MDK-ARM V5</code>ã€‚</li><li>ç‚¹å‡»å³ä¸Šè§’çš„ <code>GENERATE CODE</code>ã€‚</li></ol><h4 id="4-Keil-ç¼–å†™ã€ç¼–è¯‘ä¸çƒ§å½•">4. Keil: ç¼–å†™ã€ç¼–è¯‘ä¸çƒ§å½•</h4><ol><li><p>ç”Ÿæˆå®Œæ¯•åï¼Œç‚¹å‡» <code>Open Project</code>ï¼Œè‡ªåŠ¨æ‰“å¼€ Keil MDK5ã€‚</p></li><li><p>åœ¨ Keil å·¦ä¾§ <code>Project</code> çª—å£ï¼Œå±•å¼€ <code>Application/User/Core</code>ï¼ŒåŒå‡»æ‰“å¼€ <code>main.c</code>ã€‚</p></li><li><p>æ‰¾åˆ° <code>/* USER CODE BEGIN WHILE */</code> å’Œ <code>/* USER CODE END WHILE */</code> ä¹‹é—´çš„ <code>while(1)</code> å¾ªç¯ã€‚</p></li><li><p>æ·»åŠ æˆ‘ä»¬çš„é—ªç¯ä»£ç  (è¿™æ˜¯<strong>è£¸æœº</strong>ä»£ç )ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* USER CODE BEGIN WHILE */</span><br><span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>&#123;<br>  <span class="hljs-comment">/* USER CODE END WHILE */</span><br><br>  <span class="hljs-comment">/* USER CODE BEGIN 3 */</span><br>  <span class="hljs-comment">// (æ³¨æ„: å¦‚æœä½ çš„ Label å« LED_D1)</span><br>  HAL_GPIO_TogglePin(LED_D1_GPIO_Port, LED_D1_Pin);<br>  <span class="hljs-comment">// (å¦‚æœæ²¡è®¾ç½® Labelï¼Œé»˜è®¤ä¸º PA0)</span><br>  <span class="hljs-comment">// HAL_GPIO_TogglePin(GPIOA, GPIO_PIN_0); </span><br><br>  <span class="hljs-comment">// è£¸æœºé˜»å¡å¼å»¶æ—¶</span><br>  HAL_Delay(<span class="hljs-number">500</span>); <span class="hljs-comment">// å»¶æ—¶ 500ms</span><br>&#125;<br><span class="hljs-comment">/* USER CODE END 3 */</span><br></code></pre></td></tr></table></figure></li><li><p><strong>[å…³é”®] é…ç½® ST-Link è°ƒè¯•å™¨</strong>ï¼š</p><ul><li>ç‚¹å‡»èœå•æ çš„ <code>Options for Target...</code> (é­”æœ¯æ£’å›¾æ ‡ ğŸª„)ã€‚</li><li>åˆ‡æ¢åˆ° <code>Debug</code> æ ‡ç­¾é¡µã€‚</li><li>åœ¨å³ä¸Šæ–¹çš„ä¸‹æ‹‰æ¡†ä¸­ï¼Œé€‰æ‹© <code>ST-Link Debugger</code>ã€‚</li><li>ç‚¹å‡»æ—è¾¹çš„ <code>Settings</code> æŒ‰é’®ã€‚</li><li>åœ¨ <code>Port:</code> ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹© <code>SW</code> (Serial Wire)ã€‚</li><li>åˆ‡æ¢åˆ° <code>Flash Download</code> æ ‡ç­¾é¡µã€‚</li><li>å‹¾é€‰ <code>Reset and Run</code> (ç¡®ä¿çƒ§å½•åèŠ¯ç‰‡è‡ªåŠ¨é‡å¯è¿è¡Œ)ã€‚</li><li>ç‚¹å‡» <code>OK</code> ä¿å­˜è®¾ç½®ã€‚</li></ul></li><li><p><strong>ç¼–è¯‘å’Œçƒ§å½•</strong>ï¼š</p><ul><li>æ’ä¸Šä½ çš„ ST-Link å’Œ STM32 å¼€å‘æ¿ã€‚</li><li>ç‚¹å‡» <code>Build</code> (F7 æˆ–å·¥å…·æ çš„ ğŸ—ï¸ å›¾æ ‡)ã€‚ç­‰å¾…ç¼–è¯‘â€¦ çœ‹åˆ° <code>0 Error(s), 0 Warning(s)</code>ã€‚</li><li>ç‚¹å‡» <code>Download</code> (F8 æˆ–å·¥å…·æ çš„ ğŸ“¥ å›¾æ ‡)ã€‚</li><li>Keil çš„ <code>Build Output</code> çª—å£æç¤º <code>Download... Done.</code></li></ul></li><li><p><strong>éªŒè¯</strong>ï¼šæŸ¥çœ‹ä½ çš„å¼€å‘æ¿ï¼Œ<strong>LED æ­£åœ¨ä»¥ 1 ç§’ 1 æ¬¡çš„é¢‘ç‡é—ªçƒï¼</strong> æ­å–œï¼Œä½ å·²æ‰“é€šè£¸æœºå¼€å‘å…¨é“¾è·¯ï¼</p></li></ol><hr><h3 id="ç¬¬2éƒ¨åˆ†ï¼šé›†æˆ-FreeRTOS-å‡†å¤‡-RTOS-ç¯å¢ƒ">ç¬¬2éƒ¨åˆ†ï¼šé›†æˆ FreeRTOS (å‡†å¤‡ RTOS ç¯å¢ƒ)</h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥çš„åŸºç¡€ä¸Šï¼Œå¼•å…¥ FreeRTOSã€‚</p><h4 id="1-CubeMX-å¯ç”¨-FreeRTOS">1. CubeMX: å¯ç”¨ FreeRTOS</h4><ol><li><p>å›åˆ° CubeMXï¼Œæ‰“å¼€åˆšæ‰çš„ <code>.ioc</code> å·¥ç¨‹æ–‡ä»¶ã€‚</p></li><li><p>åœ¨å·¦ä¾§ <code>Middleware</code> ä¸­ï¼Œç‚¹å‡» <code>FREERTOS</code>ã€‚</p></li><li><p>åœ¨ Interface ä¸‹æ‹‰æ¡†ä¸­ï¼Œé€‰æ‹© CMSIS_V1ã€‚</p><p>(æ³¨ï¼šCMSIS-RTOS V1 æ˜¯ Keil MDK5 é…åˆ HAL åº“æœ€ç»å…¸ã€å…¼å®¹æ€§æœ€å¥½çš„ FreeRTOS å°è£…å±‚)</p></li><li><p>(å¯é€‰) <code>Config parameters</code> ä¸­å¯ä»¥é…ç½®å †æ ˆå¤§å°ã€æ—¶é’Ÿé¢‘ç‡ç­‰ï¼Œæš‚æ—¶ä¿æŒé»˜è®¤ï¼ˆ<code>TICK_RATE_HZ</code> ä¸º 1000ï¼‰ã€‚</p></li></ol><h4 id="2-CubeMX-æœ€å…³é”®-è§£å†³-SysTick-å†²çª">2. CubeMX: [æœ€å…³é”®] è§£å†³ SysTick å†²çª</h4><ol><li><strong>é—®é¢˜</strong>ï¼š<ul><li>è£¸æœºä¸­ï¼Œ<code>HAL_Delay()</code> é»˜è®¤ä½¿ç”¨ <code>SysTick</code> å®šæ—¶å™¨ã€‚</li><li>FreeRTOS å¯åŠ¨åï¼Œä¹Ÿ<strong>éœ€è¦</strong> <code>SysTick</code> å®šæ—¶å™¨æ¥äº§ç”Ÿ<strong>ç³»ç»Ÿæ—¶é’ŸèŠ‚æ‹ (Tick)</strong>ï¼Œç”¨äºä»»åŠ¡è°ƒåº¦å’Œ <code>vTaskDelay()</code>ã€‚</li><li>ä¸¤è€…<strong>å†²çª</strong>ï¼SysTick åªèƒ½è¢«ä¸€ä¸ªç»„ä»¶ä¸»å¯¼ã€‚</li></ul></li><li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå°† HAL åº“çš„ <code>Timebase Source</code> (æ—¶åŸºæº) ä» <code>SysTick</code> æ”¹ä¸ºå¦ä¸€ä¸ª<strong>é€šç”¨å®šæ—¶å™¨</strong> (å¦‚ <code>TIM6</code>, <code>TIM7</code>â€¦)ã€‚</li><li><strong>æ“ä½œ</strong>ï¼š<ul><li>åœ¨ <code>System Core</code> ä¸­é€‰æ‹© <code>SYS</code>ã€‚</li><li>åœ¨ <code>Timebase Source</code> ä¸‹æ‹‰æ¡†ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ª<strong>ä¸å†²çª</strong>çš„å®šæ—¶å™¨ï¼Œä¾‹å¦‚ <code>TIM6</code>ã€‚</li><li>(CubeMX å¯èƒ½ä¼šè‡ªåŠ¨å¼¹å‡ºè­¦å‘Šæç¤ºä½ ä¿®æ”¹ï¼Œé€‰æ‹© <code>TIM6</code> å³å¯)</li></ul></li></ol><h4 id="3-CubeMX-é‡æ–°ç”Ÿæˆä»£ç ">3. CubeMX: é‡æ–°ç”Ÿæˆä»£ç </h4><ol><li>å›åˆ° <code>Project Manager</code> æ ‡ç­¾é¡µã€‚</li><li>å†æ¬¡ç‚¹å‡» <code>GENERATE CODE</code>ã€‚</li><li>Keil MDK ä¼šæç¤º <code>File '...' has been modified outside the editor.</code>ï¼Œé€‰æ‹© <code>Reload All</code> (å…¨éƒ¨é‡æ–°åŠ è½½)ã€‚</li></ol><h4 id="4-Keil-éªŒè¯-RTOS-ç¯å¢ƒ">4. Keil: éªŒè¯ RTOS ç¯å¢ƒ</h4><ol><li><strong>æ¸…ç†è£¸æœºä»£ç </strong>ï¼šå›åˆ° <code>main.c</code>ï¼Œ<strong>åˆ é™¤</strong>ä½ åœ¨ <code>while(1)</code> ä¸­æ·»åŠ çš„ <code>HAL_GPIO_TogglePin</code> å’Œ <code>HAL_Delay</code> ä»£ç ã€‚è®© <code>while(1)</code> ä¿æŒ<strong>ç©ºç½®</strong>ã€‚</li><li><strong>æ£€æŸ¥ RTOS å¯åŠ¨</strong>ï¼š<ul><li>æŸ¥çœ‹ <code>main()</code> å‡½æ•°ï¼Œä½ ä¼šå‘ç° CubeMX è‡ªåŠ¨æ·»åŠ äº† <code>MX_FREERTOS_Init();</code>ã€‚</li><li>åœ¨ <code>main.c</code> çš„æœ€åï¼Œ<code>vTaskStartScheduler();</code> å‡½æ•°è¢«è°ƒç”¨äº†ï¼ˆå®ƒå¯èƒ½åœ¨ <code>main</code> ä¸­ï¼Œä¹Ÿå¯èƒ½åœ¨ <code>freertos.c</code> çš„ <code>MX_FREERTOS_Init</code> ä¸­è¢«è°ƒç”¨ï¼Œå–å†³äº CubeMX ç‰ˆæœ¬ï¼‰ã€‚</li><li><strong><code>vTaskStartScheduler();</code> æ˜¯ RTOS å¯åŠ¨çš„æ ‡å¿—ã€‚</strong> ä¸€æ—¦å®ƒè¿è¡Œï¼Œè°ƒåº¦å™¨å°†æ¥ç®¡ CPUï¼Œ<code>main()</code> å‡½æ•°ä¸­çš„ <code>while(1)</code> å¾ªç¯å°†<strong>æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œ</strong>ã€‚</li></ul></li><li><strong>ç¼–è¯‘å’Œçƒ§å½•</strong>ï¼š<ul><li>ç‚¹å‡» <code>Build</code> (F7)ã€‚</li><li>ç‚¹å‡» <code>Download</code> (F8)ã€‚</li></ul></li><li><strong>éªŒè¯</strong>ï¼š<ul><li>æŸ¥çœ‹ä½ çš„å¼€å‘æ¿ï¼Œ<strong>LED åœæ­¢é—ªçƒäº†ï¼ˆä¿æŒç†„ç­æˆ–é•¿äº®ï¼‰</strong>ã€‚</li><li><strong>è¿™æ˜¯æ­£ç¡®çš„ï¼</strong> ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæˆ‘ä»¬å¯åŠ¨äº† FreeRTOS è°ƒåº¦å™¨ï¼Œä½†æˆ‘ä»¬<strong>æ²¡æœ‰åˆ›å»ºä»»ä½•ä»»åŠ¡</strong> (Task) å»é—ªçƒ LEDã€‚CPU æ­¤æ—¶æ­£åœ¨ç©ºé—²ä»»åŠ¡ (<code>vTaskIdle</code>) å’Œå®šæ—¶å™¨ä»»åŠ¡ä¸­å¾ªç¯ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰åœ¨ <code>while(1)</code> å†™çš„è£¸æœºä»£ç å·²ç»è¢« RTOS ç»•è¿‡ã€‚</li></ul></li></ol><h2 id="âœ…-å…¨éƒ¨ä»£ç ">âœ… å…¨éƒ¨ä»£ç </h2><p>æœ¬ç¯‡çš„æ ¸å¿ƒæˆæœæ˜¯å·¥ç¨‹é…ç½®ï¼Œè€Œéå…·ä½“ä»£ç ã€‚ä½†æˆ‘ä»¬æä¾›äº†å…³é”®çš„ <code>main.c</code> ä»£ç ç‰‡æ®µã€‚</p><h4 id="ä»£ç -1-è£¸æœºé—ªç¯-Part-1-æœ€ç»ˆ-main-c-çš„-while-1">ä»£ç  1: è£¸æœºé—ªç¯ (Part 1 æœ€ç»ˆ <code>main.c</code> çš„ <code>while(1)</code>)</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* stm32/STM32_P2_BareMetal_Blink/Core/Src/main.c */</span><br><br><span class="hljs-comment">/* USER CODE BEGIN WHILE */</span><br><span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>&#123;<br>  <span class="hljs-comment">/* USER CODE END WHILE */</span><br><br>  <span class="hljs-comment">/* USER CODE BEGIN 3 */</span><br>  <br>  <span class="hljs-comment">// éªŒè¯å·¥å…·é“¾çš„è£¸æœºé—ªç¯ä»£ç </span><br>  HAL_GPIO_TogglePin(LED_D1_GPIO_Port, LED_D1_Pin);<br>  <br>  <span class="hljs-comment">// è£¸æœºé˜»å¡å¼å»¶æ—¶</span><br>  HAL_Delay(<span class="hljs-number">500</span>); <br>&#125;<br><span class="hljs-comment">/* USER CODE END 3 */</span><br></code></pre></td></tr></table></figure><h4 id="ä»£ç -2-å¯ç”¨-RTOS-å-Part-2-æœ€ç»ˆ-main-c-çš„-main">ä»£ç  2: å¯ç”¨ RTOS å (Part 2 æœ€ç»ˆ <code>main.c</code> çš„ <code>main()</code>)</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* stm32/STM32_P2_RTOS_Ready/Core/Src/main.c */</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>  <span class="hljs-comment">/* ... (HAL_Init, SystemClock_Config, MX_GPIO_Init, MX_TIM6_Init) ... */</span><br>  <br>  <span class="hljs-comment">/* [å…³é”®] CubeMX è‡ªåŠ¨æ·»åŠ äº† RTOS åˆå§‹åŒ– */</span><br>  MX_FREERTOS_Init();<br><br>  <span class="hljs-comment">/* [å…³é”®] å¯åŠ¨ FreeRTOS è°ƒåº¦å™¨. */</span><br>  <span class="hljs-comment">/* Code below this line will NOT be executed unless scheduler fails to start */</span><br>  vTaskStartScheduler();<br><br>  <span class="hljs-comment">/* We should never get here as control is now taken by the scheduler */</span><br>  <span class="hljs-comment">/* Infinite loop */</span><br>  <span class="hljs-comment">/* USER CODE BEGIN WHILE */</span><br>  <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>  &#123;<br>    <span class="hljs-comment">/* USER CODE END WHILE */</span><br>    <span class="hljs-comment">/* [æ³¨æ„] è¿™é‡Œçš„ä»£ç æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œï¼ */</span><br>    <span class="hljs-comment">/* USER CODE BEGIN 3 */</span><br>  &#125;<br>  <span class="hljs-comment">/* USER CODE END 3 */</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ”-è°ƒè¯•æŠ€å·§ï¼šKeil-è°ƒè¯•å™¨å…¥é—¨">ğŸ” è°ƒè¯•æŠ€å·§ï¼šKeil è°ƒè¯•å™¨å…¥é—¨</h2><ol><li><strong>Error: Flash Download failed</strong>ï¼šè¿™æ˜¯åˆå­¦è€…é‡åˆ°<strong>ç¬¬ä¸€é«˜é¢‘</strong>çš„é”™è¯¯ã€‚è¯·çœ‹ä¸‹ä¸€èŠ‚ã€‚</li><li><strong>å¦‚ä½•è¿›å…¥è°ƒè¯•ï¼Ÿ</strong><ul><li>åœ¨çƒ§å½• (F8) æˆåŠŸåï¼Œç‚¹å‡» <code>Start/Stop Debug Session</code> (Ctrl+F5 æˆ–å·¥å…·æ çš„ ğŸ¯ å›¾æ ‡)ã€‚</li><li>Keil ä¼šåˆ‡æ¢åˆ°è°ƒè¯•ç•Œé¢ã€‚ç‚¹å‡» <code>Run</code> (F5) å…¨é€Ÿè¿è¡Œã€‚</li><li>ç‚¹å‡» <code>Stop</code> (çº¢è‰² X) åœæ­¢è¿è¡Œå¹¶é€€å‡ºè°ƒè¯•ã€‚</li></ul></li><li><strong>System Viewer (ç³»ç»ŸæŸ¥çœ‹å™¨)</strong>ï¼š<ul><li>åœ¨è°ƒè¯•ä¼šè¯ä¸­ (Ctrl+F5)ï¼Œç‚¹å‡»èœå• <code>View</code> â†’ <code>System Viewer</code>ã€‚</li><li>åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œå±•å¼€ <code>GPIO</code> â†’ <code>GPIOA</code>ã€‚</li><li>ä½ å¯ä»¥å®æ—¶çœ‹åˆ° <code>ODR</code> (Output Data Register) å¯„å­˜å™¨çš„å€¼åœ¨ 0 å’Œ 1 ä¹‹é—´å˜åŒ–ï¼ˆå¯¹åº”è£¸æœºé—ªç¯ï¼‰ï¼ŒéªŒè¯ç¨‹åºæ˜¯å¦åœ¨è·‘ï¼Œå³ä½¿ä½ çš„ LED ç¡¬ä»¶æ¥é”™äº†ã€‚</li></ul></li></ol><h2 id="âš ï¸-å¸¸è§é”™è¯¯ä¸ä¿®å¤">âš ï¸ å¸¸è§é”™è¯¯ä¸ä¿®å¤</h2><ol><li><strong>[æœ€å¸¸è§] é”™è¯¯: â€œFlash Download failed - â€˜Cortex-M4â€™â€ æˆ– â€œNo ST-Link detectedâ€</strong><ul><li><strong>åŸå›  1 (é©±åŠ¨)</strong>: ST-Link é©±åŠ¨æœªå®‰è£… (è§ç¬¬0ç¯‡)ã€‚</li><li><strong>åŸå›  2 (Keil é…ç½®)</strong>: Keil çš„ <code>Options for Target -&gt; Debug</code> ä¸­<strong>æœªé€‰æ‹©</strong> <code>ST-Link Debugger</code>ã€‚</li><li><strong>åŸå›  3 (ç¡¬ä»¶è¿æ¥)</strong>: USB çº¿æ¾åŠ¨ï¼›ST-Link ä¸å¼€å‘æ¿çš„ SWD çº¿ (SWCLK, SWDIO, GND) æ¥é”™æˆ–è™šç„Šã€‚</li><li><strong>åŸå›  4 (èŠ¯ç‰‡è¢«é”)</strong>: CubeMX ä¸­ <code>SYS -&gt; Debug</code> <strong>è¯¯é€‰äº† <code>Disable</code></strong>ï¼Œå¯¼è‡´ SWD å¼•è„šè¢«å¤ç”¨ä¸ºæ™®é€š IOã€‚</li><li><strong>ä¿®å¤ 4</strong>: éœ€è¦è¿›å…¥ DFU æˆ– Bootloader æ¨¡å¼ï¼Œé€šè¿‡ â€œST-Link Utilityâ€ æˆ– â€œCubeProgrammerâ€ è½¯ä»¶æ‰§è¡Œâ€œå…¨ç‰‡æ“¦é™¤â€ (Erase Full Chip)ï¼Œæ‰èƒ½è§£é”ã€‚</li></ul></li><li><strong>[æœ€å…³é”®] é”™è¯¯: FreeRTOS å¯åŠ¨åï¼Œ<code>vTaskDelay()</code> å’Œ <code>HAL_Delay()</code> éƒ½ä¸å‡†æˆ–å¡æ­»</strong><ul><li><strong>åŸå› </strong>: SysTick å†²çªã€‚ä½ å¿˜è®°äº†<strong>ç¬¬2éƒ¨åˆ†-æ­¥éª¤2</strong>ï¼Œæ²¡æœ‰å°† HAL Timebase Source æ”¹ä¸º <code>TIM6</code>ã€‚FreeRTOS æŠ¢å äº† SysTickï¼Œå¯¼è‡´ <code>HAL_Delay()</code> æ°¸è¿œç­‰å¾…ä¸€ä¸ªä¸ä¼šåˆ°æ¥çš„ä¸­æ–­ã€‚</li><li><strong>ä¿®å¤</strong>: ä¸¥æ ¼æŒ‰ç…§æ•™ç¨‹ï¼Œå°† <code>SYS -&gt; Timebase Source</code> æ”¹ä¸º <code>TIM6</code> (æˆ–å…¶å®ƒé€šç”¨å®šæ—¶å™¨)ã€‚</li></ul></li><li><strong>é”™è¯¯: Keil ç¼–è¯‘æç¤º <code>Error: L6218E: Undefined symbol ...</code> (ä¾‹å¦‚ <code>HAL_GPIO_TogglePin</code>)</strong><ul><li><strong>åŸå› </strong>: CubeMX ç”Ÿæˆäº†ä»£ç ï¼Œä½†å¯¹åº”çš„ <code>.c</code> æ–‡ä»¶ï¼ˆå¦‚ <code>stm32f4xx_hal_gpio.c</code>ï¼‰æ²¡æœ‰è¢«æ·»åŠ åˆ° Keil å·¥ç¨‹æ ‘ä¸­ã€‚</li><li><strong>ä¿®å¤</strong>: é‡æ–°ç”Ÿæˆä»£ç  (<code>GENERATE CODE</code>)ã€‚å¦‚æœä»ä¸è¡Œï¼Œåœ¨ <code>Project Manager -&gt; Code Generator</code> å‹¾é€‰ <code>Generate peripheral initialization as a pair of '.c/.h' files per peripheral</code>ã€‚</li></ul></li><li><strong>ç°è±¡: è£¸æœºé—ªç¯ï¼ŒLED é—ªçƒé€Ÿåº¦æ˜æ˜¾ä¸å¯¹ (è¿‡å¿«æˆ–è¿‡æ…¢)</strong><ul><li><strong>åŸå› </strong>: <code>Clock Configuration</code> (æ—¶é’Ÿæ ‘) é…ç½®é”™è¯¯ã€‚</li><li><strong>ä¿®å¤</strong>: æ£€æŸ¥ HSE (æ™¶æŒ¯) é¢‘ç‡æ˜¯å¦ä¸ä½ çš„æ¿å­ä¸€è‡´ (é€šå¸¸æ˜¯ 8MHz æˆ– 25MHz)ã€‚æ£€æŸ¥ HCLK æ˜¯å¦ä¸ºä½ è®¾å®šçš„ 168MHzã€‚<code>HAL_Delay()</code> ä¾èµ–äº HCLKã€‚</li></ul></li></ol><h2 id="ğŸ¯-ç»ƒä¹ æŒ‘æˆ˜">ğŸ¯ ç»ƒä¹ æŒ‘æˆ˜</h2><ol><li><strong>[åŸºç¡€] è£¸æœºæ‰“å¡</strong>ï¼š<ul><li>ä¸¥æ ¼æŒ‰ç…§ <strong>Part 1</strong>ï¼Œå®Œæ•´å¤ç°â€œè£¸æœº LED é—ªçƒâ€ç¨‹åºã€‚</li><li>åœ¨è¯„è®ºåŒºæˆ–ç¤¾ç¾¤æ‰“å¡ï¼Œé™„ä¸Šä½ çš„ LED é—ªçƒ GIFã€‚</li></ul></li><li><strong>[è¿›é˜¶] RTOS ç¯å¢ƒå°±ç»ª</strong>ï¼š<ul><li>åœ¨åŸºç¡€ç»ƒä¹ ä¹‹ä¸Šï¼Œä¸¥æ ¼æŒ‰ç…§ <strong>Part 2</strong>ï¼Œé›†æˆ FreeRTOS å¹¶è§£å†³ SysTick å†²çªã€‚</li><li>ä¸‹è½½ç¨‹åºï¼Œç¡®è®¤ LED <strong>åœæ­¢é—ªçƒ</strong> (è¯æ˜è°ƒåº¦å™¨å·²æ¥ç®¡ CPU)ã€‚</li></ul></li><li><strong>[æŒ‘æˆ˜] éªŒè¯æ—¶é’Ÿä¸å»¶æ—¶</strong>ï¼š<ul><li>å›åˆ° <strong>Part 1</strong> çš„è£¸æœºå·¥ç¨‹ã€‚</li><li>åœ¨ CubeMX ä¸­ï¼Œå°† <code>Clock Configuration</code> é‡Œçš„ <code>HCLK (MHz)</code> ä» <code>168</code> ä¿®æ”¹ä¸º <code>84</code>ã€‚</li><li>é‡æ–°ç”Ÿæˆä»£ç ï¼Œä¸‹è½½åˆ°å¼€å‘æ¿ã€‚</li><li><strong>è§‚å¯Ÿ LED é—ªçƒé€Ÿåº¦</strong>ï¼Œå®ƒå˜å¿«äº†è¿˜æ˜¯å˜æ…¢äº†ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ(æç¤º: <code>HAL_Delay()</code> çš„æ—¶åŸºå˜äº†)ã€‚</li></ul></li></ol><h2 id="ğŸ“-é™„å½•ï¼šCubeMX-Keil-HAL-å…³ç³»å›¾">ğŸ“ é™„å½•ï¼šCubeMX, Keil, HAL å…³ç³»å›¾</h2><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">[ä½  (å¼€å‘è€…)]<br>    |<span class="hljs-string"></span><br><span class="hljs-string">    </span>|<span class="hljs-string"> 1. &quot;æˆ‘éœ€è¦ GPIO, æ—¶é’Ÿ 168M, FreeRTOS&quot;</span><br><span class="hljs-string">    v</span><br><span class="hljs-string">[STM32CubeMX] --(ç”Ÿæˆ)--&gt; [MDK-ARM Project File (.uvprojx)]</span><br><span class="hljs-string">    </span>|<span class="hljs-string">                     </span>|<br>    |<span class="hljs-string"> (ç”Ÿæˆ)              </span>|<span class="hljs-string">--&gt; [HAL Init Code (mx_gpio.c)]</span><br><span class="hljs-string">    </span>|<span class="hljs-string">                     </span>|<br>    |<span class="hljs-string"> (ç”Ÿæˆ)              </span>|<span class="hljs-string">--&gt; [FreeRTOS Config (freertos.c)]</span><br><span class="hljs-string">    </span>|<span class="hljs-string">                     </span>|<br>    |<span class="hljs-string"> (ç”Ÿæˆ)              </span>|<span class="hljs-string">--&gt; [main.c (åŒ…å« USER CODE å ä½ç¬¦)]</span><br><span class="hljs-string">    </span>|<br>    v<br>[Keil MDK (IDE)] <span class="hljs-variable">&lt;--(æ‰“å¼€ .uvprojx)</span><br><span class="hljs-variable">    |</span><br><span class="hljs-variable">    | 2. &quot;æˆ‘åœ¨ main.c çš„ while(1) ä¸­æ·»åŠ  HAL_GPIO_TogglePin()&quot;</span><br><span class="hljs-variable">    |</span><br><span class="hljs-variable">    | 3. &quot;ç¼–è¯‘ (F7)&quot;</span><br><span class="hljs-variable">    v</span><br><span class="hljs-variable">[ARMCC ç¼–è¯‘å™¨/é“¾æ¥å™¨] --(é“¾æ¥)--&gt;</span> [ä½ çš„ä»£ç ]<br>    |<span class="hljs-string">                          </span>|<br>    |<span class="hljs-string">                          + [HAL åº“é©±åŠ¨ (stm32f4xx_hal.c)]</span><br><span class="hljs-string">    </span>|<span class="hljs-string">                          </span>|<br>    |<span class="hljs-string">                          + [FreeRTOS æºç  (tasks.c, list.c)]</span><br><span class="hljs-string">    v</span><br><span class="hljs-string">[å¯æ‰§è¡Œæ–‡ä»¶ (.axf / .hex)]</span><br><span class="hljs-string">    </span>|<br>    |<span class="hljs-string"> 4. &quot;ä¸‹è½½ (F8)&quot;</span><br><span class="hljs-string">    v</span><br><span class="hljs-string">[ST-Link V2] --(SWD)--&gt; [STM32F407 èŠ¯ç‰‡]</span><br></code></pre></td></tr></table></figure><hr><p>ä¸‹ä¸€ç¯‡é¢„å‘Šï¼š</p><p>ç¯å¢ƒç»ˆäºæ­å¥½äº†ï¼åœ¨ä¸‹ä¸€ç¯‡ã€Šç¬¬2.2ç¯‡ ESP32 ç¯å¢ƒæ­å»ºï¼šESP-IDF + VSCode å®Œæ•´æŒ‡å—ã€‹ä¸­ï¼Œæˆ‘ä»¬å°†è½¬å‘å¦ä¸€ä¸ªå¼ºå¤§çš„ IoT å¹³å°ã€‚å¦‚æœä½ åªå…³å¿ƒ STM32ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è·³åˆ°ã€Šç¬¬3ç¯‡ ç¬¬ä¸€ä¸ª FreeRTOS å·¥ç¨‹ï¼šLED é—ªçƒå¤šä»»åŠ¡ã€‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> FreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FreeRTOS </tag>
            
            <tag> STM32 </tag>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
            <tag> CubeMX </tag>
            
            <tag> Keil </tag>
            
            <tag> HAL </tag>
            
            <tag> ST-Link </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠFreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ã€‹ç¬¬1ç¯‡ï¼šä»€ä¹ˆæ˜¯ FreeRTOSï¼Ÿé€‚ç”¨åœºæ™¯ä¸æ¶æ„æ€»è§ˆ</title>
      <link href="/2025/10/25/%E3%80%8AFreeRTOS-%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B%E3%80%8B%E7%AC%AC1%E7%AF%87%EF%BC%9A%E4%BB%80%E4%B9%88%E6%98%AF-FreeRTOS%EF%BC%9F%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8E%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88/"/>
      <url>/2025/10/25/%E3%80%8AFreeRTOS-%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B%E3%80%8B%E7%AC%AC1%E7%AF%87%EF%BC%9A%E4%BB%80%E4%B9%88%E6%98%AF-FreeRTOS%EF%BC%9F%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8E%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88/</url>
      
        <content type="html"><![CDATA[<h1>ã€ŠFreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ã€‹ç¬¬1ç¯‡ï¼šä»€ä¹ˆæ˜¯ FreeRTOSï¼Ÿé€‚ç”¨åœºæ™¯ä¸æ¶æ„æ€»è§ˆ</h1><p><strong>å‰¯æ ‡é¢˜ï¼šå‘Šåˆ« <code>while(1)</code> è£¸å¥”æ—¶ä»£ï¼Œç†è§£ RTOS æ ¸å¿ƒä»·å€¼</strong></p><p>â­ <strong>éš¾åº¦ç­‰çº§ï¼šâ˜…â˜†â˜† åŸºç¡€</strong></p><p><strong>æ ‡ç­¾</strong>ï¼š<code>FreeRTOS</code>, <code>RTOS</code>, <code>è£¸æœº</code>, <code>Kernel</code>, <code>Scheduler</code>, <code>æ¶æ„</code>, <code>å¹¶å‘</code></p><h2 id="ğŸ“-å®æˆ˜é—®é¢˜åœºæ™¯">ğŸ“ å®æˆ˜é—®é¢˜åœºæ™¯</h2><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªâ€œæ™ºèƒ½ç¯å¢ƒé‡‡é›†ç›’â€ã€‚éœ€æ±‚å¾ˆç®€å•ï¼š</p><ol><li>æ¯ 2 ç§’é’Ÿï¼Œé€šè¿‡ I2C è¯»å–ä¸€æ¬¡ BME280 ä¼ æ„Ÿå™¨ï¼ˆæ¸©ã€æ¹¿ã€å‹ï¼‰ã€‚</li><li>æ¯ 500 æ¯«ç§’ï¼Œé—ªçƒä¸€æ¬¡ LEDï¼Œè¡¨ç¤ºâ€œç³»ç»Ÿæ­£å¸¸è¿è¡Œâ€ã€‚</li><li>å®æ—¶ç›‘æµ‹ä¸€ä¸ªæŒ‰é”®ï¼Œç”¨æˆ·æŒ‰ä¸‹æ—¶ï¼Œç«‹åˆ»é€šè¿‡ä¸²å£æ‰“å°å‡ºæœ€æ–°çš„ä¼ æ„Ÿå™¨æ•°æ®ã€‚</li><li>å®æ—¶æ¥æ”¶ä¸²å£æŒ‡ä»¤ï¼Œä¾‹å¦‚æ”¶åˆ° â€œresetâ€ æ—¶ï¼Œç³»ç»Ÿé‡å¯ã€‚</li></ol><p>å¦‚æœä½ ä½¿ç”¨ä¼ ç»Ÿçš„â€œè£¸æœºâ€ï¼ˆBare-metalï¼‰<code>while(1)</code> è¶…çº§å¾ªç¯ï¼ˆSuper-loopï¼‰æ¥å¼€å‘ï¼Œä½ çš„ <code>main.c</code> å¾ˆå¿«ä¼šå˜æˆè¿™æ ·ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// è­¦å‘Šï¼šè¿™æ˜¯â€œè£¸æœºâ€æ€ç»´çš„â€œæ„å¤§åˆ©é¢æ¡â€ä»£ç </span><br><span class="hljs-type">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    <span class="hljs-type">uint32_t</span> led_timer = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">uint32_t</span> sensor_timer = <span class="hljs-number">0</span>;<br>    <br>    setup_all();<br><br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-comment">// --- ä»»åŠ¡1ï¼šé—ªçƒ LED ---</span><br>        <span class="hljs-keyword">if</span> (millis() - led_timer &gt; <span class="hljs-number">500</span>) &#123;<br>            led_timer = millis();<br>            toggle_led();<br>        &#125;<br><br>        <span class="hljs-comment">// --- ä»»åŠ¡2ï¼šè¯»å–ä¼ æ„Ÿå™¨ ---</span><br>        <span class="hljs-keyword">if</span> (millis() - sensor_timer &gt; <span class="hljs-number">2000</span>) &#123;<br>            sensor_timer = millis();<br>            read_bme280(); <span class="hljs-comment">// å‡è®¾è¿™ä¸ªå‡½æ•°I2Cé€šä¿¡è¦èŠ± 50ms</span><br>        &#125;<br><br>        <span class="hljs-comment">// --- ä»»åŠ¡3ï¼šæ£€æµ‹æŒ‰é”® ---</span><br>        <span class="hljs-keyword">if</span> (is_button_pressed()) &#123;<br>            <span class="hljs-comment">// ... æ¶ˆæŠ– ...</span><br>            print_sensor_data(); <br>        &#125;<br><br>        <span class="hljs-comment">// --- ä»»åŠ¡4ï¼šå¤„ç†ä¸²å£ ---</span><br>        <span class="hljs-keyword">if</span> (is_uart_data_available()) &#123;<br>            process_uart_command();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é—®é¢˜æ¥äº†ï¼š</strong></p><ul><li>å½“ä»£ç è¿è¡Œåˆ° <code>read_bme280()</code> æ—¶ï¼Œå®ƒä¼š<strong>é˜»å¡ï¼ˆBlockingï¼‰</strong> 50msã€‚åœ¨è¿™ 50ms å†…ï¼Œ<code>while(1)</code> å¾ªç¯åœæ­¢ï¼ŒLED æ— æ³•é—ªçƒï¼ŒæŒ‰é”®æ£€æµ‹è¢«å»¶è¿Ÿï¼Œä¸²å£æŒ‡ä»¤ä¹Ÿæ— æ³•åŠæ—¶å“åº”ã€‚</li><li>å¦‚æœæŒ‰é”®éœ€è¦â€œç«‹å³â€å“åº”ï¼ˆä¾‹å¦‚ï¼Œåœ¨ 10ms å†…ï¼‰ï¼Œä½ è¯¥æ€ä¹ˆåŠï¼Ÿ</li><li>å¦‚æœæ­¤æ—¶åˆå¢åŠ ä¸€ä¸ªéœ€æ±‚ï¼šæ¥æ”¶åˆ°ç½‘ç»œæ•°æ®åŒ…ï¼ˆå¯èƒ½éœ€è¦å¤„ç† 100msï¼‰ï¼Œæ•´ä¸ªç³»ç»Ÿçš„å®æ—¶æ€§å°†å½»åº•å´©æºƒã€‚</li></ul><p><strong>è¿™å°±æ˜¯â€œè£¸æœºâ€å¼€å‘çš„æ ¹æœ¬ç—›ç‚¹ï¼šä»»åŠ¡ä¹‹é—´äº’ç›¸é˜»å¡ï¼Œå®æ—¶æ€§å·®ï¼Œä»£ç è€¦åˆåº¦é«˜ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</strong></p><p>FreeRTOS å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„ã€‚</p><h2 id="ğŸ¯-æœ¬ç¯‡èƒ½åŠ›ç›®æ ‡">ğŸ¯ æœ¬ç¯‡èƒ½åŠ›ç›®æ ‡</h2><ol><li><strong>ç†è§£ RTOS</strong>ï¼šèƒ½æ¸…æ™°åœ°å‘åŒäº‹è¯´æ˜ç™½â€œä»€ä¹ˆæ˜¯ RTOSâ€ä»¥åŠâ€œå®ƒä¸è£¸æœºå¼€å‘çš„åŒºåˆ«â€ã€‚</li><li><strong>æ˜ç¡®é€‚ç”¨æ€§</strong>ï¼šçŸ¥é“åœ¨ä»€ä¹ˆé¡¹ç›®ä¸­åº”è¯¥ä½¿ç”¨ FreeRTOSï¼ˆä»¥åŠä»€ä¹ˆæ—¶å€™ä¸è¯¥ç”¨ï¼‰ã€‚</li><li><strong>æŒæ¡æ ¸å¿ƒæ¶æ„</strong>ï¼šèƒ½ç”»å‡º FreeRTOS çš„æ ¸å¿ƒç»„ä»¶å›¾ï¼ˆä»»åŠ¡ã€è°ƒåº¦å™¨ã€æ—¶é’ŸèŠ‚æ‹ï¼‰ã€‚</li><li><strong>æŒæ¡æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šç†è§£â€œä»»åŠ¡â€ï¼ˆTaskï¼‰ã€â€œè°ƒåº¦å™¨â€ï¼ˆSchedulerï¼‰ã€â€œæŠ¢å â€ï¼ˆPreemptionï¼‰å’Œâ€œæ—¶é’ŸèŠ‚æ‹â€ï¼ˆTickï¼‰çš„çœŸæ­£å«ä¹‰ã€‚</li></ol><h2 id="ğŸ§ -ç†è®ºç®€æ">ğŸ§  ç†è®ºç®€æ</h2><h3 id="1-ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ-OS-ï¼Ÿ">1. ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ (OS)ï¼Ÿ</h3><p>ç®€å•ç±»æ¯”ï¼šä½ ç”µè„‘ä¸Šçš„ Windows/macOS/Linux å°±æ˜¯ä¸€ä¸ª OSã€‚å®ƒå…è®¸ä½ â€œåŒæ—¶â€è¿è¡Œå¤šä¸ªç¨‹åºï¼ˆå¦‚æµè§ˆå™¨ã€Wordã€éŸ³ä¹æ’­æ”¾å™¨ï¼‰ã€‚å®ƒç®¡ç†ç€ CPU æ—¶é—´ã€å†…å­˜ã€ç¡¬ç›˜å’Œå¤–è®¾ï¼Œè®©è¿™äº›ç¨‹åºå¯ä»¥å’Œè°å…±å­˜ï¼Œäº’ä¸å¹²æ‰°ã€‚</p><h3 id="2-ä»€ä¹ˆæ˜¯â€œå®æ—¶â€-Real-Time-OS-RTOS-ï¼Ÿ">2. ä»€ä¹ˆæ˜¯â€œå®æ—¶â€(Real-Time) OS (RTOS)ï¼Ÿ</h3><p>RTOS æ˜¯ä¸€ç§ç‰¹æ®Šçš„ OSã€‚å®ƒçš„æ ¸å¿ƒä»·å€¼<strong>ä¸æ˜¯å¿«</strong>ï¼ˆFastï¼‰ï¼Œè€Œæ˜¯<strong>å¯é¢„æµ‹æ€§/ç¡®å®šæ€§</strong>ï¼ˆDeterminismï¼‰ã€‚</p><ul><li><strong>â€œå®æ—¶â€çš„è¯¯è§£</strong>ï¼šä¸æ˜¯æŒ‡â€œCPU è·‘å¾—é£å¿«â€ã€‚</li><li><strong>â€œå®æ—¶â€çš„çœŸä¹‰</strong>ï¼šç³»ç»Ÿå¿…é¡»åœ¨<strong>ç¡®å®šçš„æ—¶é—´é™åˆ¶å†…</strong>ï¼ˆDeadlineï¼‰å¯¹å¤–éƒ¨äº‹ä»¶åšå‡ºå“åº”ã€‚<ul><li><strong>ç¡¬å®æ—¶ (Hard Real-Time)</strong>ï¼šå¿…é¡» 100% æ»¡è¶³æ—¶é—´é™åˆ¶ï¼Œé”™è¿‡ä¸€æ¬¡å³ä¸ºç³»ç»Ÿå¤±æ•ˆï¼ˆå¦‚ï¼šæ±½è½¦ ABS åˆ¹è½¦ã€é£è¡Œæ§åˆ¶ï¼‰ã€‚</li><li><strong>è½¯å®æ—¶ (Soft Real-Time)</strong>ï¼šç»å¤§å¤šæ•°æƒ…å†µèƒ½æ»¡è¶³æ—¶é—´é™åˆ¶ï¼Œå¶å°”é”™è¿‡ä¸€ä¸¤æ¬¡ä¸ä¼šå¯¼è‡´ç¾éš¾ï¼ˆå¦‚ï¼šè§†é¢‘æ’­æ”¾å¡é¡¿ã€æœ¬æ•™ç¨‹çš„ç¯å¢ƒé‡‡é›†ç›’ï¼‰ã€‚</li></ul></li></ul><p><strong>FreeRTOS æ˜¯ä¸€ç§è½»é‡çº§çš„ã€ä¸»è¦ç”¨äºè½¯å®æ—¶åœºæ™¯çš„å†…æ ¸ã€‚</strong></p><h3 id="3-ä»€ä¹ˆæ˜¯-FreeRTOSï¼Ÿ">3. ä»€ä¹ˆæ˜¯ FreeRTOSï¼Ÿ</h3><p>FreeRTOS æ˜¯ä¸€ä¸ª<strong>å†…æ ¸ï¼ˆKernelï¼‰</strong>ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼ˆåƒ Linux é‚£æ ·ï¼‰ã€‚</p><ul><li><strong>å†…æ ¸</strong>ï¼šåªæä¾› OS æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼š<strong>ä»»åŠ¡ç®¡ç†ã€æ—¶é—´ç®¡ç†ã€ä»»åŠ¡é—´é€šä¿¡</strong>ã€‚</li><li><strong>éå†…æ ¸</strong>ï¼šå®ƒ<strong>ä¸</strong>åŒ…å«é©±åŠ¨ç¨‹åºã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œåè®®æ ˆï¼ˆå¦‚ LwIPï¼‰ã€å›¾å½¢åº“ã€‚è¿™äº›éƒ½æ˜¯éœ€è¦ä½ ï¼ˆæˆ–èŠ¯ç‰‡å‚å•†ï¼‰åœ¨ FreeRTOS <strong>ä¹‹ä¸Š</strong>è¿›è¡Œé›†æˆçš„ã€‚</li></ul><h3 id="4-FreeRTOS-æ ¸å¿ƒæ¶æ„æ€»è§ˆ">4. FreeRTOS æ ¸å¿ƒæ¶æ„æ€»è§ˆ</h3><p>FreeRTOS çš„æ¶æ„æå…¶ç²¾ç®€ï¼Œæ ¸å¿ƒåªæœ‰ä¸‰ä¸ªç»„ä»¶ï¼š</p><p><strong>(1) ä»»åŠ¡ (Tasks)</strong></p><ul><li><strong>å®šä¹‰</strong>ï¼šåœ¨â€œå®æˆ˜é—®é¢˜åœºæ™¯â€ä¸­ï¼Œ<code>é—ªçƒ LED</code>ã€<code>è¯»å–ä¼ æ„Ÿå™¨</code>ã€<code>æ£€æµ‹æŒ‰é”®</code>ã€<code>å¤„ç†ä¸²å£</code>ï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯ä¸€ä¸ª<strong>ä»»åŠ¡</strong>ã€‚</li><li><strong>ç‰¹å¾</strong>ï¼šåœ¨ RTOS ä¸­ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ <code>while(1)</code> å¾ªç¯ï¼ˆä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼‰ã€‚æ¯ä¸ªä»»åŠ¡éƒ½æœ‰è‡ªå·±çš„<strong>æ ˆç©ºé—´</strong>ï¼ˆç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡ï¼‰å’Œ<strong>ä¼˜å…ˆçº§</strong>ã€‚</li><li><strong>çŠ¶æ€</strong>ï¼šä»»åŠ¡æœ‰å¤šç§çŠ¶æ€ï¼Œæœ€æ ¸å¿ƒçš„æ˜¯ï¼š<ul><li><strong>è¿è¡Œæ€ (Running)</strong>ï¼šå½“å‰æ­£åœ¨å ç”¨ CPU çš„å”¯ä¸€ä»»åŠ¡ã€‚</li><li><strong>å°±ç»ªæ€ (Ready)</strong>ï¼šå·²å‡†å¤‡å¥½ï¼Œæ’é˜Ÿç­‰å¾… CPUã€‚</li><li><strong>é˜»å¡æ€ (Blocked)</strong>ï¼šæ­£åœ¨â€œç­‰å¾…â€æŸä¸ªäº‹ä»¶ï¼ˆå¦‚ <code>vTaskDelay</code> æ—¶é—´åˆ°ã€ç­‰å¾…é˜Ÿåˆ—æ•°æ®ï¼‰ï¼Œæ­¤æ—¶å®ƒ<strong>ä¸æ¶ˆè€—</strong> CPUã€‚</li></ul></li></ul><p><strong>(2) è°ƒåº¦å™¨ (The Scheduler)</strong></p><ul><li><strong>å®šä¹‰</strong>ï¼šè°ƒåº¦å™¨æ˜¯ FreeRTOS çš„â€œå¤§è„‘â€æˆ–â€œCEOâ€ã€‚</li><li><strong>å·¥ä½œ</strong>ï¼šå®ƒçš„å”¯ä¸€å·¥ä½œå°±æ˜¯åœ¨æ‰€æœ‰å¤„äºâ€œå°±ç»ªæ€â€çš„ä»»åŠ¡ä¸­ï¼ŒæŒ‘é€‰å‡º<strong>ä¼˜å…ˆçº§æœ€é«˜</strong>çš„é‚£ä¸ªä»»åŠ¡ï¼Œè®©å®ƒè¿›å…¥â€œè¿è¡Œæ€â€ã€‚</li><li><strong>æŠ¢å å¼ (Preemptive)</strong>ï¼šè¿™æ˜¯ FreeRTOS çš„å…³é”®ç‰¹æ€§ã€‚<ul><li>å‡è®¾â€œä»»åŠ¡Aâ€ï¼ˆä½ä¼˜å…ˆçº§ï¼Œå¦‚é—ªç¯ï¼‰æ­£åœ¨è¿è¡Œã€‚</li><li>çªç„¶ï¼Œä¸€ä¸ªä¸­æ–­ï¼ˆå¦‚æŒ‰é”®æŒ‰ä¸‹ï¼‰å‘ç”Ÿï¼Œå”¤é†’äº†â€œä»»åŠ¡Bâ€ï¼ˆé«˜ä¼˜å…ˆçº§ï¼Œå¦‚å¤„ç†æŒ‰é”®ï¼‰ã€‚</li><li>è°ƒåº¦å™¨ä¼š<strong>ç«‹å³â€œæŠ¢å â€</strong> CPUï¼Œæš‚åœâ€œä»»åŠ¡Aâ€ï¼Œåˆ‡æ¢ä¸Šä¸‹æ–‡ï¼ˆContext Switchï¼‰ï¼Œè®©â€œä»»åŠ¡Bâ€ç«‹åˆ»å¼€å§‹è¿è¡Œã€‚</li><li>â€œä»»åŠ¡Bâ€è¿è¡Œå®Œæ¯•ï¼ˆä¾‹å¦‚è¿›å…¥é˜»å¡æ€ç­‰å¾…ä¸‹æ¬¡æŒ‰é”®ï¼‰ï¼Œè°ƒåº¦å™¨å†æŠŠ CPU è¿˜ç»™â€œä»»åŠ¡Aâ€ç»§ç»­è¿è¡Œã€‚</li><li><strong>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ RTOS èƒ½ä¿è¯é«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„â€œå®æ—¶æ€§â€ã€‚</strong></li></ul></li></ul><p><strong>(3) æ—¶é’ŸèŠ‚æ‹ (The System Tick)</strong></p><ul><li><strong>å®šä¹‰</strong>ï¼šä¸€ä¸ªå‘¨æœŸæ€§çš„ç¡¬ä»¶å®šæ—¶å™¨ä¸­æ–­ï¼ˆä¾‹å¦‚æ¯ 1ms è§¦å‘ä¸€æ¬¡ï¼Œé¢‘ç‡ç”± <code>configTICK_RATE_HZ</code> å®šä¹‰ï¼‰ã€‚</li><li><strong>ä½œç”¨</strong>ï¼š<ol><li><strong>æ—¶é—´ç‰‡è½®è½¬</strong>ï¼šå¦‚æœå¤šä¸ª<strong>åŒä¼˜å…ˆçº§</strong>çš„ä»»åŠ¡éƒ½åœ¨â€œå°±ç»ªæ€â€ï¼Œæ¯æ¥ä¸€ä¸ª Tick ä¸­æ–­ï¼Œè°ƒåº¦å™¨å°±ä¼šåœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ä¸€æ¬¡ï¼Œå®ç°â€œåˆ†æ—¶å¤ç”¨â€ï¼Œçœ‹èµ·æ¥åƒåœ¨â€œåŒæ—¶â€è¿è¡Œã€‚</li><li><strong>æ—¶é—´ç®¡ç†</strong>ï¼šæ‰€æœ‰ <code>vTaskDelay(ms)</code> è¿™æ ·çš„å»¶æ—¶å‡½æ•°ï¼Œéƒ½ä¾èµ– Tick æ¥è®¡æ—¶ã€‚å½“ä¸€ä¸ªä»»åŠ¡è°ƒç”¨ <code>vTaskDelay(100)</code>ï¼Œå®ƒä¼šè¿›å…¥â€œé˜»å¡æ€â€100 ä¸ª Ticksï¼Œè°ƒåº¦å™¨ä¼šè½¬å»æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚</li></ol></li></ul><h2 id="ğŸ› ï¸-å®æ“æ­¥éª¤ï¼šä»â€œè£¸æœºæ€ç»´â€åˆ°â€œRTOS-æ€ç»´â€">ğŸ› ï¸ å®æ“æ­¥éª¤ï¼šä»â€œè£¸æœºæ€ç»´â€åˆ°â€œRTOS æ€ç»´â€</h2><p>æœ¬ç¯‡æ˜¯çº¯ç†è®ºç¯‡ï¼Œ<strong>ä¸æ¶‰åŠä»»ä½•å¹³å°ä»£ç </strong>ã€‚ä½†æˆ‘ä»¬å°†è¿›è¡Œä¸€æ¬¡æœ€é‡è¦çš„â€œå®æ“â€â€”â€” <strong>æ€ç»´æ¨¡å¼çš„è½¬æ¢</strong>ã€‚</p><p>è®©æˆ‘ä»¬ç”¨â€œRTOS æ€ç»´â€é‡æ–°è®¾è®¡â€œå®æˆ˜é—®é¢˜åœºæ™¯â€ï¼š</p><h4 id="è£¸æœºæ€ç»´-Bare-metal-Thinking">è£¸æœºæ€ç»´ (Bare-metal Thinking)</h4><p>åœ¨ä¸€ä¸ª <code>while(1)</code> é‡Œï¼Œç”¨çŠ¶æ€æœºå’Œéé˜»å¡ <code>if(millis() - timer &gt; ...)</code> æ¥â€œæ¨¡æ‹Ÿâ€å¤šä»»åŠ¡ã€‚ä»£ç å¤æ‚ã€äº’ç›¸å¹²æ‰°ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// è£¸æœºï¼šä¸€ä¸ª main() è¯•å›¾åšæ‰€æœ‰äº‹</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>        task_led_poll();<br>        task_sensor_poll();<br>        task_button_poll();<br>        task_uart_poll();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="RTOS-æ€ç»´-RTOS-Thinking">RTOS æ€ç»´ (RTOS Thinking)</h4><p>æˆ‘ä»¬æŠŠæ¯ä¸ªåŠŸèƒ½<strong>åˆ†ç¦»</strong>åˆ°ç‹¬ç«‹çš„ä»»åŠ¡å‡½æ•°ä¸­ï¼Œå®ƒä»¬æ˜¯<strong>æ— é™å¾ªç¯</strong>çš„ï¼Œå¹¶ä½¿ç”¨ RTOS æä¾›çš„ <strong>API</strong> æ¥ç®¡ç†æ—¶é—´ä¸é€šä¿¡ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* ----- RTOS ä¼ªä»£ç  ----- */</span><br><br><span class="hljs-comment">// ä»»åŠ¡1ï¼šé—ªçƒ LED (ä½ä¼˜å…ˆçº§)</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">vTask_BlinkLED</span><span class="hljs-params">(<span class="hljs-type">void</span> *pvParameters)</span> &#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>        Toggle_LED();<br>        <span class="hljs-comment">// å…³é”®ï¼švTaskDelay() åªä¼šâ€œé˜»å¡â€å½“å‰ä»»åŠ¡</span><br>        <span class="hljs-comment">// CPU ä¼šç«‹å³å»æ‰§è¡Œå…¶ä»–â€œå°±ç»ªâ€ä»»åŠ¡</span><br>        vTaskDelay(pdMS_TO_TICKS(<span class="hljs-number">500</span>)); <br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// ä»»åŠ¡2ï¼šè¯»å–ä¼ æ„Ÿå™¨ (ä¸­ä¼˜å…ˆçº§)</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">vTask_ReadSensor</span><span class="hljs-params">(<span class="hljs-type">void</span> *pvParameters)</span> &#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>        read_bme280(); <span class="hljs-comment">// å‡è®¾è¿™é‡Œé˜»å¡ 50ms</span><br>        <span class="hljs-comment">// å‡è®¾ sensor_queue æ˜¯ä¸€ä¸ªé˜Ÿåˆ—</span><br>        xQueueSend(sensor_queue, &amp;sensor_data, <span class="hljs-number">0</span>); <span class="hljs-comment">// å°†æ•°æ®å‘ç»™å…¶ä»–ä»»åŠ¡</span><br>        <br>        <span class="hljs-comment">// é˜»å¡ 2 ç§’</span><br>        vTaskDelay(pdMS_TO_TICKS(<span class="hljs-number">2000</span>));<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// ä»»åŠ¡3ï¼šå¤„ç†æŒ‰é”® (é«˜ä¼˜å…ˆçº§)</span><br><span class="hljs-comment">// (è¿™æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨å‹ä»»åŠ¡)</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">vTask_HandleButton</span><span class="hljs-params">(<span class="hljs-type">void</span> *pvParameters)</span> &#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-comment">// å…³é”®ï¼šä»»åŠ¡â€œé˜»å¡â€åœ¨è¿™é‡Œï¼Œä¸å  CPU</span><br>        <span class="hljs-comment">// ç­‰å¾… button_sem (äºŒå€¼ä¿¡å·é‡)</span><br>        xSemaphoreTake(button_sem, portMAX_DELAY);<br>        <br>        <span class="hljs-comment">// ä¸€æ—¦ä¸­æ–­(ISR)é‡Šæ”¾äº†ä¿¡å·é‡ï¼Œæœ¬ä»»åŠ¡ç«‹åˆ»è¢«å”¤é†’å¹¶æŠ¢å CPU</span><br>        print_sensor_data();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å¯åŠ¨å…¥å£</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    setup_all_hardware();<br><br>    <span class="hljs-comment">// åˆ›å»ºä»»åŠ¡</span><br>    xTaskCreate(vTask_BlinkLED, <span class="hljs-string">&quot;LED&quot;</span>, <span class="hljs-number">128</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">1</span>, <span class="hljs-literal">NULL</span>); <span class="hljs-comment">// Prio 1</span><br>    xTaskCreate(vTask_ReadSensor, <span class="hljs-string">&quot;Sensor&quot;</span>, <span class="hljs-number">256</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">2</span>, <span class="hljs-literal">NULL</span>); <span class="hljs-comment">// Prio 2</span><br>    xTaskCreate(vTask_HandleButton, <span class="hljs-string">&quot;Button&quot;</span>, <span class="hljs-number">256</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">3</span>, <span class="hljs-literal">NULL</span>); <span class="hljs-comment">// Prio 3 (æœ€é«˜)</span><br><br>    <span class="hljs-comment">// å¯åŠ¨è°ƒåº¦å™¨ï¼</span><br>    <span class="hljs-comment">// &quot;CEO&quot; å¼€å§‹ä¸Šç­ï¼Œæ¥ç®¡ CPU</span><br>    vTaskStartScheduler();<br>    <br>    <span class="hljs-comment">// æ³¨æ„ï¼šä»£ç æ°¸è¿œä¸ä¼šè¿è¡Œåˆ°è¿™é‡Œ</span><br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123; &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡å¯¹æ¯”ï¼ŒRTOS çš„ä¼˜åŠ¿ä¸€ç›®äº†ç„¶ï¼š</p><ul><li><strong>è§£è€¦</strong>ï¼šæ¯ä¸ªä»»åŠ¡åªå…³å¿ƒè‡ªå·±çš„é€»è¾‘ã€‚</li><li><strong>å¹¶å‘</strong>ï¼š<code>vTask_ReadSensor</code> é˜»å¡ 50ms æ—¶ï¼Œ<code>vTask_BlinkLED</code> ä¾ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œï¼ˆå¦‚æœ CPU ç©ºé—²ï¼‰ã€‚</li><li><strong>å®æ—¶æ€§</strong>ï¼š<code>vTask_HandleButton</code> ä¼˜å…ˆçº§æœ€é«˜ï¼Œä¸€æ—¦æŒ‰é”®ä¸­æ–­å‘ç”Ÿï¼Œå®ƒèƒ½<strong>æŠ¢å </strong>å…¶ä»–ä»»åŠ¡ï¼Œç«‹å³æ‰§è¡Œã€‚</li></ul><h2 id="ğŸ”-è°ƒè¯•æŠ€å·§-æ€ç»´è½¬å˜">ğŸ” è°ƒè¯•æŠ€å·§ (æ€ç»´è½¬å˜)</h2><p>åœ¨ RTOS ä¸­ï¼Œè°ƒè¯•çš„æ€ç»´æ–¹å¼å®Œå…¨ä¸åŒï¼š</p><ol><li><strong>ä» â€œCPU å¡æ­»äº†â€ åˆ° â€œå“ªä¸ªä»»åŠ¡å¡æ­»äº†ï¼Ÿâ€</strong>ï¼š<ul><li>è£¸æœºä¸­ï¼Œ<code>while(1)</code> å¡æ­»ï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½æ­»äº†ã€‚</li><li>RTOS ä¸­ï¼Œå¯èƒ½æ˜¯æŸä¸ªä»»åŠ¡ï¼ˆå¦‚ <code>vTask_ReadSensor</code>ï¼‰è¿›å…¥äº†æ­»å¾ªç¯ï¼Œä½†ç”±äºå®ƒæ˜¯ä¸­ä¼˜å…ˆçº§ï¼Œ<code>vTask_HandleButton</code>ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰<strong>ä¾ç„¶å¯ä»¥</strong>æŠ¢å å®ƒå¹¶è¿è¡Œï¼ç³»ç»Ÿå¯èƒ½åªæ˜¯â€œéƒ¨åˆ†å¤±æ•ˆâ€ã€‚</li></ul></li><li><strong>ä» â€œå±€éƒ¨å˜é‡â€ åˆ° â€œä»»åŠ¡å †æ ˆæº¢å‡ºâ€</strong>ï¼š<ul><li>æ¯ä¸ªä»»åŠ¡éƒ½æœ‰è‡ªå·±çš„æ ˆã€‚å¦‚æœä½ åœ¨ <code>vTask_ReadSensor</code> ä¸­å®šä¹‰äº†ä¸€ä¸ªå·¨å¤§çš„å±€éƒ¨å˜é‡ï¼ˆå¦‚ <code>uint8_t buffer[4096]</code>ï¼‰ï¼Œè€Œä½ åªåˆ†é…äº† 256 å­—èŠ‚çš„æ ˆï¼Œå°±ä¼šå¯¼è‡´<strong>å †æ ˆæº¢å‡º (Stack Overflow)</strong>ã€‚</li><li>è¿™é€šå¸¸æ˜¯ RTOS ä¸­æœ€éšè”½ã€æœ€å¸¸è§çš„ Bugã€‚</li></ul></li><li><strong>ä» â€œéšä¾¿è°ƒç”¨â€ åˆ° â€œISR å®‰å…¨â€</strong>ï¼š<ul><li>ä½ <strong>ç»å¯¹ä¸èƒ½</strong>åœ¨ä¸­æ–­æœåŠ¡ç¨‹åº (ISR) ä¸­è°ƒç”¨ <code>vTaskDelay()</code> æˆ– <code>xQueueSend()</code>ã€‚</li><li>å› ä¸º ISR ä¸æ˜¯ä»»åŠ¡ï¼Œå®ƒæ²¡æœ‰ä¸Šä¸‹æ–‡ï¼Œè°ƒåº¦å™¨æ— æ³•ç®¡ç†å®ƒã€‚</li><li>FreeRTOS æä¾›äº†ä¸€å¥—ä¸“é—¨çš„ <code>...FromISR()</code> ç‰ˆæœ¬çš„ APIï¼ˆå¦‚ <code>xQueueSendFromISR()</code>ï¼‰æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</li></ul></li></ol><h2 id="âš ï¸-å¸¸è§-æ¦‚å¿µ-é”™è¯¯ä¸ä¿®å¤">âš ï¸ å¸¸è§(æ¦‚å¿µ)é”™è¯¯ä¸ä¿®å¤</h2><p><strong>è¯¯åŒº1ï¼šRTOS èƒ½è®©æˆ‘çš„å•æ ¸ CPU â€œå¹¶è¡Œâ€ (Parallel) è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚</strong></p><ul><li><strong>çº æ­£</strong>ï¼šé”™ã€‚å•æ ¸ CPU åœ¨ä»»ä½•ä¸€ä¸ªç¬é—´ï¼Œæ°¸è¿œåªèƒ½æ‰§è¡Œ<strong>ä¸€ä¸ª</strong>ä»»åŠ¡ã€‚RTOS å®ç°çš„æ˜¯<strong>å¹¶å‘</strong>ï¼ˆConcurrencyï¼‰ï¼Œå³é€šè¿‡æå¿«çš„ï¼ˆå¾®ç§’çº§ï¼‰ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè®©ä»»åŠ¡â€œè½®æµâ€ä½¿ç”¨ CPUï¼Œå®è§‚ä¸Šçœ‹èµ·æ¥åƒåœ¨åŒæ—¶è¿è¡Œã€‚</li></ul><p><strong>è¯¯åŒº2ï¼š<code>vTaskDelay(100)</code> å’Œ <code>HAL_Delay(100)</code> (è£¸æœºå»¶æ—¶) æ˜¯ä¸€å›äº‹ã€‚</strong></p><ul><li><strong>çº æ­£</strong>ï¼šè¿™æ˜¯<strong>æœ€è‡´å‘½</strong>çš„è¯¯è§£ï¼</li><li><code>HAL_Delay(100)</code>ï¼š<strong>å¿™ç­‰å¾…</strong> (Busy-Wait)ã€‚CPU åœ¨ç©ºè½¬ï¼Œ<strong>éœ¸å  CPU 100ms</strong>ï¼Œæ‰€æœ‰ä»»åŠ¡ï¼ˆåŒ…æ‹¬ RTOS è°ƒåº¦å™¨ï¼‰å…¨éƒ¨åœæ­¢ã€‚åœ¨ RTOS ä¸­ä½¿ç”¨å®ƒï¼Œç­‰äºâ€œå†»ç»“â€äº†æ•´ä¸ªç³»ç»Ÿã€‚</li><li><code>vTaskDelay(100)</code>ï¼š<strong>éé˜»å¡æŒ‚èµ·</strong> (Non-Blocking)ã€‚å®ƒå‘Šè¯‰è°ƒåº¦å™¨ï¼šâ€œè¯·è®©æœ¬ä»»åŠ¡ä¼‘çœ  100msï¼ŒCPU ä½ æ‹¿å»ç»™åˆ«çš„ä»»åŠ¡ç”¨å§â€ã€‚CPU ä¼š<strong>ç«‹å³</strong>å»æ‰§è¡Œå…¶ä»–å°±ç»ªä»»åŠ¡ã€‚</li></ul><p><strong>è¯¯åŒº3ï¼šæˆ‘çš„é¡¹ç›®å¾ˆç®€å•ï¼Œåªéœ€è¦é—ªä¸ªç¯ï¼Œä¹Ÿè¦ç”¨ FreeRTOSã€‚</strong></p><ul><li><strong>çº æ­£</strong>ï¼šä¸è¦ä¸ºäº†ç”¨è€Œç”¨ï¼ˆOverkillï¼‰ã€‚RTOS æœ¬èº«ä¼šå ç”¨é¢å¤–çš„ Flash å’Œ RAMï¼ˆå†…æ ¸ä»£ç ã€æ¯ä¸ªä»»åŠ¡çš„æ ˆç©ºé—´ï¼‰ã€‚å¦‚æœä½ çš„é¡¹ç›®çœŸçš„åªæœ‰ä¸€ä¸ª <code>while(1)</code> å°±èƒ½æå®šï¼Œè¯·<strong>åšæŒä½¿ç”¨è£¸æœº</strong>ï¼Œå®ƒæ›´é«˜æ•ˆã€‚</li></ul><p><strong>è¯¯åŒº4ï¼šFreeRTOS å’Œ Linux å·®ä¸å¤šã€‚</strong></p><ul><li><strong>çº æ­£</strong>ï¼šå·®å¾ˆè¿œã€‚FreeRTOS æ˜¯ä¸€ä¸ª<strong>å¾®å†…æ ¸</strong>ï¼ˆMicrokernelï¼‰ï¼Œè¿è¡Œåœ¨ MCUï¼ˆå¾®æ§åˆ¶å™¨ï¼Œå¦‚ STM32ï¼‰ä¸Šï¼Œæ²¡æœ‰ MMUï¼ˆå†…å­˜ç®¡ç†å•å…ƒï¼‰ã€‚Linux æ˜¯ä¸€ä¸ª<strong>å®å†…æ ¸</strong>ï¼ˆMonolithic Kernelï¼‰ï¼Œè¿è¡Œåœ¨ MPU/CPUï¼ˆå¦‚æ ‘è“æ´¾ã€PCï¼‰ä¸Šï¼Œæœ‰è™šæ‹Ÿå†…å­˜ã€è¿›ç¨‹ã€é©±åŠ¨æ¡†æ¶ç­‰å¤æ‚æ¦‚å¿µã€‚</li></ul><h2 id="ğŸ¯-ç»ƒä¹ é¢˜">ğŸ¯ ç»ƒä¹ é¢˜</h2><ol><li><p><strong>[åŸºç¡€] æ¦‚å¿µè¾¨æï¼ˆåˆ¤æ–­å¯¹é”™ï¼‰</strong></p><ol><li>RTOS çš„æ ¸å¿ƒä»·å€¼æ˜¯è®©ç¨‹åºè¿è¡Œå¾—æ›´å¿«ã€‚</li><li><code>vTaskDelay(50)</code> ä¼šå¯¼è‡´ CPU åœæ­¢å·¥ä½œ 50 ä¸ª Tickã€‚</li><li>ä¸€ä¸ªé«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œåªè¦å¤„äºâ€œå°±ç»ªæ€â€ï¼Œå®ƒä¸€å®šèƒ½æ¯”æ‰€æœ‰ä½ä¼˜å…ˆçº§ä»»åŠ¡å…ˆè·å¾— CPUã€‚</li><li>åœ¨ FreeRTOS ä¸­ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½å…±äº«åŒä¸€ä¸ªæ ˆç©ºé—´ã€‚</li></ol></li><li><p>[è¿›é˜¶] åœºæ™¯åˆ†æ</p><p>ä½ çš„é¡¹ç›®éœ€è¦ 3 ä¸ªåŠŸèƒ½ï¼š</p><ul><li>A. è¿è¡Œä¸€ä¸ª Web æœåŠ¡å™¨ï¼ˆLwIPï¼‰ï¼Œå“åº”ç½‘ç»œè¯·æ±‚ï¼ˆè¦æ±‚å®æ—¶æ€§é«˜ï¼‰ã€‚</li><li>B. æ¯ 10 ç§’é’Ÿï¼Œå°†æ—¥å¿—æ•°æ®å†™å…¥ SD å¡ï¼ˆè€—æ—¶æ“ä½œï¼Œå¯èƒ½é•¿è¾¾ 500msï¼‰ã€‚</li><li>C. æ¯ 500ms é—ªçƒä¸€æ¬¡ LED æŒ‡ç¤ºç¯ã€‚</li></ul><p>è¯·é—®ï¼šä½ ä¼šè®¾è®¡å‡ ä¸ªä»»åŠ¡ï¼Ÿå¹¶ä¸ºå®ƒä»¬åˆ†é…åˆç†çš„<strong>ä¼˜å…ˆçº§ï¼ˆé«˜ã€ä¸­ã€ä½ï¼‰</strong>ï¼Œå¹¶è¯´æ˜ç†ç”±ã€‚</p></li><li><p>[æŒ‘æˆ˜] æ€ç»´è½¬æ¢</p><p>æ¥â€œå®æˆ˜é—®é¢˜åœºæ™¯â€ï¼Œå¦‚æœå†å¢åŠ ä¸€ä¸ªéœ€æ±‚ï¼š</p><ul><li>â€œå½“ç³»ç»Ÿè¿ç»­ 3 æ¬¡è¯»å– BME280 ä¼ æ„Ÿå™¨å¤±è´¥æ—¶ï¼Œç«‹åˆ»ç‚¹äº®ä¸€é¢—çº¢è‰²æ•…éšœ LEDï¼Œå¹¶åœæ­¢é—ªçƒâ€˜è¿è¡Œæ­£å¸¸â€™çš„ç»¿è‰² LEDã€‚â€</li><li>è¯·ç”¨â€œRTOS æ€ç»´â€ï¼ˆä»»åŠ¡é—´é€šä¿¡ï¼‰ç®€è¿°ä½ çš„å®ç°æ€è·¯ã€‚</li></ul></li></ol><hr><h2 id="ğŸ“-é™„å½•ï¼šSTM32-vs-ESP32-ä¸­çš„-FreeRTOS">ğŸ“ é™„å½•ï¼šSTM32 vs ESP32 ä¸­çš„ FreeRTOS</h2><p>æœ¬æ•™ç¨‹è´¯ç©¿åŒå¹³å°ï¼Œç†è§£å®ƒä»¬å¯¹ FreeRTOS çš„ä¸åŒä½¿ç”¨æ–¹å¼è‡³å…³é‡è¦ï¼š</p><table><thead><tr><th><strong>å¯¹æ¯”é¡¹</strong></th><th><strong>STM32 (CubeMX)</strong></th><th><strong>ESP32 (ESP-IDF)</strong></th></tr></thead><tbody><tr><td><strong>è§’è‰²</strong></td><td>FreeRTOS æ˜¯ä¸€ä¸ªâ€œ<strong>å¯é€‰é¡¹</strong>â€</td><td>FreeRTOS æ˜¯ç³»ç»Ÿçš„â€œ<strong>åŸºçŸ³</strong>â€</td></tr><tr><td><strong>é›†æˆæ–¹å¼</strong></td><td>ä½ é€šè¿‡ CubeMX <strong>ç§»æ¤</strong>å¹¶<strong>é…ç½®</strong> FreeRTOS åˆ°ä½ çš„è£¸æœºå·¥ç¨‹ä¸­ã€‚</td><td>ESP-IDF <strong>åŸç”ŸåŸºäº</strong> FreeRTOS æ„å»ºã€‚Wi-Fiã€è“ç‰™ã€TCP/IP åè®®æ ˆéƒ½ä½œä¸º RTOS ä»»åŠ¡åœ¨è¿è¡Œã€‚</td></tr><tr><td><strong>ä½ çš„èº«ä»½</strong></td><td>ä½ æ˜¯â€œ<strong>ç§»æ¤è€…</strong>â€å’Œâ€œä½¿ç”¨è€…â€</td><td>ä½ æ˜¯â€œ<strong>ä½¿ç”¨è€…</strong>â€</td></tr><tr><td><strong>é…ç½®</strong></td><td>ä½ éœ€è¦<strong>æ‰‹åŠ¨</strong>é…ç½®ï¼š - <code>configTOTAL_HEAP_SIZE</code> (å †å¤§å°) - <code>configTICK_RATE_HZ</code> (èŠ‚æ‹ç‡) - <code>SYS</code> æ—¶åŸº (Timebase Source)</td><td>ä¹é‘«å®˜æ–¹å·²ç»ä¸ºä½ åšå¥½äº†æ‰€æœ‰åº•å±‚é…ç½®ï¼ˆ<code>sdkconfig</code>ï¼‰ã€‚</td></tr><tr><td><strong>åŒæ ¸</strong></td><td>N/A (å¤§å¤š STM32 æ˜¯å•æ ¸)</td><td>ESP-IDF æä¾›äº† <code>xTaskCreatePinnedToCore</code> APIï¼Œå…è®¸ä½ å°†ä»»åŠ¡<strong>ç»‘å®š</strong>åœ¨ Core 0 æˆ– Core 1 ä¸Šè¿è¡Œã€‚</td></tr></tbody></table><hr><p><strong>ç­”æ¡ˆåŒº</strong></p><ul><li><strong>ç»ƒä¹ é¢˜ 1</strong>ï¼š1.é”™ (æ˜¯å¯é¢„æµ‹æ€§)ï¼›2.é”™ (æ˜¯æŒ‚èµ·å½“å‰ä»»åŠ¡ï¼ŒCPU ä¸åœæ­¢)ï¼›3.å¯¹ï¼›4.é”™ (å„æœ‰ç‹¬ç«‹æ ˆ)</li><li><strong>ç»ƒä¹ é¢˜ 2 (å‚è€ƒ)</strong>ï¼š3 ä¸ªä»»åŠ¡ã€‚A (Web Server) ä¼˜å…ˆçº§æœ€é«˜ï¼ˆé«˜ï¼‰ï¼Œå› ä¸ºå®ƒéœ€è¦åŠæ—¶å“åº”å¤–éƒ¨è¯·æ±‚ï¼›B (å†™ SD å¡) ä¼˜å…ˆçº§æœ€ä½ï¼ˆä½ï¼‰ï¼Œå®ƒæ˜¯è€—æ—¶ã€éç´§æ€¥çš„åå°ä»»åŠ¡ï¼›C (é—ªç¯) ä¼˜å…ˆçº§ä¸­é—´ï¼ˆä¸­ï¼‰ã€‚</li><li><strong>ç»ƒä¹ é¢˜ 3 (å‚è€ƒ)</strong>ï¼š<code>vTask_ReadSensor</code> (ä»»åŠ¡2) å†…éƒ¨å¢åŠ ä¸€ä¸ª <code>fail_count</code> è®¡æ•°å™¨ã€‚å½“ <code>fail_count &gt;= 3</code> æ—¶ï¼Œå®ƒé€šè¿‡<strong>é˜Ÿåˆ—</strong>æˆ–<strong>äº‹ä»¶ç»„</strong>ï¼ˆåç»­ç« èŠ‚ï¼‰å‘é€ä¸€ä¸ªâ€œæ•…éšœâ€æ¶ˆæ¯ã€‚<code>vTask_BlinkLED</code> (ä»»åŠ¡1) ä¸å†æ˜¯æ— è„‘é—ªç¯ï¼Œå®ƒéœ€è¦å¾ªç¯<strong>æ£€æŸ¥</strong>è¿™ä¸ªæ¶ˆæ¯ã€‚ä¸€æ—¦æ”¶åˆ°â€œæ•…éšœâ€æ¶ˆæ¯ï¼Œå®ƒå°±æ”¹å˜è‡ªå·±çš„é—ªçƒé€»è¾‘ï¼ˆä¾‹å¦‚åˆ‡æ¢åˆ°çº¢è‰² LED å¹¶é•¿äº®ï¼‰ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> FreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FreeRTOS </tag>
            
            <tag> RTOS </tag>
            
            <tag> è£¸æœº </tag>
            
            <tag> Kernel </tag>
            
            <tag> Scheduler </tag>
            
            <tag> æ¶æ„ </tag>
            
            <tag> å¹¶å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠFreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ã€‹ç¬¬0ç¯‡ï¼šä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ· â€”â€” åŒå¹³å°ç¡¬ä»¶/è½¯ä»¶å·¥å…·é“¾æ£€æŸ¥æ¸…å•</title>
      <link href="/2025/10/25/%E3%80%8AFreeRTOS-%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B%E3%80%8B%E7%AC%AC0%E7%AF%87%EF%BC%9A%E4%B8%87%E4%B8%88%E9%AB%98%E6%A5%BC%E5%B9%B3%E5%9C%B0%E8%B5%B7-%E2%80%94%E2%80%94-%E5%8F%8C%E5%B9%B3%E5%8F%B0%E7%A1%AC%E4%BB%B6-%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7%E9%93%BE%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95/"/>
      <url>/2025/10/25/%E3%80%8AFreeRTOS-%E5%85%A8%E6%A0%88%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B%E3%80%8B%E7%AC%AC0%E7%AF%87%EF%BC%9A%E4%B8%87%E4%B8%88%E9%AB%98%E6%A5%BC%E5%B9%B3%E5%9C%B0%E8%B5%B7-%E2%80%94%E2%80%94-%E5%8F%8C%E5%B9%B3%E5%8F%B0%E7%A1%AC%E4%BB%B6-%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7%E9%93%BE%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95/</url>
      
        <content type="html"><![CDATA[<h1>ã€ŠFreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ã€‹ç¬¬0ç¯‡ï¼šä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ· â€”â€” åŒå¹³å°ç¡¬ä»¶/è½¯ä»¶å·¥å…·é“¾æ£€æŸ¥æ¸…å•</h1><p>â­ <strong>éš¾åº¦ç­‰çº§ï¼šâ˜…â˜†â˜† åŸºç¡€</strong></p><p><strong>æ ‡ç­¾</strong>ï¼š<code>FreeRTOS</code>, <code>STM32</code>, <code>ESP32</code>, <code>ç¯å¢ƒæ­å»º</code>, <code>CubeMX</code>, <code>ESP-IDF</code>, <code>Keil</code>, <code>VSCode</code></p><h2 id="ğŸ“-å®æˆ˜é—®é¢˜åœºæ™¯">ğŸ“ å®æˆ˜é—®é¢˜åœºæ™¯</h2><p>æ¬¢è¿æ¥åˆ°ã€ŠFreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ã€‹ï¼è¿™æ˜¯ä¸€ä¸ªæ—¨åœ¨å¸¦ä½ <strong>ä» 0 åˆ°é‡äº§</strong>ï¼Œç”¨ä¸€å¹´æ—¶é—´çœŸæ­£â€œåƒé€â€ FreeRTOS çš„ç³»åˆ—ã€‚</p><p>åœ¨å¼€å§‹ç¼–å†™ä»»ä½•ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»é¢å¯¹ä¸€ä¸ªæ®‹é…·çš„ç°å®ï¼š<strong>90% çš„åˆå­¦è€…æ”¾å¼ƒï¼Œéƒ½å€’åœ¨äº†ç¯å¢ƒæ­å»ºçš„ç¬¬ä¸€æ­¥ã€‚</strong></p><p>ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼Ÿ</p><ul><li>â€œæˆ‘æƒ³å­¦ FreeRTOSï¼Œåˆ°åº•è¯¥ä¹°å“ªå— STM32 æ¿å­ï¼ŸF103ã€F407 è¿˜æ˜¯ F767ï¼Ÿâ€</li><li>â€œESP32 å‹å·å¤ªä¹±äº†ï¼ŒWROOMã€S2ã€S3ã€C3 åˆ°åº•æœ‰ä½•åŒºåˆ«ï¼Ÿæˆ‘è¯¥ç”¨å“ªä¸€ä¸ªï¼Ÿâ€</li><li>â€œä¸ºä»€ä¹ˆæˆ‘ä¸‹è½½äº†å®˜æ–¹ä»£ç ï¼Œä¸€ç¼–è¯‘å°±æ˜¯å‡ ç™¾ä¸ªé”™è¯¯ï¼Ÿâ€</li><li>â€œKeil MDK å’Œ VSCode + ESP-IDF çš„å¼€å‘ä½“éªŒå®Œå…¨ä¸åŒï¼Œæˆ‘èƒ½åœ¨ä¸¤ä¸ªå¹³å°é—´æ— ç¼åˆ‡æ¢å—ï¼Ÿâ€</li><li>â€œé©±åŠ¨å®‰è£…å¤±è´¥ã€å·¥å…·é“¾æ‰¾ä¸åˆ°ã€ä¸‹è½½å™¨æ— æ³•è¿æ¥â€¦â€¦â€</li></ul><p><strong>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚</strong></p><p>æœ¬ç¯‡ï¼ˆç¬¬0ç¯‡ï¼‰ä½œä¸ºæ•´ä¸ªç³»åˆ—çš„åŸºçŸ³ï¼Œå°†ä¸ºä½ æä¾›ä¸€ä¸ª<strong>æ ‡å‡†åŒ–çš„ã€ç»è¿‡éªŒè¯çš„â€œç‰©æ–™æ¸…å•â€ï¼ˆBOMï¼‰</strong>ã€‚æœ¬ç³»åˆ—çš„æ‰€æœ‰ä»£ç éƒ½å°†åŸºäºè¿™ä¸ªæ¸…å•è¿›è¡Œå¼€å‘å’Œæµ‹è¯•ã€‚å‘Šåˆ«ç¯å¢ƒé…ç½®çš„â€œç„å­¦â€ï¼Œè®©æˆ‘ä»¬æ‰€æœ‰äººç«™åœ¨åŒä¸€èµ·è·‘çº¿ä¸Šã€‚</p><h2 id="ğŸ¯-æœ¬ç¯‡èƒ½åŠ›ç›®æ ‡">ğŸ¯ æœ¬ç¯‡èƒ½åŠ›ç›®æ ‡</h2><p>è¯»å®Œæœ¬ç¯‡ï¼Œä½ å°†å®Œæˆä»¥ä¸‹å‡†å¤‡å·¥ä½œï¼Œè¾¾åˆ° <strong>â€œç¯å¢ƒæ¸…æ™°ï¼Œéšæ—¶ä¸Šæ‰‹â€</strong> çš„çŠ¶æ€ï¼š</p><ol><li>âœ… <strong>æ˜ç¡®ç¡¬ä»¶æ¸…å•</strong>ï¼šè·å–æœ¬ç³»åˆ—æ•™ç¨‹æ‰€éœ€çš„æœ€å°åŒ–ã€æ ‡å‡†åŒ–çš„ STM32 å’Œ ESP32 ç¡¬ä»¶ã€‚</li><li>âœ… <strong>å¤‡é½è½¯ä»¶å·¥å…·</strong>ï¼šä¸‹è½½å¹¶å®‰è£…ä¸¤å¤§å¹³å°æ‰€éœ€çš„æ‰€æœ‰ IDEã€ç¼–è¯‘å™¨ã€é…ç½®å·¥å…·å’Œé©±åŠ¨ã€‚</li><li>âœ… <strong>ç†è§£å·¥å…·é“¾å·®å¼‚</strong>ï¼šåˆæ­¥ç†è§£ä¸ºä½• STM32ï¼ˆKeil+CubeMXï¼‰å’Œ ESP32ï¼ˆVSCode+ESP-IDFï¼‰åœ¨å·¥å…·é“¾ä¸Šå­˜åœ¨æ ¹æœ¬å·®å¼‚ã€‚</li><li>âœ… <strong>å‡†å¤‡å°±ç»ª</strong>ï¼šä¸ºä¸‹ä¸€ç¯‡ã€Šç¬¬1ç¯‡ï¼šä»€ä¹ˆæ˜¯ FreeRTOSï¼Ÿã€‹å’Œã€Šç¬¬2ç¯‡ï¼šç¯å¢ƒæ­å»ºå®æˆ˜ã€‹æ‰«æ¸…æ‰€æœ‰éšœç¢ã€‚</li></ol><h2 id="ğŸ§ -ç†è®ºç®€æï¼šä¸ºä½•é€‰æ‹©â€œSTM32-ESP32â€åŒå¹³å°ï¼Ÿ">ğŸ§  ç†è®ºç®€æï¼šä¸ºä½•é€‰æ‹©â€œSTM32 + ESP32â€åŒå¹³å°ï¼Ÿ</h2><p>æœ¬æ•™ç¨‹çš„æ ¸å¿ƒç‰¹è‰²ä¹‹ä¸€å°±æ˜¯<strong>åŒå¹³å°</strong>ã€‚è¿™å¹¶éç”»è›‡æ·»è¶³ï¼Œè€Œæ˜¯æœ‰æ„ä¸ºä¹‹ï¼Œæ—¨åœ¨æ„å»ºä½ å®Œæ•´çš„åµŒå…¥å¼çŸ¥è¯†ä½“ç³»ï¼š</p><ol><li><strong>STM32 (ä»¥ F4 ä¸ºä¾‹) + Keil MDK + CubeMX</strong><ul><li><strong>ä»£è¡¨é¢†åŸŸ</strong>ï¼šä¼ ç»Ÿçš„ã€èµ„æºç›¸å¯¹å—é™çš„ MCU å¸‚åœºã€‚å·¥ä¸šæ§åˆ¶ã€æ±½è½¦ç”µå­ã€ä¼ ç»Ÿæ¶ˆè´¹ç”µå­ç­‰ã€‚</li><li><strong>å­¦ä¹ é‡ç‚¹</strong>ï¼šå­¦ä¹  FreeRTOS <strong>å†…æ ¸çš„ç²¾é«“</strong>ã€èµ„æºç®¡ç†ã€ä¸­æ–­å¤„ç†ã€ä½åŠŸè€—ä¼˜åŒ–ã€‚ä½ éœ€è¦ç²¾æ‰“ç»†ç®—æ¯ä¸€KBçš„ RAM å’Œ Flashã€‚</li><li><strong>å·¥å…·é“¾</strong>ï¼šKeil æ˜¯è€ç‰Œçš„åµŒå…¥å¼ IDEï¼Œå…¶è°ƒè¯•åŠŸèƒ½å¼ºå¤§ï¼›CubeMX åˆ™æ˜¯ ST å®˜æ–¹çš„ä»£ç ç”Ÿæˆå™¨ï¼Œæå¤§ç®€åŒ–äº†å¤–è®¾é…ç½®ã€‚</li></ul></li><li><strong>ESP32 (ä»¥ WROOM-32 ä¸ºä¾‹) + VSCode + ESP-IDF</strong><ul><li><strong>ä»£è¡¨é¢†åŸŸ</strong>ï¼šç°ä»£çš„ã€é«˜æ€§èƒ½çš„ã€é«˜åº¦é›†æˆçš„ IoT å¸‚åœºã€‚æ™ºèƒ½å®¶å±…ã€å¯ç©¿æˆ´è®¾å¤‡ã€è¾¹ç¼˜è®¡ç®—ç­‰ã€‚</li><li><strong>å­¦ä¹ é‡ç‚¹</strong>ï¼šå­¦ä¹  FreeRTOS åœ¨<strong>å¤æ‚ç³»ç»Ÿä¸­çš„åº”ç”¨</strong>ã€‚ESP-IDF æœ¬èº«å°±æ˜¯åŸºäº FreeRTOS æ„å»ºçš„ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å°† RTOS ä¸ Wi-Fiã€Bluetoothã€TCP/IP åè®®æ ˆã€æ–‡ä»¶ç³»ç»Ÿç­‰å¤æ‚ç»„ä»¶ååŒå·¥ä½œã€‚</li><li><strong>å·¥å…·é“¾</strong>ï¼šVSCode æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„æ ‡æ†ï¼ŒESP-IDF åˆ™æ˜¯åŠŸèƒ½æå…¶å®Œå–„çš„ SDKï¼ˆè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼‰ï¼Œå®ƒæœ¬èº«å°±ä¸ºä½ å¤„ç†å¥½äº† FreeRTOS çš„ç§»æ¤å’Œå¤§é‡é©±åŠ¨ã€‚</li></ul></li></ol><p>å­¦ä¹ äºŒè€…çš„ååŒæ•ˆåº”ï¼š</p><p>ä½ å°†æŒæ¡â€œç²¾ç»†æ§åˆ¶â€ï¼ˆSTM32ï¼‰å’Œâ€œå¿«é€Ÿé›†æˆâ€ï¼ˆESP32ï¼‰ä¸¤ç§èƒ½åŠ›ã€‚FreeRTOS åˆ™æ˜¯è´¯ç©¿äºŒè€…çš„â€œæ“ä½œç³»ç»Ÿçµé­‚â€ã€‚è¿™ä½¿ä½ æ—¢èƒ½èƒœä»»å¯¹æˆæœ¬å’ŒåŠŸè€—æ•æ„Ÿçš„ä¼ ç»Ÿé¡¹ç›®ï¼Œä¹Ÿèƒ½é©¾é©­å¤æ‚çš„ç‰©è”ç½‘ï¼ˆIoTï¼‰åº”ç”¨ã€‚</p><hr><h2 id="ğŸ› ï¸-å®æ“æ­¥éª¤ï¼šä½ çš„å¼€å‘å·¥å…·â€œBOM-æ¸…å•â€">ğŸ› ï¸ å®æ“æ­¥éª¤ï¼šä½ çš„å¼€å‘å·¥å…·â€œBOM æ¸…å•â€</h2><p>è¯·ä¸¥æ ¼æŒ‰ç…§æ­¤æ¸…å•å‡†å¤‡ä½ çš„å·¥å…·ã€‚</p><h3 id="ç¬¬1éƒ¨åˆ†ï¼šç¡¬ä»¶å·¥å…·æ¸…å•-Hardware-Checklist">ç¬¬1éƒ¨åˆ†ï¼šç¡¬ä»¶å·¥å…·æ¸…å• (Hardware Checklist)</h3><table><thead><tr><th><strong>å¹³å°</strong></th><th><strong>ç±»åˆ«</strong></th><th><strong>æ¨èå‹å·/è§„æ ¼</strong></th><th><strong>å¤‡æ³¨ (ä¸ºä½•é€‰å®ƒï¼Ÿ)</strong></th></tr></thead><tbody><tr><td><strong>STM32</strong></td><td><strong>æ ¸å¿ƒæ¿</strong></td><td><strong>STM32F407VET6 æ ¸å¿ƒæ¿</strong> (å°é»‘æ¿)</td><td>æ€§ä»·æ¯”é«˜ï¼Œèµ„æºä¸°å¯Œ (FPU, 512KB Flash, 192KB RAM)ï¼Œç¤¾åŒºèµ„æ–™å¤šã€‚</td></tr><tr><td></td><td><strong>è°ƒè¯•å™¨</strong></td><td><strong>ST-Link V2</strong> (é‡‘å±å¤–å£³ç‰ˆ)</td><td>å¿…å¤‡çš„ä¸‹è½½/è°ƒè¯•å·¥å…·ã€‚</td></tr><tr><td></td><td><strong>å¤‡é€‰æ¿</strong></td><td>NUCLEO-F401RE / NUCLEO-F411RE</td><td>[å¯é€‰] ST å®˜æ–¹å¼€å‘æ¿ï¼Œè‡ªå¸¦ ST-Linkï¼Œå…å»é¢å¤–è´­ä¹°è°ƒè¯•å™¨ã€‚</td></tr><tr><td><strong>ESP32</strong></td><td><strong>æ ¸å¿ƒæ¿</strong></td><td><strong>ESP32-DevKitC V4</strong> (æ­è½½ ESP32-WROOM-32 æ¨¡ç»„)</td><td>ä¹é‘«å®˜æ–¹å¼€å‘æ¿ï¼Œæœ€æ ‡å‡†ã€æœ€ç¨³å®šï¼Œèµ„æ–™æœ€å…¨ï¼Œæ¿è½½ USB-TTLã€‚</td></tr><tr><td></td><td><strong>å¤‡é€‰æ¿</strong></td><td>ESP32-S3-DevKitC-1</td><td>[å¯é€‰] S3 æ€§èƒ½æ›´å¼ºï¼Œæ”¯æŒ AI æŒ‡ä»¤ï¼Œå¦‚ä½ å¸Œæœ›å…¼é¡¾ AIoT å¯é€‰æ­¤é¡¹ã€‚</td></tr><tr><td><strong>é€šç”¨</strong></td><td><strong>ä¸²å£å·¥å…·</strong></td><td><strong>USB to TTL (CH340G / CP2102)</strong></td><td>å¿…å¤‡ã€‚è™½ç„¶å¼€å‘æ¿è‡ªå¸¦ï¼Œä½†ç‹¬ç«‹ä¸²å£å·¥å…·æ˜¯è°ƒè¯•çš„ä¸‡èƒ½é’¥åŒ™ã€‚</td></tr><tr><td></td><td><strong>å¤–è®¾</strong></td><td>é¢åŒ…æ¿ã€æœé‚¦çº¿ (å…¬å¯¹å…¬/å…¬å¯¹æ¯)ã€LEDã€ç”µé˜» (220Î© / 1KÎ©)</td><td>åŸºç¡€å®éªŒå¿…å¤‡ã€‚</td></tr><tr><td></td><td><strong>é¡¹ç›®å¤–è®¾</strong></td><td>DHT11/BME280 (æ¸©æ¹¿åº¦/æ°”å‹)ã€å…‰æ•ç”µé˜»ã€OLED (I2C)</td><td>[å¯é€‰] åç»­ç»¼åˆé¡¹ç›®ä¼šç”¨åˆ°ï¼Œå¯æå‰å‡†å¤‡ã€‚</td></tr><tr><td></td><td><strong>è°ƒè¯•è¾…åŠ©</strong></td><td>é€»è¾‘åˆ†æä»ª (8é€šé“, å¦‚ Saleae ä»¿åˆ¶ç‰ˆ)</td><td>[å¼ºçƒˆæ¨è] è°ƒè¯•æ—¶åºã€åè®®é—®é¢˜çš„ç¥å™¨ã€‚</td></tr></tbody></table><hr><h3 id="ç¬¬2éƒ¨åˆ†ï¼šè½¯ä»¶å·¥å…·é“¾æ¸…å•-Software-Checklist">ç¬¬2éƒ¨åˆ†ï¼šè½¯ä»¶å·¥å…·é“¾æ¸…å• (Software Checklist)</h3><table><thead><tr><th><strong>å¹³å°</strong></th><th><strong>ç±»åˆ«</strong></th><th><strong>è½¯ä»¶åç§°</strong></th><th><strong>ç‰ˆæœ¬ (å»ºè®®)</strong></th><th><strong>å®˜æ–¹ä¸‹è½½/è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>STM32</strong></td><td><strong>IDE</strong></td><td><strong>Keil MDK-ARM</strong></td><td>V5.36 æˆ–æ›´é«˜</td><td><a href="https://www.google.com/search?q=https://www.keil.com/demo/eval/arm.htm">https://www.keil.com/demo/eval/arm.htm</a> (æ³¨æ„32KBä»£ç é™åˆ¶ï¼Œæˆ–è€…ä½ æ‰¾ç ´è§£ç‰ˆï¼Œè¿™é‡Œæˆ‘å°±ä¸æä¾›äº†)</td></tr><tr><td></td><td><strong>é…ç½®å™¨</strong></td><td><strong>STM32CubeMX</strong></td><td>V6.6.1 æˆ–æ›´é«˜</td><td><a href="https://www.st.com/stm32cubemx">https://www.st.com/stm32cubemx</a></td></tr><tr><td></td><td><strong>å›ºä»¶åº“</strong></td><td><strong>F4 Series FW Pack</strong></td><td>V1.27.0 æˆ–æ›´é«˜</td><td>åœ¨ CubeMX å†…éƒ¨ä¸‹è½½ (Help -&gt; Manage embeddedâ€¦)</td></tr><tr><td></td><td><strong>é©±åŠ¨</strong></td><td><strong>ST-Link Driver</strong></td><td>V2.0.2 æˆ–æ›´é«˜</td><td><a href="https://www.google.com/search?q=https://www.st.com/st-link-driver">https://www.st.com/st-link-driver</a></td></tr><tr><td><strong>ESP32</strong></td><td><strong>IDE</strong></td><td><strong>Visual Studio Code</strong></td><td>æœ€æ–°ç‰ˆ</td><td><a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a></td></tr><tr><td></td><td><strong>æ ¸å¿ƒæ‰©å±•</strong></td><td><strong>Espressif IDF</strong></td><td>æœ€æ–°ç‰ˆ (V1.6.x)</td><td>åœ¨ VSCode æ‰©å±•å•†åº—æœç´¢ â€œEspressif IDFâ€</td></tr><tr><td></td><td><strong>SDK/å·¥å…·é“¾</strong></td><td><strong>ESP-IDF</strong></td><td>V4.4.x æˆ– V5.0.x</td><td><strong>å¼ºçƒˆå»ºè®®</strong>ï¼šé€šè¿‡ VSCode æ‰©å±•è‡ªåŠ¨å®‰è£… (æ¨è) æˆ–ä½¿ç”¨ <a href="https://github.com/espressif/idf-installer">ESP-IDF Tools Installer</a></td></tr><tr><td></td><td><strong>é©±åŠ¨</strong></td><td><strong>CP210x / CH340 Driver</strong></td><td>æœ€æ–°ç‰ˆ</td><td>æ ¹æ®ä½ çš„ ESP32 æ¿è½½èŠ¯ç‰‡å‹å·ä¸‹è½½ (DevKitC V4 ä¸º CP210x)</td></tr><tr><td><strong>é€šç”¨</strong></td><td><strong>ç‰ˆæœ¬æ§åˆ¶</strong></td><td><strong>Git</strong></td><td>æœ€æ–°ç‰ˆ</td><td><a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></td></tr><tr><td></td><td><strong>ä¸²å£ç»ˆç«¯</strong></td><td><strong>MobaXterm</strong> / PuTTY</td><td>æœ€æ–°ç‰ˆ</td><td><a href="https://mobaxterm.mobatek.net/">https://mobaxterm.mobatek.net/</a> (MobaXterm åŠŸèƒ½æ›´å…¨ï¼Œçœ‹ä¸ªäººå–œå¥½ï¼Œæˆ‘æ¯”è¾ƒæ¨èè¿™ä¸ª)</td></tr></tbody></table><h2 id="âœ…-å…¨éƒ¨ä»£ç -æœ¬ç¯‡ä¸»è¦æ˜¯ç¯å¢ƒæ­å»º">âœ… å…¨éƒ¨ä»£ç  (æœ¬ç¯‡ä¸»è¦æ˜¯ç¯å¢ƒæ­å»º)</h2><p>æœ¬ç¯‡ä¸ºç¯å¢ƒå‡†å¤‡ç¯‡ï¼Œä¸æ¶‰åŠå¹³å°ä¸šåŠ¡ä»£ç ã€‚</p><p>ä½†ä½ å¿…é¡»æ‰§è¡Œä¸€ä¸ªå…³é”®æ“ä½œï¼š<strong>å…‹éš† (Clone) æœ¬ç³»åˆ—çš„ä»£ç ä»“</strong>ã€‚</p><p>æ‰“å¼€ä½ çš„ Git ç»ˆç«¯ï¼ˆæˆ– MobaXtermï¼‰ï¼Œæ‰§è¡Œï¼š</p><p>Bash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿™é‡Œæ˜¯æˆ‘åˆ›å»ºçš„ä»“åº“</span><br>git <span class="hljs-built_in">clone</span> https://github.com/JinBiLianShao/FreeRTOS-Tutorial.git<br><span class="hljs-built_in">cd</span> FreeRTOS-Tutorial<br></code></pre></td></tr></table></figure><p>å…‹éš†åï¼Œä½ å°†çœ‹åˆ°å¤§çº²ä¸­æè¿°çš„ç»Ÿä¸€ç›®å½•ç»“æ„ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nix">FreeRTOS-Tutorial<span class="hljs-symbol">/</span><br> â”œâ”€â”€ docs<span class="hljs-symbol">/</span>         <span class="hljs-comment"># åšå®¢åŸç¨¿</span><br> â”œâ”€â”€ stm32<span class="hljs-symbol">/</span>        <span class="hljs-comment"># STM32 å·¥ç¨‹</span><br> â”œâ”€â”€ esp32<span class="hljs-symbol">/</span>        <span class="hljs-comment"># ESP32 å·¥ç¨‹</span><br> â”œâ”€â”€ common<span class="hljs-symbol">/</span>       <span class="hljs-comment"># å¹³å°æ— å…³ä»£ç </span><br> â””â”€â”€ README.md     <span class="hljs-comment"># æ•™ç¨‹è®¾è®¡å¤§çº²</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ”-ç¯å¢ƒéªŒè¯ä¸è°ƒè¯•æŠ€å·§">ğŸ” ç¯å¢ƒéªŒè¯ä¸è°ƒè¯•æŠ€å·§</h2><p>å¦‚ä½•ç¡®ä¿ä½ çš„ç¯å¢ƒå·²â€œå‡†å¤‡å°±ç»ªâ€ï¼Ÿ</p><ol><li><strong>STM32 ç¯å¢ƒéªŒè¯</strong>ï¼š<ul><li>å°† ST-Link V2 æ’å…¥ç”µè„‘ã€‚</li><li>æ‰“å¼€ <strong>è®¾å¤‡ç®¡ç†å™¨</strong>ï¼Œæ£€æŸ¥â€œé€šç”¨ä¸²è¡Œæ€»çº¿æ§åˆ¶å™¨â€ä¸‹æ˜¯å¦æ— æ„Ÿå¹å·åœ°è¯†åˆ«å‡º â€œSTMicroelectronics STLink dongleâ€ã€‚</li><li>æ‰“å¼€ <strong>Keil MDK</strong>ï¼Œç‚¹å‡»èœå• <code>Project -&gt; Open Project</code>ï¼Œå°è¯•æ‰“å¼€ä»£ç ä»“ä¸­ <code>stm32/</code> ç›®å½•ä¸‹çš„ä»»æ„ä¸€ä¸ªå·¥ç¨‹ï¼ˆå¦‚æœå·²æœ‰ï¼‰ã€‚</li><li>ç‚¹å‡» <code>Project -&gt; Build Target</code> (F7)ï¼Œå¦‚æœèƒ½ç¼–è¯‘é€šè¿‡ï¼ˆ0 Errorsï¼‰ï¼Œè¯´æ˜ Keil MDK å’Œ Pack å·²åŸºæœ¬å°±ç»ªã€‚</li></ul></li><li><strong>ESP32 ç¯å¢ƒéªŒè¯</strong>ï¼š<ul><li>å°† ESP32-DevKitC V4 å¼€å‘æ¿æ’å…¥ç”µè„‘ã€‚</li><li>æ‰“å¼€ <strong>è®¾å¤‡ç®¡ç†å™¨</strong>ï¼Œæ£€æŸ¥â€œç«¯å£ (COM &amp; LPT)â€ä¸‹æ˜¯å¦è¯†åˆ«å‡º â€œSilicon Labs CP210x USB to UART Bridge (COMx)â€ã€‚</li><li>æ‰“å¼€ <strong>VSCode</strong>ï¼ŒæŒ‰ <code>F1</code> é”®ï¼Œè¾“å…¥å¹¶é€‰æ‹© â€œESP-IDF: Show Examples Projectsâ€ã€‚</li><li>é€‰æ‹© <code>hello_world</code> ç¤ºä¾‹ï¼Œé€‰æ‹©ä½¿ç”¨ä½ å®‰è£…çš„ ESP-IDFã€‚</li><li>ç­‰å¾… VSCode è‡ªåŠ¨é…ç½®å®Œæˆï¼ˆåº•éƒ¨æ ä¼šæ˜¾ç¤ºå·¥å…·é“¾çŠ¶æ€ï¼‰ã€‚</li><li>ç‚¹å‡» VSCode åº•éƒ¨çŠ¶æ€æ çš„ <strong>â€œBuildâ€</strong> æŒ‰é’®ï¼ˆå°åœ†æŸ±å›¾æ ‡ï¼‰ã€‚å¦‚æœè¾“å‡ºçª—å£æ˜¾ç¤º <code>Project build complete</code>ï¼Œè¯´æ˜ ESP-IDF å·¥å…·é“¾å·²å®Œç¾é…ç½®ã€‚</li><li>ï¼ˆè¿›é˜¶ï¼‰ç‚¹å‡» â€œFlashâ€ å’Œ â€œMonitorâ€ æŒ‰é’®ï¼Œå¦‚æœä½ èƒ½åœ¨ç»ˆç«¯çœ‹åˆ° â€œHello world!â€ æ‰“å°ï¼Œæ­å–œä½ ï¼Œå·²æ‰“é€šå…¨æµç¨‹ï¼</li></ul></li></ol><h2 id="âš ï¸-å¸¸è§é”™è¯¯ä¸ä¿®å¤">âš ï¸ å¸¸è§é”™è¯¯ä¸ä¿®å¤</h2><ol><li><strong>[STM32] é”™è¯¯ï¼šKeil MDK æ— æ³•æ£€æµ‹åˆ° ST-Linkã€‚</strong><ul><li><strong>åŸå› </strong>ï¼šST-Link é©±åŠ¨æœªå®‰è£…æˆ–å®‰è£…å¤±è´¥ã€‚</li><li><strong>ä¿®å¤</strong>ï¼šé‡æ–°ä» ST å®˜ç½‘ä¸‹è½½å¹¶ä»¥ç®¡ç†å‘˜èº«ä»½å®‰è£…é©±åŠ¨ï¼Œé‡å¯ç”µè„‘ã€‚æ£€æŸ¥ USB çº¿æˆ–æ¢ä¸€ä¸ª USB å£ã€‚</li></ul></li><li><strong>[STM32] é”™è¯¯ï¼šKeil MDK ç¼–è¯‘æç¤º <code>Error: L6218E: Undefined symbol...</code></strong><ul><li><strong>åŸå› </strong>ï¼šæœ€å¸¸è§äºä½¿ç”¨ CubeMX ç”Ÿæˆä»£ç åï¼Œæœªå°† <code>Core/src</code> ç›®å½•ä¸‹çš„ <code>.c</code> æ–‡ä»¶æ·»åŠ åˆ° Keil å·¥ç¨‹ä¸­ã€‚</li><li><strong>ä¿®å¤</strong>ï¼šåœ¨ Keil çš„ Project çª—å£ä¸­å³é”®ç‚¹å‡» <code>Application/User/Core</code> -&gt; <code>Add Existing Files...</code>ï¼Œæ·»åŠ æ‰€æœ‰ <code>.c</code> æ–‡ä»¶ã€‚ï¼ˆæˆ‘ä»¬å°†åœ¨ç¬¬2.1ç¯‡ä¸­è¯¦è§£ï¼‰</li></ul></li><li><strong>[ESP32] é”™è¯¯ï¼šç»ˆç«¯æç¤º <code>idf.py</code> ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ã€‚</strong><ul><li><strong>åŸå› </strong>ï¼šESP-IDF çš„ç¯å¢ƒå˜é‡æœªæ­£ç¡®åŠ è½½ã€‚</li><li><strong>ä¿®å¤</strong>ï¼šå¦‚æœä½ æ˜¯æ‰‹åŠ¨å®‰è£…çš„ IDFï¼Œè¯·ç¡®ä¿åœ¨<strong>å½“å‰ç»ˆç«¯</strong>ä¸­è¿è¡Œäº† <code>export.bat</code> (Win) æˆ– <code>source export.sh</code> (Linux/macOS)ã€‚å¦‚æœä½ ä½¿ç”¨ VSCode æ‰©å±•ï¼Œå°è¯•æŒ‰ <code>F1</code> -&gt; <code>ESP-IDF: Configure ESP-IDF extension</code> é‡æ–°é…ç½®è·¯å¾„ã€‚</li></ul></li><li><strong>[ESP32] é”™è¯¯ï¼šçƒ§å½•æ—¶æç¤º â€œA fatal error occurred: Failed to connect to ESP32: â€¦ Access is denied.â€</strong><ul><li><strong>åŸå› 1</strong>ï¼šCOM ç«¯å£è¢«å ç”¨ã€‚ä½ æ˜¯å¦æ‰“å¼€äº† MobaXterm æˆ–å…¶ä»–ä¸²å£åŠ©æ‰‹ï¼Ÿå…³æ‰å®ƒã€‚</li><li><strong>åŸå› 2</strong>ï¼šä¸²å£é©±åŠ¨ (CP210x / CH340) æœªå®‰è£…ã€‚</li><li><strong>åŸå› 3</strong>ï¼š(æ—§æ¬¾æ¿å­) ä½ åœ¨çƒ§å½•æ—¶æ²¡æœ‰æŒ‰ä½ <code>BOOT</code> æŒ‰é’®ã€‚</li><li><strong>ä¿®å¤</strong>ï¼šé€ä¸€æ’æŸ¥ä¸Šè¿°åŸå› ã€‚</li></ul></li><li><strong>[é€šç”¨] é”™è¯¯ï¼š<code>git clone</code> å¤±è´¥ï¼Œæç¤º â€œrepository not foundâ€ æˆ– â€œSSL certificate problemâ€ã€‚</strong><ul><li><strong>åŸå› </strong>ï¼šç½‘ç»œé—®é¢˜æˆ– Git é…ç½®é—®é¢˜ã€‚</li><li><strong>ä¿®å¤</strong>ï¼šæ£€æŸ¥ä»“åº“ URL æ˜¯å¦æ‹¼å†™æ­£ç¡®ã€‚å¦‚æœæ˜¯ SSL é—®é¢˜ï¼Œå¯å°è¯•é…ç½® <code>git config --global http.sslVerify false</code> (ä¸æ¨èï¼Œä½†å¯ä¸´æ—¶è§£å†³ç½‘ç»œä»£ç†é—®é¢˜)ã€‚</li></ul></li></ol><h2 id="ğŸ¯-ç»ƒä¹ æŒ‘æˆ˜">ğŸ¯ ç»ƒä¹ æŒ‘æˆ˜</h2><ol><li><strong>[åŸºç¡€] åŠ¨æ‰‹å®è·µ</strong>ï¼š<ul><li>(1) é‡‡è´­æ¸…å•ä¸­ <strong>STM32</strong> å’Œ <strong>ESP32</strong> çš„æ ¸å¿ƒæ¿åŠè°ƒè¯•å™¨ã€‚</li><li>(2) å®‰è£…æ¸…å•ä¸­ <strong>æ‰€æœ‰</strong> å¿…éœ€çš„è½¯ä»¶å·¥å…·ã€‚</li></ul></li><li><strong>[è¿›é˜¶] ç¯å¢ƒéªŒè¯</strong>ï¼š<ul><li>(1) æŒ‰ç…§ <strong>â€œğŸ” ç¯å¢ƒéªŒè¯ä¸è°ƒè¯•æŠ€å·§â€</strong> ç« èŠ‚ï¼Œç¡®ä¿ä½ çš„ STM32 å’Œ ESP32 å·¥å…·é“¾å‡å¯æ­£å¸¸ç¼–è¯‘ï¼ˆä¾‹å¦‚ç¼–è¯‘ä¸€ä¸ª <code>hello_world</code>ï¼‰ã€‚</li><li>(2) æˆåŠŸ <code>git clone</code> æœ¬ç³»åˆ—çš„ä»£ç ä»“ã€‚</li></ul></li><li><strong>[æŒ‘æˆ˜] ç¤¾ç¾¤æ‰“å¡</strong>ï¼š<ul><li>åœ¨æˆ‘åšå®¢çš„è¯„è®ºåŒºä¸­ï¼Œ<strong>æˆªå›¾</strong>å¹¶åˆ†äº«ä»¥ä¸‹ä¸¤ä¸ªç•Œé¢ï¼Œå®Œæˆâ€œç¬¬0ç¯‡â€æ‰“å¡ï¼š<ol><li>ä½ çš„ ESP-IDF ç¼–è¯‘ <code>hello_world</code> æˆåŠŸé€šè¿‡çš„ VSCode ç•Œé¢ã€‚</li><li>ä½ çš„ Keil MDK â€œAbout MDKâ€ çª—å£ï¼Œæ˜¾ç¤ºä½ çš„ MDK-ARM ç‰ˆæœ¬ã€‚</li></ol></li></ul></li></ol><h2 id="ğŸ“-é™„å½•ï¼šèµ„æºé“¾æ¥">ğŸ“ é™„å½•ï¼šèµ„æºé“¾æ¥</h2><ol><li><strong>STM32CubeMX</strong>: <a href="https://www.st.com/en/development-tools/stm32cubemx.html">https://www.st.com/en/development-tools/stm32cubemx.html</a></li><li><strong>Keil MDK-ARM</strong>: <a href="https://www.google.com/search?q=https://www.keil.com/demo/eval/arm.htm">https://www.keil.com/demo/eval/arm.htm</a></li><li><strong>VSCode</strong>: <a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a></li><li><strong>ESP-IDF (ä¹é‘«å®˜æ–¹æ–‡æ¡£)</strong>: <a href="https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/get-started/index.html">https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/get-started/index.html</a></li><li><strong>Git</strong>: <a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></li></ol><hr><p>æ­å–œä½ å®Œæˆäº†ç¬¬0æ­¥ï¼ä¸è¦å°çœ‹è¿™ä¸€æ­¥ï¼Œä¸€ä¸ªå¹²å‡€ã€æ ‡å‡†åŒ–çš„ç¯å¢ƒæ˜¯ä½ åç»­é«˜æ•ˆå­¦ä¹ å’Œè°ƒè¯•çš„<strong>æœ€å¼ºä¿éšœ</strong>ã€‚</p><p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†æ­£å¼è¿›å…¥ç†è®ºå­¦ä¹ ï¼š<strong>ã€Šç¬¬1ç¯‡ï¼šä»€ä¹ˆæ˜¯ FreeRTOSï¼Ÿé€‚ç”¨åœºæ™¯ä¸æ¶æ„æ€»è§ˆã€‹</strong>ï¼Œå¹¶ç´§æ¥ç€åœ¨ç¬¬2.1å’Œ2.2ç¯‡ä¸­ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºè¿™ä¸¤ä¸ªå¹³å°ã€‚å‡†å¤‡å¥½äº†å—ï¼ŸLetâ€™s Go!</p>]]></content>
      
      
      <categories>
          
          <category> FreeRTOS å…¨æ ˆå·¥ç¨‹å®æˆ˜æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FreeRTOS </tag>
            
            <tag> STM32 </tag>
            
            <tag> ESP32 </tag>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
            <tag> CubeMX </tag>
            
            <tag> ESP-IDF </tag>
            
            <tag> Keil </tag>
            
            <tag> VSCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ä¸€å‘¨ä¸€ç®—æ³•ã€‘ç¬¬äºŒå‘¨ï¼šé€‰æ‹©æ’åºä¸æ’å…¥æ’åº Â· æ€è€ƒé¢˜ä¸ç»ƒä¹ è¯¦è§£</title>
      <link href="/2025/10/24/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%BA%8C%E5%91%A8%EF%BC%9A%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E4%B8%8E%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F-%C2%B7-%E6%80%9D%E8%80%83%E9%A2%98%E4%B8%8E%E7%BB%83%E4%B9%A0%E8%AF%A6%E8%A7%A3/"/>
      <url>/2025/10/24/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%BA%8C%E5%91%A8%EF%BC%9A%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E4%B8%8E%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F-%C2%B7-%E6%80%9D%E8%80%83%E9%A2%98%E4%B8%8E%E7%BB%83%E4%B9%A0%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1>ğŸ§  é€‰æ‹©æ’åºä¸æ’å…¥æ’åº Â· æ€è€ƒé¢˜ä¸ç»ƒä¹ è¯¦è§£</h1><blockquote><p>â€œç†è§£ä¸€ä¸ªç®—æ³•çš„æœ€å¥½æ–¹å¼ï¼Œå°±æ˜¯æ·±å…¥æ€è€ƒå®ƒçš„è¾¹ç•Œæƒ…å†µå’Œä¼˜åŒ–å¯èƒ½ã€‚â€</p></blockquote><hr><h2 id="ğŸ§©-æ€è€ƒé¢˜ä¸€ï¼šé€‰æ‹©æ’åºçš„-å›ºæ‰§-ç‰¹æ€§">ğŸ§© æ€è€ƒé¢˜ä¸€ï¼šé€‰æ‹©æ’åºçš„&quot;å›ºæ‰§&quot;ç‰¹æ€§</h2><h3 id="â“-é—®é¢˜">â“ é—®é¢˜</h3><p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©æ’åºå³ä½¿æ•°ç»„å·²æ’åºä¹Ÿä¸ä¼šæå‰ç»ˆæ­¢ï¼Ÿ</strong></p><h3 id="ğŸ’¡-è¯¦è§£">ğŸ’¡ è¯¦è§£</h3><p>é€‰æ‹©æ’åºçš„æ ¸å¿ƒé€»è¾‘å†³å®šäº†å®ƒçš„&quot;å›ºæ‰§&quot;ç‰¹æ€§ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">selectionSort</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> </span>&#123;<br>    <span class="hljs-type">size_t</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; ++i) &#123;<br>        <span class="hljs-type">size_t</span> minIndex = i;  <span class="hljs-comment">// æ€»æ˜¯å‡è®¾å½“å‰æ˜¯æœ€å°å€¼</span><br>        <br>        <span class="hljs-comment">// ğŸ” è¿™ä¸ªå¾ªç¯æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œå®Œ</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> j = i + <span class="hljs-number">1</span>; j &lt; n; ++j) &#123;<br>            <span class="hljs-keyword">if</span> (arr[j] &lt; arr[minIndex])<br>                minIndex = j;<br>        &#125;<br>        <br>        <span class="hljs-keyword">if</span> (minIndex != i)<br>            std::<span class="hljs-built_in">swap</span>(arr[i], arr[minIndex]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ ¹æœ¬åŸå› åˆ†æï¼š</strong></p><ol><li><p><strong>ç¼ºä¹æå‰ç»ˆæ­¢æœºåˆ¶</strong>ï¼š</p><ul><li>å†…å±‚å¾ªç¯æ€»æ˜¯éå†ä» <code>i+1</code> åˆ° <code>n-1</code> çš„æ‰€æœ‰å…ƒç´ </li><li>å³ä½¿æ•°ç»„å·²æœ‰åºï¼Œä¹Ÿè¦&quot;ç¡®è®¤&quot;å½“å‰å…ƒç´ ç¡®å®æ˜¯æœ€å°çš„</li></ul></li><li><p><strong>æ¯”è¾ƒæ¬¡æ•°çš„å›ºå®šæ€§</strong>ï¼š</p><ul><li>æ¯”è¾ƒæ¬¡æ•° = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n(n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ï¼ˆä¸è¾“å…¥æ•°æ®æ— å…³ï¼‰</li><li>è¿™æ˜¯é€‰æ‹©æ’åºçš„<strong>è®¾è®¡ç‰¹æ€§</strong>ï¼Œä¹Ÿæ˜¯å®ƒçš„<strong>æ€§èƒ½ç¼ºé™·</strong></li></ul></li><li><p><strong>ä¸æ’å…¥æ’åºçš„å¯¹æ¯”</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// æ’å…¥æ’åºåœ¨æœ‰åºæ—¶å¯ä»¥æå‰ç»“æŸå†…å±‚å¾ªç¯</span><br><span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; arr[j] &gt; key) &#123;  <span class="hljs-comment">// æ¡ä»¶ä¸æ»¡è¶³å°±æå‰é€€å‡º</span><br>    arr[j + <span class="hljs-number">1</span>] = arr[j];<br>    --j;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="ğŸ“Š-æ€§èƒ½å½±å“">ğŸ“Š æ€§èƒ½å½±å“</h3><table><thead><tr><th>åœºæ™¯</th><th>é€‰æ‹©æ’åºæ¯”è¾ƒæ¬¡æ•°</th><th>æ’å…¥æ’åºæ¯”è¾ƒæ¬¡æ•°</th></tr></thead><tbody><tr><td>å®Œå…¨æœ‰åº</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n(n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></td></tr><tr><td>å®Œå…¨é€†åº</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n(n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n(n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td></tr><tr><td>éšæœºæ•°æ®</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n(n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mfrac><msup><mi>n</mi><mn>2</mn></msup><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">\approx \frac{n^2}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3629em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0179em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td></tr></tbody></table><p><strong>ç»“è®º</strong>ï¼šé€‰æ‹©æ’åºçš„&quot;ç›²ç›®æ¯”è¾ƒ&quot;ä½¿å…¶åœ¨æœ€å¥½æƒ…å†µä¸‹ä¹Ÿæ— æ³•ä¼˜åŒ–ã€‚</p><hr><h2 id="ğŸ”-æ€è€ƒé¢˜äºŒï¼šäºŒåˆ†æ’å…¥æ’åºçš„å¤æ‚åº¦åˆ†æ">ğŸ” æ€è€ƒé¢˜äºŒï¼šäºŒåˆ†æ’å…¥æ’åºçš„å¤æ‚åº¦åˆ†æ</h2><h3 id="â“-é—®é¢˜-2">â“ é—®é¢˜</h3><p><strong>å¦‚æœæˆ‘ä»¬ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾å¯»æ‰¾æ’å…¥ä½ç½®ï¼Œæ’å…¥æ’åºçš„å¤æ‚åº¦èƒ½å¦å˜æˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Ÿ</strong></p><h3 id="ğŸ’¡-è¯¦è§£-2">ğŸ’¡ è¯¦è§£</h3><p><strong>ç®€çŸ­ç­”æ¡ˆ</strong>ï¼šâŒ ä¸èƒ½</p><p><strong>è¯¦ç»†åˆ†æ</strong>ï¼š</p><p>è®©æˆ‘ä»¬å…ˆçœ‹ä¼˜åŒ–åçš„äºŒåˆ†æ’å…¥æ’åºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">binaryInsertionSort</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> </span>&#123;<br>    <span class="hljs-type">size_t</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">1</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-type">int</span> key = arr[i];<br>        <br>        <span class="hljs-comment">// ğŸ¯ ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°æ’å…¥ä½ç½® - O(log i)</span><br>        <span class="hljs-type">int</span> left = <span class="hljs-number">0</span>, right = i;<br>        <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>            <span class="hljs-type">int</span> mid = left + (right - left) / <span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">if</span> (key &lt; arr[mid]) &#123;<br>                right = mid;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                left = mid + <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <br>        <span class="hljs-comment">// ğŸš¨ é—®é¢˜åœ¨è¿™é‡Œï¼šç§»åŠ¨å…ƒç´ ä»ç„¶æ˜¯ O(i)</span><br>        <span class="hljs-type">int</span> j = i;<br>        <span class="hljs-keyword">while</span> (j &gt; left) &#123;<br>            arr[j] = arr[j - <span class="hljs-number">1</span>];<br>            --j;<br>        &#125;<br>        arr[left] = key;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="â±ï¸-æ—¶é—´å¤æ‚åº¦åˆ†è§£">â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†è§£</h3><table><thead><tr><th>æ“ä½œ</th><th>æ¯æ¬¡è¿­ä»£æˆæœ¬</th><th>æ€»æˆæœ¬</th></tr></thead><tbody><tr><td>äºŒåˆ†æŸ¥æ‰¾ä½ç½®</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>â¡</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mi>log</mi><mo>â¡</mo><mi>i</mi><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{n-1} \log i = O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2537em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td></tr><tr><td>ç§»åŠ¨å…ƒç´ </td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mi>i</mi><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{n-1} i = O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2537em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td></tr></tbody></table><p><strong>æ•°å­¦æ¨å¯¼</strong>ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></munderover><munder><munder><mrow><mi>log</mi><mo>â¡</mo><mi>i</mi></mrow><mo stretchy="true">âŸ</mo></munder><mtext>äºŒåˆ†æŸ¥æ‰¾</mtext></munder><mo>+</mo><munder><munder><mi>i</mi><mo stretchy="true">âŸ</mo></munder><mtext>å…ƒç´ ç§»åŠ¨</mtext></munder></mrow><annotation encoding="application/x-tex">T(n) = \sum_{i=1}^{n-1} \underbrace{\log i}_{\text{äºŒåˆ†æŸ¥æ‰¾}} + \underbrace{i}_{\text{å…ƒç´ ç§»åŠ¨}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.3219em;vertical-align:-1.5208em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-1.4792em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">äºŒåˆ†æŸ¥æ‰¾</span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span class="svg-align" style="top:-2.1576em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8424em;"><span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5208em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.9859em;vertical-align:-1.3263em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6595em;"><span style="top:-1.6737em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">å…ƒç´ ç§»åŠ¨</span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6595em;"><span class="svg-align" style="top:-2.352em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em;"><span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.3263em;"><span></span></span></span></span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo><mo>+</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) = O(n \log n) + O(n^2) = O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><h3 id="ğŸ“ˆ-å®é™…æ€§èƒ½æ”¹å–„">ğŸ“ˆ å®é™…æ€§èƒ½æ”¹å–„</h3><p>è™½ç„¶æ¸è¿›å¤æ‚åº¦ä»æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œä½†å®é™…æ€§èƒ½æœ‰æå‡ï¼š</p><ul><li><strong>æ¯”è¾ƒæ¬¡æ•°</strong>ï¼šä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> é™åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></li><li><strong>ç§»åŠ¨æ¬¡æ•°</strong>ï¼šä¿æŒä¸å˜ï¼Œä»æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå½“æ¯”è¾ƒæ“ä½œä»£ä»·è¿œå¤§äºç§»åŠ¨æ“ä½œæ—¶æ•ˆæœæ˜æ˜¾</li></ul><p><strong>å®é™…æµ‹è¯•æ•°æ®</strong>ï¼ˆn=10000ï¼‰ï¼š</p><table><thead><tr><th>ç®—æ³•</th><th>æ¯”è¾ƒæ¬¡æ•°</th><th>ç§»åŠ¨æ¬¡æ•°</th><th>æ€»æ—¶é—´</th></tr></thead><tbody><tr><td>æ ‡å‡†æ’å…¥æ’åº</td><td>~2500ä¸‡</td><td>~2500ä¸‡</td><td>100ms</td></tr><tr><td>äºŒåˆ†æ’å…¥æ’åº</td><td>~13ä¸‡</td><td>~2500ä¸‡</td><td>80ms</td></tr></tbody></table><hr><h2 id="ğŸ”§-æ€è€ƒé¢˜ä¸‰ï¼šæ³›å‹æ’å…¥æ’åºå®ç°">ğŸ”§ æ€è€ƒé¢˜ä¸‰ï¼šæ³›å‹æ’å…¥æ’åºå®ç°</h2><h3 id="â“-é—®é¢˜-3">â“ é—®é¢˜</h3><p><strong>è¯·å®ç°ä¸€ä¸ªæ³›å‹æ¨¡æ¿ç‰ˆçš„ <code>insertionSort&lt;T&gt;</code>ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</strong></p><h3 id="ğŸ’»-å®Œæ•´å®ç°">ğŸ’» å®Œæ•´å®ç°</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span>  <span class="hljs-comment">// ç”¨äº std::function</span></span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ğŸ¯ æ³›å‹æ’å…¥æ’åºæ¨¡æ¿</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * @tparam T å…ƒç´ ç±»å‹</span><br><span class="hljs-comment"> * @param arr å¾…æ’åºæ•°ç»„</span><br><span class="hljs-comment"> * @param compare æ¯”è¾ƒå‡½æ•°ï¼Œé»˜è®¤ä¸ºå‡åº</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insertionSort</span><span class="hljs-params">(std::vector&lt;T&gt;&amp; arr, </span></span><br><span class="hljs-params"><span class="hljs-function">                   std::function&lt;<span class="hljs-type">bool</span>(<span class="hljs-type">const</span> T&amp;, <span class="hljs-type">const</span> T&amp;)&gt; compare = <span class="hljs-literal">nullptr</span>)</span> </span>&#123;<br>    <br>    <span class="hljs-comment">// è®¾ç½®é»˜è®¤æ¯”è¾ƒå‡½æ•°ï¼ˆå‡åºï¼‰</span><br>    <span class="hljs-keyword">if</span> (!compare) &#123;<br>        compare = [](<span class="hljs-type">const</span> T&amp; a, <span class="hljs-type">const</span> T&amp; b) &#123; <span class="hljs-keyword">return</span> a &lt; b; &#125;;<br>    &#125;<br>    <br>    <span class="hljs-type">size_t</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">1</span>; i &lt; n; ++i) &#123;<br>        T key = arr[i];<br>        <span class="hljs-type">int</span> j = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(i) - <span class="hljs-number">1</span>;<br>        <br>        <span class="hljs-comment">// ä½¿ç”¨ä¼ å…¥çš„æ¯”è¾ƒå‡½æ•°</span><br>        <span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">compare</span>(key, arr[j])) &#123;<br>            arr[j + <span class="hljs-number">1</span>] = arr[j];<br>            --j;<br>        &#125;<br>        arr[j + <span class="hljs-number">1</span>] = key;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// ğŸ§ª æµ‹è¯•ç”¨ä¾‹</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// æµ‹è¯•1ï¼šæ•´å‹æ•°ç»„å‡åºæ’åº</span><br>    std::vector&lt;<span class="hljs-type">int</span>&gt; intArr = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>&#125;;<br>    <span class="hljs-built_in">insertionSort</span>(intArr);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æ•´å‹å‡åº: &quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : intArr) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>    <br>    <span class="hljs-comment">// æµ‹è¯•2ï¼šæ•´å‹æ•°ç»„é™åºæ’åº</span><br>    <span class="hljs-built_in">insertionSort</span>(intArr, [](<span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; a, <span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; b) &#123; <span class="hljs-keyword">return</span> a &gt; b; &#125;);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æ•´å‹é™åº: &quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : intArr) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>    <br>    <span class="hljs-comment">// æµ‹è¯•3ï¼šå­—ç¬¦ä¸²æ•°ç»„æŒ‰é•¿åº¦æ’åº</span><br>    std::vector&lt;std::string&gt; strArr = &#123;<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;hi&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;orange&quot;</span>&#125;;<br>    <span class="hljs-built_in">insertionSort</span>(strArr, [](<span class="hljs-type">const</span> std::string&amp; a, <span class="hljs-type">const</span> std::string&amp; b) &#123;<br>        <span class="hljs-keyword">return</span> a.<span class="hljs-built_in">length</span>() &lt; b.<span class="hljs-built_in">length</span>();<br>    &#125;);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;å­—ç¬¦ä¸²æŒ‰é•¿åº¦: &quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; str : strArr) std::cout &lt;&lt; str &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>    <br>    <span class="hljs-comment">// æµ‹è¯•4ï¼šè‡ªå®šä¹‰ç»“æ„ä½“æ’åº</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>        std::string name;<br>        <span class="hljs-type">int</span> age;<br>        <span class="hljs-comment">// é‡è½½è¾“å‡ºè¿ç®—ç¬¦ä¾¿äºæ˜¾ç¤º</span><br>        <span class="hljs-keyword">friend</span> std::ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(std::ostream&amp; os, <span class="hljs-type">const</span> Person&amp; p) &#123;<br>            <span class="hljs-keyword">return</span> os &lt;&lt; p.name &lt;&lt; <span class="hljs-string">&quot;(&quot;</span> &lt;&lt; p.age &lt;&lt; <span class="hljs-string">&quot;)&quot;</span>;<br>        &#125;<br>    &#125;;<br>    <br>    std::vector&lt;Person&gt; people = &#123;&#123;<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">25</span>&#125;, &#123;<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">20</span>&#125;, &#123;<span class="hljs-string">&quot;Charlie&quot;</span>, <span class="hljs-number">30</span>&#125;&#125;;<br>    <br>    <span class="hljs-comment">// æŒ‰å¹´é¾„æ’åº</span><br>    <span class="hljs-built_in">insertionSort</span>(people, [](<span class="hljs-type">const</span> Person&amp; a, <span class="hljs-type">const</span> Person&amp; b) &#123;<br>        <span class="hljs-keyword">return</span> a.age &lt; b.age;<br>    &#125;);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æŒ‰å¹´é¾„æ’åº: &quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; p : people) std::cout &lt;&lt; p &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>    <br>    <span class="hljs-comment">// æŒ‰å§“åæ’åº</span><br>    <span class="hljs-built_in">insertionSort</span>(people, [](<span class="hljs-type">const</span> Person&amp; a, <span class="hljs-type">const</span> Person&amp; b) &#123;<br>        <span class="hljs-keyword">return</span> a.name &lt; b.name;<br>    &#125;);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æŒ‰å§“åæ’åº: &quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; p : people) std::cout &lt;&lt; p &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ğŸ¯-è¾“å‡ºç»“æœ">ğŸ¯ è¾“å‡ºç»“æœ</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">æ•´å‹å‡åº: <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <br>æ•´å‹é™åº: <span class="hljs-number">6</span> <span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span> <br>å­—ç¬¦ä¸²æŒ‰é•¿åº¦: <span class="hljs-selector-tag">a</span> hi apple banana orange <br>æŒ‰å¹´é¾„æ’åº: <span class="hljs-built_in">Bob</span>(<span class="hljs-number">20</span>) <span class="hljs-built_in">Alice</span>(<span class="hljs-number">25</span>) <span class="hljs-built_in">Charlie</span>(<span class="hljs-number">30</span>) <br>æŒ‰å§“åæ’åº: <span class="hljs-built_in">Alice</span>(<span class="hljs-number">25</span>) <span class="hljs-built_in">Bob</span>(<span class="hljs-number">20</span>) <span class="hljs-built_in">Charlie</span>(<span class="hljs-number">30</span>) <br></code></pre></td></tr></table></figure><h3 id="ğŸ”-ä»£ç äº®ç‚¹è§£æ">ğŸ” ä»£ç äº®ç‚¹è§£æ</h3><ol><li><p><strong>æ¨¡æ¿æ³›åŒ–</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insertionSort</span><span class="hljs-params">(std::vector&lt;T&gt;&amp; arr, ...)</span></span><br></code></pre></td></tr></table></figure><p>æ”¯æŒä»»æ„å¯æ¯”è¾ƒç±»å‹</p></li><li><p><strong>çµæ´»çš„æ¯”è¾ƒå‡½æ•°</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::function&lt;<span class="hljs-type">bool</span>(<span class="hljs-type">const</span> T&amp;, <span class="hljs-type">const</span> T&amp;)&gt; compare = <span class="hljs-literal">nullptr</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>std::function</code> æ”¯æŒ lambdaã€å‡½æ•°æŒ‡é’ˆã€å‡½æ•°å¯¹è±¡</p></li><li><p><strong>é»˜è®¤æ¯”è¾ƒè¡Œä¸º</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">if</span> (!compare) &#123;<br>    compare = [](<span class="hljs-type">const</span> T&amp; a, <span class="hljs-type">const</span> T&amp; b) &#123; <span class="hljs-keyword">return</span> a &lt; b; &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>æä¾›åˆç†çš„é»˜è®¤å€¼</p></li><li><p><strong>ç±»å‹å®‰å…¨</strong>ï¼š</p><ul><li>ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥</li><li>é¿å…è¿è¡Œæ—¶ç±»å‹é”™è¯¯</li></ul></li></ol><hr><h2 id="ğŸ“š-æ‰©å±•ç»ƒä¹ ">ğŸ“š æ‰©å±•ç»ƒä¹ </h2><h3 id="ğŸ§©-ç»ƒä¹ 1ï¼šé€‰æ‹©æ’åºçš„ä¼˜åŒ–ç‰ˆæœ¬">ğŸ§© ç»ƒä¹ 1ï¼šé€‰æ‹©æ’åºçš„ä¼˜åŒ–ç‰ˆæœ¬</h3><p>å°è¯•å®ç°ä¸€ä¸ªåœ¨æœ€å¥½æƒ…å†µä¸‹èƒ½æå‰ç»ˆæ­¢çš„é€‰æ‹©æ’åºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">optimizedSelectionSort</span><span class="hljs-params">(std::vector&lt;T&gt;&amp; arr)</span> </span>&#123;<br>    <span class="hljs-type">size_t</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-type">bool</span> sorted = <span class="hljs-literal">false</span>;<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span> &amp;&amp; !sorted; ++i) &#123;<br>        <span class="hljs-type">size_t</span> minIndex = i;<br>        sorted = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å‡è®¾å‰©ä½™éƒ¨åˆ†å·²æ’åº</span><br>        <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> j = i + <span class="hljs-number">1</span>; j &lt; n; ++j) &#123;<br>            <span class="hljs-keyword">if</span> (arr[j] &lt; arr[minIndex]) &#123;<br>                minIndex = j;<br>                sorted = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// å‘ç°æœ‰æ›´å°çš„ï¼Œè¯´æ˜æœªæ’åº</span><br>            &#125;<br>        &#125;<br>        <br>        <span class="hljs-keyword">if</span> (minIndex != i) &#123;<br>            std::<span class="hljs-built_in">swap</span>(arr[i], arr[minIndex]);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€è€ƒ</strong>ï¼šè¿™ç§ä¼˜åŒ–çœŸçš„æœ‰æ•ˆå—ï¼Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹èƒ½æå‰ç»ˆæ­¢ï¼Ÿ</p><h3 id="ğŸ§©-ç»ƒä¹ 2ï¼šæ’å…¥æ’åºçš„é€’å½’ç‰ˆæœ¬">ğŸ§© ç»ƒä¹ 2ï¼šæ’å…¥æ’åºçš„é€’å½’ç‰ˆæœ¬</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">recursiveInsertionSort</span><span class="hljs-params">(std::vector&lt;T&gt;&amp; arr, <span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-comment">// åŸºæœ¬æƒ…å†µï¼šå•ä¸ªå…ƒç´ è‡ªç„¶æœ‰åº</span><br>    <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;<br>    <br>    <span class="hljs-comment">// å…ˆå¯¹å‰ n-1 ä¸ªå…ƒç´ æ’åº</span><br>    <span class="hljs-built_in">recursiveInsertionSort</span>(arr, n - <span class="hljs-number">1</span>);<br>    <br>    <span class="hljs-comment">// å°†ç¬¬ n ä¸ªå…ƒç´ æ’å…¥åˆ°æ­£ç¡®ä½ç½®</span><br>    T key = arr[n - <span class="hljs-number">1</span>];<br>    <span class="hljs-type">int</span> j = n - <span class="hljs-number">2</span>;<br>    <br>    <span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; arr[j] &gt; key) &#123;<br>        arr[j + <span class="hljs-number">1</span>] = arr[j];<br>        --j;<br>    &#125;<br>    arr[j + <span class="hljs-number">1</span>] = key;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ’-æ€»ç»“">ğŸ’ æ€»ç»“</h2><p>é€šè¿‡è¿™ä¸‰ä¸ªæ€è€ƒé¢˜ï¼Œæˆ‘ä»¬æ·±å…¥ç†è§£äº†ï¼š</p><ol><li><strong>ç®—æ³•è®¾è®¡çš„å“²å­¦å·®å¼‚</strong>ï¼šé€‰æ‹©æ’åºçš„&quot;ç¡®å®šæ€§&quot; vs æ’å…¥æ’åºçš„&quot;é€‚åº”æ€§&quot;</li><li><strong>å¤æ‚åº¦åˆ†æçš„ç²¾ç¡®æ€§</strong>ï¼šåŒºåˆ†æ¯”è¾ƒæ“ä½œå’Œç§»åŠ¨æ“ä½œçš„æˆæœ¬</li><li><strong>å·¥ç¨‹å®è·µçš„çµæ´»æ€§</strong>ï¼šæ³›å‹ç¼–ç¨‹è®©ç®—æ³•æ›´å…·é€šç”¨æ€§</li></ol><blockquote><p>ğŸ¯ â€œä¼˜ç§€çš„ç¨‹åºå‘˜ä¸ä»…çŸ¥é“å¦‚ä½•å®ç°ç®—æ³•ï¼Œæ›´ç†è§£ç®—æ³•èƒŒåçš„è®¾è®¡å–èˆå’Œä¼˜åŒ–è¾¹ç•Œã€‚â€</p></blockquote><p>è¿™äº›æ€è€ƒä¸ºåç»­å­¦ä¹ æ›´å¤æ‚çš„æ’åºç®—æ³•ï¼ˆå¦‚å¿«é€Ÿæ’åºã€å †æ’åºï¼‰å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸€å‘¨ä¸€ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> C++ </tag>
            
            <tag> è¯¦è§£ </tag>
            
            <tag> é€‰æ‹©æ’åº </tag>
            
            <tag> æ’å…¥æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ä¸€å‘¨ä¸€ç®—æ³•ã€‘ç¬¬äºŒå‘¨ï¼šé€‰æ‹©æ’åºä¸æ’å…¥æ’åº</title>
      <link href="/2025/10/21/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%BA%8C%E5%91%A8%EF%BC%9A%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E4%B8%8E%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/"/>
      <url>/2025/10/21/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%BA%8C%E5%91%A8%EF%BC%9A%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E4%B8%8E%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h1>ğŸ§® ä¸€å‘¨ä¸€ä¸ªç®—æ³• Â· ç¬¬ 2 å‘¨</h1><h2 id="é€‰æ‹©æ’åºä¸æ’å…¥æ’åº-â€”â€”-ä»â€œæŒ‘é€‰â€ä¸â€œæ’å…¥â€çœ‹æ’åºçš„ä¸¤ç§å“²å­¦"><strong>é€‰æ‹©æ’åºä¸æ’å…¥æ’åº â€”â€” ä»â€œæŒ‘é€‰â€ä¸â€œæ’å…¥â€çœ‹æ’åºçš„ä¸¤ç§å“²å­¦</strong></h2><blockquote><p>â€œå†’æ³¡æ’åºé äº¤æ¢ç›¸é‚»å…ƒç´ é€æ­¥æ¨è¿›ï¼Œ<br>é€‰æ‹©æ’åºé æŒ‘é€‰æœ€å€¼ä¸€æ­¥åˆ°ä½ï¼Œ<br>æ’å…¥æ’åºé ä¸æ–­è°ƒæ•´æ’å…¥ä½ç½®ï¼Œ<br>â€”â€” ä¸‰è€…åˆç§°ï¼šæ’åºç®—æ³•çš„ä¸‰å‰‘å®¢ã€‚â€</p></blockquote><hr><h2 id="ğŸ§­-ä¸€ã€å¼•è¨€ï¼šä¸ºä»€ä¹ˆè¿˜è¦ç ”ç©¶-O-n-2-ç®—æ³•ï¼Ÿ">ğŸ§­ ä¸€ã€å¼•è¨€ï¼šä¸ºä»€ä¹ˆè¿˜è¦ç ”ç©¶ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ç®—æ³•ï¼Ÿ</h2><p>å¾ˆå¤šäººè§‰å¾—è¿™äº›ç®—æ³•â€œå¤ªç®€å•â€æˆ–â€œå¤ªæ…¢â€ï¼Œä½†å®é™…ä¸Šâ€”â€”<br>å®ƒä»¬æ˜¯<strong>åç»­æ‰€æœ‰æ’åºç®—æ³•çš„æ ¸å¿ƒé›å½¢</strong>ï¼š</p><table><thead><tr><th>ç®—æ³•</th><th>å¯å‘æ€æƒ³</th><th>åç»§ç®—æ³•</th></tr></thead><tbody><tr><td><strong>å†’æ³¡æ’åº</strong></td><td>ç›¸é‚»äº¤æ¢</td><td>å¿«é€Ÿæ’åºï¼ˆåŸºäºäº¤æ¢ï¼‰</td></tr><tr><td><strong>é€‰æ‹©æ’åº</strong></td><td>æ‰¾æœ€å°å…ƒç´ </td><td>å †æ’åºï¼ˆåŸºäºé€‰æ‹©ï¼‰</td></tr><tr><td><strong>æ’å…¥æ’åº</strong></td><td>æœ‰åºæ’å…¥</td><td>å¸Œå°”æ’åº / äºŒåˆ†æ’å…¥æ’åº</td></tr></tbody></table><p>å­¦ä¹ è¿™ä¸‰ç§ç®—æ³• = ææ‡‚æ‰€æœ‰å¤æ‚æ’åºçš„â€œåŸå‹é€»è¾‘â€ã€‚</p><hr><h2 id="ğŸ§©-äºŒã€é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰">ğŸ§© äºŒã€é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰</h2><h3 id="ğŸ§ -æ ¸å¿ƒæ€æƒ³">ğŸ§  æ ¸å¿ƒæ€æƒ³</h3><blockquote><p>æ¯ä¸€è¶Ÿä»æœªæ’åºéƒ¨åˆ†ä¸­â€œé€‰å‡ºæœ€å°å€¼â€ï¼Œæ”¾åˆ°å‰é¢ã€‚</p></blockquote><p>å½¢è±¡ç±»æ¯”ï¼š<br>åƒæ¯æ¬¡åœ¨ä¹±åºçš„å¡ç‰‡ä¸­æŒ‘å‡ºæœ€å°çš„ä¸€å¼ ï¼Œæ”¾åˆ°æœ‰åºåŒºæœ«å°¾ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">åˆå§‹: <span class="hljs-string">[29, 10, 14, 37, 13]</span><br>ç¬¬<span class="hljs-number">1</span>è½®: é€‰å‡º<span class="hljs-number">10</span> -&gt; <span class="hljs-string">[10, 29, 14, 37, 13]</span><br>ç¬¬<span class="hljs-number">2</span>è½®: é€‰å‡º<span class="hljs-number">13</span> -&gt; <span class="hljs-string">[10, 13, 14, 37, 29]</span><br>ç¬¬<span class="hljs-number">3</span>è½®: é€‰å‡º<span class="hljs-number">14</span> -&gt; <span class="hljs-string">[10, 13, 14, 37, 29]</span><br>ç¬¬<span class="hljs-number">4</span>è½®: é€‰å‡º<span class="hljs-number">29</span> -&gt; <span class="hljs-string">[10, 13, 14, 29, 37]</span><br></code></pre></td></tr></table></figure><hr><h3 id="âš™ï¸-ä¼ªä»£ç ">âš™ï¸ ä¼ªä»£ç </h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">procedure SelectionSort(A[0..n-1]):<br>    for i from 0 to n-2:<br>        minIndex â† i<br>        for j from i+1 to n-1:<br>            if A[j] &lt; A[minIndex]:<br>                minIndex â† j<br>        swap(A[i], A[minIndex])<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ’»-C-å®ç°">ğŸ’» C++ å®ç°</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;utility&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">selectionSort</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> </span>&#123;<br>    <span class="hljs-type">size_t</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; ++i) &#123;<br>        <span class="hljs-type">size_t</span> minIndex = i;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> j = i + <span class="hljs-number">1</span>; j &lt; n; ++j) &#123;<br>            <span class="hljs-keyword">if</span> (arr[j] &lt; arr[minIndex])<br>                minIndex = j;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (minIndex != i)<br>            std::<span class="hljs-built_in">swap</span>(arr[i], arr[minIndex]);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; arr = &#123;<span class="hljs-number">29</span>, <span class="hljs-number">10</span>, <span class="hljs-number">14</span>, <span class="hljs-number">37</span>, <span class="hljs-number">13</span>&#125;;<br>    <span class="hljs-built_in">selectionSort</span>(arr);<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æ’åºç»“æœï¼š&quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tap">æ’åºç»“æœï¼š10<span class="hljs-number"> 13 </span>14<span class="hljs-number"> 29 </span>37<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ“ˆ-æ—¶é—´å¤æ‚åº¦åˆ†æ">ğŸ“ˆ æ—¶é—´å¤æ‚åº¦åˆ†æ</h3><ul><li>æ¯”è¾ƒæ¬¡æ•°ï¼šå›ºå®š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mo>â‹¯</mo><mo>+</mo><mn>1</mn><mo>=</mo><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">((n-1) + (n-2) + \dots + 1 = \frac{n(n-1)}{2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">((</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></li><li>äº¤æ¢æ¬¡æ•°ï¼š<strong>æœ€å¤š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> æ¬¡</strong></li><li>æ—¶é—´å¤æ‚åº¦ï¼š<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) = O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p></li><li>ç©ºé—´å¤æ‚åº¦ï¼š<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(n) = O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></p></li><li><strong>ç¨³å®šæ€§</strong>ï¼šâŒ ä¸ç¨³å®šï¼ˆåŒå€¼å…ƒç´ å¯èƒ½è¢«äº¤æ¢é¡ºåºæ‰“ä¹±ï¼‰</li></ul><hr><h3 id="âœ³ï¸-æ•°å­¦è§†è§’ï¼šäº¤æ¢æ¬¡æ•°ä¹‹å°‘">âœ³ï¸ æ•°å­¦è§†è§’ï¼šäº¤æ¢æ¬¡æ•°ä¹‹å°‘</h3><p>é€‰æ‹©æ’åºäº¤æ¢æ¬¡æ•°æœ€å°‘ï¼š</p><ul><li>æ¯æ¬¡åªåœ¨ç¡®å®šä½ç½®åäº¤æ¢ 1 æ¬¡ï¼›</li><li>æ€»äº¤æ¢æ¬¡æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰¤</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\leq n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ï¼›</li></ul><p>ç›¸æ¯”å†’æ³¡æ’åºå¯èƒ½äº¤æ¢ä¸Šåƒæ¬¡ï¼Œé€‰æ‹©æ’åºâ€œèŠ‚çœäº†æ‰‹è‡‚åŠ¨ä½œâ€ğŸ˜„ã€‚</p><hr><h2 id="ğŸ”¸-ä¸‰ã€æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰">ğŸ”¸ ä¸‰ã€æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰</h2><h3 id="ğŸ§ -æ ¸å¿ƒæ€æƒ³-2">ğŸ§  æ ¸å¿ƒæ€æƒ³</h3><blockquote><p>æ„å»ºä¸€ä¸ªâ€œæœ‰åºåŒºâ€ï¼Œæ¯æ¬¡æŠŠæ–°çš„å…ƒç´ æ’å…¥åˆ°åˆé€‚ä½ç½®ã€‚</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">åˆå§‹: <span class="hljs-string">[5, 2, 4, 6, 1, 3]</span><br>ç¬¬<span class="hljs-number">1</span>è½®: <span class="hljs-string">[2, 5, 4, 6, 1, 3]</span><br>ç¬¬<span class="hljs-number">2</span>è½®: <span class="hljs-string">[2, 4, 5, 6, 1, 3]</span><br>ç¬¬<span class="hljs-number">3</span>è½®: <span class="hljs-string">[2, 4, 5, 6, 1, 3]</span><br>ç¬¬<span class="hljs-number">4</span>è½®: <span class="hljs-string">[1, 2, 4, 5, 6, 3]</span><br>ç¬¬<span class="hljs-number">5</span>è½®: <span class="hljs-string">[1, 2, 3, 4, 5, 6]</span><br></code></pre></td></tr></table></figure><p>å°±åƒä½ æ‰“æ‰‘å…‹ç‰Œæ—¶ï¼Œæ‹¿åˆ°æ–°ç‰Œåæ’åˆ°æ­£ç¡®çš„ä½ç½®ã€‚</p><hr><h3 id="âš™ï¸-ä¼ªä»£ç -2">âš™ï¸ ä¼ªä»£ç </h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">procedure InsertionSort(A[0..n-1]):<br>    for i from 1 to n-1:<br>        key â† A[i]<br>        j â† i - 1<br>        while j â‰¥ 0 and A[j] &gt; key:<br>            A[j + 1] â† A[j]<br>            j â† j - 1<br>        A[j + 1] â† key<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ’»-C-å®ç°-2">ğŸ’» C++ å®ç°</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insertionSort</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> </span>&#123;<br>    <span class="hljs-type">size_t</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">1</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-type">int</span> key = arr[i];<br>        <span class="hljs-type">int</span> j = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(i) - <span class="hljs-number">1</span>;<br><br>        <span class="hljs-comment">// å‘å³ç§»åŠ¨æ¯” key å¤§çš„å…ƒç´ </span><br>        <span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; arr[j] &gt; key) &#123;<br>            arr[j + <span class="hljs-number">1</span>] = arr[j];<br>            --j;<br>        &#125;<br>        arr[j + <span class="hljs-number">1</span>] = key;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; arr = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>&#125;;<br>    <span class="hljs-built_in">insertionSort</span>(arr);<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æ’åºç»“æœï¼š&quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tap">æ’åºç»“æœï¼š1<span class="hljs-number"> 2 </span>3<span class="hljs-number"> 4 </span>5 6<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ“ˆ-æ—¶é—´å¤æ‚åº¦åˆ†æ-2">ğŸ“ˆ æ—¶é—´å¤æ‚åº¦åˆ†æ</h2><table><thead><tr><th>æƒ…å†µ</th><th>æ¯”è¾ƒæ¬¡æ•°</th><th>æ—¶é—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>æœ€å¥½ï¼ˆå·²æ’åºï¼‰</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td></tr><tr><td>å¹³å‡</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>n</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>4</mn></mrow><annotation encoding="application/x-tex">n^2/4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/4</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td></tr><tr><td>æœ€åï¼ˆé€†åºï¼‰</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>n</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">n^2/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/2</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td></tr></tbody></table><p>ç©ºé—´å¤æ‚åº¦ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(n) = O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></p><p>ç¨³å®šæ€§ï¼š<br>âœ… <strong>ç¨³å®š</strong>ï¼ˆç›¸ç­‰å…ƒç´ ä¸ä¼šè¢«äº¤æ¢é¡ºåºï¼‰</p><hr><h2 id="ğŸ”¢-æ•°å­¦æ¨å¯¼ï¼šå¹³å‡å¤æ‚åº¦ä¸ºä½•æ˜¯-O-n-2-4-ï¼Ÿ">ğŸ”¢ æ•°å­¦æ¨å¯¼ï¼šå¹³å‡å¤æ‚åº¦ä¸ºä½•æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>4</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2/4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/4</span><span class="mclose">)</span></span></span></span>ï¼Ÿ</h2><p>å¹³å‡æƒ…å†µä¸‹ï¼Œæ’å…¥æ—¶ä¸€åŠçš„å…ƒç´ éœ€è¦ç§»åŠ¨ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mfrac><mi>i</mi><mn>2</mn></mfrac><mo>=</mo><mfrac><msup><mi>n</mi><mn>2</mn></msup><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{n} \sum_{i=1}^{n} \frac{i}{2} = \frac{n^2}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3365em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1771em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>æ‰€ä»¥ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>â‰ˆ</mo><mfrac><mn>1</mn><mn>4</mn></mfrac><msup><mi>n</mi><mn>2</mn></msup><mo>â‡’</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) \approx \frac{1}{4} n^2 \Rightarrow O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‡’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>è¿™è¯´æ˜æ’å…¥æ’åºåœ¨<strong>éƒ¨åˆ†æœ‰åº</strong>çš„æ•°ç»„ä¸­æ•ˆç‡éå¸¸é«˜ã€‚</p><hr><h2 id="ğŸ”-å››ã€ä¸¤è€…å¯¹æ¯”æ€»ç»“">ğŸ” å››ã€ä¸¤è€…å¯¹æ¯”æ€»ç»“</h2><table><thead><tr><th>ç‰¹æ€§</th><th>é€‰æ‹©æ’åº</th><th>æ’å…¥æ’åº</th></tr></thead><tbody><tr><td>æ€æƒ³</td><td>æ¯æ¬¡æŒ‘æœ€å°</td><td>æ¯æ¬¡æ’å…¥æ–°å…ƒç´ </td></tr><tr><td>æ¯”è¾ƒæ¬¡æ•°</td><td>å›ºå®š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td>å¹³å‡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mn>4</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2/4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/4</span><span class="mclose">)</span></span></span></span></td></tr><tr><td>äº¤æ¢æ¬¡æ•°</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰¤</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\leq n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></td><td>æœ€å <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ç§»åŠ¨</td></tr><tr><td>ç¨³å®šæ€§</td><td>âŒ ä¸ç¨³å®š</td><td>âœ… ç¨³å®š</td></tr><tr><td>æœ€å¥½æƒ…å†µ</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å°æ•°ç»„ï¼Œæ— åºåº¦é«˜</td><td>éƒ¨åˆ†æœ‰åºã€å°è§„æ¨¡</td></tr><tr><td>å·¥ç¨‹æ„ä¹‰</td><td>å¯å‘å †æ’åº</td><td>å¯å‘å¸Œå°”æ’åº</td></tr></tbody></table><hr><h2 id="ğŸ§ -äº”ã€æ€è€ƒé¢˜ä¸ç»ƒä¹ ">ğŸ§  äº”ã€æ€è€ƒé¢˜ä¸ç»ƒä¹ </h2><ol><li>ä¸ºä»€ä¹ˆé€‰æ‹©æ’åºå³ä½¿æ•°ç»„å·²æ’åºä¹Ÿä¸ä¼šæå‰ç»ˆæ­¢ï¼Ÿ</li><li>å¦‚æœæˆ‘ä»¬ä½¿ç”¨<strong>äºŒåˆ†æŸ¥æ‰¾</strong>å¯»æ‰¾æ’å…¥ä½ç½®ï¼Œæ’å…¥æ’åºçš„å¤æ‚åº¦èƒ½å¦å˜æˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Ÿï¼ˆæç¤ºï¼šç§»åŠ¨æ“ä½œä»ç„¶éœ€è¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼‰</li><li>è¯·å®ç°ä¸€ä¸ªæ³›å‹æ¨¡æ¿ç‰ˆçš„ <code>insertionSort&lt;T&gt;</code>ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ã€‚</li></ol><hr><h2 id="ğŸŒ±-å…­ã€å»¶ä¼¸é˜…è¯»">ğŸŒ± å…­ã€å»¶ä¼¸é˜…è¯»</h2><ul><li>ã€Šç®—æ³•å¯¼è®ºã€‹ç¬¬ 2 ç« ï¼šæ’å…¥æ’åºåˆ†æ</li><li>ã€ŠData Structures and Algorithms in C++ã€‹ï¼šæ’åºç­–ç•¥æ¯”è¾ƒ</li><li>LeetCode æ¨èï¼š<ul><li><a href="https://leetcode.com/problems/insertion-sort-list/">#147. Insertion Sort List</a></li><li><a href="https://leetcode.com/problems/sort-an-array/">#912. Sort an Array</a></li></ul></li></ul><hr><h2 id="âœ¨-ä¸ƒã€æ€»ç»“">âœ¨ ä¸ƒã€æ€»ç»“</h2><table><thead><tr><th>æŒ‡æ ‡</th><th>é€‰æ‹©æ’åº</th><th>æ’å…¥æ’åº</th></tr></thead><tbody><tr><td><strong>æ—¶é—´å¤æ‚åº¦</strong></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œæœ€å¥½ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td></tr><tr><td><strong>ç©ºé—´å¤æ‚åº¦</strong></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td></tr><tr><td><strong>ç¨³å®šæ€§</strong></td><td>å¦</td><td>æ˜¯</td></tr><tr><td><strong>é€‚ç”¨æ€§</strong></td><td>ç®€å•ã€å¯¹äº¤æ¢ä»£ä»·æ•æ„Ÿ</td><td>éƒ¨åˆ†æœ‰åºã€å°è§„æ¨¡åœºæ™¯</td></tr></tbody></table><blockquote><p>ğŸ§© â€œé€‰æ‹©æ’åºæ³¨é‡å†³ç­–ï¼Œæ’å…¥æ’åºæ³¨é‡é€‚åº”ã€‚<br>åœ¨ç®—æ³•çš„ä¸–ç•Œé‡Œï¼Œè¿™ä¸¤ç§æ€ç»´æ˜¯æœ€æ—©çš„æ™ºæ…§ç«èŠ±ã€‚â€</p></blockquote><hr><p>ğŸ”œ <strong>ä¸‹å‘¨é¢„å‘Š</strong></p><blockquote><p><strong>ç¬¬ 3 å‘¨ï¼šå½’å¹¶æ’åºï¼ˆMerge Sortï¼‰â€”â€”åˆ†æ²»æ€æƒ³çš„ç¬¬ä¸€æ¬¡ç™»åœº</strong><br>æˆ‘ä»¬å°†æ·±å…¥å‰–æé€’å½’ä¸åˆ†æ²»ç­–ç•¥ï¼Œç”¨æ•°å­¦æ–¹å¼ç†è§£ä¸ºä»€ä¹ˆâ€œåˆ†è€Œæ²»ä¹‹â€å¦‚æ­¤å¼ºå¤§ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ä¸€å‘¨ä¸€ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> C++ </tag>
            
            <tag> é€‰æ‹©æ’åº </tag>
            
            <tag> æ’å…¥æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ä¸€å‘¨ä¸€ç®—æ³•ã€‘ç¬¬ä¸€å‘¨ï¼šå†’æ³¡æ’åºæ€è€ƒä¸ç»ƒä¹ è¯¦è§£</title>
      <link href="/2025/10/18/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%B8%80%E5%91%A8%EF%BC%9A%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F%E6%80%9D%E8%80%83%E4%B8%8E%E7%BB%83%E4%B9%A0%E8%AF%A6%E8%A7%A3/"/>
      <url>/2025/10/18/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%B8%80%E5%91%A8%EF%BC%9A%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F%E6%80%9D%E8%80%83%E4%B8%8E%E7%BB%83%E4%B9%A0%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1>å†’æ³¡æ’åºæ€è€ƒä¸ç»ƒä¹ è¯¦è§£</h1><h2 id="ğŸ§ -æ€è€ƒé¢˜è§£ç­”">ğŸ§  æ€è€ƒé¢˜è§£ç­”</h2><h3 id="1-å¦‚æœè¦å¯¹-10000-ä¸ªå…ƒç´ æ’åºï¼Œå†’æ³¡æ’åºå¤§çº¦éœ€è¦æ¯”è¾ƒå¤šå°‘æ¬¡ï¼Ÿ">1. å¦‚æœè¦å¯¹ 10000 ä¸ªå…ƒç´ æ’åºï¼Œå†’æ³¡æ’åºå¤§çº¦éœ€è¦æ¯”è¾ƒå¤šå°‘æ¬¡ï¼Ÿ</h3><p><strong>è§£ç­”ï¼š</strong></p><p>æ ¹æ®å†’æ³¡æ’åºçš„æ•°å­¦åŸç†ï¼Œæœ€åæƒ…å†µä¸‹ï¼ˆå®Œå…¨é€†åºï¼‰çš„æ¯”è¾ƒæ¬¡æ•°ä¸ºï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mo>=</mo><mfrac><mrow><mn>10000</mn><mo>Ã—</mo><mn>9999</mn></mrow><mn>2</mn></mfrac><mo>=</mo><mn>49</mn><mo separator="true">,</mo><mn>995</mn><mo separator="true">,</mo><mn>000</mn><mtext>Â æ¬¡</mtext></mrow><annotation encoding="application/x-tex">\frac{n(n-1)}{2} = \frac{10000 \times 9999}{2} = 49,995,000 \text{ æ¬¡}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">10000</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">9999</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">49</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">995</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span><span class="mord text"><span class="mord">Â </span><span class="mord cjk_fallback">æ¬¡</span></span></span></span></span></span></p><p>è¿™å¤§çº¦æ˜¯ <strong>5000ä¸‡æ¬¡æ¯”è¾ƒ</strong>ï¼</p><p><strong>å®é™…æ¼”ç¤ºï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">10000</span>;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> comparisons = (<span class="hljs-type">long</span> <span class="hljs-type">long</span>)n * (n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;10000ä¸ªå…ƒç´ å†’æ³¡æ’åºæœ€å¤šéœ€è¦æ¯”è¾ƒ: &quot;</span> <br>              &lt;&lt; comparisons &lt;&lt; <span class="hljs-string">&quot; æ¬¡&quot;</span> &lt;&lt; std::endl;<br>    <br>    <span class="hljs-comment">// æ¢ç®—æˆæ›´ç›´è§‚çš„å•ä½</span><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;çº¦ç­‰äº: &quot;</span> &lt;&lt; comparisons / <span class="hljs-number">1000000</span> &lt;&lt; <span class="hljs-string">&quot; ç™¾ä¸‡æ¬¡æ¯”è¾ƒ&quot;</span> &lt;&lt; std::endl;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">10000ä¸ªå…ƒç´ å†’æ³¡æ’åºæœ€å¤šéœ€è¦æ¯”è¾ƒ: 49995000 æ¬¡</span><br><span class="hljs-section">çº¦ç­‰äº: 49 ç™¾ä¸‡æ¬¡æ¯”è¾ƒ</span><br></code></pre></td></tr></table></figure><p><strong>æ€§èƒ½åˆ†æï¼š</strong></p><ul><li>ç°ä»£CPUæ¯ç§’å¯æ‰§è¡Œçº¦10äº¿æ¬¡æ“ä½œ</li><li>å³ä½¿æ¯æ¬¡æ¯”è¾ƒ+äº¤æ¢åªéœ€10ä¸ªCPUå‘¨æœŸï¼Œä¹Ÿéœ€è¦çº¦0.5ç§’</li><li>å¯¹äºå¤§è§„æ¨¡æ•°æ®ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ç®—æ³•å˜å¾—ä¸å®ç”¨</li></ul><p><strong>å¯ç¤ºï¼š</strong> è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å­¦ä¹ æ›´é«˜æ•ˆçš„æ’åºç®—æ³•ï¼ˆå¦‚å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºï¼‰ï¼</p><hr><h3 id="2-è‹¥æ•°ç»„åˆå§‹çŠ¶æ€æ¥è¿‘æœ‰åºï¼Œå†’æ³¡æ’åºæ˜¯å¦ä»ç„¶é€‚åˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ">2. è‹¥æ•°ç»„åˆå§‹çŠ¶æ€æ¥è¿‘æœ‰åºï¼Œå†’æ³¡æ’åºæ˜¯å¦ä»ç„¶é€‚åˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3><p><strong>è§£ç­”ï¼š</strong></p><p><strong>æ˜¯çš„ï¼Œéå¸¸åˆé€‚ï¼</strong> è¿™æ˜¯å†’æ³¡æ’åºçš„ä¸€ä¸ª<strong>æ˜¾è‘—ä¼˜åŠ¿</strong>ã€‚</p><p><strong>åŸå› åˆ†æï¼š</strong></p><ol><li><p><strong>ä¼˜åŒ–æœºåˆ¶å‘æŒ¥ä½œç”¨</strong>ï¼š</p><ul><li>å½“æ•°ç»„æ¥è¿‘æœ‰åºæ—¶ï¼Œäº¤æ¢æ¬¡æ•°å¤§å¹…å‡å°‘</li><li>æå‰é€€å‡ºæœºåˆ¶ï¼ˆ<code>swapped</code>æ ‡å¿—ï¼‰ä¼šå¾ˆå¿«ç»ˆæ­¢æ’åº</li></ul></li><li><p><strong>æ—¶é—´å¤æ‚åº¦æ”¹å–„</strong>ï¼š</p><ul><li>æœ€å¥½æƒ…å†µï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼ˆä¸€è¶Ÿæ‰«æå³å®Œæˆï¼‰</li><li>æ¥è¿‘æœ‰åºæ—¶ï¼šæ¥è¿‘ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></li></ul></li></ol><p><strong>å®éªŒéªŒè¯ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubbleSort</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> </span>&#123;<br>    <span class="hljs-type">size_t</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-type">bool</span> swapped;<br>    <span class="hljs-type">int</span> comparisons = <span class="hljs-number">0</span>; <span class="hljs-comment">// è®°å½•æ¯”è¾ƒæ¬¡æ•°</span><br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; ++i) &#123;<br>        swapped = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> j = <span class="hljs-number">0</span>; j &lt; n - i - <span class="hljs-number">1</span>; ++j) &#123;<br>            comparisons++;<br>            <span class="hljs-keyword">if</span> (arr[j] &gt; arr[j + <span class="hljs-number">1</span>]) &#123;<br>                std::<span class="hljs-built_in">swap</span>(arr[j], arr[j + <span class="hljs-number">1</span>]);<br>                swapped = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (!swapped) <span class="hljs-keyword">break</span>;<br>    &#125;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;å®é™…æ¯”è¾ƒæ¬¡æ•°: &quot;</span> &lt;&lt; comparisons &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹1ï¼šå®Œå…¨æœ‰åº</span><br>    std::vector&lt;<span class="hljs-type">int</span>&gt; sorted = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>&#125;;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;å®Œå…¨æœ‰åºæ•°ç»„:&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-built_in">bubbleSort</span>(sorted);<br>    <br>    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹2ï¼šæ¥è¿‘æœ‰åºï¼ˆåªæœ‰ä¸€å¯¹å…ƒç´ ä¹±åºï¼‰</span><br>    std::vector&lt;<span class="hljs-type">int</span>&gt; nearlySorted = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>&#125;;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;\næ¥è¿‘æœ‰åºæ•°ç»„:&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-built_in">bubbleSort</span>(nearlySorted);<br>    <br>    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹3ï¼šå®Œå…¨ä¹±åº</span><br>    std::vector&lt;<span class="hljs-type">int</span>&gt; random = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>&#125;;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;\nå®Œå…¨ä¹±åºæ•°ç»„:&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-built_in">bubbleSort</span>(random);<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é¢„æœŸè¾“å‡ºï¼š</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">å®Œå…¨æœ‰åºæ•°ç»„:</span><br><span class="hljs-section">å®é™…æ¯”è¾ƒæ¬¡æ•°: 9</span><br><br><span class="hljs-section">æ¥è¿‘æœ‰åºæ•°ç»„:</span><br><span class="hljs-section">å®é™…æ¯”è¾ƒæ¬¡æ•°: 14</span><br><br><span class="hljs-section">å®Œå…¨ä¹±åºæ•°ç»„:</span><br><span class="hljs-section">å®é™…æ¯”è¾ƒæ¬¡æ•°: 45</span><br></code></pre></td></tr></table></figure><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å®æ—¶æ•°æ®æµä¸­å¶å°”å‡ºç°ä¹±åºçš„æƒ…å†µ</li><li>ç»´æŠ¤å‡ ä¹æœ‰åºçš„ç¼“å­˜æ•°æ®</li><li>å°è§„æ¨¡æ•°æ®é›†çš„å¢é‡æ›´æ–°</li></ul><hr><h3 id="3-é™åºæ’åˆ—çš„å†’æ³¡æ’åºå®ç°">3. é™åºæ’åˆ—çš„å†’æ³¡æ’åºå®ç°</h3><p><strong>è§£ç­”ï¼š</strong></p><p>åªéœ€è¦ä¿®æ”¹æ¯”è¾ƒæ¡ä»¶çš„æ–¹å‘å³å¯å®ç°é™åºæ’åˆ—ã€‚</p><p><strong>ä»£ç å®ç°ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;utility&gt;</span></span><br><br><span class="hljs-comment">// é™åºå†’æ³¡æ’åº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubbleSortDescending</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> </span>&#123;<br>    <span class="hljs-type">size_t</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-type">bool</span> swapped;<br>    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;é™åºæ’åºè¿‡ç¨‹:&quot;</span> &lt;&lt; std::endl;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;åˆå§‹æ•°ç»„: &quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; ++i) &#123;<br>        swapped = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> j = <span class="hljs-number">0</span>; j &lt; n - i - <span class="hljs-number">1</span>; ++j) &#123;<br>            <span class="hljs-comment">// å…³é”®ä¿®æ”¹ï¼šæ”¹å˜æ¯”è¾ƒæ–¹å‘</span><br>            <span class="hljs-keyword">if</span> (arr[j] &lt; arr[j + <span class="hljs-number">1</span>]) &#123;<br>                std::<span class="hljs-built_in">swap</span>(arr[j], arr[j + <span class="hljs-number">1</span>]);<br>                swapped = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <br>        <span class="hljs-comment">// æ‰“å°æ¯è½®ç»“æœ</span><br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ç¬¬&quot;</span> &lt;&lt; i + <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&quot;è½®: &quot;</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        std::cout &lt;&lt; std::endl;<br>        <br>        <span class="hljs-keyword">if</span> (!swapped) <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// é€šç”¨å†’æ³¡æ’åºå‡½æ•°ï¼Œæ”¯æŒå‡åºå’Œé™åº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubbleSort</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">bool</span> ascending = <span class="hljs-literal">true</span>)</span> </span>&#123;<br>    <span class="hljs-type">size_t</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-type">bool</span> swapped;<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; ++i) &#123;<br>        swapped = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> j = <span class="hljs-number">0</span>; j &lt; n - i - <span class="hljs-number">1</span>; ++j) &#123;<br>            <span class="hljs-comment">// æ ¹æ®å‚æ•°å†³å®šæ’åºæ–¹å‘</span><br>            <span class="hljs-type">bool</span> shouldSwap = ascending ? <br>                (arr[j] &gt; arr[j + <span class="hljs-number">1</span>]) : <br>                (arr[j] &lt; arr[j + <span class="hljs-number">1</span>]);<br>                <br>            <span class="hljs-keyword">if</span> (shouldSwap) &#123;<br>                std::<span class="hljs-built_in">swap</span>(arr[j], arr[j + <span class="hljs-number">1</span>]);<br>                swapped = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (!swapped) <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; arr = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>&#125;;<br>    <br>    <span class="hljs-comment">// æ–¹æ³•1ï¼šç›´æ¥ä½¿ç”¨é™åºç‰ˆæœ¬</span><br>    <span class="hljs-built_in">bubbleSortDescending</span>(arr);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;\næœ€ç»ˆé™åºç»“æœ: &quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>    <br>    <span class="hljs-comment">// æ–¹æ³•2ï¼šä½¿ç”¨é€šç”¨ç‰ˆæœ¬</span><br>    std::vector&lt;<span class="hljs-type">int</span>&gt; arr2 = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>&#125;;<br>    <span class="hljs-built_in">bubbleSort</span>(arr2, <span class="hljs-literal">false</span>); <span class="hljs-comment">// false è¡¨ç¤ºé™åº</span><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;é€šç”¨ç‰ˆæœ¬é™åºç»“æœ: &quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr2) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tap">é™åºæ’åºè¿‡ç¨‹:<br>åˆå§‹æ•°ç»„:<span class="hljs-number"> 5 </span>1<span class="hljs-number"> 4 </span>2<span class="hljs-number"> 8 </span><br>ç¬¬1è½®:<span class="hljs-number"> 5 </span>4<span class="hljs-number"> 2 </span>8<span class="hljs-number"> 1 </span><br>ç¬¬2è½®:<span class="hljs-number"> 5 </span>4<span class="hljs-number"> 8 </span>2<span class="hljs-number"> 1 </span><br>ç¬¬3è½®:<span class="hljs-number"> 5 </span>8<span class="hljs-number"> 4 </span>2<span class="hljs-number"> 1 </span><br>ç¬¬4è½®:<span class="hljs-number"> 8 </span>5<span class="hljs-number"> 4 </span>2<span class="hljs-number"> 1 </span><br><br>æœ€ç»ˆé™åºç»“æœ:<span class="hljs-number"> 8 </span>5<span class="hljs-number"> 4 </span>2<span class="hljs-number"> 1 </span><br>é€šç”¨ç‰ˆæœ¬é™åºç»“æœ:<span class="hljs-number"> 8 </span>5<span class="hljs-number"> 4 </span>2<span class="hljs-number"> 1 </span><br></code></pre></td></tr></table></figure><p><strong>å…³é”®ä¿®æ”¹ç‚¹ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// å‡åºï¼šå¯»æ‰¾è¾ƒå¤§çš„å…ƒç´ å¾€åå†’æ³¡</span><br><span class="hljs-keyword">if</span> (arr[j] &gt; arr[j + <span class="hljs-number">1</span>])<br><br><span class="hljs-comment">// é™åºï¼šå¯»æ‰¾è¾ƒå°çš„å…ƒç´ å¾€åå†’æ³¡  </span><br><span class="hljs-keyword">if</span> (arr[j] &lt; arr[j + <span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ’¡-æ‰©å±•æ€è€ƒ">ğŸ’¡ æ‰©å±•æ€è€ƒ</h2><h3 id="4-å†’æ³¡æ’åºåœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨">4. å†’æ³¡æ’åºåœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨</h3><p>è™½ç„¶å†’æ³¡æ’åºåœ¨å¤§æ•°æ®åœºæ™¯ä¸‹æ•ˆç‡ä¸é«˜ï¼Œä½†åœ¨ä»¥ä¸‹åœºæ™¯ä»æœ‰ä»·å€¼ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// åœºæ™¯1ï¼šå°å‹æ•°æ®é›†ï¼ˆ&lt; 50ä¸ªå…ƒç´ ï¼‰</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sortSmallDataset</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; smallData = &#123;<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>&#125;;<br>    <br>    <span class="hljs-comment">// å¯¹äºå°æ•°æ®ï¼Œä»£ç ç®€å•æ¯”å¾®ç§’çº§æ€§èƒ½æ›´é‡è¦</span><br>    <span class="hljs-built_in">bubbleSort</span>(smallData);<br>&#125;<br><br><span class="hljs-comment">// åœºæ™¯2ï¼šæ•™å­¦å’Œç®—æ³•æ¼”ç¤º</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">educationalExample</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; demo = &#123;<span class="hljs-number">64</span>, <span class="hljs-number">34</span>, <span class="hljs-number">25</span>, <span class="hljs-number">12</span>, <span class="hljs-number">22</span>, <span class="hljs-number">11</span>, <span class="hljs-number">90</span>&#125;;<br>    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;å†’æ³¡æ’åºæ•™å­¦æ¼”ç¤º:&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-built_in">bubbleSortWithVisualization</span>(demo);<br>&#125;<br><br><span class="hljs-comment">// åœºæ™¯3ï¼šå‡ ä¹æœ‰åºæ•°æ®çš„ç»´æŠ¤</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">maintainNearlySorted</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; nearlySorted = <span class="hljs-built_in">getNearlySortedData</span>();<br>    <br>    <span class="hljs-comment">// æ–°å¢å°‘é‡å…ƒç´ åé‡æ–°æ’åº</span><br>    nearlySorted.<span class="hljs-built_in">push_back</span>(newElement);<br>    <span class="hljs-built_in">bubbleSort</span>(nearlySorted); <span class="hljs-comment">// æ•ˆç‡æ¥è¿‘O(n)</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-æ€§èƒ½å¯¹æ¯”å®éªŒ">5. æ€§èƒ½å¯¹æ¯”å®éªŒ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">comparePerformance</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">data</span><span class="hljs-params">(<span class="hljs-number">1000</span>)</span></span>;<br>    <br>    <span class="hljs-comment">// ç”Ÿæˆæµ‹è¯•æ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; ++i) &#123;<br>        data[i] = <span class="hljs-built_in">rand</span>() % <span class="hljs-number">1000</span>;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¤åˆ¶æ•°æ®ç”¨äºä¸åŒç®—æ³•</span><br>    <span class="hljs-keyword">auto</span> data1 = data;<br>    <span class="hljs-keyword">auto</span> data2 = data;<br>    <br>    <span class="hljs-comment">// æµ‹è¯•å†’æ³¡æ’åº</span><br>    <span class="hljs-keyword">auto</span> start = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();<br>    <span class="hljs-built_in">bubbleSort</span>(data1);<br>    <span class="hljs-keyword">auto</span> end = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();<br>    <span class="hljs-keyword">auto</span> bubbleTime = std::chrono::<span class="hljs-built_in">duration_cast</span>&lt;std::chrono::microseconds&gt;(end - start);<br>    <br>    <span class="hljs-comment">// æµ‹è¯•STLæ’åº</span><br>    start = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();<br>    std::<span class="hljs-built_in">sort</span>(data<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), data<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>());<br>    end = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();<br>    <span class="hljs-keyword">auto</span> stlTime = std::chrono::<span class="hljs-built_in">duration_cast</span>&lt;std::chrono::microseconds&gt;(end - start);<br>    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æ€§èƒ½å¯¹æ¯” (1000ä¸ªå…ƒç´ ):&quot;</span> &lt;&lt; std::endl;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;å†’æ³¡æ’åº: &quot;</span> &lt;&lt; bubbleTime.<span class="hljs-built_in">count</span>() &lt;&lt; <span class="hljs-string">&quot; å¾®ç§’&quot;</span> &lt;&lt; std::endl;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;STLæ’åº: &quot;</span> &lt;&lt; stlTime.<span class="hljs-built_in">count</span>() &lt;&lt; <span class="hljs-string">&quot; å¾®ç§’&quot;</span> &lt;&lt; std::endl;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;é€Ÿåº¦å·®å¼‚: &quot;</span> &lt;&lt; (<span class="hljs-type">double</span>)bubbleTime.<span class="hljs-built_in">count</span>() / stlTime.<span class="hljs-built_in">count</span>() &lt;&lt; <span class="hljs-string">&quot; å€&quot;</span> &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ¯-æ€»ç»“">ğŸ¯ æ€»ç»“</h2><p>é€šè¿‡è¿™ä¸‰ä¸ªæ€è€ƒé¢˜çš„æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹é‡è¦è®¤çŸ¥ï¼š</p><ol><li><strong>å¤æ‚åº¦è®¤çŸ¥</strong>ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ç®—æ³•åœ¨å¤§è§„æ¨¡æ•°æ®ä¸‹æ€§èƒ½æ€¥å‰§ä¸‹é™</li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå†’æ³¡æ’åºåœ¨æ¥è¿‘æœ‰åºçš„å°æ•°æ®é›†ä¸­æœ‰ç‹¬ç‰¹ä¼˜åŠ¿</li><li><strong>ç®—æ³•çµæ´»æ€§</strong>ï¼šé€šè¿‡ç®€å•ä¿®æ”¹æ¯”è¾ƒé€»è¾‘å¯å®ç°ä¸åŒæ’åºéœ€æ±‚</li><li><strong>å·¥ç¨‹æ€ç»´</strong>ï¼šç†è§£ç®—æ³•ä¸ä»…è¦æ‡‚åŸç†ï¼Œæ›´è¦æ˜ç™½å®é™…åº”ç”¨åœºæ™¯</li></ol><p>å†’æ³¡æ’åºä½œä¸ºç®—æ³•å­¦ä¹ çš„&quot;Hello World&quot;ï¼Œæ•™ä¼šæˆ‘ä»¬çš„ä¸ä»…æ˜¯æ’åºæœ¬èº«ï¼Œæ›´æ˜¯<strong>ç®—æ³•æ€ç»´çš„èµ·ç‚¹</strong>â€”â€”å¦‚ä½•åˆ†æé—®é¢˜ã€ä¼˜åŒ–æ–¹æ¡ˆã€ç†è§£è¾¹ç•Œæ¡ä»¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸€å‘¨ä¸€ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> ç®—æ³•è§£ç­” </tag>
            
            <tag> å†’æ³¡ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ä¸€å‘¨ä¸€ç®—æ³•ã€‘ç¬¬ä¸€å‘¨ï¼šå†’æ³¡ç®—æ³•</title>
      <link href="/2025/10/18/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%B8%80%E5%91%A8%EF%BC%9A%E5%86%92%E6%B3%A1%E7%AE%97%E6%B3%95/"/>
      <url>/2025/10/18/%E3%80%90%E4%B8%80%E5%91%A8%E4%B8%80%E7%AE%97%E6%B3%95%E3%80%91%E7%AC%AC%E4%B8%80%E5%91%A8%EF%BC%9A%E5%86%92%E6%B3%A1%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1>ğŸ§® ä¸€å‘¨ä¸€ä¸ªç®—æ³• Â· ç¬¬ 1 å‘¨</h1><h2 id="å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰â€”â€”æœ€æ¸©æŸ”çš„æ’åºç®—æ³•"><strong>å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰â€”â€”æœ€æ¸©æŸ”çš„æ’åºç®—æ³•</strong></h2><blockquote><p>â€œç®—æ³•ä¸–ç•Œçš„ Hello Worldâ€â€”â€” ä»å†’æ³¡æ’åºå¼€å§‹ï¼Œç†è§£ç®—æ³•çš„æ ¸å¿ƒï¼š<strong>æœ‰åºåŒ–çš„æ€æƒ³ + å¤æ‚åº¦çš„åº¦é‡</strong></p></blockquote><hr><h2 id="ğŸ§­-ä¸€ã€ç®—æ³•å¼•å…¥ï¼šä»â€œæ°”æ³¡ä¸Šæµ®â€è¯´èµ·">ğŸ§­ ä¸€ã€ç®—æ³•å¼•å…¥ï¼šä»â€œæ°”æ³¡ä¸Šæµ®â€è¯´èµ·</h2><p>æƒ³è±¡ä½ æœ‰ä¸€åˆ—æ•°å­—ï¼Œå®ƒä»¬åƒä¸€ä¸²æ°”æ³¡ã€‚æ¯æ¬¡æ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªï¼Œå¦‚æœå‰ä¸€ä¸ªæ›´â€œå¤§â€ï¼Œé‚£å®ƒå°±â€œä¸Šæµ®â€åˆ°åé¢ã€‚ç»è¿‡ä¸€è½®æ¯”è¾ƒï¼Œæœ€å¤§çš„æ•°å°±ä¼šè¢«â€œå†’æ³¡â€åˆ°æœ€æœ«å°¾ã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±èƒ½è®©æ‰€æœ‰æ°”æ³¡ä¾æ¬¡æ’å¥½åºã€‚</p><p>å½¢è±¡åŒ–å›¾ç¤ºï¼ˆå‡åºæ’åˆ—ï¼‰ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">åˆå§‹: <span class="hljs-string">[5, 1, 4, 2, 8]</span><br>ç¬¬<span class="hljs-number">1</span>è½®: <span class="hljs-string">[1, 4, 2, 5, 8]</span>   (<span class="hljs-number">8</span> å†’åˆ°æœ€å³)<br>ç¬¬<span class="hljs-number">2</span>è½®: <span class="hljs-string">[1, 2, 4, 5, 8]</span><br>ç¬¬<span class="hljs-number">3</span>è½®: <span class="hljs-string">[1, 2, 4, 5, 8]</span>   (å·²æ’åº)<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ§©-äºŒã€ç®—æ³•æ€æƒ³æ€»ç»“">ğŸ§© äºŒã€ç®—æ³•æ€æƒ³æ€»ç»“</h2><p>æ ¸å¿ƒæ€æƒ³ï¼š<strong>ç›¸é‚»å…ƒç´ ä¸¤ä¸¤æ¯”è¾ƒï¼Œä¸ç¬¦åˆé¡ºåºåˆ™äº¤æ¢ï¼Œé‡å¤è¿™ä¸€è¿‡ç¨‹ç›´åˆ°å…¨éƒ¨æœ‰åºã€‚</strong></p><p>æµç¨‹é€»è¾‘ï¼š</p><ol><li>å¤–å±‚å¾ªç¯æ§åˆ¶â€œè¶Ÿæ•°â€ï¼›</li><li>å†…å±‚å¾ªç¯è¿›è¡Œç›¸é‚»å…ƒç´ æ¯”è¾ƒï¼›</li><li>æ¯æ¬¡å¤–å±‚ç»“æŸï¼Œæœ€å¤§å…ƒç´ ç¡®å®šï¼›</li><li>å¯é€šè¿‡æ ‡å¿—ä½æ£€æµ‹æ˜¯å¦æå‰æœ‰åºï¼ˆä¼˜åŒ–ç‰ˆï¼‰ã€‚</li></ol><hr><h2 id="âš™ï¸-ä¸‰ã€ç®—æ³•ä¼ªä»£ç ">âš™ï¸ ä¸‰ã€ç®—æ³•ä¼ªä»£ç </h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text">procedure BubbleSort(A[0..n-1]):<br>    for i from 0 to n-2:<br>        swapped â† false<br>        for j from 0 to n-2-i:<br>            if A[j] &gt; A[j+1]:<br>                swap(A[j], A[j+1])<br>                swapped â† true<br>        if not swapped:<br>            break  // æå‰ç»“æŸï¼Œæ•°ç»„å·²æ’åº<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ’»-å››ã€C-å®ç°ä»£ç ï¼ˆå«ä¼˜åŒ–ï¼‰">ğŸ’» å››ã€C++ å®ç°ä»£ç ï¼ˆå«ä¼˜åŒ–ï¼‰</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;utility&gt;</span> <span class="hljs-comment">// for std::swap</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubbleSort</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> </span>&#123;<br>    <span class="hljs-type">size_t</span> n = arr.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-type">bool</span> swapped;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; ++i) &#123;<br>        swapped = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> j = <span class="hljs-number">0</span>; j &lt; n - i - <span class="hljs-number">1</span>; ++j) &#123;<br>            <span class="hljs-keyword">if</span> (arr[j] &gt; arr[j + <span class="hljs-number">1</span>]) &#123;<br>                std::<span class="hljs-built_in">swap</span>(arr[j], arr[j + <span class="hljs-number">1</span>]);<br>                swapped = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// è‹¥ä¸€è¶Ÿä¸­æœªå‘ç”Ÿäº¤æ¢ï¼Œè¯´æ˜å·²æ’åºå®Œæˆ</span><br>        <span class="hljs-keyword">if</span> (!swapped)<br>            <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; arr = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>&#125;;<br><br>    <span class="hljs-built_in">bubbleSort</span>(arr);<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æ’åºç»“æœï¼š&quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    std::cout &lt;&lt; std::endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tap">æ’åºç»“æœï¼š1<span class="hljs-number"> 2 </span>4<span class="hljs-number"> 5 </span>8<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ“ˆ-äº”ã€å¤æ‚åº¦åˆ†æï¼ˆæ•°å­¦è§†è§’ï¼‰">ğŸ“ˆ äº”ã€å¤æ‚åº¦åˆ†æï¼ˆæ•°å­¦è§†è§’ï¼‰</h2><h3 id="1ï¸âƒ£-æ—¶é—´å¤æ‚åº¦">1ï¸âƒ£ æ—¶é—´å¤æ‚åº¦</h3><ul><li><p><strong>æœ€åæƒ…å†µ</strong>ï¼ˆå®Œå…¨é€†åºï¼‰ï¼š</p><ul><li><p>ç¬¬ 1 è½®æ¯”è¾ƒ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> æ¬¡</p></li><li><p>ç¬¬ 2 è½®æ¯”è¾ƒ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">n-2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> æ¬¡</p></li><li><p>â€¦</p></li><li><p>ç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(n-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> è½®æ¯”è¾ƒ 1 æ¬¡â‡’ æ€»æ¯”è¾ƒæ¬¡æ•°ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mo>â‹¯</mo><mo>+</mo><mn>1</mn><mo>=</mo><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">(n-1) + (n-2) + \cdots + 1 = \frac{n(n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>å› æ­¤ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) = O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p></li></ul></li><li><p><strong>æœ€å¥½æƒ…å†µ</strong>ï¼ˆæ•°ç»„å·²æ’åº + å¯ç”¨ä¼˜åŒ–ï¼‰ï¼š</p><ul><li><p>åªéœ€ä¸€è¶Ÿæ¯”è¾ƒï¼Œæœªå‘ç”Ÿäº¤æ¢</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) = O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></p></li></ul></li><li><p><strong>å¹³å‡æƒ…å†µ</strong>ï¼šå…ƒç´ éšæœºåˆ†å¸ƒï¼Œçº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ã€‚</p></li></ul><hr><h3 id="2ï¸âƒ£-ç©ºé—´å¤æ‚åº¦">2ï¸âƒ£ ç©ºé—´å¤æ‚åº¦</h3><ul><li><p>ä»…ä½¿ç”¨ä¸€ä¸ªè¾…åŠ©å˜é‡ <code>swapped</code>ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(n) = O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></p></li></ul><hr><h3 id="3ï¸âƒ£-ç¨³å®šæ€§åˆ†æ">3ï¸âƒ£ ç¨³å®šæ€§åˆ†æ</h3><p>å†’æ³¡æ’åºæ˜¯<strong>ç¨³å®šæ’åºç®—æ³•</strong>ã€‚å³ç›¸åŒå…ƒç´ çš„ç›¸å¯¹é¡ºåºä¿æŒä¸å˜ã€‚ğŸ‘‰ å½“ <code>A[j] == A[j+1]</code> æ—¶ä¸äº¤æ¢ã€‚</p><hr><h2 id="ğŸ”¢-å…­ã€æ•°å­¦æ‰©å±•ï¼šä¸ºä»€ä¹ˆæ¯”è¾ƒæ¬¡æ•°æ˜¯-frac-n-n-1-2-ï¼Ÿ">ğŸ”¢ å…­ã€æ•°å­¦æ‰©å±•ï¼šä¸ºä»€ä¹ˆæ¯”è¾ƒæ¬¡æ•°æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n(n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ï¼Ÿ</h2><p>æ¨å¯¼ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></munderover><mi>i</mi><mo>=</mo><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{n-1} i = \frac{n(n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.0788em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>è¯¥æ•°åˆ—ä¸ºç­‰å·®æ•°åˆ—ï¼Œé¦–é¡¹ä¸º 1ï¼Œæœ«é¡¹ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ï¼Œé¡¹æ•°ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ã€‚å› æ­¤å…¶æ±‚å’Œå…¬å¼æ˜¯ï¼š</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">S = \frac{(1 + n - 1)(n - 1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p><strong>æ•°å­¦æ„ä¹‰</strong>ï¼šè¿™å…¶å®è¡¨ç¤ºâ€œæ‰€æœ‰å¯èƒ½çš„æ— åºå¯¹æ•°é‡â€ã€‚æ¯ä¸€å¯¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i, j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span> éƒ½éœ€è¦è‡³å°‘æ¯”è¾ƒä¸€æ¬¡ï¼Œå†’æ³¡æ’åºä¼šæ£€æŸ¥æ‰€æœ‰è¿™äº›å¯¹ã€‚</p><hr><h2 id="ğŸš€-ä¸ƒã€å¯è§†åŒ–ç†è§£ï¼ˆäº¤æ¢è½¨è¿¹ï¼‰">ğŸš€ ä¸ƒã€å¯è§†åŒ–ç†è§£ï¼ˆäº¤æ¢è½¨è¿¹ï¼‰</h2><p>ä¸¾ä¾‹ï¼š<code>[5, 3, 4, 1, 2]</code></p><table><thead><tr><th>è½®æ¬¡</th><th>æ“ä½œ</th><th>æ•°ç»„çŠ¶æ€</th></tr></thead><tbody><tr><td>1</td><td>äº¤æ¢ (5,3)</td><td>[3,5,4,1,2]</td></tr><tr><td>1</td><td>äº¤æ¢ (5,4)</td><td>[3,4,5,1,2]</td></tr><tr><td>1</td><td>äº¤æ¢ (5,1)</td><td>[3,4,1,5,2]</td></tr><tr><td>1</td><td>äº¤æ¢ (5,2)</td><td>[3,4,1,2,5]</td></tr><tr><td>2</td><td>äº¤æ¢ (4,1)</td><td>[3,1,4,2,5]</td></tr><tr><td>2</td><td>äº¤æ¢ (4,2)</td><td>[3,1,2,4,5]</td></tr><tr><td>3</td><td>äº¤æ¢ (3,1)</td><td>[1,3,2,4,5]</td></tr><tr><td>3</td><td>äº¤æ¢ (3,2)</td><td>[1,2,3,4,5]</td></tr></tbody></table><hr><h2 id="ğŸ”-å…«ã€ç®—æ³•æ”¹è¿›æ–¹å‘">ğŸ” å…«ã€ç®—æ³•æ”¹è¿›æ–¹å‘</h2><table><thead><tr><th>æ”¹è¿›æ–¹æ³•</th><th>æ€æƒ³</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><strong>æå‰é€€å‡ºæ ‡å¿—</strong></td><td>æ£€æµ‹ä¸€è¶Ÿæ˜¯å¦å‘ç”Ÿäº¤æ¢</td><td>å‡å°‘ä¸å¿…è¦æ¯”è¾ƒ</td></tr><tr><td><strong>è®°å½•æœ€åäº¤æ¢ä½ç½®</strong></td><td>é™åˆ¶ä¸‹ä¸€è¶Ÿçš„æ¯”è¾ƒåŒºé—´</td><td>æ›´é«˜æ•ˆçš„ä¼˜åŒ–ç‰ˆ</td></tr><tr><td><strong>é¸¡å°¾é…’æ’åº</strong></td><td>åŒå‘å†’æ³¡ï¼ˆæ­£å‘+åå‘ï¼‰</td><td>æ”¹å–„å±€éƒ¨æœ‰åºæ€§èƒ½</td></tr></tbody></table><hr><h2 id="ğŸ§ -ä¹ã€æ€è€ƒä¸ç»ƒä¹ ">ğŸ§  ä¹ã€æ€è€ƒä¸ç»ƒä¹ </h2><ol><li><p>å¦‚æœè¦å¯¹ 10000 ä¸ªå…ƒç´ æ’åºï¼Œå†’æ³¡æ’åºå¤§çº¦éœ€è¦æ¯”è¾ƒå¤šå°‘æ¬¡ï¼Ÿï¼ˆæç¤ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n(n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ï¼‰</p></li><li><p>è‹¥æ•°ç»„åˆå§‹çŠ¶æ€æ¥è¿‘æœ‰åºï¼Œå†’æ³¡æ’åºæ˜¯å¦ä»ç„¶é€‚åˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p></li><li><p>å°è¯•æ”¹å†™ <code>bubbleSort()</code>ï¼Œå®ç°<strong>é™åº</strong>æ’åˆ—ã€‚</p></li></ol><hr><h2 id="ğŸŒ±-åã€å»¶ä¼¸é˜…è¯»">ğŸŒ± åã€å»¶ä¼¸é˜…è¯»</h2><ul><li><p>ã€Šç®—æ³•å¯¼è®ºã€‹ç¬¬ 2 ç« ï¼šåŸºç¡€æ’åºç®—æ³•</p></li><li><p>ã€ŠProgramming Pearlsã€‹ï¼šå…³äºå†’æ³¡æ’åºçš„æ€§èƒ½é™·é˜±</p></li><li><p>LeetCode é¢˜ç›®æ¨èï¼š</p><ul><li><a href="https://leetcode.com/problems/sort-an-array/">#912 Sort an Array</a></li><li><a href="https://leetcode.com/problems/insertion-sort-list/">#147 Insertion Sort List</a></li></ul></li></ul><hr><h2 id="âœ¨-æ€»ç»“">âœ¨ æ€»ç»“</h2><table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ—¶é—´å¤æ‚åº¦</strong></td><td>å¹³å‡ / æœ€åï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œæœ€å¥½ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></td></tr><tr><td><strong>ç©ºé—´å¤æ‚åº¦</strong></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td></tr><tr><td><strong>ç¨³å®šæ€§</strong></td><td>âœ… ç¨³å®š</td></tr><tr><td><strong>æ˜¯å¦åŸåœ°æ’åº</strong></td><td>âœ… æ˜¯</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å°è§„æ¨¡ã€éƒ¨åˆ†æœ‰åºæ•°æ®ã€æ•™å­¦æ¼”ç¤º</td></tr></tbody></table><blockquote><p>ğŸ§© â€œå†’æ³¡æ’åºä¸æ˜¯æœ€å¿«çš„ç®—æ³•ï¼Œä½†å®ƒæ˜¯ç†è§£ç®—æ³•æ€æƒ³çš„æœ€å¥½å…¥å£ã€‚â€â€”â€” ä¸‹ä¸€å‘¨ï¼Œæˆ‘ä»¬å°†è¿›å…¥ <strong>é€‰æ‹©æ’åºä¸æ’å…¥æ’åº</strong>ï¼Œä»â€œå±€éƒ¨æœ€ä¼˜â€å‡ºå‘ï¼Œè¿ˆå‘æ›´ä¼˜çš„æ’åºé€»è¾‘ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ä¸€å‘¨ä¸€ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> C++ </tag>
            
            <tag> å†’æ³¡ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LIBLSX - è½»é‡çº§ C++ è·¨å¹³å°å·¥å…·åº“</title>
      <link href="/2025/07/06/LIBLSX-%E8%BD%BB%E9%87%8F%E7%BA%A7-C-%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%B7%A5%E5%85%B7%E5%BA%93/"/>
      <url>/2025/07/06/LIBLSX-%E8%BD%BB%E9%87%8F%E7%BA%A7-C-%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%B7%A5%E5%85%B7%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1>LIBLSX - è½»é‡çº§ C++ è·¨å¹³å°å·¥å…·åº“</h1><p><a href="LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue" alt="MIT License"></a></p><p><img src="https://img.shields.io/badge/C++-17-blue.svg" alt="C++17"></p><p>LIBLSX æ˜¯ä¸€ä¸ªè½»é‡çº§ã€è·¨å¹³å°çš„ C++ å·¥å…·åº“ï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›é«˜æ•ˆä¸”æ˜“ç”¨çš„åŸºç¡€ç»„ä»¶ã€‚å½“å‰å·²å¼€å‘å®Œæˆ <strong>çº¿ç¨‹ç®¡ç†ï¼ˆThreadï¼‰</strong>ã€<strong>æ•°æ®é€šä¿¡ï¼ˆDataTransferï¼‰</strong>ã€<strong>å†…å­˜ç®¡ç†ï¼ˆMemoryï¼‰</strong>ã€<strong>é”ç®¡ç†ï¼ˆLockManagerï¼‰</strong> å’Œ <strong>æ—¥å¿—ç³»ç»Ÿï¼ˆLoggerï¼‰</strong> äº”å¤§æ ¸å¿ƒæ¨¡å—ã€‚</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/JinBiLianShao/liblsx">LIBLSX Github</a></p><h2 id="åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</h2><h3 id="1-Thread-æ¨¡å—">1. Thread æ¨¡å—</h3><ul><li><strong>çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šé€šè¿‡ <code>ThreadWrapper</code> å®ç°çº¿ç¨‹çš„å¯åŠ¨ã€åœæ­¢ã€æš‚åœã€æ¢å¤ã€‚</li><li><strong>çµæ´»ä»»åŠ¡ç»‘å®š</strong>ï¼šæ”¯æŒ Lambdaã€è‡ªç”±å‡½æ•°ã€æˆå‘˜å‡½æ•°ã€å‡½æ•°å¯¹è±¡ç­‰å¤šç§ä»»åŠ¡ç±»å‹ã€‚</li><li><strong>ä»»åŠ¡è°ƒåº¦å™¨</strong>ï¼š<code>Scheduler</code> æ”¯æŒä¸€æ¬¡æ€§å»¶è¿Ÿä»»åŠ¡å’Œå‘¨æœŸæ€§ä»»åŠ¡è°ƒåº¦ã€‚</li><li><strong>çº¿ç¨‹æ± </strong>ï¼š<code>ThreadPool</code> ç®¡ç†å¤šä¸ªå·¥ä½œçº¿ç¨‹å¹¶æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚</li><li><strong>è·¨å¹³å°å…¼å®¹</strong>ï¼šåŸºäº C++11 æ ‡å‡†çº¿ç¨‹åº“ï¼Œé€‚é… Windows/Linux/macOSã€‚</li></ul><h3 id="2-DataTransfer-æ¨¡å—">2. DataTransfer æ¨¡å—</h3><ul><li><strong>ç»Ÿä¸€é€šä¿¡æ¥å£</strong>ï¼šé€šè¿‡ <code>ICommunication</code> æŠ½è±¡ UDP/TCP/ä¸²å£ç­‰é€šä¿¡åè®®ã€‚</li><li><strong>å¤šåè®®æ”¯æŒ</strong>ï¼š<ul><li><strong>ç½‘ç»œåè®®</strong>ï¼šUDPï¼ˆå®¢æˆ·ç«¯/æœåŠ¡å™¨/å¹¿æ’­/å¤šæ’­ï¼‰ã€TCPï¼ˆå®¢æˆ·ç«¯/æœåŠ¡å™¨ï¼‰ã€‚</li><li><strong>ä¸²å£é€šä¿¡</strong>ï¼šè·¨å¹³å°ä¸²å£è¯»å†™ï¼Œæ”¯æŒè¶…æ—¶é…ç½®ã€‚</li></ul></li><li><strong>çº¿ç¨‹å®‰å…¨è®¾è®¡</strong>ï¼šå†…ç½®é”æœºåˆ¶ä¿éšœå¤šçº¿ç¨‹å®‰å…¨ï¼ŒRAII ç®¡ç†èµ„æºã€‚</li><li><strong>å·¥å‚æ¨¡å¼åˆ›å»ºå®ä¾‹</strong>ï¼šé€šè¿‡ <code>CommunicationFactory</code> å¿«é€Ÿåˆ›å»ºå„ç±»é€šä¿¡å®ä¾‹ã€‚</li></ul><h3 id="3-Memory-æ¨¡å—">3. Memory æ¨¡å—</h3><ul><li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šåŒ…å« FIFO é˜Ÿåˆ—ã€ç®¡é“ã€å¾ªç¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜ã€å†…å­˜ç¼“å†²åŒºç­‰ç»„ä»¶ã€‚</li><li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šæ‰€æœ‰ç»„ä»¶å‡æ”¯æŒå¤šçº¿ç¨‹å®‰å…¨è®¿é—®ã€‚</li><li><strong>çµæ´»çš„æ•°æ®ç»“æ„</strong>ï¼šæ”¯æŒå›ºå®šå¤§å°å—ç®¡ç†å’ŒåŠ¨æ€å†…å­˜ç¼“å†²åŒºã€‚</li><li><strong>è·¨å¹³å°</strong>ï¼šé€‚é… Windows å’Œ POSIX ç³»ç»Ÿï¼ˆLinux/macOSï¼‰ã€‚</li></ul><h3 id="4-LockManager-æ¨¡å—">4. LockManager æ¨¡å—</h3><ul><li><strong>RAII åŸåˆ™å°è£…</strong>ï¼šåŸºäº RAII (Resource Acquisition Is Initialization) æœºåˆ¶ï¼Œè‡ªåŠ¨ç®¡ç†äº’æ–¥é‡çš„åŠ é”ä¸è§£é”ï¼Œç¡®ä¿èµ„æºåœ¨ä½œç”¨åŸŸç»“æŸæˆ–å¼‚å¸¸æŠ›å‡ºæ—¶è¢«æ­£ç¡®é‡Šæ”¾ï¼Œæå¤§æå‡å¹¶å‘ä»£ç çš„<strong>å®‰å…¨æ€§ã€å¯è¯»æ€§ã€å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§</strong>ã€‚</li><li><strong>å¤šç§é”ç±»å‹æ”¯æŒ</strong>ï¼šå…¨é¢æ”¯æŒ C++ æ ‡å‡†åº“æä¾›çš„å„ç±»äº’æ–¥é‡ï¼ŒåŒ…æ‹¬ <code>std::mutex</code> (ç‹¬å )ã€<code>std::recursive_mutex</code> (é€’å½’)ã€<code>std::timed_mutex</code> (å®šæ—¶ç‹¬å )ã€<code>std::shared_mutex</code> (è¯»å†™é”) å’Œ <code>std::shared_timed_mutex</code> (å®šæ—¶è¯»å†™é”)ã€‚</li><li><strong>æ­»é”è‡ªåŠ¨é¿å…</strong>ï¼š<code>MultiLockGuard</code> ç±»åˆ©ç”¨ C++17 çš„ <code>std::scoped_lock</code>ï¼Œåœ¨å•ä¸ªåŸå­æ“ä½œä¸­åŒæ—¶è·å–å¤šä¸ªäº’æ–¥é‡ï¼Œå†…ç½®æ­»é”é¿å…ç®—æ³•ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³å¤šé”åœºæ™¯ä¸‹çš„æ­»é”é—®é¢˜ã€‚</li><li><strong>æ¡ä»¶å˜é‡æ”¯æŒ</strong>ï¼š<code>Condition</code> ç±»å°è£… <code>std::condition_variable_any</code>ï¼Œæä¾›å¼ºå¤§çš„çº¿ç¨‹é—´åä½œå’ŒåŒæ­¥æœºåˆ¶ï¼Œå¹¶é€šè¿‡å¼ºåˆ¶ä½¿ç”¨è°“è¯ (predicate) æœ‰æ•ˆé¿å…â€œè™šå‡å”¤é†’â€ã€‚</li><li><strong>C++17 æ ‡å‡†å…¼å®¹</strong>ï¼šå……åˆ†åˆ©ç”¨ <code>if constexpr</code>ã€<code>std::scoped_lock</code>ã€<code>std::is_same_v</code> ç­‰ C++17 ç‰¹æ€§ï¼Œæä¾›æ›´é«˜æ•ˆã€æ›´ç®€æ´çš„å®ç°ã€‚</li></ul><h3 id="5-Logger-æ¨¡å—">5. Logger æ¨¡å—</h3><ul><li><strong>å¤šçº¿ç¨‹å®‰å…¨</strong>ï¼šå†…éƒ¨ä½¿ç”¨äº’æ–¥é”å’ŒåŸå­æ“ä½œï¼Œç¡®ä¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ—¥å¿—å†™å…¥å®‰å…¨ã€‚</li><li><strong>è·¨å¹³å°æ”¯æŒ</strong>ï¼šä¸»è¦ä¾èµ– C++ æ ‡å‡†åº“ï¼Œå…¼å®¹ Windows/Linux/macOSã€‚</li><li><strong>æ—¥å¿—çº§åˆ«æ§åˆ¶</strong>ï¼šæ”¯æŒ DEBUG, INFO, WARNING, ERROR å››ç§çº§åˆ«ï¼Œå¯åŠ¨æ€è°ƒæ•´ã€‚</li><li><strong>å¤šç§è¾“å‡ºç›®æ ‡</strong>ï¼šæ”¯æŒæ§åˆ¶å° (Console) å’Œæœ¬åœ°æ–‡ä»¶ (File) è¾“å‡ºã€‚</li><li><strong>åŠ¨æ€åˆ‡æ¢è¾“å‡º</strong>ï¼šå¯åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢æ—¥å¿—çš„è¾“å‡ºç›®æ ‡ã€‚</li><li><strong>æ–‡ä»¶æ—¥å¿—è½®è½¬</strong>ï¼šæ–‡ä»¶è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œæ”¯æŒæŒ‰æœ€å¤§è¡Œæ•°é™åˆ¶è¿›è¡Œæ—¥å¿—è½®è½¬ï¼Œä¿ç•™æœ€æ–°æ—¥å¿—ã€‚</li><li><strong>çµæ´»é…ç½®</strong>ï¼šé€šè¿‡ <code>LoggerConfig</code> è¿›è¡Œåˆå§‹åŒ–é…ç½®ã€‚</li><li><strong>æ¸…æ™°çš„æ—¥å¿—æ ¼å¼</strong>ï¼šåŒ…å«æ—¶é—´æˆ³ã€çº¿ç¨‹IDã€çº§åˆ«ã€ä»£ç ä½ç½® (æ–‡ä»¶ã€è¡Œå·ã€å‡½æ•°) å’Œæ¶ˆæ¯ã€‚</li><li><strong>ä¾¿æ·å®å®šä¹‰</strong>ï¼šæä¾› <code>LSX_LOG_DEBUG</code>, <code>LSX_LOG_INFO</code> ç­‰å®ç®€åŒ–æ—¥å¿—è°ƒç”¨ã€‚</li></ul><h2 id="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</h2><h3 id="å‰ç½®æ¡ä»¶">å‰ç½®æ¡ä»¶</h3><ul><li>C++17 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ç¼–è¯‘å™¨ã€‚</li><li>å°† LIBLSX åº“å¯¼å…¥é¡¹ç›®ã€‚</li></ul><h3 id="ä»£ç ç¤ºä¾‹">ä»£ç ç¤ºä¾‹</h3><h4 id="çº¿ç¨‹ä»»åŠ¡è°ƒåº¦">çº¿ç¨‹ä»»åŠ¡è°ƒåº¦</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;LIBLSX/Thread/ThreadWrapper.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;LIBLSX/Thread/Scheduler.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> LIBLSX::Thread;<br><br><span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹å¹¶ç»‘å®š Lambda ä»»åŠ¡</span><br>ThreadWrapper thread;<br>thread.<span class="hljs-built_in">setTask</span>([]() &#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Hello from thread!&quot;</span> &lt;&lt; std::endl;<br>&#125;);<br>thread.<span class="hljs-built_in">start</span>();<br>thread.<span class="hljs-built_in">stop</span>();<br><br><span class="hljs-comment">// è°ƒåº¦å‘¨æœŸæ€§ä»»åŠ¡</span><br>Scheduler scheduler;<br>scheduler.<span class="hljs-built_in">schedulePeriodic</span>(<span class="hljs-number">1000</span>, []() &#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Tick every 1s&quot;</span> &lt;&lt; std::endl;<br>&#125;);<br>std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">3</span>));<br>scheduler.<span class="hljs-built_in">shutdown</span>();<br>````<br><br>#### ç½‘ç»œé€šä¿¡<br><br>```cpp<br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;LIBLSX/DataTransfer/CommunicationFactory.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> LIBLSX;<br><br><span class="hljs-comment">// åˆ›å»º TCP å®¢æˆ·ç«¯</span><br><span class="hljs-keyword">auto</span> tcp = CommunicationFactory::<span class="hljs-built_in">create</span>(CommType::TCP_CLIENT, <span class="hljs-string">&quot;127.0.0.1&quot;</span>, <span class="hljs-number">8080</span>);<br><span class="hljs-keyword">if</span> (tcp &amp;&amp; tcp-&gt;<span class="hljs-built_in">create</span>()) &#123;<br>    std::vector&lt;<span class="hljs-type">uint8_t</span>&gt; data = &#123;<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>&#125;;<br>    tcp-&gt;<span class="hljs-built_in">send</span>(data.<span class="hljs-built_in">data</span>(), data.<span class="hljs-built_in">size</span>());<br>    tcp-&gt;<span class="hljs-built_in">close</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å†…å­˜ç®¡ç†">å†…å­˜ç®¡ç†</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;LIBLSX/Memory/FIFO.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;LIBLSX/Memory/Pipe.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> LIBLSX::Memory;<br><br><span class="hljs-comment">// ä½¿ç”¨ FIFO é˜Ÿåˆ—</span><br>FIFO&lt;std::string&gt; string_fifo;<br>string_fifo.<span class="hljs-built_in">Put</span>(<span class="hljs-string">&quot;Hello&quot;</span>);<br>string_fifo.<span class="hljs-built_in">Put</span>(<span class="hljs-string">&quot;World&quot;</span>);<br><br><span class="hljs-comment">// ä½¿ç”¨ç®¡é“</span><br>Pipe byte_pipe;<br>std::vector&lt;<span class="hljs-type">uint8_t</span>&gt; send = &#123;<span class="hljs-string">&#x27;H&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>&#125;;<br>byte_pipe.<span class="hljs-built_in">Write</span>(send);<br>std::vector&lt;<span class="hljs-type">uint8_t</span>&gt; received = byte_pipe.<span class="hljs-built_in">Read</span>(<span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure><h4 id="é”ç®¡ç†-LockManager">é”ç®¡ç† (LockManager)</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;LIBLSX/LockManager/MultiLockGuard.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span> <span class="hljs-comment">// For std::chrono::milliseconds</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> LIBLSX::LockManager;<br><br>std::mutex account_m1, account_m2;<br><span class="hljs-type">int</span> account_balance1 = <span class="hljs-number">100</span>, account_balance2 = <span class="hljs-number">200</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">transfer_funds</span><span class="hljs-params">(<span class="hljs-type">int</span> amount, <span class="hljs-type">int</span>&amp; from_balance, <span class="hljs-type">int</span>&amp; to_balance, std::mutex&amp; m_from, std::mutex&amp; m_to)</span> </span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Attempting transfer of &quot;</span> &lt;&lt; amount &lt;&lt; <span class="hljs-string">&quot;...&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-comment">// MultiLockGuard åŸå­æ€§åœ°è·å–ä¸¤ä¸ªäº’æ–¥é‡ï¼Œè‡ªåŠ¨å¤„ç†æ­»é”</span><br>    <span class="hljs-function">MultiLockGuard&lt;std::mutex, std::mutex&gt; <span class="hljs-title">lock_pair</span><span class="hljs-params">(m_from, m_to)</span></span>;<br><br>    <span class="hljs-keyword">if</span> (from_balance &gt;= amount) &#123;<br>        std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">milliseconds</span>(<span class="hljs-number">10</span>)); <span class="hljs-comment">// æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span><br>        from_balance -= amount;<br>        to_balance += amount;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Transfer successful. Bal1=&quot;</span> &lt;&lt; from_balance &lt;&lt; <span class="hljs-string">&quot;, Bal2=&quot;</span> &lt;&lt; to_balance &lt;&lt; std::endl;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Transfer failed: Insufficient funds.&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// Example usage (within main or another function):</span><br><span class="hljs-comment">// std::thread t1(transfer_funds, 30, std::ref(account_balance1), std::ref(account_balance2), std::ref(account_m1), std::ref(account_m2));</span><br><span class="hljs-comment">// std::thread t2(transfer_funds, 80, std::ref(account_balance2), std::ref(account_balance1), std::ref(account_m2), std::ref(account_m1)); // æ¼”ç¤ºé¢ å€’é¡ºåºä»å®‰å…¨</span><br><span class="hljs-comment">// t1.join(); t2.join();</span><br></code></pre></td></tr></table></figure><h4 id="æ—¥å¿—ç³»ç»Ÿ-Logger">æ—¥å¿—ç³»ç»Ÿ (Logger)</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;LIBLSX/Logger/Logger.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> LIBLSX::Logger;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-comment">// Note: Logger instance lifecycle needs management in a real app.</span><br>    LoggerConfig config;<br>    config.level = LogLevel::DEBUG; <span class="hljs-comment">// è®¾ç½®çº§åˆ«ä¸º DEBUG</span><br>    config.mode = OutputMode::Console; <span class="hljs-comment">// è¾“å‡ºåˆ°æ§åˆ¶å°</span><br><br>    <span class="hljs-function">Logger <span class="hljs-title">logger</span><span class="hljs-params">(config)</span></span>; <span class="hljs-comment">// åˆ›å»º Logger å®ä¾‹</span><br><br>    <span class="hljs-comment">// ä½¿ç”¨æ—¥å¿—å®è®°å½•æ—¥å¿—</span><br>    <span class="hljs-built_in">LSX_LOG_DEBUG</span>(logger, <span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ªè°ƒè¯•ä¿¡æ¯.&quot;</span>);<br>    <span class="hljs-built_in">LSX_LOG_INFO</span>(logger, <span class="hljs-string">&quot;åº”ç”¨ç¨‹åºå¯åŠ¨.&quot;</span>);<br>    <span class="hljs-built_in">LSX_LOG_WARNING</span>(logger, <span class="hljs-string">&quot;å‘ç°ä¸€ä¸ªæ½œåœ¨é—®é¢˜.&quot;</span>);<br>    <span class="hljs-built_in">LSX_LOG_ERROR</span>(logger, <span class="hljs-string">&quot;å‘ç”Ÿä¸¥é‡é”™è¯¯!&quot;</span>);<br><br>    <span class="hljs-comment">// logger.SetLogLevel(LogLevel::INFO); // åŠ¨æ€æ”¹å˜çº§åˆ«ç¤ºä¾‹</span><br>    <span class="hljs-comment">// LSX_LOG_DEBUG(logger, &quot;è¿™æ¡ DEBUG æ—¥å¿—ä¸ä¼šè¢«è®°å½•.&quot;);</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ¨¡å—æ–‡æ¡£">æ¨¡å—æ–‡æ¡£</h2><table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½è¯´æ˜</th><th>è¯¦ç»†æ–‡æ¡£é“¾æ¥</th></tr></thead><tbody><tr><td><strong>Thread</strong></td><td>çº¿ç¨‹ç®¡ç†ä¸ä»»åŠ¡è°ƒåº¦</td><td><a href="https://github.com/JinBiLianShao/liblsx/blob/master/example%2FThread%2FLIBLSX%20%E5%B7%A5%E5%85%B7%E5%BA%93%20Thread%20%E6%A8%A1%E5%9D%97%20%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.md">Thread æ¨¡å—æ–‡æ¡£</a></td></tr><tr><td><strong>DataTransfer</strong></td><td>ç½‘ç»œä¸ä¸²å£é€šä¿¡</td><td><a href="https://github.com/JinBiLianShao/liblsx/blob/master/example%2FDataTransfer%2FLIBLSX%20%E5%B7%A5%E5%85%B7%E5%BA%93%20DataTransfer%20%E6%A8%A1%E5%9D%97%20%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3.md">DataTransfer æ¨¡å—æ–‡æ¡£</a></td></tr><tr><td><strong>Memory</strong></td><td>å†…å­˜ç®¡ç†ä¸æ•°æ®ç»“æ„</td><td><a href="https://github.com/JinBiLianShao/liblsx/blob/master/example%2FMemoryManagement%2FLIBLSX%20%E5%B7%A5%E5%85%B7%E5%BA%93%20Memory%20%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E.md">Memory æ¨¡å—æ–‡æ¡£</a></td></tr><tr><td><strong>LockManager</strong></td><td>RAII é”ç®¡ç†ä¸å¹¶å‘åŸè¯­</td><td><a href="https://github.com/JinBiLianShao/liblsx/blob/master/example/LockManager/LIBLSX%20%E5%B7%A5%E5%85%B7%E5%BA%93%20LockManager%20%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E.md">LockManager æ¨¡å—æ–‡æ¡£</a></td></tr><tr><td><strong>Logger</strong></td><td>è½»é‡çº§å¤šåŠŸèƒ½æ—¥å¿—ç³»ç»Ÿ</td><td><a href="https://github.com/JinBiLianShao/liblsx/blob/master/example/Logger/LSX_LIB%E5%B7%A5%E5%85%B7%E5%BA%93Logger%20%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E.md">Logger æ¨¡å—æ–‡æ¡£</a></td></tr></tbody></table><h2 id="é¡¹ç›®çŠ¶æ€ä¸è´¡çŒ®">é¡¹ç›®çŠ¶æ€ä¸è´¡çŒ®</h2><ul><li><strong>å½“å‰ç‰ˆæœ¬</strong>ï¼šv0.1.0ï¼ˆå¼€å‘ä¸­ï¼‰</li><li><strong>å¾…å¼€å‘æ¨¡å—</strong>ï¼šæ•°æ®åº“æ¨¡å—ã€Webæ¨¡å—ç­‰ã€‚</li><li><strong>æ¬¢è¿è´¡çŒ®</strong>ï¼šæ¬¢è¿æäº¤ Issue æˆ– PRï¼Œå…±åŒå®Œå–„åŠŸèƒ½æ¨¡å—ã€‚è¯·éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒä¸åè®®ã€‚</li></ul><h2 id="è®¸å¯è¯">è®¸å¯è¯</h2><p>æœ¬é¡¹ç›®é‡‡ç”¨ <strong>MIT è®¸å¯è¯</strong>ã€‚è¯¦æƒ…è¯·å‚é˜… <a href="https://www.google.com/search?q=LICENSE">LICENSE</a> æ–‡ä»¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++å¼€æºé¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€æºé¡¹ç›® </tag>
            
            <tag> C++è·¨å¹³å°å·¥å…·åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[å·²éªŒè¯]åŸºäºHALåº“å¯è¿ç§»é€šç”¨gpioæ¨¡æ‹ŸI2Cå®ç°</title>
      <link href="/2024/10/23/%E5%B7%B2%E9%AA%8C%E8%AF%81-%E5%9F%BA%E4%BA%8EHAL%E5%BA%93%E5%8F%AF%E8%BF%81%E7%A7%BB%E9%80%9A%E7%94%A8gpio%E6%A8%A1%E6%8B%9FI2C%E5%AE%9E%E7%8E%B0/"/>
      <url>/2024/10/23/%E5%B7%B2%E9%AA%8C%E8%AF%81-%E5%9F%BA%E4%BA%8EHAL%E5%BA%93%E5%8F%AF%E8%BF%81%E7%A7%BB%E9%80%9A%E7%94%A8gpio%E6%A8%A1%E6%8B%9FI2C%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1>[å·²éªŒè¯]åŸºäºHALåº“å¯è¿ç§»é€šç”¨gpioæ¨¡æ‹ŸI2Cå®ç°</h1><h2 id="å¼•è¨€">å¼•è¨€</h2><p>ä¹‹å‰å†™è¿‡ä¸€ç‰ˆï¼Œä½†æ²¡æœ‰ç»è¿‡å·¥ç¨‹éªŒè¯ï¼Œè€Œä»Šå¹´åœ¨å®é™…å·¥ç¨‹é¢†åŸŸç¡®å®è¦ç”¨åˆ°gpioæ¨¡æ‹ŸI2Cçš„åŠŸèƒ½å®ç°ï¼Œæˆ‘åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šè°ƒè¯•ï¼Œä¿®å¤bugæ‰æœ‰äº†ä»Šå¤©è¿™ç¯‡åšå®¢ã€‚ä¸‹è¿°æºç å·²ç»è¿‡å®é™…å¼€å‘å·¥ç¨‹éªŒè¯ï¼Œå¯è¿ç§»ä½¿ç”¨ã€‚è¯ä¸å¤šè¯´ï¼Œåœ¨ä»‹ç»ä¸€éå§ã€‚ã€‚</p><h2 id="I2Cåè®®ç®€ä»‹">I2Cåè®®ç®€ä»‹</h2><p>I2Cæ˜¯ä¸€ç§å¤šä¸»å¤šä»çš„ä¸²è¡Œé€šä¿¡åè®®ï¼Œå…·æœ‰ç®€å•ã€çµæ´»çš„ä¼˜ç‚¹ã€‚å®ƒä½¿ç”¨ä¸¤æ ¹ä¿¡å·çº¿ï¼šSDAï¼ˆæ•°æ®çº¿ï¼‰å’ŒSCLï¼ˆæ—¶é’Ÿçº¿ï¼‰ã€‚æ•°æ®åœ¨SDAçº¿ä¸Šä¼ è¾“ï¼Œè€ŒSCLçº¿ç”¨äºåŒæ­¥ä¿¡å·ã€‚I2Cçš„é€šä¿¡æ—¶åºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/images/2024-10-23-01.png" alt="i2cæ—¶åºå›¾"></p><h3 id="æ—¶åºè¯´æ˜">æ—¶åºè¯´æ˜</h3><ol><li><strong>èµ·å§‹æ¡ä»¶ï¼ˆStart Conditionï¼‰</strong>ï¼šSDAä»é«˜ç”µå¹³è·³å˜åˆ°ä½ç”µå¹³ï¼ŒSCLä¿æŒé«˜ç”µå¹³ã€‚</li><li><strong>åœæ­¢æ¡ä»¶ï¼ˆStop Conditionï¼‰</strong>ï¼šSDAä»ä½ç”µå¹³è·³å˜åˆ°é«˜ç”µå¹³ï¼ŒSCLä¿æŒé«˜ç”µå¹³ã€‚</li><li><strong>æ•°æ®ä¼ è¾“</strong>ï¼šæ•°æ®åœ¨SDAçº¿ä¸Šä¼ è¾“æ—¶ï¼ŒSCLçº¿æä¾›æ—¶é’Ÿä¿¡å·ï¼Œæ¯ä¸ªæ—¶é’Ÿå‘¨æœŸä¼ è¾“ä¸€ä½æ•°æ®ã€‚</li></ol><h2 id="GPIOåˆå§‹åŒ–">GPIOåˆå§‹åŒ–</h2><p>åœ¨STM32ä¸­ï¼Œæˆ‘ä½¿ç”¨GPIOå¼•è„šæ¨¡æ‹ŸI2Cä¿¡å·ã€‚ä»¥ä¸‹æ˜¯GPIOåˆå§‹åŒ–çš„ä»£ç å®ç°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_GPIO_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="hljs-number">0</span>&#125;;<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–SCLå¼•è„š</span><br>    GPIO_InitStruct.Pin = I2C3_SCL_Pin;<br>    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;<br>    GPIO_InitStruct.Pull = GPIO_NOPULL;<br>    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;<br>    HAL_GPIO_Init(I2C3_SCL_GPIO_Port, &amp;GPIO_InitStruct);<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–SDAå¼•è„š</span><br>    GPIO_InitStruct.Pin = I2C3_SDA_Pin;<br>    HAL_GPIO_Init(I2C3_SDA_GPIO_Port, &amp;GPIO_InitStruct);<br><br>    <span class="hljs-comment">// å°†SCLå’ŒSDAæ‹‰é«˜</span><br>    HAL_GPIO_WritePin(I2C3_SCL_GPIO_Port, I2C3_SCL_Pin, GPIO_PIN_SET);<br>    HAL_GPIO_WritePin(I2C3_SDA_GPIO_Port, I2C3_SDA_Pin, GPIO_PIN_SET);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨<code>I2C_GPIO_Init</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†SCLå’ŒSDAå¼•è„šåˆå§‹åŒ–ä¸ºæ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼Œå¹¶å°†å…¶çŠ¶æ€è®¾ç½®ä¸ºé«˜ç”µå¹³ã€‚</p><h2 id="I2Cæ“ä½œå®ç°">I2Cæ“ä½œå®ç°</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®ç°I2Cçš„åŸºæœ¬æ“ä½œï¼ŒåŒ…æ‹¬èµ·å§‹æ¡ä»¶ã€åœæ­¢æ¡ä»¶ã€å‘é€å­—èŠ‚å’Œè¯»å–å­—èŠ‚ç­‰ã€‚</p><h3 id="èµ·å§‹æ¡ä»¶ä¸åœæ­¢æ¡ä»¶">èµ·å§‹æ¡ä»¶ä¸åœæ­¢æ¡ä»¶</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Start</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    I2C_Set_SDA(GPIO_PIN_SET);<br>    I2C_Set_SCL(GPIO_PIN_SET);<br>    I2C_Delay();<br>    I2C_Set_SDA(GPIO_PIN_RESET);<br>    I2C_Delay();<br>    I2C_Set_SCL(GPIO_PIN_RESET);<br>    I2C_Delay();<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Stop</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    I2C_Set_SDA(GPIO_PIN_RESET);<br>    I2C_Set_SCL(GPIO_PIN_SET);<br>    I2C_Delay();<br>    I2C_Set_SDA(GPIO_PIN_SET);<br>    I2C_Delay();<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨<code>I2C_Start</code>å’Œ<code>I2C_Stop</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ§åˆ¶SDAå’ŒSCLçš„ç”µå¹³æ¥å®ç°I2Cçš„èµ·å§‹å’Œåœæ­¢æ¡ä»¶ã€‚</p><h3 id="å‘é€å­—èŠ‚">å‘é€å­—èŠ‚</h3><p>å‘é€å­—èŠ‚çš„å‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">static</span> HAL_StatusTypeDef <span class="hljs-title function_">I2C_Send_Byte</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> byte)</span><br>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int8_t</span> i = <span class="hljs-number">7</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        GPIO_PinState bit = (byte &amp; (<span class="hljs-number">1</span> &lt;&lt; i)) ? GPIO_PIN_SET : GPIO_PIN_RESET;<br>        I2C_Set_SDA(bit);<br>        I2C_Delay();<br>        I2C_Set_SCL(GPIO_PIN_SET);<br>        I2C_Delay();<br>        I2C_Set_SCL(GPIO_PIN_RESET);<br>        I2C_Delay();<br>    &#125;<br><br>    <span class="hljs-comment">// æ¥æ”¶ACK</span><br>    I2C_Set_SDA_Input();<br>    I2C_Delay();<br>    I2C_Set_SCL(GPIO_PIN_SET);<br>    I2C_Delay();<br>    GPIO_PinState ack = I2C_Read_SDA();<br>    I2C_Set_SCL(GPIO_PIN_RESET);<br>    I2C_Delay();<br><br>    <span class="hljs-keyword">return</span> (ack == GPIO_PIN_RESET) ? HAL_OK : HAL_ERROR;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨<code>I2C_Send_Byte</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†æ•°æ®çš„æ¯ä¸€ä½å‘é€åˆ°SDAçº¿ä¸Šï¼Œå¹¶åœ¨å‘é€å®Œæ¯•åè¯»å–ACKä¿¡å·ã€‚</p><h3 id="è¯»å–å­—èŠ‚">è¯»å–å­—èŠ‚</h3><p>è¯»å–å­—èŠ‚çš„å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">static</span> <span class="hljs-type">uint8_t</span> <span class="hljs-title function_">I2C_Read_Byte</span><span class="hljs-params">(GPIO_PinState ack)</span><br>&#123;<br>    <span class="hljs-type">uint8_t</span> byte = <span class="hljs-number">0</span>;<br><br>    I2C_Set_SDA_Input();  <span class="hljs-comment">// è®¾ç½®SDAä¸ºè¾“å…¥æ¨¡å¼</span><br>    I2C_Delay();<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int8_t</span> i = <span class="hljs-number">7</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        I2C_Set_SCL(GPIO_PIN_SET);<br>        I2C_Delay();<br>        <span class="hljs-keyword">if</span> (I2C_Read_SDA() == GPIO_PIN_SET)<br>        &#123;<br>            byte |= (<span class="hljs-number">1</span> &lt;&lt; i);<br>        &#125;<br>        I2C_Set_SCL(GPIO_PIN_RESET);<br>        I2C_Delay();<br>    &#125;<br><br>    <span class="hljs-comment">// å‘é€ACKæˆ–NACK</span><br>    I2C_Set_SDA(ack);<br>    I2C_Delay();<br>    I2C_Set_SCL(GPIO_PIN_SET);<br>    I2C_Delay();<br>    I2C_Set_SCL(GPIO_PIN_RESET);<br>    I2C_Delay();<br><br>    <span class="hljs-keyword">return</span> byte;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨<code>I2C_Read_Byte</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®SDAä¸ºè¾“å…¥æ¨¡å¼ï¼Œè¯»å–æ•°æ®ä½ï¼Œå¹¶æ ¹æ®éœ€è¦å‘é€ACKæˆ–NACKã€‚</p><h2 id="I2Cè¯»å†™æ“ä½œçš„å°è£…">I2Cè¯»å†™æ“ä½œçš„å°è£…</h2><p>æˆ‘ä»¬è¿˜å¯ä»¥å°†ä¸Šè¿°åŸºæœ¬æ“ä½œå°è£…ä¸ºæ›´é«˜å±‚æ¬¡çš„I2Cè¯»å†™å‡½æ•°ï¼Œå¦‚<code>G_I2C_Mem_Write</code>å’Œ<code>G_I2C_Mem_Read</code>ã€‚</p><h3 id="å†™å…¥æ“ä½œ">å†™å…¥æ“ä½œ</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c">HAL_StatusTypeDef <span class="hljs-title function_">G_I2C_Mem_Write</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> devAddr, <span class="hljs-type">uint8_t</span> memAddr, <span class="hljs-type">uint8_t</span> *pData, <span class="hljs-type">uint16_t</span> size)</span><br>&#123;<br>    I2C_Start();<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte(devAddr &lt;&lt; <span class="hljs-number">1</span>) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte(memAddr) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint16_t</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (I2C_Send_Byte(pData[i]) != HAL_OK)<br>        &#123;<br>            I2C_Stop();<br>            <span class="hljs-keyword">return</span> HAL_ERROR;<br>        &#125;<br>    &#125;<br><br>    I2C_Stop();<br>    <span class="hljs-keyword">return</span> HAL_OK;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è¯»å–æ“ä½œ">è¯»å–æ“ä½œ</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c">HAL_StatusTypeDef <span class="hljs-title function_">G_I2C_Mem_Read</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> devAddr, <span class="hljs-type">uint8_t</span> memAddr, <span class="hljs-type">uint8_t</span> *pData, <span class="hljs-type">uint16_t</span> size)</span><br>&#123;<br>    I2C_Start();<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte(devAddr &lt;&lt; <span class="hljs-number">1</span>) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte(memAddr) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    I2C_Start();<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte((devAddr &lt;&lt; <span class="hljs-number">1</span>) | <span class="hljs-number">0x01</span>) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint16_t</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)<br>    &#123;<br>        pData[i] = I2C_Read_Byte((i == size - <span class="hljs-number">1</span>) ? I2C_NACK : I2C_ACK);<br>    &#125;<br><br>    I2C_Stop();<br>    <span class="hljs-keyword">return</span> HAL_OK;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç»“è®º">ç»“è®º</h2><p>é€šè¿‡ä»¥ä¸Šå®ç°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨GPIOæˆåŠŸæ¨¡æ‹ŸI2Cé€šä¿¡ã€‚è¿™ç§æ–¹æ³•ä¸ä»…é€‚ç”¨äºSTM32ç­‰å¾®æ§åˆ¶å™¨ï¼Œè¿˜èƒ½åº”ç”¨äºå…¶ä»–è®¸å¤šåµŒå…¥å¼å¹³å°ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç†è§£I2Cæ—¶åºå’Œä¿¡å·çš„å¤„ç†éƒ½æ˜¯è‡³å…³é‡è¦çš„ã€‚</p><h2 id="é™„å½•">é™„å½•</h2><p>å®Œæ•´çš„ä»£ç å®ç°å¯å‚è€ƒæœ¬åšå®¢æä¾›çš„æºæ–‡ä»¶å’Œå¤´æ–‡ä»¶ã€‚</p><h5 id="i2c-gpio-h">i2c_gpio.h</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @file i2c_gpio.h</span><br><span class="hljs-comment"> * @brief å®ç°gpioæ¨¡æ‹ŸI2Cçš„åŠŸèƒ½å®ç°</span><br><span class="hljs-comment"> * @author è¿æ€é‘« (liansixin)</span><br><span class="hljs-comment"> * @date 9/5/2024</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> __I2C_GPIO_H</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> __I2C_GPIO_H</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stm32f4xx_hal.h&quot;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_GPIO_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Delay</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Start</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Stop</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>;<br>HAL_StatusTypeDef <span class="hljs-title function_">I2C_Mem_Write</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> devAddr, <span class="hljs-type">uint16_t</span> memAddr, <span class="hljs-type">uint8_t</span> *pData, <span class="hljs-type">uint16_t</span> size)</span>;<br>HAL_StatusTypeDef <span class="hljs-title function_">I2C_Mem_Read</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> devAddr, <span class="hljs-type">uint16_t</span> memAddr, <span class="hljs-type">uint8_t</span> *pData, <span class="hljs-type">uint16_t</span> size)</span>;<br><br><span class="hljs-comment">// I2C APIå‡½æ•°å£°æ˜</span><br>HAL_StatusTypeDef <span class="hljs-title function_">G_I2C_Mem_Write</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> devAddr, <span class="hljs-type">uint8_t</span> memAddr, <span class="hljs-type">uint8_t</span> *pData, <span class="hljs-type">uint16_t</span> size)</span>;<br>HAL_StatusTypeDef <span class="hljs-title function_">G_I2C_Mem_Read</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> devAddr, <span class="hljs-type">uint8_t</span> memAddr, <span class="hljs-type">uint8_t</span> *pData, <span class="hljs-type">uint16_t</span> size)</span>;<br><br><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">/* __I2C_GPIO_H */</span></span><br><br></code></pre></td></tr></table></figure><h5 id="i2c-gpio-c">i2c_gpio.c</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @file i2c_gpio.h</span><br><span class="hljs-comment"> * @brief å®ç°gpioæ¨¡æ‹ŸI2Cçš„åŠŸèƒ½å®ç°</span><br><span class="hljs-comment"> * @author è¿æ€é‘« (liansixin)</span><br><span class="hljs-comment"> * @date 9/5/2024</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stm32f4xx_hal.h&quot;</span></span><br><br><span class="hljs-comment">// å®šä¹‰å¼•è„šå’Œç«¯å£</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I2C3_SCL_Pin GPIO_PIN_8</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I2C3_SDA_Pin GPIO_PIN_9</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I2C3_SCL_GPIO_Port GPIOA</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I2C3_SDA_GPIO_Port GPIOC</span><br><br><span class="hljs-comment">// å®šä¹‰ I2C ACK å’Œ NACK</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I2C_ACK GPIO_PIN_RESET</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I2C_NACK GPIO_PIN_SET</span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_GPIO_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="hljs-number">0</span>&#125;;<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–SCLå¼•è„š</span><br>    GPIO_InitStruct.Pin = I2C3_SCL_Pin;<br>    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;<br>    GPIO_InitStruct.Pull = GPIO_NOPULL;<br>    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;<br>    HAL_GPIO_Init(I2C3_SCL_GPIO_Port, &amp;GPIO_InitStruct);<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–SDAå¼•è„š</span><br>    GPIO_InitStruct.Pin = I2C3_SDA_Pin;<br>    HAL_GPIO_Init(I2C3_SDA_GPIO_Port, &amp;GPIO_InitStruct);<br><br>    <span class="hljs-comment">// å°†SCLå’ŒSDAæ‹‰é«˜</span><br>    HAL_GPIO_WritePin(I2C3_SCL_GPIO_Port, I2C3_SCL_Pin, GPIO_PIN_SET);<br>    HAL_GPIO_WritePin(I2C3_SDA_GPIO_Port, I2C3_SDA_Pin, GPIO_PIN_SET);<br>&#125;<br><br><span class="hljs-comment">//è¾“å‡ºæ¨¡å¼</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Set_SDA_Output</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="hljs-number">0</span>&#125;;<br><br>    GPIO_InitStruct.Pin = I2C3_SDA_Pin;<br>    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;<br>    GPIO_InitStruct.Pull = GPIO_NOPULL;<br>    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;<br>    HAL_GPIO_Init(I2C3_SDA_GPIO_Port, &amp;GPIO_InitStruct);<br>&#125;<br><br><span class="hljs-comment">// è¾“å…¥æ¨¡å¼</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Set_SDA_Input</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="hljs-number">0</span>&#125;;<br><br>    GPIO_InitStruct.Pin = I2C3_SDA_Pin;<br>    GPIO_InitStruct.Mode = GPIO_MODE_INPUT;<br>    GPIO_InitStruct.Pull = GPIO_NOPULL;<br>    HAL_GPIO_Init(I2C3_SDA_GPIO_Port, &amp;GPIO_InitStruct);<br>&#125;<br><br><span class="hljs-comment">// è®¾ç½®SCLçº¿ç”µå¹³</span><br><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Set_SCL</span><span class="hljs-params">(GPIO_PinState state)</span><br>&#123;<br>    HAL_GPIO_WritePin(I2C3_SCL_GPIO_Port, I2C3_SCL_Pin, state);<br>&#125;<br><br><span class="hljs-comment">// è®¾ç½®SDAçº¿ç”µå¹³</span><br><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Set_SDA</span><span class="hljs-params">(GPIO_PinState state)</span><br>&#123;<br>    I2C_Set_SDA_Output();  <span class="hljs-comment">// è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼</span><br>    HAL_GPIO_WritePin(I2C3_SDA_GPIO_Port, I2C3_SDA_Pin, state);<br>&#125;<br><br><span class="hljs-comment">// è¯»å–SDAçº¿ç”µå¹³</span><br><span class="hljs-type">static</span> GPIO_PinState <span class="hljs-title function_">I2C_Read_SDA</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    I2C_Set_SDA_Input();  <span class="hljs-comment">// è®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼</span><br>    <span class="hljs-keyword">return</span> HAL_GPIO_ReadPin(I2C3_SDA_GPIO_Port, I2C3_SDA_Pin);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Delay</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    <span class="hljs-comment">// å»¶æ—¶å‡½æ•°ï¼Œå¯ä»¥æ ¹æ®æ—¶é’Ÿé¢‘ç‡è°ƒæ•´</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">126</span>; i++)<br>    &#123;<br>        __NOP();<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Start</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>  I2C_Set_SDA(GPIO_PIN_SET);<br>    I2C_Set_SCL(GPIO_PIN_SET);<br>    I2C_Delay();<br>    I2C_Set_SDA(GPIO_PIN_RESET);<br>    I2C_Delay();<br>    I2C_Set_SCL(GPIO_PIN_RESET);<br>    I2C_Delay();<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Stop</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>  I2C_Set_SDA(GPIO_PIN_RESET);<br>    I2C_Set_SCL(GPIO_PIN_SET);<br>    I2C_Delay();<br>    I2C_Set_SDA(GPIO_PIN_SET);<br>    I2C_Delay();<br>&#125;<br><br><span class="hljs-comment">// å‘é€ä¸€ä¸ªå­—èŠ‚ï¼Œè¿”å›ACKçŠ¶æ€</span><br><span class="hljs-type">static</span> HAL_StatusTypeDef <span class="hljs-title function_">I2C_Send_Byte</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> byte)</span><br>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int8_t</span> i = <span class="hljs-number">7</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        GPIO_PinState bit = (byte &amp; (<span class="hljs-number">1</span> &lt;&lt; i)) ? GPIO_PIN_SET : GPIO_PIN_RESET;<br>        I2C_Set_SDA(bit);<br>        I2C_Delay();<br>        I2C_Set_SCL(GPIO_PIN_SET);<br>        I2C_Delay();<br>        I2C_Set_SCL(GPIO_PIN_RESET);<br>        I2C_Delay();<br>    &#125;<br><br>    <span class="hljs-comment">// æ¥æ”¶ACK</span><br>    I2C_Set_SDA_Input();  <span class="hljs-comment">// åˆ‡æ¢SDAä¸ºè¾“å…¥æ¨¡å¼</span><br>    I2C_Delay();<br>    I2C_Set_SCL(GPIO_PIN_SET);<br>    I2C_Delay();<br>    GPIO_PinState ack = I2C_Read_SDA();  <span class="hljs-comment">// è¯»å–ACKä¿¡å·</span><br>    I2C_Set_SCL(GPIO_PIN_RESET);<br>    I2C_Delay();<br><br>    <span class="hljs-keyword">return</span> (ack == GPIO_PIN_RESET) ? HAL_OK : HAL_ERROR;<br>&#125;<br><br><span class="hljs-comment">// è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶å‘é€ACKæˆ–NACK</span><br><span class="hljs-type">static</span> <span class="hljs-type">uint8_t</span> <span class="hljs-title function_">I2C_Read_Byte</span><span class="hljs-params">(GPIO_PinState ack)</span><br>&#123;<br>    <span class="hljs-type">uint8_t</span> byte = <span class="hljs-number">0</span>;<br><br>    I2C_Set_SDA_Input();  <span class="hljs-comment">// è®¾ç½®SDAä¸ºè¾“å…¥æ¨¡å¼</span><br>    I2C_Delay();<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int8_t</span> i = <span class="hljs-number">7</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        I2C_Set_SCL(GPIO_PIN_SET);<br>        I2C_Delay();<br>        <span class="hljs-keyword">if</span> (I2C_Read_SDA() == GPIO_PIN_SET)<br>        &#123;<br>            byte |= (<span class="hljs-number">1</span> &lt;&lt; i);<br>        &#125;<br>        I2C_Set_SCL(GPIO_PIN_RESET);<br>        I2C_Delay();<br>    &#125;<br><br>    <span class="hljs-comment">// å‘é€ACKæˆ–NACK</span><br>    I2C_Set_SDA(ack);  <span class="hljs-comment">// è®¾ç½®SDAä¸ºè¾“å‡ºæ¨¡å¼ï¼Œå¹¶å‘é€ACKæˆ–NACK</span><br>    I2C_Delay();<br>    I2C_Set_SCL(GPIO_PIN_SET);<br>    I2C_Delay();<br>    I2C_Set_SCL(GPIO_PIN_RESET);<br>    I2C_Delay();<br><br>    <span class="hljs-keyword">return</span> byte;<br>&#125;<br><br><span class="hljs-comment">// æ¨¡æ‹ŸI2Cå†™å…¥å‡½æ•°ï¼Œç±»ä¼¼HAL_I2C_Mem_Write</span><br>HAL_StatusTypeDef <span class="hljs-title function_">G_I2C_Mem_Write</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> devAddr, <span class="hljs-type">uint8_t</span> memAddr, <span class="hljs-type">uint8_t</span> *pData, <span class="hljs-type">uint16_t</span> size)</span><br>&#123;<br>    I2C_Start();<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte(devAddr &lt;&lt; <span class="hljs-number">1</span>) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte(memAddr) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint16_t</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (I2C_Send_Byte(pData[i]) != HAL_OK)<br>        &#123;<br>            I2C_Stop();<br>            <span class="hljs-keyword">return</span> HAL_ERROR;<br>        &#125;<br>    &#125;<br><br>    I2C_Stop();<br>    <span class="hljs-keyword">return</span> HAL_OK;<br>&#125;<br><br><span class="hljs-comment">// æ¨¡æ‹ŸI2Cè¯»å–å‡½æ•°ï¼Œç±»ä¼¼HAL_I2C_Mem_Read</span><br>HAL_StatusTypeDef <span class="hljs-title function_">G_I2C_Mem_Read</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> devAddr, <span class="hljs-type">uint8_t</span> memAddr, <span class="hljs-type">uint8_t</span> *pData, <span class="hljs-type">uint16_t</span> size)</span><br>&#123;<br>    I2C_Start();<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte(devAddr &lt;&lt; <span class="hljs-number">1</span>) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte(memAddr) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    I2C_Start();  <span class="hljs-comment">// é‡æ–°å¯åŠ¨ä¿¡å·</span><br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte((devAddr &lt;&lt; <span class="hljs-number">1</span>) | <span class="hljs-number">0x01</span>) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint16_t</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)<br>    &#123;<br>        pData[i] = I2C_Read_Byte((i == size - <span class="hljs-number">1</span>) ? I2C_NACK : I2C_ACK);<br>    &#125;<br><br>    I2C_Stop();<br>    <span class="hljs-keyword">return</span> HAL_OK;<br>&#125;<br><br><span class="hljs-comment">// æ¨¡æ‹ŸI2Cå†™å…¥å‡½æ•°ï¼Œæ”¯æŒ16ä½å¯„å­˜å™¨åœ°å€</span><br>HAL_StatusTypeDef <span class="hljs-title function_">I2C_Mem_Write</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> devAddr, <span class="hljs-type">uint16_t</span> memAddr, <span class="hljs-type">uint8_t</span> *pData, <span class="hljs-type">uint16_t</span> size)</span><br>&#123;<br>    I2C_Start();<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte(devAddr &lt;&lt; <span class="hljs-number">1</span>) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-comment">// å‘é€é«˜ä½åœ°å€å­—èŠ‚</span><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte((<span class="hljs-type">uint8_t</span>)(memAddr &gt;&gt; <span class="hljs-number">8</span>)) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-comment">// å‘é€ä½ä½åœ°å€å­—èŠ‚</span><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte((<span class="hljs-type">uint8_t</span>)(memAddr &amp; <span class="hljs-number">0xFF</span>)) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-comment">// å‘é€æ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint16_t</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (I2C_Send_Byte(pData[i]) != HAL_OK)<br>        &#123;<br>            I2C_Stop();<br>            <span class="hljs-keyword">return</span> HAL_ERROR;<br>        &#125;<br>    &#125;<br><br>    I2C_Stop();<br>    <span class="hljs-keyword">return</span> HAL_OK;<br>&#125;<br><br><br><span class="hljs-comment">// æ¨¡æ‹ŸI2Cè¯»å–å‡½æ•°ï¼Œæ”¯æŒ16ä½å¯„å­˜å™¨åœ°å€</span><br>HAL_StatusTypeDef <span class="hljs-title function_">I2C_Mem_Read</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> devAddr, <span class="hljs-type">uint16_t</span> memAddr, <span class="hljs-type">uint8_t</span> *pData, <span class="hljs-type">uint16_t</span> size)</span><br>&#123;<br>    I2C_Start();<br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte(devAddr &lt;&lt; <span class="hljs-number">1</span>) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-comment">// å‘é€é«˜ä½åœ°å€å­—èŠ‚</span><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte((<span class="hljs-type">uint8_t</span>)(memAddr &gt;&gt; <span class="hljs-number">8</span>)) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-comment">// å‘é€ä½ä½åœ°å€å­—èŠ‚</span><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte((<span class="hljs-type">uint8_t</span>)(memAddr &amp; <span class="hljs-number">0xFF</span>)) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    I2C_Start();  <span class="hljs-comment">// é‡æ–°å¯åŠ¨ä¿¡å·</span><br><br>    <span class="hljs-keyword">if</span> (I2C_Send_Byte((devAddr &lt;&lt; <span class="hljs-number">1</span>) | <span class="hljs-number">0x01</span>) != HAL_OK)<br>    &#123;<br>        I2C_Stop();<br>        <span class="hljs-keyword">return</span> HAL_ERROR;<br>    &#125;<br><br>    <span class="hljs-comment">// æ¥æ”¶æ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint16_t</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)<br>    &#123;<br>        pData[i] = I2C_Read_Byte((i == size - <span class="hljs-number">1</span>) ? I2C_NACK : I2C_ACK);<br>    &#125;<br><br>    I2C_Stop();<br>    <span class="hljs-keyword">return</span> HAL_OK;<br>&#125;<br></code></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> stm32å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gpio </tag>
            
            <tag> i2c </tag>
            
            <tag> gpioæ¨¡æ‹Ÿi2c </tag>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Bash è„šæœ¬ç»‘å®š IRQ åˆ°æŒ‡å®š CPU</title>
      <link href="/2024/10/23/%E4%BD%BF%E7%94%A8-Bash-%E8%84%9A%E6%9C%AC%E7%BB%91%E5%AE%9A-IRQ-%E5%88%B0%E6%8C%87%E5%AE%9A-CPU/"/>
      <url>/2024/10/23/%E4%BD%BF%E7%94%A8-Bash-%E8%84%9A%E6%9C%AC%E7%BB%91%E5%AE%9A-IRQ-%E5%88%B0%E6%8C%87%E5%AE%9A-CPU/</url>
      
        <content type="html"><![CDATA[<h3 id="ä½¿ç”¨-Bash-è„šæœ¬ç»‘å®š-IRQ-åˆ°æŒ‡å®š-CPU">ä½¿ç”¨ Bash è„šæœ¬ç»‘å®š IRQ åˆ°æŒ‡å®š CPU</h3><p>åœ¨ç°ä»£æ“ä½œç³»ç»Ÿä¸­ï¼Œåˆç†åœ°ç®¡ç†ä¸­æ–­è¯·æ±‚ï¼ˆIRQï¼‰å¯ä»¥æ˜¾è‘—æå‡ç³»ç»Ÿæ€§èƒ½ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Bash è„šæœ¬å°†ç‰¹å®šçš„ IRQ ç»‘å®šåˆ°æŒ‡å®šçš„ CPUï¼Œç¡®ä¿ç³»ç»Ÿèµ„æºçš„é«˜æ•ˆåˆ©ç”¨ã€‚</p><h4 id="è„šæœ¬æ¦‚è¿°">è„šæœ¬æ¦‚è¿°</h4><p>è¿™ä¸ª Bash è„šæœ¬çš„åŠŸèƒ½æ˜¯æ£€æŸ¥è¾“å…¥çš„ IRQ å·å’Œ CPU å·ï¼ŒéªŒè¯ IRQ æ˜¯å¦å­˜åœ¨ï¼Œå¹¶è®¾ç½®å…¶ <code>smp_affinity</code>ï¼Œä»¥ä¾¿å°†è¯¥ä¸­æ–­åˆ†é…ç»™ç‰¹å®šçš„ CPUã€‚</p><h4 id="è„šæœ¬å®ç°">è„šæœ¬å®ç°</h4><ol><li><p><strong>å‚æ•°æ£€æŸ¥</strong>ï¼šé¦–å…ˆï¼Œè„šæœ¬æ£€æŸ¥è¾“å…¥å‚æ•°çš„æ•°é‡æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ç”¨æˆ·è¾“å…¥äº† IRQ å’Œ CPU çš„æœ‰æ•ˆå€¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$#</span>&quot;</span> -ne 2 ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Usage: <span class="hljs-variable">$0</span> &lt;IRQ_NUMBER&gt; &lt;CPU_NUMBER&gt;&quot;</span><br>    <span class="hljs-built_in">exit</span> 1<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure></li><li><p><strong>éªŒè¯ IRQ å·</strong>ï¼šæ¥ä¸‹æ¥ï¼Œè„šæœ¬æ£€æŸ¥ <code>/proc/irq/&lt;IRQ_NUMBER&gt;</code> ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œä»¥ç¡®è®¤æŒ‡å®šçš„ IRQ æ˜¯å¦æœ‰æ•ˆã€‚å¦‚æœæ— æ•ˆï¼Œè„šæœ¬ä¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ IRQ å·ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ ! -d <span class="hljs-string">&quot;/proc/irq/<span class="hljs-variable">$IRQ_NUMBER</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;IRQ <span class="hljs-variable">$IRQ_NUMBER</span> does not exist. Available IRQs are:&quot;</span><br>    <span class="hljs-built_in">cat</span> /proc/interrupts | awk <span class="hljs-string">&#x27;&#123;print $1&#125;&#x27;</span> | sed <span class="hljs-string">&#x27;s/://g&#x27;</span> | grep -E <span class="hljs-string">&#x27;^[0-9]+$&#x27;</span><br>    <span class="hljs-built_in">exit</span> 1<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure></li><li><p><strong>è®¾ç½® CPU æ©ç </strong>ï¼šé€šè¿‡è®¡ç®— CPU æ©ç ï¼Œè„šæœ¬å¯ä»¥å°† IRQ ç»‘å®šåˆ°æŒ‡å®šçš„ CPUã€‚æ­¤å¤„ä½¿ç”¨ä½è¿ç®—å°†ä¸­æ–­åˆ†é…ç»™æŒ‡å®šçš„ CPUã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">AFFINITY_MASK=$(<span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;%x&quot;</span> $((<span class="hljs-number">1</span> &lt;&lt; CPU_NUMBER)))<br></code></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨å’ŒéªŒè¯è®¾ç½®</strong>ï¼šå°†è®¡ç®—å‡ºçš„æ©ç å†™å…¥ <code>/proc/irq/$IRQ_NUMBER/smp_affinity</code> æ–‡ä»¶ï¼Œè„šæœ¬éšåéªŒè¯è®¾ç½®æ˜¯å¦æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$AFFINITY_MASK</span> &gt; <span class="hljs-string">&quot;/proc/irq/<span class="hljs-variable">$IRQ_NUMBER</span>/smp_affinity&quot;</span><br>CURRENT_AFFINITY=$(<span class="hljs-built_in">cat</span> /proc/irq/<span class="hljs-variable">$IRQ_NUMBER</span>/smp_affinity)<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Current affinity for IRQ <span class="hljs-variable">$IRQ_NUMBER</span>: <span class="hljs-variable">$CURRENT_AFFINITY</span>&quot;</span><br></code></pre></td></tr></table></figure></li></ol><h4 id="ä½¿ç”¨ç¤ºä¾‹">ä½¿ç”¨ç¤ºä¾‹</h4><p>è¦ä½¿ç”¨è¿™ä¸ªè„šæœ¬ï¼Œåªéœ€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./script.sh &lt;IRQ_NUMBER&gt; &lt;CPU_NUMBER&gt;<br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³å°† IRQ 24 ç»‘å®šåˆ° CPU 2ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./script.sh 24 2<br></code></pre></td></tr></table></figure><h4 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># æ£€æŸ¥è¾“å…¥å‚æ•°</span><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$#</span>&quot;</span> -ne 2 ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Usage: <span class="hljs-variable">$0</span> &lt;IRQ_NUMBER&gt; &lt;CPU_NUMBER&gt;&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Author: liansixin</span><br><span class="hljs-string">    exit 1</span><br><span class="hljs-string">fi</span><br><span class="hljs-string"></span><br><span class="hljs-string">IRQ_NUMBER=<span class="hljs-variable">$1</span>  # è·å–ä¸­æ–­å·</span><br><span class="hljs-string">CPU_NUMBER=<span class="hljs-variable">$2</span>  # è·å–ç›®æ ‡CPUå·</span><br><span class="hljs-string"></span><br><span class="hljs-string"># æ£€æŸ¥ä¸­æ–­å·ç›®å½•æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-string">if [ ! -d &quot;</span>/proc/irq/<span class="hljs-variable">$IRQ_NUMBER</span><span class="hljs-string">&quot; ]; then</span><br><span class="hljs-string">    echo &quot;</span>IRQ <span class="hljs-variable">$IRQ_NUMBER</span> does not exist. Available IRQs are:<span class="hljs-string">&quot;</span><br><span class="hljs-string">    cat /proc/interrupts | awk &#x27;&#123;print <span class="hljs-variable">$1</span>&#125;&#x27; | sed &#x27;s/://g&#x27; | grep -E &#x27;^[0-9]+$&#x27;</span><br><span class="hljs-string">    exit 1</span><br><span class="hljs-string">fi</span><br><span class="hljs-string"></span><br><span class="hljs-string"># è®¡ç®—CPUæ©ç ï¼Œ1 &lt;&lt; CPU_NUMBER è¡¨ç¤ºå°†ä¸­æ–­ç»‘å®šåˆ°æŒ‡å®šçš„ CPU</span><br><span class="hljs-string">AFFINITY_MASK=<span class="hljs-subst">$(printf <span class="hljs-string">&quot;%x&quot;</span> $((1 &lt;&lt; CPU_NUMBER)</span>))</span><br><span class="hljs-string"></span><br><span class="hljs-string"># è®¾ç½®ä¸­æ–­çš„ smp_affinity</span><br><span class="hljs-string">echo &quot;</span>Setting IRQ <span class="hljs-variable">$IRQ_NUMBER</span> to CPU <span class="hljs-variable">$CPU_NUMBER</span> (affinity mask: 0x<span class="hljs-variable">$AFFINITY_MASK</span>)<span class="hljs-string">&quot;</span><br><span class="hljs-string">echo <span class="hljs-variable">$AFFINITY_MASK</span> &gt; &quot;</span>/proc/irq/<span class="hljs-variable">$IRQ_NUMBER</span>/smp_affinity<span class="hljs-string">&quot;</span><br><span class="hljs-string"></span><br><span class="hljs-string"># éªŒè¯è®¾ç½®æ˜¯å¦ç”Ÿæ•ˆ</span><br><span class="hljs-string">CURRENT_AFFINITY=<span class="hljs-subst">$(cat /proc/irq/$IRQ_NUMBER/smp_affinity)</span></span><br><span class="hljs-string">echo &quot;</span>Current affinity <span class="hljs-keyword">for</span> IRQ <span class="hljs-variable">$IRQ_NUMBER</span>: <span class="hljs-variable">$CURRENT_AFFINITY</span><span class="hljs-string">&quot;</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure><h4 id="æ€»ç»“">æ€»ç»“</h4><p>é€šè¿‡è¿™ä¸ªç®€å•çš„ Bash è„šæœ¬ï¼Œä½ å¯ä»¥è½»æ¾åœ°å°† IRQ ç»‘å®šåˆ°æŒ‡å®šçš„ CPUï¼Œä»è€Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚æœ‰æ•ˆçš„ IRQ ç®¡ç†å¯¹äºå¤šæ ¸ç³»ç»Ÿå°¤ä¸ºé‡è¦ï¼Œå¯ä»¥å¸®åŠ©å‡å°‘ä¸­æ–­å¤„ç†çš„å»¶è¿Ÿå’Œæé«˜å“åº”é€Ÿåº¦ã€‚å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œç®¡ç†ä¸­æ–­è¯·æ±‚ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Bashè„šæœ¬ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸­æ–­ </tag>
            
            <tag> irq </tag>
            
            <tag> irqç»‘å®šcpu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨STM32F407 GPIOæ¨¡æ‹ŸSMIæ—¶åºå¯¹PHYè®¾å¤‡è¿›è¡Œè¯»å†™é…ç½®</title>
      <link href="/2024/06/30/%E4%BD%BF%E7%94%A8STM32F407-GPIO%E6%A8%A1%E6%8B%9FSMI%E6%97%B6%E5%BA%8F%E5%AF%B9PHY%E8%AE%BE%E5%A4%87%E8%BF%9B%E8%A1%8C%E8%AF%BB%E5%86%99%E9%85%8D%E7%BD%AE/"/>
      <url>/2024/06/30/%E4%BD%BF%E7%94%A8STM32F407-GPIO%E6%A8%A1%E6%8B%9FSMI%E6%97%B6%E5%BA%8F%E5%AF%B9PHY%E8%AE%BE%E5%A4%87%E8%BF%9B%E8%A1%8C%E8%AF%BB%E5%86%99%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨STM32F407-GPIOæ¨¡æ‹ŸSMIæ—¶åºå¯¹PHYè®¾å¤‡è¿›è¡Œè¯»å†™é…ç½®">ä½¿ç”¨STM32F407 GPIOæ¨¡æ‹ŸSMIæ—¶åºå¯¹PHYè®¾å¤‡è¿›è¡Œè¯»å†™é…ç½®</h2><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œå¸¸å¸¸éœ€è¦é€šè¿‡SMIï¼ˆSerial Management Interfaceï¼‰æ¥é…ç½®PHYï¼ˆPhysical Layer Deviceï¼‰è®¾å¤‡ã€‚SMIåè®®åŒ…æ‹¬MDIOï¼ˆManagement Data Input/Outputï¼‰å’ŒMDCï¼ˆManagement Data Clockï¼‰ä¿¡å·ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªä¿¡å·ä¸PHYè®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32F407é€šè¿‡GPIOæ¨¡æ‹ŸSMIæ—¶åºå¯¹ä¸ƒä¸ªPHYè®¾å¤‡è¿›è¡Œè¯»å†™é…ç½®ã€‚</p><h3 id="1-SMIæ—¶åºä»‹ç»">1. SMIæ—¶åºä»‹ç»</h3><p>SMIåè®®ç”¨äºé€šè¿‡MDIOå’ŒMDCä¿¡å·æ¥é…ç½®PHYè®¾å¤‡çš„å¯„å­˜å™¨ã€‚SMIåŒ…æ‹¬ä¸¤ç§æ“ä½œï¼šè¯»æ“ä½œå’Œå†™æ“ä½œã€‚ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ä»‹ç»å…¶æ—¶åºè¦æ±‚ã€‚</p><h4 id="å†™æ“ä½œæ—¶åº">å†™æ“ä½œæ—¶åº</h4><ol><li><strong>èµ·å§‹å¸§</strong>ï¼š32ä¸ªè¿ç»­çš„1ä½ã€‚</li><li><strong>èµ·å§‹ç </strong>ï¼š01ã€‚</li><li><strong>æ“ä½œç </strong>ï¼š10è¡¨ç¤ºè¯»ï¼Œ01è¡¨ç¤ºå†™ã€‚</li><li><strong>PHYåœ°å€</strong>ï¼š5ä½ã€‚</li><li><strong>å¯„å­˜å™¨åœ°å€</strong>ï¼š5ä½ã€‚</li><li><strong>å‘¨è½¬ä½</strong>ï¼šå†™æ“ä½œä¸º10ã€‚</li><li><strong>æ•°æ®</strong>ï¼š16ä½ã€‚</li></ol><h4 id="è¯»æ“ä½œæ—¶åº">è¯»æ“ä½œæ—¶åº</h4><ol><li><strong>èµ·å§‹å¸§</strong>ï¼š32ä¸ªè¿ç»­çš„1ä½ã€‚</li><li><strong>èµ·å§‹ç </strong>ï¼š01ã€‚</li><li><strong>æ“ä½œç </strong>ï¼š10è¡¨ç¤ºè¯»ã€‚</li><li><strong>PHYåœ°å€</strong>ï¼š5ä½ã€‚</li><li><strong>å¯„å­˜å™¨åœ°å€</strong>ï¼š5ä½ã€‚</li><li><strong>å‘¨è½¬ä½</strong>ï¼šZ0ï¼ˆé«˜é˜»æ€ï¼Œéšåè¯»å–0ï¼‰ã€‚</li><li><strong>æ•°æ®</strong>ï¼š16ä½ã€‚</li></ol><h3 id="2-ç¡¬ä»¶ä»‹ç»">2. ç¡¬ä»¶ä»‹ç»</h3><p>æˆ‘ä»¬çš„ç¡¬ä»¶å¹³å°æ˜¯STM32F407ï¼Œä¸ƒä¸ªPHYè®¾å¤‡çš„MDIOè¿æ¥åœ¨åŒä¸€ä¸ªGPIOå¼•è„šä¸Šï¼ŒMDCåˆ†åˆ«è¿æ¥åœ¨ä¸ƒä¸ªä¸åŒçš„GPIOå¼•è„šä¸Šã€‚</p><h4 id="STM32å¼•è„šé…ç½®">STM32å¼•è„šé…ç½®</h4><p>ä½¿ç”¨STM32CubeMXè¿›è¡Œå¼•è„šé…ç½®ï¼š</p><ul><li><strong>MDIO</strong>ï¼šä½¿ç”¨GPIOFçš„ç¬¬5å¼•è„šï¼ˆPF5ï¼‰ã€‚</li><li><strong>MDC</strong>ï¼šä½¿ç”¨GPIOFçš„ç¬¬6åˆ°12å¼•è„šï¼ˆPF6åˆ°PF12ï¼‰ã€‚</li></ul><h3 id="3-GPIOæ¨¡æ‹ŸSMIå®ç°">3. GPIOæ¨¡æ‹ŸSMIå®ç°</h3><h4 id="DWTï¼ˆData-Watchpoint-and-Traceï¼‰å»¶æ—¶å®ç°">DWTï¼ˆData Watchpoint and Traceï¼‰å»¶æ—¶å®ç°</h4><p>ä¸ºäº†æ»¡è¶³SMIæ—¶åºè¦æ±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨DWTè¿›è¡Œç²¾ç¡®çš„å»¶æ—¶æ“ä½œã€‚ä»¥ä¸‹æ˜¯DWTåˆå§‹åŒ–å’Œçº³ç§’å»¶æ—¶å‡½æ•°çš„å®ç°ã€‚</p><p><strong>dwt_delay.h</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> DWT_DELAY_H</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DWT_DELAY_H</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stm32f4xx_hal.h&quot;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">DWT_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">DWT_Delay</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> ns)</span>;<br><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">// DWT_DELAY_H</span></span><br></code></pre></td></tr></table></figure><p><strong>dwt_delay.c</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;dwt_delay.h&quot;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">DWT_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    CoreDebug-&gt;DEMCR |= CoreDebug_DEMCR_TRCENA_Msk;<br>    DWT-&gt;CYCCNT = <span class="hljs-number">0</span>;<br>    DWT-&gt;CTRL |= DWT_CTRL_CYCCNTENA_Msk;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">DWT_Delay</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> ns)</span> &#123;<br>    <span class="hljs-type">uint32_t</span> ns_count_tick =  ns * (HAL_RCC_GetHCLKFreq() / <span class="hljs-number">1000000000</span>);<br>    <span class="hljs-type">uint32_t</span> start_tick = DWT-&gt;CYCCNT;<br>    <span class="hljs-keyword">while</span> ((DWT-&gt;CYCCNT - start_tick) &lt; ns_count_tick);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="PHYè¯»å†™æ“ä½œå‡½æ•°å®ç°">PHYè¯»å†™æ“ä½œå‡½æ•°å®ç°</h4><p><strong>phy_smi.h</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> PHY_SMI_H</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> PHY_SMI_H</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stm32f4xx_hal.h&quot;</span></span><br><br><span class="hljs-comment">// å®šä¹‰7ä¸ªPHYè®¾å¤‡çš„MDIOå’ŒMDC GPIOç«¯å£å’Œå¼•è„š</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDIO_PORT       GPIOF</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDIO_PIN        GPIO_PIN_5</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PORT_1      GPIOF</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PIN_1       GPIO_PIN_6</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PORT_2      GPIOF</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PIN_2       GPIO_PIN_7</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PORT_3      GPIOF</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PIN_3       GPIO_PIN_8</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PORT_4      GPIOF</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PIN_4       GPIO_PIN_9</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PORT_5      GPIOF</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PIN_5       GPIO_PIN_10</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PORT_6      GPIOF</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PIN_6       GPIO_PIN_11</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PORT_7      GPIOF</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_PIN_7       GPIO_PIN_12</span><br><br><span class="hljs-comment">// å®šä¹‰æ—¶åºå¸¸é‡</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MDC_DELAY_NS    400  <span class="hljs-comment">// æ ¹æ®éœ€è¦è°ƒæ•´å»¶è¿Ÿæ—¶é—´ï¼ˆçº³ç§’ï¼‰</span></span><br><br><span class="hljs-comment">// å‡½æ•°å£°æ˜</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">PHY_Write</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> phyAddr, <span class="hljs-type">uint8_t</span> regAddr, <span class="hljs-type">uint16_t</span> data)</span>;<br><span class="hljs-type">uint16_t</span> <span class="hljs-title function_">PHY_Read</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> phyAddr, <span class="hljs-type">uint8_t</span> regAddr)</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">PHY_WriteAll</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> regAddr, <span class="hljs-type">uint16_t</span> data)</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">PHY_ReadAll</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> regAddr, <span class="hljs-type">uint16_t</span>* data)</span>;<br><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">// PHY_SMI_H</span></span><br></code></pre></td></tr></table></figure><p><strong>phy_smi.c</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;phy_smi.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;dwt_delay.h&quot;</span></span><br><br><span class="hljs-comment">// å†…éƒ¨ä½¿ç”¨çš„é™æ€å‡½æ•°</span><br><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">MDIO_Set</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> value)</span> &#123;<br>    HAL_GPIO_WritePin(MDIO_PORT, MDIO_PIN, value ? GPIO_PIN_SET : GPIO_PIN_RESET);<br>&#125;<br><br><span class="hljs-type">static</span> <span class="hljs-type">uint8_t</span> <span class="hljs-title function_">MDIO_Get</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> HAL_GPIO_ReadPin(MDIO_PORT, MDIO_PIN);<br>&#125;<br><br><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">MDC_Toggle</span><span class="hljs-params">(GPIO_TypeDef *port, <span class="hljs-type">uint16_t</span> pin)</span> &#123;<br>    HAL_GPIO_WritePin(port, pin, GPIO_PIN_SET);<br>    DWT_Delay(MDC_DELAY_NS);<br>    HAL_GPIO_WritePin(port, pin, GPIO_PIN_RESET);<br>    DWT_Delay(MDC_DELAY_NS);<br>&#125;<br><br><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">MDIO_WriteBit</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> bit, GPIO_TypeDef *mdc_port, <span class="hljs-type">uint16_t</span> mdc_pin)</span> &#123;<br>    MDIO_Set(bit);<br>    MDC_Toggle(mdc_port, mdc_pin);<br>&#125;<br><br><span class="hljs-type">static</span> <span class="hljs-type">uint8_t</span> <span class="hljs-title function_">MDIO_ReadBit</span><span class="hljs-params">(GPIO_TypeDef *mdc_port, <span class="hljs-type">uint16_t</span> mdc_pin)</span> &#123;<br>    MDC_Toggle(mdc_port, mdc_pin);<br>    <span class="hljs-keyword">return</span> MDIO_Get();<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">PHY_Write</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> phyAddr, <span class="hljs-type">uint8_t</span> regAddr, <span class="hljs-type">uint16_t</span> data)</span> &#123;<br>    GPIO_TypeDef *mdc_ports[] = &#123;MDC_PORT_1, MDC_PORT_2, MDC_PORT_3, MDC_PORT_4, MDC_PORT_5, MDC_PORT_6, MDC_PORT_7&#125;;<br>    <span class="hljs-type">uint16_t</span> mdc_pins[] = &#123;MDC_PIN_1, MDC_PIN_2, MDC_PIN_3, MDC_PIN_4, MDC_PIN_5, MDC_PIN_6, MDC_PIN_7&#125;;<br><br>    GPIO_TypeDef *mdc_port = mdc_ports[phyAddr];<br>    <span class="hljs-type">uint16_t</span> mdc_pin = mdc_pins[phyAddr];<br><br>    <span class="hljs-comment">// ç”Ÿæˆå¸§èµ·å§‹ä½ï¼ˆ32ä¸ª1ï¼‰</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">32</span>; i++) &#123;<br>        MDIO_WriteBit(<span class="hljs-number">1</span>, mdc_port, mdc_pin);<br>    &#125;<br><br>    <span class="hljs-comment">// å†™å…¥èµ·å§‹ç ï¼ˆ01ï¼‰ã€å†™æ“ä½œç ï¼ˆ01ï¼‰ã€PHYåœ°å€ã€å¯„å­˜å™¨åœ°å€å’Œå‘¨è½¬ä½ï¼ˆ10ï¼‰</span><br>    MDIO_WriteBit(<span class="hljs-number">0</span>, mdc_port, mdc_pin);<br>    MDIO_WriteBit(<span class="hljs-number">1</span>, mdc_port, mdc_pin);<br>    MDIO_WriteBit(<span class="hljs-number">0</span>, mdc_port, mdc_pin);<br>    MDIO_WriteBit(<span class="hljs-number">1</span>, mdc_port, mdc_pin);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">4</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        MDIO_WriteBit((phyAddr &gt;&gt; i) &amp; <span class="hljs-number">0x01</span>, mdc_port, mdc_pin);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">4</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        MDIO_WriteBit((regAddr &gt;&gt; i) &amp; <span class="hljs-number">0x01</span>, mdc_port, mdc_pin);<br>    &#125;<br>    MDIO_WriteBit(<span class="hljs-number">1</span>, mdc_port, mdc_pin);<br>    MDIO_WriteBit(<span class="hljs-number">0</span>, mdc_port, mdc_pin);<br><br>    <span class="hljs-comment">// å†™å…¥æ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">15</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        MDIO_WriteBit((data &gt;&gt; i) &amp; <span class="hljs-number">0x01</span>, mdc_port, mdc_pin);<br>    &#125;<br><br>    <span class="hljs-comment">// é‡Šæ”¾MDIO</span><br>    MDIO_Set(<span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-type">uint16_t</span> <span class="hljs-title function_">PHY_Read</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> phyAddr, <span class="hljs-type">uint8_t</span> regAddr)</span> &#123;<br>    GPIO_TypeDef *mdc_ports[] = &#123;MDC_PORT_1, MDC_PORT_2, MDC_PORT_3, MDC_PORT_4, MDC_PORT_5, MDC_PORT_6, MDC_PORT_7&#125;;<br>    <span class="hljs-type">uint16_t</span> mdc_pins[] = &#123;MDC_PIN_1, MDC_PIN_2, MDC_PIN_3, MDC_PIN_4, MDC_PIN_5, MDC_PIN_6, MDC_PIN_7&#125;;<br><br>    GPIO_TypeDef *mdc_port = mdc_ports[phyAddr];<br>    <span class="hljs-type">uint16_t</span> mdc_pin = mdc_pins[phyAddr];<br><br>    <span class="hljs-type">uint16_t</span> data = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// ç”Ÿæˆå¸§èµ·å§‹ä½ï¼ˆ32ä¸ª1ï¼‰</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">32</span>; i++) &#123;<br>        MDIO_WriteBit(<span class="hljs-number">1</span>, mdc_port, mdc_pin);<br>    &#125;<br><br>    <span class="hljs-comment">// å†™å…¥èµ·å§‹ç ï¼ˆ01ï¼‰ã€è¯»æ“ä½œç ï¼ˆ10ï¼‰ã€PHYåœ°å€ã€å¯„å­˜å™¨åœ°å€å’Œå‘¨è½¬ä½ï¼ˆZ0ï¼‰</span><br>    MDIO_WriteBit(<span class="hljs-number">0</span>, mdc_port, mdc_pin);<br>    MDIO_WriteBit(<span class="hljs-number">1</span>, mdc_port, mdc_pin);<br>    MDIO_WriteBit(<span class="hljs-number">1</span>, mdc_port, mdc_pin);<br>    MDIO_WriteBit(<span class="hljs-number">0</span>, mdc<br><br>_port, mdc_pin);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">4</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        MDIO_WriteBit((phyAddr &gt;&gt; i) &amp; <span class="hljs-number">0x01</span>, mdc_port, mdc_pin);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">4</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        MDIO_WriteBit((regAddr &gt;&gt; i) &amp; <span class="hljs-number">0x01</span>, mdc_port, mdc_pin);<br>    &#125;<br><br>    <span class="hljs-comment">// åˆ‡æ¢MDIOä¸ºè¾“å…¥æ¨¡å¼è¿›è¡Œå‘¨è½¬</span><br>    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="hljs-number">0</span>&#125;;<br>    GPIO_InitStruct.Pin = MDIO_PIN;<br>    GPIO_InitStruct.Mode = GPIO_MODE_INPUT;<br>    GPIO_InitStruct.Pull = GPIO_NOPULL;<br>    HAL_GPIO_Init(MDIO_PORT, &amp;GPIO_InitStruct);<br><br>    <span class="hljs-comment">// å‘¨è½¬</span><br>    MDIO_ReadBit(mdc_port, mdc_pin);  <span class="hljs-comment">// å‘¨è½¬æ—¶çš„è™šæ‹Ÿè¯»å–</span><br>    DWT_Delay(MDC_DELAY_NS);<br><br>    <span class="hljs-comment">// è¯»å–æ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">15</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        data |= (MDIO_ReadBit(mdc_port, mdc_pin) &lt;&lt; i);<br>    &#125;<br><br>    <span class="hljs-comment">// åˆ‡æ¢MDIOå›è¾“å‡ºæ¨¡å¼</span><br>    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;<br>    HAL_GPIO_Init(MDIO_PORT, &amp;GPIO_InitStruct);<br><br>    <span class="hljs-comment">// é‡Šæ”¾MDIO</span><br>    MDIO_Set(<span class="hljs-number">0</span>);<br><br>    <span class="hljs-keyword">return</span> data;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">PHY_WriteAll</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> regAddr, <span class="hljs-type">uint16_t</span> data)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint8_t</span> phyAddr = <span class="hljs-number">0</span>; phyAddr &lt; <span class="hljs-number">7</span>; phyAddr++) &#123;<br>        PHY_Write(phyAddr, regAddr, data);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">PHY_ReadAll</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> regAddr, <span class="hljs-type">uint16_t</span>* data)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint8_t</span> phyAddr = <span class="hljs-number">0</span>; phyAddr &lt; <span class="hljs-number">7</span>; phyAddr++) &#123;<br>        data[phyAddr] = PHY_Read(phyAddr, regAddr);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ä½¿ç”¨ç¤ºä¾‹">4. ä½¿ç”¨ç¤ºä¾‹</h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªåœ¨ä¸»ç¨‹åºä¸­ä½¿ç”¨<code>PHY_WriteAll</code>å’Œ<code>PHY_ReadAll</code>æ¥åŒæ—¶å¯¹æ‰€æœ‰PHYè®¾å¤‡è¿›è¡Œè¯»å†™æ“ä½œçš„ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;main.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;dwt_delay.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;phy_smi.h&quot;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    <span class="hljs-comment">// HALåº“åˆå§‹åŒ–</span><br>    HAL_Init();<br><br>    <span class="hljs-comment">// ç³»ç»Ÿæ—¶é’Ÿé…ç½®</span><br>    SystemClock_Config();<br><br>    <span class="hljs-comment">// å¯ç”¨DWT</span><br>    DWT_Init();<br><br>    <span class="hljs-comment">// å…¶ä»–åˆå§‹åŒ–ä»£ç </span><br><br>    <span class="hljs-comment">// é…ç½®æ‰€æœ‰PHYè®¾å¤‡çš„æŸä¸ªå¯„å­˜å™¨</span><br>    <span class="hljs-type">uint16_t</span> regAddr = <span class="hljs-number">0x1</span>;  <span class="hljs-comment">// ç¤ºä¾‹å¯„å­˜å™¨åœ°å€</span><br>    <span class="hljs-type">uint16_t</span> writeData = <span class="hljs-number">0x1234</span>;  <span class="hljs-comment">// ç¤ºä¾‹å†™å…¥æ•°æ®</span><br>    PHY_WriteAll(regAddr, writeData);<br><br>    <span class="hljs-comment">// è¯»å–æ‰€æœ‰PHYè®¾å¤‡çš„æŸä¸ªå¯„å­˜å™¨</span><br>    <span class="hljs-type">uint16_t</span> readData[<span class="hljs-number">7</span>];<br>    PHY_ReadAll(regAddr, readData);<br><br>    <span class="hljs-comment">// è¾“å‡ºè¯»å–çš„æ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span>; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;PHY %d: 0x%04X\n&quot;</span>, i, readData[i]);<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-comment">// ä¸»å¾ªç¯</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º">ç»“è®º</h3><p>é€šè¿‡GPIOæ¨¡æ‹ŸSMIæ—¶åºæ¥è¯»å†™PHYè®¾å¤‡æ˜¯ä¸€ä¸ªå¤æ‚ä½†æœ‰è¶£çš„è¿‡ç¨‹ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¦‚ä½•é…ç½®STM32F407ä¸ä¸ƒä¸ªPHYè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶é€šè¿‡å…·ä½“çš„ä»£ç å®ç°äº†è¯»å†™æ“ä½œã€‚å¸Œæœ›é€šè¿‡æœ¬æ–‡ï¼Œæ‚¨èƒ½å¯¹PHYè®¾å¤‡çš„é…ç½®æœ‰ä¸€ä¸ªæ·±å…¥çš„äº†è§£ï¼Œå¹¶èƒ½å¤Ÿåœ¨å®é™…é¡¹ç›®ä¸­çµæ´»åº”ç”¨ã€‚</p><p>å¦‚æœ‰ä»»ä½•ç–‘é—®æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> STM32 </category>
          
          <category> SMI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> GPIO </tag>
            
            <tag> SMI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Rust å°è£… UDP å’Œ TCP å¥—æ¥å­—</title>
      <link href="/2024/03/09/%E4%BD%BF%E7%94%A8-Rust-%E5%B0%81%E8%A3%85-UDP-%E5%92%8C-TCP-%E5%A5%97%E6%8E%A5%E5%AD%97/"/>
      <url>/2024/03/09/%E4%BD%BF%E7%94%A8-Rust-%E5%B0%81%E8%A3%85-UDP-%E5%92%8C-TCP-%E5%A5%97%E6%8E%A5%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨-Rust-å°è£…-UDP-å’Œ-TCP-å¥—æ¥å­—">ä½¿ç”¨ Rust å°è£… UDP å’Œ TCP å¥—æ¥å­—</h2><h3 id="æ‘˜è¦ï¼š"><strong>æ‘˜è¦ï¼š</strong></h3><p>åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼ŒUDP å’Œ TCP å¥—æ¥å­—æ˜¯å¸¸ç”¨çš„é€šä¿¡æ–¹å¼ã€‚æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Rust è¯­è¨€å°è£… UDP å’Œ TCP å¥—æ¥å­—ï¼Œå¹¶æä¾›äº†ç¤ºä¾‹ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚</p><h3 id="å¼•è¨€ï¼š"><strong>å¼•è¨€ï¼š</strong></h3><p>Rust æ˜¯ä¸€ç§å®‰å…¨ã€å¹¶å‘ã€å®ç”¨çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œå®ƒæä¾›äº†å¼ºå¤§çš„ç½‘ç»œç¼–ç¨‹èƒ½åŠ›ã€‚åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼ŒUDPï¼ˆUser Datagram Protocolï¼‰å’ŒTCPï¼ˆTransmission Control Protocolï¼‰æ˜¯ä¸¤ç§å¸¸ç”¨çš„ç½‘ç»œé€šä¿¡åè®®ï¼Œå®ƒä»¬åˆ†åˆ«æä¾›äº†ä¸åŒçš„ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Rust å°è£… UDP å’Œ TCP å¥—æ¥å­—ï¼Œå¹¶æ¼”ç¤ºäº†å¦‚ä½•åœ¨å°è£…çš„å¥—æ¥å­—ä¸Šå‘é€å’Œæ¥æ”¶æ•°æ®ã€‚</p><h3 id="å°è£…-UDP-å¥—æ¥å­—ï¼š"><strong>å°è£… UDP å¥—æ¥å­—ï¼š</strong></h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>MyUdpSocket</code> çš„ç»“æ„ä½“ï¼Œç”¨äºå°è£… UDP å¥—æ¥å­—ã€‚è¯¥ç»“æ„ä½“åŒ…å«ä¸€ä¸ª <code>socket</code> å­—æ®µï¼Œç”¨äºå­˜å‚¨å®é™…çš„ UDP å¥—æ¥å­—ã€‚æˆ‘ä»¬ä¸º <code>MyUdpSocket</code> ç»“æ„ä½“å®ç°äº†ä»¥ä¸‹æ–¹æ³•ï¼š</p><ul><li><code>new(addr: &amp;str) -&gt; Result&lt;Self&gt;</code>ï¼šç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„ UDP å¥—æ¥å­—ï¼Œå¹¶ç»‘å®šåˆ°æŒ‡å®šçš„åœ°å€ã€‚</li><li><code>send_to(buf: &amp;[u8], addr: &amp;str) -&gt; Result&lt;usize&gt;</code>ï¼šç”¨äºå‘æŒ‡å®šåœ°å€å‘é€æ•°æ®ã€‚</li><li><code>recv_from(buf: &amp;mut [u8]) -&gt; Result&lt;(usize, SocketAddr)&gt;</code>ï¼šç”¨äºæ¥æ”¶æ•°æ®ã€‚</li></ul><h3 id="å°è£…-TCP-å¥—æ¥å­—ï¼š"><strong>å°è£… TCP å¥—æ¥å­—ï¼š</strong></h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>MyTcpListener</code> çš„ç»“æ„ä½“ï¼Œç”¨äºå°è£… TCP ç›‘å¬å™¨ã€‚è¯¥ç»“æ„ä½“åŒ…å«ä¸€ä¸ª <code>listener</code> å­—æ®µï¼Œç”¨äºå­˜å‚¨å®é™…çš„ TCP ç›‘å¬å™¨ã€‚æˆ‘ä»¬ä¸º <code>MyTcpListener</code> ç»“æ„ä½“å®ç°äº†ä»¥ä¸‹æ–¹æ³•ï¼š</p><ul><li><code>new(addr: &amp;str) -&gt; Result&lt;Self&gt;</code>ï¼šç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„ TCP ç›‘å¬å™¨ï¼Œå¹¶ç»‘å®šåˆ°æŒ‡å®šçš„åœ°å€ã€‚</li><li><code>accept() -&gt; Result&lt;(TcpStream, SocketAddr)&gt;</code>ï¼šç”¨äºæ¥å—æ–°çš„ TCP è¿æ¥ã€‚</li></ul><h3 id="ç¤ºä¾‹ç”¨æ³•ï¼š"><strong>ç¤ºä¾‹ç”¨æ³•ï¼š</strong></h3><p>åœ¨ç¤ºä¾‹ç”¨æ³•éƒ¨åˆ†ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å°è£…çš„ UDP å¥—æ¥å­—å’Œ TCP ç›‘å¬å™¨å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºäº†å°è£…äº† UDP å¥—æ¥å­—å’Œ TCP ç›‘å¬å™¨çš„å¯¹è±¡ï¼Œç„¶åé€šè¿‡è°ƒç”¨ç›¸åº”çš„æ–¹æ³•æ¥å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚</p><h3 id="æ€»ç»“ï¼š"><strong>æ€»ç»“ï¼š</strong></h3><p>é€šè¿‡å°è£… UDP å¥—æ¥å­—å’Œ TCP å¥—æ¥å­—ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æ–¹ä¾¿åœ°ä½¿ç”¨è¿™äº›å¥—æ¥å­—ï¼Œå¹¶æä¾›äº†ä¸€ç§æ›´åŠ æ¨¡å—åŒ–å’Œå¯å¤ç”¨çš„ç¼–ç¨‹æ–¹å¼ã€‚Rust çš„å®‰å…¨æ€§å’Œå¹¶å‘æ€§ä½¿å¾—å®ƒæˆä¸ºä¸€ä¸ªç†æƒ³çš„é€‰æ‹©æ¥è¿›è¡Œç½‘ç»œç¼–ç¨‹ï¼Œå¹¶ä¸”é€šè¿‡å°è£…å¥—æ¥å­—ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨ Rust çš„ç‰¹æ€§æ¥æ„å»ºå¯é çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚</p><h3 id="å‚è€ƒæ–‡çŒ®ï¼š"><strong>å‚è€ƒæ–‡çŒ®ï¼š</strong></h3><ol><li>Rust å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://doc.rust-lang.org/">https://doc.rust-lang.org/</a></li><li>Rust æ ‡å‡†åº“æ–‡æ¡£ï¼š<a href="https://doc.rust-lang.org/std/index.html">https://doc.rust-lang.org/std/index.html</a></li><li>The Rust Programming Languageï¼ˆRust ç¼–ç¨‹è¯­è¨€ä¹¦ç±ï¼‰ï¼š<a href="https://www.rust-lang.org/zh-CN/what/triangle">https://www.rust-lang.org/zh-CN/what/triangle</a></li><li>Rustç½‘ç»œç¼–ç¨‹ï¼ˆThe Bookï¼‰ï¼š<a href="https://book.async.rs/">https://book.async.rs/</a></li></ol><h3 id="å®Œæ•´ç¤ºä¾‹ä»£ç ï¼š"><strong>å®Œæ•´ç¤ºä¾‹ä»£ç ï¼š</strong></h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::net::&#123;UdpSocket, TcpListener, TcpStream, SocketAddr&#125;;<br><span class="hljs-keyword">use</span> std::io::&#123;<span class="hljs-type">Result</span>, Error, ErrorKind&#125;;<br><br><span class="hljs-comment">// å°è£…UDPå¥—æ¥å­—</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyUdpSocket</span> &#123;<br>    socket: UdpSocket,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyUdpSocket</span> &#123;<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„UDPå¥—æ¥å­—</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(addr: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-keyword">Self</span>&gt; &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">socket</span> = UdpSocket::<span class="hljs-title function_ invoke__">bind</span>(addr)?;<br>        <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-keyword">Self</span> &#123; socket &#125;)<br>    &#125;<br><br>    <span class="hljs-comment">// å‘é€æ•°æ®</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">send_to</span>(&amp;<span class="hljs-keyword">self</span>, buf: &amp;[<span class="hljs-type">u8</span>], addr: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">usize</span>&gt; &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">dest_addr</span>: SocketAddr = addr.<span class="hljs-title function_ invoke__">parse</span>().<span class="hljs-title function_ invoke__">map_err</span>(|_| Error::<span class="hljs-title function_ invoke__">new</span>(ErrorKind::Other, <span class="hljs-string">&quot;Invalid socket address&quot;</span>))?;<br>        <span class="hljs-keyword">self</span>.socket.<span class="hljs-title function_ invoke__">send_to</span>(buf, &amp;dest_addr)<br>    &#125;<br><br>    <span class="hljs-comment">// æ¥æ”¶æ•°æ®</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">recv_from</span>(&amp;<span class="hljs-keyword">self</span>, buf: &amp;<span class="hljs-keyword">mut</span> [<span class="hljs-type">u8</span>]) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(<span class="hljs-type">usize</span>, SocketAddr)&gt; &#123;<br>        <span class="hljs-keyword">self</span>.socket.<span class="hljs-title function_ invoke__">recv_from</span>(buf)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å°è£…TCPå¥—æ¥å­—</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyTcpListener</span> &#123;<br>    listener: TcpListener,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTcpListener</span> &#123;<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„TCPç›‘å¬å™¨</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(addr: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-keyword">Self</span>&gt; &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">listener</span> = TcpListener::<span class="hljs-title function_ invoke__">bind</span>(addr)?;<br>        <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-keyword">Self</span> &#123; listener &#125;)<br>    &#125;<br><br>    <span class="hljs-comment">// æ¥æ”¶è¿æ¥</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">accept</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(TcpStream, SocketAddr)&gt; &#123;<br>        <span class="hljs-keyword">self</span>.listener.<span class="hljs-title function_ invoke__">accept</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// ç¤ºä¾‹ç”¨æ³•</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; &#123;<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå°è£…äº†UDPå¥—æ¥å­—çš„å¯¹è±¡</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">udp_socket</span> = MyUdpSocket::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;127.0.0.1:8080&quot;</span>)?;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;UDP socket bound to &#123;&#125;&quot;</span>, <span class="hljs-string">&quot;127.0.0.1:8080&quot;</span>);<br><br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå°è£…äº†TCPç›‘å¬å™¨çš„å¯¹è±¡</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">tcp_listener</span> = MyTcpListener::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;127.0.0.1:8081&quot;</span>)?;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;TCP listener bound to &#123;&#125;&quot;</span>, <span class="hljs-string">&quot;127.0.0.1:8081&quot;</span>);<br><br>    <span class="hljs-comment">// å‘é€UDPæ•°æ®</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">udp_buf</span> = <span class="hljs-string">b&quot;Hello, UDP!&quot;</span>;<br>    udp_socket.<span class="hljs-title function_ invoke__">send_to</span>(udp_buf, <span class="hljs-string">&quot;127.0.0.1:8888&quot;</span>)?;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;UDP message sent&quot;</span>);<br><br>    <span class="hljs-comment">// æ¥æ”¶UDPæ•°æ®</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">udp_recv_buf</span> = [<span class="hljs-number">0u8</span>; <span class="hljs-number">1024</span>];<br>    <span class="hljs-keyword">let</span> (udp_recv_len, udp_src_addr) = udp_socket.<span class="hljs-title function_ invoke__">recv_from</span>(&amp;<span class="hljs-keyword">mut</span> udp_recv_buf)?;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Received &#123;&#125; bytes from &#123;&#125;: &#123;:?&#125;&quot;</span>, udp_recv_len, udp_src_addr, &amp;udp_recv_buf[..udp_recv_len]);<br><br>    <span class="hljs-title function_ invoke__">Ok</span>(())<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ·±å…¥ç†è§£-UDP-å’Œ-TCP-å¥—æ¥å­—">æ·±å…¥ç†è§£ UDP å’Œ TCP å¥—æ¥å­—</h2><h3 id="UDP-å¥—æ¥å­—çš„ç‰¹æ€§ä¸åº”ç”¨åœºæ™¯"><strong>UDP å¥—æ¥å­—çš„ç‰¹æ€§ä¸åº”ç”¨åœºæ™¯</strong></h3><p>UDP æ˜¯ä¸€ç§æ— è¿æ¥çš„åè®®ï¼Œå®ƒä¸éœ€è¦å»ºç«‹è¿æ¥å³å¯å‘é€æ•°æ®ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š</p><ul><li><strong>æ— è¿æ¥</strong>ï¼šå‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´æ²¡æœ‰è¿æ¥çš„æ¦‚å¿µï¼Œæ•°æ®ä»¥ç‹¬ç«‹çš„åŒ…ï¼ˆdatagramï¼‰çš„å½¢å¼å‘é€ã€‚</li><li><strong>é€Ÿåº¦å¿«</strong>ï¼šç”±äºä¸éœ€è¦å»ºç«‹è¿æ¥å’Œç¡®è®¤æœºåˆ¶ï¼ŒUDP çš„ä¼ è¾“é€Ÿåº¦æ¯” TCP å¿«ã€‚</li><li><strong>ä¸å¯é </strong>ï¼šUDP ä¸ä¿è¯æ•°æ®åŒ…çš„é¡ºåºå’Œå®Œæ•´æ€§ï¼Œæ•°æ®åŒ…å¯èƒ½ä¼šä¸¢å¤±ã€é‡å¤æˆ–ä¹±åºåˆ°è¾¾ã€‚</li></ul><p>è¿™äº›ç‰¹ç‚¹ä½¿å¾— UDP é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li><strong>å®æ—¶åº”ç”¨</strong>ï¼šå¦‚è§†é¢‘ä¼šè®®ã€åœ¨çº¿æ¸¸æˆç­‰ï¼Œè¿™äº›åº”ç”¨éœ€è¦ä½å»¶è¿Ÿå’Œé«˜å®æ—¶æ€§ï¼Œèƒ½å®¹å¿éƒ¨åˆ†æ•°æ®ä¸¢å¤±ã€‚</li><li><strong>å¹¿æ’­å’Œå¤šæ’­</strong>ï¼šå¦‚ IPTVã€ç½‘ç»œå¹¿æ’­ç­‰ï¼ŒUDP å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œå¹¿æ’­å’Œå¤šæ’­é€šä¿¡ã€‚</li><li><strong>ç®€å•çš„æŸ¥è¯¢æœåŠ¡</strong>ï¼šå¦‚ DNS æŸ¥è¯¢ï¼Œå¿«é€Ÿå‘é€è¯·æ±‚å¹¶æ¥æ”¶å“åº”ï¼Œä¸éœ€è¦å¤æ‚çš„è¿æ¥ç®¡ç†ã€‚</li></ul><h3 id="TCP-å¥—æ¥å­—çš„ç‰¹æ€§ä¸åº”ç”¨åœºæ™¯"><strong>TCP å¥—æ¥å­—çš„ç‰¹æ€§ä¸åº”ç”¨åœºæ™¯</strong></h3><p>TCP æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„åè®®ï¼Œå®ƒæä¾›å¯é çš„æ•°æ®ä¼ è¾“ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š</p><ul><li><strong>é¢å‘è¿æ¥</strong>ï¼šåœ¨é€šä¿¡å‰éœ€è¦å»ºç«‹è¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ï¼Œåœ¨é€šä¿¡ç»“æŸåé‡Šæ”¾è¿æ¥ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰ã€‚</li><li><strong>å¯é ä¼ è¾“</strong>ï¼šTCP ä¿è¯æ•°æ®æŒ‰é¡ºåºåˆ°è¾¾ï¼Œä¸ä¸¢å¤±ã€ä¸é‡å¤ã€‚</li><li><strong>æµæ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶</strong>ï¼šTCP é€šè¿‡æµæ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œè°ƒæ•´å‘é€æ•°æ®çš„é€Ÿç‡ï¼Œé¿å…ç½‘ç»œæ‹¥å¡ã€‚</li></ul><p>è¿™äº›ç‰¹ç‚¹ä½¿å¾— TCP é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li><strong>æ–‡ä»¶ä¼ è¾“</strong>ï¼šå¦‚ FTPã€HTTP ç­‰éœ€è¦ä¿è¯æ•°æ®å®Œæ•´å’Œé¡ºåºçš„åœºæ™¯ã€‚</li><li><strong>ç”µå­é‚®ä»¶</strong>ï¼šå¦‚ SMTPã€POP3 ç­‰éœ€è¦å¯é ä¼ è¾“çš„åœºæ™¯ã€‚</li><li><strong>æ•°æ®åº“è¿æ¥</strong>ï¼šå¦‚ MySQLã€PostgreSQL ç­‰æ•°æ®åº“çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´éœ€è¦å¯é çš„é€šä¿¡ã€‚</li></ul><h3 id="Rust-ä¸­çš„å¼‚æ­¥ç½‘ç»œç¼–ç¨‹"><strong>Rust ä¸­çš„å¼‚æ­¥ç½‘ç»œç¼–ç¨‹</strong></h3><p>Rust æä¾›äº†å¼ºå¤§çš„å¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›ï¼Œé€šè¿‡ async/await è¯­æ³•å¯ä»¥æ–¹ä¾¿åœ°ç¼–å†™å¼‚æ­¥ä»£ç ã€‚å¼‚æ­¥ç¼–ç¨‹åœ¨å¤„ç† I/O å¯†é›†å‹ä»»åŠ¡æ—¶éå¸¸æœ‰æ•ˆï¼Œå¯ä»¥é¿å…çº¿ç¨‹é˜»å¡ï¼Œæé«˜ç¨‹åºçš„å¹¶å‘æ€§å’Œæ€§èƒ½ã€‚</p><p>åœ¨ Rust ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>tokio</code> æˆ– <code>async-std</code> ç­‰å¼‚æ­¥è¿è¡Œæ—¶åº“æ¥è¿›è¡Œå¼‚æ­¥ç½‘ç»œç¼–ç¨‹ã€‚è¿™äº›åº“æä¾›äº†å¼‚æ­¥ç‰ˆæœ¬çš„ç½‘ç»œ APIï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨å¼‚æ­¥çš„æ–¹å¼è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>tokio</code> åº“çš„å¼‚æ­¥ UDP å¥—æ¥å­—ç¤ºä¾‹ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> tokio::net::UdpSocket;<br><span class="hljs-keyword">use</span> tokio::io::&#123;<span class="hljs-keyword">self</span>, <span class="hljs-type">Result</span>&#125;;<br><br><span class="hljs-meta">#[tokio::main]</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">socket</span> = UdpSocket::<span class="hljs-title function_ invoke__">bind</span>(<span class="hljs-string">&quot;127.0.0.1:8080&quot;</span>).<span class="hljs-keyword">await</span>?;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">buf</span> = [<span class="hljs-number">0u8</span>; <span class="hljs-number">1024</span>];<br><br>    <span class="hljs-keyword">loop</span> &#123;<br>        <span class="hljs-keyword">let</span> (len, addr) = socket.<span class="hljs-title function_ invoke__">recv_from</span>(&amp;<span class="hljs-keyword">mut</span> buf).<span class="hljs-keyword">await</span>?;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Received &#123;&#125; bytes from &#123;&#125;&quot;</span>, len, addr);<br><br>        socket.<span class="hljs-title function_ invoke__">send_to</span>(&amp;buf[..len], &amp;addr).<span class="hljs-keyword">await</span>?;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>tokio</code> åº“åˆ›å»ºä¸€ä¸ªå¼‚æ­¥ UDP æœåŠ¡å™¨ï¼Œå®ƒæ¥æ”¶æ•°æ®å¹¶å°†å…¶å‘é€å›å®¢æˆ·ç«¯ã€‚</p><h3 id="Rust-ä¸­çš„å®‰å…¨å’Œæ€§èƒ½ä¼˜åŠ¿"><strong>Rust ä¸­çš„å®‰å…¨å’Œæ€§èƒ½ä¼˜åŠ¿</strong></h3><p>Rust çš„æ‰€æœ‰æƒç³»ç»Ÿå’Œå€Ÿç”¨æ£€æŸ¥å™¨ç¡®ä¿äº†å†…å­˜å®‰å…¨ï¼Œé¿å…äº†å¸¸è§çš„å†…å­˜é”™è¯¯ï¼Œå¦‚ç©ºæŒ‡é’ˆè§£å¼•ç”¨</p><p>å’Œç¼“å†²åŒºæº¢å‡ºã€‚è¿™ä½¿å¾— Rust åœ¨è¿›è¡Œç³»ç»Ÿç¼–ç¨‹å’Œç½‘ç»œç¼–ç¨‹æ—¶å…·æœ‰æ˜¾è‘—çš„å®‰å…¨ä¼˜åŠ¿ã€‚</p><p>æ­¤å¤–ï¼ŒRust çš„é›¶æˆæœ¬æŠ½è±¡å’Œé«˜æ•ˆçš„ç¼–è¯‘å™¨ä¼˜åŒ–ä½¿å¾—å®ƒåœ¨æ€§èƒ½ä¸Šä¹Ÿå…·æœ‰ä¼˜åŠ¿ã€‚Rust çš„ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æ—¶è¿›è¡Œä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥å’Œä¼˜åŒ–ï¼Œç”Ÿæˆé«˜æ•ˆçš„æœºå™¨ç ï¼Œä»è€Œåœ¨è¿è¡Œæ—¶æä¾›ä¼˜å¼‚çš„æ€§èƒ½ã€‚</p><h3 id="å°è£…å¥—æ¥å­—çš„ä¼˜åŠ¿"><strong>å°è£…å¥—æ¥å­—çš„ä¼˜åŠ¿</strong></h3><p>å°è£…å¥—æ¥å­—å¯ä»¥æä¾›ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ul><li><strong>ç®€åŒ–ä½¿ç”¨</strong>ï¼šé€šè¿‡å°è£…å¤æ‚çš„ç½‘ç»œæ“ä½œï¼Œå¯ä»¥ç®€åŒ– APIï¼Œä½¿å¾—ç”¨æˆ·æ›´å®¹æ˜“ä½¿ç”¨ã€‚</li><li><strong>æ¨¡å—åŒ–</strong>ï¼šå°†ç½‘ç»œæ“ä½œå°è£…åœ¨ç‹¬ç«‹çš„æ¨¡å—ä¸­ï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§ã€‚</li><li><strong>å¢å¼ºå®‰å…¨æ€§</strong>ï¼šé€šè¿‡å°è£…ï¼Œå¯ä»¥åœ¨å†…éƒ¨å®ç°æ›´å¤šçš„å®‰å…¨æ£€æŸ¥ï¼Œé˜²æ­¢ç”¨æˆ·è¯¯ç”¨å¯¼è‡´çš„å®‰å…¨é—®é¢˜ã€‚</li></ul><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚ï¼Œè¿›ä¸€æ­¥å°è£…å’Œæ‰©å±• UDP å’Œ TCP å¥—æ¥å­—çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ·»åŠ è¶…æ—¶æœºåˆ¶ã€é”™è¯¯å¤„ç†ã€æ—¥å¿—è®°å½•ç­‰åŠŸèƒ½ï¼Œä»¥æé«˜å°è£…å¥—æ¥å­—çš„å®ç”¨æ€§å’Œå¥å£®æ€§ã€‚</p><h3 id="æ€»ç»“"><strong>æ€»ç»“</strong></h3><p>é€šè¿‡å°è£… UDP å’Œ TCP å¥—æ¥å­—ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æ–¹ä¾¿åœ°ä½¿ç”¨è¿™äº›ç½‘ç»œé€šä¿¡æœºåˆ¶ï¼Œå¹¶åˆ©ç”¨ Rust çš„å®‰å…¨æ€§å’Œå¹¶å‘æ€§æ„å»ºé«˜æ•ˆã€å¯é çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚Rust æä¾›äº†å¼ºå¤§çš„å¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨å¼‚æ­¥çš„æ–¹å¼è¿›è¡Œç½‘ç»œç¼–ç¨‹ï¼Œæé«˜ç¨‹åºçš„å¹¶å‘æ€§å’Œæ€§èƒ½ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚ï¼Œè¿›ä¸€æ­¥å°è£…å’Œæ‰©å±• UDP å’Œ TCP å¥—æ¥å­—çš„åŠŸèƒ½ï¼Œä»¥æ»¡è¶³ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚</p><p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»å’Œç¤ºä¾‹ä»£ç ï¼Œå¸Œæœ›èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Rust è¿›è¡Œç½‘ç»œç¼–ç¨‹ã€‚å¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚</p><h3 id="å‚è€ƒæ–‡çŒ®"><strong>å‚è€ƒæ–‡çŒ®</strong></h3><ol><li>Rust å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://doc.rust-lang.org/">https://doc.rust-lang.org/</a></li><li>Rust æ ‡å‡†åº“æ–‡æ¡£ï¼š<a href="https://doc.rust-lang.org/std/index.html">https://doc.rust-lang.org/std/index.html</a></li><li>The Rust Programming Languageï¼ˆRust ç¼–ç¨‹è¯­è¨€ä¹¦ç±ï¼‰ï¼š<a href="https://www.rust-lang.org/zh-CN/what/triangle">https://www.rust-lang.org/zh-CN/what/triangle</a></li><li>Rust ç½‘ç»œç¼–ç¨‹ï¼ˆThe Bookï¼‰ï¼š<a href="https://book.async.rs/">https://book.async.rs/</a></li><li>Tokio å¼‚æ­¥ç¼–ç¨‹ï¼š<a href="https://tokio.rs/">https://tokio.rs/</a></li><li>Async-std å¼‚æ­¥ç¼–ç¨‹ï¼š<a href="https://async.rs/">https://async.rs/</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Rustè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UDP/TCP </tag>
            
            <tag> Rustè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºLinuxçš„GPIOå·¥å…·ç±»çš„å®ç°åŸç†</title>
      <link href="/2024/02/24/%E5%9F%BA%E4%BA%8ELinux%E7%9A%84GPIO%E5%B7%A5%E5%85%B7%E7%B1%BB%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/"/>
      <url>/2024/02/24/%E5%9F%BA%E4%BA%8ELinux%E7%9A%84GPIO%E5%B7%A5%E5%85%B7%E7%B1%BB%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºäºLinuxçš„GPIOå·¥å…·ç±»çš„å®ç°åŸç†"><strong>åŸºäºLinuxçš„GPIOå·¥å…·ç±»çš„å®ç°åŸç†</strong></h2><h3 id="å¯¼è¨€ï¼š"><strong>å¯¼è¨€ï¼š</strong></h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼ŒLinuxæä¾›äº†ä¸°å¯Œçš„GPIOæ¥å£ï¼Œç”¨äºä¸å¤–éƒ¨è®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚ä¸ºäº†æ–¹ä¾¿åœ¨åº”ç”¨ç¨‹åºä¸­æ§åˆ¶GPIOï¼Œå¯ä»¥é€šè¿‡å°è£…ä¸€ä¸ªGPIOå·¥å…·ç±»æ¥ç®€åŒ–æ“ä½œã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»åŸºäºLinuxçš„GPIOå·¥å…·ç±»çš„å®ç°åŸç†ï¼ŒåŒ…æ‹¬GPIOçš„å¯¼å‡ºã€æ–¹å‘è®¾ç½®å’Œå€¼è®¾ç½®ç­‰åŸºæœ¬æ“ä½œã€‚</p><h3 id="GPIOå·¥å…·ç±»çš„åŸç†"><strong>GPIOå·¥å…·ç±»çš„åŸç†</strong></h3><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼ŒGPIOè¢«è§†ä¸ºæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç‰¹æ®Šæ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡æ–‡ä»¶æ“ä½œæ¥æ§åˆ¶ã€‚GPIOè®¾å¤‡é€šå¸¸ä½äº/sys/class/gpioç›®å½•ä¸‹ï¼Œæ¯ä¸ªGPIOè®¾å¤‡éƒ½æœ‰ä¸€ä¸ªç›¸åº”çš„ç›®å½•ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€äº›ç”¨äºæ§åˆ¶GPIOçš„æ–‡ä»¶ï¼Œä¾‹å¦‚directionã€valueç­‰ã€‚</p><p>GPIOå·¥å…·ç±»çš„å®ç°åŸç†å°±æ˜¯é€šè¿‡æ‰“å¼€ã€è¯»å†™è¿™äº›ç‰¹æ®Šæ–‡ä»¶æ¥å®ç°å¯¹GPIOçš„æ§åˆ¶ã€‚é€šè¿‡å¯¼å‡ºGPIOã€è®¾ç½®æ–¹å‘å’Œè®¾ç½®å€¼ç­‰æ“ä½œï¼Œå¯ä»¥å®ç°å¯¹GPIOå¼•è„šçš„é…ç½®å’Œæ§åˆ¶ã€‚è¿™æ ·ï¼Œå¼€å‘è€…å°±å¯ä»¥é€šè¿‡è°ƒç”¨GPIOå·¥å…·ç±»æä¾›çš„æ¥å£æ¥æ–¹ä¾¿åœ°æ§åˆ¶GPIOå¼•è„šã€‚</p><h3 id="GPIOå·¥å…·ç±»çš„å®ç°"><strong>GPIOå·¥å…·ç±»çš„å®ç°</strong></h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„C++ç±»ï¼Œç”¨äºåœ¨Linuxç³»ç»Ÿä¸­æ§åˆ¶GPIOå¼•è„šã€‚è¯¥ç±»å°†GPIOè®¾å¤‡åœ°å€å’ŒGPIOç¼–å·ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œå¹¶æä¾›äº†è®¾ç½®æ–¹å‘å’Œè®¾ç½®å€¼çš„æ–¹æ³•ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdexcept&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GPIO</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">GPIO</span>(<span class="hljs-type">const</span> std::string&amp; gpioDevice, <span class="hljs-type">const</span> std::string&amp; gpioNumber) : <span class="hljs-built_in">gpioDevice</span>(gpioDevice), <span class="hljs-built_in">gpioNumber</span>(gpioNumber) &#123;<br>        <span class="hljs-built_in">exportGPIO</span>();<br>    &#125;<br><br>    ~<span class="hljs-built_in">GPIO</span>() &#123;<br>        <span class="hljs-built_in">unexportGPIO</span>();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setDirection</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; direction)</span> </span>&#123;<br>        <span class="hljs-function">std::ofstream <span class="hljs-title">directionFile</span><span class="hljs-params">(getFilePath(<span class="hljs-string">&quot;direction&quot;</span>))</span></span>;<br>        <span class="hljs-keyword">if</span> (!directionFile.<span class="hljs-built_in">is_open</span>()) &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;Failed to open GPIO direction file&quot;</span>);<br>        &#125;<br>        directionFile &lt;&lt; direction;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setValue</span><span class="hljs-params">(<span class="hljs-type">bool</span> value)</span> </span>&#123;<br>        <span class="hljs-function">std::ofstream <span class="hljs-title">valueFile</span><span class="hljs-params">(getFilePath(<span class="hljs-string">&quot;value&quot;</span>))</span></span>;<br>        <span class="hljs-keyword">if</span> (!valueFile.<span class="hljs-built_in">is_open</span>()) &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;Failed to open GPIO value file&quot;</span>);<br>        &#125;<br>        valueFile &lt;&lt; (value ? <span class="hljs-string">&quot;1&quot;</span> : <span class="hljs-string">&quot;0&quot;</span>);<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    std::string gpioDevice;<br>    std::string gpioNumber;<br><br>    <span class="hljs-function">std::string <span class="hljs-title">getFilePath</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; file)</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> gpioDevice + <span class="hljs-string">&quot;/gpio&quot;</span> + gpioNumber + <span class="hljs-string">&quot;/&quot;</span> + file;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">exportGPIO</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-function">std::ofstream <span class="hljs-title">exportFile</span><span class="hljs-params">(gpioDevice + <span class="hljs-string">&quot;/export&quot;</span>)</span></span>;<br>        <span class="hljs-keyword">if</span> (!exportFile.<span class="hljs-built_in">is_open</span>()) &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;Failed to open GPIO export file&quot;</span>);<br>        &#125;<br>        exportFile &lt;&lt; gpioNumber;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">unexportGPIO</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-function">std::ofstream <span class="hljs-title">unexportFile</span><span class="hljs-params">(gpioDevice + <span class="hljs-string">&quot;/unexport&quot;</span>)</span></span>;<br>        <span class="hljs-keyword">if</span> (!unexportFile.<span class="hljs-built_in">is_open</span>()) &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;Failed to open GPIO unexport file&quot;</span>);<br>        &#125;<br>        unexportFile &lt;&lt; gpioNumber;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// ç¤ºä¾‹ç”¨æ³•</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// åˆå§‹åŒ– GPIO å¯¹è±¡ï¼ŒæŒ‡å®š GPIO è®¾å¤‡åœ°å€ä¸º /sys/class/gpioï¼ŒGPIO ç¼–å·ä¸º 18</span><br>        <span class="hljs-function">GPIO <span class="hljs-title">gpio</span><span class="hljs-params">(<span class="hljs-string">&quot;/sys/class/gpio&quot;</span>, <span class="hljs-string">&quot;18&quot;</span>)</span></span>;<br><br>        <span class="hljs-comment">// è®¾ç½® GPIO æ–¹å‘ä¸ºè¾“å‡º</span><br>        gpio.<span class="hljs-built_in">setDirection</span>(<span class="hljs-string">&quot;out&quot;</span>);<br><br>        <span class="hljs-comment">// è®¾ç½® GPIO è¾“å‡ºå€¼ä¸ºé«˜ç”µå¹³</span><br>        gpio.<span class="hljs-built_in">setValue</span>(<span class="hljs-literal">true</span>);<br>    &#125; <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) &#123;<br>        std::cerr &lt;&lt; <span class="hljs-string">&quot;Error: &quot;</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="GPIOæ–¹å‘çš„å«ä¹‰"><strong>GPIOæ–¹å‘çš„å«ä¹‰</strong></h3><p>GPIOçš„æ–¹å‘æŒ‡çš„æ˜¯è¯¥å¼•è„šæ˜¯ä½œä¸ºè¾“å…¥è¿˜æ˜¯è¾“å‡ºã€‚åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼ŒGPIOå¼•è„šé€šå¸¸å¯ä»¥é…ç½®ä¸ºè¾“å…¥æ¨¡å¼æˆ–è¾“å‡ºæ¨¡å¼ã€‚</p><ul><li><p>è¾“å…¥æ¨¡å¼ï¼šGPIOå¼•è„šæ¥æ”¶å¤–éƒ¨ä¿¡å·ï¼Œå¯ä»¥è¯»å–å¤–éƒ¨è®¾å¤‡å‘é€çš„ç”µå‹ä¿¡å·ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨æ¥æ¥æ”¶æŒ‰é’®çš„çŠ¶æ€ã€ä¼ æ„Ÿå™¨çš„æ•°æ®ç­‰ã€‚</p></li><li><p>è¾“å‡ºæ¨¡å¼ï¼šGPIOå¼•è„šå‘å¤–éƒ¨è®¾å¤‡å‘é€ç”µå‹ä¿¡å·ï¼Œå¯ä»¥æ§åˆ¶å¤–éƒ¨è®¾å¤‡çš„çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ§åˆ¶LEDçš„äº®ç­ã€é©±åŠ¨ç”µæœºçš„è¿åŠ¨ç­‰ã€‚</p></li></ul><p>åœ¨ä»£ç ä¸­ï¼Œ<code>gpio.setDirection(&quot;out&quot;)</code> å°±æ˜¯å°†GPIOå¼•è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼ã€‚è¿™æ ·ï¼Œè¯¥GPIOå¼•è„šå°±å¯ä»¥å‘å¤–éƒ¨è®¾å¤‡å‘é€ç”µå‹ä¿¡å·ï¼Œç”¨æ¥æ§åˆ¶å¤–éƒ¨è®¾å¤‡çš„çŠ¶æ€ã€‚</p><h3 id="ç»“è®º"><strong>ç»“è®º</strong></h3><p>é€šè¿‡å°è£…ä¸€ä¸ªGPIOå·¥å…·ç±»ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨Linuxç³»ç»Ÿä¸­æ§åˆ¶GPIOå¼•è„šã€‚GPIOå·¥å…·ç±»çš„å®ç°åŸç†æ˜¯åŸºäºæ–‡ä»¶æ“ä½œï¼Œé€šè¿‡è¯»å†™/sys/class/gpioç›®å½•ä¸‹çš„ç‰¹æ®Šæ–‡ä»¶æ¥å®ç°å¯¹GPIOå¼•è„šçš„é…ç½®å’Œæ§åˆ¶ã€‚é€šè¿‡è°ƒç”¨GPIOå·¥å…·ç±»æä¾›çš„æ¥å£ï¼Œå¼€å‘è€…å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡ŒGPIOçš„æ“ä½œï¼Œä»è€Œå®ç°ä¸å¤–éƒ¨è®¾å¤‡çš„é€šä¿¡å’Œæ§åˆ¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++å·¥å…·ç±» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gpio </tag>
            
            <tag> C++å·¥å…·ç±» </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨C++å®ç°å½©è‰²æ‰“å°ç±»ï¼ŒåŠ©åŠ›é€šä¿¡åè®®è°ƒè¯•</title>
      <link href="/2024/02/24/%E5%88%A9%E7%94%A8C-%E5%AE%9E%E7%8E%B0%E5%BD%A9%E8%89%B2%E6%89%93%E5%8D%B0%E7%B1%BB%EF%BC%8C%E5%8A%A9%E5%8A%9B%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E8%B0%83%E8%AF%95/"/>
      <url>/2024/02/24/%E5%88%A9%E7%94%A8C-%E5%AE%9E%E7%8E%B0%E5%BD%A9%E8%89%B2%E6%89%93%E5%8D%B0%E7%B1%BB%EF%BC%8C%E5%8A%A9%E5%8A%9B%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E8%B0%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ©ç”¨C-å®ç°å½©è‰²æ‰“å°ç±»ï¼ŒåŠ©åŠ›é€šä¿¡åè®®è°ƒè¯•">åˆ©ç”¨C++å®ç°å½©è‰²æ‰“å°ç±»ï¼ŒåŠ©åŠ›é€šä¿¡åè®®è°ƒè¯•</h2><p>åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè°ƒè¯•æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„ç¯èŠ‚ã€‚ç‰¹åˆ«æ˜¯åœ¨å¤„ç†é€šä¿¡åè®®ç­‰æ¶‰åŠåˆ°å¤æ‚æ•°æ®äº¤äº’çš„åœºæ™¯ä¸‹ï¼Œæ¸…æ™°åœ°æ ‡è¯†ç‰¹æ®Šå­—æ®µå¯¹äºå¿«é€Ÿå®šä½é—®é¢˜ã€æ’æŸ¥é”™è¯¯è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åˆ©ç”¨C++ç¼–ç¨‹è¯­è¨€ï¼Œå®ç°ä¸€ä¸ªå½©è‰²æ‰“å°ç±»ï¼Œç”¨äºåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­æ ‡è¯†ç‰¹æ®Šå­—æ®µï¼ŒåŠ©åŠ›é€šä¿¡åè®®ç­‰åŠŸèƒ½çš„è°ƒè¯•ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦å½©è‰²æ‰“å°ç±»ï¼Ÿ">ä¸ºä»€ä¹ˆéœ€è¦å½©è‰²æ‰“å°ç±»ï¼Ÿ</h3><p>åœ¨è°ƒè¯•é€šä¿¡åè®®ç­‰å¤æ‚è½¯ä»¶åœºæ™¯ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦åŒºåˆ†ä¸åŒç±»å‹ä¿¡æ¯çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®æ—¶ï¼Œéœ€è¦æ¸…æ™°åœ°åŒºåˆ†æ¥æ”¶åˆ°çš„æ•°æ®ã€å‘é€çš„æ•°æ®ä»¥åŠå‡ºç°é”™è¯¯çš„ä¿¡æ¯ç­‰ã€‚ä½¿ç”¨å½©è‰²æ‰“å°å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›´è§‚åœ°åŒºåˆ†ä¸åŒç±»å‹çš„ä¿¡æ¯ï¼Œæé«˜è°ƒè¯•æ•ˆç‡ã€‚</p><h3 id="å®ç°åŸç†">å®ç°åŸç†</h3><p>åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ§åˆ¶å°è¾“å‡ºçš„ç‰¹æ€§æ¥å®ç°å½©è‰²æ‰“å°ã€‚å¸¸ç”¨çš„æ˜¯ä½¿ç”¨ANSIè½¬ä¹‰åºåˆ—ï¼Œé€šè¿‡è¾“å‡ºä¸åŒçš„ANSIç æ¥å®ç°åœ¨ç»ˆç«¯ä¸­æ”¹å˜æ–‡æœ¬é¢œè‰²ç­‰æ•ˆæœã€‚ä¸»è¦çš„ANSIç å¦‚ä¸‹ï¼š</p><ul><li><code>\033[0m</code>ï¼šé‡ç½®é¢œè‰²</li><li><code>\033[31m</code>ï¼šçº¢è‰²</li><li><code>\033[32m</code>ï¼šç»¿è‰²</li><li><code>\033[34m</code>ï¼šè“è‰²</li><li><code>\033[33m</code>ï¼šé»„è‰²</li><li><code>\033[36m</code>ï¼šé’è‰²</li><li><code>\033[35m</code>ï¼šæ´‹çº¢è‰²</li><li><code>\033[37m</code>ï¼šç™½è‰²</li></ul><p>åŸºäºä»¥ä¸ŠåŸç†ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªå½©è‰²æ‰“å°ç±»ï¼Œé€šè¿‡è®¾ç½®ä¸åŒçš„ANSIç æ¥å®ç°æ‰“å°ä¸åŒé¢œè‰²çš„æ–‡æœ¬ã€‚</p><h3 id="å®ç°å½©è‰²æ‰“å°ç±»">å®ç°å½©è‰²æ‰“å°ç±»</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹ <code>TextColor</code>ï¼Œç”¨äºè¡¨ç¤ºä¸åŒçš„é¢œè‰²ã€‚ç„¶åï¼Œå®ç° <code>ColorPrinter</code> ç±»ï¼Œæä¾› <code>setColor()</code> æ–¹æ³•ç”¨äºè®¾ç½®æ‰“å°é¢œè‰²ï¼Œä»¥åŠ <code>printWithMarker()</code> æ–¹æ³•ç”¨äºæ‰“å°å¸¦æœ‰ç‰¹æ®Šå­—æ®µæ ‡è¯†çš„å­—ç¬¦ä¸²ã€‚</p><p>ä»¥ä¸‹æ˜¯å½©è‰²æ‰“å°ç±»çš„ä»£ç å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><br><span class="hljs-comment">// æšä¸¾ç±»å‹å®šä¹‰é¢œè‰²</span><br><span class="hljs-keyword">enum class</span> <span class="hljs-title class_">TextColor</span> &#123;<br>    Default,<br>    Red,<br>    Green,<br>    Blue,<br>    Yellow,<br>    Cyan,<br>    Magenta,<br>    White<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ColorPrinter</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// æ„é€ å‡½æ•°</span><br>    <span class="hljs-built_in">ColorPrinter</span>() : <span class="hljs-built_in">textColor</span>(TextColor::Default) &#123;<br>        <span class="hljs-comment">// åˆå§‹åŒ–é¢œè‰²æ˜ å°„</span><br>        colorMap[TextColor::Default] = <span class="hljs-string">&quot;\033[0m&quot;</span>; <span class="hljs-comment">// é»˜è®¤é¢œè‰²</span><br>        colorMap[TextColor::Red] = <span class="hljs-string">&quot;\033[31m&quot;</span>; <span class="hljs-comment">// çº¢è‰²</span><br>        colorMap[TextColor::Green] = <span class="hljs-string">&quot;\033[32m&quot;</span>; <span class="hljs-comment">// ç»¿è‰²</span><br>        colorMap[TextColor::Blue] = <span class="hljs-string">&quot;\033[34m&quot;</span>; <span class="hljs-comment">// è“è‰²</span><br>        colorMap[TextColor::Yellow] = <span class="hljs-string">&quot;\033[33m&quot;</span>; <span class="hljs-comment">// é»„è‰²</span><br>        colorMap[TextColor::Cyan] = <span class="hljs-string">&quot;\033[36m&quot;</span>; <span class="hljs-comment">// é’è‰²</span><br>        colorMap[TextColor::Magenta] = <span class="hljs-string">&quot;\033[35m&quot;</span>; <span class="hljs-comment">// æ´‹çº¢è‰²</span><br>        colorMap[TextColor::White] = <span class="hljs-string">&quot;\033[37m&quot;</span>; <span class="hljs-comment">// ç™½è‰²</span><br>    &#125;<br><br>    <span class="hljs-comment">// è®¾ç½®æ‰“å°é¢œè‰²</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setColor</span><span class="hljs-params">(TextColor color)</span> </span>&#123;<br>        textColor = color;<br>    &#125;<br><br>    <span class="hljs-comment">// æ‰“å°å­—ç¬¦ä¸²ï¼Œå¸¦ç‰¹æ®Šå­—æ®µæ ‡è¯†</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printWithMarker</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; text, <span class="hljs-type">const</span> std::string&amp; marker)</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-built_in">getColorCode</span>() &lt;&lt; text &lt;&lt; <span class="hljs-string">&quot; (&quot;</span> &lt;&lt; marker &lt;&lt; <span class="hljs-string">&quot;)&quot;</span> &lt;&lt; <span class="hljs-built_in">getColorCode</span>() &lt;&lt; std::endl;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    TextColor textColor; <span class="hljs-comment">// æ‰“å°é¢œè‰²</span><br>    std::map&lt;TextColor, std::string&gt; colorMap; <span class="hljs-comment">// é¢œè‰²æ˜ å°„</span><br><br>    <span class="hljs-comment">// è·å–å½“å‰é¢œè‰²ç </span><br>    <span class="hljs-function">std::string <span class="hljs-title">getColorCode</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> colorMap[textColor];<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ColorPrinter printer;<br><br>    <span class="hljs-comment">// è®¾ç½®ä¸åŒé¢œè‰²å¹¶æ‰“å°å­—ç¬¦ä¸²ï¼Œå¸¦ç‰¹æ®Šå­—æ®µæ ‡è¯†</span><br>    printer.<span class="hljs-built_in">setColor</span>(TextColor::Red);<br>    printer.<span class="hljs-built_in">printWithMarker</span>(<span class="hljs-string">&quot;Error occurred&quot;</span>, <span class="hljs-string">&quot;ERR&quot;</span>);<br><br>    printer.<span class="hljs-built_in">setColor</span>(TextColor::Green);<br>    printer.<span class="hljs-built_in">printWithMarker</span>(<span class="hljs-string">&quot;Data received&quot;</span>, <span class="hljs-string">&quot;RX&quot;</span>);<br><br>    printer.<span class="hljs-built_in">setColor</span>(TextColor::Blue);<br>    printer.<span class="hljs-built_in">printWithMarker</span>(<span class="hljs-string">&quot;Data sent&quot;</span>, <span class="hljs-string">&quot;TX&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ€»ç»“">æ€»ç»“</h3><p>é€šè¿‡å®ç°å½©è‰²æ‰“å°ç±»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­æ›´åŠ ç›´è§‚åœ°æ ‡è¯†ç‰¹æ®Šå­—æ®µï¼Œæé«˜è°ƒè¯•æ•ˆç‡ã€‚è¿™ä¸ªå½©è‰²æ‰“å°ç±»å…·æœ‰é€šç”¨æ€§ï¼Œå¯ä»¥ç”¨äºå„ç§C++é¡¹ç›®ä¸­ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠåˆ°é€šä¿¡åè®®ç­‰åœºæ™¯ã€‚å¸Œæœ›è¿™ä¸ªå½©è‰²æ‰“å°ç±»èƒ½å¤Ÿå¸®åŠ©ä½ æ›´åŠ è½»æ¾åœ°è¿›è¡Œè°ƒè¯•å·¥ä½œï¼</p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> C++é€šç”¨ç±» </tag>
            
            <tag> è°ƒè¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨STM32çš„GPIOæ¨¡æ‹ŸI2Cé€šä¿¡ï¼šä»åŸç†åˆ°å®ç°</title>
      <link href="/2024/02/23/%E4%BD%BF%E7%94%A8STM32%E7%9A%84GPIO%E6%A8%A1%E6%8B%9FI2C%E9%80%9A%E4%BF%A1%EF%BC%9A%E4%BB%8E%E5%8E%9F%E7%90%86%E5%88%B0%E5%AE%9E%E7%8E%B0/"/>
      <url>/2024/02/23/%E4%BD%BF%E7%94%A8STM32%E7%9A%84GPIO%E6%A8%A1%E6%8B%9FI2C%E9%80%9A%E4%BF%A1%EF%BC%9A%E4%BB%8E%E5%8E%9F%E7%90%86%E5%88%B0%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨STM32çš„GPIOæ¨¡æ‹ŸI2Cé€šä¿¡ï¼šä»åŸç†åˆ°å®ç°">ä½¿ç”¨STM32çš„GPIOæ¨¡æ‹ŸI2Cé€šä¿¡ï¼šä»åŸç†åˆ°å®ç°</h2><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼ŒI2Cï¼ˆInter-Integrated Circuitï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„ä¸²è¡Œé€šä¿¡åè®®ï¼Œç”¨äºåœ¨èŠ¯ç‰‡ä¹‹é—´è¿›è¡Œç®€å•ã€é«˜æ•ˆçš„æ•°æ®ä¼ è¾“ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç”±äºå¤–éƒ¨è®¾å¤‡æˆ–ç‰¹å®šç¡¬ä»¶é™åˆ¶ï¼Œæˆ‘ä»¬å¯èƒ½æ— æ³•ç›´æ¥ä½¿ç”¨ç¡¬ä»¶I2Cæ¥å£ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡GPIOæ¨¡æ‹ŸI2Cé€šä¿¡æ¥å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»‹ç»GPIOæ¨¡æ‹ŸI2Cé€šä¿¡çš„åŸç†ï¼Œå¹¶æä¾›ä¸€ä¸ªåŸºäºSTM32çš„ç¤ºä¾‹ä»£ç ã€‚</p><h3 id="GPIOæ¨¡æ‹ŸI2Cé€šä¿¡åŸç†">GPIOæ¨¡æ‹ŸI2Cé€šä¿¡åŸç†</h3><p>GPIOæ¨¡æ‹ŸI2Cé€šä¿¡æ˜¯é€šè¿‡æ§åˆ¶å¾®æ§åˆ¶å™¨çš„é€šç”¨è¾“å…¥/è¾“å‡ºå¼•è„šæ¥æ¨¡æ‹ŸI2Cé€šä¿¡åè®®ã€‚åœ¨I2Cé€šä¿¡ä¸­ï¼Œé€šå¸¸æœ‰ä¸¤æ ¹çº¿ï¼šSDAï¼ˆæ•°æ®çº¿ï¼‰å’ŒSCLï¼ˆæ—¶é’Ÿçº¿ï¼‰ã€‚é€šè¿‡æ§åˆ¶è¿™ä¸¤æ ¹çº¿çš„ç”µå¹³å˜åŒ–ï¼Œå¯ä»¥å®ç°èµ·å§‹æ¡ä»¶ã€åœæ­¢æ¡ä»¶ã€æ•°æ®ä¼ è¾“ç­‰åŠŸèƒ½ã€‚</p><ol><li><p><strong>èµ·å§‹æ¡ä»¶ï¼ˆStart Conditionï¼‰</strong>ï¼šåœ¨I2Cé€šä¿¡ä¸­ï¼Œèµ·å§‹æ¡ä»¶æ˜¯å°†SDAçº¿ä»é«˜ç”µå¹³è½¬æ¢ä¸ºä½ç”µå¹³ï¼Œç„¶åä¿æŒSCLçº¿ä¸ºé«˜ç”µå¹³çŠ¶æ€ã€‚</p></li><li><p><strong>åœæ­¢æ¡ä»¶ï¼ˆStop Conditionï¼‰</strong>ï¼šåœæ­¢æ¡ä»¶æ˜¯å°†SDAçº¿ä»ä½ç”µå¹³è½¬æ¢ä¸ºé«˜ç”µå¹³ï¼Œç„¶åä¿æŒSCLçº¿ä¸ºé«˜ç”µå¹³çŠ¶æ€ã€‚</p></li><li><p><strong>æ•°æ®ä¼ è¾“</strong>ï¼šåœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ•°æ®æ˜¯åœ¨SCLçº¿ä¸ºä½ç”µå¹³æ—¶ä¼ è¾“çš„ã€‚SDAçº¿çš„ç”µå¹³å˜åŒ–è¡¨ç¤ºæ•°æ®çš„ä½å€¼ï¼Œå³é«˜ç”µå¹³è¡¨ç¤º1ï¼Œä½ç”µå¹³è¡¨ç¤º0ã€‚åœ¨æ¯ä¸ªæ•°æ®å­—èŠ‚ä¼ è¾“åï¼Œéƒ½éœ€è¦ç­‰å¾…æ¥æ”¶æ–¹å‘é€åº”ç­”ä¿¡å·ã€‚</p></li></ol><p>åŸºäºä»¥ä¸ŠåŸç†ï¼Œå¯ä»¥é€šè¿‡GPIOæ§åˆ¶æ¥æ¨¡æ‹ŸI2Cé€šä¿¡çš„å„ä¸ªæ­¥éª¤ï¼Œä»è€Œå®ç°ä¸å¤–éƒ¨è®¾å¤‡çš„æ•°æ®äº¤æ¢ã€‚</p><h3 id="ä¼˜åŒ–æ¨¡æ‹ŸI2Cå®ç°">ä¼˜åŒ–æ¨¡æ‹ŸI2Cå®ç°</h3><p>ä¸ºäº†å¢å¼ºæ¨¡æ‹ŸI2Cçš„é€šç”¨æ€§å’Œæ˜“ç”¨æ€§ï¼Œæˆ‘å¯¹æ¨¡æ‹ŸI2Cå®ç°è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¹¶æä¾›äº†ç±»ä¼¼äºHALåº“ä¸­å¯¹I2Cçš„æ“ä½œé£æ ¼ã€‚</p><ol><li><p><strong>æ¨¡æ‹ŸI2Cå¥æŸ„å®šä¹‰</strong>ï¼šåˆ›å»ºäº†ä¸€ä¸ªç»“æ„ä½“<code>SimulatedI2C_HandleTypeDef</code>ï¼Œç”¨äºå­˜å‚¨æ¨¡æ‹ŸI2Cçš„å¼•è„šä¿¡æ¯ã€‚</p></li><li><p><strong>å°è£…æ¨¡æ‹ŸI2Cæ“ä½œå‡½æ•°</strong>ï¼šå°è£…äº†æ¨¡æ‹ŸI2Cçš„åˆå§‹åŒ–å‡½æ•°<code>SimulatedI2C_Init</code>ã€å†™å…¥å‡½æ•°<code>SimulatedI2C_Write</code>å’Œè¯»å–å‡½æ•°<code>SimulatedI2C_Read</code>ï¼Œä»¥å®ç°ç±»ä¼¼äºHALåº“ä¸­å¯¹I2Cçš„æ“ä½œé£æ ¼ã€‚</p></li></ol><h3 id="ä¼˜åŒ–åçš„ç¤ºä¾‹ä»£ç ">ä¼˜åŒ–åçš„ç¤ºä¾‹ä»£ç </h3><p>ä¸‹é¢æ˜¯ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨STM32çš„GPIOæ¨¡æ‹ŸI2Cé€šä¿¡ä¸å¤–éƒ¨è®¾å¤‡è¿›è¡Œè¯»å†™æ“ä½œï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stm32f4xx_hal.h&quot;</span></span><br><br><span class="hljs-comment">// GPIOå®šä¹‰</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SDA_GPIO_PORT GPIOA</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SDA_PIN GPIO_PIN_0</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SCL_GPIO_PORT GPIOA</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SCL_PIN GPIO_PIN_1</span><br><br><span class="hljs-comment">// æ¨¡æ‹ŸI2Cå¥æŸ„å®šä¹‰</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> &#123;</span><br>    GPIO_TypeDef *SDA_GPIO_Port;<br>    <span class="hljs-type">uint16_t</span> SDA_Pin;<br>    GPIO_TypeDef *SCL_GPIO_Port;<br>    <span class="hljs-type">uint16_t</span> SCL_Pin;<br>&#125; SimulatedI2C_HandleTypeDef;<br><br><span class="hljs-comment">// å‡½æ•°å£°æ˜</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">SimulatedI2C_Init</span><span class="hljs-params">(SimulatedI2C_HandleTypeDef *hi2c)</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">SimulatedI2C_Write</span><span class="hljs-params">(SimulatedI2C_HandleTypeDef *hi2c, <span class="hljs-type">uint8_t</span> dev_addr, <span class="hljs-type">uint8_t</span> *data, <span class="hljs-type">uint16_t</span> size)</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">SimulatedI2C_Read</span><span class="hljs-params">(SimulatedI2C_HandleTypeDef *hi2c, <span class="hljs-type">uint8_t</span> dev_addr, <span class="hljs-type">uint8_t</span> *data, <span class="hljs-type">uint16_t</span> size)</span>;<br><br><span class="hljs-comment">// å»¶è¿Ÿå‡½æ•°</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Delay</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br> Â  Â <span class="hljs-comment">// æ ¹æ®éœ€è¦æ·»åŠ å»¶è¿Ÿï¼Œä¹Ÿå¯ä»¥ç”¨HALåº“çš„HAL_Delay();</span><br> Â  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++);<br>&#125;<br><br><span class="hljs-comment">// å¯åŠ¨æ¡ä»¶</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Start</span><span class="hljs-params">(SimulatedI2C_HandleTypeDef *hi2c)</span> &#123;<br>    HAL_GPIO_WritePin(hi2c-&gt;SDA_GPIO_Port, hi2c-&gt;SDA_Pin, GPIO_PIN_SET);<br>    HAL_GPIO_WritePin(hi2c-&gt;SCL_GPIO_Port, hi2c-&gt;SCL_Pin, GPIO_PIN_SET);<br>    I2C_Delay();<br>    HAL_GPIO_WritePin(hi2c-&gt;SDA_GPIO_Port, hi2c-&gt;SDA_Pin, GPIO_PIN_RESET);<br>    I2C_Delay();<br>    HAL_GPIO_WritePin(hi2c-&gt;SCL_GPIO_Port, hi2c-&gt;SCL_Pin, GPIO_PIN_RESET);<br>    I2C_Delay();<br>&#125;<br><br><span class="hljs-comment">// åœæ­¢æ¡ä»¶</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Stop</span><span class="hljs-params">(SimulatedI2C_HandleTypeDef *hi2c)</span> &#123;<br>    HAL_GPIO_WritePin(hi2c-&gt;SDA_GPIO_Port, hi2c-&gt;SDA_Pin, GPIO_PIN_RESET);<br>    HAL_GPIO_WritePin(hi2c-&gt;SCL_GPIO_Port, hi2c-&gt;SCL_Pin, GPIO_PIN_SET);<br>    I2C_Delay();<br>    HAL_GPIO_WritePin(hi2c-&gt;SDA_GPIO_Port, hi2c-&gt;SDA_Pin, GPIO_PIN_SET);<br>    I2C_Delay();<br>&#125;<br><br><span class="hljs-comment">// å†™å…¥å•ä¸ªå­—èŠ‚</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">I2C_WriteByte</span><span class="hljs-params">(SimulatedI2C_HandleTypeDef *hi2c, <span class="hljs-type">uint8_t</span> byte)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int8_t</span> i = <span class="hljs-number">7</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        <span class="hljs-keyword">if</span> (byte &amp; (<span class="hljs-number">1</span> &lt;&lt; i)) &#123;<br>            HAL_GPIO_WritePin(hi2c-&gt;SDA_GPIO_Port, hi2c-&gt;SDA_Pin, GPIO_PIN_SET);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            HAL_GPIO_WritePin(hi2c-&gt;SDA_GPIO_Port, hi2c-&gt;SDA_Pin, GPIO_PIN_RESET);<br>        &#125;<br>        I2C_Delay();<br>        HAL_GPIO_WritePin(hi2c-&gt;SCL_GPIO_Port, hi2c-&gt;SCL_Pin, GPIO_PIN_SET);<br>        I2C_Delay();<br>        HAL_GPIO_WritePin(hi2c-&gt;SCL_GPIO_Port, hi2c-&gt;SCL_Pin, GPIO_PIN_RESET);<br>        I2C_Delay();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// è¯»å–å•ä¸ªå­—èŠ‚</span><br><span class="hljs-type">uint8_t</span> <span class="hljs-title function_">I2C_ReadByte</span><span class="hljs-params">(SimulatedI2C_HandleTypeDef *hi2c)</span> &#123;<br>    <span class="hljs-type">uint8_t</span> byte = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int8_t</span> i = <span class="hljs-number">7</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        HAL_GPIO_WritePin(hi2c-&gt;SCL_GPIO_Port, hi2c-&gt;SCL_Pin, GPIO_PIN_SET);<br>        I2C_Delay();<br>        <span class="hljs-keyword">if</span> (HAL_GPIO_ReadPin(hi2c-&gt;SDA_GPIO_Port, hi2c-&gt;SDA_Pin)) &#123;<br>            byte |= (<span class="hljs-number">1</span> &lt;&lt; i);<br>        &#125;<br>        HAL_GPIO_WritePin(hi2c-&gt;SCL_GPIO_Port, hi2c-&gt;SCL_Pin, GPIO_PIN_RESET);<br>        I2C_Delay();<br>    &#125;<br>    <span class="hljs-keyword">return</span> byte;<br>&#125;<br><br><span class="hljs-comment">// æ¨¡æ‹ŸI2Cåˆå§‹åŒ–</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">SimulatedI2C_Init</span><span class="hljs-params">(SimulatedI2C_HandleTypeDef *hi2c)</span> &#123;<br>    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="hljs-number">0</span>&#125;;<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–SDAå¼•è„š</span><br>    GPIO_InitStruct.Pin = hi2c-&gt;SDA_Pin;<br>    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_OD;<br>    GPIO_InitStruct.Pull = GPIO_PULLUP;<br>    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;<br>    HAL_GPIO_Init(hi2c-&gt;SDA_GPIO_Port, &amp;GPIO_InitStruct);<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–SCLå¼•è„š</span><br>    GPIO_InitStruct.Pin = hi2c-&gt;SCL_Pin;<br>    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_OD;<br>    GPIO_InitStruct.Pull = GPIO_PULLUP;<br>    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;<br>    HAL_GPIO_Init(hi2c-&gt;SCL_GPIO_Port, &amp;GPIO_InitStruct);<br>&#125;<br><br><span class="hljs-comment">// å‘è®¾å¤‡å†™å…¥æ•°æ®</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">SimulatedI2C_Write</span><span class="hljs-params">(SimulatedI2C_HandleTypeDef *hi2c, <span class="hljs-type">uint8_t</span> dev_addr, <span class="hljs-type">uint8_t</span> *data, <span class="hljs-type">uint16_t</span> size)</span> &#123;<br>    <span class="hljs-comment">// å‘é€èµ·å§‹æ¡ä»¶</span><br>    I2C_Start(hi2c);<br><br>    <span class="hljs-comment">// å‘é€è®¾å¤‡åœ°å€å’Œå†™å…¥ä½</span><br>    I2C_WriteByte(hi2c, dev_addr &lt;&lt; <span class="hljs-number">1</span>);<br><br>    <span class="hljs-comment">// å‘é€æ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint16_t</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        I2C_WriteByte(hi2c, data[i]);<br>    &#125;<br><br>    <span class="hljs-comment">// ç»“æŸé€šä¿¡</span><br>    I2C_Stop(hi2c);<br>&#125;<br><br><span class="hljs-comment">// ä»è®¾å¤‡è¯»å–æ•°æ®</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">SimulatedI2C_Read</span><span class="hljs-params">(SimulatedI2C_HandleTypeDef *hi2c, <span class="hljs-type">uint8_t</span> dev_addr, <span class="hljs-type">uint8_t</span> *data, <span class="hljs-type">uint16_t</span> size)</span> &#123;<br>    <span class="hljs-comment">// å‘é€èµ·å§‹æ¡ä»¶</span><br>    I2C_Start(hi2c);<br><br>    <span class="hljs-comment">// å‘é€è®¾å¤‡åœ°å€å’Œè¯»å–ä½</span><br>    I2C_WriteByte(hi2c, (dev_addr &lt;&lt; <span class="hljs-number">1</span>) | <span class="hljs-number">0x01</span>);<br><br>    <span class="hljs-comment">// è¯»å–æ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">uint16_t</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        data[i] = I2C_ReadByte(hi2c);<br>    &#125;<br><br>    <span class="hljs-comment">// ç»“æŸé€šä¿¡</span><br>    I2C_Stop(hi2c);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    HAL_Init();<br><br>    SimulatedI2C_HandleTypeDef hi2c = &#123;<span class="hljs-number">0</span>&#125;;<br>    hi2c.SDA_GPIO_Port = SDA_GPIO_PORT;<br>    hi2c.SDA_Pin = SDA_PIN;<br>    hi2c.SCL_GPIO_Port = SCL_GPIO_PORT;<br>    hi2c.SCL_Pin = SCL_PIN;<br><br>    SimulatedI2C_Init(&amp;hi2c);<br><br>    <span class="hljs-comment">// ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼Œä½¿ç”¨æ¨¡æ‹ŸI2Cå‘å¤–éƒ¨è®¾å¤‡å†™å…¥æ•°æ®å’Œè¯»å–æ•°æ®</span><br>    <span class="hljs-type">uint8_t</span> writeData[] = &#123;<span class="hljs-number">0x12</span>, <span class="hljs-number">0x34</span>, <span class="hljs-number">0x56</span>&#125;;<br>    <span class="hljs-type">uint8_t</span> readData[<span class="hljs-number">3</span>];<br><br>    SimulatedI2C_Write(&amp;hi2c, <span class="hljs-number">0x50</span>, writeData, <span class="hljs-keyword">sizeof</span>(writeData));<br>    SimulatedI2C_Read(&amp;hi2c, <span class="hljs-number">0x50</span>, readData, <span class="hljs-keyword">sizeof</span>(readData));<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-comment">// æ— é™å¾ªç¯</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿æ¨¡æ‹ŸI2Cçš„æ“ä½œæ›´åŠ é€šç”¨å’Œæ˜“ç”¨ï¼Œä»è€Œèƒ½å¤Ÿæ›´çµæ´»åœ°ä¸ä¸åŒçš„å¤–éƒ¨è®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚å’Œå¤–éƒ¨è®¾å¤‡çš„é€šä¿¡åè®®æ¥è¿›è¡Œå®šåˆ¶å’Œæ‰©å±•ã€‚</p><p>**æ³¨æ„ï¼š**ä¸Šè¿°ç¤ºä¾‹ä»£ç å†™äºä»Šæ™šï¼Œè¿˜æœªç»è¿‡å®é™…éªŒè¯å…¶ç¨³å®šæ€§ï¼ï¼è¯·è°¨æ…ç”¨äºå·¥ä½œé¡¹ç›®ä¸­ã€‚ã€‚ã€‚</p><p><strong>å·²æ›´æ–°å·²éªŒè¯ç‰ˆæœ¬ï¼Œè¯·è·³è½¬è§‚çœ‹ï¼š</strong> <a href="https://jinbilianshao.github.io/2024/10/23/%E5%B7%B2%E9%AA%8C%E8%AF%81-%E5%9F%BA%E4%BA%8EHAL%E5%BA%93%E5%8F%AF%E8%BF%81%E7%A7%BB%E9%80%9A%E7%94%A8gpio%E6%A8%A1%E6%8B%9FI2C%E5%AE%9E%E7%8E%B0/">ç‚¹æˆ‘è·³è½¬åˆ°æœ€æ–°åšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> STM32å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> æ¨¡æ‹ŸI2Cå®ç° </tag>
            
            <tag> HALåº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰ä¸ä»»åŠ¡è°ƒåº¦å™¨</title>
      <link href="/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%AE%9E%E6%97%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88RTOS%EF%BC%89%E4%B8%8E%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%99%A8/"/>
      <url>/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%AE%9E%E6%97%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88RTOS%EF%BC%89%E4%B8%8E%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰ä¸ä»»åŠ¡è°ƒåº¦å™¨">åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰ä¸ä»»åŠ¡è°ƒåº¦å™¨</h2><p><strong>ä¸€ã€å¼•è¨€</strong></p><p>åœ¨å½“ä»Šé«˜åº¦æ•°å­—åŒ–å’Œæ™ºèƒ½åŒ–çš„ä¸–ç•Œä¸­ï¼ŒåµŒå…¥å¼ç³»ç»Ÿå·²ç»æˆä¸ºäº†å„ç§ç”µå­è®¾å¤‡çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ã€‚ä»æ™ºèƒ½æ‰‹æœºã€æ±½è½¦ç”µå­åˆ°å·¥ä¸šæ§åˆ¶ç³»ç»Ÿï¼ŒåµŒå…¥å¼ç³»ç»Ÿæ— å¤„ä¸åœ¨ã€‚è€Œåœ¨è¿™äº›åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œå®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ï¼Œå®ƒä¸ºç³»ç»Ÿæä¾›äº†é«˜æ•ˆçš„ä»»åŠ¡ç®¡ç†å’Œè°ƒåº¦æœºåˆ¶ï¼Œç¡®ä¿ç³»ç»Ÿèƒ½å¤Ÿåœ¨è§„å®šçš„æ—¶é—´å†…å®Œæˆå…³é”®ä»»åŠ¡ï¼Œæ»¡è¶³å®æ—¶æ€§è¦æ±‚ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰ä¸ä»»åŠ¡è°ƒåº¦å™¨ï¼ŒåŒ…æ‹¬å…¶åŸºæœ¬æ¦‚å¿µã€å·¥ä½œåŸç†ã€å¸¸è§çš„ RTOS ç±»å‹ä»¥åŠä»»åŠ¡è°ƒåº¦ç®—æ³•ï¼Œå¹¶é€šè¿‡å®ä¾‹ä»£ç å±•ç¤ºå…¶å®é™…åº”ç”¨ã€‚</p><p><strong>äºŒã€å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰æ¦‚è¿°</strong></p><p>ï¼ˆä¸€ï¼‰å®šä¹‰ä¸ç‰¹ç‚¹å®æ—¶æ“ä½œç³»ç»Ÿæ˜¯æŒ‡èƒ½å¤Ÿåœ¨ç¡®å®šçš„æ—¶é—´å†…å¯¹å¤–éƒ¨äº‹ä»¶åšå‡ºå“åº”å¹¶å®Œæˆç‰¹å®šä»»åŠ¡çš„æ“ä½œç³»ç»Ÿã€‚ä¸é€šç”¨æ“ä½œç³»ç»Ÿç›¸æ¯”ï¼ŒRTOS å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ol><li>å¼ºå®æ—¶æ€§ï¼šèƒ½å¤Ÿåœ¨ä¸¥æ ¼çš„æ—¶é—´é™åˆ¶å†…å®Œæˆå…³é”®ä»»åŠ¡ï¼Œç¡®ä¿ç³»ç»Ÿçš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚</li><li>å¯ç¡®å®šæ€§ï¼šä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´å’Œå“åº”æ—¶é—´æ˜¯å¯é¢„æµ‹å’Œç¡®å®šçš„ã€‚</li><li>èµ„æºå ç”¨å°‘ï¼šåœ¨æœ‰é™çš„ç¡¬ä»¶èµ„æºä¸Šé«˜æ•ˆè¿è¡Œï¼ŒèŠ‚çœå†…å­˜å’Œå¤„ç†å™¨èµ„æºã€‚</li><li>é«˜å¯é æ€§ï¼šèƒ½å¤Ÿåº”å¯¹å„ç§å¼‚å¸¸æƒ…å†µï¼Œä¿è¯ç³»ç»Ÿçš„æŒç»­ç¨³å®šè¿è¡Œã€‚</li></ol><p>ï¼ˆäºŒï¼‰RTOS çš„åŸºæœ¬æ¶æ„ä¸€ä¸ªå…¸å‹çš„ RTOS æ¶æ„é€šå¸¸åŒ…æ‹¬å†…æ ¸ã€ä»»åŠ¡ç®¡ç†ã€å†…å­˜ç®¡ç†ã€ä¸­æ–­ç®¡ç†ã€é€šä¿¡æœºåˆ¶ç­‰æ¨¡å—ã€‚å†…æ ¸æ˜¯ RTOS çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè´Ÿè´£ä»»åŠ¡è°ƒåº¦ã€èµ„æºåˆ†é…å’Œç³»ç»Ÿç®¡ç†ç­‰å…³é”®åŠŸèƒ½ã€‚ä»»åŠ¡ç®¡ç†æ¨¡å—è´Ÿè´£åˆ›å»ºã€åˆ é™¤å’Œç®¡ç†ä»»åŠ¡ï¼Œå†…å­˜ç®¡ç†æ¨¡å—è´Ÿè´£åˆ†é…å’Œé‡Šæ”¾å†…å­˜èµ„æºï¼Œä¸­æ–­ç®¡ç†æ¨¡å—å¤„ç†å¤–éƒ¨ä¸­æ–­äº‹ä»¶ï¼Œé€šä¿¡æœºåˆ¶å®ç°ä»»åŠ¡ä¹‹é—´çš„æ•°æ®äº¤æ¢å’ŒåŒæ­¥ã€‚</p><p><strong>ä¸‰ã€ä»»åŠ¡è°ƒåº¦å™¨</strong></p><p>ï¼ˆä¸€ï¼‰ä»»åŠ¡è°ƒåº¦çš„åŸºæœ¬æ¦‚å¿µä»»åŠ¡è°ƒåº¦å™¨æ˜¯ RTOS ä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼Œå…¶ä¸»è¦èŒè´£æ˜¯æ ¹æ®ä¸€å®šçš„è°ƒåº¦ç®—æ³•ï¼Œåˆç†åœ°åˆ†é…å¤„ç†å™¨èµ„æºç»™å„ä¸ªä»»åŠ¡ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„é«˜æ•ˆè¿è¡Œå’Œæ»¡è¶³å®æ—¶æ€§è¦æ±‚ã€‚ä»»åŠ¡è°ƒåº¦å™¨éœ€è¦è€ƒè™‘ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€æˆªæ­¢æ—¶é—´ã€æ‰§è¡Œæ—¶é—´ç­‰å› ç´ ï¼Œä»¥å†³å®šå“ªä¸ªä»»åŠ¡åº”è¯¥åœ¨ä½•æ—¶è·å¾—å¤„ç†å™¨çš„ä½¿ç”¨æƒã€‚</p><p>ï¼ˆäºŒï¼‰ä»»åŠ¡è°ƒåº¦ç®—æ³•</p><ol><li>ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•æ˜¯æ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§æ¥å†³å®šä»»åŠ¡çš„æ‰§è¡Œé¡ºåºã€‚å…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ä¼šä¼˜å…ˆè·å¾—å¤„ç†å™¨èµ„æºã€‚ä¼˜å…ˆçº§å¯ä»¥æ˜¯é™æ€åˆ†é…çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€è°ƒæ•´çš„ã€‚é™æ€ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ç®€å•ç›´è§‚ï¼Œä½†å¯èƒ½å¯¼è‡´ä½ä¼˜å…ˆçº§ä»»åŠ¡é•¿æ—¶é—´å¾—ä¸åˆ°æ‰§è¡Œã€‚åŠ¨æ€ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•å¯ä»¥æ ¹æ®ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µåŠ¨æ€è°ƒæ•´ä¼˜å…ˆçº§ï¼Œæé«˜ç³»ç»Ÿçš„å…¬å¹³æ€§å’Œèµ„æºåˆ©ç”¨ç‡ã€‚</li><li>æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•å°†å¤„ç†å™¨çš„æ—¶é—´åˆ’åˆ†ä¸ºå›ºå®šé•¿åº¦çš„æ—¶é—´ç‰‡ï¼Œæ¯ä¸ªä»»åŠ¡åœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…æ‰§è¡Œã€‚å½“æ—¶é—´ç‰‡ç”¨å®Œæ—¶ï¼Œä»»åŠ¡ä¼šè¢«æŒ‚èµ·ï¼Œå¤„ç†å™¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œã€‚è¿™ç§ç®—æ³•é€‚ç”¨äºå¤šä¸ªä»»åŠ¡å…·æœ‰ç›¸åŒä¼˜å…ˆçº§ä¸”å¯¹å“åº”æ—¶é—´è¦æ±‚ä¸é«˜çš„æƒ…å†µã€‚</li><li>æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆè°ƒåº¦ç®—æ³•æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆè°ƒåº¦ç®—æ³•æ ¹æ®ä»»åŠ¡çš„æˆªæ­¢æ—¶é—´æ¥å†³å®šä»»åŠ¡çš„æ‰§è¡Œé¡ºåºã€‚æˆªæ­¢æ—¶é—´æœ€æ—©çš„ä»»åŠ¡ä¼šä¼˜å…ˆè·å¾—å¤„ç†å™¨èµ„æºã€‚è¿™ç§ç®—æ³•é€‚ç”¨äºå¯¹æˆªæ­¢æ—¶é—´è¦æ±‚ä¸¥æ ¼çš„å®æ—¶ç³»ç»Ÿã€‚</li></ol><p>ï¼ˆä¸‰ï¼‰ä»»åŠ¡è°ƒåº¦çš„å®ç°æœºåˆ¶ä»»åŠ¡è°ƒåº¦çš„å®ç°é€šå¸¸æ¶‰åŠåˆ°ä»»åŠ¡çŠ¶æ€çš„åˆ‡æ¢ã€ä»»åŠ¡ä¸Šä¸‹æ–‡çš„ä¿å­˜å’Œæ¢å¤ä»¥åŠå¤„ç†å™¨çš„åˆ‡æ¢ç­‰æ“ä½œã€‚å½“ä¸€ä¸ªä»»åŠ¡è¢«è°ƒåº¦æ‰§è¡Œæ—¶ï¼ŒRTOS ä¼šå°†å…¶çŠ¶æ€ä»å°±ç»ªæ€åˆ‡æ¢ä¸ºè¿è¡Œæ€ï¼Œå¹¶å°†å¤„ç†å™¨çš„ä¸Šä¸‹æ–‡åˆ‡æ¢åˆ°è¯¥ä»»åŠ¡çš„ä¸Šä¸‹æ–‡ã€‚å½“ä»»åŠ¡æ‰§è¡Œå®Œæˆæˆ–è¢«æŒ‚èµ·æ—¶ï¼ŒRTOS ä¼šä¿å­˜å…¶ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†å¤„ç†å™¨çš„ä¸Šä¸‹æ–‡åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå°±ç»ªä»»åŠ¡çš„ä¸Šä¸‹æ–‡ã€‚</p><p><strong>å››ã€å¸¸è§çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰</strong></p><p>ï¼ˆä¸€ï¼‰FreeRTOSFreeRTOS æ˜¯ä¸€ä¸ªå¼€æºçš„ã€è½»é‡çº§çš„ RTOSï¼Œå¹¿æ³›åº”ç”¨äºå„ç§åµŒå…¥å¼ç³»ç»Ÿä¸­ã€‚å®ƒå…·æœ‰ç®€å•æ˜“ç”¨ã€å¯è£å‰ªæ€§å¼ºã€æ”¯æŒå¤šç§å¤„ç†å™¨æ¶æ„ç­‰ä¼˜ç‚¹ã€‚ï¼ˆäºŒï¼‰RTXRTX æ˜¯ Keil å…¬å¸æ¨å‡ºçš„ä¸€æ¬¾å®æ—¶æ“ä½œç³»ç»Ÿï¼Œä¸ Keil å¼€å‘å·¥å…·ç´§å¯†é›†æˆï¼Œæ–¹ä¾¿å¼€å‘è€…è¿›è¡Œåº”ç”¨ç¨‹åºçš„å¼€å‘å’Œè°ƒè¯•ã€‚ï¼ˆä¸‰ï¼‰Î¼C/OS-IIÎ¼C/OS-II æ˜¯ä¸€æ¬¾ç»å…¸çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼Œå…·æœ‰è‰¯å¥½çš„ç¨³å®šæ€§å’Œå¯é æ€§ï¼Œè¢«å¹¿æ³›åº”ç”¨äºå·¥ä¸šæ§åˆ¶ã€åŒ»ç–—è®¾å¤‡ç­‰é¢†åŸŸã€‚</p><p><strong>äº”ã€å®ä¾‹ä»£ç åˆ†æ</strong></p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ FreeRTOS å®ç°ç®€å•ä»»åŠ¡è°ƒåº¦çš„å®ä¾‹ä»£ç ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;FreeRTOS.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;task.h&quot;</span></span><br><br><span class="hljs-comment">// å®šä¹‰ä»»åŠ¡æ ˆå¤§å°</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> TASK_STACK_SIZE 128</span><br><br><span class="hljs-comment">// å®šä¹‰ä»»åŠ¡ä¼˜å…ˆçº§</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> TASK1_PRIORITY 1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> TASK2_PRIORITY 2</span><br><br><span class="hljs-comment">// ä»»åŠ¡ 1 çš„å‡½æ•°</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">Task1Function</span><span class="hljs-params">(<span class="hljs-type">void</span> *pvParameters)</span><br>&#123;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Task 1 is running\n&quot;</span>);<br>        vTaskDelay(<span class="hljs-number">1000</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// ä»»åŠ¡ 2 çš„å‡½æ•°</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">Task2Function</span><span class="hljs-params">(<span class="hljs-type">void</span> *pvParameters)</span><br>&#123;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Task 2 is running\n&quot;</span>);<br>        vTaskDelay(<span class="hljs-number">2000</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-comment">// åˆ›å»ºä»»åŠ¡ 1</span><br>    xTaskCreate(Task1Function, <span class="hljs-string">&quot;Task1&quot;</span>, TASK_STACK_SIZE, <span class="hljs-literal">NULL</span>, TASK1_PRIORITY, <span class="hljs-literal">NULL</span>);<br><br>    <span class="hljs-comment">// åˆ›å»ºä»»åŠ¡ 2</span><br>    xTaskCreate(Task2Function, <span class="hljs-string">&quot;Task2&quot;</span>, TASK_STACK_SIZE, <span class="hljs-literal">NULL</span>, TASK2_PRIORITY, <span class="hljs-literal">NULL</span>);<br><br>    <span class="hljs-comment">// å¯åŠ¨è°ƒåº¦å™¨</span><br>    vTaskStartScheduler();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåŒ…å«äº† FreeRTOS çš„å¤´æ–‡ä»¶ã€‚ç„¶åï¼Œå®šä¹‰äº†ä»»åŠ¡æ ˆå¤§å°å’Œä»»åŠ¡ä¼˜å…ˆçº§ã€‚æ¥ä¸‹æ¥ï¼Œåˆ†åˆ«å®ç°äº†ä»»åŠ¡ 1 å’Œä»»åŠ¡ 2 çš„å‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­é€šè¿‡ <code>vTaskDelay</code> å‡½æ•°å®ç°ä»»åŠ¡çš„å»¶æ—¶ã€‚åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œä½¿ç”¨ <code>xTaskCreate</code> å‡½æ•°åˆ›å»ºäº†ä¸¤ä¸ªä»»åŠ¡ï¼Œå¹¶æŒ‡å®šäº†ä»»åŠ¡çš„åç§°ã€æ ˆå¤§å°ã€å‚æ•°ã€ä¼˜å…ˆçº§ç­‰ä¿¡æ¯ã€‚æœ€åï¼Œä½¿ç”¨ <code>vTaskStartScheduler</code> å‡½æ•°å¯åŠ¨è°ƒåº¦å™¨ï¼Œå¼€å§‹ä»»åŠ¡çš„è°ƒåº¦æ‰§è¡Œã€‚</p><p><strong>å…­ã€æ€»ç»“</strong></p><p>å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œå®ƒé€šè¿‡ä»»åŠ¡è°ƒåº¦å™¨å®ç°äº†å¯¹ç³»ç»Ÿèµ„æºçš„é«˜æ•ˆç®¡ç†å’Œä»»åŠ¡çš„åˆç†åˆ†é…ï¼Œç¡®ä¿äº†ç³»ç»Ÿçš„å®æ—¶æ€§å’Œå¯é æ€§ã€‚æœ¬æ–‡å¯¹ RTOS å’Œä»»åŠ¡è°ƒåº¦å™¨è¿›è¡Œäº†è¯¦ç»†çš„ä»‹ç»ï¼ŒåŒ…æ‹¬å…¶åŸºæœ¬æ¦‚å¿µã€å·¥ä½œåŸç†ã€å¸¸è§çš„ RTOS ç±»å‹å’Œä»»åŠ¡è°ƒåº¦ç®—æ³•ï¼Œå¹¶é€šè¿‡å®ä¾‹ä»£ç å±•ç¤ºäº†å…¶å®é™…åº”ç”¨ã€‚éšç€åµŒå…¥å¼æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒRTOS å°†åœ¨æ›´å¤šçš„é¢†åŸŸå¾—åˆ°å¹¿æ³›çš„åº”ç”¨ï¼Œä¸ºå„ç§æ™ºèƒ½è®¾å¤‡å’Œç³»ç»Ÿæä¾›å¼ºå¤§çš„æ”¯æŒã€‚</p><p>å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿä¸ºå¹¿å¤§åµŒå…¥å¼å¼€å‘è€…å’Œçˆ±å¥½è€…æä¾›æœ‰ç›Šçš„å‚è€ƒï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨å®æ—¶æ“ä½œç³»ç»Ÿã€‚åœ¨å®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿˜éœ€è¦æ ¹æ®å…·ä½“çš„åº”ç”¨éœ€æ±‚å’Œç¡¬ä»¶ç¯å¢ƒé€‰æ‹©åˆé€‚çš„ RTOS å’Œä»»åŠ¡è°ƒåº¦ç­–ç•¥ï¼Œä»¥å®ç°æœ€ä¼˜çš„ç³»ç»Ÿæ€§èƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å›ºä»¶æ›´æ–°ä¸ç‰ˆæœ¬æ§åˆ¶</title>
      <link href="/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%9B%BA%E4%BB%B6%E6%9B%B4%E6%96%B0%E4%B8%8E%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"/>
      <url>/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%9B%BA%E4%BB%B6%E6%9B%B4%E6%96%B0%E4%B8%8E%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å›ºä»¶æ›´æ–°ä¸ç‰ˆæœ¬æ§åˆ¶">åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å›ºä»¶æ›´æ–°ä¸ç‰ˆæœ¬æ§åˆ¶</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­ï¼Œå›ºä»¶æ›´æ–°å’Œç‰ˆæœ¬æ§åˆ¶æ˜¯ä¿è¯ç³»ç»ŸæŒç»­æ€§èƒ½ä¼˜åŒ–å’Œé—®é¢˜ä¿®å¤çš„å…³é”®ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»ä¸€äº›å›ºä»¶æ›´æ–°çš„æ–¹æ³•å’Œç‰ˆæœ¬æ§åˆ¶çš„å®è·µåŸåˆ™ï¼ŒåŒæ—¶æä¾›ç›¸åº”çš„ä¸šåŠ¡ä»£ç ç¤ºä¾‹ã€‚</p><h3 id="å›ºä»¶æ›´æ–°æ–¹æ³•">å›ºä»¶æ›´æ–°æ–¹æ³•</h3><h4 id="1-é€šè¿‡Bootloaderæ›´æ–°">1. <strong>é€šè¿‡Bootloaderæ›´æ–°</strong></h4><p>ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹äºåº”ç”¨ç¨‹åºçš„Bootloaderæ¥è´Ÿè´£å›ºä»¶æ›´æ–°çš„è¿‡ç¨‹ï¼Œç¡®ä¿åœ¨æ›´æ–°æ—¶ä¸ä¼šå½±å“ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚</p><h4 id="2-é€šè¿‡ä¸²å£-ç½‘ç»œæ›´æ–°">2. <strong>é€šè¿‡ä¸²å£/ç½‘ç»œæ›´æ–°</strong></h4><p>å…è®¸é€šè¿‡ä¸²å£æˆ–è€…ç½‘ç»œè¿æ¥ä¸Šä¼ æ–°çš„å›ºä»¶ï¼Œå¹¶åœ¨ç³»ç»Ÿä¸­è¿›è¡Œæ›´æ–°ã€‚</p><h4 id="3-OTAï¼ˆOver-The-Airï¼‰æ›´æ–°">3. <strong>OTAï¼ˆOver-The-Airï¼‰æ›´æ–°</strong></h4><p>å…è®¸é€šè¿‡æ— çº¿ç½‘ç»œç›´æ¥å‘è®¾å¤‡æ¨é€æ–°çš„å›ºä»¶ç‰ˆæœ¬ï¼Œé€‚ç”¨äºè¿œç¨‹è®¾å¤‡çš„æ›´æ–°ã€‚</p><h3 id="ç‰ˆæœ¬æ§åˆ¶çš„å®è·µåŸåˆ™">ç‰ˆæœ¬æ§åˆ¶çš„å®è·µåŸåˆ™</h3><h4 id="1-è¯­ä¹‰åŒ–ç‰ˆæœ¬å·">1. <strong>è¯­ä¹‰åŒ–ç‰ˆæœ¬å·</strong></h4><p>é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼ˆå¦‚MAJOR.MINOR.PATCHï¼‰æ¥æ¸…æ™°åœ°æ ‡è¯†æ¯ä¸ªç‰ˆæœ¬çš„å˜åŒ–ã€‚</p><h4 id="2-ç‰ˆæœ¬æ—¥å¿—è®°å½•">2. <strong>ç‰ˆæœ¬æ—¥å¿—è®°å½•</strong></h4><p>åŠæ—¶è®°å½•æ¯ä¸ªç‰ˆæœ¬çš„å˜æ›´å†…å®¹ï¼ŒåŒ…æ‹¬æ–°å¢åŠŸèƒ½ã€ä¿®å¤çš„é—®é¢˜ç­‰ã€‚</p><h4 id="3-å¤‡ä»½å’Œå›æ»šæœºåˆ¶">3. <strong>å¤‡ä»½å’Œå›æ»šæœºåˆ¶</strong></h4><p>åœ¨æ›´æ–°å‰å¤‡ä»½å½“å‰ç‰ˆæœ¬ï¼Œä»¥ä¾¿åœ¨å‡ºç°é—®é¢˜æ—¶èƒ½å¤Ÿå¿«é€Ÿå›æ»šã€‚</p><h3 id="å›ºä»¶æ›´æ–°ç¤ºä¾‹ï¼šé€šè¿‡Bootloaderæ›´æ–°">å›ºä»¶æ›´æ–°ç¤ºä¾‹ï¼šé€šè¿‡Bootloaderæ›´æ–°</h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„Bootloaderå›ºä»¶æ›´æ–°ç¤ºä¾‹ï¼ŒåŒ…æ‹¬æ£€æµ‹æ–°å›ºä»¶ã€ä¸‹è½½å¹¶æ›´æ–°çš„è¿‡ç¨‹ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">check_for_new_firmware</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æ£€æµ‹æ˜¯å¦æœ‰æ–°å›ºä»¶</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">download_firmware</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// ä¸‹è½½æ–°å›ºä»¶</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">update_firmware</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æ›´æ–°å›ºä»¶</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    check_for_new_firmware();<br>    download_firmware();<br>    update_firmware();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º">ç»“è®º</h3><p>å›ºä»¶æ›´æ–°å’Œç‰ˆæœ¬æ§åˆ¶æ˜¯åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­è‡³å…³é‡è¦çš„ç¯èŠ‚ã€‚é€šè¿‡åˆé€‚çš„å›ºä»¶æ›´æ–°æ–¹æ³•å’Œç‰ˆæœ¬æ§åˆ¶å®è·µåŸåˆ™ï¼Œå¯ä»¥ä¿è¯ç³»ç»ŸæŒç»­æ€§èƒ½ä¼˜åŒ–å’Œé—®é¢˜ä¿®å¤ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å¤šä»»åŠ¡ç®¡ç†ä¸è°ƒåº¦å™¨è®¾è®¡</title>
      <link href="/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E4%B8%8E%E8%B0%83%E5%BA%A6%E5%99%A8%E8%AE%BE%E8%AE%A1/"/>
      <url>/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E4%B8%8E%E8%B0%83%E5%BA%A6%E5%99%A8%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å¤šä»»åŠ¡ç®¡ç†ä¸è°ƒåº¦å™¨è®¾è®¡">åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å¤šä»»åŠ¡ç®¡ç†ä¸è°ƒåº¦å™¨è®¾è®¡</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œå¤šä»»åŠ¡ç®¡ç†å’Œè°ƒåº¦æ˜¯ä¿è¯ç³»ç»Ÿé«˜æ•ˆè¿è¡Œçš„å…³é”®ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»å¤šä»»åŠ¡ç®¡ç†çš„åŸºæœ¬åŸåˆ™ä»¥åŠè®¾è®¡ä¸€ä¸ªç®€å•çš„ä»»åŠ¡è°ƒåº¦å™¨çš„æ–¹æ³•ï¼ŒåŒæ—¶æä¾›å®Œå–„çš„ä¸šåŠ¡ä»£ç ç¤ºä¾‹ã€‚</p><h3 id="å¤šä»»åŠ¡ç®¡ç†çš„åŸºæœ¬åŸåˆ™">å¤šä»»åŠ¡ç®¡ç†çš„åŸºæœ¬åŸåˆ™</h3><h4 id="1-ä»»åŠ¡çš„è®¾è®¡ä¸åˆ†è§£">1. <strong>ä»»åŠ¡çš„è®¾è®¡ä¸åˆ†è§£</strong></h4><p>å°†å¤æ‚çš„ä»»åŠ¡åˆ†è§£æˆå¤šä¸ªå°ä»»åŠ¡ï¼Œæé«˜ç³»ç»Ÿçš„å“åº”é€Ÿåº¦ã€‚</p><h4 id="2-ä»»åŠ¡çš„ä¼˜å…ˆçº§ä¸è°ƒåº¦">2. <strong>ä»»åŠ¡çš„ä¼˜å…ˆçº§ä¸è°ƒåº¦</strong></h4><p>æ ¹æ®ä»»åŠ¡çš„é‡è¦æ€§å’Œç´§æ€¥ç¨‹åº¦è®¾å®šä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œå¹¶åˆç†è°ƒåº¦ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºã€‚</p><h4 id="3-ä»»åŠ¡åŒæ­¥ä¸é€šä¿¡">3. <strong>ä»»åŠ¡åŒæ­¥ä¸é€šä¿¡</strong></h4><p>åˆç†ä½¿ç”¨ä¿¡å·é‡ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰æœºåˆ¶æ¥ä¿è¯å¤šä¸ªä»»åŠ¡ä¹‹é—´çš„åŒæ­¥å’Œé€šä¿¡ã€‚</p><h3 id="è®¾è®¡ä¸€ä¸ªç®€å•çš„ä»»åŠ¡è°ƒåº¦å™¨">è®¾è®¡ä¸€ä¸ªç®€å•çš„ä»»åŠ¡è°ƒåº¦å™¨</h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä»»åŠ¡è°ƒåº¦å™¨çš„è®¾è®¡ç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…æ‹¬ä»»åŠ¡çš„åˆ›å»ºã€åˆå§‹åŒ–ã€æ‰§è¡Œä»¥åŠè°ƒåº¦ç­‰åŠŸèƒ½ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> &#123;</span><br>    <span class="hljs-type">void</span> (*task_function)(<span class="hljs-type">void</span>);<br>    <span class="hljs-type">int</span> priority;<br>&#125; Task;<br><br>Task tasks[<span class="hljs-number">5</span>]; <span class="hljs-comment">// æœ€å¤šæ”¯æŒ5ä¸ªä»»åŠ¡</span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">create_task</span><span class="hljs-params">(<span class="hljs-type">void</span> (*function)(<span class="hljs-type">void</span>), <span class="hljs-type">int</span> priority)</span> &#123;<br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> task_index = <span class="hljs-number">0</span>;<br>    tasks[task_index].task_function = function;<br>    tasks[task_index].priority = priority;<br>    task_index++;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">initialize_scheduler</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// åˆå§‹åŒ–è°ƒåº¦å™¨</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">schedule_tasks</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>        <span class="hljs-keyword">if</span> (tasks[i].task_function != <span class="hljs-literal">NULL</span>) &#123;<br>            tasks[i].task_function();<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">task1</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// ä»»åŠ¡1çš„å…·ä½“å®ç°</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">task2</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// ä»»åŠ¡2çš„å…·ä½“å®ç°</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">task3</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// ä»»åŠ¡3çš„å…·ä½“å®ç°</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    create_task(task1, <span class="hljs-number">1</span>);<br>    create_task(task2, <span class="hljs-number">2</span>);<br>    create_task(task3, <span class="hljs-number">3</span>);<br>    <br>    initialize_scheduler();<br>    schedule_tasks();<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º">ç»“è®º</h3><p>å¤šä»»åŠ¡ç®¡ç†å’Œè°ƒåº¦æ˜¯åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡åˆç†è®¾è®¡ä»»åŠ¡ã€è®¾å®šä¼˜å…ˆçº§ã€å®ç°è°ƒåº¦å™¨ç­‰æ–¹æ³•ï¼Œå¯ä»¥ä¿è¯ç³»ç»Ÿçš„é«˜æ•ˆè¿è¡Œã€‚å¸Œæœ›æœ¬ç¯‡åšå®¢å¯¹ä½ äº†è§£å¤šä»»åŠ¡ç®¡ç†ä¸è°ƒåº¦å™¨è®¾è®¡æœ‰æ‰€å¸®åŠ©ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·éšæ—¶åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„æ•°æ®å­˜å‚¨ä¸æ–‡ä»¶ç³»ç»Ÿé€‰å‹</title>
      <link href="/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E9%80%89%E5%9E%8B/"/>
      <url>/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E9%80%89%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„æ•°æ®å­˜å‚¨ä¸æ–‡ä»¶ç³»ç»Ÿé€‰å‹">åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„æ•°æ®å­˜å‚¨ä¸æ–‡ä»¶ç³»ç»Ÿé€‰å‹</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­ï¼Œåˆé€‚çš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆå’Œæ–‡ä»¶ç³»ç»Ÿé€‰å‹å¯¹äºæ•°æ®çš„è¯»å†™å’Œç®¡ç†è‡³å…³é‡è¦ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»ä¸€äº›å¸¸ç”¨çš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆä»¥åŠæ–‡ä»¶ç³»ç»Ÿé€‰å‹åŸåˆ™ï¼ŒåŒæ—¶æä¾›ç›¸åº”çš„ä¸šåŠ¡ä»£ç ç¤ºä¾‹ã€‚</p><h3 id="å¸¸ç”¨æ•°æ®å­˜å‚¨æ–¹æ¡ˆ">å¸¸ç”¨æ•°æ®å­˜å‚¨æ–¹æ¡ˆ</h3><h4 id="1-Flashå­˜å‚¨">1. <strong>Flashå­˜å‚¨</strong></h4><p>Flashå­˜å‚¨æ˜¯ä¸€ç§éæ˜“å¤±æ€§å­˜å‚¨å™¨ï¼Œé€‚ç”¨äºåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å›ºä»¶å­˜å‚¨ã€é…ç½®æ•°æ®ç­‰ã€‚</p><h4 id="2-RAM">2. <strong>RAM</strong></h4><p>RAMæ˜¯ä¸€ç§æ˜“å¤±æ€§å­˜å‚¨å™¨ï¼Œé€Ÿåº¦å¿«ï¼Œä½†æ–­ç”µåæ•°æ®ä¸¢å¤±ï¼Œé€‚ç”¨äºä¸´æ—¶æ•°æ®å­˜å‚¨ã€‚</p><h4 id="3-å¤–éƒ¨å­˜å‚¨ä»‹è´¨">3. <strong>å¤–éƒ¨å­˜å‚¨ä»‹è´¨</strong></h4><p>å¦‚SDå¡ã€EEPROMç­‰ï¼Œå¯ä»¥æ‰©å±•åµŒå…¥å¼ç³»ç»Ÿçš„å­˜å‚¨å®¹é‡ã€‚</p><h3 id="æ–‡ä»¶ç³»ç»Ÿé€‰å‹åŸåˆ™">æ–‡ä»¶ç³»ç»Ÿé€‰å‹åŸåˆ™</h3><h4 id="1-è€ƒè™‘åµŒå…¥å¼ç³»ç»Ÿçš„èµ„æºé™åˆ¶">1. <strong>è€ƒè™‘åµŒå…¥å¼ç³»ç»Ÿçš„èµ„æºé™åˆ¶</strong></h4><p>é€‰æ‹©ä¸€ä¸ªè½»é‡çº§çš„æ–‡ä»¶ç³»ç»Ÿï¼Œé¿å…è¿‡å¤šçš„èµ„æºæ¶ˆè€—ã€‚</p><h4 id="2-æ”¯æŒé—ªå­˜æ§åˆ¶å™¨">2. <strong>æ”¯æŒé—ªå­˜æ§åˆ¶å™¨</strong></h4><p>ç¡®ä¿æ–‡ä»¶ç³»ç»Ÿèƒ½å¤Ÿå…¼å®¹æ‰€ä½¿ç”¨çš„é—ªå­˜æ§åˆ¶å™¨ï¼Œä»¥ä¿è¯ç¨³å®šçš„æ•°æ®å­˜å‚¨å’Œè¯»å–ã€‚</p><h4 id="3-è€ƒè™‘æ•°æ®ä¿æŠ¤ä¸æ¢å¤">3. <strong>è€ƒè™‘æ•°æ®ä¿æŠ¤ä¸æ¢å¤</strong></h4><p>é€‰æ‹©ä¸€ä¸ªå…·æœ‰è‰¯å¥½çš„æ•°æ®ä¿æŠ¤æœºåˆ¶å’Œæ¢å¤èƒ½åŠ›çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚</p><h3 id="æ•°æ®å­˜å‚¨ç¤ºä¾‹ï¼šä½¿ç”¨Flashå­˜å‚¨">æ•°æ®å­˜å‚¨ç¤ºä¾‹ï¼šä½¿ç”¨Flashå­˜å‚¨</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-comment">// åœ¨Flashä¸­å­˜å‚¨æ•°æ®</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">write_to_flash</span><span class="hljs-params">(<span class="hljs-type">int</span> address, <span class="hljs-type">char</span> data)</span> &#123;<br>    <span class="hljs-comment">// å†™å…¥æ•°æ®åˆ°æŒ‡å®šåœ°å€</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-comment">// ä»Flashä¸­è¯»å–æ•°æ®</span><br><span class="hljs-type">char</span> <span class="hljs-title function_">read_from_flash</span><span class="hljs-params">(<span class="hljs-type">int</span> address)</span> &#123;<br>    <span class="hljs-comment">// ä»æŒ‡å®šåœ°å€è¯»å–æ•°æ®</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> address = <span class="hljs-number">0x1000</span>;<br>    <span class="hljs-type">char</span> data = <span class="hljs-string">&#x27;H&#x27;</span>;<br>    write_to_flash(address, data);<br>    <span class="hljs-type">char</span> read_data = read_from_flash(address);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Read from Flash: %c\n&quot;</span>, read_data);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º">ç»“è®º</h3><p>æ•°æ®å­˜å‚¨å’Œæ–‡ä»¶ç³»ç»Ÿé€‰å‹æ˜¯åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­è‡³å…³é‡è¦çš„ç¯èŠ‚ã€‚é€šè¿‡é€‰æ‹©åˆé€‚çš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆå’Œæ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥ä¿è¯æ•°æ®çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ ¹æ®é¡¹ç›®éœ€æ±‚å’Œç³»ç»Ÿèµ„æºé™åˆ¶æ¥é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ¡ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„é€šä¿¡åè®®é€‰æ‹©ä¸å®ç°</title>
      <link href="/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E9%80%89%E6%8B%A9%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
      <url>/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E9%80%89%E6%8B%A9%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„é€šä¿¡åè®®é€‰æ‹©ä¸å®ç°">åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„é€šä¿¡åè®®é€‰æ‹©ä¸å®ç°</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„é€šä¿¡åè®®å¯¹äºè®¾å¤‡é—´çš„æ•°æ®ä¼ è¾“è‡³å…³é‡è¦ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»ä¸€äº›å¸¸ç”¨çš„é€šä¿¡åè®®ï¼Œä»¥åŠå®ƒä»¬åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®ç°æ–¹æ³•ï¼ŒåŒæ—¶æä¾›ç›¸åº”çš„ä¸šåŠ¡ä»£ç ç¤ºä¾‹ã€‚</p><h3 id="å¸¸ç”¨é€šä¿¡åè®®ä»‹ç»">å¸¸ç”¨é€šä¿¡åè®®ä»‹ç»</h3><h4 id="1-UARTé€šä¿¡">1. <strong>UARTé€šä¿¡</strong></h4><p>UARTæ˜¯ä¸€ç§ä¸²è¡Œé€šä¿¡åè®®ï¼Œé€‚ç”¨äºè¿‘è·ç¦»è®¾å¤‡ä¹‹é—´çš„ç®€å•é€šä¿¡ã€‚å®ƒä½¿ç”¨ä¸¤æ ¹çº¿ï¼ˆTXå’ŒRXï¼‰è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚</p><h4 id="2-SPIé€šä¿¡">2. <strong>SPIé€šä¿¡</strong></h4><p>SPIï¼ˆSerial Peripheral Interfaceï¼‰æ˜¯ä¸€ç§åŒæ­¥ä¸²è¡Œé€šä¿¡åè®®ï¼Œé€‚ç”¨äºçŸ­è·ç¦»é«˜é€Ÿæ•°æ®ä¼ è¾“ã€‚å®ƒä½¿ç”¨å››æ ¹çº¿ï¼ˆMISOã€MOSIã€SCKã€CSï¼‰ã€‚</p><h4 id="3-I2Cé€šä¿¡">3. <strong>I2Cé€šä¿¡</strong></h4><p>I2Cï¼ˆInter-Integrated Circuitï¼‰æ˜¯ä¸€ç§ä¸²è¡Œé€šä¿¡åè®®ï¼Œé€‚ç”¨äºå¤šä¸ªè®¾å¤‡å…±äº«åŒä¸€æ ¹æ€»çº¿çš„æƒ…å†µã€‚å®ƒä½¿ç”¨ä¸¤æ ¹çº¿ï¼ˆSDAå’ŒSCLï¼‰ã€‚</p><h4 id="4-CANé€šä¿¡">4. <strong>CANé€šä¿¡</strong></h4><p>CANï¼ˆController Area Networkï¼‰æ˜¯ä¸€ç§é«˜å¯é æ€§çš„ä¸²è¡Œé€šä¿¡åè®®ï¼Œå¸¸ç”¨äºæ±½è½¦ç”µå­å’Œå·¥æ§é¢†åŸŸã€‚</p><h3 id="UARTé€šä¿¡çš„å®ç°ç¤ºä¾‹">UARTé€šä¿¡çš„å®ç°ç¤ºä¾‹</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">uart_init</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// åˆå§‹åŒ–UARTæ¨¡å—</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">uart_send</span><span class="hljs-params">(<span class="hljs-type">char</span> data)</span> &#123;<br>    <span class="hljs-comment">// å‘é€æ•°æ®</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">char</span> <span class="hljs-title function_">uart_receive</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æ¥æ”¶æ•°æ®</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    uart_init();<br>    uart_send(<span class="hljs-string">&#x27;H&#x27;</span>);<br>    uart_send(<span class="hljs-string">&#x27;i&#x27;</span>);<br>    <span class="hljs-type">char</span> received_data = uart_receive();<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Received: %c\n&quot;</span>, received_data);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="SPIé€šä¿¡çš„å®ç°ç¤ºä¾‹">SPIé€šä¿¡çš„å®ç°ç¤ºä¾‹</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">spi_init</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// åˆå§‹åŒ–SPIæ¨¡å—</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">spi_send</span><span class="hljs-params">(<span class="hljs-type">char</span> data)</span> &#123;<br>    <span class="hljs-comment">// å‘é€æ•°æ®</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">char</span> <span class="hljs-title function_">spi_receive</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æ¥æ”¶æ•°æ®</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    spi_init();<br>    spi_send(<span class="hljs-string">&#x27;H&#x27;</span>);<br>    spi_send(<span class="hljs-string">&#x27;i&#x27;</span>);<br>    <span class="hljs-type">char</span> received_data = spi_receive();<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Received: %c\n&quot;</span>, received_data);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º">ç»“è®º</h3><p>é€‰æ‹©åˆé€‚çš„é€šä¿¡åè®®å¯¹äºåµŒå…¥å¼ç³»ç»Ÿçš„å¼€å‘è‡³å…³é‡è¦ã€‚æœ¬ç¯‡åšå®¢ä»‹ç»äº†å¸¸ç”¨çš„UARTã€SPIã€I2Cå’ŒCANé€šä¿¡åè®®ï¼Œå¹¶æä¾›äº†ç›¸åº”çš„ä¸šåŠ¡æ¡†æ¶ä»£ç ç¤ºä¾‹ä»¥å¸®åŠ©ä½ åœ¨é¡¹ç›®ä¸­å®ç°ç›¸åº”çš„é€šä¿¡åŠŸèƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šä¸­æ–­å¤„ç†ä¸åµŒå…¥å¼ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–</title>
      <link href="/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E4%B8%AD%E6%96%AD%E5%A4%84%E7%90%86%E4%B8%8E%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
      <url>/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E4%B8%AD%E6%96%AD%E5%A4%84%E7%90%86%E4%B8%8E%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šä¸­æ–­å¤„ç†ä¸åµŒå…¥å¼ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–"><strong>åµŒå…¥å¼ç¬”è®°ï¼šä¸­æ–­å¤„ç†ä¸åµŒå…¥å¼ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–</strong></h2><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œä¸­æ–­å¤„ç†æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„æ–¹é¢ï¼Œå®ƒå¯ä»¥å¸®åŠ©ç³»ç»ŸåŠæ—¶å“åº”å¤–éƒ¨äº‹ä»¶ï¼Œæé«˜ç³»ç»Ÿçš„å®æ—¶æ€§å’Œç¨³å®šæ€§ã€‚</p><h3 id="1-ä¸­æ–­å¤„ç†çš„åŸºæœ¬åŸç†"><strong>1. ä¸­æ–­å¤„ç†çš„åŸºæœ¬åŸç†</strong></h3><p>ä¸­æ–­æ˜¯ä¸€ç§ç¡¬ä»¶æˆ–è½¯ä»¶è§¦å‘çš„äº‹ä»¶ï¼Œå®ƒä¼šæ‰“æ–­å½“å‰æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºæµç¨‹ï¼Œè½¬è€Œæ‰§è¡Œä¸ä¹‹ç›¸å…³çš„ä¸­æ–­æœåŠ¡ç¨‹åºï¼ˆISRï¼‰ã€‚ISRé€šå¸¸ç”¨äºå¤„ç†ç‰¹å®šçš„äº‹ä»¶æˆ–æƒ…å†µï¼Œç„¶åè¿”å›åˆ°åŸæ¥çš„ç¨‹åºæµç¨‹ã€‚</p><h3 id="2-ä¸­æ–­ä¼˜å…ˆçº§ä¸å¤„ç†æµç¨‹"><strong>2. ä¸­æ–­ä¼˜å…ˆçº§ä¸å¤„ç†æµç¨‹</strong></h3><p>ä¸åŒçš„ä¸­æ–­å¯ä»¥æœ‰ä¸åŒçš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜å…ˆçº§çš„ä¸­æ–­ä¼šæ‰“æ–­ä½ä¼˜å…ˆçº§çš„ä¸­æ–­ã€‚å› æ­¤ï¼Œéœ€è¦åˆç†è®¾ç½®ä¸­æ–­ä¼˜å…ˆçº§ä»¥ç¡®ä¿å…³é”®äº‹ä»¶èƒ½å¤Ÿå¾—åˆ°åŠæ—¶å¤„ç†ã€‚</p><h3 id="3-ä¸­æ–­ä¸ä»»åŠ¡è°ƒåº¦"><strong>3. ä¸­æ–­ä¸ä»»åŠ¡è°ƒåº¦</strong></h3><p>ä¸­æ–­å¤„ç†å¯ä»¥ä¸ä»»åŠ¡è°ƒåº¦ç»“åˆä½¿ç”¨ï¼Œä¾‹å¦‚é€šè¿‡ä¸­æ–­å¤„ç†å™¨ä¸­çš„å®šæ—¶å™¨ä¸­æ–­æ¥è§¦å‘ä»»åŠ¡çš„æ‰§è¡Œï¼Œä»è€Œå®ç°å¤šä»»åŠ¡ç³»ç»Ÿçš„é«˜æ•ˆè¿è¡Œã€‚</p><h3 id="ä¸­æ–­å¤„ç†çš„ä¼˜åŒ–æ–¹æ³•"><strong>ä¸­æ–­å¤„ç†çš„ä¼˜åŒ–æ–¹æ³•</strong></h3><h4 id="1-æœ€å°åŒ–ä¸­æ–­æœåŠ¡ç¨‹åºçš„æ‰§è¡Œæ—¶é—´"><strong>1. æœ€å°åŒ–ä¸­æ–­æœåŠ¡ç¨‹åºçš„æ‰§è¡Œæ—¶é—´</strong></h4><p>ä¸­æ–­æœåŠ¡ç¨‹åºåº”è¯¥å°½å¯èƒ½åœ°ç®€æ´å’Œé«˜æ•ˆï¼Œé¿å…åœ¨å…¶ä¸­æ‰§è¡Œè€—æ—¶è¿‡é•¿çš„æ“ä½œã€‚</p><h4 id="2-åˆç†ä½¿ç”¨ä¸´ç•ŒåŒºä¿æŠ¤å…³é”®èµ„æº"><strong>2. åˆç†ä½¿ç”¨ä¸´ç•ŒåŒºä¿æŠ¤å…³é”®èµ„æº</strong></h4><p>åœ¨ä¸­æ–­æœåŠ¡ç¨‹åºä¸­è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œéœ€è¦ä½¿ç”¨ä¸´ç•ŒåŒºä¿æŠ¤ï¼Œä»¥é˜²æ­¢å‡ºç°ç«æ€æ¡ä»¶ã€‚</p><h4 id="3-åˆç†é…ç½®ä¸­æ–­æ§åˆ¶å™¨"><strong>3. åˆç†é…ç½®ä¸­æ–­æ§åˆ¶å™¨</strong></h4><p>ä¸­æ–­æ§åˆ¶å™¨çš„é…ç½®å¯ä»¥å½±å“ä¸­æ–­çš„å“åº”æ—¶é—´å’Œä¼˜å…ˆçº§ï¼Œéœ€è¦æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œåˆç†çš„é…ç½®ã€‚</p><h3 id="ç¤ºä¾‹ï¼šä¸­æ–­å¤„ç†çš„ç®€å•åº”ç”¨"><strong>ç¤ºä¾‹ï¼šä¸­æ–­å¤„ç†çš„ç®€å•åº”ç”¨</strong></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">GPIO_ISR</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// å¤„ç†GPIOä¸­æ–­äº‹ä»¶</span><br>    <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup_interrupt</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// é…ç½®GPIOä¸ºä¸­æ–­å¼•è„š</span><br>    <span class="hljs-built_in">configure_GPIO_interrupt</span>();<br>    <br>    <span class="hljs-comment">// æ³¨å†Œä¸­æ–­æœåŠ¡ç¨‹åº</span><br>    <span class="hljs-built_in">register_ISR</span>(GPIO_ISR);<br>    <br>    <span class="hljs-comment">// å¯ç”¨ä¸­æ–­</span><br>    <span class="hljs-built_in">enable_interrupt</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º"><strong>ç»“è®º</strong></h3><p>ä¸­æ–­å¤„ç†æ˜¯åµŒå…¥å¼ç³»ç»Ÿå®ç°å®æ—¶å“åº”çš„é‡è¦æ‰‹æ®µã€‚é€šè¿‡åˆç†é…ç½®ä¸­æ–­ä¼˜å…ˆçº§ã€æœ€å°åŒ–ä¸­æ–­æœåŠ¡ç¨‹åºçš„æ‰§è¡Œæ—¶é—´ç­‰ä¼˜åŒ–æ–¹æ³•ï¼Œå¯ä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨çš„åº”ç”¨ä¸ä¼˜åŒ–</title>
      <link href="/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%AE%9E%E6%97%B6%E6%97%B6%E9%92%9F%E5%92%8C%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E5%BA%94%E7%94%A8%E4%B8%8E%E4%BC%98%E5%8C%96/"/>
      <url>/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%AE%9E%E6%97%B6%E6%97%B6%E9%92%9F%E5%92%8C%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E5%BA%94%E7%94%A8%E4%B8%8E%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨çš„åº”ç”¨ä¸ä¼˜åŒ–">åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨çš„åº”ç”¨ä¸ä¼˜åŒ–</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œå®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨æ˜¯è‡³å…³é‡è¦çš„ç»„ä»¶ï¼Œå®ƒä»¬å¯ä»¥ç”¨äºå®ç°ä»»åŠ¡è°ƒåº¦ã€æ—¶é—´æµ‹é‡ã€å‘¨æœŸæ€§æ“ä½œç­‰åŠŸèƒ½ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»å®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨çš„åŸºæœ¬åŸç†ï¼Œä»¥åŠåœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„åº”ç”¨å’Œä¼˜åŒ–æ–¹æ³•ã€‚</p><h3 id="å®æ—¶æ—¶é’Ÿä¸å®šæ—¶å™¨çš„åŸºæœ¬åŸç†">å®æ—¶æ—¶é’Ÿä¸å®šæ—¶å™¨çš„åŸºæœ¬åŸç†</h3><h4 id="1-å®æ—¶æ—¶é’Ÿï¼ˆRTCï¼‰">1. å®æ—¶æ—¶é’Ÿï¼ˆRTCï¼‰</h4><p>å®æ—¶æ—¶é’Ÿæ˜¯ä¸€ä¸ªèƒ½å¤Ÿæä¾›å‡†ç¡®æ—¶é—´çš„ç¡¬ä»¶æ¨¡å—ï¼Œé€šå¸¸åŒ…æ‹¬ä¸€ä¸ªè®¡æ•°å™¨å’Œä¸€ä¸ªæ—¶é’Ÿæºã€‚å®ƒå¯ä»¥ç‹¬ç«‹äºå¤„ç†å™¨è¿è¡Œï¼Œå³ä½¿ç³»ç»Ÿå…³æœºä¹Ÿèƒ½ä¿æŒè®¡æ—¶ã€‚</p><h4 id="2-å®šæ—¶å™¨">2. å®šæ—¶å™¨</h4><p>å®šæ—¶å™¨æ˜¯ä¸€ä¸ªç”¨äºç”Ÿæˆç‰¹å®šæ—¶é—´é—´éš”çš„ç¡¬ä»¶æ¨¡å—ï¼Œå®ƒå¯ä»¥ç”¨äºä»»åŠ¡è°ƒåº¦ã€æµ‹é‡æ—¶é—´ç­‰åº”ç”¨åœºæ™¯ã€‚é€šå¸¸åŒ…æ‹¬è®¡æ•°å™¨ã€æ¯”è¾ƒå™¨ç­‰ç»„ä»¶ã€‚</p><h3 id="å®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨çš„åº”ç”¨">å®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨çš„åº”ç”¨</h3><h4 id="1-ç²¾ç¡®æ—¶é—´æµ‹é‡">1. ç²¾ç¡®æ—¶é—´æµ‹é‡</h4><p>åˆ©ç”¨å®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨å¯ä»¥å®ç°å¯¹äº‹ä»¶çš„ç²¾ç¡®æ—¶é—´æµ‹é‡ï¼Œç”¨äºæ€§èƒ½åˆ†ææˆ–è€…æ§åˆ¶ç®—æ³•ã€‚</p><h4 id="2-å‘¨æœŸæ€§æ“ä½œ">2. å‘¨æœŸæ€§æ“ä½œ</h4><p>å®šæ—¶å™¨å¯ä»¥ç”¨äºå®ç°å‘¨æœŸæ€§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å®šæ—¶é‡‡æ ·ä¼ æ„Ÿå™¨æ•°æ®ã€å®šæ—¶å‘é€æ•°æ®ç­‰ã€‚</p><h4 id="3-ç¡çœ ä¸å”¤é†’ç­–ç•¥">3. ç¡çœ ä¸å”¤é†’ç­–ç•¥</h4><p>å®æ—¶æ—¶é’Ÿå¯ä»¥ç”¨äºè®¾å®šå”¤é†’æ—¶é—´ï¼Œä»è€Œå®ç°ä½åŠŸè€—ç¡çœ æ¨¡å¼ã€‚</p><h3 id="å®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨çš„ä¼˜åŒ–æ–¹æ³•">å®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨çš„ä¼˜åŒ–æ–¹æ³•</h3><h4 id="1-åˆç†é€‰æ‹©æ—¶é’Ÿæº">1. åˆç†é€‰æ‹©æ—¶é’Ÿæº</h4><p>é€‰æ‹©åˆé€‚çš„æ—¶é’Ÿæºå¯¹äºä¿è¯å®æ—¶æ—¶é’Ÿçš„å‡†ç¡®æ€§è‡³å…³é‡è¦ï¼Œç‰¹åˆ«æ˜¯åœ¨æ²¡æœ‰ç½‘ç»œè¿æ¥çš„æƒ…å†µä¸‹ã€‚</p><h4 id="2-åˆç†é…ç½®å®šæ—¶å™¨å‚æ•°">2. åˆç†é…ç½®å®šæ—¶å™¨å‚æ•°</h4><p>æ ¹æ®åº”ç”¨åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„å®šæ—¶å™¨æ¨¡å¼ã€é¢‘ç‡å’Œè®¡æ•°å€¼ï¼Œä»¥æ»¡è¶³å®é™…éœ€æ±‚ã€‚</p><h4 id="3-ç¡¬ä»¶åŠ é€Ÿè®¡æ•°">3. ç¡¬ä»¶åŠ é€Ÿè®¡æ•°</h4><p>ä¸€äº›å¤„ç†å™¨æä¾›äº†ç¡¬ä»¶åŠ é€Ÿè®¡æ•°åŠŸèƒ½ï¼Œå¯ä»¥æé«˜å®šæ—¶å™¨çš„è®¡æ•°æ•ˆç‡ã€‚</p><h3 id="ç¤ºä¾‹ï¼šå®šæ—¶å™¨çš„ç®€å•åº”ç”¨">ç¤ºä¾‹ï¼šå®šæ—¶å™¨çš„ç®€å•åº”ç”¨</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup_timer</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// é…ç½®å®šæ—¶å™¨æ¨¡å¼å’Œå‚æ•°</span><br>    <span class="hljs-built_in">configure_timer_mode</span>();<br>    <br>    <span class="hljs-comment">// è®¾ç½®æ¯”è¾ƒå€¼ï¼Œå†³å®šå®šæ—¶å™¨ä¸­æ–­çš„è§¦å‘æ—¶æœº</span><br>    <span class="hljs-built_in">set_compare_value</span>();<br>    <br>    <span class="hljs-comment">// å¯åŠ¨å®šæ—¶å™¨</span><br>    <span class="hljs-built_in">start_timer</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º">ç»“è®º</h3><p>å®æ—¶æ—¶é’Ÿå’Œå®šæ—¶å™¨æ˜¯åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ç»„ä»¶ï¼Œå®ƒä»¬å¯ä»¥ç”¨äºå®ç°æ—¶é—´æµ‹é‡ã€ä»»åŠ¡è°ƒåº¦ç­‰åŠŸèƒ½ã€‚é€šè¿‡åˆç†é€‰æ‹©æ—¶é’Ÿæºã€é…ç½®å®šæ—¶å™¨å‚æ•°ç­‰ä¼˜åŒ–æ–¹æ³•ï¼Œå¯ä»¥æœ€å¤§é™åº¦åœ°å‘æŒ¥å®ƒä»¬çš„ä½œç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„ç”µæºç®¡ç†ä¸ä½åŠŸè€—è®¾è®¡</title>
      <link href="/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%8A%9F%E8%80%97%E4%BC%98%E5%8C%96%E4%B8%8E%E4%BD%8E%E5%8A%9F%E8%80%97%E8%AE%BE%E8%AE%A1%E7%AD%96%E7%95%A5/"/>
      <url>/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%8A%9F%E8%80%97%E4%BC%98%E5%8C%96%E4%B8%8E%E4%BD%8E%E5%8A%9F%E8%80%97%E8%AE%BE%E8%AE%A1%E7%AD%96%E7%95%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„ç”µæºç®¡ç†ä¸ä½åŠŸè€—è®¾è®¡">åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„ç”µæºç®¡ç†ä¸ä½åŠŸè€—è®¾è®¡</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­ï¼Œç”µæºç®¡ç†å’Œä½åŠŸè€—è®¾è®¡æ˜¯ç¡®ä¿è®¾å¤‡é•¿æ—¶é—´ç¨³å®šè¿è¡Œçš„å…³é”®ã€‚éšç€ç‰©è”ç½‘è®¾å¤‡å’Œä¾¿æºå¼ç”µå­äº§å“çš„æ™®åŠï¼Œä½åŠŸè€—è®¾è®¡å˜å¾—å°¤ä¸ºé‡è¦ã€‚æœ¬ç¯‡åšå®¢å°†è¯¦ç»†ä»‹ç»åµŒå…¥å¼ç³»ç»Ÿä¸­çš„ç”µæºç®¡ç†ç­–ç•¥ã€ä½åŠŸè€—è®¾è®¡åŸåˆ™ã€å…·ä½“çš„å®ç°æ–¹æ³•å’Œå®é™…åº”ç”¨å®ä¾‹ï¼ŒåŒæ—¶æä¾›ç›¸åº”çš„ä¸šåŠ¡ä»£ç ç¤ºä¾‹ï¼Œå¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨è¿™äº›æŠ€æœ¯ã€‚</p><h3 id="1-ç”µæºç®¡ç†æ¦‚è¿°">1. ç”µæºç®¡ç†æ¦‚è¿°</h3><h4 id="1-1-ç”µæºç®¡ç†çš„é‡è¦æ€§">1.1 ç”µæºç®¡ç†çš„é‡è¦æ€§</h4><p>ç”µæºç®¡ç†åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li><strong>å»¶é•¿ç”µæ± å¯¿å‘½</strong>ï¼šå¯¹äºç”µæ± ä¾›ç”µçš„åµŒå…¥å¼è®¾å¤‡æ¥è¯´ï¼Œç”µæºç®¡ç†å¯ä»¥æœ‰æ•ˆå»¶é•¿è®¾å¤‡çš„è¿è¡Œæ—¶é—´ã€‚é€šè¿‡é™ä½åŠŸè€—ï¼Œå¯ä»¥å‡å°‘ç”µæ± çš„æ”¾ç”µé€Ÿç‡ï¼Œä»è€Œå»¶é•¿è®¾å¤‡çš„ä½¿ç”¨å¯¿å‘½ã€‚</li><li><strong>é™ä½èƒ½è€—</strong>ï¼šå‡å°‘ç³»ç»Ÿçš„åŠŸè€—ä¸ä»…æœ‰åŠ©äºç¯ä¿ï¼Œè¿˜èƒ½é™ä½è¿è¥æˆæœ¬ã€‚ç‰¹åˆ«æ˜¯åœ¨å¤§è§„æ¨¡éƒ¨ç½²çš„ç‰©è”ç½‘è®¾å¤‡ä¸­ï¼Œé™ä½æ¯ä¸ªè®¾å¤‡çš„åŠŸè€—å¯ä»¥æ˜¾è‘—å‡å°‘æ•´ä½“èƒ½è€—ã€‚</li><li><strong>æé«˜ç³»ç»Ÿå¯é æ€§</strong>ï¼šé€šè¿‡åˆç†çš„ç”µæºç®¡ç†ï¼Œå¯ä»¥å‡å°‘çƒ­é‡äº§ç”Ÿï¼Œè¿›è€Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚è¿‡é«˜çš„åŠŸè€—ä¼šå¯¼è‡´è®¾å¤‡å‘çƒ­ï¼Œä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½å’Œå¯¿å‘½ã€‚</li><li><strong>æ»¡è¶³è®¾è®¡è§„èŒƒ</strong>ï¼šè®¸å¤šåµŒå…¥å¼ç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯ä¾¿æºå¼è®¾å¤‡ï¼Œéœ€è¦æ»¡è¶³ä¸¥æ ¼çš„åŠŸè€—è§„èŒƒå’Œæ ‡å‡†ã€‚æœ‰æ•ˆçš„ç”µæºç®¡ç†æœ‰åŠ©äºç¡®ä¿è®¾å¤‡ç¬¦åˆè¿™äº›è§„èŒƒã€‚</li></ul><h4 id="1-2-ç”µæºç®¡ç†çš„ä¸»è¦ç­–ç•¥">1.2 ç”µæºç®¡ç†çš„ä¸»è¦ç­–ç•¥</h4><p>ç”µæºç®¡ç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ç­–ç•¥ï¼š</p><ul><li><strong>åŠ¨æ€ç”µå‹ä¸é¢‘ç‡è°ƒèŠ‚ï¼ˆDVFSï¼‰</strong>ï¼šé€šè¿‡è°ƒèŠ‚å¤„ç†å™¨çš„ç”µå‹å’Œé¢‘ç‡ï¼Œè¾¾åˆ°é™ä½åŠŸè€—çš„ç›®çš„ã€‚åœ¨å¤„ç†å™¨è´Ÿè½½è¾ƒè½»æ—¶ï¼Œå¯ä»¥é™ä½é¢‘ç‡å’Œç”µå‹ï¼Œä»¥å‡å°‘åŠŸè€—ã€‚åœ¨å¤„ç†å™¨è´Ÿè½½è¾ƒé‡æ—¶ï¼Œå¯ä»¥æé«˜é¢‘ç‡å’Œç”µå‹ï¼Œä»¥æé«˜æ€§èƒ½ã€‚</li><li><strong>ç”µæºåŸŸæ§åˆ¶</strong>ï¼šå°†ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªç”µæºåŸŸï¼Œæ ¹æ®éœ€è¦å¯¹ä¸åŒç”µæºåŸŸè¿›è¡Œç‹¬ç«‹æ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨ä¸éœ€è¦ä½¿ç”¨æŸä¸ªå¤–è®¾æ—¶å…³é—­å…¶ç”µæºåŸŸï¼Œä»¥èŠ‚çœåŠŸè€—ã€‚</li><li><strong>ç¡çœ æ¨¡å¼ä¸å¾…æœºæ¨¡å¼</strong>ï¼šåœ¨ä¸éœ€è¦å·¥ä½œæ—¶ï¼Œå°†ç³»ç»Ÿç½®äºä½åŠŸè€—çš„ç¡çœ æ¨¡å¼æˆ–å¾…æœºæ¨¡å¼ã€‚è¿™äº›æ¨¡å¼å¯ä»¥æ˜¾è‘—é™ä½ç³»ç»Ÿçš„åŠŸè€—ï¼Œä½†éœ€è¦è€ƒè™‘å”¤é†’æ—¶é—´å’Œå“åº”é€Ÿåº¦ã€‚</li><li><strong>ç¡¬ä»¶åŠ é€Ÿ</strong>ï¼šåˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿå™¨æ‰§è¡Œç‰¹å®šä»»åŠ¡ï¼Œå‡å°‘å¤„ç†å™¨è´Ÿæ‹…ï¼Œä»è€Œé™ä½åŠŸè€—ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ä¸“ç”¨çš„åŠ å¯†èŠ¯ç‰‡è¿›è¡ŒåŠ å¯†è¿ç®—ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é€šç”¨å¤„ç†å™¨è¿›è¡Œè½¯ä»¶åŠ å¯†ã€‚</li><li><strong>é«˜æ•ˆç”µæºè½¬æ¢</strong>ï¼šä½¿ç”¨é«˜æ•ˆçš„ç”µæºè½¬æ¢å™¨ï¼Œå¦‚DCDCè½¬æ¢å™¨ï¼Œå‡å°‘ç”µèƒ½æŸè€—ï¼Œæé«˜ç”µæºä½¿ç”¨æ•ˆç‡ã€‚</li><li><strong>ç”µæºç›‘æµ‹ä¸ç®¡ç†</strong>ï¼šé€šè¿‡å®æ—¶ç›‘æµ‹ç”µæºä½¿ç”¨æƒ…å†µï¼ŒåŠ¨æ€è°ƒæ•´ç”µæºç­–ç•¥ï¼Œä»¥ä¼˜åŒ–åŠŸè€—ã€‚</li></ul><h3 id="2-ä½åŠŸè€—è®¾è®¡åŸåˆ™">2. ä½åŠŸè€—è®¾è®¡åŸåˆ™</h3><p>ä½åŠŸè€—è®¾è®¡éœ€è¦ä»ç¡¬ä»¶å’Œè½¯ä»¶ä¸¤ä¸ªæ–¹é¢è¿›è¡Œè€ƒè™‘ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä½åŠŸè€—è®¾è®¡åŸåˆ™ï¼š</p><h4 id="2-1-ç¡¬ä»¶è®¾è®¡åŸåˆ™">2.1 ç¡¬ä»¶è®¾è®¡åŸåˆ™</h4><ul><li><strong>é€‰æ‹©ä½åŠŸè€—å™¨ä»¶</strong>ï¼šåœ¨ç¡¬ä»¶è®¾è®¡æ—¶ï¼Œé€‰æ‹©ä½åŠŸè€—çš„å¾®æ§åˆ¶å™¨ã€ä¼ æ„Ÿå™¨å’Œå…¶ä»–å¤–è®¾ã€‚ä¾‹å¦‚ï¼Œé€‰æ‹©å…·æœ‰ä½åŠŸè€—æ¨¡å¼çš„å¾®æ§åˆ¶å™¨ã€ä½¿ç”¨ä½åŠŸè€—ä¼ æ„Ÿå™¨ç­‰ã€‚</li><li><strong>ä¼˜åŒ–ç”µè·¯è®¾è®¡</strong>ï¼šé€šè¿‡ä¼˜åŒ–ç”µè·¯è®¾è®¡ï¼Œå‡å°‘ç”µè·¯ä¸­çš„èƒ½é‡æŸè€—ã€‚ä¾‹å¦‚ï¼Œå‡å°‘ç”µè·¯ä¸­çš„ç”µé˜»å’Œç”µæ„Ÿã€ä¼˜åŒ–PCBå¸ƒå±€ä»¥å‡å°‘ä¿¡å·å¹²æ‰°ç­‰ã€‚</li><li><strong>ä½¿ç”¨ç”µæºç®¡ç†èŠ¯ç‰‡</strong>ï¼šåˆ©ç”¨ä¸“ç”¨çš„ç”µæºç®¡ç†èŠ¯ç‰‡ï¼ˆPMICï¼‰è¿›è¡Œç”µæºç®¡ç†ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚PMICå¯ä»¥é›†æˆå¤šç§ç”µæºç®¡ç†åŠŸèƒ½ï¼Œå¦‚ç”µæºè½¬æ¢ã€å……ç”µç®¡ç†ã€ç”µæ± ç›‘æµ‹ç­‰ã€‚</li><li><strong>å‡å°‘ä¸å¿…è¦çš„ç”µæºæ¶ˆè€—</strong>ï¼šå…³é—­æˆ–æ–­ç”µä¸ä½¿ç”¨çš„æ¨¡å—å’Œå¤–è®¾ï¼Œé¿å…ä¸å¿…è¦çš„ç”µæºæ¶ˆè€—ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸éœ€è¦ä½¿ç”¨æ˜¾ç¤ºå±æ—¶å…³é—­å…¶ç”µæºï¼Œåœ¨ä¸éœ€è¦ä½¿ç”¨æ— çº¿é€šä¿¡æ¨¡å—æ—¶å…³é—­å…¶ç”µæºç­‰ã€‚</li><li><strong>ä¼˜åŒ–ç”µæºè·¯å¾„</strong>ï¼šç¡®ä¿ç”µæºè·¯å¾„çš„æœ€å°æŸè€—ï¼Œå‡å°‘ç”µæºè½¬æ¢è¿‡ç¨‹ä¸­çš„èƒ½é‡æŸè€—ã€‚ä¾‹å¦‚ï¼Œé€‰æ‹©é«˜æ•ˆçš„ç”µæºè½¬æ¢å™¨ï¼Œå‡å°‘ç”µæºè·¯å¾„ä¸­çš„ç”µé˜»å’Œç”µæ„Ÿç­‰ã€‚</li></ul><h4 id="2-2-è½¯ä»¶è®¾è®¡åŸåˆ™">2.2 è½¯ä»¶è®¾è®¡åŸåˆ™</h4><ul><li><strong>å‡å°‘å¤„ç†å™¨è´Ÿè½½</strong>ï¼šé€šè¿‡ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘å¤„ç†å™¨çš„è´Ÿè½½ï¼Œé™ä½åŠŸè€—ã€‚ä¾‹å¦‚ï¼Œä¼˜åŒ–ç®—æ³•ä»¥æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—å’Œæ“ä½œç­‰ã€‚</li><li><strong>åˆ©ç”¨ä½åŠŸè€—æ¨¡å¼</strong>ï¼šåœ¨ä¸éœ€è¦å·¥ä½œæ—¶ï¼Œå°†å¤„ç†å™¨å’Œå¤–è®¾ç½®äºä½åŠŸè€—æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸éœ€è¦å¤„ç†ä»»åŠ¡æ—¶å°†å¤„ç†å™¨ç½®äºç¡çœ æ¨¡å¼ï¼Œåœ¨ä¸éœ€è¦ä½¿ç”¨æŸä¸ªå¤–è®¾æ—¶å…³é—­å…¶ç”µæºç­‰ã€‚</li><li><strong>ä¸­æ–­ä¸äº‹ä»¶é©±åŠ¨</strong>ï¼šé‡‡ç”¨ä¸­æ–­å’Œäº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œé¿å…ä¸å¿…è¦çš„è½®è¯¢æ“ä½œï¼Œé™ä½åŠŸè€—ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ä¸­æ–­æœºåˆ¶æ¥å“åº”å¤–éƒ¨äº‹ä»¶ï¼Œè€Œä¸æ˜¯é€šè¿‡è½®è¯¢æœºåˆ¶æ¥æ£€æµ‹å¤–éƒ¨äº‹ä»¶ã€‚</li><li><strong>å‡å°‘å†…å­˜è®¿é—®</strong>ï¼šå‡å°‘é¢‘ç¹çš„å†…å­˜è®¿é—®ï¼Œä»¥é™ä½åŠŸè€—ã€‚ä¾‹å¦‚ï¼Œå°†å¸¸ç”¨çš„æ•°æ®ä¿å­˜åœ¨å¯„å­˜å™¨ä¸­ï¼Œå‡å°‘å¯¹å¤–éƒ¨å­˜å‚¨å™¨çš„è®¿é—®ç­‰ã€‚</li><li><strong>ä¼˜åŒ–ä»»åŠ¡è°ƒåº¦</strong>ï¼šé€šè¿‡åˆç†çš„ä»»åŠ¡è°ƒåº¦ï¼Œå‡å°‘å¤„ç†å™¨çš„å·¥ä½œè´Ÿè½½ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚ä¾‹å¦‚ï¼Œåˆç†å®‰æ’ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºï¼Œé¿å…ä¸å¿…è¦çš„ä»»åŠ¡åˆ‡æ¢ç­‰ã€‚</li><li><strong>å‡å°‘é€šä¿¡åŠŸè€—</strong>ï¼šä¼˜åŒ–é€šä¿¡åè®®ï¼Œå‡å°‘é€šä¿¡è¿‡ç¨‹ä¸­çš„åŠŸè€—ã€‚ä¾‹å¦‚ï¼Œé€‰æ‹©ä½åŠŸè€—çš„æ— çº¿é€šä¿¡åè®®ï¼Œå‡å°‘é€šä¿¡æ•°æ®é‡å’Œé€šä¿¡é¢‘ç‡ç­‰ã€‚</li></ul><h3 id="3-ä½åŠŸè€—è®¾è®¡çš„å®ç°æ–¹æ³•">3. ä½åŠŸè€—è®¾è®¡çš„å®ç°æ–¹æ³•</h3><h4 id="3-1-åŠ¨æ€ç”µå‹ä¸é¢‘ç‡è°ƒèŠ‚ï¼ˆDVFSï¼‰">3.1 åŠ¨æ€ç”µå‹ä¸é¢‘ç‡è°ƒèŠ‚ï¼ˆDVFSï¼‰</h4><p>DVFSæ˜¯ä¸€ç§é€šè¿‡è°ƒèŠ‚å¤„ç†å™¨ç”µå‹å’Œé¢‘ç‡æ¥é™ä½åŠŸè€—çš„æ–¹æ³•ã€‚åœ¨å¤„ç†å™¨è´Ÿè½½è¾ƒè½»æ—¶ï¼Œå¯ä»¥é™ä½é¢‘ç‡å’Œç”µå‹ï¼Œä»¥å‡å°‘åŠŸè€—ã€‚åœ¨å¤„ç†å™¨è´Ÿè½½è¾ƒé‡æ—¶ï¼Œå¯ä»¥æé«˜é¢‘ç‡å’Œç”µå‹ï¼Œä»¥æé«˜æ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºäºSTM32å¾®æ§åˆ¶å™¨çš„DVFSå®ç°ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stm32f4xx.h&quot;</span></span><br><br><span class="hljs-comment">// åˆå§‹åŒ–ç³»ç»Ÿæ—¶é’Ÿ</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">SystemClock_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    <span class="hljs-comment">// é…ç½®ç³»ç»Ÿæ—¶é’Ÿä¸º100MHz</span><br>    RCC_OscInitTypeDef RCC_OscInitStruct = &#123;<span class="hljs-number">0</span>&#125;;<br>    RCC_ClkInitTypeDef RCC_ClkInitStruct = &#123;<span class="hljs-number">0</span>&#125;;<br><br>    RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;<br>    RCC_OscInitStruct.HSEState = RCC_HSE_ON;<br>    RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;<br>    RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;<br>    RCC_OscInitStruct.PLL.PLLM = <span class="hljs-number">8</span>;<br>    RCC_OscInitStruct.PLL.PLLN = <span class="hljs-number">400</span>;<br>    RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV4;<br>    RCC_OscInitStruct.PLL.PLLQ = <span class="hljs-number">7</span>;<br>    <span class="hljs-keyword">if</span> (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK) &#123;<br>        <span class="hljs-comment">// åˆå§‹åŒ–é”™è¯¯å¤„ç†</span><br>    &#125;<br><br>    RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK | RCC_CLOCKTYPE_SYSCLK | RCC_CLOCKTYPE_PCLK1 | RCC_CLOCKTYPE_PCLK2;<br>    RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;<br>    RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;<br>    RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;<br>    RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;<br>    <span class="hljs-keyword">if</span> (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_3) != HAL_OK) &#123;<br>        <span class="hljs-comment">// åˆå§‹åŒ–é”™è¯¯å¤„ç†</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// è°ƒæ•´ç³»ç»Ÿé¢‘ç‡</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">SetSystemFrequency</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> frequency)</span> &#123;<br>    <span class="hljs-comment">// æ ¹æ®éœ€æ±‚è°ƒæ•´ç³»ç»Ÿé¢‘ç‡</span><br>    <span class="hljs-comment">// ç¤ºä¾‹ï¼šè®¾ç½®ç³»ç»Ÿé¢‘ç‡ä¸º50MHz</span><br>    RCC_OscInitTypeDef RCC_OscInitStruct = &#123;<span class="hljs-number">0</span>&#125;;<br>    RCC_ClkInitTypeDef RCC_ClkInitStruct = &#123;<span class="hljs-number">0</span>&#125;;<br><br>    RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;<br>    RCC_OscInitStruct.HSEState = RCC_HSE_ON;<br>    RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;<br>    RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;<br>    RCC_OscInitStruct.PLL.PLLM = <span class="hljs-number">8</span>;<br>    RCC_OscInitStruct.PLL.PLLN = <span class="hljs-number">400</span>;<br>    RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV8; <span class="hljs-comment">// ä¿®æ”¹PLLå€é¢‘å› å­</span><br>    RCC_OscInitStruct.PLL.PLLQ = <span class="hljs-number">7</span>;<br>    <span class="hljs-keyword">if</span> (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK) &#123;<br>        <span class="hljs-comment">// åˆå§‹åŒ–é”™è¯¯å¤„ç†</span><br>    &#125;<br><br>    RCC_ClkInitStruct.ClockType = RCC<br><br>_CLOCKTYPE_HCLK | RCC_CLOCKTYPE_SYSCLK | RCC_CLOCKTYPE_PCLK1 | RCC_CLOCKTYPE_PCLK2;<br>    RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;<br>    RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;<br>    RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;<br>    RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;<br>    <span class="hljs-keyword">if</span> (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_3) != HAL_OK) &#123;<br>        <span class="hljs-comment">// åˆå§‹åŒ–é”™è¯¯å¤„ç†</span><br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    HAL_Init();<br>    SystemClock_Config();<br><br>    <span class="hljs-comment">// è®¾ç½®ç³»ç»Ÿé¢‘ç‡ä¸º50MHzä»¥é™ä½åŠŸè€—</span><br>    SetSystemFrequency(<span class="hljs-number">50000000</span>);<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-comment">// ä¸»å¾ªç¯</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-2-ç”µæºåŸŸæ§åˆ¶">3.2 ç”µæºåŸŸæ§åˆ¶</h4><p>ç”µæºåŸŸæ§åˆ¶æ˜¯ä¸€ç§å°†ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªç”µæºåŸŸï¼Œå¹¶æ ¹æ®éœ€è¦å¯¹ä¸åŒç”µæºåŸŸè¿›è¡Œç‹¬ç«‹æ§åˆ¶çš„æ–¹æ³•ã€‚åœ¨ä¸€äº›å¤æ‚çš„åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œå¯ä»¥é€šè¿‡ç”µæºåŸŸæ§åˆ¶æ¥ç®¡ç†ä¸åŒæ¨¡å—çš„ç”µæºçŠ¶æ€ï¼Œä»è€Œå®ç°ä½åŠŸè€—è®¾è®¡ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºäºTIçš„MSP430å¾®æ§åˆ¶å™¨çš„ç”µæºåŸŸæ§åˆ¶ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;msp430.h&quot;</span></span><br><br><span class="hljs-comment">// åˆå§‹åŒ–ç”µæºåŸŸ</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">PowerDomain_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    <span class="hljs-comment">// é…ç½®ç”µæºåŸŸ</span><br>    <span class="hljs-comment">// ç¤ºä¾‹ï¼šä½¿èƒ½ç”µæºåŸŸ1ï¼Œç¦ç”¨ç”µæºåŸŸ2</span><br>    PMMCTL0_H = PMMPW_H; <span class="hljs-comment">// è§£é”PMMå¯„å­˜å™¨</span><br>    PMMCTL0_L = PMMPW_L; <span class="hljs-comment">// é”å®šPMMå¯„å­˜å™¨</span><br>    PMMCTL0 &amp;= ~PMMPW;   <span class="hljs-comment">// ç¦ç”¨ç”µæºåŸŸ2</span><br>    PMMCTL0 |= PMMPW;    <span class="hljs-comment">// ä½¿èƒ½ç”µæºåŸŸ1</span><br>&#125;<br><br><span class="hljs-comment">// åˆ‡æ¢ç”µæºåŸŸçŠ¶æ€</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">PowerDomain_Switch</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> domain, <span class="hljs-type">uint8_t</span> state)</span> &#123;<br>    <span class="hljs-comment">// æ ¹æ®éœ€æ±‚åˆ‡æ¢ç”µæºåŸŸçŠ¶æ€</span><br>    <span class="hljs-keyword">if</span> (domain == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">if</span> (state == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-comment">// ä½¿èƒ½ç”µæºåŸŸ1</span><br>            PMMCTL0_H = PMMPW_H; <span class="hljs-comment">// è§£é”PMMå¯„å­˜å™¨</span><br>            PMMCTL0_L = PMMPW_L; <span class="hljs-comment">// é”å®šPMMå¯„å­˜å™¨</span><br>            PMMCTL0 |= PMMPW;    <span class="hljs-comment">// ä½¿èƒ½ç”µæºåŸŸ1</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// ç¦ç”¨ç”µæºåŸŸ1</span><br>            PMMCTL0_H = PMMPW_H; <span class="hljs-comment">// è§£é”PMMå¯„å­˜å™¨</span><br>            PMMCTL0_L = PMMPW_L; <span class="hljs-comment">// é”å®šPMMå¯„å­˜å™¨</span><br>            PMMCTL0 &amp;= ~PMMPW;   <span class="hljs-comment">// ç¦ç”¨ç”µæºåŸŸ1</span><br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (domain == <span class="hljs-number">2</span>) &#123;<br>        <span class="hljs-keyword">if</span> (state == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-comment">// ä½¿èƒ½ç”µæºåŸŸ2</span><br>            PMMCTL0_H = PMMPW_H; <span class="hljs-comment">// è§£é”PMMå¯„å­˜å™¨</span><br>            PMMCTL0_L = PMMPW_L; <span class="hljs-comment">// é”å®šPMMå¯„å­˜å™¨</span><br>            PMMCTL0 |= PMMPW;    <span class="hljs-comment">// ä½¿èƒ½ç”µæºåŸŸ2</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// ç¦ç”¨ç”µæºåŸŸ2</span><br>            PMMCTL0_H = PMMPW_H; <span class="hljs-comment">// è§£é”PMMå¯„å­˜å™¨</span><br>            PMMCTL0_L = PMMPW_L; <span class="hljs-comment">// é”å®šPMMå¯„å­˜å™¨</span><br>            PMMCTL0 &amp;= ~PMMPW;   <span class="hljs-comment">// ç¦ç”¨ç”µæºåŸŸ2</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    WDTCTL = WDTPW | WDTHOLD; <span class="hljs-comment">// åœæ­¢çœ‹é—¨ç‹—</span><br><br>    PowerDomain_Init();<br><br>    <span class="hljs-comment">// åˆ‡æ¢ç”µæºåŸŸçŠ¶æ€</span><br>    PowerDomain_Switch(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// ä½¿èƒ½ç”µæºåŸŸ1</span><br>    PowerDomain_Switch(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// ç¦ç”¨ç”µæºåŸŸ2</span><br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-comment">// ä¸»å¾ªç¯</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-3-ç¡çœ æ¨¡å¼ä¸å¾…æœºæ¨¡å¼">3.3 ç¡çœ æ¨¡å¼ä¸å¾…æœºæ¨¡å¼</h4><p>ç¡çœ æ¨¡å¼å’Œå¾…æœºæ¨¡å¼æ˜¯é™ä½ç³»ç»ŸåŠŸè€—çš„å¸¸ç”¨æ–¹æ³•ã€‚å½“ç³»ç»Ÿå¤„äºä¸æ´»åŠ¨çŠ¶æ€æ—¶ï¼Œå¯ä»¥è¿›å…¥ç¡çœ æ¨¡å¼æˆ–å¾…æœºæ¨¡å¼ï¼Œä»¥å‡å°‘åŠŸè€—ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºäºAVRå¾®æ§åˆ¶å™¨çš„ç¡çœ æ¨¡å¼ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;avr/io.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;avr/sleep.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;avr/interrupt.h&gt;</span></span><br><br><span class="hljs-comment">// åˆå§‹åŒ–ç¡çœ æ¨¡å¼</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">SleepMode_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    <span class="hljs-comment">// é…ç½®ç¡çœ æ¨¡å¼</span><br>    set_sleep_mode(SLEEP_MODE_PWR_DOWN);<br>&#125;<br><br><span class="hljs-comment">// å¯ç”¨ç¡çœ æ¨¡å¼</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">Enter_Sleep</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    sleep_enable();<br>    sei();  <span class="hljs-comment">// ä½¿èƒ½ä¸­æ–­</span><br>    sleep_cpu();  <span class="hljs-comment">// è¿›å…¥ç¡çœ æ¨¡å¼</span><br>    sleep_disable();<br>&#125;<br><br><span class="hljs-comment">// ä¸­æ–­æœåŠ¡ç¨‹åº</span><br>ISR(INT0_vect) &#123;<br>    <span class="hljs-comment">// å¤„ç†ä¸­æ–­</span><br>    <span class="hljs-comment">// åœ¨è¿™é‡Œæ·»åŠ ä¸­æ–­å¤„ç†ä»£ç </span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> &#123;<br>    <span class="hljs-comment">// é…ç½®å¤–éƒ¨ä¸­æ–­</span><br>    EIMSK |= (<span class="hljs-number">1</span> &lt;&lt; INT0);  <span class="hljs-comment">// ä½¿èƒ½å¤–éƒ¨ä¸­æ–­0</span><br>    EICRA |= (<span class="hljs-number">1</span> &lt;&lt; ISC01); <span class="hljs-comment">// é…ç½®ä¸­æ–­è§¦å‘æ–¹å¼ï¼ˆä¸‹é™æ²¿è§¦å‘ï¼‰</span><br><br>    SleepMode_Init();<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>        Enter_Sleep();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-å®é™…åº”ç”¨å®ä¾‹">4. å®é™…åº”ç”¨å®ä¾‹</h3><h4 id="4-1-ç‰©è”ç½‘è®¾å¤‡">4.1 ç‰©è”ç½‘è®¾å¤‡</h4><p>åœ¨ç‰©è”ç½‘è®¾å¤‡ä¸­ï¼Œç”µæºç®¡ç†å’Œä½åŠŸè€—è®¾è®¡å°¤ä¸ºé‡è¦ã€‚ç‰©è”ç½‘è®¾å¤‡é€šå¸¸éœ€è¦é•¿æ—¶é—´è¿è¡Œï¼Œå¹¶ä¸”å¾€å¾€ä¾èµ–ç”µæ± ä¾›ç”µã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç‰©è”ç½‘æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨çš„è®¾è®¡ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Wire.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;LowPower.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;DHT.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DHTPIN 2     <span class="hljs-comment">// ä¼ æ„Ÿå™¨è¿æ¥åˆ°çš„å¼•è„š</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DHTTYPE DHT11   <span class="hljs-comment">// DHT11 ç±»å‹ä¼ æ„Ÿå™¨</span></span><br><br>DHT <span class="hljs-title function_">dht</span><span class="hljs-params">(DHTPIN, DHTTYPE)</span>;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">setup</span><span class="hljs-params">()</span> &#123;<br>  Wire.begin();<br>  dht.begin();<br>  Serial.begin(<span class="hljs-number">9600</span>);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">loop</span><span class="hljs-params">()</span> &#123;<br>  <span class="hljs-comment">// è¯»å–æ¸©åº¦å’Œæ¹¿åº¦</span><br>  <span class="hljs-type">float</span> h = dht.readHumidity();<br>  <span class="hljs-type">float</span> t = dht.readTemperature();<br><br>  <span class="hljs-comment">// æ‰“å°æ¸©åº¦å’Œæ¹¿åº¦</span><br>  Serial.print(<span class="hljs-string">&quot;Humidity: &quot;</span>);<br>  Serial.print(h);<br>  Serial.print(<span class="hljs-string">&quot; %\t&quot;</span>);<br>  Serial.print(<span class="hljs-string">&quot;Temperature: &quot;</span>);<br>  Serial.print(t);<br>  Serial.println(<span class="hljs-string">&quot; *C&quot;</span>);<br><br>  <span class="hljs-comment">// è¿›å…¥ä½åŠŸè€—æ¨¡å¼ï¼Œç¡çœ 8ç§’</span><br>  LowPower.powerDown(SLEEP_8S, ADC_OFF, BOD_OFF);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¼ æ„Ÿå™¨æ¯8ç§’è¯»å–ä¸€æ¬¡æ¸©åº¦å’Œæ¹¿åº¦æ•°æ®ï¼Œç„¶åè¿›å…¥ä½åŠŸè€—æ¨¡å¼ï¼Œä»¥èŠ‚çœç”µèƒ½ã€‚</p><h4 id="4-2-ä¾¿æºå¼åŒ»ç–—è®¾å¤‡">4.2 ä¾¿æºå¼åŒ»ç–—è®¾å¤‡</h4><p>ä¾¿æºå¼åŒ»ç–—è®¾å¤‡é€šå¸¸éœ€è¦é•¿æ—¶é—´è¿è¡Œï¼Œå¹¶ä¸”å¯¹åŠŸè€—æœ‰ä¸¥æ ¼è¦æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾¿æºå¼å¿ƒç‡ç›‘æµ‹è®¾å¤‡çš„è®¾è®¡ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Wire.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;LowPower.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;PulseSensor.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> PULSE_PIN A0   <span class="hljs-comment">// å¿ƒç‡ä¼ æ„Ÿå™¨è¿æ¥åˆ°çš„å¼•è„š</span></span><br><br>PulseSensor pulseSensor;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">setup</span><span class="hljs-params">()</span> &#123;<br>  Wire.begin();<br>  pulseSensor.analogInput(PULSE_PIN);<br>  pulseSensor.begin();<br>  Serial.begin(<span class="hljs-number">9600</span>);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">loop</span><span class="hljs-params">()</span> &#123;<br>  <span class="hljs-comment">// è¯»å–å¿ƒç‡æ•°æ®</span><br>  <span class="hljs-type">int</span> myBPM = pulseSensor.getBeatsPerMinute();<br><br>  <span class="hljs-comment">// æ‰“å°å¿ƒç‡æ•°æ®</span><br>  Serial.print(<span class="hljs-string">&quot;Heart rate: &quot;</span>);<br>  Serial.print(myBPM);<br>  Serial.println(<span class="hljs-string">&quot; BPM&quot;</span>);<br><br>  <span class="hljs-comment">// è¿›å…¥ä½åŠŸè€—æ¨¡å¼ï¼Œç¡çœ 8ç§’</span><br>  LowPower.powerDown(SLEEP_8S, ADC_OFF, BOD_OFF);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè®¾å¤‡æ¯8ç§’è¯»å–ä¸€æ¬¡å¿ƒç‡æ•°æ®ï¼Œç„¶åè¿›å…¥ä½åŠŸè€—æ¨¡å¼ï¼Œä»¥å»¶é•¿ç”µæ± å¯¿å‘½ã€‚</p><h4 id="4-3-æ™ºèƒ½å®¶å±…è®¾å¤‡">4.3 æ™ºèƒ½å®¶å±…è®¾å¤‡</h4><p>æ™ºèƒ½å®¶å±…è®¾å¤‡éœ€è¦é•¿æœŸç¨³å®šè¿è¡Œï¼ŒåŒæ—¶å…·å¤‡ä½åŠŸè€—ç‰¹æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ™ºèƒ½ç¯å…‰æ§åˆ¶è®¾å¤‡çš„è®¾è®¡ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Wire.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;LowPower.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;IRremote.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> RECV_PIN 11   <span class="hljs-comment">// çº¢å¤–æ¥æ”¶å™¨è¿æ¥åˆ°çš„å¼•è„š</span></span><br><br>IRrecv <span class="hljs-title function_">irrecv</span><span class="hljs-params">(RECV_PIN)</span>;<br>decode_results results;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">setup</span><span class="hljs-params">()</span> &#123;<br>  Wire.begin();<br>  irrecv.enableIRIn(); <span class="hljs-comment">// å¯ç”¨çº¢å¤–æ¥æ”¶å™¨</span><br>  Serial.begin(<span class="hljs-number">9600</span>);<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">loop</span><span class="hljs-params">()</span> &#123;<br>  <span class="hljs-comment">// æ£€æµ‹çº¢å¤–ä¿¡å·</span><br>  <span class="hljs-keyword">if</span> (irrecv.decode(&amp;results)) &#123;<br>    Serial.println(results.value, HEX);<br>    irrecv.resume(); <span class="hljs-comment">// æ¥æ”¶ä¸‹ä¸€ä¸ªçº¢å¤–ä¿¡å·</span><br>  &#125;<br><br>  <span class="hljs-comment">// è¿›å…¥ä½åŠŸè€—æ¨¡å¼ï¼Œç¡çœ 1ç§’</span><br>  LowPower.powerDown(SLEEP_1S, ADC_OFF, BOD_OFF);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè®¾å¤‡æ¯ç§’æ£€æµ‹ä¸€æ¬¡çº¢å¤–ä¿¡å·ï¼Œç„¶åè¿›å…¥ä½åŠŸè€—æ¨¡å¼ï¼Œä»¥èŠ‚çœç”µèƒ½ã€‚</p><h3 id="ç»“è®º">ç»“è®º</h3><p>ç”µæºç®¡ç†å’Œä½åŠŸè€—è®¾è®¡åœ¨åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­å…·æœ‰é‡è¦æ„ä¹‰ã€‚é€šè¿‡åŠ¨æ€ç”µå‹ä¸é¢‘ç‡è°ƒèŠ‚ã€ç”µæºåŸŸæ§åˆ¶ã€ç¡çœ æ¨¡å¼ä¸å¾…æœºæ¨¡å¼ç­‰æ–¹æ³•ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½ç³»ç»ŸåŠŸè€—ï¼Œå»¶é•¿ç”µæ± å¯¿å‘½ï¼Œæå‡ç³»ç»Ÿå¯é æ€§ã€‚å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç”µæºç®¡ç†ç­–ç•¥å’Œä½åŠŸè€—è®¾è®¡æ–¹æ³•ã€‚å¸Œæœ›æœ¬ç¯‡åšå®¢å¯¹ä½ äº†è§£ç”µæºç®¡ç†ä¸ä½åŠŸè€—è®¾è®¡æœ‰æ‰€å¸®åŠ©ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·éšæ—¶åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> åŠŸè€— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å¼‚å¸¸å¤„ç†ä¸è°ƒè¯•æŠ€å·§</title>
      <link href="/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E4%B8%8E%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7/"/>
      <url>/2023/09/20/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E4%B8%8E%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å¼‚å¸¸å¤„ç†ä¸è°ƒè¯•æŠ€å·§">åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å¼‚å¸¸å¤„ç†ä¸è°ƒè¯•æŠ€å·§</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­ï¼Œå¼‚å¸¸å¤„ç†å’Œè°ƒè¯•æŠ€å·§æ˜¯è‡³å…³é‡è¦çš„ï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»ä¸€äº›å¸¸ç”¨çš„å¼‚å¸¸å¤„ç†å’Œè°ƒè¯•æŠ€å·§ï¼Œå¸®åŠ©ä½ åœ¨åµŒå…¥å¼é¡¹ç›®ä¸­ä¼˜åŒ–å¼€å‘æµç¨‹ã€‚</p><h3 id="å¼‚å¸¸å¤„ç†çš„åŸºæœ¬åŸåˆ™">å¼‚å¸¸å¤„ç†çš„åŸºæœ¬åŸåˆ™</h3><h4 id="1-æ—¥å¿—è®°å½•">1. æ—¥å¿—è®°å½•</h4><p>åœ¨ç³»ç»Ÿä¸­åˆç†è®°å½•æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬é”™è¯¯ä¿¡æ¯ã€è­¦å‘Šå’Œè°ƒè¯•ä¿¡æ¯ï¼Œä»¥ä¾¿åç»­åˆ†æå’Œå®šä½é—®é¢˜ã€‚</p><h4 id="2-å¼‚å¸¸çŠ¶æ€å¤„ç†">2. å¼‚å¸¸çŠ¶æ€å¤„ç†</h4><p>åœ¨ä»£ç ä¸­å®ç°å¼‚å¸¸çŠ¶æ€çš„å¤„ç†é€»è¾‘ï¼ŒåŒ…æ‹¬é”™è¯¯è¿”å›ç ã€å¼‚å¸¸æƒ…å†µä¸‹çš„æ¢å¤ç­–ç•¥ç­‰ã€‚</p><h4 id="3-ç¡¬ä»¶ç›‘æ§">3. ç¡¬ä»¶ç›‘æ§</h4><p>åˆ©ç”¨ç¡¬ä»¶çš„ç›‘æ§åŠŸèƒ½ï¼Œå¦‚çœ‹é—¨ç‹—å®šæ—¶å™¨ï¼Œå¯ä»¥åœ¨ç³»ç»Ÿå‡ºç°å¼‚å¸¸æƒ…å†µæ—¶è¿›è¡Œé‡å¯æˆ–è€…å…¶ä»–åº”å¯¹æªæ–½ã€‚</p><h3 id="å¸¸ç”¨è°ƒè¯•æŠ€å·§">å¸¸ç”¨è°ƒè¯•æŠ€å·§</h3><h4 id="1-ä½¿ç”¨è°ƒè¯•å™¨">1. ä½¿ç”¨è°ƒè¯•å™¨</h4><p>å€ŸåŠ©è°ƒè¯•å™¨ï¼ˆå¦‚GDBï¼‰ï¼Œå¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­å•æ­¥æ‰§è¡Œä»£ç ã€æŸ¥çœ‹å˜é‡å€¼ç­‰ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚</p><h4 id="2-ä½¿ç”¨æ–­è¨€">2. ä½¿ç”¨æ–­è¨€</h4><p>åœ¨å…³é”®é€»è¾‘ç‚¹ä¸Šæ·»åŠ æ–­è¨€ï¼Œç”¨äºæ£€æŸ¥ç¨‹åºçš„å‡è®¾æ˜¯å¦æˆç«‹ï¼Œä¸€æ—¦æ–­è¨€å¤±è´¥å°†ä¼šæš‚åœç¨‹åºæ‰§è¡Œã€‚</p><h4 id="3-ä»£ç å¤å®¡">3. ä»£ç å¤å®¡</h4><p>è¿›è¡Œä»£ç å¤å®¡æ˜¯ä¸€ç§æœ‰æ•ˆçš„å‘ç°æ½œåœ¨é—®é¢˜çš„æ–¹æ³•ï¼Œå¯ä»¥å€ŸåŠ©å›¢é˜Ÿæˆå‘˜å…±åŒå®¡æŸ¥ä»£ç ã€‚</p><h3 id="ç¤ºä¾‹ï¼šä½¿ç”¨æ–­è¨€è¿›è¡Œè°ƒè¯•">ç¤ºä¾‹ï¼šä½¿ç”¨æ–­è¨€è¿›è¡Œè°ƒè¯•</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cassert&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-built_in">assert</span>(b != <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-string">&quot;Division by zero!&quot;</span>); <span class="hljs-comment">// æ–­è¨€ï¼Œå¦‚æœbä¸º0åˆ™ä¼šæš‚åœç¨‹åº</span><br>    <span class="hljs-type">int</span> result = a / b;<br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º">ç»“è®º</h3><p>å¼‚å¸¸å¤„ç†å’Œè°ƒè¯•æŠ€å·§æ˜¯åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡åˆç†è®°å½•æ—¥å¿—ã€å¤„ç†å¼‚å¸¸çŠ¶æ€ï¼Œä»¥åŠå€ŸåŠ©è°ƒè¯•å™¨ã€æ–­è¨€ç­‰å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>C++é€šç”¨å·¥å…·ç±»ï¼šé˜Ÿåˆ—</title>
      <link href="/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E9%98%9F%E5%88%97/"/>
      <url>/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-é€šç”¨å·¥å…·ç±»ï¼šé˜Ÿåˆ—"><strong>æ ‡é¢˜ï¼šC++é€šç”¨å·¥å…·ç±»ï¼šé˜Ÿåˆ—</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>é˜Ÿåˆ—æ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒéµå¾ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„åŸåˆ™ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™é€šç”¨çš„å·¥å…·ç±»æ¥å®ç°é˜Ÿåˆ—çš„åŸºæœ¬æ“ä½œã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å®ç°ä¸€ä¸ªé€šç”¨çš„é˜Ÿåˆ—ç±»</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Queue</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    std::queue&lt;T&gt; elements;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">enqueue</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; element)</span> </span>&#123;<br>        elements.<span class="hljs-built_in">push</span>(element);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dequeue</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!elements.<span class="hljs-built_in">empty</span>()) &#123;<br>            elements.<span class="hljs-built_in">pop</span>();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function">T <span class="hljs-title">front</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!elements.<span class="hljs-built_in">empty</span>()) &#123;<br>            <span class="hljs-keyword">return</span> elements.<span class="hljs-built_in">front</span>();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;Queue is empty.&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isEmpty</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> elements.<span class="hljs-built_in">empty</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Queue&lt;<span class="hljs-type">int</span>&gt; intQueue;<br>    intQueue.<span class="hljs-built_in">enqueue</span>(<span class="hljs-number">10</span>);<br>    intQueue.<span class="hljs-built_in">enqueue</span>(<span class="hljs-number">20</span>);<br>    intQueue.<span class="hljs-built_in">enqueue</span>(<span class="hljs-number">30</span>);<br><br>    <span class="hljs-keyword">while</span> (!intQueue.<span class="hljs-built_in">isEmpty</span>()) &#123;<br>        std::cout &lt;&lt; intQueue.<span class="hljs-built_in">front</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        intQueue.<span class="hljs-built_in">dequeue</span>();<br>    &#125;<br><br>    std::cout &lt;&lt; std::endl;<br><br>    Queue&lt;std::string&gt; stringQueue;<br>    stringQueue.<span class="hljs-built_in">enqueue</span>(<span class="hljs-string">&quot;Hello&quot;</span>);<br>    stringQueue.<span class="hljs-built_in">enqueue</span>(<span class="hljs-string">&quot;World&quot;</span>);<br>    stringQueue.<span class="hljs-built_in">enqueue</span>(<span class="hljs-string">&quot;OpenAI&quot;</span>);<br><br>    <span class="hljs-keyword">while</span> (!stringQueue.<span class="hljs-built_in">isEmpty</span>()) &#123;<br>        std::cout &lt;&lt; stringQueue.<span class="hljs-built_in">front</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        stringQueue.<span class="hljs-built_in">dequeue</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é€šç”¨å·¥å…·ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–è®¸å¤šå¸¸è§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å®ç°å¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è¿™æ ·çš„å·¥å…·ç±»æ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++é€šç”¨å·¥å…·ç±» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> é˜Ÿåˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++é€šç”¨å·¥å…·ç±»ï¼šæ ˆ</title>
      <link href="/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E6%A0%88/"/>
      <url>/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-é€šç”¨å·¥å…·ç±»ï¼šæ ˆ"><strong>æ ‡é¢˜ï¼šC++é€šç”¨å·¥å…·ç±»ï¼šæ ˆ</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>æ ˆæ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒéµå¾ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„åŸåˆ™ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™é€šç”¨çš„å·¥å…·ç±»æ¥å®ç°æ ˆçš„åŸºæœ¬æ“ä½œã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å®ç°ä¸€ä¸ªé€šç”¨çš„æ ˆç±»</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Stack</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    std::vector&lt;T&gt; elements;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; element)</span> </span>&#123;<br>        elements.<span class="hljs-built_in">push_back</span>(element);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!elements.<span class="hljs-built_in">empty</span>()) &#123;<br>            elements.<span class="hljs-built_in">pop_back</span>();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function">T <span class="hljs-title">top</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!elements.<span class="hljs-built_in">empty</span>()) &#123;<br>            <span class="hljs-keyword">return</span> elements.<span class="hljs-built_in">back</span>();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;Stack is empty.&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isEmpty</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> elements.<span class="hljs-built_in">empty</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Stack&lt;<span class="hljs-type">int</span>&gt; intStack;<br>    intStack.<span class="hljs-built_in">push</span>(<span class="hljs-number">10</span>);<br>    intStack.<span class="hljs-built_in">push</span>(<span class="hljs-number">20</span>);<br>    intStack.<span class="hljs-built_in">push</span>(<span class="hljs-number">30</span>);<br><br>    <span class="hljs-keyword">while</span> (!intStack.<span class="hljs-built_in">isEmpty</span>()) &#123;<br>        std::cout &lt;&lt; intStack.<span class="hljs-built_in">top</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        intStack.<span class="hljs-built_in">pop</span>();<br>    &#125;<br><br>    std::cout &lt;&lt; std::endl;<br><br>    Stack&lt;std::string&gt; stringStack;<br>    stringStack.<span class="hljs-built_in">push</span>(<span class="hljs-string">&quot;Hello&quot;</span>);<br>    stringStack.<span class="hljs-built_in">push</span>(<span class="hljs-string">&quot;World&quot;</span>);<br>    stringStack.<span class="hljs-built_in">push</span>(<span class="hljs-string">&quot;OpenAI&quot;</span>);<br><br>    <span class="hljs-keyword">while</span> (!stringStack.<span class="hljs-built_in">isEmpty</span>()) &#123;<br>        std::cout &lt;&lt; stringStack.<span class="hljs-built_in">top</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        stringStack.<span class="hljs-built_in">pop</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é€šç”¨å·¥å…·ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–è®¸å¤šå¸¸è§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å®ç°å¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è¿™æ ·çš„å·¥å…·ç±»æ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++é€šç”¨å·¥å…·ç±» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++é€šç”¨å·¥å…·ç±»ï¼šé…ç½®æ–‡ä»¶è¯»å–</title>
      <link href="/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/"/>
      <url>/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-é€šç”¨å·¥å…·ç±»ï¼šé…ç½®æ–‡ä»¶è¯»å–"><strong>æ ‡é¢˜ï¼šC++é€šç”¨å·¥å…·ç±»ï¼šé…ç½®æ–‡ä»¶è¯»å–</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>åœ¨è®¸å¤šåº”ç”¨ç¨‹åºä¸­ï¼Œé…ç½®æ–‡ä»¶æ˜¯ç”¨æ¥å­˜å‚¨ç¨‹åºé…ç½®ä¿¡æ¯çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™é€šç”¨çš„å·¥å…·ç±»æ¥ç®€åŒ–é…ç½®æ–‡ä»¶çš„è¯»å–è¿‡ç¨‹ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å®ç°ä¸€ä¸ªé€šç”¨çš„é…ç½®æ–‡ä»¶è¯»å–å‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigUtil</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    std::map&lt;std::string, std::string&gt; configMap;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">ConfigUtil</span>(<span class="hljs-type">const</span> std::string&amp; filepath) &#123;<br>        <span class="hljs-function">std::ifstream <span class="hljs-title">configFile</span><span class="hljs-params">(filepath)</span></span>;<br>        <span class="hljs-keyword">if</span> (configFile) &#123;<br>            std::string line;<br>            <span class="hljs-keyword">while</span> (std::<span class="hljs-built_in">getline</span>(configFile, line)) &#123;<br>                <span class="hljs-type">size_t</span> delimiterPos = line.<span class="hljs-built_in">find</span>(<span class="hljs-string">&#x27;=&#x27;</span>);<br>                <span class="hljs-keyword">if</span> (delimiterPos != std::string::npos) &#123;<br>                    std::string key = line.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>, delimiterPos);<br>                    std::string value = line.<span class="hljs-built_in">substr</span>(delimiterPos + <span class="hljs-number">1</span>);<br>                    configMap[key] = value;<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;Failed to open config file.&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function">std::string <span class="hljs-title">getValue</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; key)</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">auto</span> it = configMap.<span class="hljs-built_in">find</span>(key);<br>        <span class="hljs-keyword">if</span> (it != configMap.<span class="hljs-built_in">end</span>()) &#123;<br>            <span class="hljs-keyword">return</span> it-&gt;second;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. ä½¿ç”¨ç¤ºä¾‹</strong></p><p>å‡è®¾é…ç½®æ–‡ä»¶ï¼ˆconfig.txtï¼‰å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">username</span><span class="hljs-operator">=</span>JohnDoe<br><span class="hljs-attribute">password</span><span class="hljs-operator">=</span>secretpassword<br><span class="hljs-attribute">server</span><span class="hljs-operator">=</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span><br><span class="hljs-attribute">port</span><span class="hljs-operator">=</span><span class="hljs-number">8080</span><br></code></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-function">ConfigUtil <span class="hljs-title">config</span><span class="hljs-params">(<span class="hljs-string">&quot;config.txt&quot;</span>)</span></span>;<br><br>        std::string username = config.<span class="hljs-built_in">getValue</span>(<span class="hljs-string">&quot;username&quot;</span>);<br>        std::string password = config.<span class="hljs-built_in">getValue</span>(<span class="hljs-string">&quot;password&quot;</span>);<br>        std::string server = config.<span class="hljs-built_in">getValue</span>(<span class="hljs-string">&quot;server&quot;</span>);<br>        std::string port = config.<span class="hljs-built_in">getValue</span>(<span class="hljs-string">&quot;port&quot;</span>);<br><br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Username: &quot;</span> &lt;&lt; username &lt;&lt; std::endl;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Password: &quot;</span> &lt;&lt; password &lt;&lt; std::endl;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Server: &quot;</span> &lt;&lt; server &lt;&lt; std::endl;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Port: &quot;</span> &lt;&lt; port &lt;&lt; std::endl;<br>    &#125; <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) &#123;<br>        std::cerr &lt;&lt; <span class="hljs-string">&quot;Exception caught: &quot;</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é€šç”¨å·¥å…·ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–è®¸å¤šå¸¸è§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚é…ç½®æ–‡ä»¶è¯»å–ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è¿™æ ·çš„å·¥å…·ç±»æ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++é€šç”¨å·¥å…·ç±» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> é…ç½®æ–‡ä»¶è¯»å– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++é€šç”¨å·¥å…·ç±»ï¼šæ—¥å¿—è®°å½•</title>
      <link href="/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95/"/>
      <url>/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-é€šç”¨å·¥å…·ç±»ï¼šæ—¥å¿—è®°å½•"><strong>æ ‡é¢˜ï¼šC++é€šç”¨å·¥å…·ç±»ï¼šæ—¥å¿—è®°å½•</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>æ—¥å¿—è®°å½•æ˜¯å¼€å‘è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„ä¸€ç¯ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è·Ÿè¸ªç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä»¥åŠæ’æŸ¥é”™è¯¯ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™é€šç”¨çš„å·¥å…·ç±»æ¥ç®€åŒ–æ—¥å¿—è®°å½•çš„è¿‡ç¨‹ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å®ç°ä¸€ä¸ªé€šç”¨çš„æ—¥å¿—è®°å½•å‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LogUtil</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    std::ofstream logFile;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">LogUtil</span>(<span class="hljs-type">const</span> std::string&amp; filepath) &#123;<br>        logFile.<span class="hljs-built_in">open</span>(filepath, std::ios::out | std::ios::app);<br>        <span class="hljs-keyword">if</span> (!logFile.<span class="hljs-built_in">is_open</span>()) &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;Failed to open log file.&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    ~<span class="hljs-built_in">LogUtil</span>() &#123;<br>        logFile.<span class="hljs-built_in">close</span>();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> </span>&#123;<br>        std::<span class="hljs-type">time_t</span> currentTime = std::<span class="hljs-built_in">time</span>(<span class="hljs-number">0</span>);<br>        std::string timestamp = std::<span class="hljs-built_in">ctime</span>(&amp;currentTime);<br>        timestamp.<span class="hljs-built_in">pop_back</span>(); <span class="hljs-comment">// Remove the trailing newline character</span><br><br>        logFile &lt;&lt; <span class="hljs-string">&quot;[&quot;</span> &lt;&lt; timestamp &lt;&lt; <span class="hljs-string">&quot;] &quot;</span> &lt;&lt; message &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-function">LogUtil <span class="hljs-title">logger</span><span class="hljs-params">(<span class="hljs-string">&quot;logfile.txt&quot;</span>)</span></span>;<br>        logger.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;This is a log message.&quot;</span>);<br>        logger.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;Another log message.&quot;</span>);<br>    &#125; <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) &#123;<br>        std::cerr &lt;&lt; <span class="hljs-string">&quot;Exception caught: &quot;</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é€šç”¨å·¥å…·ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–è®¸å¤šå¸¸è§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚æ—¥å¿—è®°å½•ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è¿™æ ·çš„å·¥å…·ç±»æ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++é€šç”¨å·¥å…·ç±» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> æ—¥å¿—è®°å½• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰ä»‹ç»ä¸åº”ç”¨</title>
      <link href="/2023/09/18/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%AE%9E%E6%97%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88RTOS%EF%BC%89%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%BA%94%E7%94%A8/"/>
      <url>/2023/09/18/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%AE%9E%E6%97%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88RTOS%EF%BC%89%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰ä»‹ç»ä¸åº”ç”¨">åµŒå…¥å¼ç¬”è®°ï¼šåµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰ä»‹ç»ä¸åº”ç”¨</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰åœ¨åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²ï¼Œå®ƒå¯ä»¥æä¾›ä»»åŠ¡è°ƒåº¦ã€ä¸­æ–­ç®¡ç†ç­‰åŠŸèƒ½ï¼Œç¡®ä¿ç³»ç»Ÿèƒ½å¤ŸæŒ‰æ—¶å“åº”å¤–éƒ¨äº‹ä»¶ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»RTOSçš„åŸºæœ¬æ¦‚å¿µã€ä¼˜åŠ¿ä»¥åŠåœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„åº”ç”¨åœºæ™¯ã€‚</p><h3 id="RTOSçš„åŸºæœ¬æ¦‚å¿µ">RTOSçš„åŸºæœ¬æ¦‚å¿µ</h3><h4 id="1-ä»»åŠ¡ï¼ˆTaskï¼‰">1. ä»»åŠ¡ï¼ˆTaskï¼‰</h4><p>RTOSå…è®¸ç¨‹åºå‘˜å°†åº”ç”¨ç¨‹åºæ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹çš„ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥ç‹¬ç«‹è¿è¡Œã€‚</p><h4 id="2-ä»»åŠ¡è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰">2. ä»»åŠ¡è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰</h4><p>ä»»åŠ¡è°ƒåº¦å™¨è´Ÿè´£å†³å®šå“ªä¸ªä»»åŠ¡åœ¨ç‰¹å®šæ—¶åˆ»è¿è¡Œï¼Œå®ƒæ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§å’ŒçŠ¶æ€è¿›è¡Œè°ƒåº¦ã€‚</p><h4 id="3-ä¸­æ–­æœåŠ¡ç¨‹åºï¼ˆISRï¼‰">3. ä¸­æ–­æœåŠ¡ç¨‹åºï¼ˆISRï¼‰</h4><p>RTOSæä¾›äº†å¯¹ä¸­æ–­çš„æ”¯æŒï¼Œå¯ä»¥ä½¿ç³»ç»Ÿåœ¨å“åº”å¤–éƒ¨äº‹ä»¶æ—¶å¿«é€Ÿåˆ‡æ¢åˆ°ä¸­æ–­æœåŠ¡ç¨‹åºï¼Œå¤„ç†ç´§æ€¥ä»»åŠ¡ã€‚</p><h3 id="RTOSçš„ä¼˜åŠ¿">RTOSçš„ä¼˜åŠ¿</h3><h4 id="1-å®æ—¶æ€§">1. å®æ—¶æ€§</h4><p>RTOSå¯ä»¥ç¡®ä¿ä»»åŠ¡åœ¨ç‰¹å®šæ—¶é—´å†…æ‰§è¡Œï¼Œä¿è¯ç³»ç»Ÿçš„å®æ—¶æ€§ã€‚</p><h4 id="2-å¤šä»»åŠ¡ç®¡ç†">2. å¤šä»»åŠ¡ç®¡ç†</h4><p>RTOSèƒ½å¤Ÿæœ‰æ•ˆåœ°ç®¡ç†å¤šä¸ªä»»åŠ¡ï¼Œåˆ†é…CPUæ—¶é—´ç‰‡ï¼Œæé«˜ç³»ç»Ÿçš„åˆ©ç”¨ç‡ã€‚</p><h4 id="3-ä¸­æ–­å¤„ç†">3. ä¸­æ–­å¤„ç†</h4><p>RTOSæä¾›äº†å¯é çš„ä¸­æ–­å¤„ç†æœºåˆ¶ï¼Œä¿è¯åœ¨å‘ç”Ÿç´§æ€¥äº‹ä»¶æ—¶èƒ½å¤Ÿè¿…é€Ÿå“åº”ã€‚</p><h3 id="RTOSåœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„åº”ç”¨">RTOSåœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„åº”ç”¨</h3><h4 id="1-åµŒå…¥å¼æ§åˆ¶ç³»ç»Ÿ">1. åµŒå…¥å¼æ§åˆ¶ç³»ç»Ÿ</h4><p>RTOSå¸¸ç”¨äºæ§åˆ¶ç³»ç»Ÿä¸­ï¼Œä¿è¯ç³»ç»Ÿèƒ½å¤ŸæŒ‰æ—¶å“åº”å¤–éƒ¨ä¼ æ„Ÿå™¨ã€æ‰§è¡Œæ§åˆ¶ç®—æ³•ç­‰ã€‚</p><h4 id="2-é€šä¿¡ç³»ç»Ÿ">2. é€šä¿¡ç³»ç»Ÿ</h4><p>åœ¨é€šä¿¡ç³»ç»Ÿä¸­ï¼ŒRTOSå¯ä»¥ç¡®ä¿æ•°æ®çš„åŠæ—¶ä¼ è¾“å’Œå¤„ç†ã€‚</p><h4 id="3-å®æ—¶ç›‘æ§ç³»ç»Ÿ">3. å®æ—¶ç›‘æ§ç³»ç»Ÿ</h4><p>RTOSåœ¨å®æ—¶ç›‘æ§ç³»ç»Ÿä¸­å‘æŒ¥ç€é‡è¦ä½œç”¨ï¼Œä¿è¯ç›‘æ§æ•°æ®çš„å®æ—¶æ€§ã€‚</p><h3 id="ç¤ºä¾‹ï¼šFreeRTOSçš„ç®€å•åº”ç”¨">ç¤ºä¾‹ï¼šFreeRTOSçš„ç®€å•åº”ç”¨</h3><p>FreeRTOSæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å¼€æºRTOSï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨FreeRTOSä¸­åˆ›å»ºä»»åŠ¡ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">Task1</span><span class="hljs-params">(<span class="hljs-type">void</span> *pvParameters)</span> &#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-comment">// ä»»åŠ¡1çš„ä»£ç </span><br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">Task2</span><span class="hljs-params">(<span class="hljs-type">void</span> *pvParameters)</span> &#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-comment">// ä»»åŠ¡2çš„ä»£ç </span><br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    xTaskCreate(Task1, <span class="hljs-string">&quot;Task1&quot;</span>, <span class="hljs-number">100</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">1</span>, <span class="hljs-literal">NULL</span>);<br>    xTaskCreate(Task2, <span class="hljs-string">&quot;Task2&quot;</span>, <span class="hljs-number">100</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">2</span>, <span class="hljs-literal">NULL</span>);<br>    vTaskStartScheduler();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º">ç»“è®º</h3><p>å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰æ˜¯åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒæä¾›äº†ä»»åŠ¡è°ƒåº¦ã€ä¸­æ–­å¤„ç†ç­‰åŠŸèƒ½ï¼Œä¿è¯äº†ç³»ç»Ÿçš„å®æ—¶æ€§å’Œç¨³å®šæ€§ã€‚é€šè¿‡åˆç†åº”ç”¨RTOSï¼Œå¯ä»¥æé«˜åµŒå…¥å¼ç³»ç»Ÿçš„æ€§èƒ½å’Œå¯é æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šä¼˜åŒ–åµŒå…¥å¼ç³»ç»Ÿçš„ç”µæºç®¡ç†ç­–ç•¥</title>
      <link href="/2023/09/18/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E4%BC%98%E5%8C%96%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/"/>
      <url>/2023/09/18/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E4%BC%98%E5%8C%96%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šä¼˜åŒ–åµŒå…¥å¼ç³»ç»Ÿçš„ç”µæºç®¡ç†ç­–ç•¥">åµŒå…¥å¼ç¬”è®°ï¼šä¼˜åŒ–åµŒå…¥å¼ç³»ç»Ÿçš„ç”µæºç®¡ç†ç­–ç•¥</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œç”µæºç®¡ç†æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„æ–¹é¢ã€‚æœ‰æ•ˆçš„ç”µæºç®¡ç†ç­–ç•¥å¯ä»¥å»¶é•¿ç”µæ± å¯¿å‘½ã€é™ä½åŠŸè€—ã€æé«˜ç³»ç»Ÿæ•ˆç‡ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»ä¸€äº›ä¼˜åŒ–åµŒå…¥å¼ç³»ç»Ÿç”µæºç®¡ç†çš„åŸºæœ¬åŸåˆ™å’Œç­–ç•¥ï¼Œå¸®åŠ©ä½ åœ¨é¡¹ç›®ä¸­åˆç†åˆ©ç”¨ç”µæºèµ„æºã€‚</p><h3 id="ç”µæºç®¡ç†çš„åŸºæœ¬åŸåˆ™">ç”µæºç®¡ç†çš„åŸºæœ¬åŸåˆ™</h3><h4 id="1-ç¡çœ æ¨¡å¼">1. ç¡çœ æ¨¡å¼</h4><p>å°½å¯èƒ½åœ°å°†ç³»ç»Ÿç½®äºä½åŠŸè€—çš„ç¡çœ æ¨¡å¼ï¼Œä»¥é™ä½ç³»ç»Ÿåœ¨ç©ºé—²æ—¶çš„åŠŸè€—ã€‚</p><h4 id="2-é€æ­¥å”¤é†’">2. é€æ­¥å”¤é†’</h4><p>åªåœ¨å¿…è¦æ—¶å”¤é†’ç›¸å…³çš„ç¡¬ä»¶æ¨¡å—ï¼Œé¿å…å…¨å±€å”¤é†’æ‰€æœ‰æ¨¡å—ï¼Œä»è€Œå‡å°‘åŠŸè€—ã€‚</p><h4 id="3-åŠ¨æ€è°ƒæ•´æ—¶é’Ÿé¢‘ç‡">3. åŠ¨æ€è°ƒæ•´æ—¶é’Ÿé¢‘ç‡</h4><p>æ ¹æ®ç³»ç»Ÿè´Ÿè½½çš„éœ€æ±‚ï¼ŒåŠ¨æ€è°ƒæ•´å¤„ç†å™¨çš„æ—¶é’Ÿé¢‘ç‡ï¼Œä»¥èŠ‚çœåŠŸè€—ã€‚</p><h3 id="ç”µæºç®¡ç†çš„ä¼˜åŒ–ç­–ç•¥">ç”µæºç®¡ç†çš„ä¼˜åŒ–ç­–ç•¥</h3><h4 id="1-åˆ©ç”¨ä½åŠŸè€—æ¨¡å¼">1. åˆ©ç”¨ä½åŠŸè€—æ¨¡å¼</h4><p>è®¸å¤šåµŒå…¥å¼å¤„ç†å™¨éƒ½æä¾›äº†å¤šç§ä½åŠŸè€—æ¨¡å¼ï¼Œå¦‚åœæœºæ¨¡å¼ã€ç¡çœ æ¨¡å¼ç­‰ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ¨¡å¼ã€‚</p><h4 id="2-ä¼˜åŒ–ä¸­æ–­å¤„ç†">2. ä¼˜åŒ–ä¸­æ–­å¤„ç†</h4><p>é¿å…ä¸å¿…è¦çš„ä¸­æ–­è§¦å‘ï¼Œåˆç†ä½¿ç”¨ä¸­æ–­æ§åˆ¶å™¨ï¼Œä»¥é™ä½ç³»ç»Ÿåœ¨ä¸­æ–­å¤„ç†æ—¶çš„åŠŸè€—ã€‚</p><h4 id="3-åˆç†é…ç½®æ—¶é’Ÿå’Œå®šæ—¶å™¨">3. åˆç†é…ç½®æ—¶é’Ÿå’Œå®šæ—¶å™¨</h4><p>åœ¨ä¸éœ€è¦é«˜æ—¶é’Ÿç²¾åº¦çš„æƒ…å†µä¸‹ï¼Œé™ä½æ—¶é’Ÿé¢‘ç‡å’Œå®šæ—¶å™¨çš„è§¦å‘é¢‘ç‡ï¼Œä»¥å‡å°‘åŠŸè€—ã€‚</p><h4 id="4-åŠ¨æ€ç”µå‹è°ƒèŠ‚ï¼ˆDVFSï¼‰">4. åŠ¨æ€ç”µå‹è°ƒèŠ‚ï¼ˆDVFSï¼‰</h4><p>æ ¹æ®å¤„ç†å™¨è´Ÿè½½çš„éœ€æ±‚ï¼ŒåŠ¨æ€è°ƒæ•´ç”µå‹ä»¥é™ä½åŠŸè€—ï¼ŒåŒæ—¶ä¿è¯ç¨³å®šè¿è¡Œã€‚</p><h3 id="ç¤ºä¾‹ï¼šä½åŠŸè€—ç¡çœ æ¨¡å¼çš„å®ç°">ç¤ºä¾‹ï¼šä½åŠŸè€—ç¡çœ æ¨¡å¼çš„å®ç°</h3><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥æ¼”ç¤ºå¦‚ä½•åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­å®ç°ä½åŠŸè€—ç¡çœ æ¨¡å¼ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// è¿›å…¥ç¡çœ æ¨¡å¼</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">enter_sleep_mode</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// ç¦ç”¨ä¸å¿…è¦çš„æ¨¡å—å’Œå¤–è®¾</span><br>    <span class="hljs-built_in">disable_unnecessary_modules</span>();<br>    <br>    <span class="hljs-comment">// é…ç½®ç¡çœ æ¨¡å¼</span><br>    <span class="hljs-built_in">set_sleep_mode</span>(SLEEP_MODE_PWR_DOWN);<br>    <br>    <span class="hljs-comment">// è¿›å…¥ç¡çœ æ¨¡å¼</span><br>    <span class="hljs-built_in">sleep_enable</span>();<br>    <span class="hljs-built_in">sleep_cpu</span>();<br>    <br>    <span class="hljs-comment">// é€€å‡ºç¡çœ æ¨¡å¼åçš„å¤„ç†</span><br>    <span class="hljs-built_in">sleep_disable</span>();<br>    <span class="hljs-built_in">enable_necessary_modules</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º">ç»“è®º</h3><p>ç”µæºç®¡ç†æ˜¯åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­çš„ä¸€ä¸ªè‡³å…³é‡è¦çš„æ–¹é¢ï¼Œåˆç†çš„ç”µæºç®¡ç†ç­–ç•¥å¯ä»¥æ˜¾è‘—å½±å“ç³»ç»Ÿçš„æ€§èƒ½å’ŒåŠŸè€—è¡¨ç°ã€‚é€šè¿‡åˆ©ç”¨ä½åŠŸè€—æ¨¡å¼ã€åŠ¨æ€è°ƒæ•´æ—¶é’Ÿé¢‘ç‡ç­‰ä¼˜åŒ–ç­–ç•¥ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­å®ç°é«˜æ•ˆçš„ç”µæºç®¡ç†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šç†è§£å¹¶ä¼˜åŒ–åµŒå…¥å¼ç³»ç»Ÿçš„å†…å­˜ç®¡ç†</title>
      <link href="/2023/09/18/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%90%86%E8%A7%A3%E5%B9%B6%E4%BC%98%E5%8C%96%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"/>
      <url>/2023/09/18/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%90%86%E8%A7%A3%E5%B9%B6%E4%BC%98%E5%8C%96%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šç†è§£å¹¶ä¼˜åŒ–åµŒå…¥å¼ç³»ç»Ÿçš„å†…å­˜ç®¡ç†">åµŒå…¥å¼ç¬”è®°ï¼šç†è§£å¹¶ä¼˜åŒ–åµŒå…¥å¼ç³»ç»Ÿçš„å†…å­˜ç®¡ç†</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­ï¼Œå†…å­˜æ˜¯ä¸€ä¸ªå…³é”®çš„èµ„æºã€‚æœ‰æ•ˆåœ°ç®¡ç†å†…å­˜å¯ä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€ç¨³å®šæ€§å’ŒåŠŸè€—æ•ˆç‡ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»ä¸€äº›å†…å­˜ç®¡ç†çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶æä¾›ä¸€äº›ä¼˜åŒ–ç­–ç•¥ï¼Œå¸®åŠ©ä½ åœ¨åµŒå…¥å¼é¡¹ç›®ä¸­åˆç†åˆ©ç”¨å†…å­˜èµ„æºã€‚</p><h3 id="å†…å­˜ç®¡ç†çš„åŸºæœ¬æ¦‚å¿µ">å†…å­˜ç®¡ç†çš„åŸºæœ¬æ¦‚å¿µ</h3><h4 id="1-å †ä¸æ ˆ">1. å †ä¸æ ˆ</h4><ul><li><strong>å †ï¼ˆHeapï¼‰</strong>ï¼šç”¨äºåŠ¨æ€åˆ†é…å†…å­˜ï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾ã€‚åœ¨å †ä¸Šåˆ†é…çš„å†…å­˜é€šå¸¸ç”¨äºå­˜å‚¨å˜é‡ã€æ•°æ®ç»“æ„ç­‰åŠ¨æ€å¤§å°çš„æ•°æ®ã€‚</li><li><strong>æ ˆï¼ˆStackï¼‰</strong>ï¼šç”¨äºè‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾å†…å­˜ï¼Œå­˜å‚¨å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ç­‰ã€‚ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†ã€‚</li></ul><h4 id="2-å†…å­˜ç¢ç‰‡">2. å†…å­˜ç¢ç‰‡</h4><p>å†…å­˜ç¢ç‰‡æ˜¯æŒ‡å·²åˆ†é…ä½†æœªè¢«ä½¿ç”¨çš„å†…å­˜å—ï¼Œå®ƒä»¬é™ä½äº†å¯ç”¨å†…å­˜çš„æ•ˆç‡ã€‚</p><h3 id="å†…å­˜ç®¡ç†çš„ä¼˜åŒ–ç­–ç•¥">å†…å­˜ç®¡ç†çš„ä¼˜åŒ–ç­–ç•¥</h3><h4 id="1-é™æ€åˆ†é…-vs-åŠ¨æ€åˆ†é…">1. é™æ€åˆ†é… vs. åŠ¨æ€åˆ†é…</h4><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œå°½é‡å‡å°‘åŠ¨æ€å†…å­˜åˆ†é…ï¼Œå¯ä»¥æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><h4 id="2-ä½¿ç”¨å†…å­˜æ± ">2. ä½¿ç”¨å†…å­˜æ± </h4><p>å†…å­˜æ± æ˜¯ä¸€ç§å°†å¤§å—å†…å­˜é¢„å…ˆåˆ†é…å¹¶åˆ’åˆ†ä¸ºå¤šä¸ªå°å—çš„æŠ€æœ¯ï¼Œå¯ä»¥å‡å°‘åŠ¨æ€å†…å­˜åˆ†é…çš„å¼€é”€ï¼ŒåŒæ—¶é™ä½å†…å­˜ç¢ç‰‡çš„äº§ç”Ÿã€‚</p><h4 id="3-é¿å…å†…å­˜æ³„æ¼">3. é¿å…å†…å­˜æ³„æ¼</h4><p>ç¡®ä¿åœ¨åŠ¨æ€åˆ†é…å†…å­˜åï¼ŒåŠæ—¶é‡Šæ”¾ä¸å†éœ€è¦çš„å†…å­˜ï¼Œä»¥é¿å…å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p><h4 id="4-ä½¿ç”¨æ ˆä¸Šå¯¹è±¡">4. ä½¿ç”¨æ ˆä¸Šå¯¹è±¡</h4><p>ä¼˜å…ˆä½¿ç”¨æ ˆåˆ†é…å¯¹è±¡ï¼Œå°¤å…¶æ˜¯å¯¹äºç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­çš„å¯¹è±¡ï¼Œé¿å…é¢‘ç¹çš„åŠ¨æ€å†…å­˜åˆ†é…å’Œé‡Šæ”¾ã€‚</p><h4 id="5-é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„">5. é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„</h4><p>é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„å¯ä»¥å‡å°‘å†…å­˜çš„å ç”¨ï¼Œä¾‹å¦‚ä½¿ç”¨ä½åŸŸã€å‹ç¼©æ•°æ®ç­‰æŠ€æœ¯ã€‚</p><h3 id="ç¤ºä¾‹ï¼šå†…å­˜æ± çš„å®ç°">ç¤ºä¾‹ï¼šå†…å­˜æ± çš„å®ç°</h3><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„å†…å­˜æ± ç¤ºä¾‹æ¥æ¼”ç¤ºå¦‚ä½•ä¼˜åŒ–å†…å­˜ç®¡ç†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryPool</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    std::vector&lt;<span class="hljs-type">char</span>*&gt; blocks;<br>    <span class="hljs-type">size_t</span> blockSize;<br>    <span class="hljs-type">size_t</span> capacity;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">MemoryPool</span>(<span class="hljs-type">size_t</span> blockSize, <span class="hljs-type">size_t</span> capacity) : <span class="hljs-built_in">blockSize</span>(blockSize), <span class="hljs-built_in">capacity</span>(capacity) &#123;<br>        <span class="hljs-comment">// é¢„å…ˆåˆ†é…å†…å­˜å—</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; capacity; ++i) &#123;<br>            blocks.<span class="hljs-built_in">push_back</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[blockSize]);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span>* <span class="hljs-title">allocate</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (blocks.<span class="hljs-built_in">empty</span>()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>; <span class="hljs-comment">// å†…å­˜æ± å·²ç”¨å°½</span><br>        &#125;<br><br>        <span class="hljs-type">char</span>* block = blocks.<span class="hljs-built_in">back</span>();<br>        blocks.<span class="hljs-built_in">pop_back</span>();<br>        <span class="hljs-keyword">return</span> block;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deallocate</span><span class="hljs-params">(<span class="hljs-type">void</span>* ptr)</span> </span>&#123;<br>        blocks.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">char</span>*&gt;(ptr));<br>    &#125;<br><br>    ~<span class="hljs-built_in">MemoryPool</span>() &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span>* block : blocks) &#123;<br>            <span class="hljs-keyword">delete</span>[] block;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="ç»“è®º">ç»“è®º</h3><p>å†…å­˜ç®¡ç†æ˜¯åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ä¸­çš„å…³é”®ç¯èŠ‚ã€‚é€šè¿‡åˆç†åˆ©ç”¨é™æ€åˆ†é…ã€å†…å­˜æ± ç­‰ä¼˜åŒ–ç­–ç•¥ï¼Œå¯ä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚åŒæ—¶ï¼ŒåŠæ—¶é‡Šæ”¾ä¸å†éœ€è¦çš„å†…å­˜æ˜¯é¿å…å†…å­˜æ³„æ¼çš„é‡è¦æ‰‹æ®µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šäº†è§£åµŒå…¥å¼ç³»ç»Ÿä¸­çš„é€šä¿¡åè®®ï¼šUARTä¸SPI</title>
      <link href="/2023/09/18/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E4%BA%86%E8%A7%A3%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%EF%BC%9AUART%E4%B8%8ESPI/"/>
      <url>/2023/09/18/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B0%EF%BC%9A%E4%BA%86%E8%A7%A3%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%EF%BC%9AUART%E4%B8%8ESPI/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šäº†è§£åµŒå…¥å¼ç³»ç»Ÿä¸­çš„é€šä¿¡åè®®ï¼šUARTä¸SPI">åµŒå…¥å¼ç¬”è®°ï¼šäº†è§£åµŒå…¥å¼ç³»ç»Ÿä¸­çš„é€šä¿¡åè®®ï¼šUARTä¸SPI</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œé€šä¿¡åè®®æ˜¯å®ç°è®¾å¤‡é—´æ•°æ®ä¼ è¾“çš„åŸºç¡€ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»ä¸¤ç§å¸¸ç”¨çš„åµŒå…¥å¼é€šä¿¡åè®®ï¼šUARTï¼ˆé€šç”¨å¼‚æ­¥æ”¶å‘ä¼ è¾“ï¼‰å’ŒSPIï¼ˆä¸²è¡Œå¤–è®¾æ¥å£ï¼‰ã€‚æˆ‘ä»¬å°†æ·±å…¥äº†è§£å®ƒä»¬çš„å·¥ä½œåŸç†ã€ä¼˜ç¼ºç‚¹ä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯ã€‚</p><h3 id="UART-é€šç”¨å¼‚æ­¥æ”¶å‘ä¼ è¾“">UART: é€šç”¨å¼‚æ­¥æ”¶å‘ä¼ è¾“</h3><h4 id="å·¥ä½œåŸç†">å·¥ä½œåŸç†</h4><p>UARTæ˜¯ä¸€ç§å¼‚æ­¥çš„ä¸²è¡Œé€šä¿¡åè®®ï¼Œä½¿ç”¨ä¸¤æ ¹çº¿è¿›è¡Œæ•°æ®ä¼ è¾“ï¼šä¸€æ ¹ç”¨äºå‘é€æ•°æ®ï¼ˆTXï¼‰ï¼Œå¦ä¸€æ ¹ç”¨äºæ¥æ”¶æ•°æ®ï¼ˆRXï¼‰ã€‚é€šä¿¡åŒæ–¹é€šè¿‡å…±äº«ç›¸åŒçš„æ³¢ç‰¹ç‡ï¼ˆBaud Rateï¼‰æ¥ä¿è¯æ•°æ®çš„æ­£ç¡®ä¼ è¾“ã€‚</p><h4 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h4><ul><li>ç®€å•ã€æ˜“äºå®ç°</li><li>é€‚ç”¨äºè¿‘è·ç¦»é€šä¿¡</li></ul><h4 id="ç¼ºç‚¹">ç¼ºç‚¹</h4><ul><li>ä¸é€‚åˆé«˜é€Ÿé•¿è·ç¦»é€šä¿¡</li></ul><h4 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h4><ul><li>ä¸ä¼ æ„Ÿå™¨ã€æ— çº¿æ¨¡å—ç­‰ç®€å•è®¾å¤‡é€šä¿¡</li><li>è°ƒè¯•å’Œæ§åˆ¶å°è¾“å‡º</li></ul><h3 id="SPI-ä¸²è¡Œå¤–è®¾æ¥å£">SPI: ä¸²è¡Œå¤–è®¾æ¥å£</h3><h4 id="å·¥ä½œåŸç†-2">å·¥ä½œåŸç†</h4><p>SPIæ˜¯ä¸€ç§å…¨åŒå·¥çš„ä¸²è¡Œé€šä¿¡åè®®ï¼Œé€šå¸¸ç”±ä¸€ä¸ªä¸»è®¾å¤‡å’Œä¸€ä¸ªæˆ–å¤šä¸ªä»è®¾å¤‡ç»„æˆã€‚å®ƒä½¿ç”¨å››æ ¹çº¿è¿›è¡Œé€šä¿¡ï¼šæ—¶é’Ÿçº¿ï¼ˆSCLKï¼‰ã€ä¸»è®¾å¤‡è¾“å‡ºä»è®¾å¤‡è¾“å…¥çº¿ï¼ˆMOSIï¼‰ã€ä¸»è®¾å¤‡è¾“å…¥ä»è®¾å¤‡è¾“å‡ºçº¿ï¼ˆMISOï¼‰å’Œç‰‡é€‰çº¿ï¼ˆCSï¼‰ã€‚</p><h4 id="ä¼˜ç‚¹-2">ä¼˜ç‚¹</h4><ul><li>é«˜é€Ÿã€é€‚åˆé•¿è·ç¦»é€šä¿¡</li><li>æ”¯æŒå¤šä»è®¾å¤‡</li></ul><h4 id="ç¼ºç‚¹-2">ç¼ºç‚¹</h4><ul><li>ä½¿ç”¨çš„å¼•è„šè¾ƒå¤š</li><li>å¤æ‚åº¦ç›¸å¯¹è¾ƒé«˜</li></ul><h4 id="åº”ç”¨åœºæ™¯-2">åº”ç”¨åœºæ™¯</h4><ul><li>å­˜å‚¨å™¨ã€æ˜¾ç¤ºå±ã€ä¼ æ„Ÿå™¨ç­‰å¤–è®¾çš„é«˜é€Ÿé€šä¿¡</li><li>æ•°å­—ä¿¡å·å¤„ç†å™¨ä¸å¤–è®¾ä¹‹é—´çš„æ•°æ®ä¼ è¾“</li></ul><h3 id="UARTä¸SPIçš„é€‰æ‹©">UARTä¸SPIçš„é€‰æ‹©</h3><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé€‰æ‹©ä½¿ç”¨UARTè¿˜æ˜¯SPIå–å†³äºå…·ä½“çš„éœ€æ±‚å’Œåº”ç”¨åœºæ™¯ã€‚å¦‚æœéœ€è¦ç®€å•ã€çŸ­è·ç¦»çš„é€šä¿¡ï¼ŒUARTå¯èƒ½æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ã€‚è€Œå¯¹äºé«˜é€Ÿã€é•¿è·ç¦»é€šä¿¡æˆ–éœ€è¦è¿æ¥å¤šä¸ªå¤–è®¾çš„æƒ…å†µï¼ŒSPIå¯èƒ½ä¼šæ›´é€‚ç”¨ã€‚</p><h3 id="ç»“è®º">ç»“è®º</h3><p>äº†è§£å’Œç†Ÿç»ƒä½¿ç”¨é€šä¿¡åè®®æ˜¯åµŒå…¥å¼è½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆçš„åŸºæœ¬æŠ€èƒ½ä¹‹ä¸€ã€‚UARTå’ŒSPIæ˜¯å¸¸ç”¨çš„ä¸¤ç§é€šä¿¡åè®®ï¼Œæ¯ç§éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿å’Œé€‚ç”¨åœºæ™¯ã€‚æ­£ç¡®é€‰æ‹©å’Œå®ç°åˆé€‚çš„é€šä¿¡åè®®å°†åœ¨é¡¹ç›®çš„æ€§èƒ½å’Œç¨³å®šæ€§æ–¹é¢èµ·åˆ°è‡³å…³é‡è¦çš„ä½œç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åµŒå…¥å¼ç¬”è®°ï¼šç†è§£å¹¶å®ç°å¼‚æ­¥é€šä¿¡åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„åº”ç”¨</title>
      <link href="/2023/09/18/%E7%90%86%E8%A7%A3%E5%B9%B6%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E9%80%9A%E4%BF%A1%E5%9C%A8%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/"/>
      <url>/2023/09/18/%E7%90%86%E8%A7%A3%E5%B9%B6%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E9%80%9A%E4%BF%A1%E5%9C%A8%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼ç¬”è®°ï¼šç†è§£å¹¶å®ç°å¼‚æ­¥é€šä¿¡åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„åº”ç”¨">åµŒå…¥å¼ç¬”è®°ï¼šç†è§£å¹¶å®ç°å¼‚æ­¥é€šä¿¡åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„åº”ç”¨</h2><h3 id="å¼•è¨€">å¼•è¨€</h3><p>åœ¨åµŒå…¥å¼é€šä¿¡ç³»ç»Ÿä¸­ï¼Œå¼‚æ­¥é€šä¿¡æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„æ¦‚å¿µã€‚å®ƒå¯ä»¥æé«˜ç³»ç»Ÿçš„æ•ˆç‡å’Œå“åº”é€Ÿåº¦ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¹¶å‘ä»»åŠ¡æ—¶ã€‚æœ¬ç¯‡åšå®¢å°†ä»‹ç»å¼‚æ­¥é€šä¿¡çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶æä¾›ä¸€ä¸ªç®€å•çš„C++ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­å®ç°å¼‚æ­¥é€šä¿¡ã€‚</p><h3 id="å¼‚æ­¥é€šä¿¡çš„åŸºæœ¬æ¦‚å¿µ">å¼‚æ­¥é€šä¿¡çš„åŸºæœ¬æ¦‚å¿µ</h3><p>åœ¨å¼‚æ­¥é€šä¿¡ä¸­ï¼Œä¸€ä¸ªä»»åŠ¡å¯ä»¥åœ¨å¦ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œçš„åŒæ—¶è¿›è¡Œã€‚è¿™æ„å‘³ç€ä»»åŠ¡å¯ä»¥å¹¶è¡Œè¿è¡Œï¼Œè€Œæ— éœ€ç­‰å¾…å‰ä¸€ä¸ªä»»åŠ¡å®Œæˆã€‚è¿™åœ¨å¤„ç†I/Oå¯†é›†å‹ä»»åŠ¡æˆ–éœ€è¦ç­‰å¾…å¤–éƒ¨äº‹ä»¶çš„æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚</p><h3 id="å®ç°å¼‚æ­¥é€šä¿¡çš„åŸºæœ¬æ­¥éª¤">å®ç°å¼‚æ­¥é€šä¿¡çš„åŸºæœ¬æ­¥éª¤</h3><h4 id="1-ä½¿ç”¨å¤šçº¿ç¨‹æˆ–äº‹ä»¶é©±åŠ¨æ¨¡å‹">1. ä½¿ç”¨å¤šçº¿ç¨‹æˆ–äº‹ä»¶é©±åŠ¨æ¨¡å‹</h4><p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨å¤šçº¿ç¨‹æˆ–äº‹ä»¶é©±åŠ¨æ¨¡å‹æ¥å®ç°å¼‚æ­¥é€šä¿¡ã€‚å¤šçº¿ç¨‹å…è®¸åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œè€Œäº‹ä»¶é©±åŠ¨æ¨¡å‹åˆ™é€šè¿‡äº‹ä»¶å’Œå›è°ƒå‡½æ•°æ¥å®ç°å¼‚æ­¥æ“ä½œã€‚</p><h4 id="2-è®¾è®¡åˆé€‚çš„æ•°æ®ç»“æ„">2. è®¾è®¡åˆé€‚çš„æ•°æ®ç»“æ„</h4><p>åœ¨å¼‚æ­¥é€šä¿¡ä¸­ï¼Œä½ éœ€è¦è€ƒè™‘å¦‚ä½•ç»„ç»‡å’Œç®¡ç†ä»»åŠ¡çš„çŠ¶æ€å’Œæ•°æ®ã€‚åˆé€‚çš„æ•°æ®ç»“æ„å¯ä»¥æœ‰æ•ˆåœ°æ”¯æŒå¼‚æ­¥æ“ä½œã€‚</p><h4 id="3-ä½¿ç”¨ä¿¡å·é‡æˆ–äº’æ–¥ä½“ä¿æŠ¤å…±äº«èµ„æº">3. ä½¿ç”¨ä¿¡å·é‡æˆ–äº’æ–¥ä½“ä¿æŠ¤å…±äº«èµ„æº</h4><p>å½“å¤šä¸ªä»»åŠ¡åŒæ—¶è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œä½ éœ€è¦ä½¿ç”¨ä¿¡å·é‡æˆ–äº’æ–¥ä½“ç­‰åŒæ­¥æœºåˆ¶æ¥ä¿æŠ¤è¿™äº›èµ„æºï¼Œä»¥é¿å…ç«æ€æ¡ä»¶å’Œæ•°æ®æŸåã€‚</p><h3 id="ç¤ºä¾‹ï¼šä½¿ç”¨C-å®ç°å¼‚æ­¥é€šä¿¡">ç¤ºä¾‹ï¼šä½¿ç”¨C++å®ç°å¼‚æ­¥é€šä¿¡</h3><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥æ¼”ç¤ºå¦‚ä½•åœ¨C++ä¸­å®ç°å¼‚æ­¥é€šä¿¡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">async_task</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span> </span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Async task &quot;</span> &lt;&lt; id &lt;&lt; <span class="hljs-string">&quot; started.&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡çš„å·¥ä½œ</span><br>    std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">2</span>));<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Async task &quot;</span> &lt;&lt; id &lt;&lt; <span class="hljs-string">&quot; finished.&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::thread <span class="hljs-title">task1</span><span class="hljs-params">(async_task, <span class="hljs-number">1</span>)</span></span>;<br>    <span class="hljs-function">std::thread <span class="hljs-title">task2</span><span class="hljs-params">(async_task, <span class="hljs-number">2</span>)</span></span>;<br><br>    task<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();<br>    task<span class="hljs-number">2.</span><span class="hljs-built_in">join</span>();<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;All tasks completed.&quot;</span> &lt;&lt; std::endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡(<code>async_task</code>)ï¼Œå®ƒä»¬åˆ†åˆ«ä¼šç­‰å¾…2ç§’é’Ÿç„¶åå®Œæˆã€‚åœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œè¿™ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚</p><h3 id="ç»“è®º">ç»“è®º</h3><p>å¼‚æ­¥é€šä¿¡æ˜¯åµŒå…¥å¼é€šä¿¡ç³»ç»Ÿä¸­ä¸€ä¸ªè‡³å…³é‡è¦çš„æ¦‚å¿µï¼Œå®ƒå¯ä»¥æé«˜ç³»ç»Ÿçš„æ•ˆç‡å’Œå“åº”é€Ÿåº¦ã€‚é€šè¿‡ä½¿ç”¨å¤šçº¿ç¨‹æˆ–äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå¹¶åˆç†è®¾è®¡æ•°æ®ç»“æ„ï¼Œä½ å¯ä»¥æœ‰æ•ˆåœ°å®ç°å¼‚æ­¥é€šä¿¡ã€‚åœ¨C++ä¸­ï¼Œé€šè¿‡çº¿ç¨‹å¯ä»¥æ–¹ä¾¿åœ°å®ç°å¼‚æ­¥æ“ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++é€šç”¨å·¥å…·ç±»ï¼šå¼‚å¸¸å¤„ç†</title>
      <link href="/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/"/>
      <url>/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-é€šç”¨å·¥å…·ç±»ï¼šå¼‚å¸¸å¤„ç†"><strong>æ ‡é¢˜ï¼šC++é€šç”¨å·¥å…·ç±»ï¼šå¼‚å¸¸å¤„ç†</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å¼‚å¸¸å¤„ç†æ˜¯ä¿è¯ç¨‹åºç¨³å®šæ€§çš„é‡è¦ä¸€ç¯ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™é€šç”¨çš„å·¥å…·ç±»æ¥ç®€åŒ–å¼‚å¸¸å¤„ç†è¿‡ç¨‹ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å®ç°ä¸€ä¸ªé€šç”¨çš„å¼‚å¸¸å¤„ç†å‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;exception&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionUtil</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">handleException</span><span class="hljs-params">(<span class="hljs-type">const</span> std::exception&amp; e)</span> </span>&#123;<br>        std::cerr &lt;&lt; <span class="hljs-string">&quot;Exception caught: &quot;</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;Something went wrong.&quot;</span>);<br>    &#125; <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) &#123;<br>        ExceptionUtil::<span class="hljs-built_in">handleException</span>(e);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å®ç°ä¸€ä¸ªé€šç”¨çš„å¼‚å¸¸æŠ›å‡ºå‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionUtil</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">throwException</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;Custom exception message.&quot;</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>4. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        ExceptionUtil::<span class="hljs-built_in">throwException</span>();<br>    &#125; <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) &#123;<br>        ExceptionUtil::<span class="hljs-built_in">handleException</span>(e);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é€šç”¨å·¥å…·ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–è®¸å¤šå¸¸è§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å¼‚å¸¸å¤„ç†ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è¿™æ ·çš„å·¥å…·ç±»æ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++é€šç”¨å·¥å…·ç±» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å¼‚å¸¸å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++é€šç”¨å·¥å…·ç±»ï¼šå®¹å™¨æ“ä½œ</title>
      <link href="/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E5%AE%B9%E5%99%A8%E6%93%8D%E4%BD%9C/"/>
      <url>/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E5%AE%B9%E5%99%A8%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-é€šç”¨å·¥å…·ç±»ï¼šå®¹å™¨æ“ä½œ"><strong>æ ‡é¢˜ï¼šC++é€šç”¨å·¥å…·ç±»ï¼šå®¹å™¨æ“ä½œ</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å®¹å™¨æ“ä½œæ˜¯è®¸å¤šåº”ç”¨ç¨‹åºä¸­å¸¸è§çš„ä»»åŠ¡ä¹‹ä¸€ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™é€šç”¨çš„å·¥å…·ç±»æ¥ç®€åŒ–å®¹å™¨çš„æ“ä½œã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å®ç°ä¸€ä¸ªé€šç”¨çš„æ‰“å°å®¹å™¨å…ƒç´ å‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Container&gt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printContainer</span><span class="hljs-params">(<span class="hljs-type">const</span> Container&amp; container)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; element : container) &#123;<br>        std::cout &lt;&lt; element &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    std::cout &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>    std::list&lt;std::string&gt; lst = &#123;<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;cherry&quot;</span>&#125;;<br>    std::map&lt;<span class="hljs-type">int</span>, std::string&gt; mp = &#123;&#123;<span class="hljs-number">1</span>, <span class="hljs-string">&quot;one&quot;</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-string">&quot;two&quot;</span>&#125;, &#123;<span class="hljs-number">3</span>, <span class="hljs-string">&quot;three&quot;</span>&#125;&#125;;<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Vector: &quot;</span>;<br>    <span class="hljs-built_in">printContainer</span>(vec);<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;List: &quot;</span>;<br>    <span class="hljs-built_in">printContainer</span>(lst);<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Map: &quot;</span>;<br>    <span class="hljs-built_in">printContainer</span>(mp);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å®ç°ä¸€ä¸ªé€šç”¨çš„æŸ¥æ‰¾å…ƒç´ å‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Container, <span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">contains</span><span class="hljs-params">(<span class="hljs-type">const</span> Container&amp; container, <span class="hljs-type">const</span> T&amp; element)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">find</span>(container.<span class="hljs-built_in">begin</span>(), container.<span class="hljs-built_in">end</span>(), element) != container.<span class="hljs-built_in">end</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>    <span class="hljs-type">int</span> target1 = <span class="hljs-number">3</span>;<br>    <span class="hljs-type">int</span> target2 = <span class="hljs-number">6</span>;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">contains</span>(vec, target1)) &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Vector contains &quot;</span> &lt;&lt; target1 &lt;&lt; std::endl;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Vector does not contain &quot;</span> &lt;&lt; target1 &lt;&lt; std::endl;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">contains</span>(vec, target2)) &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Vector contains &quot;</span> &lt;&lt; target2 &lt;&lt; std::endl;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Vector does not contain &quot;</span> &lt;&lt; target2 &lt;&lt; std::endl;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é€šç”¨å·¥å…·ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–è®¸å¤šå¸¸è§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å®¹å™¨æ“ä½œã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è¿™æ ·çš„å·¥å…·ç±»æ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++é€šç”¨å·¥å…·ç±» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å®¹å™¨æ“ä½œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++é€šç”¨å·¥å…·ç±»ï¼šæ–‡ä»¶æ“ä½œ</title>
      <link href="/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"/>
      <url>/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-é€šç”¨å·¥å…·ç±»ï¼šæ–‡ä»¶æ“ä½œ"><strong>æ ‡é¢˜ï¼šC++é€šç”¨å·¥å…·ç±»ï¼šæ–‡ä»¶æ“ä½œ</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>æ–‡ä»¶æ“ä½œæ˜¯è®¸å¤šåº”ç”¨ç¨‹åºä¸­å¸¸è§çš„ä»»åŠ¡ä¹‹ä¸€ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™é€šç”¨çš„å·¥å…·ç±»æ¥ç®€åŒ–æ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å®ç°ä¸€ä¸ªé€šç”¨çš„æ–‡ä»¶è¯»å–å‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FileUtil</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> std::string <span class="hljs-title">read</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; filepath)</span> </span>&#123;<br>        <span class="hljs-function">std::ifstream <span class="hljs-title">file</span><span class="hljs-params">(filepath)</span></span>;<br>        <span class="hljs-keyword">if</span> (file) &#123;<br>            <span class="hljs-function">std::string <span class="hljs-title">content</span><span class="hljs-params">((std::istreambuf_iterator&lt;<span class="hljs-type">char</span>&gt;(file)), std::istreambuf_iterator&lt;<span class="hljs-type">char</span>&gt;())</span></span>;<br>            <span class="hljs-keyword">return</span> content;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::string filepath = <span class="hljs-string">&quot;example.txt&quot;</span>;<br><br>    std::string content = FileUtil::<span class="hljs-built_in">read</span>(filepath);<br><br>    <span class="hljs-keyword">if</span> (!content.<span class="hljs-built_in">empty</span>()) &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;File content:\n&quot;</span> &lt;&lt; content &lt;&lt; std::endl;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Failed to read file.&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å®ç°ä¸€ä¸ªé€šç”¨çš„æ–‡ä»¶å†™å…¥å‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FileUtil</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">write</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; filepath, <span class="hljs-type">const</span> std::string&amp; content)</span> </span>&#123;<br>        <span class="hljs-function">std::ofstream <span class="hljs-title">file</span><span class="hljs-params">(filepath)</span></span>;<br>        <span class="hljs-keyword">if</span> (file) &#123;<br>            file &lt;&lt; content;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>4. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::string filepath = <span class="hljs-string">&quot;example.txt&quot;</span>;<br>    std::string content = <span class="hljs-string">&quot;This is an example.&quot;</span>;<br><br>    FileUtil::<span class="hljs-built_in">write</span>(filepath, content);<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;File written successfully.&quot;</span> &lt;&lt; std::endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é€šç”¨å·¥å…·ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–è®¸å¤šå¸¸è§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚æ–‡ä»¶æ“ä½œã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è¿™æ ·çš„å·¥å…·ç±»æ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++é€šç”¨å·¥å…·ç±» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> æ–‡ä»¶æ“ä½œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++é€šç”¨å·¥å…·ç±»ï¼šæ—¥æœŸæ—¶é—´å¤„ç†</title>
      <link href="/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/"/>
      <url>/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-é€šç”¨å·¥å…·ç±»ï¼šæ—¥æœŸæ—¶é—´å¤„ç†"><strong>æ ‡é¢˜ï¼šC++é€šç”¨å·¥å…·ç±»ï¼šæ—¥æœŸæ—¶é—´å¤„ç†</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>æ—¥æœŸæ—¶é—´å¤„ç†æ˜¯è®¸å¤šåº”ç”¨ç¨‹åºä¸­å¸¸è§çš„ä»»åŠ¡ä¹‹ä¸€ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™é€šç”¨çš„å·¥å…·ç±»æ¥ç®€åŒ–æ—¥æœŸæ—¶é—´çš„æ“ä½œã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å®ç°ä¸€ä¸ªé€šç”¨çš„æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–å‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DateTimeUtil</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> std::string <span class="hljs-title">format</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; format, <span class="hljs-type">const</span> std::<span class="hljs-type">time_t</span>&amp; time)</span> </span>&#123;<br>        <span class="hljs-type">char</span> buffer[<span class="hljs-number">80</span>];<br>        std::tm* timeinfo = std::<span class="hljs-built_in">localtime</span>(&amp;time);<br>        std::<span class="hljs-built_in">strftime</span>(buffer, <span class="hljs-built_in">sizeof</span>(buffer), format.<span class="hljs-built_in">c_str</span>(), timeinfo);<br>        <span class="hljs-keyword">return</span> buffer;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::<span class="hljs-type">time_t</span> currentTime = std::<span class="hljs-built_in">time</span>(<span class="hljs-number">0</span>);<br>    std::string format = <span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>;<br><br>    std::string formattedTime = DateTimeUtil::format(format, currentTime);<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Current time: &quot;</span> &lt;&lt; formattedTime &lt;&lt; std::endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å®ç°ä¸€ä¸ªé€šç”¨çš„æ—¥æœŸæ—¶é—´è§£æå‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DateTimeUtil</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> std::<span class="hljs-type">time_t</span> <span class="hljs-title">parse</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; datetime, <span class="hljs-type">const</span> std::string&amp; format)</span> </span>&#123;<br>        std::tm timeinfo = &#123;&#125;;<br>        <span class="hljs-function">std::istringstream <span class="hljs-title">stream</span><span class="hljs-params">(datetime)</span></span>;<br>        stream &gt;&gt; std::<span class="hljs-built_in">get_time</span>(&amp;timeinfo, format.<span class="hljs-built_in">c_str</span>());<br>        <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">mktime</span>(&amp;timeinfo);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>4. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::string datetime = <span class="hljs-string">&quot;2023-09-16 15:30:00&quot;</span>;<br>    std::string format = <span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>;<br><br>    std::<span class="hljs-type">time_t</span> parsedTime = DateTimeUtil::<span class="hljs-built_in">parse</span>(datetime, format);<br><br>    <span class="hljs-keyword">if</span> (parsedTime != <span class="hljs-number">-1</span>) &#123;<br>        std::string formattedTime = DateTimeUtil::format(format, parsedTime);<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Parsed time: &quot;</span> &lt;&lt; formattedTime &lt;&lt; std::endl;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Failed to parse datetime.&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é€šç”¨å·¥å…·ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–è®¸å¤šå¸¸è§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚æ—¥æœŸæ—¶é—´å¤„ç†ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è¿™æ ·çš„å·¥å…·ç±»æ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++é€šç”¨å·¥å…·ç±» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> æ—¥æœŸæ—¶é—´å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++é€šç”¨å·¥å…·ç±»ï¼šå­—ç¬¦ä¸²å¤„ç†</title>
      <link href="/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/"/>
      <url>/2023/09/18/C-%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-é€šç”¨å·¥å…·ç±»ï¼šå­—ç¬¦ä¸²å¤„ç†"><strong>æ ‡é¢˜ï¼šC++é€šç”¨å·¥å…·ç±»ï¼šå­—ç¬¦ä¸²å¤„ç†</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å­—ç¬¦ä¸²å¤„ç†æ˜¯è®¸å¤šåº”ç”¨ç¨‹åºä¸­å¸¸è§çš„ä»»åŠ¡ä¹‹ä¸€ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–å†™é€šç”¨çš„å·¥å…·ç±»æ¥ç®€åŒ–è¿™ä¸€è¿‡ç¨‹ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å®ç°ä¸€ä¸ªé€šç”¨çš„å­—ç¬¦ä¸²æ‹†åˆ†å‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StringUtil</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> std::vector&lt;std::string&gt; <span class="hljs-title">split</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; str, <span class="hljs-type">char</span> delimiter)</span> </span>&#123;<br>        std::vector&lt;std::string&gt; tokens;<br>        <span class="hljs-function">std::istringstream <span class="hljs-title">stream</span><span class="hljs-params">(str)</span></span>;<br>        std::string token;<br>        <span class="hljs-keyword">while</span> (std::<span class="hljs-built_in">getline</span>(stream, token, delimiter)) &#123;<br>            tokens.<span class="hljs-built_in">push_back</span>(token);<br>        &#125;<br>        <span class="hljs-keyword">return</span> tokens;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::string input = <span class="hljs-string">&quot;Hello,World,OpenAI&quot;</span>;<br>    <span class="hljs-type">char</span> delimiter = <span class="hljs-string">&#x27;,&#x27;</span>;<br><br>    std::vector&lt;std::string&gt; tokens = StringUtil::<span class="hljs-built_in">split</span>(input, delimiter);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> std::string&amp; token : tokens) &#123;<br>        std::cout &lt;&lt; token &lt;&lt; std::endl;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å®ç°ä¸€ä¸ªé€šç”¨çš„å­—ç¬¦ä¸²æ›¿æ¢å‡½æ•°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StringUtil</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> std::string <span class="hljs-title">replace</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; str, <span class="hljs-type">const</span> std::string&amp; target, <span class="hljs-type">const</span> std::string&amp; replacement)</span> </span>&#123;<br>        std::string result = str;<br>        <span class="hljs-type">size_t</span> position = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> ((position = result.<span class="hljs-built_in">find</span>(target, position)) != std::string::npos) &#123;<br>            result.<span class="hljs-built_in">replace</span>(position, target.<span class="hljs-built_in">length</span>(), replacement);<br>            position += replacement.<span class="hljs-built_in">length</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>4. ä½¿ç”¨ç¤ºä¾‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::string input = <span class="hljs-string">&quot;Hello, World! Hello, OpenAI!&quot;</span>;<br>    std::string target = <span class="hljs-string">&quot;Hello&quot;</span>;<br>    std::string replacement = <span class="hljs-string">&quot;Hi&quot;</span>;<br><br>    std::string result = StringUtil::<span class="hljs-built_in">replace</span>(input, target, replacement);<br><br>    std::cout &lt;&lt; result &lt;&lt; std::endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é€šç”¨å·¥å…·ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–è®¸å¤šå¸¸è§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²å¤„ç†ã€‚åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è¿™æ ·çš„å·¥å…·ç±»æ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++é€šç”¨å·¥å…·ç±» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å­—ç¬¦ä¸²å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šæ¡¥æ¥æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šæ¡¥æ¥æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šæ¡¥æ¥æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. æ¡¥æ¥æ¨¡å¼çš„å®šä¹‰</strong></p><p>æ¡¥æ¥æ¨¡å¼åŒ…æ‹¬ä¸¤ä¸ªç»´åº¦ï¼šAbstractionï¼ˆæŠ½è±¡ï¼‰å’ŒImplementorï¼ˆå®ç°ï¼‰ã€‚æŠ½è±¡åŒ…å«ä¸€ä¸ªæŒ‡å‘å®ç°çš„æŒ‡é’ˆï¼Œå®ƒå®šä¹‰äº†æŠ½è±¡éƒ¨åˆ†çš„æ¥å£ã€‚å®ç°å®šä¹‰äº†å®ç°éƒ¨åˆ†çš„æ¥å£ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Implementor</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">operationImpl</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteImplementorA</span> : <span class="hljs-keyword">public</span> Implementor &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operationImpl</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Concrete Implementor A\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteImplementorB</span> : <span class="hljs-keyword">public</span> Implementor &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operationImpl</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Concrete Implementor B\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Abstraction</span> &#123;<br><span class="hljs-keyword">protected</span>:<br>    Implementor* implementor;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Abstraction</span>(Implementor* impl) : <span class="hljs-built_in">implementor</span>(impl) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RefinedAbstraction</span> : <span class="hljs-keyword">public</span> Abstraction &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">using</span> Abstraction::Abstraction;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        implementor-&gt;<span class="hljs-built_in">operationImpl</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>3. æ¡¥æ¥æ¨¡å¼çš„åº”ç”¨</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ConcreteImplementorA implA;<br>    ConcreteImplementorB implB;<br><br>    <span class="hljs-function">RefinedAbstraction <span class="hljs-title">abstractionA</span><span class="hljs-params">(&amp;implA)</span></span>;<br>    <span class="hljs-function">RefinedAbstraction <span class="hljs-title">abstractionB</span><span class="hljs-params">(&amp;implB)</span></span>;<br><br>    abstractionA.<span class="hljs-built_in">operation</span>();<br>    abstractionB.<span class="hljs-built_in">operation</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. æ¡¥æ¥æ¨¡å¼çš„åº”ç”¨åœºæ™¯</strong></p><p>æ¡¥æ¥æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å½“ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦æ—¶ï¼Œå¯ä»¥å°†å…¶åˆ†ä¸ºæŠ½è±¡å’Œå®ç°ä¸¤éƒ¨åˆ†ã€‚</li><li>å½“ä¸€ä¸ªç±»éœ€è¦åœ¨è¿è¡Œæ—¶é€‰æ‹©å®ç°æ—¶ï¼Œå¯ä»¥å°†å®ç°ä½œä¸ºå‚æ•°ä¼ é€’ç»™æŠ½è±¡ç±»ã€‚</li></ul><p><strong>ç»“è®ºï¼š</strong></p><p>æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰æŠ½è±¡ç±»å’Œå®ç°ç±»æ¥å®ç°æ¡¥æ¥æ¨¡å¼ã€‚æ¡¥æ¥æ¨¡å¼å¸¸ç”¨äºéœ€è¦å¤„ç†ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–ç»´åº¦çš„åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> æ¡¥æ¥æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šåŸå‹æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šåŸå‹æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šåŸå‹æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>åŸå‹æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åˆ›å»ºæ–°å¯¹è±¡çš„åŒæ—¶åˆä¸éœ€è¦çŸ¥é“å…¶å…·ä½“çš„ç±»ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. åŸå‹æ¨¡å¼çš„å®šä¹‰</strong></p><p>åŸå‹æ¨¡å¼åŒ…æ‹¬ä¸¤ä¸ªè§’è‰²ï¼šPrototypeï¼ˆåŸå‹ï¼‰å’ŒConcretePrototypeï¼ˆå…·ä½“åŸå‹ï¼‰ã€‚åŸå‹æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå…¶ä¸­å®šä¹‰äº†ä¸€ä¸ªå…‹éš†è‡ªèº«çš„æ¥å£ï¼Œå…·ä½“åŸå‹ç»§æ‰¿è‡ªåŸå‹ï¼Œå¹¶å®ç°äº†å…‹éš†æ¥å£ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Prototype</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Prototype* <span class="hljs-title">clone</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcretePrototype</span> : <span class="hljs-keyword">public</span> Prototype &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">Prototype* <span class="hljs-title">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ConcretePrototype</span>(*<span class="hljs-keyword">this</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ConcretePrototype prototype;<br>    ConcretePrototype* clone = <span class="hljs-built_in">dynamic_cast</span>&lt;ConcretePrototype*&gt;(prototype.<span class="hljs-built_in">clone</span>());<br><br>    <span class="hljs-keyword">if</span> (clone) &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Clone created successfully\n&quot;</span>;<br>        <span class="hljs-keyword">delete</span> clone;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Clone failed\n&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. åŸå‹æ¨¡å¼çš„åº”ç”¨</strong></p><p>åŸå‹æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å½“ä¸€ä¸ªç³»ç»Ÿéœ€è¦ç‹¬ç«‹äºå…¶å†…å®¹åˆ›å»ºå¯¹è±¡æ—¶ã€‚</li><li>å½“ä¸€ä¸ªå¯¹è±¡åªçŸ¥é“å…¶æ¥å£ï¼Œä½†éœ€è¦åœ¨è¿è¡Œæ—¶æŒ‡å®šå…¶ç±»æ—¶ã€‚</li></ul><p><strong>4. åŸå‹æ¨¡å¼ä¸å·¥å‚æ¨¡å¼çš„æ¯”è¾ƒ</strong></p><p>åŸå‹æ¨¡å¼ä¸å·¥å‚æ¨¡å¼éƒ½ç”¨äºåˆ›å»ºå¯¹è±¡ï¼Œä½†å®ƒä»¬çš„å…³æ³¨ç‚¹ä¸åŒã€‚å·¥å‚æ¨¡å¼å…³æ³¨äºå¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Œè€ŒåŸå‹æ¨¡å¼å…³æ³¨äºå¦‚ä½•å…‹éš†å¯¹è±¡ã€‚</p><p><strong>ç»“è®ºï¼š</strong></p><p>åŸå‹æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åˆ›å»ºæ–°å¯¹è±¡çš„åŒæ—¶åˆä¸éœ€è¦çŸ¥é“å…¶å…·ä½“çš„ç±»ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰åŸå‹å’Œå…·ä½“åŸå‹ç±»ï¼Œä»¥åŠå®ç°å…‹éš†æ¥å£æ¥å®ç°åŸå‹æ¨¡å¼ã€‚åŸå‹æ¨¡å¼å¸¸ç”¨äºéœ€è¦ç‹¬ç«‹äºå…¶å†…å®¹åˆ›å»ºå¯¹è±¡çš„åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> åŸå‹æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šä¸­ä»‹è€…æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šä¸­ä»‹è€…æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šä¸­ä»‹è€…æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡å°†å¯¹è±¡é—´çš„äº¤äº’è¡Œä¸ºé›†ä¸­åœ¨ä¸­ä»‹è€…å¯¹è±¡ä¸­æ¥å‡å°‘å¯¹è±¡ä¹‹é—´çš„ç›´æ¥ä¾èµ–å…³ç³»ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. ä¸­ä»‹è€…æ¨¡å¼çš„å®šä¹‰</strong></p><p>ä¸­ä»‹è€…æ¨¡å¼åŒ…æ‹¬ä¸¤ä¸ªè§’è‰²ï¼šMediatorï¼ˆä¸­ä»‹è€…ï¼‰å’ŒColleagueï¼ˆåŒäº‹ï¼‰ã€‚ä¸­ä»‹è€…è´Ÿè´£å®šä¹‰ä¸€ä¸ªæ¥å£ç”¨äºä¸å„åŒäº‹å¯¹è±¡é€šä¿¡ï¼Œæ¯ä¸ªåŒäº‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªå¯¹ä¸­ä»‹è€…å¯¹è±¡çš„å¼•ç”¨ã€‚åŒäº‹å¯¹è±¡é€šè¿‡è°ƒç”¨ä¸­ä»‹è€…çš„æ–¹æ³•æ¥ä¸å…¶ä»–åŒäº‹å¯¹è±¡è¿›è¡Œé€šä¿¡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Colleague</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mediator</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">send</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message, Colleague* colleague)</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Colleague</span> &#123;<br><span class="hljs-keyword">protected</span>:<br>    Mediator* mediator;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Colleague</span>(Mediator* m) : <span class="hljs-built_in">mediator</span>(m) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">receive</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteMediator</span> : <span class="hljs-keyword">public</span> Mediator &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">send</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message, Colleague* colleague)</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        colleague-&gt;<span class="hljs-built_in">receive</span>(message);<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteColleagueA</span> : <span class="hljs-keyword">public</span> Colleague &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">using</span> Colleague::Colleague;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">receive</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Colleague A received: &quot;</span> &lt;&lt; message &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">send</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> </span>&#123;<br>        mediator-&gt;<span class="hljs-built_in">send</span>(message, <span class="hljs-keyword">this</span>);<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteColleagueB</span> : <span class="hljs-keyword">public</span> Colleague &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">using</span> Colleague::Colleague;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">receive</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Colleague B received: &quot;</span> &lt;&lt; message &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">send</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> </span>&#123;<br>        mediator-&gt;<span class="hljs-built_in">send</span>(message, <span class="hljs-keyword">this</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>3. å…·ä½“åº”ç”¨</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ConcreteMediator mediator;<br>    <span class="hljs-function">ConcreteColleagueA <span class="hljs-title">colleagueA</span><span class="hljs-params">(&amp;mediator)</span></span>;<br>    <span class="hljs-function">ConcreteColleagueB <span class="hljs-title">colleagueB</span><span class="hljs-params">(&amp;mediator)</span></span>;<br><br>    colleagueA.<span class="hljs-built_in">send</span>(<span class="hljs-string">&quot;Hello from Colleague A&quot;</span>);<br>    colleagueB.<span class="hljs-built_in">send</span>(<span class="hljs-string">&quot;Hi from Colleague B&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. ä¸­ä»‹è€…æ¨¡å¼çš„åº”ç”¨</strong></p><p>ä¸­ä»‹è€…æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å½“å¯¹è±¡é—´çš„äº¤äº’è¡Œä¸ºå˜å¾—å¤æ‚ï¼Œä¸”éœ€è¦å‡å°‘å¯¹è±¡é—´çš„ç›´æ¥ä¾èµ–å…³ç³»æ—¶ã€‚</li><li>å½“ä¸€ç»„å¯¹è±¡ä¹‹é—´å­˜åœ¨ç›¸äº’é€šä¿¡ï¼Œä½†æ˜¯è€¦åˆåº¦è¿‡é«˜æ—¶ã€‚</li></ul><p><strong>ç»“è®ºï¼š</strong></p><p>ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡å°†å¯¹è±¡é—´çš„äº¤äº’è¡Œä¸ºé›†ä¸­åœ¨ä¸­ä»‹è€…å¯¹è±¡ä¸­æ¥å‡å°‘å¯¹è±¡ä¹‹é—´çš„ç›´æ¥ä¾èµ–å…³ç³»ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ä¸­ä»‹è€…å’ŒåŒäº‹çš„æŠ½è±¡ç±»ï¼Œä»¥åŠå…·ä½“çš„ä¸­ä»‹è€…å’ŒåŒäº‹æ¥å®ç°ä¸­ä»‹è€…æ¨¡å¼ã€‚ä¸­ä»‹è€…æ¨¡å¼å¸¸ç”¨äºéœ€è¦å‡å°‘å¯¹è±¡ä¹‹é—´ç›´æ¥ä¾èµ–å…³ç³»çš„åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> ä¸­ä»‹è€…æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šç»„åˆæ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šç»„åˆæ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šç»„åˆæ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>ç»„åˆæ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º&quot;éƒ¨åˆ†-æ•´ä½“&quot;çš„å±‚æ¬¡ç»“æ„ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. ç»„åˆæ¨¡å¼çš„å®šä¹‰</strong></p><p>ç»„åˆæ¨¡å¼åŒ…æ‹¬ä¸‰ä¸ªè§’è‰²ï¼šComponentï¼ˆç»„ä»¶ï¼‰ã€Leafï¼ˆå¶å­èŠ‚ç‚¹ï¼‰å’ŒCompositeï¼ˆå¤åˆèŠ‚ç‚¹ï¼‰ã€‚ç»„ä»¶æ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„æŠ½è±¡ç±»ï¼Œå®ƒå¯ä»¥åŒ…å«å¶å­èŠ‚ç‚¹æˆ–å¤åˆèŠ‚ç‚¹ã€‚å¶å­èŠ‚ç‚¹è¡¨ç¤ºæ ‘çš„æœ€ç»ˆèŠ‚ç‚¹ï¼Œå®ƒä¸èƒ½åŒ…å«å…¶ä»–èŠ‚ç‚¹ã€‚å¤åˆèŠ‚ç‚¹åŒ…å«å…¶ä»–èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯å¶å­èŠ‚ç‚¹æˆ–å…¶ä»–å¤åˆèŠ‚ç‚¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(Component* c)</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">remove</span><span class="hljs-params">(Component* c)</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Component* <span class="hljs-title">getChild</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>; &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Leaf</span> : <span class="hljs-keyword">public</span> Component &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Leaf operation\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Composite</span> : <span class="hljs-keyword">public</span> Component &#123;<br><span class="hljs-keyword">private</span>:<br>    std::vector&lt;Component*&gt; children;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Composite operation\n&quot;</span>;<br>        <span class="hljs-keyword">for</span> (Component* c : children) &#123;<br>            c-&gt;<span class="hljs-built_in">operation</span>();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(Component* c)</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        children.<span class="hljs-built_in">push_back</span>(c);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">remove</span><span class="hljs-params">(Component* c)</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        <span class="hljs-keyword">auto</span> it = std::<span class="hljs-built_in">find</span>(children.<span class="hljs-built_in">begin</span>(), children.<span class="hljs-built_in">end</span>(), c);<br>        <span class="hljs-keyword">if</span> (it != children.<span class="hljs-built_in">end</span>()) &#123;<br>            children.<span class="hljs-built_in">erase</span>(it);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function">Component* <span class="hljs-title">getChild</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span> &amp;&amp; index &lt; children.<span class="hljs-built_in">size</span>()) &#123;<br>            <span class="hljs-keyword">return</span> children[index];<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Leaf leaf1, leaf2, leaf3;<br>    Composite composite1, composite2;<br><br>    composite<span class="hljs-number">1.</span><span class="hljs-built_in">add</span>(&amp;leaf1);<br>    composite<span class="hljs-number">1.</span><span class="hljs-built_in">add</span>(&amp;leaf2);<br><br>    composite<span class="hljs-number">2.</span><span class="hljs-built_in">add</span>(&amp;composite1);<br>    composite<span class="hljs-number">2.</span><span class="hljs-built_in">add</span>(&amp;leaf3);<br><br>    composite<span class="hljs-number">2.</span><span class="hljs-built_in">operation</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. ç»„åˆæ¨¡å¼çš„åº”ç”¨</strong></p><p>ç»„åˆæ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å½“éœ€è¦è¡¨ç¤ºå¯¹è±¡çš„&quot;éƒ¨åˆ†-æ•´ä½“&quot;å±‚æ¬¡ç»“æ„æ—¶ã€‚</li><li>å½“å¸Œæœ›ç”¨æˆ·å¿½ç•¥å¶å­èŠ‚ç‚¹å’Œå¤åˆèŠ‚ç‚¹ä¹‹é—´çš„å·®å¼‚æ—¶ã€‚</li></ul><p><strong>4. ç»„åˆæ¨¡å¼ä¸è®¿é—®è€…æ¨¡å¼çš„ç»“åˆ</strong></p><p>ç»„åˆæ¨¡å¼é€šå¸¸ä¸è®¿é—®è€…æ¨¡å¼ç»“åˆä½¿ç”¨ï¼Œä»¥ä¾¿åœ¨å¯¹å¤æ‚å¯¹è±¡ç»“æ„è¿›è¡Œæ“ä½œæ—¶èƒ½å¤Ÿè½»æ¾åœ°æ‰©å±•åŠŸèƒ½ã€‚</p><p><strong>ç»“è®ºï¼š</strong></p><p>ç»„åˆæ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º&quot;éƒ¨åˆ†-æ•´ä½“&quot;çš„å±‚æ¬¡ç»“æ„ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ç»„ä»¶ã€å¶å­èŠ‚ç‚¹å’Œå¤åˆèŠ‚ç‚¹çš„æŠ½è±¡ç±»ï¼Œä»¥åŠå…·ä½“çš„ç»„ä»¶ã€å¶å­èŠ‚ç‚¹å’Œå¤åˆèŠ‚ç‚¹æ¥å®ç°ç»„åˆæ¨¡å¼ã€‚ç»„åˆæ¨¡å¼å¸¸ç”¨äºéœ€è¦è¡¨ç¤ºå¯¹è±¡çš„å±‚æ¬¡ç»“æ„çš„åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> ç»„åˆæ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šè®¿é—®è€…æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šè®¿é—®è€…æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šè®¿é—®è€…æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>è®¿é—®è€…æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åœ¨ä¸æ”¹å˜å¯¹è±¡ç»“æ„çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºå¯¹è±¡å…ƒç´ çš„æ–°æ“ä½œã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. è®¿é—®è€…æ¨¡å¼çš„å®šä¹‰</strong></p><p>è®¿é—®è€…æ¨¡å¼åŒ…æ‹¬ä¸¤ä¸ªè§’è‰²ï¼šVisitorï¼ˆè®¿é—®è€…ï¼‰å’ŒElementï¼ˆå…ƒç´ ï¼‰ã€‚è®¿é—®è€…å®šä¹‰äº†å¯¹æ¯ä¸ªå…ƒç´ çš„è®¿é—®æ“ä½œï¼Œè€Œå…ƒç´ å®šä¹‰äº†ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç”¨äºæ¥æ”¶è®¿é—®è€…çš„è®¿é—®ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Visitor</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Element</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(Visitor&amp; v)</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteElementA</span> : <span class="hljs-keyword">public</span> Element &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(Visitor&amp; v)</span> <span class="hljs-keyword">override</span></span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteElementB</span> : <span class="hljs-keyword">public</span> Element &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(Visitor&amp; v)</span> <span class="hljs-keyword">override</span></span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Visitor</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">visitConcreteElementA</span><span class="hljs-params">(ConcreteElementA&amp; elementA)</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">visitConcreteElementB</span><span class="hljs-params">(ConcreteElementB&amp; elementB)</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ConcreteElementA::accept</span><span class="hljs-params">(Visitor&amp; v)</span> </span>&#123;<br>    v.<span class="hljs-built_in">visitConcreteElementA</span>(*<span class="hljs-keyword">this</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ConcreteElementB::accept</span><span class="hljs-params">(Visitor&amp; v)</span> </span>&#123;<br>    v.<span class="hljs-built_in">visitConcreteElementB</span>(*<span class="hljs-keyword">this</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. è®¿é—®è€…æ¨¡å¼çš„åº”ç”¨</strong></p><p>è®¿é—®è€…æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå…¶ç±»ä»¥åŠå®ƒæ‰€å¤„çš„ç¯å¢ƒæ—¶ã€‚</li><li>å½“éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡çš„ç»“æ„è¿›è¡Œæ“ä½œï¼Œä¸”ä¸å¸Œæœ›æš´éœ²å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚æ—¶ã€‚</li></ul><p><strong>4. è®¿é—®è€…æ¨¡å¼ä¸ç»„åˆæ¨¡å¼çš„ç»“åˆ</strong></p><p>è®¿é—®è€…æ¨¡å¼é€šå¸¸ä¸ç»„åˆæ¨¡å¼ç»“åˆä½¿ç”¨ï¼Œä»¥ä¾¿åœ¨å¯¹å¤æ‚å¯¹è±¡ç»“æ„è¿›è¡Œæ“ä½œæ—¶èƒ½å¤Ÿè½»æ¾åœ°æ‰©å±•åŠŸèƒ½ã€‚</p><p><strong>ç»“è®ºï¼š</strong></p><p>è®¿é—®è€…æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åœ¨ä¸æ”¹å˜å¯¹è±¡ç»“æ„çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºå¯¹è±¡å…ƒç´ çš„æ–°æ“ä½œã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰è®¿é—®è€…å’Œå…ƒç´ çš„æŠ½è±¡ç±»ï¼Œä»¥åŠå…·ä½“çš„è®¿é—®è€…å’Œå…ƒç´ æ¥å®ç°è®¿é—®è€…æ¨¡å¼ã€‚è®¿é—®è€…æ¨¡å¼å¸¸ç”¨äºéœ€è¦å¯¹å¯¹è±¡ç»“æ„è¿›è¡Œæ“ä½œçš„åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> è®¿é—®è€…æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå‘½ä»¤æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå‘½ä»¤æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå‘½ä»¤æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å¾—å¯ä»¥ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å‘½ä»¤æ¨¡å¼çš„å®šä¹‰</strong></p><p>å‘½ä»¤æ¨¡å¼åŒ…æ‹¬å››ä¸ªè§’è‰²ï¼šCommandï¼ˆå‘½ä»¤ï¼‰ã€Receiverï¼ˆæ¥æ”¶è€…ï¼‰ã€Invokerï¼ˆè°ƒç”¨è€…ï¼‰å’ŒClientï¼ˆå®¢æˆ·ç«¯ï¼‰ã€‚å‘½ä»¤å¯¹è±¡è´Ÿè´£å°è£…è¯·æ±‚ï¼Œæ¥æ”¶è€…æ‰§è¡Œå…·ä½“çš„æ“ä½œï¼Œè°ƒç”¨è€…å‘èµ·è¯·æ±‚ï¼Œå®¢æˆ·ç«¯åˆ›å»ºå¹¶é…ç½®å‘½ä»¤å¯¹è±¡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Receiver</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">action</span><span class="hljs-params">()</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Receiver is performing action.\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Command</span> &#123;<br><span class="hljs-keyword">protected</span>:<br>    Receiver* receiver;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Command</span>(Receiver* rec) : <span class="hljs-built_in">receiver</span>(rec) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteCommand</span> : <span class="hljs-keyword">public</span> Command &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">ConcreteCommand</span>(Receiver* rec) : <span class="hljs-built_in">Command</span>(rec) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        receiver-&gt;<span class="hljs-built_in">action</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Invoker</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    Command* command;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setCommand</span><span class="hljs-params">(Command* cmd)</span> </span>&#123;<br>        command = cmd;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">executeCommand</span><span class="hljs-params">()</span> </span>&#123;<br>        command-&gt;<span class="hljs-built_in">execute</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Receiver receiver;<br>    <span class="hljs-function">ConcreteCommand <span class="hljs-title">command</span><span class="hljs-params">(&amp;receiver)</span></span>;<br>    Invoker invoker;<br><br>    invoker.<span class="hljs-built_in">setCommand</span>(&amp;command);<br>    invoker.<span class="hljs-built_in">executeCommand</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å‘½ä»¤æ¨¡å¼çš„åº”ç”¨</strong></p><p>å‘½ä»¤æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>éœ€è¦å°†è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦ã€‚</li><li>éœ€è¦å¯¹è¯·æ±‚è¿›è¡Œæ’é˜Ÿã€è®°å½•è¯·æ±‚æ—¥å¿—ç­‰æ“ä½œã€‚</li></ul><p><strong>4. å‘½ä»¤æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼çš„æ¯”è¾ƒ</strong></p><p>å‘½ä»¤æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼æœ‰äº›ç›¸ä¼¼ï¼Œå®ƒä»¬éƒ½å°†ç®—æ³•å°è£…æˆå¯¹è±¡ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢ã€‚ä½†å®ƒä»¬çš„å…³æ³¨ç‚¹ä¸åŒï¼Œç­–ç•¥æ¨¡å¼å…³æ³¨äºæ•´ä½“ç®—æ³•çš„æ›¿æ¢ï¼Œè€Œå‘½ä»¤æ¨¡å¼å…³æ³¨äºè¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…çš„è§£è€¦ã€‚</p><p><strong>ç»“è®ºï¼š</strong></p><p>å‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å¾—å¯ä»¥ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰å‘½ä»¤ã€æ¥æ”¶è€…å’Œè°ƒç”¨è€…æ¥å®ç°å‘½ä»¤æ¨¡å¼ã€‚å‘½ä»¤æ¨¡å¼å¸¸ç”¨äºéœ€è¦å°†è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦çš„åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å‘½ä»¤æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå¤‡å¿˜å½•æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå¤‡å¿˜å½•æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå¤‡å¿˜å½•æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å¤‡å¿˜å½•æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åœ¨ä¸ç ´åå°è£…çš„å‰æä¸‹ä¿å­˜å’Œæ¢å¤å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å¤‡å¿˜å½•æ¨¡å¼çš„å®šä¹‰</strong></p><p>å¤‡å¿˜å½•æ¨¡å¼åŒ…æ‹¬ä¸‰ä¸ªè§’è‰²ï¼šOriginatorï¼ˆå‘èµ·äººï¼‰ã€Mementoï¼ˆå¤‡å¿˜å½•ï¼‰å’ŒCaretakerï¼ˆè´Ÿè´£äººï¼‰ã€‚å‘èµ·äººè´Ÿè´£åˆ›å»ºå¤‡å¿˜å½•å’Œæ¢å¤çŠ¶æ€ï¼Œå¤‡å¿˜å½•è´Ÿè´£ä¿å­˜çŠ¶æ€ï¼Œè´Ÿè´£äººè´Ÿè´£ç®¡ç†å¤‡å¿˜å½•ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Memento</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    std::string state;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Memento</span>(<span class="hljs-type">const</span> std::string&amp; s) : <span class="hljs-built_in">state</span>(s) &#123;&#125;<br><br>    <span class="hljs-function">std::string <span class="hljs-title">getState</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> state;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Originator</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    std::string state;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setState</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; s)</span> </span>&#123;<br>        state = s;<br>    &#125;<br><br>    <span class="hljs-function">std::string <span class="hljs-title">getState</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> state;<br>    &#125;<br><br>    <span class="hljs-function">Memento <span class="hljs-title">createMemento</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Memento</span>(state);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">restoreFromMemento</span><span class="hljs-params">(<span class="hljs-type">const</span> Memento&amp; m)</span> </span>&#123;<br>        state = m.<span class="hljs-built_in">getState</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Caretaker</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    Memento memento;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">saveMemento</span><span class="hljs-params">(<span class="hljs-type">const</span> Memento&amp; m)</span> </span>&#123;<br>        memento = m;<br>    &#125;<br><br>    <span class="hljs-function">Memento <span class="hljs-title">retrieveMemento</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> memento;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Originator originator;<br>    Caretaker caretaker;<br><br>    <span class="hljs-comment">// è®¾ç½®çŠ¶æ€å¹¶ä¿å­˜å¤‡å¿˜å½•</span><br>    originator.<span class="hljs-built_in">setState</span>(<span class="hljs-string">&quot;State 1&quot;</span>);<br>    caretaker.<span class="hljs-built_in">saveMemento</span>(originator.<span class="hljs-built_in">createMemento</span>());<br><br>    <span class="hljs-comment">// ä¿®æ”¹çŠ¶æ€</span><br>    originator.<span class="hljs-built_in">setState</span>(<span class="hljs-string">&quot;State 2&quot;</span>);<br><br>    <span class="hljs-comment">// æ¢å¤çŠ¶æ€</span><br>    originator.<span class="hljs-built_in">restoreFromMemento</span>(caretaker.<span class="hljs-built_in">retrieveMemento</span>());<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Current state: &quot;</span> &lt;&lt; originator.<span class="hljs-built_in">getState</span>() &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å¤‡å¿˜å½•æ¨¡å¼çš„åº”ç”¨</strong></p><p>å¤‡å¿˜å½•æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>éœ€è¦åœ¨ä¸ç ´åå¯¹è±¡å°è£…çš„å‰æä¸‹ä¿å­˜å’Œæ¢å¤å…¶å†…éƒ¨çŠ¶æ€ã€‚</li><li>éœ€è¦æä¾›æ’¤é”€æ“ä½œã€‚</li></ul><p><strong>4. C++ä¸­çš„æ ‡å‡†å¤‡å¿˜å½•æ¨¡å¼</strong></p><p>åœ¨C++ä¸­ï¼Œæ ‡å‡†åº“æä¾›äº†<code>std::memento</code>å’Œ<code>std::care_taker</code>æ¥å®ç°å¤‡å¿˜å½•æ¨¡å¼ï¼Œä¾‹å¦‚<code>std::undoable</code>ã€‚</p><p><strong>ç»“è®ºï¼š</strong></p><p>å¤‡å¿˜å½•æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åœ¨ä¸ç ´åå°è£…çš„å‰æä¸‹ä¿å­˜å’Œæ¢å¤å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰å‘èµ·äººã€å¤‡å¿˜å½•å’Œè´Ÿè´£äººæ¥å®ç°å¤‡å¿˜å½•æ¨¡å¼ã€‚å¤‡å¿˜å½•æ¨¡å¼å¸¸ç”¨äºéœ€è¦æä¾›æ’¤é”€æ“ä½œçš„åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å¤‡å¿˜å½•æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šçŠ¶æ€æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šçŠ¶æ€æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šçŠ¶æ€æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>çŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. çŠ¶æ€æ¨¡å¼çš„å®šä¹‰</strong></p><p>çŠ¶æ€æ¨¡å¼åŒ…æ‹¬ä¸‰ä¸ªè§’è‰²ï¼šContextï¼ˆä¸Šä¸‹æ–‡ï¼‰ã€Stateï¼ˆçŠ¶æ€ï¼‰å’Œå…·ä½“çš„çŠ¶æ€å®ç°ç±»ã€‚ä¸Šä¸‹æ–‡åŒ…å«ä¸€ä¸ªæŒ‡å‘å½“å‰çŠ¶æ€çš„å¼•ç”¨ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶æ”¹å˜çŠ¶æ€ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">State</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">handle</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteStateA</span> : <span class="hljs-keyword">public</span> State &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;State A\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteStateB</span> : <span class="hljs-keyword">public</span> State &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;State B\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    State* currentState;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Context</span>(State* initialState) : <span class="hljs-built_in">currentState</span>(initialState) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setState</span><span class="hljs-params">(State* newState)</span> </span>&#123;<br>        currentState = newState;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">request</span><span class="hljs-params">()</span> </span>&#123;<br>        currentState-&gt;<span class="hljs-built_in">handle</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ConcreteStateA stateA;<br>    ConcreteStateB stateB;<br><br>    <span class="hljs-function">Context <span class="hljs-title">context</span><span class="hljs-params">(&amp;stateA)</span></span>;<br>    context.<span class="hljs-built_in">request</span>();<br><br>    context.<span class="hljs-built_in">setState</span>(&amp;stateB);<br>    context.<span class="hljs-built_in">request</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. çŠ¶æ€æ¨¡å¼çš„åº”ç”¨</strong></p><p>çŠ¶æ€æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå…¶å†…éƒ¨çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ”¹å˜çŠ¶æ€æ—¶ã€‚</li><li>å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦æ ¹æ®å…¶çŠ¶æ€æ‰§è¡Œä¸åŒçš„æ“ä½œæ—¶ã€‚</li></ul><p><strong>4. çŠ¶æ€æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼çš„æ¯”è¾ƒ</strong></p><p>çŠ¶æ€æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼æœ‰äº›ç›¸ä¼¼ï¼Œå®ƒä»¬éƒ½å…è®¸å¯¹è±¡åœ¨è¿è¡Œæ—¶æ”¹å˜å…¶è¡Œä¸ºã€‚ä½†å®ƒä»¬çš„å…³æ³¨ç‚¹ä¸åŒï¼Œç­–ç•¥æ¨¡å¼å…³æ³¨äºæ•´ä½“ç®—æ³•çš„æ›¿æ¢ï¼Œè€ŒçŠ¶æ€æ¨¡å¼å…³æ³¨äºå¯¹è±¡å†…éƒ¨çŠ¶æ€çš„åˆ‡æ¢ã€‚</p><p><strong>ç»“è®ºï¼š</strong></p><p>çŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰æŠ½è±¡çŠ¶æ€ç±»å’Œå…·ä½“çŠ¶æ€ç±»ï¼Œä»¥åŠä¸€ä¸ªåŒ…å«çŠ¶æ€å¼•ç”¨çš„ä¸Šä¸‹æ–‡ç±»æ¥å®ç°çŠ¶æ€æ¨¡å¼ã€‚çŠ¶æ€æ¨¡å¼å¯ä»¥ä½¿å¾—å¯¹è±¡åœ¨è¿è¡Œæ—¶æ ¹æ®å†…éƒ¨çŠ¶æ€æ”¹å˜å…¶è¡Œä¸ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> çŠ¶æ€æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šç­–ç•¥æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šç­–ç•¥æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šç­–ç•¥æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€æ—ç®—æ³•ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œä½¿å¾—ç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. ç­–ç•¥æ¨¡å¼çš„å®šä¹‰</strong></p><p>ç­–ç•¥æ¨¡å¼åŒ…æ‹¬ä¸‰ä¸ªè§’è‰²ï¼šContextï¼ˆä¸Šä¸‹æ–‡ï¼‰ã€Strategyï¼ˆç­–ç•¥ï¼‰å’Œå…·ä½“çš„ç­–ç•¥å®ç°ç±»ã€‚ä¸Šä¸‹æ–‡åŒ…å«ä¸€ä¸ªæŒ‡å‘ç­–ç•¥çš„å¼•ç”¨ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶æ›¿æ¢å…·ä½“çš„ç­–ç•¥ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Strategy</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">algorithm</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteStrategyA</span> : <span class="hljs-keyword">public</span> Strategy &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">algorithm</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Using Strategy A\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteStrategyB</span> : <span class="hljs-keyword">public</span> Strategy &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">algorithm</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Using Strategy B\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    Strategy* strategy;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Context</span>(Strategy* s) : <span class="hljs-built_in">strategy</span>(s) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setStrategy</span><span class="hljs-params">(Strategy* s)</span> </span>&#123;<br>        strategy = s;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span> </span>&#123;<br>        strategy-&gt;<span class="hljs-built_in">algorithm</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ConcreteStrategyA strategyA;<br>    ConcreteStrategyB strategyB;<br><br>    <span class="hljs-function">Context <span class="hljs-title">context</span><span class="hljs-params">(&amp;strategyA)</span></span>;<br>    context.<span class="hljs-built_in">execute</span>();<br><br>    context.<span class="hljs-built_in">setStrategy</span>(&amp;strategyB);<br>    context.<span class="hljs-built_in">execute</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. ç­–ç•¥æ¨¡å¼çš„åº”ç”¨</strong></p><p>ç­–ç•¥æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å½“ä¸€ä¸ªé—®é¢˜æœ‰å¤šä¸ªè§£å†³ç­–ç•¥ï¼Œä¸”å¯ä»¥åŠ¨æ€åˆ‡æ¢æ—¶ã€‚</li><li>å½“éœ€è¦åœ¨ä¸åŒæƒ…å†µä¸‹ä½¿ç”¨ä¸åŒçš„ç®—æ³•æ—¶ã€‚</li></ul><p><strong>4. ç­–ç•¥æ¨¡å¼ä¸å·¥å‚æ¨¡å¼çš„ç»“åˆ</strong></p><p>ç­–ç•¥æ¨¡å¼é€šå¸¸ä¸å·¥å‚æ¨¡å¼ç»“åˆä½¿ç”¨ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©åˆé€‚çš„ç­–ç•¥ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StrategyFactory</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> Strategy* <span class="hljs-title">createStrategy</span><span class="hljs-params">(<span class="hljs-type">char</span> type)</span> </span>&#123;<br>        <span class="hljs-keyword">switch</span> (type) &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;A&#x27;</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ConcreteStrategyA</span>();<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;B&#x27;</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ConcreteStrategyB</span>();<br>            <span class="hljs-keyword">default</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€æ—ç®—æ³•ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œä½¿å¾—ç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰æŠ½è±¡ç­–ç•¥ç±»å’Œå…·ä½“ç­–ç•¥ç±»ï¼Œä»¥åŠä¸€ä¸ªåŒ…å«ç­–ç•¥å¼•ç”¨çš„ä¸Šä¸‹æ–‡ç±»æ¥å®ç°ç­–ç•¥æ¨¡å¼ã€‚ç­–ç•¥æ¨¡å¼é€šå¸¸ä¸å·¥å‚æ¨¡å¼ç»“åˆä½¿ç”¨ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©åˆé€‚çš„ç­–ç•¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> ç­–ç•¥æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šè£…é¥°è€…æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šè£…é¥°è€…æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šè£…é¥°è€…æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>è£…é¥°è€…æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. è£…é¥°è€…æ¨¡å¼çš„å®šä¹‰</strong></p><p>è£…é¥°è€…æ¨¡å¼æœ‰ä¸¤ä¸ªå…³é”®è§’è‰²ï¼šComponentï¼ˆç»„ä»¶ï¼‰å’Œ Decoratorï¼ˆè£…é¥°è€…ï¼‰ã€‚ç»„ä»¶æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰äº†åŸºæœ¬çš„æ“ä½œï¼Œå¯ä»¥æœ‰ä¸€ä¸ªå…·ä½“çš„å®ç°ã€‚è£…é¥°è€…ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç»§æ‰¿è‡ªç»„ä»¶ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªæŒ‡å‘ç»„ä»¶çš„å¼•ç”¨ï¼Œå¹¶ä¸”ä¼šå°†æ‰€æœ‰æ“ä½œå§”æ´¾ç»™ç»„ä»¶ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteComponent</span> : <span class="hljs-keyword">public</span> Component &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ConcreteComponent operation\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Decorator</span> : <span class="hljs-keyword">public</span> Component &#123;<br><span class="hljs-keyword">private</span>:<br>    Component* component;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Decorator</span>(Component* comp) : <span class="hljs-built_in">component</span>(comp) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        component-&gt;<span class="hljs-built_in">operation</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Component* comp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ConcreteComponent</span>();<br>    comp-&gt;<span class="hljs-built_in">operation</span>();<br><br>    Component* decoratedComp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Decorator</span>(comp);<br>    decoratedComp-&gt;<span class="hljs-built_in">operation</span>();<br><br>    <span class="hljs-keyword">delete</span> decoratedComp; <span class="hljs-comment">// æ³¨æ„éœ€è¦é‡Šæ”¾å†…å­˜</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. è£…é¥°è€…æ¨¡å¼çš„åº”ç”¨</strong></p><p>è£…é¥°è€…æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>åœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ åŠŸèƒ½ã€‚</li><li>éœ€è¦æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ï¼Œä½†æ˜¯é€šè¿‡ç»§æ‰¿ä¼šå¯¼è‡´ç±»çš„æ•°é‡æ¿€å¢ã€‚</li></ul><p><strong>4. C++ä¸­çš„æ ‡å‡†è£…é¥°è€…æ¨¡å¼</strong></p><p>åœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„è£…é¥°è€…æ¨¡å¼ï¼Œå¦‚<code>std::ifstream</code>å’Œ<code>std::ofstream</code>ç­‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::ofstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">&quot;example.txt&quot;</span>)</span></span>;<br>    file &lt;&lt; <span class="hljs-string">&quot;Hello, world!\n&quot;</span>;<br>    file.<span class="hljs-built_in">close</span>();<br><br>    <span class="hljs-function">std::ifstream <span class="hljs-title">inputFile</span><span class="hljs-params">(<span class="hljs-string">&quot;example.txt&quot;</span>)</span></span>;<br>    std::string line;<br>    <span class="hljs-keyword">while</span> (std::<span class="hljs-built_in">getline</span>(inputFile, line)) &#123;<br>        std::cout &lt;&lt; line &lt;&lt; std::endl;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>è£…é¥°è€…æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰æŠ½è±¡ç»„ä»¶å’ŒæŠ½è±¡è£…é¥°è€…æ¥å®ç°è£…é¥°è€…æ¨¡å¼ã€‚æ ‡å‡†åº“ä¸­çš„ä¸€äº›ç±»ä¹Ÿä½¿ç”¨äº†è£…é¥°è€…æ¨¡å¼ï¼Œä»¥æä¾›é¢å¤–çš„åŠŸèƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> è£…é¥°è€…æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šé€‚é…å™¨æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šé€‚é…å™¨æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šé€‚é…å™¨æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸æ¥å£ä¸å…¼å®¹çš„ç±»èƒ½å¤Ÿä¸€èµ·å·¥ä½œã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. é€‚é…å™¨æ¨¡å¼çš„å®šä¹‰</strong></p><p>é€‚é…å™¨æ¨¡å¼æœ‰ä¸‰ä¸ªè§’è‰²ï¼šç›®æ ‡æ¥å£ï¼ˆTargetï¼‰ã€è¢«é€‚é…è€…ï¼ˆAdapteeï¼‰å’Œé€‚é…å™¨ï¼ˆAdapterï¼‰ã€‚é€‚é…å™¨å°†è¢«é€‚é…è€…çš„æ¥å£è½¬æ¢æˆç›®æ ‡æ¥å£ï¼Œä½¿å¾—ä¸¤è€…èƒ½å¤ŸååŒå·¥ä½œã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Target</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">request</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Adaptee</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">specificRequest</span><span class="hljs-params">()</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Specific request\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Adapter</span> : <span class="hljs-keyword">public</span> Target &#123;<br><span class="hljs-keyword">private</span>:<br>    Adaptee* adaptee;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Adapter</span>(Adaptee* a) : <span class="hljs-built_in">adaptee</span>(a) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">request</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        adaptee-&gt;<span class="hljs-built_in">specificRequest</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Adaptee adaptee;<br>    <span class="hljs-function">Adapter <span class="hljs-title">adapter</span><span class="hljs-params">(&amp;adaptee)</span></span>;<br>    adapter.<span class="hljs-built_in">request</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å¯¹è±¡é€‚é…å™¨ä¸ç±»é€‚é…å™¨</strong></p><p>åœ¨é€‚é…å™¨æ¨¡å¼ä¸­ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šå¯¹è±¡é€‚é…å™¨å’Œç±»é€‚é…å™¨ã€‚</p><p>å¯¹è±¡é€‚é…å™¨ä½¿ç”¨ç»„åˆæ¥è¿æ¥ç›®æ ‡æ¥å£ä¸è¢«é€‚é…è€…ï¼Œè€Œç±»é€‚é…å™¨ä½¿ç”¨å¤šé‡ç»§æ‰¿ã€‚</p><p><strong>4. é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨</strong></p><p>é€‚é…å™¨æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>åœ¨ä¸ä¿®æ”¹ç°æœ‰ç±»çš„æƒ…å†µä¸‹ï¼Œä½¿å…¶ä¸å…¶ä»–æ¥å£ååŒå·¥ä½œã€‚</li><li>å°†å¤šä¸ªç±»çš„æ¥å£æ•´åˆæˆä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œä»¥æä¾›æ›´ç®€æ´çš„æ¥å£ã€‚</li></ul><p><strong>ç»“è®ºï¼š</strong></p><p>é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸æ¥å£ä¸å…¼å®¹çš„ç±»èƒ½å¤Ÿä¸€èµ·å·¥ä½œã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡é€‚é…å™¨å°†è¢«é€‚é…è€…çš„æ¥å£è½¬æ¢æˆç›®æ ‡æ¥å£ï¼Œä»è€Œå®ç°ä¸¤è€…çš„ååŒå·¥ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> é€‚é…å™¨æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. è§‚å¯Ÿè€…æ¨¡å¼çš„å®šä¹‰</strong></p><p>è§‚å¯Ÿè€…æ¨¡å¼åŒ…æ‹¬ä¸¤ä¸ªè§’è‰²ï¼šSubjectï¼ˆä¸»é¢˜ï¼‰å’ŒObserverï¼ˆè§‚å¯Ÿè€…ï¼‰ã€‚ä¸»é¢˜ç»´æŠ¤ä¸€ç»„è§‚å¯Ÿè€…ï¼Œå¹¶æä¾›æ–¹æ³•ç”¨äºæ·»åŠ ã€ç§»é™¤å’Œé€šçŸ¥è§‚å¯Ÿè€…ã€‚è§‚å¯Ÿè€…å®šä¹‰äº†ä¸€ä¸ªæ›´æ–°æ–¹æ³•ï¼Œç”¨äºåœ¨æ¥æ”¶åˆ°é€šçŸ¥æ—¶æ›´æ–°è‡ªèº«çŠ¶æ€ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Subject</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    std::vector&lt;Observer*&gt; observers;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addObserver</span><span class="hljs-params">(Observer* obs)</span> </span>&#123;<br>        observers.<span class="hljs-built_in">push_back</span>(obs);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">removeObserver</span><span class="hljs-params">(Observer* obs)</span> </span>&#123;<br>        <span class="hljs-keyword">auto</span> it = std::<span class="hljs-built_in">find</span>(observers.<span class="hljs-built_in">begin</span>(), observers.<span class="hljs-built_in">end</span>(), obs);<br>        <span class="hljs-keyword">if</span> (it != observers.<span class="hljs-built_in">end</span>()) &#123;<br>            observers.<span class="hljs-built_in">erase</span>(it);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">notifyObservers</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (Observer* obs : observers) &#123;<br>            obs-&gt;<span class="hljs-built_in">update</span>();<br>        &#125;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteObserverA</span> : <span class="hljs-keyword">public</span> Observer &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ConcreteObserverA received update\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteObserverB</span> : <span class="hljs-keyword">public</span> Observer &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ConcreteObserverB received update\n&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. è§‚å¯Ÿè€…æ¨¡å¼çš„åº”ç”¨</strong></p><p>è§‚å¯Ÿè€…æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œéœ€è¦é€šçŸ¥å…¶ä»–å¯¹è±¡è¿›è¡Œç›¸åº”çš„æ›´æ–°ã€‚</li><li>å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦å°†è‡ªèº«çš„å˜åŒ–é€šçŸ¥ç»™ä¸€ç»„å¯¹è±¡æ—¶ã€‚</li></ul><p><strong>4. C++ä¸­çš„æ ‡å‡†è§‚å¯Ÿè€…æ¨¡å¼</strong></p><p>åœ¨C++ä¸­ï¼Œæ ‡å‡†åº“æä¾›äº†<code>std::observable</code>å’Œ<code>std::observer</code>æ¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¾‹å¦‚<code>std::vector</code>å’Œ<code>std::function</code>ã€‚</p><p><strong>ç»“è®ºï¼š</strong></p><p>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ä¸»é¢˜å’Œè§‚å¯Ÿè€…çš„æŠ½è±¡ç±»ï¼Œä»¥åŠå…·ä½“çš„ä¸»é¢˜å’Œè§‚å¯Ÿè€…æ¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼ã€‚è§‚å¯Ÿè€…æ¨¡å¼å¸¸ç”¨äºéœ€è¦å°†å¯¹è±¡çš„å˜åŒ–é€šçŸ¥ç»™ä¸€ç»„å¯¹è±¡çš„åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> è§‚å¯Ÿè€…æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå·¥å‚æ¨¡å¼</title>
      <link href="/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/18/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå·¥å‚æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå·¥å‚æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†å…è®¸å­ç±»å†³å®šå®ä¾‹åŒ–çš„ç±»ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å·¥å‚æ¨¡å¼çš„å®šä¹‰</strong></p><p>å·¥å‚æ¨¡å¼åŒ…æ‹¬ä¸‰ä¸ªè§’è‰²ï¼šProductï¼ˆäº§å“ï¼‰ã€ConcreteProductï¼ˆå…·ä½“äº§å“ï¼‰å’ŒFactoryï¼ˆå·¥å‚ï¼‰ã€‚å·¥å‚ç±»è´Ÿè´£åˆ›å»ºäº§å“çš„å®ä¾‹ï¼Œè€Œå…·ä½“çš„äº§å“ç±»è´Ÿè´£å®ç°äº§å“çš„å…·ä½“è¡Œä¸ºã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteProductA</span> : <span class="hljs-keyword">public</span> Product &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Product A\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteProductB</span> : <span class="hljs-keyword">public</span> Product &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Product B\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Factory</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Product* <span class="hljs-title">createProduct</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteFactoryA</span> : <span class="hljs-keyword">public</span> Factory &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">Product* <span class="hljs-title">createProduct</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ConcreteProductA</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteFactoryB</span> : <span class="hljs-keyword">public</span> Factory &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">Product* <span class="hljs-title">createProduct</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ConcreteProductB</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å…·ä½“å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ConcreteFactoryA factoryA;<br>    ConcreteFactoryB factoryB;<br><br>    Product* productA = factoryA.<span class="hljs-built_in">createProduct</span>();<br>    Product* productB = factoryB.<span class="hljs-built_in">createProduct</span>();<br><br>    productA-&gt;<span class="hljs-built_in">operation</span>();<br>    productB-&gt;<span class="hljs-built_in">operation</span>();<br><br>    <span class="hljs-keyword">delete</span> productA;<br>    <span class="hljs-keyword">delete</span> productB;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å·¥å‚æ¨¡å¼çš„åº”ç”¨</strong></p><p>å·¥å‚æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å½“ä¸€ä¸ªç±»ä¸çŸ¥é“å®ƒå¿…é¡»åˆ›å»ºçš„å¯¹è±¡çš„ç±»æ—¶ã€‚</li><li>å½“ä¸€ä¸ªç±»å¸Œæœ›å°†å¯¹è±¡çš„åˆ›å»ºå»¶è¿Ÿåˆ°å…¶å­ç±»æ—¶ã€‚</li></ul><p><strong>4. å·¥å‚æ¨¡å¼çš„æ‰©å±•ï¼šæŠ½è±¡å·¥å‚æ¨¡å¼</strong></p><p>æŠ½è±¡å·¥å‚æ¨¡å¼æä¾›äº†ä¸€ç§åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚</p><p><strong>ç»“è®ºï¼š</strong></p><p>å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†å…è®¸å­ç±»å†³å®šå®ä¾‹åŒ–çš„ç±»ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰äº§å“ã€å…·ä½“äº§å“å’Œå·¥å‚æ¥å®ç°å·¥å‚æ¨¡å¼ã€‚å·¥å‚æ¨¡å¼å¸¸ç”¨äºéœ€è¦å°†å¯¹è±¡çš„åˆ›å»ºä¸å…·ä½“ä¸šåŠ¡é€»è¾‘åˆ†ç¦»çš„åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å·¥å‚æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å•ä¾‹æ¨¡å¼çš„å®šä¹‰</strong></p><p>å•ä¾‹æ¨¡å¼ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®è¯¥å®ä¾‹çš„å…¨å±€å…¥å£ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">static</span> Singleton* instance;<br>    <span class="hljs-built_in">Singleton</span>() &#123;&#125; <span class="hljs-comment">// ç§æœ‰æ„é€ å‡½æ•°</span><br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> Singleton* <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!instance) &#123;<br>            instance = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Singleton</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å•ä¾‹æ¨¡å¼çš„å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp">Singleton* Singleton::instance = <span class="hljs-literal">nullptr</span>; <span class="hljs-comment">// é™æ€æˆå‘˜å˜é‡éœ€è¦åœ¨ç±»å¤–åˆå§‹åŒ–</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Singleton* obj1 = Singleton::<span class="hljs-built_in">getInstance</span>();<br>    Singleton* obj2 = Singleton::<span class="hljs-built_in">getInstance</span>();<br><br>    <span class="hljs-keyword">if</span> (obj1 == obj2) &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;obj1 and obj2 are the same instance\n&quot;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;obj1 and obj2 are different instances\n&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å•ä¾‹æ¨¡å¼çš„åº”ç”¨</strong></p><p>å•ä¾‹æ¨¡å¼å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ul><li>å½“ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”éœ€è¦åœ¨å…¨å±€èŒƒå›´å†…æä¾›è®¿é—®ç‚¹æ—¶ã€‚</li><li>å½“éœ€è¦æ§åˆ¶èµ„æºçš„åˆ†é…ï¼Œä»¥é¿å…å¤šæ¬¡åˆ›å»ºç›¸åŒå¯¹è±¡æ—¶ã€‚</li></ul><p><strong>4. å•ä¾‹æ¨¡å¼çš„çº¿ç¨‹å®‰å…¨å®ç°</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">static</span> Singleton* instance;<br>    <span class="hljs-built_in">Singleton</span>() &#123;&#125;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> Singleton* <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!instance) &#123;<br>            <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex)</span></span>; <span class="hljs-comment">// åŠ é”</span><br>            <span class="hljs-keyword">if</span> (!instance) &#123;<br>                instance = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Singleton</span>();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br><br>    <span class="hljs-type">static</span> std::mutex mutex; <span class="hljs-comment">// äº’æ–¥é”</span><br>&#125;;<br><br>Singleton* Singleton::instance = <span class="hljs-literal">nullptr</span>;<br>std::mutex Singleton::mutex;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡å°†æ„é€ å‡½æ•°ç§æœ‰åŒ–ã€æä¾›ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ä»¥åŠä¸€ä¸ªé™æ€æ–¹æ³•æ¥å®ç°å•ä¾‹æ¨¡å¼ã€‚å•ä¾‹æ¨¡å¼å¸¸ç”¨äºéœ€è¦ç¡®ä¿åªæœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨çš„åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ä¸­çš„è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å•ä¾‹æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„å¼‚å¸¸å¤„ç†ä¸é”™è¯¯å¤„ç†</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E4%B8%8E%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E4%B8%8E%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„å¼‚å¸¸å¤„ç†ä¸é”™è¯¯å¤„ç†"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„å¼‚å¸¸å¤„ç†ä¸é”™è¯¯å¤„ç†</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å¼‚å¸¸å¤„ç†æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿé”™è¯¯æ—¶é‡‡å–çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨å¼‚å¸¸å‘ç”Ÿæ—¶è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œè€Œä¸æ˜¯ç›´æ¥å¯¼è‡´ç¨‹åºå´©æºƒã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å¼‚å¸¸çš„åŸºæœ¬æ¦‚å¿µ</strong></p><p>åœ¨C++ä¸­ï¼Œå¼‚å¸¸æ˜¯ä¸€ç§ç¨‹åºè¿è¡Œæ—¶é”™è¯¯çš„ä¿¡å·ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ã€ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹æˆ–è€…ä¸€ä¸ªæŒ‡é’ˆã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç </span><br>&#125; <span class="hljs-built_in">catch</span> (ExceptionType&amp; e) &#123;<br>    <span class="hljs-comment">// å¤„ç†å¼‚å¸¸çš„ä»£ç </span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2. å¼‚å¸¸çš„æŠ›å‡º</strong></p><p>å¯ä»¥ä½¿ç”¨<code>throw</code>å…³é”®å­—æŠ›å‡ºå¼‚å¸¸ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒæŠ›å‡ºçš„æ˜¯ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myFunction</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* å‘ç”Ÿé”™è¯¯çš„æ¡ä»¶ */</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-built_in">MyException</span>(<span class="hljs-string">&quot;å‘ç”Ÿé”™è¯¯&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. å¼‚å¸¸çš„æ•è·</strong></p><p>å¼‚å¸¸çš„æ•è·ç”±<code>try</code>å—å’Œç›¸åº”çš„<code>catch</code>å—ç»„æˆã€‚å½“<code>try</code>å—ä¸­çš„ä»£ç å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œæ§åˆ¶æƒä¼šè½¬ç§»åˆ°ä¸å¼‚å¸¸ç±»å‹åŒ¹é…çš„<code>catch</code>å—ä¸­ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">myFunction</span>();<br>&#125; <span class="hljs-built_in">catch</span> (MyException&amp; e) &#123;<br>    <span class="hljs-comment">// å¤„ç†å¼‚å¸¸çš„ä»£ç </span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. å¼‚å¸¸ç±»å‹çš„ç»§æ‰¿å…³ç³»</strong></p><p>å¼‚å¸¸å¯ä»¥é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å»ºç«‹ç±»å‹çš„å±‚æ¬¡ç»“æ„ï¼Œä»è€Œä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡åŸºç±»çš„<code>catch</code>å—æ¥æ•è·æ´¾ç”Ÿç±»çš„å¼‚å¸¸ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseException</span> &#123;&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DerivedException</span> : <span class="hljs-keyword">public</span> BaseException &#123;&#125;;<br><br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* å‘ç”ŸDerivedExceptionæ¡ä»¶ */</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-built_in">DerivedException</span>();<br>    &#125;<br>&#125; <span class="hljs-built_in">catch</span> (BaseException&amp; e) &#123;<br>    <span class="hljs-comment">// å¯ä»¥æ•è·BaseExceptionåŠå…¶æ´¾ç”Ÿç±»çš„å¼‚å¸¸</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>5. ä½¿ç”¨æ ‡å‡†å¼‚å¸¸</strong></p><p>C++æ ‡å‡†åº“æä¾›äº†ä¸€äº›æ ‡å‡†å¼‚å¸¸ç±»ï¼Œå®ƒä»¬ç»§æ‰¿è‡ª<code>std::exception</code>ç±»ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§å¸¸è§çš„å¼‚å¸¸æƒ…å†µã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* å‘ç”Ÿæ ‡å‡†å¼‚å¸¸æ¡ä»¶ */</span>) &#123;<br>        <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;å‘ç”Ÿè¿è¡Œæ—¶é”™è¯¯&quot;</span>);<br>    &#125;<br>&#125; <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) &#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æ•è·åˆ°å¼‚å¸¸ï¼š&quot;</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>6. è‡ªå®šä¹‰å¼‚å¸¸ç±»</strong></p><p>å¯ä»¥é€šè¿‡ç»§æ‰¿<code>std::exception</code>ç±»æ¥å®šä¹‰è‡ªå·±çš„å¼‚å¸¸ç±»ï¼Œä»è€Œå®ç°å¯¹ç‰¹å®šå¼‚å¸¸çš„å¤„ç†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyException</span> : <span class="hljs-keyword">public</span> std::exception &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">MyException</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* message) : <span class="hljs-built_in">message</span>(message) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-title">what</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-title">throw</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> message.<span class="hljs-built_in">c_str</span>();<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    std::string message;<br>&#125;;<br><br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* å‘ç”Ÿè‡ªå®šä¹‰å¼‚å¸¸æ¡ä»¶ */</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-built_in">MyException</span>(<span class="hljs-string">&quot;å‘ç”Ÿè‡ªå®šä¹‰å¼‚å¸¸&quot;</span>);<br>    &#125;<br>&#125; <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> MyException&amp; e) &#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;æ•è·åˆ°è‡ªå®šä¹‰å¼‚å¸¸ï¼š&quot;</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>å¼‚å¸¸å¤„ç†æ˜¯C++ä¸­é‡è¦çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨å‘ç”Ÿé”™è¯¯æ—¶è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œè€Œä¸æ˜¯ç›´æ¥å¯¼è‡´ç¨‹åºå´©æºƒã€‚é€šè¿‡<code>try-catch</code>å—å¯ä»¥æ•è·å¼‚å¸¸å¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„å¼‚å¸¸ç±»æ¥å¤„ç†ç‰¹å®šçš„å¼‚å¸¸æƒ…å†µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å¼‚å¸¸å¤„ç†ä¸é”™è¯¯å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„è®¾è®¡æ¨¡å¼ä¸æœ€ä½³å®è·µ</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„è®¾è®¡æ¨¡å¼ä¸æœ€ä½³å®è·µ"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„è®¾è®¡æ¨¡å¼ä¸æœ€ä½³å®è·µ</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>è®¾è®¡æ¨¡å¼æ˜¯è§£å†³ç‰¹å®šç±»å‹é—®é¢˜çš„é€šç”¨å¯é‡ç”¨è§£å†³æ–¹æ¡ˆï¼Œè€Œæœ€ä½³å®è·µæ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç§¯ç´¯çš„ä¸€äº›ä¼˜è‰¯ç»éªŒå’ŒæŠ€å·§ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰</strong></p><p>å•ä¾‹æ¨¡å¼ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> Singleton&amp; <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-type">static</span> Singleton instance;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-built_in">Singleton</span>() &#123;&#125;<br>    <span class="hljs-built_in">Singleton</span>(<span class="hljs-type">const</span> Singleton&amp;);<br>    Singleton&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Singleton&amp;);<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰</strong></p><p>å·¥å‚æ¨¡å¼ç”¨äºåˆ›å»ºå¯¹è±¡ï¼Œéšè—äº†å¯¹è±¡çš„åˆ›å»ºé€»è¾‘ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteProduct</span> : <span class="hljs-keyword">public</span> Product &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">operation</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-comment">// å…·ä½“äº§å“çš„æ“ä½œ</span><br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Factory</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Product* <span class="hljs-title">createProduct</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteFactory</span> : <span class="hljs-keyword">public</span> Factory &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Product* <span class="hljs-title">createProduct</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ConcreteProduct</span>();<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>3. è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰</strong></p><p>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteObserver</span> : <span class="hljs-keyword">public</span> Observer &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-comment">// è§‚å¯Ÿè€…çš„æ›´æ–°æ“ä½œ</span><br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Subject</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">attach</span><span class="hljs-params">(Observer* observer)</span> </span>&#123;<br>        observers.<span class="hljs-built_in">push_back</span>(observer);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">notify</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (Observer* observer : observers) &#123;<br>            observer-&gt;<span class="hljs-built_in">update</span>();<br>        &#125;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    std::vector&lt;Observer*&gt; observers;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>4. RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰</strong></p><p>RAIIæ˜¯ä¸€ç§C++ç¼–ç¨‹çš„é‡è¦ç†å¿µï¼Œé€šè¿‡åœ¨å¯¹è±¡çš„æ„é€ å‡½æ•°ä¸­è·å–èµ„æºï¼Œåˆ©ç”¨ææ„å‡½æ•°åœ¨å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶é‡Šæ”¾èµ„æºã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Resource</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Resource</span>() &#123;<br>        <span class="hljs-comment">// è·å–èµ„æº</span><br>    &#125;<br><br>    ~<span class="hljs-built_in">Resource</span>() &#123;<br>        <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span><br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>5. å¼‚å¸¸å®‰å…¨æ€§ï¼ˆException Safetyï¼‰</strong></p><p>åœ¨C++ä¸­ï¼Œä¿è¯ç¨‹åºåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ä¸ä¼šæ³„éœ²èµ„æºæˆ–è€…å¤„äºä¸ç¨³å®šçŠ¶æ€æ˜¯éå¸¸é‡è¦çš„ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç </span><br>&#125; <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) &#123;<br>    <span class="hljs-comment">// å¼‚å¸¸å¤„ç†é€»è¾‘</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>è®¾è®¡æ¨¡å¼æ˜¯è§£å†³ç‰¹å®šç±»å‹é—®é¢˜çš„é€šç”¨å¯é‡ç”¨è§£å†³æ–¹æ¡ˆï¼Œè€Œæœ€ä½³å®è·µæ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç§¯ç´¯çš„ä¸€äº›ä¼˜è‰¯ç»éªŒå’ŒæŠ€å·§ã€‚é€šè¿‡åº”ç”¨è®¾è®¡æ¨¡å¼å’Œéµå¾ªæœ€ä½³å®è·µï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œç¨³å®šæ€§ã€‚</p><p>**åé¢ä¼šå‡ºä¸“æ ï¼Œæ•¬è¯·æœŸå¾… **</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ä¸æœ€ä½³å®è·µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„ä»£ç ä¼˜åŒ–ä¸æ€§èƒ½è°ƒä¼˜</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E4%B8%8E%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96%E4%B8%8E%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„ä»£ç ä¼˜åŒ–ä¸æ€§èƒ½è°ƒä¼˜"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„ä»£ç ä¼˜åŒ–ä¸æ€§èƒ½è°ƒä¼˜</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>ä»£ç ä¼˜åŒ–å’Œæ€§èƒ½è°ƒä¼˜æ˜¯æå‡ç¨‹åºè¿è¡Œæ•ˆç‡å’Œå“åº”é€Ÿåº¦çš„å…³é”®æ­¥éª¤ï¼Œç‰¹åˆ«å¯¹äºå¤§å‹é¡¹ç›®æˆ–éœ€è¦é«˜æ€§èƒ½çš„åº”ç”¨æ¥è¯´è‡³å…³é‡è¦ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„å’Œç®—æ³•</strong></p><p>é€‰æ‹©é€‚å½“çš„æ•°æ®ç»“æ„å’Œç®—æ³•æ˜¯ä¿è¯ç¨‹åºé«˜æ•ˆè¿è¡Œçš„åŸºç¡€ï¼Œå®ƒä»¬ç›´æ¥å½±å“åˆ°ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦å’Œå†…å­˜æ¶ˆè€—ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¾‹å­ï¼šé€‰æ‹©åˆé€‚çš„å®¹å™¨</span><br>std::vector&lt;<span class="hljs-type">int</span>&gt; vec; <span class="hljs-comment">// é€‚ç”¨äºåŠ¨æ€å¤§å°çš„æ•°ç»„</span><br>std::list&lt;<span class="hljs-type">int</span>&gt; lst;   <span class="hljs-comment">// é€‚ç”¨äºé¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤æ“ä½œ</span><br></code></pre></td></tr></table></figure><p><strong>2. é¿å…é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾</strong></p><p>é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾ä¼šå¢åŠ ç¨‹åºçš„å¼€é”€ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨å¯¹è±¡æ± ã€é¢„åˆ†é…å†…å­˜ç­‰æ–¹å¼æ¥é¿å…ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¾‹å­ï¼šä½¿ç”¨å¯¹è±¡æ± </span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectPool</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">Object* <span class="hljs-title">allocate</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (freeList.<span class="hljs-built_in">empty</span>()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            Object* obj = freeList.<span class="hljs-built_in">back</span>();<br>            freeList.<span class="hljs-built_in">pop_back</span>();<br>            <span class="hljs-keyword">return</span> obj;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deallocate</span><span class="hljs-params">(Object* obj)</span> </span>&#123;<br>        freeList.<span class="hljs-built_in">push_back</span>(obj);<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    std::vector&lt;Object*&gt; freeList;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>3. å‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€</strong></p><p>å‡½æ•°è°ƒç”¨ä¼šå¸¦æ¥ä¸€å®šçš„å¼€é”€ï¼Œå°¤å…¶åœ¨å¾ªç¯å†…éƒ¨ã€‚å¯ä»¥è€ƒè™‘å°†ä¸€äº›çŸ­å°çš„å‡½æ•°å†…è”ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¾‹å­ï¼šå†…è”å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. ä½¿ç”¨å¤šçº¿ç¨‹å’Œå¹¶è¡Œç¼–ç¨‹</strong></p><p>åœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šï¼Œä½¿ç”¨å¤šçº¿ç¨‹å¯ä»¥å……åˆ†åˆ©ç”¨ç¡¬ä»¶èµ„æºï¼Œæé«˜ç¨‹åºçš„å¹¶å‘æ€§å’Œæ€§èƒ½ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¾‹å­ï¼šä½¿ç”¨std::threadè¿›è¡Œå¤šçº¿ç¨‹ç¼–ç¨‹</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myThreadFunction</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::thread <span class="hljs-title">myThread</span><span class="hljs-params">(myThreadFunction)</span></span>;<br>    myThread.<span class="hljs-built_in">join</span>(); <span class="hljs-comment">// ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>5. è¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œåˆ†æ</strong></p><p>ä½¿ç”¨æ€§èƒ½æµ‹è¯•å·¥å…·å’Œåˆ†æå™¨æ¥è¯„ä¼°ç¨‹åºçš„æ€§èƒ½ï¼Œå¹¶æ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆæ‰€åœ¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¾‹å­ï¼šä½¿ç”¨GNU gprofè¿›è¡Œæ€§èƒ½åˆ†æ</span><br><span class="hljs-comment">// ç¼–è¯‘æ—¶åŠ å…¥-gé€‰é¡¹ï¼Œè¿è¡Œç¨‹åºåä½¿ç”¨gprofè¿›è¡Œåˆ†æ</span><br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>ä»£ç ä¼˜åŒ–å’Œæ€§èƒ½è°ƒä¼˜æ˜¯ä¿è¯ç¨‹åºé«˜æ•ˆè¿è¡Œçš„å…³é”®æ­¥éª¤ï¼Œç‰¹åˆ«å¯¹äºå¤§å‹é¡¹ç›®æˆ–éœ€è¦é«˜æ€§èƒ½çš„åº”ç”¨æ¥è¯´è‡³å…³é‡è¦ã€‚é€šè¿‡é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„å’Œç®—æ³•ã€é¿å…é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾ã€å‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€ç­‰æ–¹æ³•ï¼Œå¯ä»¥æœ‰æ•ˆæå‡ç¨‹åºçš„æ€§èƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> ä»£ç ä¼˜åŒ– </tag>
            
            <tag> æ€§èƒ½è°ƒä¼˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„ä»£ç æµ‹è¯•ä¸è´¨é‡ä¿è¯</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95%E4%B8%8E%E8%B4%A8%E9%87%8F%E4%BF%9D%E8%AF%81/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95%E4%B8%8E%E8%B4%A8%E9%87%8F%E4%BF%9D%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„ä»£ç æµ‹è¯•ä¸è´¨é‡ä¿è¯"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„ä»£ç æµ‹è¯•ä¸è´¨é‡ä¿è¯</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>ä»£ç æµ‹è¯•å’Œè´¨é‡ä¿è¯æ˜¯ä¿è¯è½¯ä»¶ç¨³å®šæ€§å’Œå¯é æ€§çš„å…³é”®æ­¥éª¤ï¼Œå®ƒä»¬åŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€é™æ€åˆ†æç­‰ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å•å…ƒæµ‹è¯•ï¼ˆUnit Testingï¼‰</strong></p><p>å•å…ƒæµ‹è¯•æ˜¯é’ˆå¯¹ç¨‹åºä¸­æœ€å°çš„å¯æµ‹è¯•å•å…ƒï¼ˆå¦‚å‡½æ•°ã€æ–¹æ³•ï¼‰è¿›è¡Œæµ‹è¯•çš„è¿‡ç¨‹ï¼Œæ—¨åœ¨ç¡®ä¿æ¯ä¸ªå•å…ƒçš„åŠŸèƒ½æ­£å¸¸è¿è¡Œã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¾‹å­ï¼šä½¿ç”¨Google Testè¿›è¡Œå•å…ƒæµ‹è¯•</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;gtest/gtest.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-built_in">TEST</span>(AddTest, PositiveNumbers) &#123;<br>    <span class="hljs-built_in">EXPECT_EQ</span>(<span class="hljs-built_in">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>), <span class="hljs-number">5</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>** argv)</span> </span>&#123;<br>    testing::<span class="hljs-built_in">InitGoogleTest</span>(&amp;argc, argv);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">RUN_ALL_TESTS</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2. é›†æˆæµ‹è¯•ï¼ˆIntegration Testingï¼‰</strong></p><p>é›†æˆæµ‹è¯•æ˜¯å°†å„ä¸ªæ¨¡å—æˆ–å•å…ƒç»„åˆåœ¨ä¸€èµ·è¿›è¡Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿å®ƒä»¬åœ¨æ•´ä½“ç³»ç»Ÿä¸­ååŒå·¥ä½œã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¾‹å­ï¼šæ¨¡æ‹Ÿé›†æˆæµ‹è¯•</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;my_module1.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;my_module2.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> result1 = my_module1::<span class="hljs-built_in">function1</span>();<br>    <span class="hljs-type">int</span> result2 = my_module2::<span class="hljs-built_in">function2</span>();<br>    <span class="hljs-comment">// æ£€æŸ¥ç»“æœ</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. é™æ€åˆ†æï¼ˆStatic Analysisï¼‰</strong></p><p>é™æ€åˆ†æå·¥å…·å¯ä»¥åœ¨ä¸è¿è¡Œç¨‹åºçš„æƒ…å†µä¸‹æ£€æŸ¥æºä»£ç ï¼Œæ‰¾å‡ºæ½œåœ¨çš„é—®é¢˜å’Œé”™è¯¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¾‹å­ï¼šä½¿ç”¨Clang Static Analyzerè¿›è¡Œé™æ€åˆ†æ</span><br><span class="hljs-comment">// å‘½ä»¤è¡Œä½¿ç”¨ï¼šclang --analyze source.c</span><br></code></pre></td></tr></table></figure><p><strong>4. ä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰</strong></p><p>ä»£ç å®¡æŸ¥æ˜¯é€šè¿‡ä»”ç»†æ£€æŸ¥ä»£ç æ¥æ‰¾å‡ºé”™è¯¯ã€æ”¹è¿›ä»£ç è´¨é‡çš„ä¸€ç§æ–¹æ³•ï¼Œé€šå¸¸é€šè¿‡å›¢é˜Ÿæˆå‘˜ç›¸äº’å®¡æŸ¥æ¥è¿›è¡Œã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¾‹å­ï¼šä»£ç å®¡æŸ¥å®è·µ</span><br><span class="hljs-comment">// å›¢é˜Ÿæˆå‘˜Aï¼šæå‡ºæ”¹è¿›æ„è§</span><br><span class="hljs-comment">// å›¢é˜Ÿæˆå‘˜Bï¼šå›å¤å¹¶è®¨è®º</span><br></code></pre></td></tr></table></figure><p><strong>5. è‡ªåŠ¨åŒ–æ„å»ºä¸æŒç»­é›†æˆï¼ˆCI/CDï¼‰</strong></p><p>è‡ªåŠ¨åŒ–æ„å»ºå’ŒæŒç»­é›†æˆæ˜¯ç¡®ä¿æ¯æ¬¡ä»£ç æäº¤éƒ½èƒ½è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•å’Œéƒ¨ç½²çš„é‡è¦æ‰‹æ®µã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¾‹å­ï¼šä½¿ç”¨Jenkinsè¿›è¡ŒæŒç»­é›†æˆ</span><br><span class="hljs-comment">// é…ç½®Jenkinsä»»åŠ¡ï¼Œå°†å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰æ­¥éª¤è‡ªåŠ¨åŒ–æ‰§è¡Œ</span><br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>ä»£ç æµ‹è¯•å’Œè´¨é‡ä¿è¯æ˜¯ä¿è¯è½¯ä»¶ç¨³å®šæ€§å’Œå¯é æ€§çš„å…³é”®æ­¥éª¤ï¼Œå®ƒä»¬åŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€é™æ€åˆ†æã€ä»£ç å®¡æŸ¥ã€è‡ªåŠ¨åŒ–æ„å»ºä¸æŒç»­é›†æˆç­‰ã€‚é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œå¯ä»¥ç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½çš„ç¨³å®šæ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> ä»£ç æµ‹è¯•ä¸è´¨é‡ä¿è¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„å›¾å½¢ç”¨æˆ·ç•Œé¢(GUI)ä¸å›¾å½¢åº“</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E5%9B%BE%E5%BD%A2%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2-GUI-%E4%B8%8E%E5%9B%BE%E5%BD%A2%E5%BA%93/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E5%9B%BE%E5%BD%A2%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2-GUI-%E4%B8%8E%E5%9B%BE%E5%BD%A2%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„å›¾å½¢ç”¨æˆ·ç•Œé¢-GUI-ä¸å›¾å½¢åº“"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„å›¾å½¢ç”¨æˆ·ç•Œé¢(GUI)ä¸å›¾å½¢åº“</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGraphical User Interface, GUIï¼‰æ˜¯ç°ä»£è½¯ä»¶å¼€å‘ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡å›¾å½¢åŒ–ç•Œé¢ä¸ç¨‹åºäº¤äº’ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. GUIåº“çš„é€‰æ‹©</strong></p><p>C++ä¸­æœ‰è®¸å¤šå¯ä»¥ç”¨äºåˆ›å»ºå›¾å½¢ç”¨æˆ·ç•Œé¢çš„åº“ï¼Œä¾‹å¦‚Qtã€GTKã€wxWidgetsç­‰ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨Qtåº“åˆ›å»ºä¸€ä¸ªç®€å•çª—å£çš„ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QApplication&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QWidget&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span> </span>&#123;<br>    <span class="hljs-function">QApplication <span class="hljs-title">app</span><span class="hljs-params">(argc, argv)</span></span>;<br><br>    QWidget window;<br>    window.<span class="hljs-built_in">resize</span>(<span class="hljs-number">250</span>, <span class="hljs-number">150</span>);<br>    window.<span class="hljs-built_in">setWindowTitle</span>(<span class="hljs-string">&quot;Simple Window&quot;</span>);<br>    window.<span class="hljs-built_in">show</span>();<br><br>    <span class="hljs-keyword">return</span> app.<span class="hljs-built_in">exec</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2. äº‹ä»¶ä¸ä¿¡å·æ§½</strong></p><p>GUIç¼–ç¨‹ä¸­ï¼Œäº‹ä»¶ï¼ˆEventï¼‰æ˜¯ç”¨æˆ·å¯¹ç¨‹åºçš„æ“ä½œï¼Œä¾‹å¦‚ç‚¹å‡»æŒ‰é’®ã€è¾“å…¥æ–‡æœ¬ç­‰ã€‚ä¿¡å·æ§½ï¼ˆSignal-Slotï¼‰æœºåˆ¶å…è®¸å¯¹è±¡é—´è¿›è¡Œé€šä¿¡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">QPushButton* button = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QPushButton</span>(<span class="hljs-string">&quot;Click Me&quot;</span>);<br>QObject::<span class="hljs-built_in">connect</span>(button, &amp;QPushButton::clicked, [=]() &#123;<br>    <span class="hljs-built_in">qDebug</span>() &lt;&lt; <span class="hljs-string">&quot;Button Clicked&quot;</span>;<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>3. å¸ƒå±€ç®¡ç†å™¨</strong></p><p>å¸ƒå±€ç®¡ç†å™¨ç”¨äºå®šä¹‰æ§ä»¶åœ¨çª—å£ä¸­çš„ä½ç½®å’Œå¤§å°ï¼Œä»¥é€‚åº”ä¸åŒå¤§å°çš„çª—å£ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">QHBoxLayout* layout = <span class="hljs-keyword">new</span> QHBoxLayout;<br>layout-&gt;<span class="hljs-built_in">addWidget</span>(button1);<br>layout-&gt;<span class="hljs-built_in">addWidget</span>(button2);<br>window.<span class="hljs-built_in">setLayout</span>(layout);<br></code></pre></td></tr></table></figure><p><strong>4. ç»˜å›¾ä¸å›¾å½¢åº“</strong></p><p>é™¤äº†GUIåº“ï¼ŒC++è¿˜æä¾›äº†è®¸å¤šç”¨äºå›¾å½¢ç»˜åˆ¶çš„åº“ï¼Œå¦‚SFMLã€OpenGLç­‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;SFML/Graphics.hpp&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">sf::RenderWindow <span class="hljs-title">window</span><span class="hljs-params">(sf::VideoMode(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>), <span class="hljs-string">&quot;SFML Window&quot;</span>)</span></span>;<br>    <span class="hljs-keyword">while</span> (window.<span class="hljs-built_in">isOpen</span>()) &#123;<br>        sf::Event event;<br>        <span class="hljs-keyword">while</span> (window.<span class="hljs-built_in">pollEvent</span>(event)) &#123;<br>            <span class="hljs-keyword">if</span> (event.type == sf::Event::Closed)<br>                window.<span class="hljs-built_in">close</span>();<br>        &#125;<br>        window.<span class="hljs-built_in">clear</span>();<br>        <span class="hljs-comment">// ç»˜åˆ¶å›¾å½¢</span><br>        window.<span class="hljs-built_in">display</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>5. Webç•Œé¢å¼€å‘ä¸Webæ¡†æ¶</strong></p><p>C++ä¹Ÿå¯ä»¥ç”¨äºWebç•Œé¢å¼€å‘ï¼Œå¯ä»¥ä½¿ç”¨Webæ¡†æ¶å¦‚CppCMSã€Wtç­‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cppcms/application.h&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">my_app</span> : <span class="hljs-keyword">public</span> cppcms::application &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">my_app</span>(cppcms::service&amp; srv) : cppcms::<span class="hljs-built_in">application</span>(srv) &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(std::string url)</span></span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>å›¾å½¢ç”¨æˆ·ç•Œé¢æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒæä¾›äº†ç›´è§‚çš„äº¤äº’æ–¹å¼ã€‚C++æä¾›äº†è®¸å¤šå¯ä»¥ç”¨äºåˆ›å»ºå›¾å½¢ç”¨æˆ·ç•Œé¢çš„åº“å’Œå›¾å½¢ç»˜åˆ¶çš„åº“ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„åº“è¿›è¡Œå¼€å‘ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å›¾å½¢ç”¨æˆ·ç•Œé¢(GUI) </tag>
            
            <tag> å›¾å½¢åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„åµŒå…¥å¼ç³»ç»Ÿä¸ç‰©è”ç½‘</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%8E%E7%89%A9%E8%81%94%E7%BD%91/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%8E%E7%89%A9%E8%81%94%E7%BD%91/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„åµŒå…¥å¼ç³»ç»Ÿä¸ç‰©è”ç½‘"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„åµŒå…¥å¼ç³»ç»Ÿä¸ç‰©è”ç½‘</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>åµŒå…¥å¼ç³»ç»Ÿå’Œç‰©è”ç½‘æ˜¯ç°ä»£ç§‘æŠ€ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»¬æ¶‰åŠåˆ°å„ç§è®¾å¤‡å’Œä¼ æ„Ÿå™¨çš„è¿æ¥å’Œæ§åˆ¶ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. åµŒå…¥å¼ç³»ç»ŸåŸºç¡€</strong></p><p>åµŒå…¥å¼ç³»ç»Ÿæ˜¯ä¸€ç§ç‰¹æ®Šç”¨é€”çš„è®¡ç®—æœºç³»ç»Ÿï¼Œé€šå¸¸ç”¨äºæ§åˆ¶å’Œå¤„ç†åµŒå…¥åœ¨å„ç§è®¾å¤‡ä¸­çš„ä»»åŠ¡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä½¿ç”¨Arduinoå¹³å°è¿›è¡ŒåµŒå…¥å¼å¼€å‘</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">pinMode</span>(LED_BUILTIN, OUTPUT);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">digitalWrite</span>(LED_BUILTIN, HIGH);<br>    <span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>);<br>    <span class="hljs-built_in">digitalWrite</span>(LED_BUILTIN, LOW);<br>    <span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2. ç‰©è”ç½‘ä¸ä¼ æ„Ÿå™¨è¿æ¥</strong></p><p>ç‰©è”ç½‘æ˜¯æŒ‡é€šè¿‡äº’è”ç½‘å°†å„ç§è®¾å¤‡è¿æ¥åœ¨ä¸€èµ·ï¼Œå®ç°æ•°æ®çš„äº¤äº’å’Œæ§åˆ¶ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä½¿ç”¨C++è¿æ¥ä¼ æ„Ÿå™¨å¹¶ä¸Šä¼ æ•°æ®</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::ifstream <span class="hljs-title">sensorData</span><span class="hljs-params">(<span class="hljs-string">&quot;sensor_data.txt&quot;</span>)</span></span>;<br>    <span class="hljs-type">int</span> value;<br>    sensorData &gt;&gt; value;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Sensor Value: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;<br>    <span class="hljs-comment">// å°†æ•°æ®ä¸Šä¼ è‡³æœåŠ¡å™¨</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. é€šä¿¡åè®®ä¸æ•°æ®ä¼ è¾“</strong></p><p>åœ¨ç‰©è”ç½‘ä¸­ï¼Œè®¾å¤‡ä¹‹é—´éœ€è¦ä½¿ç”¨å„ç§é€šä¿¡åè®®æ¥è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œå¦‚MQTTã€CoAPç­‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä½¿ç”¨MQTTè¿›è¡Œè®¾å¤‡é—´é€šä¿¡</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mosquitto.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">mosquitto</span>* mosq = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-built_in">mosquitto_lib_init</span>();<br>    mosq = <span class="hljs-built_in">mosquitto_new</span>(<span class="hljs-literal">NULL</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">NULL</span>);<br>    <span class="hljs-built_in">mosquitto_connect</span>(mosq, <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-number">1883</span>, <span class="hljs-number">60</span>);<br>    <span class="hljs-built_in">mosquitto_publish</span>(mosq, <span class="hljs-literal">NULL</span>, <span class="hljs-string">&quot;topic&quot;</span>, <span class="hljs-built_in">strlen</span>(<span class="hljs-string">&quot;message&quot;</span>), <span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>);<br>    <span class="hljs-built_in">mosquitto_destroy</span>(mosq);<br>    <span class="hljs-built_in">mosquitto_lib_cleanup</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. åµŒå…¥å¼ç³»ç»Ÿä¸­çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰</strong></p><p>å®æ—¶æ“ä½œç³»ç»Ÿæ˜¯ä¸€ç§ç”¨äºæ§åˆ¶å®æ—¶åº”ç”¨ç¨‹åºçš„æ“ä½œç³»ç»Ÿï¼Œé€šå¸¸ç”¨äºåµŒå…¥å¼ç³»ç»Ÿä¸­ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä½¿ç”¨FreeRTOSè¿›è¡ŒåµŒå…¥å¼å¼€å‘</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;FreeRTOS.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;task.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">vTaskFunction</span><span class="hljs-params">(<span class="hljs-type">void</span>* pvParameters)</span> </span>&#123;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-comment">// ä»»åŠ¡é€»è¾‘</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">xTaskCreate</span>(vTaskFunction, <span class="hljs-string">&quot;Task&quot;</span>, configMINIMAL_STACK_SIZE, <span class="hljs-literal">NULL</span>, tskIDLE_PRIORITY, <span class="hljs-literal">NULL</span>);<br>    <span class="hljs-built_in">vTaskStartScheduler</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>5. åµŒå…¥å¼ç³»ç»Ÿä¸­çš„ä½åŠŸè€—è®¾è®¡</strong></p><p>åœ¨ç‰©è”ç½‘ä¸­ï¼Œè®¸å¤šè®¾å¤‡éœ€è¦è€ƒè™‘åŠŸè€—é—®é¢˜ï¼Œä»¥ä¿è¯é•¿æ—¶é—´çš„ä½¿ç”¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä½åŠŸè€—è®¾è®¡ç¤ºä¾‹</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ArduinoLowPower.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆå§‹åŒ–ä»£ç </span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// ä»£ç é€»è¾‘</span><br>    LowPower.<span class="hljs-built_in">sleep</span>(<span class="hljs-number">60000</span>); <span class="hljs-comment">// ä¼‘çœ 1åˆ†é’Ÿ</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>åµŒå…¥å¼ç³»ç»Ÿå’Œç‰©è”ç½‘æ˜¯ç°ä»£ç§‘æŠ€çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒä»¬æ¶‰åŠåˆ°å„ç§è®¾å¤‡å’Œä¼ æ„Ÿå™¨çš„è¿æ¥ã€æ§åˆ¶å’Œæ•°æ®äº¤äº’ã€‚C++ä½œä¸ºä¸€é—¨çµæ´»ä¸”å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨åµŒå…¥å¼ç³»ç»Ÿå’Œç‰©è”ç½‘çš„å¼€å‘ä¸­ä¹Ÿèµ·åˆ°äº†é‡è¦ä½œç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> åµŒå…¥å¼ç³»ç»Ÿ </tag>
            
            <tag> ç‰©è”ç½‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„ç½‘ç»œç¼–ç¨‹ä¸å¥—æ¥å­—</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A5%97%E6%8E%A5%E5%AD%97/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A5%97%E6%8E%A5%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„ç½‘ç»œç¼–ç¨‹ä¸å¥—æ¥å­—"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„ç½‘ç»œç¼–ç¨‹ä¸å¥—æ¥å­—</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>ç½‘ç»œç¼–ç¨‹æ˜¯ç°ä»£è½¯ä»¶å¼€å‘ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå…è®¸ç¨‹åºé€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ï¼Œå®ç°è¿œç¨‹è¿æ¥å’Œæ•°æ®ä¼ è¾“ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å¥—æ¥å­—åŸºç¡€</strong></p><p>å¥—æ¥å­—ï¼ˆsocketï¼‰æ˜¯å®ç°ç½‘ç»œé€šä¿¡çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå…è®¸è®¡ç®—æœºé€šè¿‡ç½‘ç»œè¿›è¡Œæ•°æ®ä¼ è¾“ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> serverSocket = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (serverSocket == <span class="hljs-number">-1</span>) &#123;<br>        std::cerr &lt;&lt; <span class="hljs-string">&quot;Failed to create socket&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serverAddress;<br>    serverAddress.sin_family = AF_INET;<br>    serverAddress.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">8080</span>);<br>    serverAddress.sin_addr.s_addr = INADDR_ANY;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bind</span>(serverSocket, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;serverAddress, <span class="hljs-built_in">sizeof</span>(serverAddress)) == <span class="hljs-number">-1</span>) &#123;<br>        std::cerr &lt;&lt; <span class="hljs-string">&quot;Failed to bind socket&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-built_in">close</span>(serverSocket);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">listen</span>(serverSocket, <span class="hljs-number">5</span>) == <span class="hljs-number">-1</span>) &#123;<br>        std::cerr &lt;&lt; <span class="hljs-string">&quot;Failed to listen on socket&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-built_in">close</span>(serverSocket);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-type">int</span> clientSocket = <span class="hljs-built_in">accept</span>(serverSocket, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>);<br>    <span class="hljs-keyword">if</span> (clientSocket == <span class="hljs-number">-1</span>) &#123;<br>        std::cerr &lt;&lt; <span class="hljs-string">&quot;Failed to accept connection&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-built_in">close</span>(serverSocket);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-type">char</span> message[] = <span class="hljs-string">&quot;Hello, client!&quot;</span>;<br>    <span class="hljs-built_in">send</span>(clientSocket, message, <span class="hljs-built_in">strlen</span>(message), <span class="hljs-number">0</span>);<br><br>    <span class="hljs-built_in">close</span>(clientSocket);<br>    <span class="hljs-built_in">close</span>(serverSocket);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2. å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨</strong></p><p>ç½‘ç»œé€šä¿¡é€šå¸¸æ¶‰åŠåˆ°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸¤ç«¯ã€‚æœåŠ¡å™¨è´Ÿè´£æ¥å—è¿æ¥å’Œå¤„ç†è¯·æ±‚ï¼Œå®¢æˆ·ç«¯è´Ÿè´£å‘èµ·è¿æ¥å’Œå‘é€è¯·æ±‚ã€‚</p><p><strong>3. HTTPè¯·æ±‚ä¸å“åº”</strong></p><p>HTTPæ˜¯ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œç”¨äºåœ¨Webæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’æ•°æ®ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp">GET /index.html HTTP/<span class="hljs-number">1.1</span><br>Host: www.example.com<br><br>HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br>Content-Type: text/html<br><br>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Example Page&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;h1&gt;Hello, World!&lt;/h1&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p><strong>4. ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ç®€åŒ–ç½‘ç»œç¼–ç¨‹</strong></p><p>C++æ ‡å‡†åº“å¹¶ä¸æä¾›ç›´æ¥çš„ç½‘ç»œç¼–ç¨‹æ”¯æŒï¼Œä½†å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Boost.Asioï¼‰æ¥ç®€åŒ–ç½‘ç»œç¼–ç¨‹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;boost/asio.hpp&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    boost::asio::io_context ioContext;<br>    boost::asio::ip::<span class="hljs-function">tcp::acceptor <span class="hljs-title">acceptor</span><span class="hljs-params">(ioContext, boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), <span class="hljs-number">8080</span>))</span></span>;<br><br>    boost::asio::ip::<span class="hljs-function">tcp::socket <span class="hljs-title">socket</span><span class="hljs-params">(ioContext)</span></span>;<br>    acceptor.<span class="hljs-built_in">accept</span>(socket);<br><br>    std::string message = <span class="hljs-string">&quot;Hello, client!&quot;</span>;<br>    boost::asio::<span class="hljs-built_in">write</span>(socket, boost::asio::<span class="hljs-built_in">buffer</span>(message));<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>ç½‘ç»œç¼–ç¨‹æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå…è®¸ç¨‹åºé€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ï¼Œå®ç°è¿œç¨‹è¿æ¥å’Œæ•°æ®ä¼ è¾“ã€‚äº†è§£å¥—æ¥å­—çš„åŸºæœ¬ä½¿ç”¨å’ŒHTTPé€šä¿¡åŸç†æ˜¯è¿›è¡Œç½‘ç»œç¼–ç¨‹çš„åŸºç¡€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> ç½‘ç»œç¼–ç¨‹ </tag>
            
            <tag> å¥—æ¥å­— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„å¹¶å‘ç¼–ç¨‹ä¸å¤šçº¿ç¨‹æ§åˆ¶</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8E%A7%E5%88%B6/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8E%A7%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„å¹¶å‘ç¼–ç¨‹ä¸å¤šçº¿ç¨‹æ§åˆ¶"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„å¹¶å‘ç¼–ç¨‹ä¸å¤šçº¿ç¨‹æ§åˆ¶</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å¹¶å‘ç¼–ç¨‹å…è®¸ç¨‹åºåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œè€Œä¸æ˜¯æŒ‰é¡ºåºä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‰§è¡Œã€‚C++æä¾›äº†å¤šçº¿ç¨‹æ”¯æŒï¼Œä½¿å¾—å¹¶å‘ç¼–ç¨‹å˜å¾—å®¹æ˜“ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å¤šçº¿ç¨‹åŸºç¡€</strong></p><p>C++æ ‡å‡†åº“æä¾›äº† <code>std::thread</code> ç±»æ¥æ”¯æŒå¤šçº¿ç¨‹ç¼–ç¨‹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myThreadFunction</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::thread <span class="hljs-title">myThread</span><span class="hljs-params">(myThreadFunction)</span></span>;<br>    myThread.<span class="hljs-built_in">join</span>(); <span class="hljs-comment">// ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2. çº¿ç¨‹åŒæ­¥ä¸äº’æ–¥é‡</strong></p><p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œéœ€è¦æ³¨æ„å…±äº«èµ„æºçš„è®¿é—®æ§åˆ¶ï¼Œä»¥é¿å…ç«æ€æ¡ä»¶å’Œæ•°æ®ç«äº‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span><br><br>std::mutex mtx;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">threadSafeFunction</span><span class="hljs-params">()</span> </span>&#123;<br>    mtx.<span class="hljs-built_in">lock</span>(); <span class="hljs-comment">// åŠ é”</span><br>    <span class="hljs-comment">// è®¿é—®å…±äº«èµ„æº</span><br>    mtx.<span class="hljs-built_in">unlock</span>(); <span class="hljs-comment">// è§£é”</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. æ¡ä»¶å˜é‡</strong></p><p>æ¡ä»¶å˜é‡ç”¨äºåœ¨çº¿ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œå…è®¸ä¸€ä¸ªçº¿ç¨‹åœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶ä¹‹å‰ç­‰å¾…ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;condition_variable&gt;</span></span><br><br>std::mutex mtx;<br>std::condition_variable cv;<br><span class="hljs-type">bool</span> dataReady = <span class="hljs-literal">false</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">producer</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// ç”Ÿäº§æ•°æ®</span><br>    <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;<br>    dataReady = <span class="hljs-literal">true</span>;<br>    cv.<span class="hljs-built_in">notify_one</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">consumer</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;<br>    cv.<span class="hljs-built_in">wait</span>(lock, []&#123; <span class="hljs-keyword">return</span> dataReady; &#125;);<br>    <span class="hljs-comment">// ä½¿ç”¨æ•°æ®</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. å¼‚æ­¥ä»»åŠ¡ä¸<code>std::async</code></strong></p><p>C++11å¼•å…¥äº† <code>std::async</code> æ¥æ”¯æŒå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;future&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">myTask</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span><br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::future&lt;<span class="hljs-type">int</span>&gt; fut = std::<span class="hljs-built_in">async</span>(myTask);<br>    <span class="hljs-type">int</span> result = fut.<span class="hljs-built_in">get</span>(); <span class="hljs-comment">// è·å–ä»»åŠ¡ç»“æœ</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>5. çº¿ç¨‹æ± </strong></p><p>çº¿ç¨‹æ± æ˜¯ä¸€ç§ç®¡ç†å’Œå¤ç”¨çº¿ç¨‹çš„æœºåˆ¶ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†å¤§é‡çš„ä»»åŠ¡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><br>std::queue&lt;std::function&lt;<span class="hljs-type">void</span>()&gt;&gt; taskQueue;<br>std::vector&lt;std::thread&gt; threads;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">workerThread</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) &#123;<br>        std::function&lt;<span class="hljs-type">void</span>()&gt; task;<br>        &#123;<br>            <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;<br>            cv.<span class="hljs-built_in">wait</span>(lock, []&#123; <span class="hljs-keyword">return</span> !taskQueue.<span class="hljs-built_in">empty</span>(); &#125;);<br>            task = std::<span class="hljs-built_in">move</span>(taskQueue.<span class="hljs-built_in">front</span>());<br>            taskQueue.<span class="hljs-built_in">pop</span>();<br>        &#125;<br>        <span class="hljs-built_in">task</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>å¹¶å‘ç¼–ç¨‹æ˜¯ç°ä»£è½¯ä»¶å¼€å‘ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå¯ä»¥æé«˜ç¨‹åºçš„æ€§èƒ½å’Œå“åº”èƒ½åŠ›ã€‚ä½†åŒæ—¶ä¹Ÿå¼•å…¥äº†å¹¶å‘æ§åˆ¶çš„é—®é¢˜ï¼Œéœ€è¦è°¨æ…å¤„ç†ã€‚é€šè¿‡ä½¿ç”¨å¤šçº¿ç¨‹ã€äº’æ–¥é‡ã€æ¡ä»¶å˜é‡ç­‰å·¥å…·ï¼Œå¯ä»¥å®ç°å®‰å…¨ã€é«˜æ•ˆçš„å¹¶å‘ç¼–ç¨‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å¹¶å‘ç¼–ç¨‹ </tag>
            
            <tag> å¤šçº¿ç¨‹æ§åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸è®¾è®¡æ¨¡å¼</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E4%B8%8E%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E4%B8%8E%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸è®¾è®¡æ¨¡å¼"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸è®¾è®¡æ¨¡å¼</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-Oriented Programming, OOPï¼‰æ˜¯ä¸€ç§ç¨‹åºè®¾è®¡èŒƒå¼ï¼Œå®ƒå°†ç¨‹åºç»„ç»‡ä¸ºå¯¹è±¡çš„é›†åˆï¼Œæ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ç‰¹å®šçš„å±æ€§å’Œè¡Œä¸ºã€‚è®¾è®¡æ¨¡å¼æ˜¯ä¸€äº›é€šç”¨çš„è§£å†³é—®é¢˜çš„æ–¹å¼ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. ç±»ä¸å¯¹è±¡</strong></p><p>ç±»æ˜¯å®šä¹‰äº†æ•°æ®å’Œæ–¹æ³•çš„æ¨¡æ¿ï¼Œå¯¹è±¡æ˜¯ç±»çš„å®ä¾‹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    std::string name;<br>    <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">introduce</span><span class="hljs-params">()</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Name: &quot;</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot;, Age: &quot;</span> &lt;&lt; age &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br>Person person1;<br>person<span class="hljs-number">1.</span>name = <span class="hljs-string">&quot;John&quot;</span>;<br>person<span class="hljs-number">1.</span>age = <span class="hljs-number">30</span>;<br>person<span class="hljs-number">1.</span><span class="hljs-built_in">introduce</span>();<br></code></pre></td></tr></table></figure><p><strong>2. å°è£…ä¸ç»§æ‰¿</strong></p><p>å°è£…æ˜¯å°†æ•°æ®å’Œæ“ä½œå°è£…åœ¨ä¸€ä¸ªå•å…ƒä¸­ï¼Œåªæš´éœ²å¿…è¦çš„æ¥å£ã€‚ç»§æ‰¿å…è®¸ä¸€ä¸ªç±»ç»§æ‰¿å¦ä¸€ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> : <span class="hljs-keyword">public</span> Person &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> studentID;<br>&#125;;<br><br>Student student1;<br>student<span class="hljs-number">1.</span>name = <span class="hljs-string">&quot;Jane&quot;</span>;<br>student<span class="hljs-number">1.</span>age = <span class="hljs-number">20</span>;<br>student<span class="hljs-number">1.</span>studentID = <span class="hljs-number">12345</span>;<br>student<span class="hljs-number">1.</span><span class="hljs-built_in">introduce</span>();<br></code></pre></td></tr></table></figure><p><strong>3. å¤šæ€ä¸è™šå‡½æ•°</strong></p><p>å¤šæ€å…è®¸ä¸€ä¸ªæ–¹æ³•å…·æœ‰å¤šä¸ªå½¢å¼ï¼Œè™šå‡½æ•°æ˜¯åœ¨åŸºç±»ä¸­å£°æ˜ä¸ºè™šå‡½æ•°çš„å‡½æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Drawing Shape&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Shape &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Drawing Circle&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>4. è®¾è®¡æ¨¡å¼</strong></p><p>è®¾è®¡æ¨¡å¼æ˜¯è§£å†³ç‰¹å®šç±»å‹é—®é¢˜çš„é€šç”¨æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ç­‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-built_in">Singleton</span>() &#123;&#125;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> Singleton&amp; <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-type">static</span> Singleton instance;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>5. RAIIä¸æ™ºèƒ½æŒ‡é’ˆ</strong></p><p>RAIIæ˜¯ä¸€ç§èµ„æºç®¡ç†çš„ç¼–ç¨‹æŠ€å·§ï¼Œæ™ºèƒ½æŒ‡é’ˆæ˜¯RAIIçš„ä¸€ç§å®ç°æ–¹å¼ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨é‡Šæ”¾èµ„æºã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::unique_ptr&lt;<span class="hljs-type">int</span>&gt; smartPtr = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä¸€ç§å¼ºå¤§çš„ç¨‹åºè®¾è®¡èŒƒå¼ï¼Œå®ƒå°†ç¨‹åºç»„ç»‡ä¸ºå¯¹è±¡çš„é›†åˆï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œæ˜“äºç»´æŠ¤ã€‚è®¾è®¡æ¨¡å¼æä¾›äº†ä¸€äº›é€šç”¨çš„è§£å†³é—®é¢˜çš„æ–¹å¼ï¼Œå¯ä»¥åœ¨è½¯ä»¶å¼€å‘ä¸­å¾—åˆ°åº”ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> é¢å‘å¯¹è±¡ç¼–ç¨‹ </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„æ–‡ä»¶æ“ä½œå’Œè¾“å…¥è¾“å‡ºæµ</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%92%8C%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%B5%81/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%92%8C%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„æ–‡ä»¶æ“ä½œå’Œè¾“å…¥è¾“å‡ºæµ"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„æ–‡ä»¶æ“ä½œå’Œè¾“å…¥è¾“å‡ºæµ</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>æ–‡ä»¶æ“ä½œå’Œè¾“å…¥è¾“å‡ºæµæ˜¯C++ä¸­å¤„ç†æ–‡ä»¶å’Œæ•°æ®æµçš„é‡è¦éƒ¨åˆ†ï¼Œå®ƒä»¬å…è®¸ç¨‹åºè¯»å–å’Œå†™å…¥æ–‡ä»¶ï¼Œè¿›è¡Œæ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. æ–‡ä»¶è¯»å†™åŸºç¡€</strong></p><p>C++æä¾›äº† <code>fstream</code> ç±»æ¥è¿›è¡Œæ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚å®ƒåŒ…æ‹¬äº† <code>ifstream</code>ï¼ˆç”¨äºè¯»å–æ–‡ä»¶ï¼‰ã€<code>ofstream</code>ï¼ˆç”¨äºå†™å…¥æ–‡ä»¶ï¼‰å’Œ <code>fstream</code>ï¼ˆå¯ä»¥åŒæ—¶è¯»å†™æ–‡ä»¶ï¼‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-function">std::ofstream <span class="hljs-title">outFile</span><span class="hljs-params">(<span class="hljs-string">&quot;myfile.txt&quot;</span>)</span></span>;<br>outFile &lt;&lt; <span class="hljs-string">&quot;å†™å…¥æ–‡ä»¶å†…å®¹&quot;</span> &lt;&lt; std::endl;<br>outFile.<span class="hljs-built_in">close</span>();<br><br><span class="hljs-function">std::ifstream <span class="hljs-title">inFile</span><span class="hljs-params">(<span class="hljs-string">&quot;myfile.txt&quot;</span>)</span></span>;<br>std::string line;<br><span class="hljs-keyword">while</span> (std::<span class="hljs-built_in">getline</span>(inFile, line)) &#123;<br>    std::cout &lt;&lt; line &lt;&lt; std::endl;<br>&#125;<br>inFile.<span class="hljs-built_in">close</span>();<br></code></pre></td></tr></table></figure><p><strong>2. æ–‡æœ¬æ–‡ä»¶ä¸äºŒè¿›åˆ¶æ–‡ä»¶</strong></p><p>æ–‡æœ¬æ–‡ä»¶ä»¥å¯è¯»çš„å­—ç¬¦å½¢å¼å­˜å‚¨ï¼Œå¯ä»¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æŸ¥çœ‹ã€‚äºŒè¿›åˆ¶æ–‡ä»¶ä»¥äºŒè¿›åˆ¶æ•°æ®å½¢å¼å­˜å‚¨ï¼Œä¸èƒ½ç›´æ¥ä»¥æ–‡æœ¬å½¢å¼æ‰“å¼€ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// æ–‡æœ¬æ–‡ä»¶å†™å…¥</span><br><span class="hljs-function">std::ofstream <span class="hljs-title">textFile</span><span class="hljs-params">(<span class="hljs-string">&quot;textfile.txt&quot;</span>)</span></span>;<br>textFile &lt;&lt; <span class="hljs-string">&quot;Hello, Text File!&quot;</span> &lt;&lt; std::endl;<br>textFile.<span class="hljs-built_in">close</span>();<br><br><span class="hljs-comment">// äºŒè¿›åˆ¶æ–‡ä»¶å†™å…¥</span><br><span class="hljs-function">std::ofstream <span class="hljs-title">binaryFile</span><span class="hljs-params">(<span class="hljs-string">&quot;binaryfile.bin&quot;</span>, std::ios::binary)</span></span>;<br><span class="hljs-type">int</span> data = <span class="hljs-number">42</span>;<br>binaryFile.<span class="hljs-built_in">write</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">char</span>*&gt;(&amp;data), <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>));<br>binaryFile.<span class="hljs-built_in">close</span>();<br></code></pre></td></tr></table></figure><p><strong>3. æ–‡ä»¶æµçš„å¼‚å¸¸å¤„ç†</strong></p><p>åœ¨æ–‡ä»¶æ“ä½œä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°æ‰“å¼€å¤±è´¥ã€å†™å…¥å¤±è´¥ç­‰æƒ…å†µï¼Œå¯ä»¥é€šè¿‡å¼‚å¸¸å¤„ç†æ¥å¤„ç†è¿™äº›æƒ…å†µã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::ofstream file;<br>file.<span class="hljs-built_in">exceptions</span>(std::ofstream::failbit | std::ofstream::badbit);<br><span class="hljs-keyword">try</span> &#123;<br>    file.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;myfile.txt&quot;</span>);<br>    file &lt;&lt; <span class="hljs-string">&quot;å†™å…¥æ–‡ä»¶å†…å®¹&quot;</span> &lt;&lt; std::endl;<br>    file.<span class="hljs-built_in">close</span>();<br>&#125; <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) &#123;<br>    std::cerr &lt;&lt; <span class="hljs-string">&quot;Error: &quot;</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. è¾“å…¥è¾“å‡ºæµæ“ä½œç¬¦é‡è½½</strong></p><p>å¯ä»¥é€šè¿‡é‡è½½è¾“å…¥è¾“å‡ºè¿ç®—ç¬¦ <code>&lt;&lt;</code> å’Œ <code>&gt;&gt;</code> æ¥å®ç°è‡ªå®šä¹‰ç±»å‹çš„è¾“å…¥è¾“å‡ºã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    std::string name;<br>    <span class="hljs-type">int</span> age;<br>    <br>    <span class="hljs-keyword">friend</span> std::ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(std::ostream&amp; os, <span class="hljs-type">const</span> Person&amp; person) &#123;<br>        os &lt;&lt; <span class="hljs-string">&quot;Name: &quot;</span> &lt;&lt; person.name &lt;&lt; <span class="hljs-string">&quot;, Age: &quot;</span> &lt;&lt; person.age;<br>        <span class="hljs-keyword">return</span> os;<br>    &#125;<br><br>    <span class="hljs-keyword">friend</span> std::istream&amp; <span class="hljs-keyword">operator</span>&gt;&gt;(std::istream&amp; is, Person&amp; person) &#123;<br>        is &gt;&gt; person.name &gt;&gt; person.age;<br>        <span class="hljs-keyword">return</span> is;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>æ–‡ä»¶æ“ä½œå’Œè¾“å…¥è¾“å‡ºæµæ˜¯C++ä¸­è¿›è¡Œæ•°æ®æŒä¹…åŒ–å­˜å‚¨çš„é‡è¦éƒ¨åˆ†ã€‚é€šè¿‡ä½¿ç”¨ <code>fstream</code> ç±»å’Œè¾“å…¥è¾“å‡ºæµæ“ä½œç¬¦çš„é‡è½½ï¼Œå¯ä»¥å®ç°å¯¹æ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> æ–‡ä»¶æ“ä½œ </tag>
            
            <tag> è¾“å…¥è¾“å‡ºæµ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„STLå®¹å™¨ä¸ç®—æ³•</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84STL%E5%AE%B9%E5%99%A8%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84STL%E5%AE%B9%E5%99%A8%E4%B8%8E%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„STLå®¹å™¨ä¸ç®—æ³•"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„STLå®¹å™¨ä¸ç®—æ³•</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>STLï¼ˆStandard Template Libraryï¼‰æ˜¯C++æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†ä¸°å¯Œçš„å®¹å™¨å’Œç®—æ³•ï¼Œå¯ä»¥æå¤§åœ°æå‡ç¨‹åºå¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. å®¹å™¨</strong></p><p>STLæä¾›äº†å¤šç§å®¹å™¨ï¼Œæ¯ç§å®¹å™¨éƒ½æœ‰ä¸åŒçš„ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯ã€‚</p><ul><li><strong>vectorï¼š</strong> åŠ¨æ€æ•°ç»„ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚</li><li><strong>listï¼š</strong> åŒå‘é“¾è¡¨ï¼Œæ”¯æŒé«˜æ•ˆçš„æ’å…¥å’Œåˆ é™¤ã€‚</li><li><strong>setï¼š</strong> åŸºäºçº¢é»‘æ ‘çš„é›†åˆï¼Œå…ƒç´ æœ‰åºä¸”å”¯ä¸€ã€‚</li><li><strong>mapï¼š</strong> åŸºäºçº¢é»‘æ ‘çš„æ˜ å°„è¡¨ï¼Œé”®å€¼å¯¹å­˜å‚¨ã€‚</li><li><strong>queueï¼š</strong> é˜Ÿåˆ—ï¼Œå…ˆè¿›å…ˆå‡ºã€‚</li><li><strong>stackï¼š</strong> æ ˆï¼Œåè¿›å…ˆå‡ºã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><br>std::vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>std::map&lt;std::string, <span class="hljs-type">int</span>&gt; myMap = &#123;&#123;<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-number">2</span>&#125;&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. ç®—æ³•</strong></p><p>STLæä¾›äº†å¤§é‡çš„ç®—æ³•ï¼Œå¯ä»¥ç”¨äºå¯¹å®¹å™¨è¿›è¡Œå„ç§æ“ä½œã€‚</p><ul><li><strong>æ’åºç®—æ³•ï¼š</strong> <code>std::sort</code>, <code>std::stable_sort</code>, <code>std::partial_sort</code>ç­‰ã€‚</li><li><strong>æŸ¥æ‰¾ç®—æ³•ï¼š</strong> <code>std::find</code>, <code>std::binary_search</code>, <code>std::lower_bound</code>ç­‰ã€‚</li><li><strong>ç®—æœ¯ç®—æ³•ï¼š</strong> <code>std::accumulate</code>, <code>std::inner_product</code>, <code>std::transform</code>ç­‰ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;numeric&gt;</span></span><br><br>std::vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-type">int</span> sum = std::<span class="hljs-built_in">accumulate</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><p><strong>3. è¿­ä»£å™¨</strong></p><p>è¿­ä»£å™¨æ˜¯STLçš„ä¸€ä¸ªå…³é”®æ¦‚å¿µï¼Œå®ƒæä¾›äº†ä¸€ç§è®¿é—®å®¹å™¨å…ƒç´ çš„é€šç”¨æ–¹å¼ã€‚</p><ul><li><strong>æ­£å‘è¿­ä»£å™¨ï¼š</strong> <code>begin()</code>, <code>end()</code></li><li><strong>åå‘è¿­ä»£å™¨ï¼š</strong> <code>rbegin()</code>, <code>rend()</code></li><li><strong>éšæœºè®¿é—®è¿­ä»£å™¨ï¼š</strong> <code>std::vector</code>, <code>std::deque</code>ç­‰æ”¯æŒ</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it = vec.<span class="hljs-built_in">begin</span>(); it != vec.<span class="hljs-built_in">end</span>(); ++it) &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨è¿­ä»£å™¨è®¿é—®å…ƒç´ </span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>STLæä¾›äº†ä¸°å¯Œçš„å®¹å™¨å’Œç®—æ³•ï¼Œå¯ä»¥å¤§å¹…æå‡C++ç¨‹åºçš„å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚ç†Ÿç»ƒä½¿ç”¨STLå¯ä»¥ä½¿ä»£ç æ›´ç®€æ´ã€é«˜æ•ˆä¸”æ˜“äºç»´æŠ¤ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> STLå®¹å™¨ </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„å¤šçº¿ç¨‹ç¼–ç¨‹ä¸å¹¶å‘æ§åˆ¶</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„å¤šçº¿ç¨‹ç¼–ç¨‹ä¸å¹¶å‘æ§åˆ¶"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„å¤šçº¿ç¨‹ç¼–ç¨‹ä¸å¹¶å‘æ§åˆ¶</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>å¤šçº¿ç¨‹ç¼–ç¨‹æ˜¯ç°ä»£è½¯ä»¶å¼€å‘ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå…è®¸ç¨‹åºåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œæé«˜äº†ç¨‹åºçš„æ€§èƒ½å’Œå“åº”èƒ½åŠ›ã€‚ä½†åŒæ—¶ä¹Ÿå¼•å…¥äº†å¹¶å‘æ§åˆ¶çš„é—®é¢˜ï¼Œéœ€è¦è°¨æ…å¤„ç†ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. çº¿ç¨‹çš„åŸºæœ¬æ¦‚å¿µ</strong></p><p>çº¿ç¨‹æ˜¯ç¨‹åºä¸­çš„åŸºæœ¬æ‰§è¡Œå•å…ƒï¼Œå®ƒå¯ä»¥ç‹¬ç«‹æ‰§è¡Œä»»åŠ¡ã€‚C++æ ‡å‡†åº“æä¾›äº† <code>std::thread</code> ç±»æ¥æ”¯æŒçº¿ç¨‹çš„åˆ›å»ºå’Œç®¡ç†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myThreadFunction</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::thread <span class="hljs-title">myThread</span><span class="hljs-params">(myThreadFunction)</span></span>;<br>    myThread.<span class="hljs-built_in">join</span>(); <span class="hljs-comment">// ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2. å¹¶å‘æ§åˆ¶</strong></p><p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œéœ€è¦æ³¨æ„å…±äº«èµ„æºçš„è®¿é—®æ§åˆ¶ï¼Œä»¥é¿å…ç«æ€æ¡ä»¶å’Œæ•°æ®ç«äº‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span><br><br>std::mutex mtx;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">threadSafeFunction</span><span class="hljs-params">()</span> </span>&#123;<br>    mtx.<span class="hljs-built_in">lock</span>(); <span class="hljs-comment">// åŠ é”</span><br>    <span class="hljs-comment">// è®¿é—®å…±äº«èµ„æº</span><br>    mtx.<span class="hljs-built_in">unlock</span>(); <span class="hljs-comment">// è§£é”</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. åŒæ­¥åŸè¯­</strong></p><p>C++æ ‡å‡†åº“æä¾›äº†å¤šç§åŒæ­¥åŸè¯­ï¼Œå¦‚äº’æ–¥é‡ï¼ˆ<code>std::mutex</code>ï¼‰ã€æ¡ä»¶å˜é‡ï¼ˆ<code>std::condition_variable</code>ï¼‰ç­‰ï¼Œç”¨äºå®ç°çº¿ç¨‹é—´çš„åŒæ­¥å’Œé€šä¿¡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;condition_variable&gt;</span></span><br><br>std::mutex mtx;<br>std::condition_variable cv;<br><span class="hljs-type">bool</span> dataReady = <span class="hljs-literal">false</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">producer</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// ç”Ÿäº§æ•°æ®</span><br>    <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;<br>    dataReady = <span class="hljs-literal">true</span>;<br>    cv.<span class="hljs-built_in">notify_one</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">consumer</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;<br>    cv.<span class="hljs-built_in">wait</span>(lock, []&#123; <span class="hljs-keyword">return</span> dataReady; &#125;);<br>    <span class="hljs-comment">// ä½¿ç”¨æ•°æ®</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4. å¼‚æ­¥ä»»åŠ¡</strong></p><p>C++11å¼•å…¥äº† <code>std::async</code> æ¥æ”¯æŒå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œï¼Œå®ƒè¿”å›ä¸€ä¸ª <code>std::future</code> å¯¹è±¡ï¼Œå¯ä»¥ç”¨äºè·å–ä»»åŠ¡çš„ç»“æœã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;future&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">myTask</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span><br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::future&lt;<span class="hljs-type">int</span>&gt; fut = std::<span class="hljs-built_in">async</span>(myTask);<br>    <span class="hljs-type">int</span> result = fut.<span class="hljs-built_in">get</span>(); <span class="hljs-comment">// è·å–ä»»åŠ¡ç»“æœ</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>å¤šçº¿ç¨‹ç¼–ç¨‹æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„é‡è¦æŠ€èƒ½ï¼Œå®ƒå¯ä»¥æé«˜ç¨‹åºçš„æ€§èƒ½å’Œå“åº”èƒ½åŠ›ã€‚ç„¶è€Œï¼ŒåŒæ—¶ä¹Ÿå¼•å…¥äº†å¹¶å‘æ§åˆ¶çš„é—®é¢˜ï¼Œéœ€è¦è°¨æ…å¤„ç†ã€‚ä½¿ç”¨äº’æ–¥é‡ã€æ¡ä»¶å˜é‡ç­‰åŒæ­¥åŸè¯­å¯ä»¥ä¿è¯å…±äº«èµ„æºçš„å®‰å…¨è®¿é—®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å¤šçº¿ç¨‹ç¼–ç¨‹ </tag>
            
            <tag> å¹¶å‘æ§åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„æ¨¡æ¿å…ƒç¼–ç¨‹å’Œæ³›å‹ç¼–ç¨‹</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%85%83%E7%BC%96%E7%A8%8B%E5%92%8C%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%85%83%E7%BC%96%E7%A8%8B%E5%92%8C%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„æ¨¡æ¿å…ƒç¼–ç¨‹å’Œæ³›å‹ç¼–ç¨‹"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„æ¨¡æ¿å…ƒç¼–ç¨‹å’Œæ³›å‹ç¼–ç¨‹</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate Metaprogramming, TMPï¼‰å’Œæ³›å‹ç¼–ç¨‹ï¼ˆGeneric Programmingï¼‰æ˜¯C++ä¸­å¼ºå¤§çš„ç¼–ç¨‹æŠ€å·§ï¼Œå®ƒä»¬å…è®¸åœ¨ç¼–è¯‘æ—¶è¿›è¡Œé«˜åº¦æŠ½è±¡å’Œä»£ç ç”Ÿæˆã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. æ¨¡æ¿åŸºç¡€</strong></p><p>æ¨¡æ¿æ˜¯ä¸€ç§é€šç”¨çš„ä»£ç å®¹å™¨ï¼Œå¯ä»¥ç”¨äºç”Ÿæˆç‰¹å®šç±»å‹æˆ–å€¼çš„ä»£ç ã€‚å®ƒå¯ä»¥ç”¨äºå‡½æ•°ã€ç±»å’Œå˜é‡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-function">T <span class="hljs-title">add</span><span class="hljs-params">(T a, T b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2. æ¨¡æ¿ç‰¹åŒ–</strong></p><p>æ¨¡æ¿ç‰¹åŒ–å…è®¸ä¸ºç‰¹å®šçš„ç±»å‹æä¾›å®šåˆ¶çš„å®ç°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;&gt;<br><span class="hljs-type">int</span> <span class="hljs-built_in">add</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b) &#123;<br>    <span class="hljs-keyword">return</span> a + b + <span class="hljs-number">10</span>; <span class="hljs-comment">// ä¸ºæ•´æ•°ç±»å‹æä¾›ç‰¹æ®Šå®ç°</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. æ¨¡æ¿å…ƒç¼–ç¨‹</strong></p><p>æ¨¡æ¿å…ƒç¼–ç¨‹æ˜¯ä¸€ç§åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆä»£ç çš„æŠ€æœ¯ï¼Œé€šè¿‡é€’å½’å±•å¼€æ¨¡æ¿å®ä¾‹æ¥å®ç°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-type">int</span> N&gt;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Factorial</span> &#123;<br>    <span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">int</span> value = N * Factorial&lt;N - <span class="hljs-number">1</span>&gt;::value;<br>&#125;;<br><br><span class="hljs-keyword">template</span> &lt;&gt;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Factorial</span>&lt;<span class="hljs-number">0</span>&gt; &#123;<br>    <span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">int</span> value = <span class="hljs-number">1</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>4. å¯å˜æ¨¡æ¿å‚æ•°</strong></p><p>C++11å¼•å…¥äº†å¯å˜æ¨¡æ¿å‚æ•°ï¼Œå…è®¸æ¨¡æ¿æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span>... Args&gt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(Args... args)</span> </span>&#123;<br>    (cout &lt;&lt; ... &lt;&lt; args) &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>5. æ³›å‹ç®—æ³•</strong></p><p>STLï¼ˆStandard Template Libraryï¼‰æä¾›äº†è®¸å¤šæ³›å‹ç®—æ³•ï¼Œå®ƒä»¬å¯ä»¥ç”¨äºä¸åŒç±»å‹çš„å®¹å™¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>std::for_each(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), [](<span class="hljs-type">int</span>&amp; n)&#123; cout &lt;&lt; n &lt;&lt; <span class="hljs-string">&quot; &quot;</span>; &#125;);<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>æ¨¡æ¿å…ƒç¼–ç¨‹å’Œæ³›å‹ç¼–ç¨‹æ˜¯C++ä¸­çš„é«˜çº§æŠ€æœ¯ï¼Œå®ƒä»¬å…è®¸åœ¨ç¼–è¯‘æ—¶è¿›è¡Œé«˜åº¦æŠ½è±¡å’Œä»£ç ç”Ÿæˆã€‚æ¨¡æ¿æä¾›äº†ä¸€ç§é€šç”¨çš„ä»£ç å®¹å™¨ï¼Œä½¿å¾—ä»£ç å¯ä»¥é€‚ç”¨äºä¸åŒçš„ç±»å‹å’Œå€¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> æ¨¡æ¿å…ƒç¼–ç¨‹ </tag>
            
            <tag> æ³›å‹ç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„æ™ºèƒ½æŒ‡é’ˆå’Œå†…å­˜ç®¡ç†</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E5%92%8C%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E5%92%8C%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„æ™ºèƒ½æŒ‡é’ˆå’Œå†…å­˜ç®¡ç†"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„æ™ºèƒ½æŒ‡é’ˆå’Œå†…å­˜ç®¡ç†</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>åœ¨C++ä¸­ï¼Œæ‰‹åŠ¨ç®¡ç†å†…å­˜æ˜¯ä¸€ä¸ªå®¹æ˜“å‡ºé”™ä¸”å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼çš„ä»»åŠ¡ã€‚æ™ºèƒ½æŒ‡é’ˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„æŒ‡é’ˆç±»ï¼Œå¯ä»¥è‡ªåŠ¨ç®¡ç†å†…å­˜ç”Ÿå‘½å‘¨æœŸï¼Œå¤§å¤§å‡å°‘äº†å†…å­˜ç®¡ç†çš„å¤æ‚æ€§ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. åŸå§‹æŒ‡é’ˆ vs. æ™ºèƒ½æŒ‡é’ˆ</strong></p><p>åŸå§‹æŒ‡é’ˆæ˜¯ç›´æ¥æŒ‡å‘å†…å­˜åœ°å€çš„æŒ‡é’ˆï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span>* rawPtr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">5</span>);<br><span class="hljs-comment">// ä½¿ç”¨ rawPtr</span><br><span class="hljs-keyword">delete</span> rawPtr; <span class="hljs-comment">// æ‰‹åŠ¨é‡Šæ”¾å†…å­˜</span><br></code></pre></td></tr></table></figure><p>æ™ºèƒ½æŒ‡é’ˆæ˜¯ä¸€ä¸ªåŒ…è£…äº†åŸå§‹æŒ‡é’ˆçš„ç±»ï¼Œå®ƒä¼šåœ¨è¶…å‡ºä½œç”¨åŸŸæ—¶è‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::unique_ptr&lt;<span class="hljs-type">int</span>&gt; smartPtr = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">5</span>);<br><span class="hljs-comment">// ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜</span><br></code></pre></td></tr></table></figure><p><strong>2. unique_ptr</strong></p><p><code>std::unique_ptr</code> æ˜¯ä¸€ä¸ªç‹¬å æ‰€æœ‰æƒçš„æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒç¡®ä¿åªæœ‰ä¸€ä¸ªæŒ‡é’ˆå¯ä»¥æŒ‡å‘ç‰¹å®šçš„èµ„æºã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::unique_ptr&lt;<span class="hljs-type">int</span>&gt; uniquePtr = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">10</span>);<br></code></pre></td></tr></table></figure><p><strong>3. shared_ptr</strong></p><p><code>std::shared_ptr</code> å…è®¸å¤šä¸ªæŒ‡é’ˆå…±äº«å¯¹åŒä¸€èµ„æºçš„æ‰€æœ‰æƒã€‚å®ƒä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥è·Ÿè¸ªèµ„æºçš„å¼•ç”¨æ¬¡æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::shared_ptr&lt;<span class="hljs-type">int</span>&gt; sharedPtr1 = std::<span class="hljs-built_in">make_shared</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">20</span>);<br>std::shared_ptr&lt;<span class="hljs-type">int</span>&gt; sharedPtr2 = sharedPtr1; <span class="hljs-comment">// å…±äº«æ‰€æœ‰æƒ</span><br></code></pre></td></tr></table></figure><p><strong>4. weak_ptr</strong></p><p><code>std::weak_ptr</code> æ˜¯ <code>std::shared_ptr</code> çš„å¼±å¼•ç”¨ï¼Œå®ƒä¸ä¼šå¢åŠ å¼•ç”¨è®¡æ•°ã€‚å®ƒé€šå¸¸ç”¨äºé¿å…å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::shared_ptr&lt;<span class="hljs-type">int</span>&gt; sharedPtr = std::<span class="hljs-built_in">make_shared</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">30</span>);<br>std::weak_ptr&lt;<span class="hljs-type">int</span>&gt; weakPtr = sharedPtr;<br></code></pre></td></tr></table></figure><p><strong>5. RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰</strong></p><p>RAII æ˜¯ä¸€ç§C++ç¼–ç¨‹æŠ€å·§ï¼Œå®ƒåˆ©ç”¨äº†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ¥ç®¡ç†èµ„æºã€‚æ™ºèƒ½æŒ‡é’ˆæ˜¯RAIIçš„ä¸€ä¸ªå…¸å‹åº”ç”¨ã€‚</p><p><strong>ç»“è®ºï¼š</strong></p><p>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå¯ä»¥æå¤§åœ°ç®€åŒ–C++ä¸­çš„å†…å­˜ç®¡ç†ï¼Œé¿å…å†…å­˜æ³„æ¼å’Œæ‚¬ç©ºæŒ‡é’ˆç­‰é—®é¢˜ã€‚<code>std::unique_ptr</code> ç”¨äºç‹¬å èµ„æºï¼Œ<code>std::shared_ptr</code> ç”¨äºå…±äº«èµ„æºï¼Œè€Œ <code>std::weak_ptr</code> åˆ™ç”¨äºå¼±å¼•ç”¨ï¼Œé¿å…å¾ªç¯å¼•ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å†…å­˜ç®¡ç† </tag>
            
            <tag> æ™ºèƒ½æŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€</title>
      <link href="/2023/09/17/C-%E4%B8%AD%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/09/17/C-%E4%B8%AD%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‡é¢˜ï¼šC-ä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€"><strong>æ ‡é¢˜ï¼šC++ä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€</strong></h2><p><strong>ç®€ä»‹ï¼š</strong>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-Oriented Programming, OOPï¼‰æ˜¯è½¯ä»¶å¼€å‘ä¸­ä¸€ä¸ªé‡è¦çš„ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒä»¥å¯¹è±¡ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡å°è£…ã€ç»§æ‰¿å’Œå¤šæ€ç­‰æ¦‚å¿µæ¥ç»„ç»‡ä»£ç ï¼Œæé«˜äº†ä»£ç çš„é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p><strong>æ­£æ–‡ï¼š</strong></p><p><strong>1. ç±»ä¸å¯¹è±¡</strong></p><p>åœ¨C++ä¸­ï¼Œç±»æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºç¡€ã€‚ä¸€ä¸ªç±»æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œç”¨äºåˆ›å»ºå…·æœ‰ç›¸ä¼¼å±æ€§å’Œè¡Œä¸ºçš„å¯¹è±¡ã€‚å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹ï¼Œå®ƒåŒ…å«äº†ç±»å®šä¹‰çš„æ•°æ®å’Œå‡½æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-comment">// æˆå‘˜å˜é‡</span><br>    string name;<br>    <span class="hljs-type">int</span> age;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// æ„é€ å‡½æ•°</span><br>    <span class="hljs-built_in">Person</span>(string n, <span class="hljs-type">int</span> a) : <span class="hljs-built_in">name</span>(n), <span class="hljs-built_in">age</span>(a) &#123;&#125;<br><br>    <span class="hljs-comment">// æˆå‘˜å‡½æ•°</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">introduce</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘å«&quot;</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot;ï¼Œä»Šå¹´&quot;</span> &lt;&lt; age &lt;&lt; <span class="hljs-string">&quot;å²ã€‚&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>2. å°è£…</strong></p><p>å°è£…æ˜¯OOPçš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå®ƒå°†æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•æ†ç»‘åœ¨ä¸€èµ·ã€‚ç±»é€šè¿‡å°†æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°å®šä¹‰åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…æ¥å®ç°å°è£…ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BankAccount</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">double</span> balance;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deposit</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span> </span>&#123;<br>        balance += amount;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">withdraw</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (amount &lt;= balance) &#123;<br>            balance -= amount;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;ä½™é¢ä¸è¶³ã€‚&quot;</span> &lt;&lt; endl;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>3. ç»§æ‰¿</strong></p><p>ç»§æ‰¿å…è®¸ä¸€ä¸ªç±»ï¼ˆå­ç±»ï¼‰ç»§æ‰¿å¦ä¸€ä¸ªç±»ï¼ˆçˆ¶ç±»ï¼‰çš„å±æ€§å’Œè¡Œä¸ºã€‚å­ç±»å¯ä»¥æ·»åŠ æ–°çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ï¼Œä¹Ÿå¯ä»¥é‡å†™çˆ¶ç±»çš„æˆå‘˜å‡½æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> : <span class="hljs-keyword">public</span> Person &#123;<br><span class="hljs-keyword">private</span>:<br>    string major;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Student</span>(string n, <span class="hljs-type">int</span> a, string m) : <span class="hljs-built_in">Person</span>(n, a), <span class="hljs-built_in">major</span>(m) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">introduce</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘å«&quot;</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot;ï¼Œä»Šå¹´&quot;</span> &lt;&lt; age &lt;&lt; <span class="hljs-string">&quot;å²ï¼Œä¸“ä¸šæ˜¯&quot;</span> &lt;&lt; major &lt;&lt; <span class="hljs-string">&quot;ã€‚&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>4. å¤šæ€</strong></p><p>å¤šæ€å…è®¸ä½¿ç”¨ç›¸åŒçš„æ¥å£æ¥å¤„ç†ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥é€šè¿‡è™šå‡½æ•°ï¼ˆvirtual functionï¼‰å®ç°å¤šæ€ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ç»˜åˆ¶å½¢çŠ¶ã€‚&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Shape &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ç»˜åˆ¶åœ†å½¢ã€‚&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><p>é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯C++ä¸­çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ä¸€ç§ç»“æ„åŒ–å’Œçµæ´»çš„æ–¹å¼æ¥ç»„ç»‡å’Œç®¡ç†ä»£ç ã€‚é€šè¿‡å°è£…ã€ç»§æ‰¿å’Œå¤šæ€ç­‰æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºæ¨¡å—åŒ–ã€å¯æ‰©å±•å’Œæ˜“ç»´æŠ¤çš„ç¨‹åºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> é¢å‘å¯¹è±¡åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„å¤šæ€è®²è§£ä¸ç¤ºä¾‹</title>
      <link href="/2023/02/23/C-%E4%B8%AD%E7%9A%84%E5%A4%9A%E6%80%81%E8%AE%B2%E8%A7%A3%E4%B8%8E%E7%A4%BA%E4%BE%8B/"/>
      <url>/2023/02/23/C-%E4%B8%AD%E7%9A%84%E5%A4%9A%E6%80%81%E8%AE%B2%E8%A7%A3%E4%B8%8E%E7%A4%BA%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<h1>C++ä¸­çš„å¤šæ€è®²è§£ä¸ç¤ºä¾‹</h1><p>åœ¨ C++ ä¸­ï¼Œå¤šæ€æ˜¯æŒ‡åŒä¸€ä¸ªå‡½æ•°åå¯ä»¥å…·æœ‰ä¸åŒçš„å®ç°æ–¹å¼å’Œè¡Œä¸ºçš„ç‰¹æ€§ã€‚è¿™æ„å‘³ç€ï¼ŒåŒä¸€ä¸ªå‡½æ•°åå¯ä»¥åœ¨ä¸åŒçš„æƒ…å†µä¸‹å…·æœ‰ä¸åŒçš„å«ä¹‰ï¼Œä»¥å®ç°æ›´çµæ´»çš„ç¼–ç¨‹ã€‚</p><p>C++ ä¸­çš„å¤šæ€åˆ†ä¸ºé™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€ä¸¤ç§å½¢å¼ã€‚é™æ€å¤šæ€åˆç§°ä¸ºå‡½æ•°é‡è½½ï¼ˆFunction Overloadingï¼‰ï¼Œé€šè¿‡åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…å£°æ˜å…·æœ‰ç›¸åŒå‡½æ•°åä½†å‚æ•°åˆ—è¡¨ä¸åŒçš„å¤šä¸ªå‡½æ•°ï¼Œå®ç°äº†åŒä¸€ä¸ªå‡½æ•°åå¯ä»¥å…·æœ‰å¤šç§ä¸åŒçš„å®ç°æ–¹å¼ã€‚</p><p>åŠ¨æ€å¤šæ€åˆ™æ˜¯é€šè¿‡è™šå‡½æ•°ï¼ˆVirtual Functionï¼‰å’Œç»§æ‰¿ï¼ˆInheritanceï¼‰æ¥å®ç°çš„ã€‚åœ¨çˆ¶ç±»ä¸­å®šä¹‰è™šå‡½æ•°ï¼Œåœ¨å­ç±»ä¸­è¦†ç›–ï¼ˆOverrideï¼‰è¿™ä¸ªè™šå‡½æ•°ï¼Œä»è€Œå®ç°äº†åŒä¸€ä¸ªå‡½æ•°ååœ¨ä¸åŒå­ç±»å¯¹è±¡ä¸Šå…·æœ‰ä¸åŒçš„è¡Œä¸ºã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜åŠ¨æ€å¤šæ€çš„æ¦‚å¿µï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> &#123;<br>   <span class="hljs-keyword">protected</span>:<br>      <span class="hljs-type">int</span> width, height;<br><br>   <span class="hljs-keyword">public</span>:<br>      <span class="hljs-built_in">Shape</span>(<span class="hljs-type">int</span> a = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> b = <span class="hljs-number">0</span>) &#123;<br>         width = a;<br>         height = b;<br>      &#125;<br><br>      <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">int</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> </span>&#123;<br>         cout &lt;&lt; <span class="hljs-string">&quot;Parent class area :&quot;</span> &lt;&lt; endl;<br>         <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>      &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>: <span class="hljs-keyword">public</span> Shape &#123;<br>   <span class="hljs-keyword">public</span>:<br>      <span class="hljs-built_in">Rectangle</span>(<span class="hljs-type">int</span> a = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> b = <span class="hljs-number">0</span>):<span class="hljs-built_in">Shape</span>(a, b) &#123; &#125;<br><br>      <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">area</span> <span class="hljs-params">()</span> </span>&#123;<br>         cout &lt;&lt; <span class="hljs-string">&quot;Rectangle class area :&quot;</span> &lt;&lt; endl;<br>         <span class="hljs-keyword">return</span> (width * height);<br>      &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Triangle</span>: <span class="hljs-keyword">public</span> Shape &#123;<br>   <span class="hljs-keyword">public</span>:<br>      <span class="hljs-built_in">Triangle</span>(<span class="hljs-type">int</span> a = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> b = <span class="hljs-number">0</span>):<span class="hljs-built_in">Shape</span>(a, b) &#123; &#125;<br><br>      <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">area</span> <span class="hljs-params">()</span> </span>&#123;<br>         cout &lt;&lt; <span class="hljs-string">&quot;Triangle class area :&quot;</span> &lt;&lt; endl;<br>         <span class="hljs-keyword">return</span> (width * height / <span class="hljs-number">2</span>);<br>      &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>   Shape *shape;<br>   <span class="hljs-function">Rectangle <span class="hljs-title">rec</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">7</span>)</span></span>;<br>   <span class="hljs-function">Triangle  <span class="hljs-title">tri</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">5</span>)</span></span>;<br><br>   <span class="hljs-comment">// çŸ©å½¢å¯¹è±¡</span><br>   shape = &amp;rec;<br>   <span class="hljs-comment">// è°ƒç”¨çŸ©å½¢çš„æ±‚é¢ç§¯å‡½æ•° area</span><br>   shape-&gt;<span class="hljs-built_in">area</span>();<br><br>   <span class="hljs-comment">// ä¸‰è§’å½¢å¯¹è±¡</span><br>   shape = &amp;tri;<br>   <span class="hljs-comment">// è°ƒç”¨ä¸‰è§’å½¢çš„æ±‚é¢ç§¯å‡½æ•° area</span><br>   shape-&gt;<span class="hljs-built_in">area</span>();<br><br>   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Shape ç±»ä½œä¸ºçˆ¶ç±»ï¼Œç„¶åå®šä¹‰äº† Rectangle å’Œ Triangle ç±»ä½œä¸ºå­ç±»ã€‚åœ¨ Shape ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªè™šå‡½æ•° areaï¼ŒRectangle å’Œ Triangle ç±»éƒ½é‡å†™äº†è¿™ä¸ªè™šå‡½æ•°å¹¶æä¾›äº†ä¸åŒçš„å®ç°ã€‚</p><p>åœ¨ main å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæŒ‡å‘ Shape ç±»çš„æŒ‡é’ˆï¼Œç„¶åå°†å®ƒåˆ†åˆ«æŒ‡å‘ Rectangle å’Œ Triangle ç±»çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒä»¬çš„ area å‡½æ•°ã€‚ç”±äº area å‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶ä¼šæ ¹æ®æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ç±»å‹æ¥ç¡®å®šå…·ä½“è°ƒç”¨å“ªä¸ªå­ç±»çš„ area å‡½æ•°ã€‚è¿™å°±å®ç°äº†å¤šæ€ã€‚</p><p>é™æ€å¤šæ€å¯ä»¥é€šè¿‡å‡½æ•°é‡è½½å®ç°ã€‚å‡½æ•°é‡è½½æŒ‡çš„æ˜¯åœ¨åŒä¸€ä½œç”¨åŸŸå†…ï¼Œå‡½æ•°åç›¸åŒä½†å‚æ•°åˆ—è¡¨ä¸åŒçš„å‡½æ•°ã€‚ç¼–è¯‘å™¨æ ¹æ®ä¼ å…¥çš„å‚æ•°ç±»å‹å’Œæ•°é‡ç¡®å®šä½¿ç”¨å“ªä¸ªå‡½æ•°ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Printing an integer: &quot;</span> &lt;&lt; x &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span> </span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Printing a double: &quot;</span> &lt;&lt; x &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-number">42</span>);<br>    <span class="hljs-built_in">print</span>(<span class="hljs-number">3.14</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªåä¸º<code>print</code>çš„å‡½æ•°ï¼Œåˆ†åˆ«æ¥å—<code>int</code>å’Œ<code>double</code>ç±»å‹çš„å‚æ•°ã€‚åœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«è°ƒç”¨äº†è¿™ä¸¤ä¸ªå‡½æ•°å¹¶ä¼ å…¥äº†ä¸åŒç±»å‹çš„å‚æ•°ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®å‚æ•°ç±»å‹çš„ä¸åŒè‡ªåŠ¨é€‰æ‹©ä½¿ç”¨å¯¹åº”çš„å‡½æ•°ã€‚è¿™å°±æ˜¯é™æ€å¤šæ€çš„ä¸€ä¸ªä¾‹å­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> c++ä¸­çš„é‚£äº›äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å¤šæ€çš„æ¦‚å¿µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rustå­¦ä¹ ç¬”è®°ï¼ˆç»­ï¼‰ï¼šæ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/2023/02/23/Rust%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E7%BB%AD%EF%BC%89%EF%BC%9A%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94/"/>
      <url>/2023/02/23/Rust%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E7%BB%AD%EF%BC%89%EF%BC%9A%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94/</url>
      
        <content type="html"><![CDATA[<h1>Rustå­¦ä¹ ç¬”è®°ï¼ˆç»­ï¼‰ï¼šæ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸ</h1><blockquote><p>Rust ä¸­çš„æ‰€æœ‰æƒå’Œå¼•ç”¨æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</p></blockquote><hr><p>åœ¨ Rust ä¸­ï¼Œæ‰€æœ‰æƒå’Œå¼•ç”¨æ˜¯ Rust è¯­è¨€æœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ä¿éšœ Rust å†…å­˜å®‰å…¨çš„é‡è¦æœºåˆ¶ã€‚æ‰€æœ‰æƒå’Œå¼•ç”¨çš„æ¦‚å¿µï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºåœ¨ Rust ä¸­ç®¡ç†å†…å­˜çš„æ–¹å¼ã€‚</p><p>åœ¨ Rust ä¸­ï¼Œæ‰€æœ‰å€¼éƒ½æœ‰ä¸€ä¸ªè¢«ç§°ä¸ºæ‰€æœ‰è€…ï¼ˆownerï¼‰çš„å˜é‡ã€‚å½“è¿™ä¸ªå˜é‡ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œè¿™ä¸ªå€¼ä¹Ÿä¼šè¢«é”€æ¯ã€‚è¿™ç§æ–¹å¼è¢«ç§°ä¸ºæ‰€æœ‰æƒï¼ˆownershipï¼‰ï¼Œå®ƒç¡®ä¿äº†åœ¨ç¼–è¯‘æ—¶æ²¡æœ‰é‡æŒ‡é’ˆï¼ˆdangling pointersï¼‰ã€äºŒæ¬¡é‡Šæ”¾ï¼ˆdouble freeï¼‰ç­‰å†…å­˜å®‰å…¨é—®é¢˜ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>); <span class="hljs-comment">// s æ˜¯ String ç±»å‹çš„å˜é‡ï¼Œä¹Ÿæ˜¯æ‰€æœ‰è€…</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s); <span class="hljs-comment">// è¾“å‡º hello</span><br>&#125; <span class="hljs-comment">// è¿™é‡Œ s ç¦»å¼€ä½œç”¨åŸŸï¼ŒString ç±»å‹çš„å€¼ä¹Ÿä¼šè¢«é”€æ¯</span><br></code></pre></td></tr></table></figure><p>åœ¨ Rust ä¸­ï¼Œå˜é‡å¯ä»¥é€šè¿‡å¼•ç”¨ï¼ˆreferenceï¼‰æ¥è®¿é—®å€¼ï¼Œè€Œä¸è·å–å…¶æ‰€æœ‰æƒã€‚å¼•ç”¨æ˜¯æŒ‡å‘å€¼çš„æŒ‡é’ˆï¼Œä½†æ˜¯å®ƒä¸ä¼šæ‹¥æœ‰å€¼ï¼Œè€Œæ˜¯åªå€Ÿç”¨ï¼ˆborrowï¼‰å€¼ã€‚å€Ÿç”¨åˆ†ä¸ºå¯å˜å€Ÿç”¨å’Œä¸å¯å˜å€Ÿç”¨ä¸¤ç§ã€‚å¯å˜å€Ÿç”¨ï¼ˆmutable borrowï¼‰æ˜¯å¯¹å€¼è¿›è¡Œä¿®æ”¹çš„å€Ÿç”¨ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå¯å˜å€Ÿç”¨ï¼Œä¸å¯å˜å€Ÿç”¨ï¼ˆimmutable borrowï¼‰åˆ™å¯ä»¥æœ‰å¤šä¸ªã€‚æ¯”å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">len</span> = <span class="hljs-title function_ invoke__">calculate_length</span>(&amp;s); <span class="hljs-comment">// ä¼ é€’ä¸€ä¸ªå¯¹ s çš„å¼•ç”¨</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The length of &#x27;&#123;&#125;&#x27; is &#123;&#125;.&quot;</span>, s, len); <span class="hljs-comment">// è¿™é‡Œå†æ¬¡ä½¿ç”¨ sï¼Œä¸éœ€è¦è·å–æ‰€æœ‰æƒ</span><br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">calculate_length</span>(s: &amp;<span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> &#123; <span class="hljs-comment">// å‡½æ•°æ¥æ”¶ä¸€ä¸ª String ç±»å‹çš„å¼•ç”¨</span><br>    s.<span class="hljs-title function_ invoke__">len</span>()<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œ<code>calculate_length</code> å‡½æ•°æ¥æ”¶ä¸€ä¸ª <code>String</code> ç±»å‹çš„å¼•ç”¨ <code>s</code>ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ç”¨ <code>&amp;s</code> æ¥ä¼ é€’ <code>s</code> çš„å¼•ç”¨ï¼Œå¹¶è·å–å…¶é•¿åº¦ï¼Œæœ€ç»ˆå†æ¬¡ä½¿ç”¨ <code>s</code> è¾“å‡ºå­—ç¬¦ä¸²ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<code>main</code> å‡½æ•°å¹¶æ²¡æœ‰è·å– <code>s</code> çš„æ‰€æœ‰æƒï¼Œè€Œæ˜¯é€šè¿‡å¼•ç”¨çš„æ–¹å¼ä½¿ç”¨å®ƒï¼Œè¿™ä¹Ÿä¿è¯äº†å†…å­˜çš„å®‰å…¨æ€§ã€‚</p><p>æ€»ä¹‹ï¼Œåœ¨ Rust ä¸­ï¼Œæ‰€æœ‰æƒå’Œå¼•ç”¨æœºåˆ¶æ˜¯ Rust è¯­è¨€ç‹¬ç‰¹çš„ç‰¹æ€§ï¼Œå®ƒä»¬èƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶ä¿éšœå†…å­˜å®‰å…¨æ€§ï¼Œä½¿å¾— Rust è¯­è¨€åœ¨ç³»ç»Ÿç¼–ç¨‹å’ŒåµŒå…¥å¼é¢†åŸŸæœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚</p><hr><blockquote><p>ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿåœ¨ Rust ä¸­å¦‚ä½•æ³¨æ˜ç”Ÿå‘½å‘¨æœŸï¼Ÿ</p></blockquote><hr><p>ç”Ÿå‘½å‘¨æœŸï¼ˆlifetimeï¼‰æ˜¯ Rust ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç”¨äºæè¿°å˜é‡ã€å¼•ç”¨ç­‰çš„ç”Ÿå­˜æœŸã€‚åœ¨ Rust ä¸­ï¼Œæ¯ä¸ªå˜é‡éƒ½æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå®ƒè¡¨ç¤ºè¿™ä¸ªå˜é‡çš„æœ‰æ•ˆèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯åœ¨ä½•æ—¶å¯ä»¥è¢«è®¿é—®ï¼Œåœ¨ä½•æ—¶åº”è¯¥è¢«é”€æ¯ã€‚</p><p>Rust çš„ç”Ÿå‘½å‘¨æœŸæ³¨è§£ç”¨äºå£°æ˜å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿå¯ä»¥ç”¨äºæ³›å‹ç±»å‹ã€‚ç”Ÿå‘½å‘¨æœŸæ³¨è§£ä½¿ç”¨å•å¼•å· <code>'</code> æ¥æ ‡è¯†ï¼Œå¦‚ <code>'a</code>ã€<code>'b</code> ç­‰ã€‚æ³¨è§£çš„ä½ç½®é€šå¸¸åœ¨å˜é‡åä¹‹åï¼Œä»¥è¡¨ç¤ºè¿™ä¸ªå˜é‡æ‰€å¼•ç”¨çš„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo</span>&lt;<span class="hljs-symbol">&#x27;a</span>&gt;(x: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">i32</span>, y: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">i32</span> &#123;<br>    <span class="hljs-keyword">if</span> x &gt; y &#123;<br>        x<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        y<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>foo</code> å‡½æ•°æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‚æ•° <code>'a</code>ï¼Œè¡¨ç¤ºè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥å’Œå‚æ•° <code>x</code> å’Œ <code>y</code> çš„ç”Ÿå‘½å‘¨æœŸä¸­æœ€å°çš„é‚£ä¸ªç›¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿”å›çš„å¼•ç”¨å¿…é¡»æ»¡è¶³å®ƒæ‰€æŒ‡å‘çš„å¯¹è±¡åœ¨ <code>x</code> å’Œ <code>y</code> ä¸­çš„æœ€å°ç”Ÿå‘½å‘¨æœŸå†…éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚</p><p>ç”Ÿå‘½å‘¨æœŸæ³¨è§£é€šå¸¸åœ¨å‡½æ•°ç­¾åä¸­ä½¿ç”¨ï¼Œä»¥å¸®åŠ©ç¼–è¯‘å™¨æ¨æ–­å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ³¨è§£å¯ä»¥é¿å…ä¸€äº›å¸¸è§çš„å†…å­˜é”™è¯¯ï¼Œä¾‹å¦‚æ‚¬å‚æŒ‡é’ˆï¼ˆdangling pointerï¼‰å’Œå¼•ç”¨éæ³•å†…å­˜çš„æƒ…å†µã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”Ÿå‘½å‘¨æœŸæ³¨è§£å¹¶ä¸ä¼šæ”¹å˜å˜é‡æœ¬èº«çš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒåªæ˜¯ç”¨äºå¸®åŠ©ç¼–è¯‘å™¨åˆ†æå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨ Rust ä¸­ï¼Œå˜é‡çš„ç”Ÿå‘½å‘¨æœŸç”±ä½œç”¨åŸŸå’Œæ‰€æœ‰æƒè§„åˆ™æ¥å†³å®šï¼Œè¿™æ˜¯ Rust çš„å¦ä¸€ä¸ªæ ¸å¿ƒç‰¹æ€§ã€‚</p><hr><blockquote><p>å¦‚ä½•é¿å…æ‰€æœ‰æƒé—®é¢˜ï¼Ÿå¯ä»¥ç»™å‡ºä¸€ä¸ªä¾‹å­è¯´æ˜å—ï¼Ÿ</p></blockquote><hr><p>é¿å…æ‰€æœ‰æƒé—®é¢˜çš„ä¸€ç§å¸¸è§æ–¹æ³•æ˜¯ä½¿ç”¨å¼•ç”¨ï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨ä¸å¯å˜å¼•ç”¨ã€‚é€šè¿‡ä½¿ç”¨å¼•ç”¨ï¼Œå¯ä»¥ä¼ é€’å˜é‡çš„å€¼è€Œä¸æ˜¯æ‹¥æœ‰å®ƒçš„æ‰€æœ‰æƒï¼Œä»è€Œé¿å…æ½œåœ¨çš„æ‰€æœ‰æƒé—®é¢˜ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ Rust ä¸­ï¼Œè€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">len</span> = <span class="hljs-title function_ invoke__">calculate_length</span>(s);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The length of the string is &#123;&#125;.&quot;</span>, len);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">calculate_length</span>(s: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> &#123;<br>    s.<span class="hljs-title function_ invoke__">len</span>()<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ®µä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸º <code>s</code> çš„ <code>String</code> ç±»å‹å˜é‡ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ <code>calculate_length</code> å‡½æ•°ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œçš„é—®é¢˜æ˜¯ <code>s</code> çš„æ‰€æœ‰æƒè¢«ä¼ é€’ç»™äº†å‡½æ•°ï¼Œå› æ­¤åœ¨å‡½æ•°ä¸­ä¸èƒ½å†ä½¿ç”¨ <code>s</code> å˜é‡ã€‚å› æ­¤ï¼Œå½“å°è¯•è°ƒç”¨ <code>s.len()</code> æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</p><p>è¦é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°† <code>calculate_length</code> å‡½æ•°çš„å‚æ•°æ”¹ä¸ºä¸€ä¸ªä¸å¯å˜å¼•ç”¨ã€‚è¿™æ ·ï¼Œå¯ä»¥ä¼ é€’å˜é‡çš„å¼•ç”¨è€Œä¸æ˜¯å®ƒçš„æ‰€æœ‰æƒï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">len</span> = <span class="hljs-title function_ invoke__">calculate_length</span>(&amp;s);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The length of the string is &#123;&#125;.&quot;</span>, len);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">calculate_length</span>(s: &amp;<span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> &#123;<br>    s.<span class="hljs-title function_ invoke__">len</span>()<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œ<code>calculate_length</code> å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªæŒ‡å‘ <code>String</code> ç±»å‹å˜é‡çš„ä¸å¯å˜å¼•ç”¨ã€‚ç”±äºè¯¥å‡½æ•°æ²¡æœ‰è·å¾— <code>s</code> çš„æ‰€æœ‰æƒï¼Œå› æ­¤å¯ä»¥å®‰å…¨åœ°åœ¨å‡½æ•°ä¸­è®¿é—® <code>s</code> çš„å±æ€§å’Œæ–¹æ³•ï¼Œè€Œä¸ä¼šå¯¼è‡´ç¼–è¯‘å™¨é”™è¯¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Rustå­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rustå­¦ä¹ ç¬”è®° </tag>
            
            <tag> Rust </tag>
            
            <tag> æ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rustå­¦ä¹ ç¬”è®°ï¼ˆè¿›é˜¶ï¼‰ä»¥è·¯ç”±è½¬å‘é¡¹ç›®ä¸ºä¾‹</title>
      <link href="/2023/02/16/Rust%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E8%BF%9B%E9%98%B6%EF%BC%89%E4%BB%A5%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91%E9%A1%B9%E7%9B%AE%E4%B8%BA%E4%BE%8B/"/>
      <url>/2023/02/16/Rust%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E8%BF%9B%E9%98%B6%EF%BC%89%E4%BB%A5%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91%E9%A1%B9%E7%9B%AE%E4%B8%BA%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<h1>Rustå­¦ä¹ ç¬”è®°ï¼ˆè¿›é˜¶ï¼‰ä»¥è·¯ç”±è½¬å‘é¡¹ç›®ä¸ºä¾‹</h1><p>éå¸¸å¥½ï¼Œç°åœ¨ä½ å·²ç»å­¦ä¹ äº† Rust è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼Œå¹¶ä¸”äº†è§£äº† Rust é¡¹ç›®çš„å¼€å‘å’Œå‘å¸ƒã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å»ºè®®ä½ ç»§ç»­æ·±å…¥å­¦ä¹  Rustï¼ŒæŒæ¡æ›´å¤šçš„é«˜çº§ç‰¹æ€§å’Œå®è·µç»éªŒã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›æ¨èçš„ Rust å­¦ä¹ èµ„æºå’Œè¿›é˜¶ä¸»é¢˜ï¼š</p><h3 id="Rust-å­¦ä¹ èµ„æº">Rust å­¦ä¹ èµ„æº</h3><ol><li><p><a href="https://doc.rust-lang.org/book/">The Rust Programming Language book</a>ï¼šRust å®˜æ–¹å‡ºå“çš„å…¥é—¨æ•™ç¨‹ï¼Œè¯¦ç»†ä»‹ç»äº† Rust è¯­è¨€çš„åŸºç¡€çŸ¥è¯†å’Œé«˜çº§ç‰¹æ€§ï¼Œéå¸¸é€‚åˆåˆå­¦è€…å­¦ä¹ ã€‚</p></li><li><p><a href="https://doc.rust-lang.org/stable/rust-by-example/">Rust by Example</a>ï¼šRust å®˜æ–¹å‡ºå“çš„åœ¨çº¿æ•™ç¨‹ï¼Œé€šè¿‡å®é™…ä¾‹å­æ¼”ç¤º Rust çš„ç”¨æ³•å’Œç‰¹æ€§ï¼Œé€‚åˆè¿›ä¸€æ­¥å­¦ä¹  Rustã€‚</p></li><li><p><a href="https://rust-lang-nursery.github.io/rust-cookbook/">Rust Cookbook</a>ï¼šRust ç¤¾åŒºå¼€å‘çš„ä»£ç ç¤ºä¾‹é›†åˆï¼ŒåŒ…æ‹¬å„ç§ Rust ç¼–ç¨‹åœºæ™¯å’Œé—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p></li><li><p><a href="https://rust.cc/">Rustè¯­è¨€ä¸­æ–‡ç¤¾åŒº</a>ï¼šRust ä¸­æ–‡ç¤¾åŒºï¼Œæä¾› Rust ç›¸å…³çš„å­¦ä¹ èµ„æ–™å’Œè®¨è®ºåŒºï¼Œä»¥åŠ Rust åº”ç”¨å’Œç”Ÿæ€ç³»ç»Ÿçš„æœ€æ–°åŠ¨æ€ã€‚</p></li><li><p><a href="https://rustlang-cn.org/">Rustä¸­æ–‡æ–‡æ¡£</a>ï¼šRust å®˜æ–¹æ–‡æ¡£çš„ä¸­æ–‡ç¿»è¯‘ç‰ˆæœ¬ï¼Œè¯¦ç»†ä»‹ç»äº† Rust è¯­è¨€å’Œç”Ÿæ€ç³»ç»Ÿçš„å„ä¸ªæ–¹é¢ã€‚</p></li></ol><h3 id="Rust-è¿›é˜¶ä¸»é¢˜">Rust è¿›é˜¶ä¸»é¢˜</h3><ol><li><p>é«˜çº§æ•°æ®ç±»å‹ï¼šRust æ”¯æŒè®¸å¤šé«˜çº§æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ traitã€æšä¸¾ã€å…ƒç»„ã€æ•°ç»„ç­‰ï¼Œè¿™äº›æ•°æ®ç±»å‹åœ¨ Rust ç¼–ç¨‹ä¸­å…·æœ‰é‡è¦çš„ä½œç”¨ï¼Œå¯ä»¥è®©ä½ å†™å‡ºæ›´åŠ é«˜æ•ˆã€å®‰å…¨å’Œçµæ´»çš„ä»£ç ã€‚</p></li><li><p>é«˜æ€§èƒ½è®¡ç®—ï¼šRust è¯­è¨€çš„æ€§èƒ½éå¸¸é«˜ï¼Œå¯ä»¥ç”¨äºç¼–å†™å„ç§é«˜æ€§èƒ½è®¡ç®—ç¨‹åºï¼Œä¾‹å¦‚ç§‘å­¦è®¡ç®—ã€æœºå™¨å­¦ä¹ ã€æ¸¸æˆå¼€å‘ç­‰é¢†åŸŸã€‚</p></li><li><p>Web å¼€å‘ï¼šRust ç”Ÿæ€ç³»ç»Ÿä¸­æœ‰è®¸å¤šä¼˜ç§€çš„ Web æ¡†æ¶å’Œå·¥å…·ï¼Œä¾‹å¦‚ Rocketã€Actixã€Warp ç­‰ï¼Œå¯ä»¥ç”¨äºç¼–å†™é«˜æ€§èƒ½ã€å®‰å…¨å’Œå¯æ‰©å±•çš„ Web åº”ç”¨ç¨‹åºã€‚</p></li><li><p>æ“ä½œç³»ç»Ÿå¼€å‘ï¼šRust è¯­è¨€éå¸¸é€‚åˆç”¨äºæ“ä½œç³»ç»Ÿå’Œåº•å±‚ç³»ç»Ÿç¼–ç¨‹ï¼Œå¯ä»¥é€šè¿‡ Rust ç¼–å†™æ›´åŠ é«˜æ•ˆã€å®‰å…¨å’Œå¯é çš„æ“ä½œç³»ç»Ÿå’Œç³»ç»Ÿåº“ã€‚</p></li><li><p>åŒºå—é“¾å’ŒåŠ å¯†è´§å¸ï¼šRust è¯­è¨€åœ¨åŒºå—é“¾å’ŒåŠ å¯†è´§å¸é¢†åŸŸæœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œä¾‹å¦‚ Bitcoinã€Parityã€Solana ç­‰é¡¹ç›®éƒ½æ˜¯ç”¨ Rust ç¼–å†™çš„ã€‚</p></li></ol><p>å¸Œæœ›è¿™äº›èµ„æºå’Œä¸»é¢˜èƒ½å¤Ÿå¸®åŠ©ä½ è¿›ä¸€æ­¥æ·±å…¥å­¦ä¹ Rust.</p><p>å½“ä½ å­¦ä¹  Rust çš„åŸºç¡€çŸ¥è¯†åï¼Œæœ€å¥½çš„å­¦ä¹ æ–¹æ³•ä¹‹ä¸€æ˜¯å®è·µé¡¹ç›®ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªç®€å•çš„é¡¹ç›®ï¼Œå¯ä»¥å¸®åŠ©ä½ æ·±åº¦äº†è§£ Rust çš„å®è·µç»éªŒå’Œåº”ç”¨åœºæ™¯ã€‚</p><ol><li><p>ç”¨ Rust å®ç°ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼šå¯ä»¥å°è¯•ä½¿ç”¨ Rust å¼€å‘ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œä¾‹å¦‚æ–‡ä»¶æœç´¢å·¥å…·ã€æ–‡ä»¶åŠ å¯†å·¥å…·ã€ä¸‹è½½å™¨ç­‰ã€‚è¿™å°†å¸®åŠ©ä½ ç†Ÿæ‚‰ Rust çš„æ ‡å‡†åº“ã€å‘½ä»¤è¡Œå‚æ•°è§£æã€æ–‡ä»¶ I/O ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p></li><li><p>ç”¨ Rust å®ç°ä¸€ä¸ª Web æœåŠ¡ï¼šå¯ä»¥å°è¯•ä½¿ç”¨ Rust å¼€å‘ä¸€ä¸ªç®€å•çš„ Web æœåŠ¡ï¼Œä¾‹å¦‚é™æ€æ–‡ä»¶æœåŠ¡å™¨ã€API æœåŠ¡ã€åšå®¢ç³»ç»Ÿç­‰ã€‚è¿™å°†å¸®åŠ©ä½ ç†Ÿæ‚‰ Rust çš„ Web ç”Ÿæ€ç³»ç»Ÿã€HTTP æœåŠ¡å™¨æ¡†æ¶ã€æ•°æ®åº“è¿æ¥ã€æ¨¡æ¿å¼•æ“ç­‰æŠ€æœ¯ã€‚</p></li><li><p>ç”¨ Rust å®ç°ä¸€ä¸ªæ•°æ®ç»“æ„ï¼šå¯ä»¥å°è¯•ä½¿ç”¨ Rust å®ç°ä¸€ä¸ªå¸¸è§çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚é“¾è¡¨ã€å †æ ˆã€é˜Ÿåˆ—ã€æ ‘ç­‰ã€‚è¿™å°†å¸®åŠ©ä½ ç†Ÿæ‚‰ Rust çš„è¯­è¨€ç‰¹æ€§ã€æ³›å‹ç¼–ç¨‹ã€å†…å­˜å®‰å…¨æ€§ç­‰æŠ€æœ¯ã€‚</p></li><li><p>ç”¨ Rust å®ç°ä¸€ä¸ªæ¸¸æˆï¼šå¯ä»¥å°è¯•ä½¿ç”¨ Rust å¼€å‘ä¸€ä¸ªç®€å•çš„æ¸¸æˆï¼Œä¾‹å¦‚æ‰«é›·ã€2048ã€è´ªåƒè›‡ç­‰ã€‚è¿™å°†å¸®åŠ©ä½ ç†Ÿæ‚‰ Rust çš„æ¸¸æˆå¼€å‘ç”Ÿæ€ç³»ç»Ÿã€å›¾å½¢åº“ã€äº‹ä»¶å¾ªç¯ã€æ¸¸æˆé€»è¾‘ç­‰æŠ€æœ¯ã€‚</p></li></ol><p>ä»¥ä¸Šè¿™äº›é¡¹ç›®å¯ä»¥ä½œä¸ºä½ è¿›ä¸€æ­¥æ·±å…¥å­¦ä¹  Rust çš„èµ·ç‚¹ï¼Œå®ƒä»¬å…·æœ‰ä¸åŒçš„éš¾åº¦å’Œåº”ç”¨åœºæ™¯ï¼Œä½ å¯ä»¥é€‰æ‹©é€‚åˆè‡ªå·±çš„é¡¹ç›®æ¥å­¦ä¹ å’Œå®è·µã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒRust ç¤¾åŒºä¸­ä¹Ÿæœ‰è®¸å¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®å’Œæ•™ç¨‹ï¼Œå¯ä»¥å¸®åŠ©ä½ å­¦ä¹ å’Œå®è·µ Rustï¼Œå¸Œæœ›ä½ åœ¨ Rust çš„å­¦ä¹ ä¸­å–å¾—è¿›ä¸€æ­¥çš„è¿›å±•ã€‚</p><p>å¦‚æœä½ å·²ç»å­¦ä¼šäº† Rust çš„åŸºç¡€è¯­æ³•å’Œå¸¸ç”¨åº“ï¼Œæ¥ä¸‹æ¥å¯ä»¥å°è¯•åšä¸€äº›æ›´å…·æŒ‘æˆ˜æ€§çš„é¡¹ç›®æ¥æ·±å…¥äº†è§£ Rust çš„é«˜çº§ç‰¹æ€§å’Œç”Ÿæ€ç³»ç»Ÿã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›è¿›é˜¶é¡¹ç›®çš„ç¤ºä¾‹ï¼š</p><ol><li><p>å¼€å‘ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œåº”ç”¨ï¼šRust å¯¹äºå¼‚æ­¥ç¼–ç¨‹æä¾›äº†å¾ˆå¥½çš„æ”¯æŒï¼Œä½ å¯ä»¥å°è¯•ä½¿ç”¨ Rust å¼€å‘ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œåº”ç”¨ï¼Œä¾‹å¦‚å®æ—¶èŠå¤©å®¤ã€Websocket æœåŠ¡å™¨ç­‰ã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä½ éœ€è¦ç†Ÿæ‚‰ Rust çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ã€Futureã€Tokio ç­‰åº“ã€‚</p></li><li><p>å¼€å‘ä¸€ä¸ªè™šæ‹Ÿæœºæˆ–ç¼–è¯‘å™¨ï¼šRust å…·æœ‰è‰¯å¥½çš„æ€§èƒ½å’Œå†…å­˜å®‰å…¨æ€§ï¼Œé€‚åˆç”¨äºå®ç°è™šæ‹Ÿæœºæˆ–ç¼–è¯‘å™¨ã€‚ä½ å¯ä»¥å°è¯•ä½¿ç”¨ Rust å®ç°ä¸€ä¸ªç®€å•çš„è™šæ‹Ÿæœºæˆ–ç¼–è¯‘å™¨ï¼Œä¾‹å¦‚ Brainfuck è§£é‡Šå™¨ã€Markdown ç¼–è¯‘å™¨ç­‰ã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä½ éœ€è¦ç†Ÿæ‚‰ Rust çš„è¯­è¨€ç‰¹æ€§ã€ä»£ç ç”Ÿæˆã€ä¸­é—´è¯­è¨€ç­‰æŠ€æœ¯ã€‚</p></li><li><p>å¼€å‘ä¸€ä¸ªæœºå™¨å­¦ä¹ åº”ç”¨ï¼šRust çš„æ€§èƒ½å’Œå†…å­˜å®‰å…¨æ€§ä¹Ÿä½¿å…¶æˆä¸ºæœºå™¨å­¦ä¹ é¢†åŸŸçš„æœ‰åŠ›ç«äº‰è€…ã€‚ä½ å¯ä»¥å°è¯•ä½¿ç”¨ Rust å¼€å‘ä¸€ä¸ªç®€å•çš„æœºå™¨å­¦ä¹ åº”ç”¨ï¼Œä¾‹å¦‚å›¾åƒåˆ†ç±»å™¨ã€æ–‡æœ¬åˆ†ç±»å™¨ç­‰ã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä½ éœ€è¦ç†Ÿæ‚‰ Rust çš„æ•°æ®å¤„ç†ã€çº¿æ€§ä»£æ•°ã€æ¢¯åº¦ä¸‹é™ç­‰æŠ€æœ¯ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦ä½¿ç”¨ Rust çš„æœºå™¨å­¦ä¹ åº“ï¼Œä¾‹å¦‚ ndarrayã€tangram ç­‰ã€‚</p></li><li><p>å¼€å‘ä¸€ä¸ªæ¸¸æˆå¼•æ“ï¼šRust çš„æ€§èƒ½å’Œå†…å­˜å®‰å…¨æ€§ä½¿å…¶éå¸¸é€‚åˆæ¸¸æˆå¼•æ“çš„å¼€å‘ã€‚ä½ å¯ä»¥å°è¯•ä½¿ç”¨ Rust å¼€å‘ä¸€ä¸ªç®€å•çš„æ¸¸æˆå¼•æ“ï¼Œä¾‹å¦‚ 2D å¹³å°æ¸¸æˆå¼•æ“ã€3D æ¸¸æˆå¼•æ“ç­‰ã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä½ éœ€è¦ç†Ÿæ‚‰ Rust çš„æ¸¸æˆå¼•æ“å¼€å‘ç”Ÿæ€ç³»ç»Ÿã€å›¾å½¢æ¸²æŸ“ã€ç‰©ç†å¼•æ“ç­‰æŠ€æœ¯ã€‚</p></li></ol><p>è¿™äº›é¡¹ç›®éƒ½éå¸¸å…·æœ‰æŒ‘æˆ˜æ€§å’Œå®ç”¨æ€§ï¼Œå¯ä»¥å¸®åŠ©ä½ æ·±å…¥äº†è§£ Rust çš„é«˜çº§ç‰¹æ€§å’Œåº”ç”¨åœºæ™¯ã€‚å½“ç„¶ï¼Œåœ¨å®Œæˆè¿™äº›é¡¹ç›®ä¹‹å‰ï¼Œä½ éœ€è¦å…·å¤‡ä¸€å®šçš„ç¼–ç¨‹ç»éªŒå’ŒçŸ¥è¯†å‚¨å¤‡ï¼Œå› æ­¤ä½ éœ€è¦èŠ±è´¹ä¸€äº›æ—¶é—´æ¥å­¦ä¹ å’Œå®è·µ Rustã€‚å¸Œæœ›ä½ èƒ½å¤Ÿå–„ç”¨ Rust çš„å¼ºå¤§èƒ½åŠ›ï¼Œåˆ›é€ å‡ºæ›´å¤šæœ‰è¶£çš„é¡¹ç›®ã€‚</p><p>ç°åœ¨ä»¥ Rust å®ç°ä¸€ä¸ªè·¯ç”±è½¬å‘åŠŸèƒ½çš„é¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®å¯ä»¥å¸®åŠ©ä½ ç†Ÿæ‚‰ Rust çš„ç½‘ç»œç¼–ç¨‹å’Œè·¯ç”±æ¡†æ¶çš„ä½¿ç”¨ã€‚</p><h2 id="é¡¹ç›®æ¦‚è¿°">é¡¹ç›®æ¦‚è¿°</h2><p>åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨èƒ½å¤Ÿæ¥å— HTTP è¯·æ±‚å¹¶æ ¹æ®è¯·æ±‚çš„è·¯å¾„è¿›è¡Œè·¯ç”±è½¬å‘ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>ç›‘å¬æŒ‡å®šçš„ç«¯å£ï¼Œå¹¶æ¥å— HTTP è¯·æ±‚ã€‚</li><li>è§£æ HTTP è¯·æ±‚ï¼Œè·å–è¯·æ±‚çš„è·¯å¾„ã€‚</li><li>æ ¹æ®è¯·æ±‚çš„è·¯å¾„è¿›è¡Œè·¯ç”±è½¬å‘ã€‚</li><li>æ ¹æ®è·¯ç”±è§„åˆ™è¿”å›å¯¹åº”çš„å“åº”ã€‚</li></ol><p>åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Rust çš„æ ‡å‡†åº“ä»¥åŠä¸€äº›å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼ŒåŒ…æ‹¬ï¼š</p><ol><li><code>std::net</code>ï¼šç”¨äºç½‘ç»œç¼–ç¨‹ï¼Œç›‘å¬ç«¯å£å¹¶æ¥å— HTTP è¯·æ±‚ã€‚</li><li><code>http</code>ï¼šç”¨äºè§£æå’Œæ„å»º HTTP è¯·æ±‚å’Œå“åº”ã€‚</li><li><code>router</code>ï¼šç”¨äºå®ç°è·¯ç”±åŠŸèƒ½ã€‚</li></ol><p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥å®ç°è¿™ä¸ªé¡¹ç›®ã€‚</p><h2 id="æ­¥éª¤ä¸€ï¼šåˆ›å»º-Rust-é¡¹ç›®">æ­¥éª¤ä¸€ï¼šåˆ›å»º Rust é¡¹ç›®</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª Rust é¡¹ç›®ã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cargo new router<br></code></pre></td></tr></table></figure><p>è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º <code>router</code> çš„ Rust é¡¹ç›®ï¼Œå¹¶ç”Ÿæˆä¸€äº›é»˜è®¤æ–‡ä»¶ï¼ŒåŒ…æ‹¬ <code>src/main.rs</code> æ–‡ä»¶ã€‚</p><h2 id="æ­¥éª¤äºŒï¼šå¼•å…¥ä¾èµ–åº“">æ­¥éª¤äºŒï¼šå¼•å…¥ä¾èµ–åº“</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥éœ€è¦çš„ä¾èµ–åº“ã€‚åœ¨ <code>Cargo.toml</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile">[dependencies]<br>http = <span class="hljs-string">&quot;0.2.1&quot;</span><br>router = <span class="hljs-string">&quot;0.10.0&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™å°†åœ¨é¡¹ç›®ä¸­å¼•å…¥ <code>http</code> å’Œ <code>router</code> ä¸¤ä¸ªä¾èµ–åº“ã€‚<code>http</code> ç”¨äºè§£æå’Œæ„å»º HTTP è¯·æ±‚å’Œå“åº”ï¼Œ<code>router</code> ç”¨äºå®ç°è·¯ç”±åŠŸèƒ½ã€‚</p><h2 id="æ­¥éª¤ä¸‰ï¼šå®ç°-HTTP-æœåŠ¡å™¨">æ­¥éª¤ä¸‰ï¼šå®ç° HTTP æœåŠ¡å™¨</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å®ç° HTTP æœåŠ¡å™¨äº†ã€‚åœ¨ <code>src/main.rs</code> æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::net::&#123;TcpListener, TcpStream&#125;;<br><span class="hljs-keyword">use</span> std::io::prelude::*;<br><span class="hljs-keyword">use</span> http::&#123;Request, Response, StatusCode&#125;;<br><span class="hljs-keyword">use</span> router::Router;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">handle_request</span>(<span class="hljs-keyword">mut</span> stream: TcpStream, router: &amp;Router) &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">buffer</span> = [<span class="hljs-number">0</span>; <span class="hljs-number">1024</span>];<br>    stream.<span class="hljs-title function_ invoke__">read</span>(&amp;<span class="hljs-keyword">mut</span> buffer).<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">request</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from_utf8_lossy</span>(&amp;buffer[..]);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">request</span> = Request::<span class="hljs-title function_ invoke__">from</span>(request.<span class="hljs-title function_ invoke__">as_ref</span>());<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">response</span> = Response::<span class="hljs-title function_ invoke__">new</span>();<br><br>    <span class="hljs-keyword">match</span> router.<span class="hljs-title function_ invoke__">route</span>(&amp;request.<span class="hljs-title function_ invoke__">method</span>().<span class="hljs-title function_ invoke__">as_str</span>(), request.<span class="hljs-title function_ invoke__">uri</span>().<span class="hljs-title function_ invoke__">path</span>()) &#123;<br>        <span class="hljs-title function_ invoke__">Some</span>(handler) =&gt; &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">body</span> = (handler)(request);<br>            response.<span class="hljs-title function_ invoke__">set_body</span>(body);<br>            response.<span class="hljs-title function_ invoke__">set_status_code</span>(StatusCode::OK);<br>        &#125;,<br>        <span class="hljs-literal">None</span> =&gt; &#123;<br>            response.<span class="hljs-title function_ invoke__">set_status_code</span>(StatusCode::NOT_FOUND);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">write!</span>(stream, <span class="hljs-string">&quot;&#123;&#125;&quot;</span>, response).<span class="hljs-title function_ invoke__">unwrap</span>();<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">listener</span> = TcpListener::<span class="hljs-title function_ invoke__">bind</span>(<span class="hljs-string">&quot;127.0.0.1:8000&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">router</span> = Router::<span class="hljs-title function_ invoke__">new</span>();<br><br>    <span class="hljs-comment">// Add route handlers here</span><br>    router.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;/&quot;</span>, |request| <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;Hello, world!&quot;</span>));<br>    <br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">stream</span> <span class="hljs-keyword">in</span> listener.<span class="hljs-title function_ invoke__">incoming</span>() &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">stream</span> = stream.<span class="hljs-title function_ invoke__">unwrap</span>();<br>        <span class="hljs-title function_ invoke__">handle_request</span>(stream, &amp;router);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ª <code>for</code> å¾ªç¯ï¼Œä¸æ–­åœ°ä» <code>TcpListener</code> ä¸­è·å–æ–°çš„è¿æ¥ï¼Œå¹¶å°†è¿æ¥äº¤ç»™ <code>handle_request</code> å‡½æ•°å¤„ç†ã€‚</p><h2 id="æ­¥éª¤å››ï¼šå®ç°è·¯ç”±åŠŸèƒ½">æ­¥éª¤å››ï¼šå®ç°è·¯ç”±åŠŸèƒ½</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å®ç°è·¯ç”±åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ <code>router</code> æ¥å®ç°è·¯ç”±åŠŸèƒ½ã€‚åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º <code>router</code> çš„ <code>Router</code> å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ <code>router.get</code> æ–¹æ³•ä¸ºæ ¹è·¯å¾„æ·»åŠ ä¸€ä¸ªè·¯ç”±å¤„ç†å™¨ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">router</span> = Router::<span class="hljs-title function_ invoke__">new</span>();<br>router.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;/&quot;</span>, |request| <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;Hello, world!&quot;</span>));<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† <code>router.get</code> æ–¹æ³•æ¥ä¸ºæ ¹è·¯å¾„æ·»åŠ ä¸€ä¸ªè·¯ç”±å¤„ç†å™¨ã€‚è¿™ä¸ªè·¯ç”±å¤„ç†å™¨æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œæ¥å—ä¸€ä¸ª <code>Request</code> å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå“åº”ä½“ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>handle_request</code> å‡½æ•°ä¸­ä½¿ç”¨è·¯ç”±å™¨æ¥è·¯ç”± HTTP è¯·æ±‚ã€‚åœ¨ <code>handle_request</code> å‡½æ•°ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">handle_request</span>(<span class="hljs-keyword">mut</span> stream: TcpStream, router: &amp;Router) &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">buffer</span> = [<span class="hljs-number">0</span>; <span class="hljs-number">1024</span>];<br>    stream.<span class="hljs-title function_ invoke__">read</span>(&amp;<span class="hljs-keyword">mut</span> buffer).<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">request</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from_utf8_lossy</span>(&amp;buffer[..]);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">request</span> = Request::<span class="hljs-title function_ invoke__">from</span>(request.<span class="hljs-title function_ invoke__">as_ref</span>());<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">response</span> = Response::<span class="hljs-title function_ invoke__">new</span>();<br><br>    <span class="hljs-keyword">match</span> router.<span class="hljs-title function_ invoke__">route</span>(&amp;request.<span class="hljs-title function_ invoke__">method</span>().<span class="hljs-title function_ invoke__">as_str</span>(), request.<span class="hljs-title function_ invoke__">uri</span>().<span class="hljs-title function_ invoke__">path</span>()) &#123;<br>        <span class="hljs-title function_ invoke__">Some</span>(handler) =&gt; &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">body</span> = (handler)(request);<br>            response.<span class="hljs-title function_ invoke__">set_body</span>(body);<br>            response.<span class="hljs-title function_ invoke__">set_status_code</span>(StatusCode::OK);<br>        &#125;,<br>        <span class="hljs-literal">None</span> =&gt; &#123;<br>            response.<span class="hljs-title function_ invoke__">set_status_code</span>(StatusCode::NOT_FOUND);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">write!</span>(stream, <span class="hljs-string">&quot;&#123;&#125;&quot;</span>, response).<span class="hljs-title function_ invoke__">unwrap</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨ <code>TcpStream</code> è¯»å– HTTP è¯·æ±‚çš„å†…å®¹ï¼Œå¹¶å°†è¯·æ±‚è§£æä¸ºä¸€ä¸ª <code>Request</code> å¯¹è±¡ã€‚æ¥ç€ï¼Œæˆ‘ä»¬ä½¿ç”¨è·¯ç”±å™¨çš„ <code>route</code> æ–¹æ³•æ¥æŸ¥æ‰¾åŒ¹é…çš„è·¯ç”±å¤„ç†å™¨ï¼Œå¦‚æœæ‰¾åˆ°äº†åŒ¹é…çš„è·¯ç”±å¤„ç†å™¨ï¼Œåˆ™è°ƒç”¨è¯¥å¤„ç†å™¨æ¥ç”Ÿæˆå“åº”ä½“ï¼Œå¹¶å°†å“åº”ä½“è®¾ç½®åˆ° <code>Response</code> å¯¹è±¡ä¸­ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„è·¯ç”±å¤„ç†å™¨ï¼Œåˆ™è®¾ç½®å“åº”çŠ¶æ€ç ä¸º <code>NOT_FOUND</code>ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>TcpStream</code> å°†å“åº”å‘é€ç»™å®¢æˆ·ç«¯ã€‚</p><h2 id="æ­¥éª¤äº”ï¼šæµ‹è¯•é¡¹ç›®">æ­¥éª¤äº”ï¼šæµ‹è¯•é¡¹ç›®</h2><p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><p><code>cargo run</code></p><p>è¿™å°†å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œå¹¶åœ¨ <code>127.0.0.1:8000</code> ç›‘å¬ HTTP è¯·æ±‚ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç®€å•çš„è·¯ç”±å™¨ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªWebåº”ç”¨ç¨‹åºï¼Œå®ƒéœ€è¦æ ¹æ®URLè·¯å¾„è·¯ç”±åˆ°ä¸åŒçš„å¤„ç†ç¨‹åºã€‚æˆ‘ä»¬å°†ä½¿ç”¨Rustå®ç°è·¯ç”±å™¨åŠŸèƒ½ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¾èµ–é¡¹ã€‚åœ¨Cargo.tomlä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile">[dependencies]<br>hyper = <span class="hljs-string">&quot;0.14&quot;</span><br>route-recognizer = <span class="hljs-string">&quot;0.3&quot;</span><br></code></pre></td></tr></table></figure><ul><li><code>hyper</code> æ˜¯ä¸€ä¸ª Rust çš„ HTTP åº“ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚å’Œå“åº”ã€‚</li><li><code>route-recognizer</code> æ˜¯ä¸€ä¸ªç”¨äºè¯†åˆ«å’Œè§£æ URL çš„åº“ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥å®ç°è·¯ç”±ã€‚</li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä»£ç æ¥å¤„ç†HTTPè¯·æ±‚å¹¶è·¯ç”±åˆ°ä¸åŒçš„å¤„ç†ç¨‹åºã€‚åœ¨ <code>src/main.rs</code> ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> hyper::&#123;Body, Request, Response, Server&#125;;<br><span class="hljs-keyword">use</span> hyper::service::&#123;make_service_fn, service_fn&#125;;<br><span class="hljs-keyword">use</span> route_recognizer::Router;<br><span class="hljs-keyword">use</span> std::convert::Infallible;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">router</span>(req: Request&lt;Body&gt;, router: &amp;Router&lt;<span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> <span class="hljs-title function_ invoke__">Fn</span>(Request&lt;Body&gt;) <span class="hljs-punctuation">-&gt;</span> Response&lt;Body&gt;&gt;&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Response&lt;Body&gt;, Infallible&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">path</span> = req.<span class="hljs-title function_ invoke__">uri</span>().<span class="hljs-title function_ invoke__">path</span>().<span class="hljs-title function_ invoke__">to_owned</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">params</span> = std::collections::HashMap::<span class="hljs-title function_ invoke__">new</span>();<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(handler) = router.<span class="hljs-title function_ invoke__">recognize</span>(&amp;path) &#123;<br>        <span class="hljs-keyword">for</span> (key, value) <span class="hljs-keyword">in</span> handler.params.<span class="hljs-title function_ invoke__">iter</span>() &#123;<br>            params.<span class="hljs-title function_ invoke__">insert</span>(key.<span class="hljs-title function_ invoke__">to_owned</span>(), value.<span class="hljs-title function_ invoke__">to_owned</span>());<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">response</span> = (handler.handler)(req);<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Ok</span>(response);<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">not_found</span> = Response::<span class="hljs-title function_ invoke__">builder</span>()<br>        .<span class="hljs-title function_ invoke__">status</span>(<span class="hljs-number">404</span>)<br>        .<span class="hljs-title function_ invoke__">body</span>(Body::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;Not Found&quot;</span>))<br>        .<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-title function_ invoke__">Ok</span>(not_found)<br>&#125;<br><br><span class="hljs-meta">#[tokio::main]</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">router</span> = Router::<span class="hljs-title function_ invoke__">new</span>();<br>    router.<span class="hljs-title function_ invoke__">add</span>(<span class="hljs-string">&quot;/hello/:name&quot;</span>, <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(|req| &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">name</span> = req.<span class="hljs-title function_ invoke__">uri</span>().<span class="hljs-title function_ invoke__">path</span>().<span class="hljs-title function_ invoke__">split</span>(<span class="hljs-string">&#x27;/&#x27;</span>).<span class="hljs-title function_ invoke__">last</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">body</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;Hello, &#123;&#125;!&quot;</span>, name).<span class="hljs-title function_ invoke__">into</span>();<br>        Response::<span class="hljs-title function_ invoke__">new</span>(body)<br>    &#125;));<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">make_svc</span> = <span class="hljs-title function_ invoke__">make_service_fn</span>(|_conn| &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">router</span> = router.<span class="hljs-title function_ invoke__">clone</span>();<br>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">move</span> &#123;<br>            Ok::&lt;_, Infallible&gt;(<span class="hljs-title function_ invoke__">service_fn</span>(<span class="hljs-keyword">move</span> |req| &#123;<br>                <span class="hljs-title function_ invoke__">router</span>(req, &amp;router)<br>            &#125;))<br>        &#125;<br>    &#125;);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">addr</span> = ([<span class="hljs-number">127</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>], <span class="hljs-number">3000</span>).<span class="hljs-title function_ invoke__">into</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">server</span> = Server::<span class="hljs-title function_ invoke__">bind</span>(&amp;addr).<span class="hljs-title function_ invoke__">serve</span>(make_svc);<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Listening on http://&#123;&#125;&quot;</span>, addr);<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Err</span>(e) = server.<span class="hljs-keyword">await</span> &#123;<br>        <span class="hljs-built_in">eprintln!</span>(<span class="hljs-string">&quot;server error: &#123;&#125;&quot;</span>, e);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬æ¥é€è¡Œåˆ†æä¸€ä¸‹ä»£ç ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> hyper::&#123;Body, Request, Response, Server&#125;;<br><span class="hljs-keyword">use</span> hyper::service::&#123;make_service_fn, service_fn&#125;;<br><span class="hljs-keyword">use</span> route_recognizer::Router;<br><span class="hljs-keyword">use</span> std::convert::Infallible;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯¼å…¥äº†æ‰€æœ‰éœ€è¦çš„åº“ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">router</span>(req: Request&lt;Body&gt;, router: &amp;Router&lt;<span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> <span class="hljs-title function_ invoke__">Fn</span>(Request&lt;Body&gt;) <span class="hljs-punctuation">-&gt;</span> Response&lt;Body&gt;&gt;&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Response&lt;Body&gt;, Infallible&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">path</span> = req.<span class="hljs-title function_ invoke__">uri</span>().<span class="hljs-title function_ invoke__">path</span>().<span class="hljs-title function_ invoke__">to_owned</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">params</span> = std::collections::HashMap::<span class="hljs-title function_ invoke__">new</span>();<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(handler) = router.<span class="hljs-title function_ invoke__">recognize</span>(&amp;path) &#123;<br>        <span class="hljs-keyword">for</span> (key, value) <span class="hljs-keyword">in</span> handler.params.<span class="hljs-title function_ invoke__">iter</span>() &#123;<br>            params.<span class="hljs-title function_ invoke__">insert</span>(key.<span class="hljs-title function_ invoke__">to_owned</span>(), value.<span class="hljs-title function_ invoke__">to_owned</span>());<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">response</span> = (handler.handler)(req<br></code></pre></td></tr></table></figure><p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç”¨äºå¤„ç†è·¯ç”±çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†æ ¹æ®è¯·æ±‚è·¯å¾„è°ƒç”¨ç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ª<code>Route</code>ç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“å°†å…·æœ‰ä¸¤ä¸ªå­—æ®µï¼š<code>path</code>è¡¨ç¤ºè·¯å¾„ï¼Œ<code>handler</code>è¡¨ç¤ºå¤„ç†è¯¥è·¯å¾„çš„å‡½æ•°ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸ºè¯¥ç»“æ„ä½“å®ç°ä¸€ä¸ª<code>new</code>å‡½æ•°ï¼Œä»¥æ–¹ä¾¿åˆ›å»ºæ–°çš„<code>Route</code>å®ä¾‹ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Route</span> &#123;<br>    path: <span class="hljs-type">String</span>,<br>    handler: <span class="hljs-title function_ invoke__">fn</span>(Request) <span class="hljs-punctuation">-&gt;</span> Response,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Route</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(path: &amp;<span class="hljs-type">str</span>, handler: <span class="hljs-title function_ invoke__">fn</span>(Request) <span class="hljs-punctuation">-&gt;</span> Response) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        Route &#123;<br>            path: path.<span class="hljs-title function_ invoke__">to_string</span>(),<br>            handler,<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ª<code>Router</code>ç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“å°†åŒ…å«ä¸€ä¸ª<code>Vec</code>ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰å·²å®šä¹‰çš„è·¯ç”±ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸ºè¯¥ç»“æ„ä½“å®ç°ä¸€ä¸ª<code>add_route</code>å‡½æ•°ï¼Œä»¥æ·»åŠ æ–°çš„è·¯ç”±ã€‚<code>Router</code>ç»“æ„ä½“è¿˜éœ€è¦ä¸€ä¸ª<code>handle</code>å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†æ ¹æ®è¯·æ±‚è·¯å¾„è°ƒç”¨ç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Router</span> &#123;<br>    routes: <span class="hljs-type">Vec</span>&lt;Route&gt;,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Router</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        Router &#123; routes: <span class="hljs-built_in">vec!</span>[] &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_route</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, path: &amp;<span class="hljs-type">str</span>, handler: <span class="hljs-title function_ invoke__">fn</span>(Request) <span class="hljs-punctuation">-&gt;</span> Response) &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">route</span> = Route::<span class="hljs-title function_ invoke__">new</span>(path, handler);<br>        <span class="hljs-keyword">self</span>.routes.<span class="hljs-title function_ invoke__">push</span>(route);<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">handle</span>(&amp;<span class="hljs-keyword">self</span>, req: Request) <span class="hljs-punctuation">-&gt;</span> Response &#123;<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">route</span> <span class="hljs-keyword">in</span> &amp;<span class="hljs-keyword">self</span>.routes &#123;<br>            <span class="hljs-keyword">if</span> route.path == req.path &#123;<br>                <span class="hljs-keyword">return</span> route.<span class="hljs-title function_ invoke__">handler</span>(req);<br>            &#125;<br>        &#125;<br><br>        Response::<span class="hljs-title function_ invoke__">new</span>(StatusCode::NOT_FOUND)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ä¸»å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ª<code>Router</code>å®ä¾‹ï¼Œå¹¶æ·»åŠ ä¸€äº›è·¯ç”±ã€‚å¯¹äºæ¯ä¸ªè¯·æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨<code>router.handle</code>å‡½æ•°æ¥å¤„ç†è¯¥è¯·æ±‚å³å¯ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">router</span> = Router::<span class="hljs-title function_ invoke__">new</span>();<br><br>    router.<span class="hljs-title function_ invoke__">add_route</span>(<span class="hljs-string">&quot;/&quot;</span>, index);<br>    router.<span class="hljs-title function_ invoke__">add_route</span>(<span class="hljs-string">&quot;/about&quot;</span>, about);<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">server</span> = Server::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;127.0.0.1:8080&quot;</span>);<br>    server.<span class="hljs-title function_ invoke__">run</span>(router.handle);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">index</span>(_req: Request) <span class="hljs-punctuation">-&gt;</span> Response &#123;<br>    Response::<span class="hljs-title function_ invoke__">new</span>(StatusCode::OK)<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">about</span>(_req: Request) <span class="hljs-punctuation">-&gt;</span> Response &#123;<br>    Response::<span class="hljs-title function_ invoke__">new</span>(StatusCode::OK)<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>Router</code>å®ä¾‹ï¼Œå¹¶ä¸ºè·¯å¾„â€œ/â€å’Œâ€œ/aboutâ€åˆ†åˆ«æ·»åŠ äº†å¤„ç†å‡½æ•°<code>index</code>å’Œ<code>about</code>ã€‚æˆ‘ä»¬è¿˜åˆ›å»ºäº†ä¸€ä¸ª<code>Server</code>å®ä¾‹ï¼Œå¹¶åœ¨å…¶<code>run</code>å‡½æ•°ä¸­ä½¿ç”¨<code>router.handle</code>å‡½æ•°æ¥å¤„ç†è¯·æ±‚ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Rustæ¥å®ç°ä¸€ä¸ªåŸºæœ¬çš„è·¯ç”±è½¬å‘åŠŸèƒ½ã€‚è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Rustçš„åŸºæœ¬è¯­æ³•å’Œç‰¹æ€§æ¥æ„å»ºä¸€ä¸ªç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„Webåº”ç”¨ç¨‹åºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Rustå­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rustå­¦ä¹ ç¬”è®° </tag>
            
            <tag> Rust </tag>
            
            <tag> Rustè¿›é˜¶ </tag>
            
            <tag> ç®€å•çš„httpé¡¹ç›® </tag>
            
            <tag> è·¯ç”±è½¬å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rustå­¦ä¹ ç¬”è®°ï¼ˆåˆçº§ï¼‰</title>
      <link href="/2023/02/16/Rust%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%88%9D%E7%BA%A7%EF%BC%89/"/>
      <url>/2023/02/16/Rust%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%88%9D%E7%BA%A7%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1>Rustå­¦ä¹ ç¬”è®°ï¼ˆåˆçº§ï¼‰</h1><p>å­¦ä¹  Rust è¯­è¨€æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„è¿‡ç¨‹ï¼Œå®ƒæ˜¯ä¸€é—¨ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œè¢«è®¾è®¡ä¸ºå®‰å…¨ã€å¹¶å‘å’Œå¿«é€Ÿçš„ç¼–ç¨‹è¯­è¨€ã€‚æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä»¥ä¸‹è®¡åˆ’ä¸€æ­¥æ­¥æ¥å­¦ä¹  Rust è¯­è¨€ï¼š</p><h2 id="ç¬¬ä¸€æ­¥ï¼šå®‰è£…-Rust-å’Œç¼–è¾‘å™¨">ç¬¬ä¸€æ­¥ï¼šå®‰è£… Rust å’Œç¼–è¾‘å™¨</h2><p>é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£… Rust ç¼–ç¨‹è¯­è¨€å’Œä¸€ä¸ªä»£ç ç¼–è¾‘å™¨ã€‚ä½ å¯ä»¥ä»å®˜æ–¹ç½‘ç«™ä¸‹è½½å¹¶å®‰è£… Rust å’Œ Cargoï¼ŒRust çš„åŒ…ç®¡ç†å·¥å…·ã€‚</p><p>å®‰è£… Rust çš„æ–¹æ³•éå¸¸ç®€å•ï¼Œåœ¨ç»ˆç«¯æˆ–è€…å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl --proto <span class="hljs-string">&#x27;=https&#x27;</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦é€‰æ‹© Rust çš„é»˜è®¤è®¾ç½®ï¼Œè¿™é€šå¸¸æ˜¯å®‰è£… stable ç‰ˆæœ¬ã€‚å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ Rust æ˜¯å¦æˆåŠŸå®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rustc --version<br></code></pre></td></tr></table></figure><p>ä½ è¿˜éœ€è¦å®‰è£…ä¸€ä¸ªä»£ç ç¼–è¾‘å™¨ï¼Œæ¯”å¦‚ Visual Studio Code æˆ–è€… Sublime Textã€‚é€‰æ‹©ä¸€ä¸ªä½ æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨ï¼Œå¹¶å®‰è£… Rust æ’ä»¶ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å¼€å§‹ç¼–å†™ Rust ä»£ç äº†ã€‚</p><h2 id="ç¬¬äºŒæ­¥ï¼šå­¦ä¹ -Rust-çš„åŸºæœ¬è¯­æ³•">ç¬¬äºŒæ­¥ï¼šå­¦ä¹  Rust çš„åŸºæœ¬è¯­æ³•</h2><p>åœ¨å­¦ä¹  Rust çš„åŸºæœ¬è¯­æ³•ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆäº†è§£ä¸€äº› Rust çš„åŸºæœ¬æ¦‚å¿µã€‚æ¯”å¦‚ï¼ŒRust ä¸­æœ‰è®¸å¤šå…³é”®å­—å’Œç¬¦å·ï¼Œä½ éœ€è¦ç†Ÿæ‚‰å®ƒä»¬çš„å«ä¹‰å’Œç”¨æ³•ã€‚</p><p>å­¦ä¹  Rust çš„åŸºæœ¬è¯­æ³•é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li><p>å˜é‡å’Œæ•°æ®ç±»å‹ï¼šäº†è§£ Rust ä¸­çš„æ•°æ®ç±»å‹ã€å˜é‡å£°æ˜å’Œåˆå§‹åŒ–ã€‚</p></li><li><p>è¿ç®—ç¬¦ï¼šäº†è§£ Rust ä¸­çš„è¿ç®—ç¬¦ï¼Œæ¯”å¦‚ç®—æœ¯è¿ç®—ç¬¦ã€é€»è¾‘è¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦ã€‚</p></li><li><p>æ§åˆ¶æµè¯­å¥ï¼šäº†è§£ Rust ä¸­çš„æ§åˆ¶æµè¯­å¥ï¼Œæ¯”å¦‚ if-else è¯­å¥ã€å¾ªç¯è¯­å¥å’Œ match è¡¨è¾¾å¼ã€‚</p></li><li><p>å‡½æ•°å’Œæ¨¡å—ï¼šäº†è§£ Rust ä¸­çš„å‡½æ•°å’Œæ¨¡å—çš„å®šä¹‰å’Œç”¨æ³•ã€‚</p></li><li><p>æ‰€æœ‰æƒå’Œå€Ÿç”¨ï¼šäº†è§£ Rust ä¸­çš„æ‰€æœ‰æƒå’Œå€Ÿç”¨ï¼Œè¿™æ˜¯ Rust æœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€ã€‚</p></li></ol><p>åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ Rust å®˜æ–¹æ–‡æ¡£ã€Rust ç¨‹åºè®¾è®¡è¯­è¨€ï¼ˆç¬¬äºŒç‰ˆï¼‰ç­‰èµ„æ–™æ¥æ·±å…¥äº†è§£ Rust çš„åŸºæœ¬è¯­æ³•ã€‚åŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å®è·µæ¥å·©å›ºæ‰€å­¦å†…å®¹ã€‚</p><h2 id="ç¬¬ä¸‰æ­¥ï¼šå­¦ä¹ -Rust-çš„é«˜çº§ç‰¹æ€§">ç¬¬ä¸‰æ­¥ï¼šå­¦ä¹  Rust çš„é«˜çº§ç‰¹æ€§</h2><p>å­¦ä¹ å®Œ Rust çš„åŸºæœ¬è¯­æ³•ä¹‹åï¼Œä½ å¯ä»¥å¼€å§‹å­¦ä¹  Rust çš„é«˜çº§ç‰¹æ€§ï¼Œæ¯”å¦‚å¹¶å‘ç¼–ç¨‹ã€å†…å­˜å®‰å…¨å’Œå®ã€‚è¿™äº›é«˜çº§ç‰¹æ€§å¯ä»¥è®©ä½ æ›´å¥½åœ°åˆ©ç”¨ Rust çš„ä¼˜åŠ¿æ¥ç¼–å†™é«˜è´¨é‡çš„ç¨‹åºã€‚</p><p>å­¦ä¹  Rust çš„é«˜çº§ç‰¹æ€§é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li><p>å¹¶å‘ç¼–ç¨‹ï¼šäº†è§£ Rust çš„å¹¶å‘ç¼–ç¨‹æ¨¡å‹å’Œå¸¸ç”¨çš„å¹¶å‘ç¼–ç¨‹æ¨¡å¼ã€‚</p></li><li><p>å†…å­˜å®‰å…¨ï¼šäº†è§£ Rust çš„å†…å­˜ç®¡ç†æœºåˆ¶å’Œæ‰€æœ‰æƒè§„åˆ™ï¼Œä»¥åŠå¦‚ä½•é¿å…å¸¸è§çš„å†…å­˜å®‰å…¨é—®é¢˜ï¼Œå¦‚ç©ºæŒ‡é’ˆå’Œç¼“å†²åŒºæº¢å‡ºã€‚</p></li><li><p>æ³›å‹ç¼–ç¨‹ï¼šäº†è§£ Rust ä¸­çš„æ³›å‹ç¼–ç¨‹å’Œ traitï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥ç¼–å†™æ›´çµæ´»å’Œå¯é‡ç”¨çš„ä»£ç ã€‚</p></li><li><p>å®ï¼šäº†è§£ Rust çš„å®ç³»ç»Ÿï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®æ¥ç®€åŒ–ä»£ç å’Œæé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p></li></ol><p>åœ¨å­¦ä¹  Rust çš„é«˜çº§ç‰¹æ€§æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡é˜…è¯» Rust å®˜æ–¹æ–‡æ¡£ã€Rust By Example ç­‰èµ„æ–™æ¥æ·±å…¥äº†è§£ã€‚åŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•ç¼–å†™ä¸€äº›æ¶‰åŠè¿™äº›é«˜çº§ç‰¹æ€§çš„å°ç¨‹åºæ¥å·©å›ºæ‰€å­¦å†…å®¹ã€‚</p><h2 id="ç¬¬å››æ­¥ï¼šå®è·µé¡¹ç›®">ç¬¬å››æ­¥ï¼šå®è·µé¡¹ç›®</h2><p>å­¦ä¹  Rust ä¹‹åï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯å®è·µã€‚å°è¯•ç¼–å†™ä¸€äº›å°ç¨‹åºæˆ–è€…é¡¹ç›®æ¥å·©å›ºæ‰€å­¦çš„å†…å®¹ã€‚ä½ å¯ä»¥ä»ç®€å•çš„ç¨‹åºå¼€å§‹ï¼Œä¾‹å¦‚è®¡ç®—å™¨æˆ–è€…ç®€å•çš„æ¸¸æˆï¼Œç„¶åé€æ¸å¢åŠ å¤æ‚åº¦ï¼ŒæŒ‘æˆ˜è‡ªå·±çš„æŠ€èƒ½ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ Rust ç¤¾åŒºæä¾›çš„ä¸€äº›èµ„æºæ¥æ‰¾åˆ°ä¸€äº›é€‚åˆçš„é¡¹ç›®ï¼Œä¾‹å¦‚ Rust ç¼–ç¨‹è¯­è¨€è®ºå›å’Œ Rust åº“å’Œæ¡†æ¶åˆ—è¡¨ã€‚åŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±è®¾è®¡ä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶æ ¹æ®éœ€è¦å¼•å…¥ Rust ç”Ÿæ€ä¸­çš„åº“å’Œæ¡†æ¶æ¥å®ç°å®ƒã€‚</p><p>åœ¨å®è·µé¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œè¿™æ—¶ä½ å¯ä»¥é€šè¿‡ Rust ç¤¾åŒºæä¾›çš„è®ºå›å’Œé—®ç­”ç½‘ç«™æ¥è·å–å¸®åŠ©ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯å­¦ä¹  Rust çš„åŸºæœ¬å­¦ä¹ è®¡åˆ’ï¼Œç°åœ¨æˆ‘ä»¬å¼€å§‹æ‰§è¡Œå­¦ä¹ è®¡åˆ’ã€‚</p><h2 id="ç¬¬ä¸€æ­¥ï¼šå®‰è£…-Rust">ç¬¬ä¸€æ­¥ï¼šå®‰è£… Rust</h2><p>é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£… Rust å·¥å…·é“¾ã€‚è¯·æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ¥å®‰è£…ï¼š</p><ol><li>è®¿é—® Rust å®˜ç½‘ï¼š<a href="https://www.rust-lang.org/zh-CN">https://www.rust-lang.org/zh-CN</a></li><li>ç‚¹å‡»é¡µé¢ä¸­çš„ â€œå®‰è£…â€ æŒ‰é’®ã€‚</li><li>æ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿï¼Œé€‰æ‹©ç›¸åº”çš„å®‰è£…æ–¹å¼å¹¶æŒ‰ç…§è¯´æ˜è¿›è¡Œå®‰è£…ã€‚</li></ol><p>å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æ£€æŸ¥ Rust æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rustc --version<br></code></pre></td></tr></table></figure><p>å¦‚æœä½ çœ‹åˆ°äº†ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼Œé‚£ä¹ˆä½ å·²ç»æˆåŠŸå®‰è£…äº† Rustï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rustc 1.56.0 (a178d0322 2021-11-01)<br></code></pre></td></tr></table></figure><h2 id="ç¬¬äºŒæ­¥ï¼šäº†è§£-Rust-åŸºæœ¬è¯­æ³•">ç¬¬äºŒæ­¥ï¼šäº†è§£ Rust åŸºæœ¬è¯­æ³•</h2><p>åœ¨å®‰è£…å®Œ Rust åï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å­¦ä¹  Rust çš„åŸºæœ¬è¯­æ³•äº†ã€‚Rust çš„è¯­æ³•æ¯”è¾ƒä¸¥è°¨ï¼Œä½†æ˜¯ä¹Ÿæ¯”è¾ƒå®¹æ˜“å­¦ä¹ ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä½ éœ€è¦å­¦ä¹ çš„åŸºæœ¬è¯­æ³•ï¼š</p><ol><li><p>å˜é‡å’Œæ•°æ®ç±»å‹ï¼šäº†è§£ Rust ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚æ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼ã€å­—ç¬¦ç­‰ï¼Œä»¥åŠå¦‚ä½•å£°æ˜å’Œä½¿ç”¨å˜é‡ã€‚</p></li><li><p>æ§åˆ¶æµè¯­å¥ï¼šäº†è§£ Rust ä¸­çš„æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ï¼Œä¾‹å¦‚ ifã€matchã€whileã€for ç­‰ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥æ§åˆ¶ç¨‹åºæµç¨‹ã€‚</p></li><li><p>å‡½æ•°å’Œæ¨¡å—ï¼šäº†è§£å¦‚ä½•å®šä¹‰å’Œä½¿ç”¨å‡½æ•°ï¼Œä»¥åŠå¦‚ä½•ç»„ç»‡ä»£ç æˆæ¨¡å—ã€‚</p></li></ol><p>ä½ å¯ä»¥é€šè¿‡ Rust å®˜æ–¹æ–‡æ¡£æˆ–è€… Rust By Example æ¥å­¦ä¹ è¿™äº›åŸºæœ¬è¯­æ³•ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›ç®€å•çš„ Rust ä»£ç ï¼Œå¯ä»¥å¸®åŠ©ä½ å…¥é—¨ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å£°æ˜ä¸€ä¸ªå˜é‡å¹¶èµ‹å€¼</span><br><span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">42</span>;<br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå‡½æ•°</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    x + y<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨ match æ§åˆ¶æµè¯­å¥</span><br><span class="hljs-keyword">let</span> <span class="hljs-variable">number</span> = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">match</span> number &#123;<br>    <span class="hljs-number">1</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;one&quot;</span>),<br>    <span class="hljs-number">2</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;two&quot;</span>),<br>    _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;other&quot;</span>),<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯·å°è¯•ç†è§£ä¸Šé¢çš„ä»£ç ï¼Œå¹¶ç¼–å†™ä¸€äº›ç®€å•çš„ç¨‹åºæ¥å·©å›ºæ‰€å­¦çš„åŸºæœ¬è¯­æ³•ã€‚</p><h2 id="ç¬¬ä¸‰æ­¥ï¼šæ·±å…¥å­¦ä¹ -Rust-çš„é«˜çº§ç‰¹æ€§">ç¬¬ä¸‰æ­¥ï¼šæ·±å…¥å­¦ä¹  Rust çš„é«˜çº§ç‰¹æ€§</h2><p>åœ¨å­¦ä¹  Rust çš„åŸºæœ¬è¯­æ³•åï¼Œä½ å¯ä»¥å¼€å§‹å­¦ä¹  Rust çš„é«˜çº§ç‰¹æ€§ã€‚è¿™äº›ç‰¹æ€§åŒ…æ‹¬ï¼š</p><ol><li>æ‰€æœ‰æƒå’Œå€Ÿç”¨ï¼šäº†è§£ Rust çš„æ‰€æœ‰æƒå’Œå€Ÿç”¨æœºåˆ¶ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥é¿å…å†…å­˜å®‰å…¨é—®é¢˜ã€‚</li></ol><p>Rust ä¸­çš„æ‰€æœ‰æƒå’Œå€Ÿç”¨æœºåˆ¶å¯ä»¥é¿å…å‡ºç°ä¸€äº›å¸¸è§çš„å†…å­˜å®‰å…¨é—®é¢˜ï¼Œä¾‹å¦‚ç©ºæŒ‡é’ˆå¼•ç”¨ã€æ‚¬å‚æŒ‡é’ˆå’Œå¤šé‡é‡Šæ”¾ç­‰ã€‚æ‰€æœ‰æƒæ˜¯ Rust çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒç¡®ä¿äº†ç¨‹åºåœ¨è¿è¡Œæ—¶åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…æ‹¥æœ‰æŸä¸ªå€¼ã€‚å½“è¿™ä¸ªæ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œè¿™ä¸ªå€¼å°†è¢«è‡ªåŠ¨é‡Šæ”¾ã€‚å€Ÿç”¨æœºåˆ¶åˆ™æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå…è®¸ç¨‹åºä»¥åªè¯»æˆ–è€…å¯å˜çš„æ–¹å¼å€Ÿç”¨æŸä¸ªå€¼çš„å¼•ç”¨ã€‚</p><ol start="2"><li>ç”Ÿå‘½å‘¨æœŸï¼šäº†è§£ Rust ä¸­çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ¥ç®¡ç†æ‰€æœ‰æƒå’Œå€Ÿç”¨ã€‚</li></ol><p>Rust ä¸­çš„ç”Ÿå‘½å‘¨æœŸæè¿°äº†ä¸€ä¸ªå€¼åœ¨ç¨‹åºä¸­å­˜åœ¨çš„æ—¶é•¿ã€‚ç”Ÿå‘½å‘¨æœŸé€šå¸¸ä¸å€Ÿç”¨æœ‰å…³ï¼Œå› ä¸ºåœ¨ Rust ä¸­ï¼Œéœ€è¦ç¡®ä¿ä¸€ä¸ªå¼•ç”¨åªèƒ½åœ¨å…¶å¼•ç”¨çš„å€¼å­˜åœ¨çš„æ—¶æœŸå†…å­˜åœ¨ã€‚</p><ol start="3"><li>Trait å’Œæ³›å‹ï¼šäº†è§£ Rust ä¸­çš„ trait å’Œæ³›å‹æœºåˆ¶ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥ç¼–å†™æ›´çµæ´»å’Œå¯é‡ç”¨çš„ä»£ç ã€‚</li></ol><p>Trait æ˜¯ Rust ä¸­çš„ä¸€ç§ç‰¹æ®Šç±»å‹ï¼Œå®ƒæè¿°äº†ä¸€ä¸ªç±»å‹çš„è¡Œä¸ºã€‚æ³›å‹åˆ™æ˜¯ä¸€ç§é€šç”¨çš„ç¼–ç¨‹æŠ€æœ¯ï¼Œå®ƒå…è®¸ç¼–å†™å¯é‡ç”¨çš„ä»£ç ã€‚Rust ä¸­çš„ trait å’Œæ³›å‹æœºåˆ¶ç»“åˆåœ¨ä¸€èµ·ï¼Œå¯ä»¥è®©ç¨‹åºå‘˜ç¼–å†™æ›´çµæ´»å’Œå¯é‡ç”¨çš„ä»£ç ã€‚</p><ol start="4"><li>å¼‚å¸¸å¤„ç†ï¼šäº†è§£ Rust ä¸­çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒæ¥å¤„ç†å¼‚å¸¸æƒ…å†µã€‚</li></ol><p>Rust ä¸­çš„å¼‚å¸¸å¤„ç†æœºåˆ¶åŒ…æ‹¬ panic å’Œ Result ç±»å‹ã€‚panic è¡¨ç¤ºä¸€ä¸ªç¨‹åºé‡åˆ°äº†æ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨ panic! å®æ¥è§¦å‘ panicã€‚Result ç±»å‹åˆ™æ˜¯ä¸€ç§åŒ…å«ä¸€ä¸ªå€¼æˆ–ä¸€ä¸ªé”™è¯¯çš„æšä¸¾ç±»å‹ï¼Œå¯ä»¥ç”¨æ¥åœ¨å‡½æ•°è°ƒç”¨ä¹‹é—´ä¼ é€’é”™è¯¯ä¿¡æ¯ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ Rust å®˜æ–¹æ–‡æ¡£ã€Rust By Example æˆ–è€… Rust Programming Language è¿™æœ¬ä¹¦æ¥æ·±å…¥å­¦ä¹  Rust çš„é«˜çº§ç‰¹æ€§ã€‚</p><p>è¯·å°è¯•ç†è§£è¿™äº›é«˜çº§ç‰¹æ€§ï¼Œå¹¶ç¼–å†™ä¸€äº›ç¨‹åºæ¥å·©å›ºæ‰€å­¦å†…å®¹ã€‚</p><h2 id="ç¬¬å››æ­¥ï¼šå®‰è£…-Rust">ç¬¬å››æ­¥ï¼šå®‰è£… Rust</h2><p>åœ¨å­¦ä¹  Rust ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®‰è£… Rust ç¯å¢ƒã€‚Rust æ”¯æŒå¤šä¸ªæ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬ Windowsã€Linux å’Œ macOS ç­‰ã€‚ä¸‹é¢æ˜¯åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸‹å®‰è£… Rust çš„æ–¹æ³•ï¼š</p><h3 id="åœ¨-Windows-ä¸Šå®‰è£…-Rust">åœ¨ Windows ä¸Šå®‰è£… Rust</h3><p>åœ¨ Windows ä¸Šå®‰è£… Rustï¼Œä½ éœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p>æ‰“å¼€ <a href="https://www.rust-lang.org/tools/install">Rust å®˜æ–¹ç½‘ç«™</a>ã€‚</p></li><li><p>ç‚¹å‡»é¡µé¢ä¸Šçš„ â€œDownload Rustupâ€ æŒ‰é’®ï¼Œä¸‹è½½ Rustup å®‰è£…ç¨‹åºã€‚</p></li><li><p>è¿è¡Œ Rustup å®‰è£…ç¨‹åºï¼ŒæŒ‰ç…§æç¤ºè¿›è¡Œå®‰è£…ã€‚</p></li><li><p>å®‰è£…å®Œæˆåï¼Œæ‰“å¼€å‘½ä»¤è¡Œå·¥å…·ï¼Œè¾“å…¥ <code>rustc --version</code> å‘½ä»¤ï¼Œæ£€æŸ¥ Rust æ˜¯å¦æˆåŠŸå®‰è£…ã€‚</p></li></ol><h3 id="åœ¨-Linux-æˆ–-macOS-ä¸Šå®‰è£…-Rust">åœ¨ Linux æˆ– macOS ä¸Šå®‰è£… Rust</h3><p>åœ¨ Linux æˆ– macOS ä¸Šå®‰è£… Rustï¼Œä½ éœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p>æ‰“å¼€ç»ˆç«¯çª—å£ã€‚</p></li><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¸‹è½½ Rustup å®‰è£…ç¨‹åºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl --proto <span class="hljs-string">&#x27;=https&#x27;</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£… Rustupï¼ŒæŒ‰ç…§æç¤ºè¿›è¡Œå®‰è£…ã€‚</p></li><li><p>å®‰è£…å®Œæˆåï¼Œæ‰“å¼€ç»ˆç«¯çª—å£ï¼Œè¾“å…¥ <code>rustc --version</code> å‘½ä»¤ï¼Œæ£€æŸ¥ Rust æ˜¯å¦æˆåŠŸå®‰è£…ã€‚</p></li></ol><h3 id="å®‰è£…-Rust-IDE">å®‰è£… Rust IDE</h3><p>å®‰è£…å¥½ Rust åï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨ç¼–å†™ Rust ç¨‹åºï¼Œä½†ä½¿ç”¨ä¸€ä¸ªå¥½çš„ IDE å¯ä»¥æé«˜ç¼–ç æ•ˆç‡ã€‚è¿™é‡Œä»‹ç»ä¸€äº› Rust IDEï¼š</p><ul><li><p>Visual Studio Codeï¼šå®ƒæ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºä»£ç ç¼–è¾‘å™¨ï¼Œå¯ä»¥ä½¿ç”¨ Rust æ’ä»¶æ¥å¼€å‘ Rust ç¨‹åºã€‚</p></li><li><p>IntelliJ IDEAï¼šå®ƒæ˜¯ä¸€ä¸ªå•†ä¸šåŒ–çš„ IDEï¼Œå¯ä»¥ä½¿ç”¨ Rust æ’ä»¶æ¥å¼€å‘ Rust ç¨‹åºã€‚</p></li><li><p>Rust-analyzerï¼šå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ Rust IDEï¼Œæä¾›äº†ä»£ç è‡ªåŠ¨è¡¥å…¨ã€ä»£ç é‡æ„ç­‰åŠŸèƒ½ã€‚</p></li></ul><p>ç°åœ¨ï¼Œä½ å·²ç»å®‰è£…å¥½äº† Rust ç¯å¢ƒå’Œ Rust IDEï¼Œå¯ä»¥å¼€å§‹ç¼–å†™ Rust ç¨‹åºäº†ã€‚</p><p>ä¸‹ä¸€æ­¥æˆ‘ä»¬æ¥å­¦ä¹  Rust çš„åŸºæœ¬è¯­æ³•ã€‚</p><h2 id="ç¬¬äº”æ­¥ï¼šå­¦ä¹ -Rust-çš„åŸºæœ¬è¯­æ³•">ç¬¬äº”æ­¥ï¼šå­¦ä¹  Rust çš„åŸºæœ¬è¯­æ³•</h2><p>åœ¨å­¦ä¹  Rust çš„åŸºæœ¬è¯­æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ Rust çš„ç‰¹ç‚¹ï¼š</p><ul><li><p>Rust æ˜¯ä¸€é—¨é™æ€ç±»å‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ„å‘³ç€ä½ éœ€è¦åœ¨ç¼–è¯‘æ—¶æŒ‡å®šå˜é‡ç±»å‹ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚</p></li><li><p>Rust é‡‡ç”¨æ‰€æœ‰æƒæ¨¡å‹æ¥ç®¡ç†å†…å­˜ï¼Œå¯ä»¥é¿å…å†…å­˜æ³„æ¼å’Œé‡æŒ‡é’ˆç­‰é—®é¢˜ã€‚</p></li><li><p>Rust é‡‡ç”¨æ¨¡å¼åŒ¹é…æ¥å¤„ç†æ§åˆ¶æµç¨‹ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç»„ç»‡ä»£ç é€»è¾‘ã€‚</p></li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å­¦ä¹  Rust çš„åŸºæœ¬è¯­æ³•ï¼š</p><h3 id="å˜é‡å’Œæ•°æ®ç±»å‹">å˜é‡å’Œæ•°æ®ç±»å‹</h3><p>åœ¨ Rust ä¸­ï¼Œä½ éœ€è¦åœ¨å£°æ˜å˜é‡æ—¶æŒ‡å®šå˜é‡ç±»å‹ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå£°æ˜æ•´æ•°å˜é‡çš„ç¤ºä¾‹ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå˜é‡ <code>x</code> çš„ç±»å‹æ˜¯ <code>i32</code>ï¼Œå®ƒçš„å€¼æ˜¯ <code>10</code>ã€‚</p><p>é™¤äº†æ•´æ•°ç±»å‹ï¼ŒRust è¿˜æ”¯æŒå…¶ä»–çš„æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬æµ®ç‚¹æ•°ã€å¸ƒå°”ç±»å‹ã€å­—ç¬¦ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ç­‰ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>let</code> å…³é”®å­—æ¥å£°æ˜å˜é‡ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">x</span>: <span class="hljs-type">f32</span> = <span class="hljs-number">3.14</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">y</span>: <span class="hljs-type">bool</span> = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">c</span>: <span class="hljs-type">char</span> = <span class="hljs-string">&#x27;A&#x27;</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">s</span>: &amp;<span class="hljs-type">str</span> = <span class="hljs-string">&quot;hello, world&quot;</span>;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>f32</code> è¡¨ç¤ºå•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œ<code>bool</code> è¡¨ç¤ºå¸ƒå°”ç±»å‹ï¼Œ<code>char</code> è¡¨ç¤ºå­—ç¬¦ç±»å‹ï¼Œ<code>&amp;str</code> è¡¨ç¤ºå­—ç¬¦ä¸²ç±»å‹ã€‚</p><h3 id="æ§åˆ¶æµç¨‹">æ§åˆ¶æµç¨‹</h3><p>åœ¨ Rust ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>if</code>/<code>else</code>ã€<code>loop</code>ã€<code>while</code> å’Œ <code>for</code> ç­‰å…³é”®å­—æ¥æ§åˆ¶ç¨‹åºçš„æµç¨‹ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>if</code>/<code>else</code> çš„ç¤ºä¾‹ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x is positive&quot;</span>);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x is negative&quot;</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;x is zero&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>if</code>/<code>else</code> æ¥åˆ¤æ–­å˜é‡ <code>x</code> çš„å€¼ï¼Œå¹¶è¾“å‡ºç›¸åº”çš„ä¿¡æ¯ã€‚</p><h3 id="å‡½æ•°">å‡½æ•°</h3><p>åœ¨ Rust ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>fn</code> å…³é”®å­—æ¥å®šä¹‰å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‡½æ•°ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">fib</span>(n: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span> &#123;<br>        <span class="hljs-number">1</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-title function_ invoke__">fib</span>(n - <span class="hljs-number">1</span>) + <span class="hljs-title function_ invoke__">fib</span>(n - <span class="hljs-number">2</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå‡½æ•°åä¸º <code>fib</code>ï¼Œå®ƒæ¥å—ä¸€ä¸ª <code>i32</code> ç±»å‹çš„å‚æ•° <code>n</code>ï¼Œè¿”å›ä¸€ä¸ª <code>i32</code> ç±»å‹çš„å€¼ã€‚å‡½æ•°å†…éƒ¨ä½¿ç”¨é€’å½’çš„æ–¹å¼è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ã€‚</p><h3 id="ç»“æ„ä½“å’Œæšä¸¾ç±»å‹">ç»“æ„ä½“å’Œæšä¸¾ç±»å‹</h3><p>åœ¨ Rust ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ç»“æ„ä½“å’Œæšä¸¾ç±»å‹æ¥ç»„ç»‡å¤æ‚çš„æ•°æ®ç»“æ„ã€‚ç»“æ„ä½“ç”¨äºç»„ç»‡ä¸€ç»„ç›¸å…³çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> &#123;<br>    x: <span class="hljs-type">f32</span>,<br>    y: <span class="hljs-type">f32</span>,<br>&#125;<br><br><span class="hljs-keyword">let</span> <span class="hljs-variable">origin</span> = Point &#123; x: <span class="hljs-number">0.0</span>, y: <span class="hljs-number">0.0</span> &#125;;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">point</span> = Point &#123; x: <span class="hljs-number">1.0</span>, y: <span class="hljs-number">2.0</span> &#125;;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Point</code> çš„ç»“æ„ä½“ï¼Œå®ƒåŒ…å«ä¸¤ä¸ª <code>f32</code> ç±»å‹çš„å­—æ®µ <code>x</code> å’Œ <code>y</code>ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>let</code> å…³é”®å­—æ¥åˆ›å»ºä¸€ä¸ª <code>origin</code> çš„å˜é‡ï¼Œå®ƒçš„å€¼æ˜¯ <code>&#123; x: 0.0, y: 0.0 &#125;</code>ã€‚æˆ‘ä»¬è¿˜åˆ›å»ºäº†ä¸€ä¸ª <code>point</code> çš„å˜é‡ï¼Œå®ƒçš„å€¼æ˜¯ <code>&#123; x: 1.0, y: 2.0 &#125;</code>ã€‚</p><p>æšä¸¾ç±»å‹ç”¨äºå®šä¹‰ä¸€ç»„å¯èƒ½çš„å€¼ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span> &#123;<br>    Red,<br>    Green,<br>    Blue,<br>&#125;<br><br><span class="hljs-keyword">let</span> <span class="hljs-variable">color</span> = Color::Red;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Color</code> çš„æšä¸¾ç±»å‹ï¼Œå®ƒåŒ…å«ä¸‰ä¸ªå¯èƒ½çš„å€¼ <code>Red</code>ã€<code>Green</code> å’Œ <code>Blue</code>ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>let</code> å…³é”®å­—æ¥åˆ›å»ºä¸€ä¸ª <code>color</code> çš„å˜é‡ï¼Œå®ƒçš„å€¼æ˜¯ <code>Color::Red</code>ã€‚</p><h3 id="Trait">Trait</h3><p>Trait æ˜¯ Rust ä¸­çš„ä¸€ç§ç‰¹æ®Šç±»å‹ï¼Œå®ƒç”¨äºå®šä¹‰ä¸€ç»„è¡Œä¸ºæˆ–åŠŸèƒ½ï¼Œå¯ä»¥è¢«å¤šä¸ªç±»å‹å®ç°ã€‚ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„æ¥å£ï¼ŒTrait å¯ä»¥è®©ä½ å®šä¹‰ä¸€ç»„æ–¹æ³•ï¼Œå¹¶åœ¨å¤šä¸ªç±»å‹ä¹‹é—´å…±äº«è¿™äº›æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå®šä¹‰ <code>Animal</code> Trait çš„ç¤ºä¾‹ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">make_sound</span>(&amp;<span class="hljs-keyword">self</span>);<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Dog</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cat</span>;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Animal</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Dog</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">make_sound</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;woof&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Animal</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Cat</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">make_sound</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;meow&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>Animal</code> Traitï¼Œå®ƒåŒ…å«ä¸€ä¸ª <code>make_sound</code> æ–¹æ³•ã€‚æˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸¤ä¸ªç±»å‹ <code>Dog</code> å’Œ <code>Cat</code>ï¼Œå®ƒä»¬éƒ½å®ç°äº† <code>Animal</code> Traitï¼Œå¹¶åˆ†åˆ«å®ç°äº†è‡ªå·±çš„ <code>make_sound</code> æ–¹æ³•ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å·²ç»å­¦ä¹ äº† Rust çš„åŸºæœ¬è¯­æ³•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¼šå­¦ä¹  Rust çš„é«˜çº§ç‰¹æ€§ã€‚</p><h3 id="æ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸ">æ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸ</h3><p>åœ¨ Rust ä¸­ï¼Œæ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ï¼ˆownerï¼‰ï¼Œåªæœ‰æ‰€æœ‰è€…æ‰èƒ½æ§åˆ¶è¿™ä¸ªå€¼çš„ç”Ÿå‘½å‘¨æœŸã€‚å½“æ‰€æœ‰è€…è¶…å‡ºä½œç”¨åŸŸæˆ–è¢«æ˜¾å¼é‡Šæ”¾æ—¶ï¼Œä¸ä¹‹å…³è”çš„å€¼å°†è¢«é”€æ¯ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª <code>String</code> ç±»å‹çš„å˜é‡ <code>s</code>ï¼Œå¹¶åœ¨ <code>println!</code> å®ä¸­ä½¿ç”¨äº†å®ƒã€‚åœ¨ <code>println!</code> å®æ‰§è¡Œå®Œæ¯•åï¼Œ<code>s</code> çš„æ‰€æœ‰æƒä¼šè¢«é‡Šæ”¾ï¼Œ<code>String</code> ç±»å‹çš„å€¼ä¹Ÿä¼šè¢«é”€æ¯ã€‚</p><p>ä¸ºäº†é¿å…æ‰€æœ‰æƒé—®é¢˜ï¼ŒRust å¼•å…¥äº†å¼•ç”¨ï¼ˆreferenceï¼‰çš„æ¦‚å¿µã€‚å¼•ç”¨æ˜¯ä¸€ä¸ªæŒ‡å‘å€¼çš„æŒ‡é’ˆï¼Œå®ƒä¸æ‹¥æœ‰è¿™ä¸ªå€¼ï¼Œåªæ˜¯å¯¹å®ƒè¿›è¡Œäº†å€Ÿç”¨ã€‚å¼•ç”¨é€šè¿‡ <code>&amp;</code> ç¬¦å·æ¥åˆ›å»ºï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">len</span> = <span class="hljs-title function_ invoke__">calculate_length</span>(&amp;s);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The length of &#x27;&#123;&#125;&#x27; is &#123;&#125;.&quot;</span>, s, len);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">calculate_length</span>(s: &amp;<span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> &#123;<br>    s.<span class="hljs-title function_ invoke__">len</span>()<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>calculate_length</code> çš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª <code>String</code> ç±»å‹çš„å¼•ç”¨ï¼Œå¹¶è¿”å›å®ƒçš„é•¿åº¦ã€‚åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª <code>String</code> ç±»å‹çš„å˜é‡ <code>s</code>ï¼Œç„¶åè°ƒç”¨ <code>calculate_length</code> å‡½æ•°å¹¶å°†å®ƒçš„å¼•ç”¨ä½œä¸ºå‚æ•°ä¼ é€’ã€‚åœ¨ <code>calculate_length</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>s.len()</code> æ–¹æ³•æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¿å…äº†å°† <code>String</code> ç±»å‹çš„æ‰€æœ‰æƒä¼ é€’ç»™å‡½æ•°çš„é—®é¢˜ï¼Œå› ä¸ºå‡½æ•°åªæ˜¯å¯¹å®ƒè¿›è¡Œäº†å€Ÿç”¨ï¼Œè€Œä¸æ˜¯æ‹¥æœ‰å®ƒã€‚</p><p>åœ¨ Rust ä¸­ï¼Œå¼•ç”¨è¿˜æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆlifetimeï¼‰çš„æ¦‚å¿µã€‚ç”Ÿå‘½å‘¨æœŸç”¨äºå®šä¹‰å¼•ç”¨çš„æœ‰æ•ˆæœŸï¼Œç¡®ä¿å¼•ç”¨ä¸ä¼šè¶…å‡ºå®ƒæ‰€æŒ‡å‘çš„å€¼çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">string1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;long string is long&quot;</span>);<br><br>    &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">string2</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;xyz&quot;</span>);<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">longest</span>(string1.<span class="hljs-title function_ invoke__">as_str</span>(), string2.<span class="hljs-title function_ invoke__">as_str</span>());<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The longest string is &#x27;&#123;&#125;&#x27;&quot;</span>, result);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">longest</span>&lt;<span class="hljs-symbol">&#x27;a</span>&gt;(x: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>, y: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span> &#123;<br>    <span class="hljs-keyword">if</span> x.<span class="hljs-title function_ invoke__">len</span>() &gt; y.<span class="hljs-title function_ invoke__">len</span>() &#123;<br>        x<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        y<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>longest</code> å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå¼•ç”¨ <code>x</code> å’Œ <code>y</code>ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸè¢«å®šä¹‰ä¸º <code>'a</code>ã€‚åœ¨å‡½æ•°ä½“ä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒäº†è¿™ä¸¤ä¸ªå¼•ç”¨æ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå¹¶è¿”å›äº†é•¿åº¦æ›´é•¿çš„é‚£ä¸ªå­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚</p><p>è¿™é‡Œä½¿ç”¨äº†ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µæ¥ç¡®ä¿ <code>longest</code> å‡½æ•°è¿”å›çš„å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸ä¼šè¶…å‡º <code>x</code> å’Œ <code>y</code> å¼•ç”¨æ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿™æ˜¯å› ä¸ºåœ¨å‡½æ•°è¿”å›æ—¶ï¼Œå‡½æ•°å†…éƒ¨çš„ <code>string2</code> å˜é‡å·²ç»è¶…å‡ºäº†ä½œç”¨åŸŸï¼Œå¯¹åº”çš„ <code>String</code> ç±»å‹çš„å€¼å·²ç»è¢«é”€æ¯ã€‚å› æ­¤ï¼Œè¿”å›çš„å­—ç¬¦ä¸²å¼•ç”¨å¿…é¡»è¦ç¡®ä¿ä¸ä¼šè¶…å‡º <code>string1</code> å’Œ <code>string2</code> çš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´ã€‚</p><p>åœ¨ Rust ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸå¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥æ³¨æ˜ï¼š</p><ul><li><code>'a</code>ï¼šè¡¨ç¤ºä¸€ä¸ªåä¸º <code>'a</code> çš„ç”Ÿå‘½å‘¨æœŸã€‚</li><li><code>&amp;'a</code>ï¼šè¡¨ç¤ºä¸€ä¸ªå¼•ç”¨ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸º <code>'a</code>ã€‚</li><li><code>&amp;'a mut</code>ï¼šè¡¨ç¤ºä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸º <code>'a</code>ã€‚</li></ul><p>ä¸ºäº†æ­£ç¡®ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬éœ€è¦ç†è§£å®ƒä»¬çš„å…³ç³»å’Œä½œç”¨åŸŸï¼Œå¹¶é€šè¿‡åˆé€‚çš„æ–¹å¼è¿›è¡Œæ³¨æ˜å’Œç®¡ç†ã€‚</p><h4 id="æé—®">æé—®</h4><ol><li>Rust ä¸­çš„æ‰€æœ‰æƒå’Œå¼•ç”¨æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</li><li>ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿåœ¨ Rust ä¸­å¦‚ä½•æ³¨æ˜ç”Ÿå‘½å‘¨æœŸï¼Ÿ</li><li>å¦‚ä½•é¿å…æ‰€æœ‰æƒé—®é¢˜ï¼Ÿå¯ä»¥ç»™å‡ºä¸€ä¸ªä¾‹å­è¯´æ˜å—ï¼Ÿ</li></ol><h2 id="ç¬¬å››éƒ¨åˆ†ï¼šé«˜çº§ä¸»é¢˜">ç¬¬å››éƒ¨åˆ†ï¼šé«˜çº§ä¸»é¢˜</h2><p>åœ¨å‰é¢çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ äº† Rust ä¸­çš„åŸºæœ¬è¯­æ³•ã€æ‰€æœ‰æƒã€ç”Ÿå‘½å‘¨æœŸã€æ¨¡å—åŒ–å’Œå¹¶å‘ç¼–ç¨‹ç­‰çŸ¥è¯†ã€‚åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ç»§ç»­å­¦ä¹  Rust ä¸­çš„é«˜çº§ä¸»é¢˜ã€‚</p><h3 id="1-æ³›å‹å’Œ-trait">1. æ³›å‹å’Œ trait</h3><p>æ³›å‹å’Œ trait æ˜¯ Rust ä¸­éå¸¸é‡è¦çš„æ¦‚å¿µï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¼–å†™å¯é‡ç”¨çš„ä»£ç ï¼Œä»è€Œå‡å°‘é‡å¤çš„å·¥ä½œé‡ã€‚</p><p>æ³›å‹æ˜¯æŒ‡ä½¿ç”¨å‚æ•°åŒ–ç±»å‹æ¥ç¼–å†™é€šç”¨ä»£ç çš„æŠ€æœ¯ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹å®ç°ä¸€ä¸ªé€šç”¨çš„æ ˆç»“æ„ï¼Œè¯¥æ ˆå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å€¼ã€‚åœ¨ Rust ä¸­ï¼Œä½¿ç”¨ <code>&lt;T&gt;</code> æ¥å£°æ˜æ³›å‹ç±»å‹ï¼Œå¹¶åœ¨å‡½æ•°å®šä¹‰ä¸­ä½¿ç”¨å®ƒã€‚</p><p>Trait æ˜¯ä¸€ç§ç±»ä¼¼äºæ¥å£çš„æ¦‚å¿µï¼Œå®ƒå®šä¹‰äº†ä¸€ç»„æ–¹æ³•çš„é›†åˆï¼Œç”¨äºæè¿°ç±»å‹çš„è¡Œä¸ºã€‚Trait å¯ä»¥è¢«ç”¨æ¥é™å®šæ³›å‹å‚æ•°çš„ç±»å‹ï¼Œä»è€Œå®ç°å¯¹ç±»å‹è¿›è¡Œçº¦æŸã€‚åœ¨ Rust ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>impl Trait</code> æ¥å®ç°ä¸€ä¸ª traitï¼Œä½¿å¾—ä¸€ä¸ªç±»å‹èƒ½å¤Ÿæ‹¥æœ‰è¿™äº›æ–¹æ³•ã€‚</p><h4 id="æé—®-2">æé—®</h4><ol><li>ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿå¦‚ä½•åœ¨ Rust ä¸­ä½¿ç”¨æ³›å‹ï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯ traitï¼Ÿå¦‚ä½•åœ¨ Rust ä¸­å®šä¹‰å’Œä½¿ç”¨ traitï¼Ÿ</li></ol><h3 id="2-å®">2. å®</h3><p>å®æ˜¯ Rust ä¸­éå¸¸æœ‰ç”¨çš„ä¸€ç§åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è®©ç¨‹åºå‘˜ç¼–å†™è‡ªå·±çš„ä»£ç ç”Ÿæˆå™¨ã€‚å®å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šå£°æ˜å¼å®å’Œè¿‡ç¨‹å¼å®ã€‚</p><p>å£°æ˜å¼å®æ˜¯ä¸€ç§åŸºäºæ¨¡å¼åŒ¹é…çš„å®ï¼Œå®ƒçš„è¾“å…¥æ˜¯ä¸€æ®µ Rust ä»£ç ï¼Œè¾“å‡ºæ˜¯ä¸€æ®µ Rust ä»£ç ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å®ç°ç±»ä¼¼äºå‡½æ•°è°ƒç”¨çš„è¯­æ³•ï¼Œä½†æ˜¯åœ¨ç¼–è¯‘æ—¶ä¼šç”Ÿæˆç›¸åº”çš„ä»£ç ã€‚</p><p>è¿‡ç¨‹å¼å®æ˜¯ä¸€ç§åŸºäºç¼–è¯‘å™¨çš„ API çš„å®ï¼Œå®ƒå¯ä»¥ç”¨äºåœ¨ç¼–è¯‘æ—¶å¯¹ Rust ä»£ç è¿›è¡Œæ“ä½œã€‚è¿‡ç¨‹å¼å®å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼šè‡ªå®šä¹‰æ´¾ç”Ÿå®ã€å‡½æ•°å®å’Œå±æ€§å®ã€‚æ¯ç§è¿‡ç¨‹å¼å®éƒ½æœ‰ä¸åŒçš„åº”ç”¨åœºæ™¯å’Œä¼˜åŠ¿ã€‚</p><h4 id="æé—®-3">æé—®</h4><ol><li>ä»€ä¹ˆæ˜¯å®ï¼Ÿå®å¯ä»¥ç”¨æ¥åšä»€ä¹ˆï¼Ÿ</li><li>å£°æ˜å¼å®å’Œè¿‡ç¨‹å¼å®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸRust ä¸­æœ‰å“ªäº›ç±»å‹çš„è¿‡ç¨‹å¼å®ï¼Ÿ</li></ol><h3 id="3-Unsafe-Rust">3. Unsafe Rust</h3><p>è™½ç„¶ Rust æ˜¯ä¸€ä¸ªå®‰å…¨çš„è¯­è¨€ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€äº›ä¸å®‰å…¨çš„æ“ä½œï¼Œä¾‹å¦‚å¯¹å†…å­˜è¿›è¡Œæ“ä½œã€ç»•è¿‡å€Ÿç”¨è§„åˆ™ç­‰ç­‰ã€‚ä¸ºäº†æ”¯æŒè¿™ç§æ“ä½œï¼ŒRust æä¾›äº† <code>unsafe</code> å…³é”®å­—ã€‚</p><p>åœ¨ Rust ä¸­ï¼Œ<code>unsafe</code> å…³é”®å­—ç”¨äºæ ‡è®°ä¸å®‰å…¨çš„ä»£ç å—ï¼Œè¿™æ ·ç¼–è¯‘å™¨å°±ä¼šå…³é—­ä¸€äº›æ£€æŸ¥å’Œé™åˆ¶ã€‚ä½¿ç”¨ <code>unsafe</code> å…³é”®å­—ç¼–å†™çš„ä»£ç éœ€è¦ç‰¹åˆ«å°å¿ƒï¼Œå› ä¸ºè¿™äº›ä»£ç å¯ä»¥é€ æˆå†…å­˜æ³„æ¼ã€æ®µé”™è¯¯ç­‰çš„é—®é¢˜ï¼Œè€Œä¸”å¯èƒ½ä¼šå¯¼è‡´å®‰å…¨æ¼æ´ã€‚</p><p>åœ¨ä½¿ç”¨ <code>unsafe</code> ä»£ç æ—¶ï¼Œéœ€è¦éµå¾ªä¸€äº›è§„åˆ™å’Œæœ€ä½³å®è·µï¼Œä¾‹å¦‚é¿å…æœªå®šä¹‰è¡Œä¸ºã€æ­£ç¡®å¤„ç†æŒ‡é’ˆã€ä¿è¯æ•°æ®çš„åŒæ­¥å’Œå¹¶å‘å®‰å…¨ç­‰ç­‰ã€‚</p><h4 id="æé—®-4">æé—®</h4><ol><li>ä»€ä¹ˆæ˜¯ <code>unsafe</code> å…³é”®å­—ï¼Ÿå®ƒç”¨äºæ ‡è®°ä»€ä¹ˆæ ·çš„ä»£ç å—ï¼Ÿ</li><li>ä½¿ç”¨ <code>unsafe</code> ä»£ç éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿåœ¨ä½¿ç”¨ <code>unsafe</code> ä»£ç æ—¶éœ€è¦éµå¾ªå“ªäº›è§„åˆ™å’Œæœ€ä½³å®è·µï¼Ÿ</li></ol><h3 id="4-FFI">4. FFI</h3><p>FFIï¼ˆForeign Function Interfaceï¼‰æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥è®©ä¸åŒçš„è¯­è¨€ä¹‹é—´è¿›è¡Œäº¤äº’ã€‚Rust æä¾›äº†å¼ºå¤§çš„ FFI æ”¯æŒï¼Œå¯ä»¥ä¸å…¶ä»–è¯­è¨€è¿›è¡Œæ— ç¼é›†æˆã€‚</p><p>åœ¨ Rust ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>extern</code> å…³é”®å­—å£°æ˜ä¸€ä¸ªå¤–éƒ¨å‡½æ•°ï¼Œä»è€Œä½¿å…¶å¯ä»¥è¢«å…¶ä»–è¯­è¨€è°ƒç”¨ã€‚åŒæ—¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>#[no_mangle]</code> å±æ€§æ¥é˜²æ­¢ Rust ç¼–è¯‘å™¨é‡å‘½åå‡½æ•°åç§°ã€‚å¦å¤–ï¼ŒRust è¿˜æä¾›äº† C å…¼å®¹çš„æ•°æ®ç±»å‹å’Œ APIï¼Œä»è€Œä½¿å¾—ä¸ C è¯­è¨€çš„äº¤äº’å˜å¾—éå¸¸æ–¹ä¾¿ã€‚</p><h4 id="æé—®-5">æé—®</h4><ol><li>ä»€ä¹ˆæ˜¯ FFIï¼Ÿä¸ºä»€ä¹ˆéœ€è¦ FFIï¼Ÿ</li><li>åœ¨ Rust ä¸­å¦‚ä½•ä½¿ç”¨ FFIï¼ŸRust æä¾›äº†å“ªäº›æœºåˆ¶æ¥æ–¹ä¾¿ä¸å…¶ä»–è¯­è¨€è¿›è¡Œäº¤äº’ï¼Ÿ</li></ol><h3 id="5-ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜æ¨¡å‹">5. ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜æ¨¡å‹</h3><p>åœ¨ Rust ä¸­ï¼Œæ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸæ˜¯ç®¡ç†å†…å­˜çš„å…³é”®æ¦‚å¿µã€‚é€šè¿‡è¿™äº›æœºåˆ¶ï¼ŒRust ç¡®ä¿ç¨‹åºè¿è¡Œæ—¶çš„å†…å­˜å®‰å…¨å’Œæ­£ç¡®æ€§ã€‚</p><p>åœ¨ Rust ä¸­ï¼Œå†…å­˜è¢«åˆ†ä¸ºå †å’Œæ ˆã€‚å †æ˜¯ç”¨äºå­˜å‚¨åŠ¨æ€åˆ†é…çš„æ•°æ®çš„åŒºåŸŸï¼Œè€Œæ ˆæ˜¯ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°çš„åŒºåŸŸã€‚Rust é€šè¿‡æ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸæ¥ç®¡ç†å †å’Œæ ˆä¸­çš„å†…å­˜ã€‚</p><p>æ‰€æœ‰æƒæ˜¯æŒ‡å¯¹äºä»»ä½•ä¸€ä¸ªå€¼ï¼Œéƒ½æœ‰ä¸€ä¸ªæ‹¥æœ‰å®ƒçš„å˜é‡ã€‚å½“è¯¥å˜é‡è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œå®ƒæ‰€æ‹¥æœ‰çš„å€¼å°±ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡å€¼å­˜åœ¨çš„æ—¶é—´ï¼Œå®ƒå†³å®šäº†å€¼åœ¨å†…å­˜ä¸­çš„å­˜æ´»æ—¶é—´ã€‚</p><p>é€šè¿‡ç”Ÿå‘½å‘¨æœŸå’Œæ‰€æœ‰æƒçš„æœºåˆ¶ï¼ŒRust å¯ä»¥é¿å…è®¸å¤šå†…å­˜ç›¸å…³çš„é—®é¢˜ï¼Œä¾‹å¦‚ç©ºæŒ‡é’ˆã€é‡æŒ‡é’ˆã€å†…å­˜æ³„æ¼ç­‰ç­‰ã€‚</p><h4 id="æé—®-6">æé—®</h4><ol><li>åœ¨ Rust ä¸­ï¼Œå†…å­˜è¢«åˆ†ä¸ºå“ªä¸¤ç§ç±»å‹ï¼Ÿæ¯ç§ç±»å‹åˆ†åˆ«ç”¨æ¥å­˜å‚¨ä»€ä¹ˆæ ·çš„æ•°æ®ï¼Ÿ</li><li>æ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸæ˜¯å¦‚ä½•ç®¡ç†å†…å­˜çš„ï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</li></ol><h3 id="6-å¹¶å‘ç¼–ç¨‹">6. å¹¶å‘ç¼–ç¨‹</h3><p>å¹¶å‘ç¼–ç¨‹æ˜¯ç°ä»£è®¡ç®—æœºç§‘å­¦ä¸­éå¸¸é‡è¦çš„è¯é¢˜ä¹‹ä¸€ã€‚åœ¨ Rust ä¸­ï¼Œå¯ä»¥ä½¿ç”¨çº¿ç¨‹å’Œé€šé“æ¥å®ç°å¹¶å‘ç¼–ç¨‹ã€‚</p><p>çº¿ç¨‹æ˜¯ä¸€ç§æ‰§è¡Œè·¯å¾„ï¼Œå®ƒå¯ä»¥è®©ç¨‹åºåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚</p><p>åœ¨ Rust ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„ <code>std::thread</code> æ¨¡å—æ¥åˆ›å»ºçº¿ç¨‹ã€‚é€šè¿‡ <code>std::thread::spawn</code> å‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹å¹¶å¯åŠ¨å®ƒçš„æ‰§è¡Œã€‚åŒæ—¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>std::sync</code> æ¨¡å—æä¾›çš„äº’æ–¥é”å’Œæ¡ä»¶å˜é‡æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥å’Œé€šä¿¡ã€‚</p><p>é™¤äº†çº¿ç¨‹å’Œé€šé“ï¼ŒRust è¿˜æä¾›äº†ä¸€ç§æ›´åŠ é«˜çº§çš„å¹¶å‘ç¼–ç¨‹æ¨¡å‹ï¼Œå³ <code>async/await</code>ã€‚<code>async/await</code> æ˜¯ä¸€ç§åŸºäºåç¨‹çš„å¹¶å‘ç¼–ç¨‹æ¨¡å‹ï¼Œå®ƒå…è®¸åœ¨å•ä¸ªçº¿ç¨‹ä¸ŠåŒæ—¶æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶é€šè¿‡ <code>await</code> å…³é”®å­—æ¥å®ç°éé˜»å¡å¼çš„ç­‰å¾…ã€‚</p><h4 id="æé—®-7">æé—®</h4><ol><li>ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿå¦‚ä½•åœ¨ Rust ä¸­åˆ›å»ºå’Œå¯åŠ¨çº¿ç¨‹ï¼Ÿ</li><li>Rust ä¸­å¦‚ä½•å®ç°çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥å’Œé€šä¿¡ï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯ <code>async/await</code>ï¼Ÿå®ƒæ˜¯å¦‚ä½•å®ç°å¹¶å‘ç¼–ç¨‹çš„ï¼Ÿ</li></ol><h2 id="å®è·µé¡¹ç›®">å®è·µé¡¹ç›®</h2><p>åœ¨å­¦ä¹  Rust è¯­è¨€çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯å°è¯•å®ç°ä¸€äº›å®é™…çš„é¡¹ç›®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›é€‚åˆåˆå­¦è€…å°è¯•çš„ Rust é¡¹ç›®ï¼š</p><ol><li><p>Web åº”ç”¨ç¨‹åºï¼šä½¿ç”¨ Rust å’Œä¸€äº›æµè¡Œçš„ Web æ¡†æ¶ï¼ˆä¾‹å¦‚ <code>actix-web</code>ï¼‰æ„å»ºä¸€ä¸ª Web åº”ç”¨ç¨‹åºï¼Œå®ç°ç”¨æˆ·è®¤è¯ã€æ•°æ®å­˜å‚¨å’Œé¡µé¢æ¸²æŸ“ç­‰åŠŸèƒ½ã€‚</p></li><li><p>å‘½ä»¤è¡Œå·¥å…·ï¼šä½¿ç”¨ Rust ç¼–å†™ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå®ç°æ–‡ä»¶æ“ä½œã€ç³»ç»Ÿç®¡ç†ç­‰åŠŸèƒ½ã€‚</p></li><li><p>æ¸¸æˆï¼šä½¿ç”¨ Rust å’Œä¸€äº›æ¸¸æˆå¼•æ“ï¼ˆä¾‹å¦‚ <code>amethyst</code>ï¼‰æ„å»ºä¸€ä¸ªç®€å•çš„ 2D æˆ– 3D æ¸¸æˆã€‚</p></li><li><p>ç³»ç»Ÿç¼–ç¨‹ï¼šä½¿ç”¨ Rust ç¼–å†™ä¸€äº›ç³»ç»Ÿçº§åˆ«çš„ç¨‹åºï¼Œä¾‹å¦‚æ“ä½œç³»ç»Ÿã€æ–‡ä»¶ç³»ç»Ÿæˆ–ç½‘ç»œåè®®ç­‰ã€‚</p></li></ol><p>ä»¥ä¸Šæ˜¯ä¸€äº›é€‚åˆåˆå­¦è€…å°è¯•çš„ Rust é¡¹ç›®ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„å…´è¶£å’Œå®é™…æƒ…å†µé€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¿›è¡Œå®è·µã€‚å®è·µè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ç»“åˆæœ¬æ•™ç¨‹ä¸­çš„çŸ¥è¯†ç‚¹ï¼Œä¸æ–­åœ°å­¦ä¹ å’Œæ¢ç´¢ Rust è¯­è¨€çš„å„ç§ç‰¹æ€§å’Œç”¨æ³•ã€‚</p><p>å½“ä½ å®Œæˆäº†ä¸€ä¸ªé¡¹ç›®ä¹‹åï¼Œå¯ä»¥è€ƒè™‘å°†å…¶å‘å¸ƒåˆ° Rust ç¤¾åŒºä¸­ï¼Œä»¥ä¾¿å…¶ä»–äººä¹Ÿå¯ä»¥ä½¿ç”¨å’Œå­¦ä¹ ã€‚ä»¥ä¸‹æ˜¯ä¸€äº› Rust ç¤¾åŒºä¸­çš„é¡¹ç›®å‘å¸ƒå¹³å°ï¼š</p><ol><li><p><a href="https://crates.io/">crates.io</a>ï¼šRust ç¤¾åŒºä¸­æœ€æµè¡Œçš„é¡¹ç›®å‘å¸ƒå¹³å°ï¼Œç±»ä¼¼äº Node.js çš„ npm å’Œ Python çš„ PyPIã€‚</p></li><li><p><a href="https://github.com/">GitHub</a>ï¼šä¸€ä¸ªæµè¡Œçš„ä»£ç æ‰˜ç®¡å’Œç‰ˆæœ¬æ§åˆ¶å¹³å°ï¼Œå¯ä»¥å°†ä½ çš„ Rust é¡¹ç›®å‘å¸ƒåˆ° GitHub ä¸Šï¼Œå¹¶é€šè¿‡ GitHub Pages æ„å»ºå’Œéƒ¨ç½²æ–‡æ¡£ã€‚</p></li><li><p><a href="https://gitlab.com/">GitLab</a>ï¼šç±»ä¼¼äº GitHub çš„å¦ä¸€ä¸ªä»£ç æ‰˜ç®¡å’Œç‰ˆæœ¬æ§åˆ¶å¹³å°ã€‚</p></li><li><p><a href="https://launchpad.net/">Launchpad</a>ï¼šä¸€ä¸ª Ubuntu Linux å‘è¡Œç‰ˆä½¿ç”¨çš„è½¯ä»¶åŒ…æ„å»ºå’Œå‘å¸ƒå¹³å°ï¼Œå¯ä»¥ç”¨äºå‘å¸ƒ Rust é¡¹ç›®çš„ Ubuntu è½¯ä»¶åŒ…ã€‚</p></li><li><p><a href="https://aur.archlinux.org/">AUR</a>ï¼šä¸€ä¸ª Arch Linux ç¤¾åŒºç»´æŠ¤çš„è½¯ä»¶åŒ…æ„å»ºå’Œå‘å¸ƒå¹³å°ï¼Œå¯ä»¥ç”¨äºå‘å¸ƒ Rust é¡¹ç›®çš„ Arch Linux è½¯ä»¶åŒ…ã€‚</p></li></ol><p>ä»¥ä¸Šæ˜¯ä¸€äº› Rust é¡¹ç›®å‘å¸ƒå¹³å°ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å’Œåå¥½é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¿›è¡Œä½¿ç”¨ã€‚</p><p>å¦å¤–ï¼Œå‚ä¸ Rust ç¤¾åŒºä¸­çš„å¼€æºé¡¹ç›®ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„å­¦ä¹  Rust çš„æ–¹å¼ã€‚åœ¨ Rust ç¤¾åŒºä¸­ï¼Œæœ‰è®¸å¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œä¾‹å¦‚ Rust æ ‡å‡†åº“ã€Rust ç¼–è¯‘å™¨ã€Cargo ç­‰ã€‚é€šè¿‡å‚ä¸è¿™äº›é¡¹ç›®çš„å¼€å‘å’Œç»´æŠ¤ï¼Œå¯ä»¥å­¦ä¹ åˆ° Rust çš„æœ€ä½³å®è·µã€ä»£ç è§„èŒƒå’Œå·¥å…·é“¾ç­‰æ–¹é¢çš„çŸ¥è¯†ã€‚</p><h4 id="æé—®-8">æé—®</h4><ol><li>Rust ç¤¾åŒºä¸­æœ€æµè¡Œçš„é¡¹ç›®å‘å¸ƒå¹³å°æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å°† Rust é¡¹ç›®å‘å¸ƒåˆ°è¿™ä¸ªå¹³å°ä¸Šï¼Ÿ</li><li>Rust ç¤¾åŒºä¸­æœ‰å“ªäº›ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Ÿå¦‚ä½•å‚ä¸è¿™äº›é¡¹ç›®çš„å¼€å‘å’Œç»´æŠ¤ï¼Ÿ</li></ol><h2 id="æ€»ç»“">æ€»ç»“</h2><p>æœ¬æ•™ç¨‹ä»‹ç»äº† Rust è¯­è¨€çš„åŸºæœ¬è¯­æ³•ã€æ•°æ®ç±»å‹ã€æ§åˆ¶ç»“æ„ã€å‡½æ•°å’Œæ¨¡å—ã€é”™è¯¯å¤„ç†ã€é¢å‘å¯¹è±¡ç¼–ç¨‹ã€æ³›å‹ã€è¿­ä»£å™¨å’Œé—­åŒ…ã€å¹¶å‘ç¼–ç¨‹ä»¥åŠå®è·µé¡¹ç›®ç­‰æ–¹é¢çš„çŸ¥è¯†ã€‚é€šè¿‡å­¦ä¹ æœ¬æ•™ç¨‹ï¼Œä½ åº”è¯¥å¯ä»¥æŒæ¡ Rust è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼Œå¹¶èƒ½å¤Ÿä½¿ç”¨ Rust ç¼–å†™ä¸€äº›å®é™…çš„é¡¹ç›®ã€‚</p><p>å½“ç„¶ï¼ŒRust è¯­è¨€çš„å­¦ä¹ æ˜¯ä¸€ä¸ªæŒç»­ä¸æ–­çš„è¿‡ç¨‹ã€‚åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œä½ ä¼šé‡åˆ°è®¸å¤šé—®é¢˜å’ŒæŒ‘æˆ˜ï¼Œéœ€è¦ä¸æ–­åœ°å­¦ä¹ å’Œæ¢ç´¢ã€‚åŒæ—¶ï¼Œä¹Ÿè¦å¤šå‚ä¸ Rust ç¤¾åŒºä¸­çš„è®¨è®ºå’Œæ´»åŠ¨ï¼Œç»“è¯†æ›´å¤šçš„ Rust çˆ±å¥½è€…å’Œå¼€å‘è€…ï¼Œå…±åŒæ¨åŠ¨ Rust è¯­è¨€çš„å‘å±•å’Œåº”ç”¨ã€‚</p><p>ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Rustå­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rustå­¦ä¹ ç¬”è®° </tag>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·Ÿç€ChatGPTå­¦C++ï¼šç¬¬äºŒè¯¾</title>
      <link href="/2023/02/16/%E8%B7%9F%E7%9D%80ChatGPT%E5%AD%A6C-%EF%BC%9A%E7%AC%AC%E4%BA%8C%E8%AF%BE/"/>
      <url>/2023/02/16/%E8%B7%9F%E7%9D%80ChatGPT%E5%AD%A6C-%EF%BC%9A%E7%AC%AC%E4%BA%8C%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1>è·Ÿç€ChatGPTå­¦C++ï¼šç¬¬äºŒè¯¾</h1><p>è¯·æ ¹æ®æ˜¨å¤©çš„å†…å®¹ç»§ç»­æ‚¨çš„è¯¾å ‚è®²è§£</p><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬ç»§ç»­æ·±å…¥å­¦ä¹ C++å‡½æ•°ã€‚</p><p>åœ¨C++ä¸­ï¼Œå‡½æ•°çš„å®ç°å¯ä»¥åœ¨å‡½æ•°å®šä¹‰çš„ä½ç½®ä¹‹å‰æˆ–ä¹‹åï¼Œä½†å‡½æ•°å£°æ˜å¿…é¡»åœ¨å‡½æ•°ä½¿ç”¨ä¹‹å‰ã€‚å‡½æ•°å£°æ˜æ˜¯å‡½æ•°çš„ä¸€ä¸ªå‰ç½®å£°æ˜ï¼Œå®ƒæŒ‡å®šäº†å‡½æ•°çš„åç§°ã€å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ã€‚å‡½æ•°å£°æ˜é€šå¸¸æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åœ¨å¤šä¸ªæºæ–‡ä»¶ä¸­ä½¿ç”¨è¯¥å‡½æ•°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå…¶ä¸­æˆ‘ä»¬åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜äº†å‡½æ•°addï¼Œå¹¶åœ¨æºæ–‡ä»¶ä¸­å®šä¹‰äº†å®ƒï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// å¤´æ–‡ä»¶ add.h</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span>;<br><br><span class="hljs-comment">// æºæ–‡ä»¶ add.cpp</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;add.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨å¤´æ–‡ä»¶add.hä¸­å£°æ˜äº†å‡½æ•°addï¼ŒæŒ‡å®šäº†å®ƒçš„åç§°ã€å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ã€‚ç„¶åæˆ‘ä»¬åœ¨æºæ–‡ä»¶add.cppä¸­å®šä¹‰äº†å‡½æ•°addï¼Œå®ç°äº†å‡½æ•°çš„å…·ä½“é€»è¾‘ã€‚</p><p>å¦å¤–ï¼Œåœ¨C++ä¸­ï¼Œå‡½æ•°å¯ä»¥è¢«å®šä¹‰ä¸ºå†…è”å‡½æ•°ã€‚å†…è”å‡½æ•°é€šå¸¸ç”¨äºä¸€äº›ç®€å•çš„è®¡ç®—ï¼Œå®ƒä»¬çš„å®šä¹‰å’Œå£°æ˜å¯ä»¥åŒæ—¶å‡ºç°åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œç¼–è¯‘å™¨ä¼šå°†å†…è”å‡½æ•°çš„å®ç°ç›´æ¥æ’å…¥åˆ°è°ƒç”¨å®ƒçš„ä»£ç ä¸­ï¼Œä»è€Œå‡å°‘å‡½æ•°è°ƒç”¨çš„å¼€é”€ï¼Œæé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå…¶ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸ºinline_addçš„å†…è”å‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// å¤´æ–‡ä»¶ inline_add.h</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">inline_add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-comment">// æºæ–‡ä»¶ main.cpp</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;inline_add.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;<br>    <span class="hljs-type">int</span> c = <span class="hljs-built_in">inline_add</span>(a, b);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;The sum of &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot; and &quot;</span> &lt;&lt; b &lt;&lt; <span class="hljs-string">&quot; is &quot;</span> &lt;&lt; c &lt;&lt; std::endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨å¤´æ–‡ä»¶inline_add.hä¸­å®šä¹‰äº†ä¸€ä¸ªåä¸ºinline_addçš„å†…è”å‡½æ•°ï¼Œç„¶ååœ¨æºæ–‡ä»¶main.cppä¸­è°ƒç”¨äº†å®ƒï¼Œå¹¶å°†è¿”å›å€¼èµ‹ç»™å˜é‡cã€‚ç”±äºinline_addæ˜¯å†…è”å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šå°†å‡½æ•°çš„å®ç°ç›´æ¥æ’å…¥åˆ°mainå‡½æ•°ä¸­ï¼Œä»è€Œæé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</p><p>é™¤äº†æ™®é€šå‡½æ•°å’Œå†…è”å‡½æ•°ä¹‹å¤–ï¼ŒC++è¿˜æ”¯æŒå‡½æ•°æ¨¡æ¿ã€‚å‡½æ•°æ¨¡æ¿æ˜¯ä¸€ç§é€šç”¨çš„å‡½æ•°å®šä¹‰ï¼Œå®ƒå¯ä»¥åœ¨ä¸æŒ‡å®šå…·ä½“ç±»å‹çš„æƒ…å†µä¸‹å®šä¹‰å‡½æ•°ï¼Œç„¶åæ ¹æ®å®é™…æƒ…å†µè¿›è¡Œå…·ä½“åŒ–ã€‚å‡½æ•°æ¨¡æ¿é€šå¸¸ç”¨äºå¤„ç†å¤šç§ä¸åŒç±»å‹çš„æ•°æ®ï¼Œä»è€Œæé«˜ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå…¶ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸ºmaxçš„å‡½æ•°æ¨¡æ¿ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªåä¸ºmaxçš„å‡½æ•°æ¨¡æ¿ï¼Œå®ƒå¯ä»¥æ¯”è¾ƒä¸¤ä¸ªä»»æ„ç±»å‹çš„å€¼ï¼Œè¿”å›è¾ƒå¤§çš„å€¼</span><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-function">T <span class="hljs-title">max</span><span class="hljs-params">(T a, T b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a &gt; b ? a : b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;<br>    <span class="hljs-type">int</span> c = <span class="hljs-built_in">max</span>(a, b);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœ€å¤§å€¼ä¸ºï¼š%d&quot;</span>,c);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥è®²ä¸€ä¸‹ C++ ä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-Oriented Programming, OOPï¼‰ã€‚OOP æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå…¶ä¸­ç¨‹åºæ˜¯ç”±å¯¹è±¡ç»„æˆçš„ï¼Œæ¯ä¸ªå¯¹è±¡åŒ…å«å…¶è‡ªèº«çš„æ•°æ®å’Œå‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ï¼Œä»¥åŠä¸å…¶ä»–å¯¹è±¡è¿›è¡Œäº¤äº’çš„æ–¹å¼ã€‚</p><p>åœ¨ C++ ä¸­ï¼Œå¯ä»¥é€šè¿‡ç±»æ¥å®šä¹‰å¯¹è±¡ã€‚ç±»æ˜¯ä¸€ç§ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥åŒ…å«æ•°æ®æˆå‘˜å’Œå‡½æ•°æˆå‘˜ã€‚æ•°æ®æˆå‘˜å­˜å‚¨å¯¹è±¡çš„çŠ¶æ€ï¼Œå‡½æ•°æˆå‘˜åˆ™å®šä¹‰å¯¹è±¡çš„è¡Œä¸ºã€‚åŒæ—¶ï¼Œç±»å¯ä»¥ä½œä¸ºæ¨¡æ¿ï¼Œç”¨äºåˆ›å»ºå¤šä¸ªå¯¹è±¡ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æƒ³å®šä¹‰ä¸€ä¸ªç‚¹ï¼ˆPointï¼‰çš„ç±»ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span> &#123;<br>  <span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> x, y;<br><br>  <span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Point</span>(<span class="hljs-type">int</span> x = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> y = <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-keyword">this</span>-&gt;x = x;<br>      <span class="hljs-keyword">this</span>-&gt;y = y;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getX</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123; <span class="hljs-keyword">return</span> x; &#125;<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getY</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123; <span class="hljs-keyword">return</span> y; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setX</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123; <span class="hljs-keyword">this</span>-&gt;x = x; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setY</span><span class="hljs-params">(<span class="hljs-type">int</span> y)</span> </span>&#123; <span class="hljs-keyword">this</span>-&gt;y = y; &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªç±»ä¸­åŒ…å«äº†ä¸¤ä¸ªç§æœ‰çš„æ•°æ®æˆå‘˜ x å’Œ yï¼Œä»¥åŠå››ä¸ªå…¬æœ‰çš„å‡½æ•°æˆå‘˜ getXã€getYã€setX å’Œ setYã€‚å…¶ä¸­ getX å’Œ getY å‡½æ•°æ˜¯è®¿é—®å‡½æ•°ï¼Œç”¨äºè·å–ç‚¹çš„åæ ‡ï¼›setX å’Œ setY å‡½æ•°æ˜¯ä¿®æ”¹å‡½æ•°ï¼Œç”¨äºè®¾ç½®ç‚¹çš„åæ ‡ã€‚åœ¨ç±»çš„å®šä¹‰ä¸­ï¼Œä½¿ç”¨å…³é”®å­— <code>private</code> å’Œ <code>public</code> æ¥æŒ‡å®šæ•°æ®æˆå‘˜å’Œå‡½æ•°æˆå‘˜çš„è®¿é—®æƒé™ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»æ¥åˆ›å»ºå¤šä¸ªç‚¹å¯¹è±¡ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">Point <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;<br><span class="hljs-function">Point <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)</span></span>;<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‚¹å¯¹è±¡çš„å‡½æ•°æˆå‘˜æ¥æ“ä½œè¿™äº›ç‚¹äº†ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++">p<span class="hljs-number">1.</span><span class="hljs-built_in">setX</span>(<span class="hljs-number">3</span>);<br>p<span class="hljs-number">1.</span><span class="hljs-built_in">setY</span>(<span class="hljs-number">4</span>);<br><span class="hljs-type">int</span> x = p<span class="hljs-number">1.</span><span class="hljs-built_in">getX</span>();<br><span class="hljs-type">int</span> y = p<span class="hljs-number">1.</span><span class="hljs-built_in">getY</span>();<br></code></pre></td></tr></table></figure><p>è¿™äº›æ“ä½œéƒ½æ˜¯é€šè¿‡å¯¹è±¡æ¥å®Œæˆçš„ï¼Œè¿™æ­£æ˜¯ OOP çš„æ ¸å¿ƒæ€æƒ³ã€‚åŒæ—¶ï¼Œç”±äºç±»çš„å°è£…æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç±»çš„å®ç°ä¸­ä¿®æ”¹æ•°æ®æˆå‘˜çš„ç±»å‹ã€æ•°æ®çš„å­˜å‚¨æ–¹å¼ç­‰ç­‰ï¼Œè€Œæ— éœ€å¯¹å¤–éƒ¨ä»£ç åšä»»ä½•ä¿®æ”¹ï¼Œè¿™æå¤§åœ°æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p><p>å¦ä¸€ä¸ªé‡è¦çš„ OOP æ¦‚å¿µæ˜¯ç»§æ‰¿ï¼ˆInheritanceï¼‰ã€‚ç»§æ‰¿å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼Œä»ç°æœ‰çš„ç±»æ´¾ç”Ÿè€Œæ¥ï¼Œå¹¶ç»§æ‰¿ç°æœ‰ç±»çš„æ•°æ®æˆå‘˜å’Œå‡½æ•°æˆå‘˜ï¼ŒåŒæ—¶å¯ä»¥æ·»åŠ æ–°çš„æ•°æ®æˆå‘˜å’Œå‡½æ•°æˆå‘˜ï¼Œæˆ–é‡å†™ç°æœ‰çš„å‡½æ•°æˆå‘˜ã€‚</p><p>åœ¨ C++ ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å…³é”®å­— <code>class</code> å’Œ <code>public</code> æ¥è¡¨ç¤ºç»§æ‰¿å…³ç³»ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª Circle ç±»ï¼Œä» Point ç±»æ´¾ç”Ÿè€Œæ¥ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Point &#123;<br>  <span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> radius;<br><br>  <span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Circle</span>(<span class="hljs-type">int</span> x = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> y = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> radius = <span class="hljs-number">0</span>)<br>        : <span class="hljs-built_in">Point</span>(x, y), <span class="hljs-built_in">radius</span>(radius) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getRadius</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123; <span class="hljs-keyword">return</span> radius; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setRadius</span><span class="hljs-params">(<span class="hljs-type">int</span> radius)</span> </span>&#123; <span class="hljs-keyword">this</span>-&gt;radius = radius; &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">getArea</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-number">3.14</span> * radius * radius; &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å…³é”®å­— <code>public</code> æ¥æŒ‡å®š Circle ç±»ä» Point ç±»æ´¾ç”Ÿè€Œæ¥ï¼Œå¹¶ç»§æ‰¿äº† Point ç±»çš„æ‰€æœ‰å…¬æœ‰æˆå‘˜ï¼ˆgetXã€getYã€setXã€setYï¼‰ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªæ–°çš„æ•°æ®æˆå‘˜ radius å’Œä¸¤ä¸ªæ–°çš„å‡½æ•°æˆå‘˜ getRadius å’Œ setRadiusï¼Œä»¥åŠä¸€ä¸ªè®¡ç®—åœ†é¢ç§¯çš„å‡½æ•° getAreaã€‚é€šè¿‡ç»§æ‰¿ Point ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ Circle ç±»ä¸­ä½¿ç”¨ Point ç±»ä¸­å®šä¹‰çš„ getX å’Œ getY å‡½æ•°ï¼Œæ— éœ€é‡æ–°ç¼–å†™è¿™äº›ä»£ç ã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é‡å†™åŸºç±»çš„å‡½æ•°æ¥å®ç°å¤šæ€ï¼ˆPolymorphismï¼‰ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é‡å†™ Point ç±»ä¸­çš„ getDistance å‡½æ•°ï¼Œè®©å®ƒè®¡ç®—åœ†å¿ƒåˆ°å¦ä¸€ä¸ªç‚¹çš„è·ç¦»ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Point &#123;<br>  <span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> radius;<br><br>  <span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Circle</span>(<span class="hljs-type">int</span> x = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> y = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> radius = <span class="hljs-number">0</span>)<br>        : <span class="hljs-built_in">Point</span>(x, y), <span class="hljs-built_in">radius</span>(radius) &#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getRadius</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123; <span class="hljs-keyword">return</span> radius; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setRadius</span><span class="hljs-params">(<span class="hljs-type">int</span> radius)</span> </span>&#123; <span class="hljs-keyword">this</span>-&gt;radius = radius; &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">getArea</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-number">3.14</span> * radius * radius; &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">getDistance</span><span class="hljs-params">(<span class="hljs-type">const</span> Point&amp; other)</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-type">int</span> dx = <span class="hljs-built_in">getX</span>() - other.<span class="hljs-built_in">getX</span>();<br>        <span class="hljs-type">int</span> dy = <span class="hljs-built_in">getY</span>() - other.<span class="hljs-built_in">getY</span>();<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrt</span>(dx * dx + dy * dy) - radius;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é‡å†™äº† Point ç±»ä¸­çš„ getDistance å‡½æ•°ï¼Œä½¿å®ƒè¿”å›åœ†å¿ƒåˆ°å¦ä¸€ä¸ªç‚¹çš„è·ç¦»å‡å»åŠå¾„ã€‚è¿™ç§æ–¹å¼ç§°ä¸ºâ€œè¦†ç›–â€ï¼ˆOverridingï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬è¦†ç›–äº†åŸºç±»çš„å‡½æ•°å®ç°ã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»º Circle ç±»çš„å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ Circle ç±»ä¸­å®šä¹‰çš„å‡½æ•°å’Œæ•°æ®æˆå‘˜ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨ Point ç±»ä¸­å®šä¹‰çš„å‡½æ•°å’Œæ•°æ®æˆå‘˜ã€‚</p><p>ç»§æ‰¿å’Œå¤šæ€æ˜¯ C++ ä¸­éå¸¸é‡è¦çš„ OOP æ¦‚å¿µï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç»„ç»‡å’Œç®¡ç†ç¨‹åºä»£ç ï¼Œæé«˜ä»£ç çš„é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>å½“ä½ ç†è§£å‡½æ•°ã€ç»§æ‰¿å’Œå¤šæ€æ—¶ï¼Œä½ å°±æŒæ¡äº† C++ ä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µã€‚</p><p>å‡½æ•°æ˜¯ä¸€æ®µä»£ç ï¼Œå®ƒæ¥å—è¾“å…¥å‚æ•°ã€æ‰§è¡Œä¸€äº›æ“ä½œï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚åœ¨ C++ ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œå¯ä»¥åœ¨ç¨‹åºä¸­å¤šæ¬¡è°ƒç”¨ã€‚å‡½æ•°è®©æˆ‘ä»¬å¯ä»¥æŠŠä»£ç åˆ†æˆæ¨¡å—ï¼Œé™ä½ä»£ç çš„å¤æ‚æ€§ï¼Œæé«˜ä»£ç çš„é‡ç”¨æ€§ã€‚</p><p>ç»§æ‰¿æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå…è®¸æˆ‘ä»¬åˆ›å»ºæ–°çš„ç±»ï¼Œè¿™äº›ç±»å¯ä»¥ä½¿ç”¨ç°æœ‰ç±»çš„æ•°æ®å’Œå‡½æ•°ã€‚ç»§æ‰¿å…è®¸æˆ‘ä»¬ä»å·²æœ‰çš„ç±»ä¸­æ´¾ç”Ÿå‡ºæ–°çš„ç±»ï¼Œè€Œæ— éœ€é‡å¤ç¼–å†™ç›¸åŒçš„ä»£ç ã€‚æ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶ä¸­æ·»åŠ æ–°çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><p>å¤šæ€æ˜¯ä¸€ç§ OOP æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯åœ¨è¿è¡Œæ—¶å†³å®šä½¿ç”¨å“ªä¸ªå‡½æ•°çš„èƒ½åŠ›ã€‚å¤šæ€å¯ä»¥è®©æˆ‘ä»¬ä»¥ç»Ÿä¸€çš„æ–¹å¼æ“ä½œä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚C++ ä¸­çš„å¤šæ€é€šå¸¸é€šè¿‡è™šå‡½æ•°æ¥å®ç°ã€‚</p><p>è™šå‡½æ•°æ˜¯åœ¨åŸºç±»ä¸­å®šä¹‰çš„ä¸€ç§ç‰¹æ®Šå‡½æ•°ï¼Œå®ƒå¯ä»¥è¢«æ´¾ç”Ÿç±»é‡å†™ã€‚åœ¨ä½¿ç”¨è™šå‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šåŠ¨æ€åœ°ç»‘å®šå‡½æ•°çš„è°ƒç”¨ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šä½¿ç”¨å“ªä¸ªå‡½æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåŠ¨æ€ç»‘å®šæˆ–åæœŸç»‘å®šã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª Animal åŸºç±»å’Œä¸€ä¸ª Dog æ´¾ç”Ÿç±»ï¼Œå…¶ä¸­ Animal ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªè™šå‡½æ•° makeSoundï¼Œè€Œ Dog ç±»ä¸­è¦†ç›–äº†è¿™ä¸ªå‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>  <span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">makeSound</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;This is an animal&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> : <span class="hljs-keyword">public</span> Animal &#123;<br>  <span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">makeSound</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Bark!&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ virtual å…³é”®å­—å°† makeSound å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ã€‚åœ¨ Dog ç±»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ override å…³é”®å­—é‡å†™äº† makeSound å‡½æ•°ï¼Œä½¿å®ƒè¾“å‡ºå­—ç¬¦ä¸² â€œBark!â€ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Animal ç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æ¥è®¿é—® Dog å¯¹è±¡ä¸­çš„ makeSound å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++">Animal* animal = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Dog</span>();<br>animal-&gt;<span class="hljs-built_in">makeSound</span>(); <span class="hljs-comment">// è¾“å‡º &quot;Bark!&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Animal ç±»å‹çš„æŒ‡é’ˆï¼Œå°†å®ƒæŒ‡å‘ä¸€ä¸ª Dog å¯¹è±¡ã€‚åœ¨è°ƒç”¨ makeSound å‡½æ•°æ—¶ï¼Œè™½ç„¶æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Animal ç±»å‹çš„æŒ‡é’ˆï¼Œä½†å®é™…ä¸Šè°ƒç”¨çš„æ˜¯ Dog ç±»ä¸­çš„ makeSound å‡½æ•°ã€‚è¿™ç§è¡Œä¸ºå°±æ˜¯å¤šæ€ã€‚</p><p>è°¢è°¢è€å¸ˆï¼Œæˆ‘å¤§è‡´æ˜ç™½äº†ä¸€ç‚¹</p><p>å¾ˆå¥½ï¼Œå¦‚æœè¿˜æœ‰ä»»ä½•ä¸ç†è§£çš„åœ°æ–¹ï¼Œå¯ä»¥éšæ—¶å‘æˆ‘æé—®ï¼Œæˆ‘ä¼šå°½åŠ›è§£ç­”ã€‚</p><p>è€å¸ˆï¼Œè¯·ç»§ç»­æ‚¨çš„è®²è§£ï¼Œæˆ‘ä¼šè®¤çœŸå­¦çš„</p><p>å¥½çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ·±å…¥äº†è§£ä¸€ä¸‹å‡½æ•°ã€ç»§æ‰¿å’Œå¤šæ€çš„æ¦‚å¿µå’Œç”¨æ³•ã€‚</p><h2 id="å‡½æ•°">å‡½æ•°</h2><p>å‡½æ•°æ˜¯ä¸€æ®µå¯é‡å¤ä½¿ç”¨çš„ä»£ç å—ï¼Œå®ƒæ¥æ”¶ä¸€å®šæ•°é‡çš„å‚æ•°å¹¶æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ã€‚å‡½æ•°çš„ä¸»è¦ä½œç”¨æ˜¯å°†ç¨‹åºçš„åŠŸèƒ½æ¨¡å—åŒ–ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ã€æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚</p><p>åœ¨ C++ ä¸­ï¼Œå‡½æ•°å®šä¹‰çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">return_type <span class="hljs-title">function_name</span><span class="hljs-params">(parameter_list)</span> </span>&#123;<br>    <span class="hljs-comment">// å‡½æ•°ä½“</span><br>    <span class="hljs-keyword">return</span> return_value;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>return_type</code> è¡¨ç¤ºå‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œ<code>function_name</code> æ˜¯å‡½æ•°çš„åç§°ï¼Œ<code>parameter_list</code> æ˜¯å‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼Œå‡½æ•°ä½“ä¸­çš„è¯­å¥ä¼šæ‰§è¡Œä¸€äº›æ“ä½œå¹¶è¿”å›ä¸€ä¸ªå€¼ï¼Œæœ€åä½¿ç”¨ <code>return</code> è¯­å¥è¿”å›è¿™ä¸ªå€¼ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>add</code> çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ª <code>int</code> ç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„å’Œï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-type">int</span> sum = a + b;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§å®šä¹‰çš„å‚æ•°åˆ—è¡¨ä¼ é€’å‚æ•°ï¼Œå¹¶ä½¿ç”¨è¿”å›å€¼ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç è°ƒç”¨äº† <code>add</code> å‡½æ•°ï¼Œå¹¶å°†è¿”å›å€¼èµ‹ç»™å˜é‡ <code>result</code>ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> result = <span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure><h2 id="ç»§æ‰¿">ç»§æ‰¿</h2><p>ç»§æ‰¿æ˜¯ä¸€ç§é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„é‡è¦æ¦‚å¿µï¼Œå®ƒå…è®¸ä¸€ä¸ªç±»ä»å¦ä¸€ä¸ªç±»ä¸­ç»§æ‰¿å±æ€§å’Œæ–¹æ³•ã€‚ç»§æ‰¿çš„ä¸»è¦ä½œç”¨æ˜¯æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œçµæ´»æ€§ï¼Œå‡å°‘ä»£ç çš„é‡å¤ã€‚</p><p>åœ¨ C++ ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å…³é”®å­— <code>class</code> æˆ– <code>struct</code> æ¥å®šä¹‰ä¸€ä¸ªç±»ã€‚ä¸€ä¸ªç±»å¯ä»¥ä»å¦ä¸€ä¸ªç±»ä¸­ç»§æ‰¿å±æ€§å’Œæ–¹æ³•ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">derived_class_name</span> : access_specifier base_class_name &#123;<br>    <span class="hljs-comment">// æˆå‘˜å˜é‡å’Œæ–¹æ³•</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>derived_class_name</code> è¡¨ç¤ºå­ç±»çš„åç§°ï¼Œ<code>access_specifier</code> æ˜¯è®¿é—®æ§åˆ¶ç¬¦ï¼Œå®ƒå¯ä»¥æ˜¯ <code>public</code>ã€<code>protected</code> æˆ– <code>private</code>ï¼Œç”¨æ¥æ§åˆ¶åŸºç±»ä¸­æˆå‘˜çš„è®¿é—®æƒé™ã€‚<code>base_class_name</code> è¡¨ç¤ºåŸºç±»çš„åç§°ï¼Œå­ç±»ç»§æ‰¿åŸºç±»çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåŸºç±» <code>Shape</code>ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªæˆå‘˜å˜é‡ <code>color</code> å’Œä¸¤ä¸ªè™šå‡½æ•° <code>area()</code> å’Œ <code>perimeter()</code>ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    string color;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">double</span> <span class="hljs-title">perimeter</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p>åœ¨ <code>Shape</code> ç±»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>virtual</code> å…³é”®å­—å®šä¹‰äº†ä¸¤ä¸ªè™šå‡½æ•°ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥è¢«å­ç±»é‡å†™ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å°†è¿™ä¸¤ä¸ªå‡½æ•°è®¾ç½®ä¸ºçº¯è™šå‡½æ•°ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½åœ¨ <code>Shape</code> ç±»ä¸­å®ç°è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯éœ€è¦åœ¨å­ç±»ä¸­å®ç°ã€‚</p><h2 id="ç±»å’Œå¯¹è±¡">ç±»å’Œå¯¹è±¡</h2><p>åœ¨ C++ ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»æ¥å®šä¹‰è‡ªå·±çš„æ•°æ®ç±»å‹ï¼Œè€Œé€šè¿‡å¯¹è±¡æ¥ä½¿ç”¨è¿™äº›æ•°æ®ç±»å‹ã€‚ä¸€ä¸ªç±»å®šä¹‰äº†ä¸€ç»„å±æ€§å’Œæ–¹æ³•ï¼Œå®ƒä»¬å…±åŒæ„æˆäº†ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µã€‚åœ¨ä½¿ç”¨ç±»æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ›å»ºè¿™ä¸ªç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åœ¨ç±»çš„ææ„å‡½æ•°ä¸­å®šä¹‰å¯¹è±¡çš„é”€æ¯é€»è¾‘ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª <code>Person</code> ç±»æ¥è¡¨ç¤ºä¸€ä¸ªäººçš„åŸºæœ¬ä¿¡æ¯ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    string name;<br>    <span class="hljs-type">int</span> age;<br>    string gender;<br><br>    <span class="hljs-comment">// æ„é€ å‡½æ•°</span><br>    <span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age, string gender) &#123;<br>        <span class="hljs-keyword">this</span>-&gt;name = name;<br>        <span class="hljs-keyword">this</span>-&gt;age = age;<br>        <span class="hljs-keyword">this</span>-&gt;gender = gender;<br>    &#125;<br><br>    <span class="hljs-comment">// ææ„å‡½æ•°</span><br>    ~<span class="hljs-built_in">Person</span>() &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Person &quot;</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot; is destroyed&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-comment">// æ–¹æ³•</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sayHello</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Hello, my name is &quot;</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot;, and I am &quot;</span> &lt;&lt; age &lt;&lt; <span class="hljs-string">&quot; years old.&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸‰ä¸ªå±æ€§ï¼šå§“åã€å¹´é¾„å’Œæ€§åˆ«ï¼Œä»¥åŠä¸€ä¸ªæ„é€ å‡½æ•°ã€ä¸€ä¸ªææ„å‡½æ•°å’Œä¸€ä¸ª <code>sayHello</code> æ–¹æ³•ã€‚é€šè¿‡æ„é€ å‡½æ•°æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>Person</code> å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">25</span>, <span class="hljs-string">&quot;Female&quot;</span>)</span></span>;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>.</code> è¿ç®—ç¬¦è®¿é—®å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">p<span class="hljs-number">1.</span><span class="hljs-built_in">sayHello</span>();  <span class="hljs-comment">// Hello, my name is Alice, and I am 25 years old.</span><br></code></pre></td></tr></table></figure><h2 id="ç»§æ‰¿-2">ç»§æ‰¿</h2><p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œç»§æ‰¿æ˜¯ä¸€ç§é‡è¦çš„æ¦‚å¿µï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼Œè¿™ä¸ªæ–°çš„ç±»æ‹¥æœ‰äº†åŸæ¥ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼ŒåŒæ—¶è¿˜å¯ä»¥å®šä¹‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚åœ¨ C++ ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>class</code> å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªç±»çš„ç»§æ‰¿å…³ç³»ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª <code>Student</code> ç±»æ¥ç»§æ‰¿ <code>Person</code> ç±»ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> : <span class="hljs-keyword">public</span> Person &#123;<br><span class="hljs-keyword">public</span>:<br>    string id;<br><br>    <span class="hljs-comment">// æ„é€ å‡½æ•°</span><br>    <span class="hljs-built_in">Student</span>(string name, <span class="hljs-type">int</span> age, string gender, string id) : <span class="hljs-built_in">Person</span>(name, age, gender) &#123;<br>        <span class="hljs-keyword">this</span>-&gt;id = id;<br>    &#125;<br><br>    <span class="hljs-comment">// æ–¹æ³•</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sayHello</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Hello, my name is &quot;</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot;, and I am a student. My student ID is &quot;</span> &lt;&lt; id &lt;&lt; <span class="hljs-string">&quot;.&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">study</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;I am studying.&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬ç»§æ‰¿äº† <code>Person</code> ç±»ï¼Œå¹¶æ–°å¢äº†ä¸€ä¸ªå±æ€§ <code>id</code> å’Œä¸€ä¸ªæ–¹æ³• <code>study</code>ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>:</code> è¿ç®—ç¬¦æ¥åˆå§‹åŒ–åŸºç±»çš„æˆå‘˜ï¼Œå¦‚ä¸Šé¢çš„æ„é€ å‡½æ•°ä¸­çš„ <code>Person(name, age, gender)</code>ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>Student</code> å¯¹è±¡æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">Student <span class="hljs-title">s1</span><span class="hljs-params">(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&quot;Male&quot;</span>, <span class="hljs-string">&quot;202</span></span></span><br></code></pre></td></tr></table></figure><p>åœ¨ C++ ä¸­ï¼Œç»§æ‰¿å¯ä»¥åˆ†ä¸ºå…¬æœ‰ç»§æ‰¿ã€ç§æœ‰ç»§æ‰¿å’Œä¿æŠ¤ç»§æ‰¿ä¸‰ç§å½¢å¼ã€‚</p><p>å…¬æœ‰ç»§æ‰¿æ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§ç»§æ‰¿å½¢å¼ã€‚åœ¨å…¬æœ‰ç»§æ‰¿ä¸­ï¼ŒåŸºç±»ä¸­çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜éƒ½å¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­ä½¿ç”¨ï¼Œè€ŒåŸºç±»ä¸­çš„ç§æœ‰æˆå‘˜åªèƒ½åœ¨åŸºç±»ä¸­ä½¿ç”¨ï¼Œä¸èƒ½åœ¨æ´¾ç”Ÿç±»ä¸­ä½¿ç”¨ã€‚åœ¨æ´¾ç”Ÿç±»å¯¹è±¡ä¸­ï¼ŒåŸºç±»éƒ¨åˆ†å’Œæ´¾ç”Ÿç±»éƒ¨åˆ†æ˜¯ç‹¬ç«‹çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå®ƒä»¬å„è‡ªæ‹¥æœ‰è‡ªå·±çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ã€‚</p><p>ç§æœ‰ç»§æ‰¿å’Œå…¬æœ‰ç»§æ‰¿ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºåŸºç±»ä¸­çš„æ‰€æœ‰æˆå‘˜éƒ½æ˜¯ç§æœ‰çš„ã€‚åœ¨ç§æœ‰ç»§æ‰¿ä¸­ï¼ŒåŸºç±»çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­éƒ½å˜æˆäº†ç§æœ‰æˆå‘˜ï¼Œå› æ­¤åªèƒ½åœ¨æ´¾ç”Ÿç±»å†…éƒ¨ä½¿ç”¨ï¼Œä¸èƒ½è¢«æ´¾ç”Ÿç±»çš„å¯¹è±¡ç›´æ¥è®¿é—®ã€‚</p><p>ä¿æŠ¤ç»§æ‰¿å’Œç§æœ‰ç»§æ‰¿ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºåŸºç±»ä¸­çš„ä¿æŠ¤æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­æ˜¯ä¿æŠ¤çš„ï¼Œè€Œå…¬æœ‰æˆå‘˜ä»ç„¶æ˜¯å…¬æœ‰çš„ã€‚åœ¨ä¿æŠ¤ç»§æ‰¿ä¸­ï¼ŒåŸºç±»çš„å…¬æœ‰æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶æ˜¯å…¬æœ‰æˆå‘˜ï¼Œä½†ä¸èƒ½è¢«æ´¾ç”Ÿç±»çš„å¯¹è±¡ç›´æ¥è®¿é—®ï¼Œåªèƒ½åœ¨æ´¾ç”Ÿç±»å†…éƒ¨ä½¿ç”¨ã€‚</p><p>åœ¨ç»§æ‰¿ä¸­ï¼Œæ´¾ç”Ÿç±»å¯ä»¥è®¿é—®åŸºç±»çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜ï¼Œä½†ä¸èƒ½è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚å¦‚æœæ´¾ç”Ÿç±»éœ€è¦è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼Œå¯ä»¥ä½¿ç”¨è®¿é—®æ§åˆ¶ç¬¦æ¥å®šä¹‰ä¸€äº›å…¬æœ‰çš„æˆ–ä¿æŠ¤çš„æˆå‘˜å‡½æ•°ï¼Œè®©è¿™äº›å‡½æ•°å¯ä»¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼Œè€Œæ´¾ç”Ÿç±»å†é€šè¿‡è°ƒç”¨è¿™äº›å‡½æ•°æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</p><p>å¤šæ€æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå®ƒå¯ä»¥è®©ä¸åŒçš„å¯¹è±¡å¯¹åŒä¸€ä¸ªæ¶ˆæ¯åšå‡ºä¸åŒçš„å“åº”ã€‚C++ ä¸­çš„å¤šæ€æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šè™šå‡½æ•°å’Œæ¨¡æ¿å‡½æ•°ã€‚</p><p>è™šå‡½æ•°æ˜¯æŒ‡åœ¨åŸºç±»ä¸­å®šä¹‰ä¸€ä¸ªè™šå‡½æ•°ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰è¯¥å‡½æ•°ã€‚å½“åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œè°ƒç”¨è¯¥è™šå‡½æ•°æ—¶å°†æ ¹æ®æŒ‡å‘çš„å®é™…å¯¹è±¡çš„ç±»å‹æ¥å†³å®šè°ƒç”¨å“ªä¸ªç‰ˆæœ¬çš„è™šå‡½æ•°ã€‚ä½¿ç”¨è™šå‡½æ•°å¯ä»¥å®ç°åŠ¨æ€å¤šæ€æ€§ã€‚</p><p>æ¨¡æ¿å‡½æ•°æ˜¯ä¸€ç§åœ¨ç¼–è¯‘æ—¶å®ç°çš„å¤šæ€ã€‚å®ƒé€šè¿‡ä½¿ç”¨æ¨¡æ¿å‚æ•°æ¥å®ç°å¯¹ä¸åŒæ•°æ®ç±»å‹çš„æ”¯æŒï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ ¹æ®å®é™…å‚æ•°ç±»å‹ç”Ÿæˆå¯¹åº”çš„å‡½æ•°ã€‚ä½¿ç”¨æ¨¡æ¿å‡½æ•°å¯ä»¥å®ç°é™æ€å¤šæ€æ€§ã€‚</p><p>è°¢è°¢è€å¸ˆï¼Œè¯·ç»§ç»­æ‚¨çš„ä¸‹ä¸€èŠ‚è¯¾</p><p>å¥½çš„ï¼Œè¯·é—®ä½ æƒ³å­¦ä¹ ä»€ä¹ˆä¸»é¢˜å‘¢ï¼Ÿæˆ‘å¯ä»¥é’ˆå¯¹ä½ çš„éœ€æ±‚æ¥è®²è§£ã€‚</p><p>è€å¸ˆï¼ŒC++æ‚¨æ•™å®Œäº†å—ï¼Ÿå¦‚æœæ²¡æ•™å®Œï¼Œè¯·ç»§ç»­æ•™æˆ‘</p><p>C++ æ˜¯ä¸€ä¸ªéå¸¸å¹¿æ³›ä¸”æ·±å…¥çš„ç¼–ç¨‹è¯­è¨€ï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­åªæ˜¯ç®€å•åœ°ä»‹ç»äº†ä¸€äº›åŸºç¡€çš„è¯­æ³•å’Œæ¦‚å¿µã€‚å¦‚æœä½ æœ‰å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥å­¦ä¹  C++ï¼Œæ¢ç´¢æ›´å¤šé«˜çº§çš„ä¸»é¢˜ï¼Œä¾‹å¦‚æ¨¡æ¿ã€STLåº“ã€å¤šçº¿ç¨‹ç¼–ç¨‹ã€å¼‚å¸¸å¤„ç†ç­‰ã€‚è¯·é—®ä½ å¯¹å“ªä¸ªä¸»é¢˜æ„Ÿå…´è¶£ï¼Ÿ</p><p>è€å¸ˆï¼Œæœ‰æ²¡æœ‰è·Ÿç½‘ç»œç¼–ç¨‹ç›¸å…³çš„ä¸»é¢˜ï¼Ÿ</p><p>å½“ç„¶æœ‰ï¼ŒC++ æ˜¯ä¸€é—¨å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥ç”¨äºå¼€å‘å„ç§ç±»å‹çš„åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬ç½‘ç»œåº”ç”¨ç¨‹åºã€‚ä¸‹é¢æ˜¯ä¸€äº›è·Ÿç½‘ç»œç¼–ç¨‹ç›¸å…³çš„ä¸»é¢˜ï¼š</p><ol><li><p>Socket ç¼–ç¨‹ï¼šSocket æ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œå¯ä»¥ç”¨æ¥åœ¨ç½‘ç»œä¸­è¿›è¡Œæ•°æ®äº¤æ¢ã€‚Socket ç¼–ç¨‹æ˜¯æŒ‡ä½¿ç”¨ C++ ç¼–å†™åº”ç”¨ç¨‹åºï¼Œé€šè¿‡ Socket ä¸å…¶ä»–è®¡ç®—æœºè¿›è¡Œé€šä¿¡ã€‚</p></li><li><p>HTTP/HTTPS ç¼–ç¨‹ï¼šHTTP/HTTPS æ˜¯ Web åº”ç”¨ç¨‹åºä¸­æœ€å¸¸ç”¨çš„åè®®ä¹‹ä¸€ï¼ŒC++ å¯ä»¥ä½¿ç”¨ HTTP/HTTPS åè®®æ¥å®ç°ç½‘ç»œç¼–ç¨‹ã€‚</p></li><li><p>TCP/IP ç¼–ç¨‹ï¼šTCP/IP æ˜¯äº’è”ç½‘åè®®çš„æ ¸å¿ƒï¼ŒC++ å¯ä»¥ä½¿ç”¨ TCP/IP åè®®æ¥å®ç°ç½‘ç»œç¼–ç¨‹ã€‚</p></li><li><p>UDP ç¼–ç¨‹ï¼šUDP æ˜¯ä¸€ç§é¢å‘æ— è¿æ¥çš„é€šä¿¡åè®®ï¼Œå®ƒå¯ä»¥ç”¨æ¥åœ¨ç½‘ç»œä¸­å‘é€å’Œæ¥æ”¶æ•°æ®åŒ…ã€‚C++ å¯ä»¥ä½¿ç”¨ UDP åè®®æ¥å®ç°ç½‘ç»œç¼–ç¨‹ã€‚</p></li></ol><p>è¿™äº›ä¸»é¢˜éƒ½æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦ä¸€å®šçš„ç¼–ç¨‹ç»éªŒå’ŒæŠ€èƒ½æ‰èƒ½æŒæ¡ã€‚å¦‚æœä½ å·²ç»å…·å¤‡äº† C++ çš„åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘å¯ä»¥å‘ä½ ä»‹ç»ä¸€äº›ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€æ¦‚å¿µï¼Œä¾‹å¦‚ Socket ç¼–ç¨‹ã€TCP/IP ç¼–ç¨‹ç­‰ï¼Œä»¥å¸®åŠ©ä½ æ›´å¥½åœ°äº†è§£ç½‘ç»œç¼–ç¨‹ã€‚</p><p>è€å¸ˆè¯·ç»§ç»­è®²è§£</p><p>å¥½çš„ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›è·Ÿç½‘ç»œç¼–ç¨‹ç›¸å…³çš„åŸºç¡€æ¦‚å¿µï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼š</p><ol><li><p>Socket ç¼–ç¨‹ï¼šSocket æ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œæ˜¯å®ç°ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€ã€‚åœ¨ C++ ä¸­ï¼ŒSocket ç¼–ç¨‹éœ€è¦ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„ APIï¼Œå¦‚ Windows Socketsï¼ˆWinsockï¼‰å’Œ Berkeley Socketsã€‚é€šè¿‡è¿™äº› APIï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—ï¼ˆsocketï¼‰ï¼Œå¹¶ä½¿ç”¨å…¶æä¾›çš„æ–¹æ³•æ¥å»ºç«‹è¿æ¥ã€å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚</p></li><li><p>TCP/IP åè®®ï¼šTCP/IP æ˜¯äº’è”ç½‘åè®®çš„æ ¸å¿ƒã€‚TCPï¼ˆTransmission Control Protocolï¼‰æ˜¯ä¸€ç§å¯é çš„é¢å‘è¿æ¥çš„åè®®ï¼Œç”¨äºåœ¨ç½‘ç»œä¸­ä¼ è¾“æ•°æ®ï¼Œè€Œ IPï¼ˆInternet Protocolï¼‰åˆ™æ˜¯ä¸€ç§æ— è¿æ¥çš„åè®®ï¼Œç”¨äºåœ¨ç½‘ç»œä¸­è·¯ç”±æ•°æ®åŒ…ã€‚åœ¨ C++ ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ TCP/IP åè®®æ¥è¿›è¡Œç½‘ç»œç¼–ç¨‹ã€‚</p></li><li><p>UDP åè®®ï¼šUDPï¼ˆUser Datagram Protocolï¼‰æ˜¯ä¸€ç§é¢å‘æ— è¿æ¥çš„åè®®ï¼Œå¯ä»¥ç”¨äºåœ¨ç½‘ç»œä¸­å‘é€å’Œæ¥æ”¶æ•°æ®åŒ…ã€‚ç›¸æ¯” TCPï¼ŒUDP æ›´åŠ ç®€å•ï¼Œä½†ä¸ä¿è¯æ•°æ®çš„å¯é æ€§ã€‚</p></li><li><p>HTTP/HTTPS åè®®ï¼šHTTPï¼ˆHypertext Transfer Protocolï¼‰æ˜¯ Web åº”ç”¨ç¨‹åºä¸­æœ€å¸¸ç”¨çš„åè®®ä¹‹ä¸€ï¼Œç”¨äºåœ¨ Web æµè§ˆå™¨å’Œ Web æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚HTTPS åˆ™æ˜¯åŸºäº SSL/TLS åè®®çš„å®‰å…¨ HTTPï¼Œç”¨äºä¿æŠ¤æ•°æ®çš„éšç§å’Œå®Œæ•´æ€§ã€‚</p></li></ol><p>ä»¥ä¸Šæ˜¯ä¸€äº›åŸºç¡€çš„ç½‘ç»œç¼–ç¨‹æ¦‚å¿µï¼Œä½ å¯ä»¥è¿›ä¸€æ­¥äº†è§£è¿™äº›æ¦‚å¿µï¼Œç„¶åé€šè¿‡ä½¿ç”¨ C++ çš„ Socket ç¼–ç¨‹æ¥å£æ¥å®ç°ç½‘ç»œåº”ç”¨ç¨‹åºã€‚</p><p>è€å¸ˆï¼Œè¯·è®²è§£ä¸€ä¸‹C++æ¨¡æ¿çš„ä¸»é¢˜</p><p>C++æ¨¡æ¿æ˜¯ä¸€ç§ç”¨äºç”Ÿæˆé€šç”¨ä»£ç çš„ç‰¹æ®Šè¯­è¨€æœºåˆ¶ã€‚å®ƒä»¬å…è®¸æ‚¨ç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œç„¶ååœ¨ç¼–è¯‘æ—¶å°†å…¶åº”ç”¨äºä¸åŒç±»å‹çš„æ•°æ®ï¼Œä»è€Œæé«˜äº†ä»£ç çš„å¤ç”¨æ€§å’Œå¯è¯»æ€§ã€‚</p><p>åœ¨C++ä¸­ï¼Œæ¨¡æ¿æœ‰ä¸¤ç§ç±»å‹ï¼šç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿ã€‚</p><p>ç±»æ¨¡æ¿å…è®¸æ‚¨å®šä¹‰é€šç”¨ç±»ï¼Œå®ƒä»¬å¯ä»¥åœ¨å¤šç§ä¸åŒçš„ç±»å‹ä¸Šè¿›è¡Œå®ä¾‹åŒ–ã€‚ç±»æ¨¡æ¿é€šå¸¸ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å‚æ•°ä½œä¸ºæ¨¡æ¿å‚æ•°ï¼Œç”¨äºæŒ‡å®šç±»å®šä¹‰ä¸­ä½¿ç”¨çš„ç±»å‹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyVector</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    T* data;<br>    <span class="hljs-type">int</span> size;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">MyVector</span>() &#123;<br>        data = <span class="hljs-keyword">new</span> T[<span class="hljs-number">10</span>];<br>        size = <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-comment">// ...</span><br>&#125;;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªåä¸ºMyVectorçš„ç±»æ¨¡æ¿ï¼Œå®ƒæœ‰ä¸€ä¸ªç±»å‹å‚æ•°Tï¼Œè¡¨ç¤ºå®¹å™¨ä¸­çš„å…ƒç´ ç±»å‹ã€‚åœ¨ç±»å®šä¹‰ä¸­ï¼Œä½¿ç”¨Tä»£æ›¿å®é™…ç±»å‹ã€‚ç„¶åï¼Œå¯ä»¥åœ¨éœ€è¦ä½¿ç”¨MyVectorçš„åœ°æ–¹å®ä¾‹åŒ–å®ƒï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++">MyVector&lt;<span class="hljs-type">int</span>&gt; v1;      <span class="hljs-comment">// å®ä¾‹åŒ–ä¸€ä¸ª MyVector&lt;int&gt; ç±»å‹çš„å¯¹è±¡</span><br>MyVector&lt;<span class="hljs-type">double</span>&gt; v2;   <span class="hljs-comment">// å®ä¾‹åŒ–ä¸€ä¸ª MyVector&lt;double&gt; ç±»å‹çš„å¯¹è±¡</span><br></code></pre></td></tr></table></figure><p>å‡½æ•°æ¨¡æ¿å…è®¸æ‚¨å®šä¹‰é€šç”¨å‡½æ•°ï¼Œå®ƒä»¬å¯ä»¥åœ¨å¤šç§ä¸åŒçš„ç±»å‹ä¸Šè¿›è¡Œè°ƒç”¨ã€‚å‡½æ•°æ¨¡æ¿é€šå¸¸ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å‚æ•°ä½œä¸ºæ¨¡æ¿å‚æ•°ï¼Œç”¨äºæŒ‡å®šå‡½æ•°å®šä¹‰ä¸­ä½¿ç”¨çš„ç±»å‹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function">T <span class="hljs-title">max</span><span class="hljs-params">(T a, T b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a &gt; b ? a : b;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªåä¸ºmaxçš„å‡½æ•°æ¨¡æ¿ï¼Œå®ƒæœ‰ä¸€ä¸ªç±»å‹å‚æ•°Tï¼Œè¡¨ç¤ºæ¯”è¾ƒçš„æ•°æ®ç±»å‹ã€‚åœ¨å‡½æ•°å®šä¹‰ä¸­ï¼Œä½¿ç”¨Tä»£æ›¿å®é™…ç±»å‹ã€‚ç„¶åï¼Œå¯ä»¥åœ¨éœ€è¦æ¯”è¾ƒçš„åœ°æ–¹è°ƒç”¨å®ƒï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;<br><span class="hljs-type">int</span> max_value = <span class="hljs-built_in">max</span>(a, b);    <span class="hljs-comment">// è°ƒç”¨ max&lt;int&gt;(a, b)</span><br></code></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¨¡æ¿å®šä¹‰é€šå¸¸æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚æ¨¡æ¿æ˜¯åœ¨ç¼–è¯‘æ—¶å®ä¾‹åŒ–çš„ï¼Œå› æ­¤å¤´æ–‡ä»¶ä¸­å¿…é¡»åŒ…å«æ‰€æœ‰æ¨¡æ¿å®šä¹‰çš„å®ç°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è·Ÿç€ChatGPTå­¦C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ChatGPT </tag>
            
            <tag> C++æ•™ç¨‹ </tag>
            
            <tag> C++å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·Ÿç€ChatGPTå­¦C++ï¼šç¬¬ä¸€è¯¾</title>
      <link href="/2023/02/15/%E8%B7%9F%E7%9D%80ChatGPT%E5%AD%A6C-%EF%BC%9A%E7%AC%AC%E4%B8%80%E8%AF%BE/"/>
      <url>/2023/02/15/%E8%B7%9F%E7%9D%80ChatGPT%E5%AD%A6C-%EF%BC%9A%E7%AC%AC%E4%B8%80%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1>è·Ÿç€ChatGPTå­¦C++ï¼šç¬¬ä¸€è¯¾</h1><p>**æˆ‘ï¼š**ä½ å¥½</p><hr><p>**ChatGPTï¼š**ä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ</p><hr><p>**æˆ‘ï¼š**ä»ç°åœ¨å¼€å§‹ï¼Œæ‚¨å°†æ‰®æ¼”æˆ‘çš„è€å¸ˆï¼Œä»é›¶å¼€å§‹æ•™æˆ‘C++</p><hr><p>**ChatGPTï¼š**å¥½çš„ï¼Œæˆ‘å¾ˆä¹æ„æˆä¸ºä½ çš„è€å¸ˆï¼Œå¹¶å¸®åŠ©ä½ å­¦ä¹ C++ï¼C++ æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œåº”ç”¨äºå„ç§é¢†åŸŸï¼ŒåŒ…æ‹¬ç³»ç»Ÿç¼–ç¨‹ã€æ¸¸æˆå¼€å‘ã€å›¾å½¢ç•Œé¢è®¾è®¡ã€ç§‘å­¦è®¡ç®—ç­‰ç­‰ã€‚å®ƒæ˜¯ä¸€ç§é€šç”¨çš„é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œå…·æœ‰å¼ºå¤§çš„æ§åˆ¶èƒ½åŠ›å’Œé«˜æ•ˆçš„æ‰§è¡Œé€Ÿåº¦ã€‚</p><p>åœ¨å¼€å§‹å­¦ä¹  C++ ä¹‹å‰ï¼Œä½ éœ€è¦äº†è§£ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œæ¯”å¦‚è®¡ç®—æœºç¼–ç¨‹çš„åŸºæœ¬åŸç†å’Œç¼–ç¨‹è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ã€‚ä½ éœ€è¦äº†è§£çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µåŒ…æ‹¬ï¼š</p><ul><li>æ•°æ®ç±»å‹ï¼šC++ ä¸­çš„æ¯ä¸ªå€¼éƒ½å…·æœ‰ä¸€ç§æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚æ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ç­‰ç­‰ã€‚</li><li>å˜é‡ï¼šåœ¨ç¨‹åºä¸­ï¼Œä½ éœ€è¦ä¸ºæ•°æ®ç±»å‹åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¹¶ç»™è¿™äº›ç©ºé—´å–ä¸€ä¸ªåå­—ï¼Œè¿™ä¸ªåå­—å°±æ˜¯å˜é‡åã€‚</li><li>è¿ç®—ç¬¦ï¼šC++ æ”¯æŒå„ç§è¿ç®—ç¬¦ï¼Œä¾‹å¦‚ç®—æœ¯è¿ç®—ç¬¦ã€æ¯”è¾ƒè¿ç®—ç¬¦ã€é€»è¾‘è¿ç®—ç¬¦ç­‰ç­‰ã€‚</li><li>æ§åˆ¶ç»“æ„ï¼šC++ ä¸­æœ‰å¤šç§æ§åˆ¶ç»“æ„ï¼Œä¾‹å¦‚æ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥ç­‰ç­‰ï¼Œå®ƒä»¬å¯ä»¥æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹ã€‚</li></ul><p>å¦‚æœä½ å·²ç»æŒæ¡äº†è¿™äº›åŸºæœ¬æ¦‚å¿µï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥å¼€å§‹å­¦ä¹  C++ çš„è¯­æ³•å’Œè¯­è¨€ç‰¹æ€§äº†ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä½ éœ€è¦å­¦ä¹ çš„ä¸»è¦ä¸»é¢˜ï¼š</p><ul><li>è¾“å…¥å’Œè¾“å‡ºï¼šC++ ä¸­çš„æ ‡å‡†è¾“å…¥è¾“å‡ºæµï¼ˆcin å’Œ coutï¼‰å¯ä»¥è®©ç¨‹åºä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œå¹¶ä»ç”¨æˆ·é‚£é‡Œè·å–è¾“å…¥æˆ–è¾“å‡ºç»“æœã€‚</li><li>å‡½æ•°ï¼šå‡½æ•°æ˜¯ä¸€ä¸ªå¯é‡ç”¨çš„ä»£ç å—ï¼Œå®ƒå¯ä»¥æ¥æ”¶å‚æ•°å¹¶è¿”å›å€¼ã€‚åœ¨ C++ ä¸­ï¼Œå‡½æ•°é€šå¸¸ç”¨äºç»„ç»‡ç¨‹åºï¼Œå¹¶ä½¿ç¨‹åºæ›´æ˜“äºé˜…è¯»å’Œç»´æŠ¤ã€‚</li><li>æ•°ç»„å’ŒæŒ‡é’ˆï¼šæ•°ç»„å’ŒæŒ‡é’ˆæ˜¯ C++ ä¸­çš„é‡è¦æ¦‚å¿µï¼Œå®ƒä»¬å¯ä»¥è®©ä½ ç®¡ç†å’Œæ“ä½œå¤§é‡æ•°æ®ã€‚</li><li>ç±»å’Œå¯¹è±¡ï¼šç±»å’Œå¯¹è±¡æ˜¯ C++ ä¸­çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œå®ƒä»¬å¯ä»¥è®©ä½ ç»„ç»‡å’ŒæŠ½è±¡æ•°æ®ï¼Œå¹¶åœ¨ç¨‹åºä¸­åˆ›å»ºå¯é‡ç”¨çš„ä»£ç æ¨¡å—ã€‚</li><li>ç»§æ‰¿å’Œå¤šæ€ï¼šç»§æ‰¿å’Œå¤šæ€æ˜¯ C++ ä¸­é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸¤ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œå®ƒä»¬å¯ä»¥è®©ä½ åˆ›å»ºæ›´å…·æœ‰ç»“æ„åŒ–å’Œæ¨¡å—åŒ–çš„ç¨‹åºã€‚</li></ul><p>è¿™åªæ˜¯ C++ çš„ä¸€ä¸ªåŸºæœ¬æ¦‚è§ˆï¼Œå¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°äº†è§£ C++ï¼Œä½ è¿˜éœ€è¦äº†è§£æ›´å¤šçš„ä¸»é¢˜ï¼Œæ¯”å¦‚æ¨¡æ¿ã€STLï¼ˆæ ‡å‡†æ¨¡æ¿åº“ï¼‰ç­‰ç­‰ã€‚</p><hr><p>**æˆ‘ï¼š**è€å¸ˆï¼Œèƒ½å¦è¯¦ç»†ä¸€ç‚¹ï¼Œæ…¢æ…¢çš„ç»™æˆ‘è®²ï¼Œé›¶åŸºç¡€è¯¥ä»ä»€ä¹ˆå¼€å§‹å‘¢ï¼Ÿ</p><hr><p>**ChatGPTï¼š**å½“ä½ é›¶åŸºç¡€å­¦ä¹ C++çš„æ—¶å€™ï¼Œæœ€å¥½ä»æœ€åŸºæœ¬çš„æ¦‚å¿µå¼€å§‹å­¦ä¹ ï¼Œç„¶åé€æ¸æ·±å…¥ã€‚è¿™é‡Œæˆ‘åˆ—å‡ºäº†ä¸€äº›å»ºè®®çš„å­¦ä¹ æ­¥éª¤ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼š</p><ol><li><p>å®‰è£…å’Œé…ç½®C++å¼€å‘ç¯å¢ƒ ä½ éœ€è¦ä¸‹è½½å¹¶å®‰è£…ä¸€ä¸ªC++å¼€å‘ç¯å¢ƒï¼Œæ¯”å¦‚Visual Studioã€Code::Blocksæˆ–Eclipseç­‰ç­‰ã€‚é…ç½®å¥½ç¯å¢ƒåï¼Œä½ å¯ä»¥å¼€å§‹åˆ›å»ºC++é¡¹ç›®å¹¶ç¼–å†™ä»£ç äº†ã€‚</p></li><li><p>å­¦ä¹ åŸºæœ¬è¯­æ³•å’Œæ§åˆ¶ç»“æ„ ä½ éœ€è¦å­¦ä¹ C++çš„åŸºæœ¬è¯­æ³•å’Œæ§åˆ¶ç»“æ„ï¼ŒåŒ…æ‹¬å˜é‡ã€æ•°æ®ç±»å‹ã€è¿ç®—ç¬¦ã€æ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥ç­‰ç­‰ã€‚ä½ å¯ä»¥ä»å­¦ä¹ è¿™äº›åŸºæœ¬çŸ¥è¯†å¼€å§‹ï¼Œé€šè¿‡ç»ƒä¹ æ¥æŒæ¡å®ƒä»¬ã€‚</p></li><li><p>å­¦ä¹ å‡½æ•° C++ä¸­çš„å‡½æ•°æ˜¯ä¸€ç§å¯é‡ç”¨çš„ä»£ç å—ï¼Œå®ƒå¯ä»¥æ¥æ”¶å‚æ•°å¹¶è¿”å›å€¼ã€‚ä½ éœ€è¦å­¦ä¹ å¦‚ä½•å®šä¹‰å’Œè°ƒç”¨å‡½æ•°ï¼Œä»¥åŠå¦‚ä½•å°†å‡½æ•°ç»„åˆèµ·æ¥ï¼Œæ„å»ºå‡ºä¸€ä¸ªæœ‰ç»„ç»‡çš„ç¨‹åºã€‚</p></li><li><p>å­¦ä¹ æ•°ç»„å’ŒæŒ‡é’ˆ æ•°ç»„å’ŒæŒ‡é’ˆæ˜¯C++ä¸­çš„é‡è¦æ¦‚å¿µï¼Œå®ƒä»¬å¯ä»¥è®©ä½ ç®¡ç†å’Œæ“ä½œå¤§é‡æ•°æ®ã€‚ä½ éœ€è¦å­¦ä¹ å¦‚ä½•å®šä¹‰å’Œä½¿ç”¨æ•°ç»„ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡æŒ‡é’ˆè®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ã€‚</p></li><li><p>å­¦ä¹ ç±»å’Œå¯¹è±¡ ç±»å’Œå¯¹è±¡æ˜¯C++ä¸­çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œå®ƒä»¬å¯ä»¥è®©ä½ ç»„ç»‡å’ŒæŠ½è±¡æ•°æ®ï¼Œå¹¶åœ¨ç¨‹åºä¸­åˆ›å»ºå¯é‡ç”¨çš„ä»£ç æ¨¡å—ã€‚ä½ éœ€è¦å­¦ä¹ å¦‚ä½•å®šä¹‰å’Œä½¿ç”¨ç±»å’Œå¯¹è±¡ï¼Œä»¥åŠå¦‚ä½•å®ç°ç±»ä¹‹é—´çš„ç»§æ‰¿å’Œå¤šæ€ã€‚</p></li><li><p>ç»ƒä¹ å’Œé¡¹ç›® æœ€åï¼Œä½ éœ€è¦é€šè¿‡å®é™…çš„ç»ƒä¹ å’Œé¡¹ç›®æ¥å·©å›ºå’Œåº”ç”¨æ‰€å­¦çš„çŸ¥è¯†ã€‚ä½ å¯ä»¥æ‰¾ä¸€äº›ç®€å•çš„ç»ƒä¹ é¢˜æˆ–å°é¡¹ç›®ï¼Œæ¯”å¦‚å®ç°ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨æˆ–çŒœæ•°å­—æ¸¸æˆï¼Œæ¥æé«˜ä½ çš„ç¼–ç¨‹èƒ½åŠ›å’Œå®è·µç»éªŒã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒC++æ˜¯ä¸€é—¨éå¸¸å¼ºå¤§å’Œå¤æ‚çš„ç¼–ç¨‹è¯­è¨€ï¼Œéœ€è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´å’Œç²¾åŠ›æ¥å­¦ä¹ å’ŒæŒæ¡ã€‚ä½†åªè¦ä½ ä¿æŒè€å¿ƒå’ŒæŒä¹‹ä»¥æ’çš„æ€åº¦ï¼Œç›¸ä¿¡ä½ ä¸€å®šèƒ½å¤ŸæŒæ¡C++ç¼–ç¨‹ï¼Œæˆä¸ºä¸€åä¼˜ç§€çš„ç¨‹åºå‘˜ã€‚</p><hr><p>**æˆ‘ï¼š**å¥½çš„è€å¸ˆï¼Œè¯·å¼€å¯æ‚¨çš„ç¬¬ä¸€å ‚è¯¾</p><hr><p>**ChatGPTï¼š**å¥½çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥å¼€å§‹ç¬¬ä¸€å ‚è¯¾å§ï¼åœ¨è¿™å ‚è¯¾ä¸­ï¼Œæˆ‘å°†ä¸ºä½ ä»‹ç»C++çš„åŸºæœ¬è¯­æ³•å’Œç¨‹åºç»“æ„ã€‚</p><p>C++ç¨‹åºçš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// è¿™é‡Œæ˜¯ç¨‹åºçš„ä¸»ä½“éƒ¨åˆ†</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„C++ç¨‹åºï¼Œå®ƒåŒ…æ‹¬äº†ä¸¤ä¸ªä¸»è¦çš„éƒ¨åˆ†ï¼š</p><ol><li><p>å¤´æ–‡ä»¶ï¼šåœ¨ç¨‹åºçš„å¼€å¤´ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>#include</code>æŒ‡ä»¤æ¥åŒ…å«å¤´æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨ç¨‹åºä¸­ä½¿ç”¨åº“å‡½æ•°ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åŒ…å«äº†<code>&lt;iostream&gt;</code>å¤´æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†C++ä¸­è¾“å…¥å’Œè¾“å‡ºæµçš„å®šä¹‰ã€‚</p></li><li><p>ä¸»å‡½æ•°ï¼šåœ¨C++ä¸­ï¼Œæ¯ä¸ªç¨‹åºå¿…é¡»æœ‰ä¸€ä¸ªä¸»å‡½æ•°<code>main()</code>ï¼Œå®ƒæ˜¯ç¨‹åºçš„å…¥å£ç‚¹ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè¿”å›æ•´æ•°ç±»å‹å€¼çš„ä¸»å‡½æ•°<code>main()</code>ï¼Œå…¶ä¸­<code>//</code>è¡¨ç¤ºæ³¨é‡Šï¼Œæ˜¯ä¸€äº›è§£é‡Šä»£ç ä½œç”¨çš„æ–‡å­—ã€‚</p></li></ol><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹C++ä¸­çš„ä¸€äº›åŸºæœ¬è¯­æ³•ï¼š</p><ol><li>å˜é‡ï¼šåœ¨C++ä¸­ï¼Œå˜é‡æ˜¯å­˜å‚¨æ•°æ®å€¼çš„ä¸€ç§æ–¹å¼ã€‚è¦å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œéœ€è¦æŒ‡å®šå˜é‡çš„æ•°æ®ç±»å‹å’Œåç§°ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> a;        <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæ•´å‹å˜é‡a</span><br><span class="hljs-type">float</span> b;      <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæµ®ç‚¹å‹å˜é‡b</span><br><span class="hljs-type">char</span> c;       <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå­—ç¬¦å‹å˜é‡c</span><br></code></pre></td></tr></table></figure><ol start="2"><li>æ•°æ®ç±»å‹ï¼šC++ä¸­æœ‰å¤šç§æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬æ•´å‹ã€æµ®ç‚¹å‹ã€å­—ç¬¦å‹ã€å¸ƒå°”å‹ç­‰ç­‰ã€‚æ¯ç§æ•°æ®ç±»å‹éƒ½æœ‰ä¸€å®šçš„å–å€¼èŒƒå›´å’Œæ‰€å å­—èŠ‚æ•°ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> i = <span class="hljs-number">10</span>;      <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæ•´å‹å˜é‡iï¼Œå¹¶åˆå§‹åŒ–ä¸º10</span><br><span class="hljs-type">float</span> f = <span class="hljs-number">3.14</span>;  <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæµ®ç‚¹å‹å˜é‡fï¼Œå¹¶åˆå§‹åŒ–ä¸º3.14</span><br><span class="hljs-type">char</span> ch = <span class="hljs-string">&#x27;a&#x27;</span>;   <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå­—ç¬¦å‹å˜é‡chï¼Œå¹¶åˆå§‹åŒ–ä¸º&#x27;a&#x27;</span><br><span class="hljs-type">bool</span> flag = <span class="hljs-literal">true</span>;<span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå¸ƒå°”å‹å˜é‡flagï¼Œå¹¶åˆå§‹åŒ–ä¸ºtrue</span><br></code></pre></td></tr></table></figure><ol start="3"><li>è¿ç®—ç¬¦ï¼šåœ¨C++ä¸­ï¼Œæœ‰å¤šç§è¿ç®—ç¬¦å¯ä»¥ç”¨æ¥è¿›è¡ŒåŸºæœ¬çš„æ•°å­¦å’Œé€»è¾‘è¿ç®—ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">5</span>;<br><span class="hljs-type">int</span> c = a + b;      <span class="hljs-comment">// åŠ æ³•è¿ç®—ï¼Œcçš„å€¼ä¸º15</span><br><span class="hljs-type">int</span> d = a * b;      <span class="hljs-comment">// ä¹˜æ³•è¿ç®—ï¼Œdçš„å€¼ä¸º50</span><br><span class="hljs-type">bool</span> e = (a &gt; b);   <span class="hljs-comment">// å¤§äºè¿ç®—ï¼Œeçš„å€¼ä¸ºtrue</span><br></code></pre></td></tr></table></figure><ol start="4"><li>æ§åˆ¶ç»“æ„ï¼šC++ä¸­æœ‰å¤šç§æ§åˆ¶ç»“æ„å¯ä»¥ç”¨æ¥æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹ï¼ŒåŒ…æ‹¬æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">if</span> (a &gt; b) &#123;<br>    <span class="hljs-comment">// å¦‚æœaå¤§äºbï¼Œæ‰§è¡Œä¸‹é¢çš„ä»£ç å—</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;a is greater than b&quot;</span> &lt;&lt; endl;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// å¦‚æœaä¸å¤§äºbï¼Œæ‰§è¡Œä¸‹é¢çš„ä»£ç å—</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;a is less than or equal to b&quot;</span> &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><hr><p>**æˆ‘ï¼š**ç»§ç»­</p><hr><p>**ChatGPTï¼š**å¥½çš„ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹ä¸€äº›C++ä¸­çš„åŸºæœ¬è¯­æ³•ï¼š</p><ol start="5"><li>å‡½æ•°ï¼šåœ¨C++ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€æ®µç‹¬ç«‹çš„ä»£ç å—ï¼Œå¯ä»¥æ¥å—è¾“å…¥å‚æ•°å¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚å‡½æ•°å¯ä»¥ç”¨æ¥å°è£…å’Œé‡å¤ä½¿ç”¨ä»£ç ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼Œæ¥å—ä¸¤ä¸ªæ•´å‹å‚æ•°aå’Œbï¼Œå¹¶è¿”å›å®ƒä»¬çš„å’Œ</span><br>    <span class="hljs-type">int</span> sum = a + b;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br><br><span class="hljs-type">int</span> result = <span class="hljs-built_in">add</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>);    <span class="hljs-comment">// è°ƒç”¨addå‡½æ•°ï¼Œä¼ å…¥å‚æ•°10å’Œ5ï¼Œè¿”å›ç»“æœ15</span><br></code></pre></td></tr></table></figure><ol start="6"><li>æ•°ç»„ï¼šåœ¨C++ä¸­ï¼Œæ•°ç»„æ˜¯ä¸€ç§ç”¨æ¥å­˜å‚¨å¤šä¸ªç›¸åŒç±»å‹å…ƒç´ çš„æ•°æ®ç»“æ„ã€‚æ•°ç»„çš„å…ƒç´ å¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®ï¼Œç´¢å¼•ä»0å¼€å§‹ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>];         <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªåŒ…å«5ä¸ªæ•´å‹å…ƒç´ çš„æ•°ç»„</span><br>arr[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span>;        <span class="hljs-comment">// è®¾ç½®ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ä¸º10</span><br>arr[<span class="hljs-number">1</span>] = <span class="hljs-number">20</span>;        <span class="hljs-comment">// è®¾ç½®ç¬¬äºŒä¸ªå…ƒç´ çš„å€¼ä¸º20</span><br><span class="hljs-type">int</span> sum = arr[<span class="hljs-number">0</span>] + arr[<span class="hljs-number">1</span>];  <span class="hljs-comment">// è®¡ç®—ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå…ƒç´ çš„å’Œï¼Œsumçš„å€¼ä¸º30</span><br></code></pre></td></tr></table></figure><ol start="7"><li>æŒ‡é’ˆï¼šåœ¨C++ä¸­ï¼ŒæŒ‡é’ˆæ˜¯ä¸€ç§ç”¨æ¥å­˜å‚¨å˜é‡åœ°å€çš„æ•°æ®ç±»å‹ã€‚æŒ‡é’ˆå¯ä»¥ç”¨æ¥è®¿é—®å’Œä¿®æ”¹å˜é‡çš„å€¼ï¼Œè¿˜å¯ä»¥ç”¨æ¥åŠ¨æ€åˆ†é…å†…å­˜ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;         <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæ•´å‹å˜é‡aï¼Œå¹¶åˆå§‹åŒ–ä¸º10</span><br><span class="hljs-type">int</span> *p = &amp;a;        <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæ•´å‹æŒ‡é’ˆpï¼Œå¹¶å°†å®ƒæŒ‡å‘açš„åœ°å€</span><br>*p = <span class="hljs-number">20</span>;            <span class="hljs-comment">// ä¿®æ”¹æŒ‡é’ˆæ‰€æŒ‡å‘çš„å˜é‡açš„å€¼ä¸º20</span><br>cout &lt;&lt; a &lt;&lt; endl;  <span class="hljs-comment">// è¾“å‡ºaçš„å€¼ä¸º20</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯C++ä¸­ä¸€äº›åŸºæœ¬è¯­æ³•çš„ä»‹ç»ï¼Œå®ƒä»¬æ˜¯ä½ å­¦ä¹ C++ç¼–ç¨‹çš„åŸºç¡€ã€‚åœ¨ä¸‹ä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥è®¨è®ºè¿™äº›åŸºæœ¬è¯­æ³•çš„åº”ç”¨ï¼Œå¹¶å­¦ä¹ å¦‚ä½•ä½¿ç”¨C++æ¥å®ç°ç®€å•çš„ç¨‹åºã€‚</p><hr><p>**æˆ‘ï¼š**è°¢è°¢è€å¸ˆï¼Œè¯·å¼€å¯æ‚¨çš„ç¬¬äºŒèŠ‚è¯¾</p><hr><p><strong>ChatGPTï¼š</strong> å¥½çš„ï¼Œæœ¬èŠ‚è¯¾æˆ‘ä»¬å°†è¿›ä¸€æ­¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨C++æ¥å®ç°ç¨‹åºï¼ŒåŒ…æ‹¬è¾“å…¥è¾“å‡ºã€æ§åˆ¶è¯­å¥å’Œå¾ªç¯è¯­å¥ã€‚</p><ol><li>è¾“å…¥è¾“å‡ºï¼šåœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è¾“å…¥è¾“å‡ºæµï¼ˆiostreamï¼‰æ¥å®ç°ç¨‹åºçš„è¾“å…¥è¾“å‡ºã€‚è¾“å…¥æµç”¨äºä»æ ‡å‡†è¾“å…¥è®¾å¤‡ï¼ˆæ¯”å¦‚é”®ç›˜ï¼‰ä¸­è¯»å–æ•°æ®ï¼Œè¾“å‡ºæµç”¨äºå‘æ ‡å‡†è¾“å‡ºè®¾å¤‡ï¼ˆæ¯”å¦‚å±å¹•ï¼‰ä¸­è¾“å‡ºæ•°æ®ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> num;<br>    cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼š&quot;</span> &lt;&lt; endl;   <span class="hljs-comment">// è¾“å‡ºæç¤ºä¿¡æ¯</span><br>    cin &gt;&gt; num;                           <span class="hljs-comment">// ä»é”®ç›˜è¯»å–ä¸€ä¸ªæ•´æ•°ï¼Œå¹¶èµ‹å€¼ç»™å˜é‡num</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;ä½ è¾“å…¥çš„æ•´æ•°æ˜¯ï¼š&quot;</span> &lt;&lt; num &lt;&lt; endl;   <span class="hljs-comment">// è¾“å‡ºå˜é‡numçš„å€¼</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>æ§åˆ¶è¯­å¥ï¼šåœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ifè¯­å¥å’Œswitchè¯­å¥æ¥æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹ã€‚ifè¯­å¥ç”¨äºæ ¹æ®æŸä¸ªæ¡ä»¶åˆ¤æ–­æ˜¯å¦æ‰§è¡ŒæŸä¸ªä»£ç å—ï¼Œswitchè¯­å¥ç”¨äºæ ¹æ®æŸä¸ªå€¼é€‰æ‹©æ‰§è¡Œå“ªä¸ªä»£ç å—ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> age = <span class="hljs-number">20</span>;<br><span class="hljs-keyword">if</span> (age &gt;= <span class="hljs-number">18</span>) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;ä½ å·²ç»æˆå¹´äº†&quot;</span> &lt;&lt; endl;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;ä½ è¿˜æœªæˆå¹´&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-type">int</span> day = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">switch</span> (day) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ˜ŸæœŸä¸€&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ˜ŸæœŸäºŒ&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ˜ŸæœŸä¸‰&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">default</span>:<br>        cout &lt;&lt; <span class="hljs-string">&quot;æœªçŸ¥æ—¥æœŸ&quot;</span> &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>å¾ªç¯è¯­å¥ï¼šåœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨forå¾ªç¯ã€whileå¾ªç¯å’Œdo-whileå¾ªç¯æ¥å®ç°ä»£ç çš„é‡å¤æ‰§è¡Œã€‚forå¾ªç¯å’Œwhileå¾ªç¯éƒ½æ˜¯æ ¹æ®æŸä¸ªæ¡ä»¶æ¥æ§åˆ¶å¾ªç¯çš„æ‰§è¡Œæ¬¡æ•°ï¼Œdo-whileå¾ªç¯å…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ï¼Œç„¶åå†æ ¹æ®æŸä¸ªæ¡ä»¶æ¥å†³å®šæ˜¯å¦ç»§ç»­æ‰§è¡Œå¾ªç¯ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å½“å‰æ˜¯ç¬¬&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot;æ¬¡å¾ªç¯&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-type">int</span> j = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span> (j &lt;= <span class="hljs-number">5</span>) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å½“å‰æ˜¯ç¬¬&quot;</span> &lt;&lt; j &lt;&lt; <span class="hljs-string">&quot;æ¬¡å¾ªç¯&quot;</span> &lt;&lt; endl;<br>    j++;<br>&#125;<br><br><span class="hljs-type">int</span> k = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">do</span> &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å½“å‰æ˜¯ç¬¬&quot;</span> &lt;&lt; k &lt;&lt; <span class="hljs-string">&quot;æ¬¡å¾ªç¯&quot;</span> &lt;&lt; endl;<br>    k++;<br>&#125; <span class="hljs-keyword">while</span> (k &lt;= <span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯C++ä¸­çš„ä¸€äº›åŸºæœ¬è¯­æ³•ï¼Œå®ƒä»¬æ˜¯ä½ å­¦ä¹ C++ç¼–ç¨‹çš„åŸºç¡€ã€‚åœ¨ä¸‹ä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨C++æ¥å®ç°å¸¸è§çš„æ•°æ®ç»“æ„å’Œç®—æ³•ã€‚</p><hr><p>**æˆ‘ï¼š**è°¢è°¢è€å¸ˆï¼Œè¯·ç»§ç»­</p><hr><p>**ChatGPTï¼š**å¥½çš„ï¼Œä¸‹é¢æ˜¯æœ¬èŠ‚è¯¾çš„å…¶ä»–å†…å®¹ï¼š</p><ol start="4"><li>å‡½æ•°ï¼šåœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°æ¥å®ç°å¯¹ä»£ç çš„å°è£…å’Œé‡ç”¨ã€‚å‡½æ•°æ˜¯ä¸€æ®µç‹¬ç«‹çš„ä»£ç å—ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä¸€äº›è¾“å…¥å‚æ•°ï¼Œç„¶åæ‰§è¡Œä¸€äº›æ“ä½œï¼Œå¹¶è¿”å›ä¸€ä¸ªè¾“å‡ºå€¼ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-type">int</span> result = <span class="hljs-built_in">sum</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;3 + 4 = &quot;</span> &lt;&lt; result &lt;&lt; endl;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸ºsumçš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªintç±»å‹çš„å‚æ•°aå’Œbï¼Œç„¶åè¿”å›å®ƒä»¬çš„å’Œã€‚åœ¨è°ƒç”¨sumå‡½æ•°æ—¶ï¼Œä¼ å…¥äº†å‚æ•°3å’Œ4ï¼Œç„¶åå°†è¿”å›å€¼èµ‹ç»™äº†å˜é‡resultã€‚</p><ol start="5"><li>æ•°ç»„ï¼šåœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨å¤šä¸ªç›¸åŒç±»å‹çš„æ•°æ®ã€‚æ•°ç»„å¯ä»¥ä¸€ç»´æˆ–å¤šç»´ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> numbers[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>    cout &lt;&lt; numbers[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><br><span class="hljs-type">int</span> matrix[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>] = &#123;&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>&#125;&#125;;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span>; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++) &#123;<br>        cout &lt;&lt; matrix[i][j] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªä¸€ç»´æ•°ç»„numberså’Œä¸€ä¸ªäºŒç»´æ•°ç»„matrixï¼Œå¹¶ä¸”ä½¿ç”¨äº†forå¾ªç¯æ¥éå†æ•°ç»„ä¸­çš„å…ƒç´ å¹¶è¾“å‡ºå®ƒä»¬çš„å€¼ã€‚</p><ol start="6"><li>æŒ‡é’ˆï¼šåœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æŒ‡é’ˆæ¥è¡¨ç¤ºæŸä¸ªå˜é‡åœ¨å†…å­˜ä¸­çš„åœ°å€ã€‚æŒ‡é’ˆå¯ä»¥ç”¨æ¥è®¿é—®å˜é‡çš„å€¼ã€ä¼ é€’å‚æ•°ä»¥åŠåŠ¨æ€åˆ†é…å†…å­˜ç­‰ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> number = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span>* p = &amp;number;<br>cout &lt;&lt; <span class="hljs-string">&quot;numberçš„å€¼ä¸ºï¼š&quot;</span> &lt;&lt; number &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;numberçš„åœ°å€ä¸ºï¼š&quot;</span> &lt;&lt; &amp;number &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;pæŒ‡å‘çš„å€¼ä¸ºï¼š&quot;</span> &lt;&lt; *p &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;pæŒ‡å‘çš„åœ°å€ä¸ºï¼š&quot;</span> &lt;&lt; p &lt;&lt; endl;<br><br>*p = <span class="hljs-number">20</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;numberçš„å€¼å˜ä¸ºï¼š&quot;</span> &lt;&lt; number &lt;&lt; endl;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸ºpçš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘å˜é‡numberçš„åœ°å€ã€‚é€šè¿‡*på¯ä»¥è®¿é—®numberçš„å€¼ï¼Œé€šè¿‡på¯ä»¥ä¿®æ”¹numberçš„å€¼ã€‚</p><p>è¿™äº›å†…å®¹æ˜¯C++ç¼–ç¨‹ä¸­æ¯”è¾ƒåŸºç¡€çš„å†…å®¹ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚åœ¨ä¸‹ä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­å­¦ä¹ æ›´æ·±å…¥çš„C++çŸ¥è¯†ï¼ŒåŒ…æ‹¬é¢å‘å¯¹è±¡ç¼–ç¨‹ã€æ¨¡æ¿å’Œå¼‚å¸¸å¤„ç†ç­‰ã€‚</p><hr><p>**æˆ‘ï¼š**è€å¸ˆï¼Œæˆ‘æœ‰é—®é¢˜ï¼ŒæŒ‡é’ˆå¯ä»¥æ”¾å…¥å‡½æ•°æˆ–è€…ç±»çš„åœ°å€å—ï¼Ÿ</p><hr><p>**ChatGPTï¼š**æ˜¯çš„ï¼ŒæŒ‡é’ˆå¯ä»¥å­˜å‚¨å‡½æ•°æˆ–ç±»çš„åœ°å€ã€‚</p><p>å¯¹äºå‡½æ•°æŒ‡é’ˆï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®šä¹‰ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹</span><br><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">int</span> <span class="hljs-params">(*func_ptr)</span><span class="hljs-params">(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>)</span></span>;<br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹çš„å‚æ•°</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">apply</span><span class="hljs-params">(func_ptr func, <span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">func</span>(a, b);<br>&#125;<br><br><span class="hljs-comment">// å®šä¹‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«å®ç°åŠ æ³•å’Œä¹˜æ³•</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">multiply</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a * b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// å®šä¹‰å‡½æ•°æŒ‡é’ˆå˜é‡å¹¶åˆå§‹åŒ–ä¸ºåŠ æ³•å‡½æ•°çš„åœ°å€</span><br>    func_ptr p = add;<br><br>    <span class="hljs-comment">// ä½¿ç”¨å‡½æ•°æŒ‡é’ˆå˜é‡è°ƒç”¨applyå‡½æ•°ï¼Œå¹¶ä¼ å…¥åŠ æ³•å‡½æ•°å’Œä¸¤ä¸ªå‚æ•°</span><br>    <span class="hljs-type">int</span> result = <span class="hljs-built_in">apply</span>(p, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>);<br>    cout &lt;&lt; <span class="hljs-string">&quot;3 + 4 = &quot;</span> &lt;&lt; result &lt;&lt; endl;<br><br>    <span class="hljs-comment">// å°†å‡½æ•°æŒ‡é’ˆå˜é‡ä¿®æ”¹ä¸ºä¹˜æ³•å‡½æ•°çš„åœ°å€</span><br>    p = multiply;<br><br>    <span class="hljs-comment">// å†æ¬¡ä½¿ç”¨å‡½æ•°æŒ‡é’ˆå˜é‡è°ƒç”¨applyå‡½æ•°ï¼Œå¹¶ä¼ å…¥ä¹˜æ³•å‡½æ•°å’Œä¸¤ä¸ªå‚æ•°</span><br>    result = <span class="hljs-built_in">apply</span>(p, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>);<br>    cout &lt;&lt; <span class="hljs-string">&quot;3 * 4 = &quot;</span> &lt;&lt; result &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹func_ptrï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªintç±»å‹çš„å‚æ•°å¹¶è¿”å›ä¸€ä¸ªintç±»å‹çš„å€¼ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªapplyå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªfunc_ptrç±»å‹çš„å‚æ•°å’Œä¸¤ä¸ªintç±»å‹çš„å‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè°ƒç”¨ä¼ å…¥çš„å‡½æ•°æŒ‡é’ˆæ¥è¿›è¡Œè®¡ç®—ã€‚æœ€åæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªå‡½æ•°addå’Œmultiplyï¼Œåˆ†åˆ«å®ç°åŠ æ³•å’Œä¹˜æ³•çš„åŠŸèƒ½ã€‚åœ¨mainå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆå˜é‡pï¼Œå¹¶å°†å®ƒåˆå§‹åŒ–ä¸ºaddå‡½æ•°çš„åœ°å€ï¼Œç„¶åä½¿ç”¨applyå‡½æ•°è°ƒç”¨pæŒ‡å‘çš„å‡½æ•°æ¥è¿›è¡ŒåŠ æ³•è®¡ç®—ï¼Œå¹¶è¾“å‡ºç»“æœã€‚æ¥ç€æˆ‘ä»¬å°†pæŒ‡å‘multiplyå‡½æ•°çš„åœ°å€ï¼Œå†æ¬¡ä½¿ç”¨applyå‡½æ•°è°ƒç”¨pæŒ‡å‘çš„å‡½æ•°è¿›è¡Œä¹˜æ³•è®¡ç®—ï¼Œå¹¶è¾“å‡ºç»“æœã€‚</p><p>å¯¹äºç±»æŒ‡é’ˆï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®šä¹‰ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;MyClass::func()&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    MyClass obj;<br>    MyClass* p = &amp;obj;<br><br>    p-&gt;<span class="hljs-built_in">func</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªåä¸ºMyClassçš„ç±»ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªåä¸ºfuncçš„æˆå‘˜å‡½æ•°ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªMyClassç±»å‹çš„å¯¹è±¡objï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªæŒ‡å‘objçš„æŒ‡é’ˆpã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ç®­å¤´è¿ç®—ç¬¦-&gt;æ¥è°ƒç”¨pæŒ‡å‘çš„å¯¹è±¡çš„funcæˆå‘˜å‡½æ•°ã€‚</p><p>æ€»ä¹‹ï¼ŒæŒ‡é’ˆå¯ä»¥å­˜å‚¨å‡½æ•°æˆ–ç±»çš„åœ°å€ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥è°ƒç”¨ç›¸åº”çš„å‡½æ•°æˆ–æˆå‘˜å‡½æ•°ã€‚</p><p>è°¢è°¢è€å¸ˆï¼Œæˆ‘çŸ¥é“äº†ã€‚è€å¸ˆï¼Œé‚£æ•°ç»„çš„å®ç°æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿåœ°å€å—ï¼Ÿ</p><p>æ˜¯çš„ï¼Œæ•°ç»„çš„å®ç°æ–¹å¼æ˜¯ä½¿ç”¨å†…å­˜ä¸­ä¸€æ®µè¿ç»­çš„åœ°å€æ¥å­˜å‚¨å¤šä¸ªç›¸åŒç±»å‹çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æŒ‡é’ˆæ¥è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå› ä¸ºæ•°ç»„åæœ¬èº«å°±æ˜¯æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ•´å‹æ•°ç»„aï¼Œé‚£ä¹ˆa[0]è¡¨ç¤ºæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œa[1]è¡¨ç¤ºæ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨æŒ‡é’ˆæ¥è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> a[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-type">int</span>* p = a; <span class="hljs-comment">// å°†pæŒ‡å‘æ•°ç»„açš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;a[0] = &quot;</span> &lt;&lt; a[<span class="hljs-number">0</span>] &lt;&lt; endl; <span class="hljs-comment">// è¾“å‡ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br>cout &lt;&lt; <span class="hljs-string">&quot;*p = &quot;</span> &lt;&lt; *p &lt;&lt; endl; <span class="hljs-comment">// è¾“å‡ºpæŒ‡å‘çš„å…ƒç´ ï¼Œå³æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><br><span class="hljs-comment">// ä½¿ç”¨æŒ‡é’ˆéå†æ•°ç»„</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;a[&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot;] = &quot;</span> &lt;&lt; *(p + i) &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸ºaçš„æ•´å‹æ•°ç»„ï¼Œå¹¶å°†å®ƒåˆå§‹åŒ–ä¸º{1, 2, 3, 4, 5}ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸ºpçš„æŒ‡é’ˆï¼Œå¹¶å°†å®ƒæŒ‡å‘æ•°ç»„açš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡*pæ¥è·å–pæŒ‡å‘çš„å…ƒç´ ï¼Œå³æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æŒ‡é’ˆéå†æ•°ç»„ï¼Œé€šè¿‡æŒ‡é’ˆçš„ç®—æœ¯è¿ç®—æ¥è®¿é—®æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨æŒ‡é’ˆè®¿é—®æ•°ç»„å…ƒç´ æ—¶ï¼Œè¦ç¡®ä¿æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜åœ°å€æ˜¯åˆæ³•çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒpæŒ‡å‘æ•°ç»„açš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨*(p + i)æ¥è®¿é—®æ•°ç»„aä¸­çš„ç¬¬iä¸ªå…ƒç´ ã€‚ä½†æ˜¯å¦‚æœpæŒ‡å‘äº†æ•°ç»„aä¹‹å¤–çš„å†…å­˜åœ°å€ï¼Œæˆ–è€…æŒ‡å‘äº†æœªåˆå§‹åŒ–çš„å†…å­˜åœ°å€ï¼Œé‚£ä¹ˆè¿™æ ·çš„æ“ä½œå°±æ˜¯éæ³•çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå´©æºƒæˆ–äº§ç”Ÿä¸å¯é¢„æµ‹çš„ç»“æœã€‚</p><hr><p>**æˆ‘ï¼š**è°¢è°¢è€å¸ˆï¼Œè¯·é—®forå’Œwhileä¸¤ä¸ªå¾ªç¯å“ªä¸ªæ›´é«˜æ•ˆï¼Ÿåœ¨åµŒå…¥å¼å¼€å‘ä¸­è€å¸ˆæ›´æ¨èä½¿ç”¨å“ªä¸€ä¸ªï¼Ÿ</p><hr><p>**ChatGPTï¼š**åœ¨ä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œforå¾ªç¯å’Œwhileå¾ªç¯çš„æ•ˆç‡æ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºå®ƒä»¬çš„æœ¬è´¨ç›¸åŒï¼Œåªæ˜¯è¯­æ³•ä¸åŒã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œåº”è¯¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©åˆé€‚çš„å¾ªç¯ç»“æ„ï¼Œæ— è®ºæ˜¯forå¾ªç¯è¿˜æ˜¯whileå¾ªç¯éƒ½å¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚</p><p>åœ¨åµŒå…¥å¼å¼€å‘ä¸­ï¼Œç”±äºåµŒå…¥å¼è®¾å¤‡èµ„æºæœ‰é™ï¼Œå› æ­¤ä»£ç çš„æ•ˆç‡å’Œæ€§èƒ½éå¸¸é‡è¦ã€‚åœ¨ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨forå¾ªç¯å¯èƒ½æ¯”whileå¾ªç¯æ›´é«˜æ•ˆã€‚åŸå› æ˜¯ï¼Œforå¾ªç¯é€šå¸¸æ˜¯ç”¨æ¥è¿­ä»£å·²çŸ¥æ¬¡æ•°çš„å¾ªç¯ï¼Œç¼–è¯‘å™¨å¯ä»¥å¯¹forå¾ªç¯è¿›è¡Œä¼˜åŒ–ï¼Œç”Ÿæˆæ›´é«˜æ•ˆçš„æœºå™¨ä»£ç ã€‚è€Œwhileå¾ªç¯é€šå¸¸æ˜¯ç”¨æ¥è¿­ä»£æœªçŸ¥æ¬¡æ•°çš„å¾ªç¯ï¼Œå› æ­¤åœ¨ä¸€äº›åœºæ™¯ä¸‹å¯èƒ½ä¼šæ¯”forå¾ªç¯ç¨å¾®æ…¢ä¸€äº›ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œä½¿ç”¨forå¾ªç¯è¿˜æ˜¯whileå¾ªç¯å¹¶æ²¡æœ‰æ˜æ˜¾çš„ä¼˜åŠ£ä¹‹åˆ†ï¼Œåº”è¯¥æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„å¾ªç¯ç»“æ„ã€‚åœ¨ä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸ªäººä¹ æƒ¯å’Œä»£ç é£æ ¼æ¥é€‰æ‹©ï¼Œä¸å¿…è¿‡äºçº ç»“ã€‚ä½†åœ¨åµŒå…¥å¼å¼€å‘ä¸­ï¼Œä¸ºäº†è¾¾åˆ°æ›´é«˜çš„æ•ˆç‡å’Œæ€§èƒ½ï¼Œå¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©ä½¿ç”¨forå¾ªç¯æˆ–whileå¾ªç¯ã€‚</p><p>è°¢è°¢è€å¸ˆï¼Œè¯·æ‚¨å¼€å§‹ä¸‹ä¸€èŠ‚è¯¾çš„è®²è§£</p><p>å¥½çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è®²ä¸€ä¸‹C++ä¸­çš„å‡½æ•°ã€‚</p><p>åœ¨C++ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä»£ç å—ï¼Œå¯ä»¥æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ã€‚å‡½æ•°å¯ä»¥æœ‰è¾“å…¥å‚æ•°å’Œè¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰å‚æ•°å’Œè¿”å›å€¼ã€‚å‡½æ•°å¯ä»¥é‡è½½ï¼Œå³åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸­å¯ä»¥å®šä¹‰å¤šä¸ªåŒåçš„å‡½æ•°ï¼Œä½†æ˜¯å®ƒä»¬çš„å‚æ•°åˆ—è¡¨å¿…é¡»ä¸åŒã€‚è¿™æ ·å¯ä»¥è®©å‡½æ•°åå…·æœ‰æ›´åŠ çµæ´»çš„è¡¨ç°åŠ›ï¼Œä»¥é€‚åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„C++å‡½æ•°çš„ä¾‹å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªåä¸ºsumçš„å‡½æ•°ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°aå’Œbï¼Œè¿”å›å€¼ä¸ºaå’Œbçš„å’Œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;<br>    <span class="hljs-type">int</span> c = <span class="hljs-built_in">sum</span>(a, b);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;The sum of &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot; and &quot;</span> &lt;&lt; b &lt;&lt; <span class="hljs-string">&quot; is &quot;</span> &lt;&lt; c &lt;&lt; std::endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸ºsumçš„å‡½æ•°ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°aå’Œbï¼Œè¿”å›å€¼ä¸ºaå’Œbçš„å’Œã€‚åœ¨mainå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†sumå‡½æ•°ï¼Œå°†aå’Œbä½œä¸ºå‚æ•°ä¼ é€’ç»™sumå‡½æ•°ï¼Œå¹¶å°†sumå‡½æ•°çš„è¿”å›å€¼èµ‹ç»™å˜é‡cã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨std::coutè¯­å¥è¾“å‡ºäº†è®¡ç®—ç»“æœã€‚</p><p>å‡½æ•°çš„å®šä¹‰é€šå¸¸åŒ…æ‹¬å‡½æ•°çš„ç±»å‹ã€å‡½æ•°åã€å‚æ•°åˆ—è¡¨å’Œå‡½æ•°ä½“ã€‚å‡½æ•°ç±»å‹ç”¨äºæŒ‡å®šå‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œå‡½æ•°åç”¨äºå”¯ä¸€æ ‡è¯†å‡½æ•°ï¼Œå‚æ•°åˆ—è¡¨ç”¨äºæŒ‡å®šå‡½æ•°çš„è¾“å…¥å‚æ•°ç±»å‹å’Œåç§°ï¼Œå‡½æ•°ä½“åŒ…å«äº†å‡½æ•°çš„å…·ä½“å®ç°ä»£ç ã€‚</p><p>å‡½æ•°çš„å‚æ•°åˆ—è¡¨å¯ä»¥åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œå‚æ•°ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ã€‚æ¯ä¸ªå‚æ•°åŒ…æ‹¬å‚æ•°ç±»å‹å’Œå‚æ•°åã€‚å‚æ•°ç±»å‹æŒ‡å®šäº†å‚æ•°çš„æ•°æ®ç±»å‹ï¼Œå‚æ•°åç”¨äºåœ¨å‡½æ•°ä½“ä¸­å¼•ç”¨å‚æ•°çš„å€¼ã€‚å‡½æ•°çš„è¿”å›å€¼ç±»å‹å¯ä»¥æ˜¯ä»»ä½•C++æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯voidç±»å‹ï¼Œè¡¨ç¤ºå‡½æ•°æ²¡æœ‰è¿”å›å€¼ã€‚</p><p>å‡½æ•°ä½“ä¸­çš„ä»£ç å¯ä»¥è®¿é—®å‡½æ•°çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ã€‚å±€éƒ¨å˜é‡æ˜¯åœ¨å‡½æ•°ä½“å†…å®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨å‡½æ•°ä½“å†…éƒ¨è®¿é—®ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸåä¼šè¢«é”€æ¯ã€‚å‡½æ•°å¯ä»¥è®¿é—®å…¨å±€å˜é‡ï¼Œä½†æ˜¯åœ¨å‡½æ•°å†…éƒ¨ä¸åº”è¯¥å®šä¹‰ä¸å…¨å±€å˜é‡åŒåçš„å±€éƒ¨å˜é‡ï¼Œå› ä¸ºè¿™æ ·ä¼šéšè—å…¨å±€å˜é‡ï¼Œå¯¼è‡´ç¨‹åºå‡ºç°é”™è¯¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è·Ÿç€ChatGPTå­¦C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ChatGPT </tag>
            
            <tag> C++æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç ´è§£æ•™ç¨‹ã€‘æè·¯ç”±å™¨è¿›é˜¶æ•™ç¨‹ï¼šæ­å»ºäº¤å‰ç¼–è¯‘åœ¨è·¯ç”±å™¨ä¸­è¿è¡Œè‡ªå·±çš„ç¨‹åº</title>
      <link href="/2022/12/10/%E3%80%90%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B%E3%80%91%E6%9E%81%E8%B7%AF%E7%94%B1%E5%99%A8%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%9A%E6%90%AD%E5%BB%BA%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%9C%A8%E8%B7%AF%E7%94%B1%E5%99%A8%E4%B8%AD%E8%BF%90%E8%A1%8C%E8%87%AA%E5%B7%B1%E7%9A%84%E7%A8%8B%E5%BA%8F/"/>
      <url>/2022/12/10/%E3%80%90%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B%E3%80%91%E6%9E%81%E8%B7%AF%E7%94%B1%E5%99%A8%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%9A%E6%90%AD%E5%BB%BA%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%9C%A8%E8%B7%AF%E7%94%B1%E5%99%A8%E4%B8%AD%E8%BF%90%E8%A1%8C%E8%87%AA%E5%B7%B1%E7%9A%84%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h1>æè·¯ç”±å™¨è¿›é˜¶æ•™ç¨‹ï¼šæ­å»ºäº¤å‰ç¼–è¯‘åœ¨è·¯ç”±å™¨ä¸­è¿è¡Œè‡ªå·±çš„ç¨‹åº</h1><h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2><p>ä¸Šä¸€ç¯‡æ–‡ç« å·²ç»è®²è§£äº†æè·¯ç”±å™¨å¦‚ä½•è·å–æƒé™ï¼Œæ°¸ä¹…å¼€æ”¾sshçš„22ç«¯å£ï¼Œå¹¶çŸ¥é“äº†æè·¯ç”±å™¨çš„æ¶æ„ä¸ºMIPSæ¶æ„ã€‚é€šè¿‡å·²çŸ¥å†…å®¹ï¼Œæˆ‘ä»¬å¼€å§‹æ­å»ºäº¤å‰ç¼–è¯‘å·¥å…·é“¾ã€‚</p><p>è½¯ä»¶ï¼š</p><ol><li><p>Ubuntuæˆ–è€…å…¶ä»–Linuxç³»ç»Ÿï¼ˆæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯åŸºäºWSLçš„Ubuntu20.4ï¼‰</p></li><li><p>MIPSç¼–è¯‘å·¥å…·é“¾ä¸€å¥—ï¼ˆåŒ…å«g++ä¸gccï¼‰</p></li></ol><p>**æ³¨ï¼š**éå¸¸å‘çš„æ˜¯ï¼Œæè·¯ç”±å†…çš„ç³»ç»ŸHiwifiæ˜¯åŸºäºopenwrtçš„äºŒæ¬¡å¼€å‘ï¼Œæ™®é€šçš„mips-linux-gunçš„äº¤å‰ç¼–è¯‘é“¾ç”Ÿæˆçš„ELFæ‰§è¡Œæ–‡ä»¶åœ¨è¯¥ç³»ç»Ÿä¸‹ä¸å¯æ‰§è¡Œï¼Œå¹¶ä¸è¢«æ”¯æŒã€‚æ‰€ä»¥è¦è´¹ä¸€ç•ªåŠŸå¤«å»æ‰‹åŠ¨ç¼–è¯‘openwrtç³»ç»Ÿç„¶åæ‰‹åŠ¨æå–ï¼Œæˆ–è€…ä»ç½‘ä¸Šæ‰¾openwrtçš„ç³»ç»Ÿå·¥å…·åŒ…æå–ã€‚</p><p>ç¡¬ä»¶ï¼š</p><ol><li><p>ç”µè„‘ä¸€å°</p></li><li><p>è¢«ç ´è§£çš„æè·¯ç”±å™¨ä¸€å°</p></li></ol><h2 id="å¼€å§‹æ­å»º">å¼€å§‹æ­å»º</h2><p>é¦–å…ˆåœ¨ubuntuä¸Šå®‰è£…ä¸€äº›ä¸œè¥¿</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install libncurses5-dev gawk flex build-essential qemu-user <br></code></pre></td></tr></table></figure><p>è·å–Openwrtçš„æºä»£ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone git://git.openwrt.org/openwrt/openwrt.git <br></code></pre></td></tr></table></figure><p>ç¼–è¯‘æºä»£ç ,é»˜è®¤é…ç½®å³å¯,ä¸éœ€è¦å‹¾é€‰ä»€ä¹ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd openwrt<br><br>make menuconfig<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘,è€—æ—¶ç‰¹åˆ«é•¿,å¯ä»¥å¿™äº›åˆ«çš„äº‹æƒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">nice make -j16 <br></code></pre></td></tr></table></figure><p>ä¸€åˆ‡æ— é”™çš„æƒ…å†µä¸‹,ä¼šåœ¨staging_dirç›®å½•ä¸‹åˆ—å‡ºä¸‰ä¸ªç›®å½•:</p><blockquote><p>host</p></blockquote><blockquote><p>target-mips_34kc_uClibc-0.9.33.2</p></blockquote><blockquote><p>toolchain-mips_34kc_gcc-4.8-linaro_uClibc-0.9.33.2</p></blockquote><p><strong>ä»¥ä¸Šçš„å®‰è£…è¿‡ç¨‹æ—¶é—´å¤ªé•¿ï¼Œæ­¥éª¤å¤ªå¤šã€‚ä¸ºæ­¤æˆ‘ç›´æ¥æå–å‡ºæ¥toolchainæ–‡ä»¶ï¼Œä½ ä»¬ä¸‹è½½è§£å‹åï¼Œä»è¿™é‡Œå¼€å§‹æ‰§è¡Œä¸€ä¸‹æ­¥éª¤å³å¯</strong><strong>æå–ç‰ˆtoolchainæ–‡ä»¶çš„ä¸‹è½½åœ°å€ï¼š<a href="/download/OpenWrt-Toolchain-ramips-for-mipsel_24kec+dsp-gcc-4.8-linaro_uClibc-0.9.33.2.tar.bz2">ç‚¹æˆ‘ä¸‹è½½ï¼Œå› ä¸ºåœ¨githubä¸Šä¸‹è½½è¾ƒæ…¢ï¼Œæ–‡ä»¶ä¹Ÿä¸å¤§ï¼Œè¯·è€å¿ƒç­‰å¾…</a></strong></p><p>å°†toolchainåŠ åˆ°PATHé‡Œé¢</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vi ~/.bashrc<br></code></pre></td></tr></table></figure><p>æŒ‰ i é”®å¼€å§‹æ·»åŠ å†…å®¹ï¼Œå°†ä¸‹é¢çš„å†…å®¹æ·»åŠ åˆ°æœ€åé¢ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">export STAGING_DIR=&#123;ä½ è‡ªå·±çš„å®‰è£…è·¯å¾„ï¼ˆæœ€å¥½å†™æˆç»å¯¹è·¯å¾„ï¼‰&#125;OpenWrt/toolchain/bin/<br>export PATH=$STAGING_DIR/:$PATH<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šå·¥ä½œåšå¥½ä¹‹åæµ‹è¯•ä¸€ä¸‹ä¸‹,å¦‚ä¸‹å³ä¸ºæ­£å¸¸ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">mipsel-openwrt-linux-gcc -v</span><br>Reading specs from /home/lsx/misp-openwrt/OpenWrt/toolchain/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/specs<br>COLLECT_GCC=mipsel-openwrt-linux-uclibc-gcc.bin......çœç•¥................<br></code></pre></td></tr></table></figure><h2 id="æµ‹è¯•">æµ‹è¯•</h2><p>å†™ä¸€ä¸ªæœ€ç®€å•çš„hello worldï¼Œå‘½åtest.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  std::cout &lt;&lt; <span class="hljs-string">&quot;Hello, World!&quot;</span> &lt;&lt; std::endl;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨äº¤å‰ç¼–è¯‘ä¸€ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mipsel-openwrt-linux-gcc test.cpp -o test<br></code></pre></td></tr></table></figure><p>åœ¨è¯¥æ–‡ä»¶ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶test</p><p>å°†è¯¥æ–‡ä»¶é€šè¿‡Sftpä¼ å…¥åˆ°æè·¯ç”±å™¨ä¸­è¿è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">åŠ æƒé™</span><br>chmod +x test<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¿è¡Œ</span><br>./test<br></code></pre></td></tr></table></figure><p>ç„¶åå°±èƒ½çœ‹åˆ°æ‰§è¡Œç»“æœäº†ã€‚å¦‚å›¾ï¼š</p><p><img src="/images/2022-12-10-01.png" alt="upload successful"></p><p><strong>PS:</strong> ä¸ä¼šç”¨Sftpçœ‹æˆ‘ä¹‹å‰çš„åšæ–‡ã€‚</p><p>ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œè®²ä¸€ä¸‹äº¤å‰ç¼–è¯‘tcpdumpè¿™ä¸ªæŠ“åŒ…å·¥å…·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç ´è§£æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç ´è§£æ•™ç¨‹ </tag>
            
            <tag> æè·¯ç”±ç ´è§£è¿›é˜¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç ´è§£æ•™ç¨‹ã€‘ç ´è§£æè·¯ç”±å™¨æ•™ç¨‹</title>
      <link href="/2022/12/08/%E3%80%90%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B%E3%80%91%E7%A0%B4%E8%A7%A3%E6%9E%81%E8%B7%AF%E7%94%B1%E5%99%A8%E6%95%99%E7%A8%8B/"/>
      <url>/2022/12/08/%E3%80%90%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B%E3%80%91%E7%A0%B4%E8%A7%A3%E6%9E%81%E8%B7%AF%E7%94%B1%E5%99%A8%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1>ç ´è§£æè·¯ç”±å™¨æ•™ç¨‹</h1><h2 id="1-å‡†å¤‡å·¥ä½œ">1.å‡†å¤‡å·¥ä½œ</h2><p>ç¡¬ä»¶ï¼š</p><ol><li><p>æè·¯ç”±å™¨ä¸€å°</p></li><li><p>ç”µè„‘ä¸€å°</p></li></ol><p>è½¯ä»¶ï¼š</p><ol><li><p>MobaXterm</p></li><li><p>æµè§ˆå™¨</p></li></ol><h2 id="2-å¼€å§‹ç ´è§£">2.å¼€å§‹ç ´è§£</h2><p>å› ä¸ºæè·¯ç”±å…¬å¸å·²ç»å€’é—­ï¼Œæ— æ³•é€šè¿‡å®˜æ–¹çš„é€”å¾„è·å–æƒé™å¼€å¯sshçš„22ç«¯å£ã€‚ä¸è¿‡æœ‰ä¸€ä½å¤§ä½¬å‡ºäº†ä¸€ä¸ªç½‘é¡µï¼Œåˆ©ç”¨local_token uuid ç®—å‡ºcloud_tokenæ¥å¼€å¯è·¯ç”±å™¨ä¿ç•™çš„è°ƒè¯•æ¨¡å¼ã€‚</p><p>åœ¨è°ƒè¯•æ¨¡å¼ä¸‹å³å¯é¡ºåˆ©è¿æ¥æè·¯ç”±å™¨ï¼Œä»è€Œå¼€å¯sshçš„22ç«¯å£ã€‚</p><p>è¯¥å¤§ä½¬ç½‘å€ï¼š<a href="http://www.hiwifi.wtf/">http://www.hiwifi.wtf/</a></p><p>é¦–å…ˆä½ è¦å…ˆç”¨ç”µè„‘è¿æ¥ä¸Šè¯¥WiFiï¼Œç„¶åæ‰“å¼€ä¸Šæ–¹çš„ç½‘å€ã€‚</p><p>å¦‚å›¾ï¼š</p><p><img src="/images/2022-12-8-01.png" alt="upload successful"></p><p>ç‚¹å‡»è·å–local_token : <a href="http://www.4006024680.com/local-ssh/">ç‚¹æˆ‘ä¹Ÿå¯ä»¥è·å–</a></p><p>å¦‚å›¾ï¼š</p><p><img src="/images/2022-12-8-02.png" alt="upload successful"></p><p>å¤åˆ¶ç¬¬ä¸€ä¸ªæ¡†é‡Œçš„æ–‡æœ¬ä¿¡æ¯ï¼Œå°†å…¶å¡«å…¥å¤§ä½¬ç½‘é¡µçš„å¯¹åº”ä½ç½®ã€‚æ³¨æ„æè·¯ç”±è°ƒè¯•å·¥å…·çª—å£ä¸è¦å…³é—­ï¼ï¼</p><p>ç´§æ¥ç€è·å–uuid <a href="http://www.4006024680.com/cgi-bin/turbo/proxy/router_info">ç‚¹æˆ‘ä¹Ÿå¯ä»¥è·å–</a></p><p>å¦‚å›¾ä¸­æ‰€åœˆï¼š</p><p><img src="/images/2022-12-8-03.png" alt="upload successful"></p><p>å°†å›¾ä¸­åœˆèµ·æ¥çš„uuidï¼Œä¹Ÿå°±æ˜¯åŒå¼•å·é‡Œé¢çš„å­—ç¬¦å¤åˆ¶åˆ°å¤§ä½¬ç½‘é¡µçš„æŒ‡å®šä½ç½®ã€‚</p><p>ç„¶åç‚¹å‡»æäº¤ï¼Œä¼šè·å¾—cloud_token.</p><p>å¦‚å›¾ï¼š</p><p><img src="/images/2022-12-8-04.png" alt="upload successful"></p><p>ç„¶åå°†cloud_tokenåé¢çš„å­—ç¬¦å¤åˆ¶åˆ°æè·¯ç”±è°ƒè¯•å·¥å…·çª—å£çš„é¡µé¢ï¼Œå°†å­—ç¬¦å¡«åœ¨ç¬¬äºŒä¸ªè¾“å…¥æ¡†ä¸­ï¼Œç‚¹æäº¤ã€‚</p><p>å¦‚å›¾ï¼š</p><p><img src="/images/2022-12-8-05.png" alt="upload successful"></p><p>ç„¶åä¼šå‡ºç°ä¸€ä¸ªå¼¹å‡ºæ¡†ï¼Œå¦‚æœä¸€æ¬¡ä¸è¡Œå°±å¤šç‚¹å‡ æ¬¡æäº¤ã€‚</p><p>å‡ºç°Success: ssh port is 22è¡¨ç¤ºå·²ç»å¼€å¯äº†sshçš„22ç«¯å£ã€‚</p><p>å¦‚å›¾ï¼š</p><p><img src="/images/2022-12-8-06.png" alt="upload successful"></p><p>æ³¨æ„ï¼šè¯¥çª—å£ä¸è¦å…³é—­ï¼Œä¸‹é¢æˆ‘æ¥æ•™ä½ å¦‚ä½•è®©sshç«¯å£å¤„äºé•¿æœŸæ‰“å¼€ï¼Œä¸”å¼€æœºè‡ªå¯ã€‚</p><h2 id="3-é…ç½®sshçš„22ç«¯å£å¸¸å¼€ï¼ˆå¼€æœºè‡ªå¯ï¼‰">3.é…ç½®sshçš„22ç«¯å£å¸¸å¼€ï¼ˆå¼€æœºè‡ªå¯ï¼‰</h2><p>å› ä¸ºä¸Šä¸€æ­¥åªæ˜¯å¼€å¯äº†ä¸´æ—¶sshçš„22ç«¯å£ï¼Œè¦æƒ³å¸¸å¼€éœ€è¦å¯¹ç³»ç»Ÿåšä¸€äº›é…ç½®ã€‚</p><p>é€šè¿‡MobaXtermçš„sshè¿æ¥ï¼š</p><p>ä¸»æœºåï¼š192.168.199.1</p><p>ç”¨æˆ·åï¼šroot</p><p>å¯†ç ï¼šä½ çš„è·¯ç”±å™¨ç®¡ç†å¯†ç </p><p>ç«¯å£ï¼š22</p><p>è¿›å…¥ç³»ç»Ÿåæ‰§è¡Œå‘½ä»¤ï¼š</p><pre><code class="hljs">/etc/init.d/dropbear enable</code></pre><p>å¦‚å›¾ï¼š</p><p><img src="/images/2022-12-8-07.png" alt="upload successful"></p><p>ç„¶åä½ å°±å¯ä»¥éšæ—¶ç™»å½•æè·¯ç”±çš„ç³»ç»Ÿäº†ã€‚</p><h2 id="4-è¿›é˜¶æ“ä½œ">4.è¿›é˜¶æ“ä½œ</h2><p>å› ä¸ºæè·¯ç”±çš„linuxå±äºè¶…çº§é˜‰å‰²ç‰ˆï¼Œåªæœ‰å¯¥å¯¥å‡ è¡Œå‘½ä»¤é›†ã€‚ä¸ºæ­¤å°‘äº†éœ€è¦å¯ç©æ€§ï¼Œä¸ºæ­¤éœ€è¦äº†è§£è¯¥ç³»ç»Ÿçš„ç¡¬ä»¶æ¶æ„ï¼Œç”¨å¯¹åº”çš„ç¼–è¯‘é“¾ç¼–è¯‘è‡ªå·±æƒ³è¦å®ç°çš„ç¨‹åºåŠŸèƒ½ã€‚ï¼ˆéœ€è¦åæ§½çš„æ˜¯ï¼Œè¿™ä¸ªlinuxè¢«é˜‰å‰²çš„ä¹Ÿå¤ªå¹²å‡€äº†ï¼ï¼ï¼ï¼‰</p><p>å¦‚å›¾ï¼š</p><p><img src="/images/2022-12-8-08.png" alt="upload successful"></p><p>åªæœ‰è¿™ä¹ˆå¤šåŸºç¡€çš„å‘½ä»¤ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œåªè¦çŸ¥é“æ¶æ„å°±èƒ½æ‰¾åˆ°å¯¹åº”çš„ç¼–è¯‘é“¾ï¼Œå°±å¯ä»¥å®ç°å¾ˆå¤šåŠŸèƒ½äº†ã€‚</p><p>åœ¨ç»ˆç«¯å‘½ä»¤ä¸­è¾“å…¥ï¼š</p><pre><code class="hljs">uname -a</code></pre><p>ä¾¿å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿæ¶æ„ã€‚</p><p>å¦‚å›¾ï¼š</p><p><img src="/images/2022-8-09.png" alt="upload successful"></p><p>ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºè¯¥linuxç³»ç»Ÿåˆ›å»ºçš„æ—¶é—´2017å¹´ï¼Œæ¶æ„ä¸ºmipsã€‚</p><p>æ‰¾åˆ°mipsæ¶æ„çš„ç¼–è¯‘é“¾ä¾¿å¯ä»¥åœ¨è¯¥è·¯ç”±å™¨ä¸­è·‘è‡ªå·±å†™çš„ç¨‹åºäº†ã€‚</p><p>å…³äºmipsç¼–è¯‘é“¾æˆ‘æ”¾åœ¨ä»¥åä¸“é—¨å‡ºä¸€ä¸ªæ–‡ç« è®²è§£ï¼Œå¹¶å¸¦ä¸Šä¸€ä¸ªå·¥ç¨‹ã€‚</p><p>ç»“æŸï¼ï¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> ç ´è§£æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç ´è§£æ•™ç¨‹ </tag>
            
            <tag> åµŒå…¥å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åµŒå…¥å¼ç¬”è®°1ã€‘PCç«¯å¼€å‘å¸¸ç”¨å·¥å…·ç®€ä»‹</title>
      <link href="/2022/12/02/%E3%80%90%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B01%E3%80%91PC%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%AE%80%E4%BB%8B/"/>
      <url>/2022/12/02/%E3%80%90%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B01%E3%80%91PC%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<h1>ã€åµŒå…¥å¼ç¬”è®°1ã€‘PCç«¯å¼€å‘å¸¸ç”¨å·¥å…·ç®€ä»‹</h1><h2 id="ä¸€-ç¼–è¯‘ç¯å¢ƒçš„æ­å»º">ä¸€.ç¼–è¯‘ç¯å¢ƒçš„æ­å»º</h2><h3 id="1-ç¼–è¯‘å·¥å…·">1 ç¼–è¯‘å·¥å…·</h3><p>ç¼–è¯‘é“¾ï¼šç›®å‰æˆ‘æ‰€æ¥è§¦åˆ°çš„ç¼–è¯‘å™¨å·¥å…·é“¾ä¸€å…±æœ‰ä¸‰ä¸ªï¼ŒLinuxé€šç”¨ç¼–è¯‘é“¾ï¼Œarmç¼–è¯‘é“¾ï¼ŒFTç¼–è¯‘é“¾ï¼ˆç‰¹å®šé£è…¾èŠ¯ç‰‡ï¼‰ã€‚</p><p>ARMèŠ¯ç‰‡ç¼–è¯‘é“¾å·¥å…·å¦‚ä¸‹å›¾ï¼š<img src="/images/2022-12-2-01.png" alt="uploaded!">è¯¥å·¥å…·é“¾åŒ…å«äº†ç¼–è¯‘è¯¥èŠ¯ç‰‡ç¨‹åºçš„gccä¸g++ç¯å¢ƒã€‚</p><p>Linuxé€šç”¨ç¯å¢ƒä¸‹ç¼–è¯‘é“¾ï¼ˆX86èŠ¯ç‰‡ï¼‰å¦‚ä¸‹å›¾ï¼š<img src="/images/2022-12-2-02.pmg.png" alt="uploaded!"></p><p>é£è…¾èŠ¯ç‰‡ç¼–è¯‘é“¾å·¥å…·å¦‚ä¸‹å›¾ï¼š<img src="/images/2022-12-2-03.png" alt="uploaded!">è¯¥å·¥å…·é“¾åŒ…å«äº†ç¼–è¯‘è¯¥èŠ¯ç‰‡ç¨‹åºçš„gccä¸g++ç¯å¢ƒã€‚</p><p>WSLï¼šæœ¬ç¨‹åºä¸­è¿è¡Œç¯å¢ƒä¸ºLinuxï¼Œæ‰€ä»¥ç¨‹åºå†…éœ€è¦ç”¨åˆ°è®¸å¤šLinuxçš„åº“æ–‡ä»¶ã€‚åˆå› ä¸ºè™šæ‹Ÿæœºç›¸å¯¹è€Œè¨€å¡é¡¿ä¸”ä¸æ˜“äºç®¡ç†å’Œæ“ä½œã€‚æ‰€ä»¥WSLçš„ä¼˜åŠ¿å°±ä½“ç°å‡ºæ¥äº†ã€‚WSLæ˜¯Windowsçš„ä¸€ç§Linuxå®¹å™¨ï¼Œè¾ƒäºè™šæ‹Ÿæœºå…·æœ‰å¯åŠ¨å¿«é€Ÿæµç•…ï¼Œæ–¹ä¾¿å¯¹Linuxæ–‡ä»¶ç³»ç»Ÿçš„ç®¡ç†ï¼Œæ–‡ä»¶ä¼ è¾“æ›´ä¸ºæ–¹ä¾¿ã€‚ï¼ˆå¯ä»¥åœ¨Windowsæ–‡ä»¶ç³»ç»Ÿä¸‹å¯¹å…¶è¿›è¡Œæ“ä½œï¼‰å‰ªåˆ‡æ¿äº’é€šï¼Œå¯ä»¥éšæ„ç²˜è´´å’Œå¤åˆ¶ç­‰ç­‰ã€‚<img src="/images/2022-12-2-04.png" alt="windowsæœ¬åœ°ç›®å½•æ–‡ä»¶"><img src="/images/2022-12-2-05.png" alt="uploaded!"></p><p>Clionï¼šå› ä¸ºé•¿æ—¶é—´ä½¿ç”¨è¯¥è½¯ä»¶ï¼Œå¯¹è¯¥è½¯ä»¶ç›¸è¾ƒäºå…¶ä»–è½¯ä»¶ç†Ÿæ‚‰ï¼Œæ•…æ­¤ä½¿ç”¨è¯¥è½¯ä»¶ä½œä¸ºç¼–è¯‘å¼€å‘çš„IDEã€‚è¯¥IDEé…åˆWSLå¼€å‘å°†ä¼šéå¸¸ä¾¿æ·ï¼Œåœ¨windowsç¯å¢ƒä¸‹å¼€å‘Linuxç¯å¢ƒçš„åº”ç”¨ç¨‹åºä¸éœ€è¦å¯¼å…¥Linuxçš„åº“æ–‡ä»¶ï¼Œè¯¥ideå¯ä»¥è‡ªå·±æ£€ç´¢ã€‚<img src="/images/2022-12-2-06.png" alt="uploaded!"><img src="/images/2022-12-2-07.ping.png" alt="uploaded!">é’ˆå¯¹ä¸åŒç¼–è¯‘é“¾å¯ä»¥åœ¨CMakeä¸­è¿›è¡ŒæŒ‡å®šç¼–è¯‘ã€‚å¦‚ä¸Šå›¾ï¼Œä¸‹æ–‡ä¹Ÿä¼šç»™å‡ºæ ·ä¾‹ã€‚</p><p>Cmakeï¼šè¯¥ç¨‹åºæ˜¯ç”¨äºç®¡ç†å’Œè‡ªåŠ¨ç”Ÿæˆmakefileçš„å·¥å…·ï¼Œå¯¹äºå¤§å‹é¡¹ç›®æ¥è¯´ï¼Œé¡¹ç›®çš„ä½“ç§¯è¶Šå¤§ï¼Œmakefileçš„ç¼–å†™å°±è¶Šå¤æ‚ï¼Œä»è€Œä¸åˆ©äºç»´æŠ¤å’Œä¿®æ”¹ã€‚è€ŒCmakeå¯ä»¥è¯»å…¥æ‰€æœ‰çš„æºæ–‡ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆmakefileï¼Œä¸”è¯¥å·¥å…·å…·æœ‰è·¨å¹³å°çš„ç‰¹æ€§ã€‚</p><h3 id="2-ç¼–è¯‘ç¯å¢ƒé…ç½®">2 ç¼–è¯‘ç¯å¢ƒé…ç½®</h3><p>é¦–å…ˆå¯¼å…¥ä»£ç æˆ–è€…æ–°å»ºClionå·¥ç¨‹ï¼Œåœ¨IDEä¸­é…ç½®Clionçš„ç¼–è¯‘é“¾ã€‚ï¼ˆå¦‚å›¾ï¼Œè¯¥è½¯ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹WSLä¸­çš„ç¼–è¯‘ç¯å¢ƒï¼‰<img src="/images/2022-12-2-06.png" alt="uploaded!"></p><p>ç¼–è¯‘é“¾é…ç½®å¥½åï¼Œå¼€å§‹ç¼–å†™cmakelists.textæ–‡æ¡£ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œåœ¨ç¼–å†™cmakelists.textæ—¶éœ€è¦æŒ‡å®šä¸€ä¸‹ç¼–è¯‘å™¨ã€‚å¦‚ï¼š</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs leaf"><span class="hljs-punctuation">#</span><span class="hljs-keyword">FT</span><br>set(CMAKE_C_COMPILER &quot;/bin/aarch64-linux-gnu-gcc&quot;)<br>set(CMAKE_CXX_COMPILER &quot;/bin/aarch64-linux-gnu-g++&quot;)<br><span class="hljs-punctuation">#</span><span class="hljs-keyword">arm</span><br><span class="hljs-punctuation">#</span><span class="hljs-keyword">set</span><span class="hljs-params">(<span class="hljs-variable">CMAKE_C_COMPILER</span> <span class="hljs-string">&quot;/bin/arm-linux-gnueabihf-gcc&quot;</span>)</span><br><span class="hljs-punctuation">#</span><span class="hljs-keyword">set</span><span class="hljs-params">(<span class="hljs-variable">CMAKE_CXX_COMPILER</span> <span class="hljs-string">&quot;/bin/arm-linux-gnueabihf-g++&quot;</span>)</span><br></code></pre></td></tr></table></figure><p>cmakelists.textåœ¨IDEä¸­ä¹Ÿå¯ä»¥è‡ªåŠ¨ç”Ÿæˆï¼Œç•¥ä½œä¿®æ”¹å³å¯ã€‚</p><p>æœ¬é¡¹ç›®å®Œæ•´çš„cmakelists.textå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">cmake_minimum_required</span><span class="hljs-params">(VERSION <span class="hljs-number">3.16</span>)</span></span><br><span class="hljs-function"><span class="hljs-title">project</span><span class="hljs-params">(XiaoxinIPDetectionTool)</span></span><br><br><span class="hljs-function"><span class="hljs-title">set</span><span class="hljs-params">(CMAKE_CXX_STANDARD <span class="hljs-number">14</span>)</span></span><br><br><span class="hljs-function"><span class="hljs-title">FIND_PACKAGE</span><span class="hljs-params">(OpenMP REQUIRED)</span></span><br><span class="hljs-keyword">if</span> (OPENMP_FOUND)<br>    <span class="hljs-built_in">message</span>(<span class="hljs-string">&quot;OPENMP FOUND&quot;</span>)<br>    <span class="hljs-built_in">set</span>(CMAKE_C_FLAGS <span class="hljs-string">&quot;$&#123;CMAKE_C_FLAGS&#125; $&#123;OpenMP_C_FLAGS&#125;&quot;</span>)<br>    <span class="hljs-built_in">set</span>(CMAKE_CXX_FLAGS <span class="hljs-string">&quot;$&#123;CMAKE_CXX_FLAGS&#125; $&#123;OpenMP_CXX_FLAGS&#125;&quot;</span>)<br>    <span class="hljs-built_in">set</span>(CMAKE_EXE_LINKER_FLAGS <span class="hljs-string">&quot;$&#123;CMAKE_EXE_LINKER_FLAGS&#125; $&#123;OpenMP_EXE_LINKER_FLAGS&#125;&quot;</span>)<br><br>endif ()<br><br><span class="hljs-selector-id">#FT</span><br><span class="hljs-selector-id">#set</span>(CMAKE_C_COMPILER <span class="hljs-string">&quot;/bin/aarch64-linux-gnu-gcc&quot;</span>)<br><span class="hljs-selector-id">#set</span>(CMAKE_CXX_COMPILER <span class="hljs-string">&quot;/bin/aarch64-linux-gnu-g++&quot;</span>)<br><br><span class="hljs-selector-id">#arm</span><br><span class="hljs-selector-id">#set</span>(CMAKE_C_COMPILER <span class="hljs-string">&quot;/bin/arm-linux-gnueabihf-gcc&quot;</span>)<br><span class="hljs-selector-id">#set</span>(CMAKE_CXX_COMPILER <span class="hljs-string">&quot;/bin/arm-linux-gnueabihf-g++&quot;</span>)<br><br><br><span class="hljs-function"><span class="hljs-title">include_directories</span><span class="hljs-params">(.)</span></span><br><span class="hljs-function"><span class="hljs-title">include_directories</span><span class="hljs-params">(PublicPackage)</span></span><br>......ç•¥è¿‡...ideå¯è‡ªåŠ¨ç”Ÿæˆ<br><span class="hljs-function"><span class="hljs-title">include_directories</span><span class="hljs-params">(PublicPackage/Tools)</span></span><br><br><span class="hljs-built_in">add_executable</span>(XiaoxinIPDetectionTool<br> Â  Â  Â  Â ......å¯é€šè¿‡ideè‡ªåŠ¨ç”Ÿæˆï¼Œè¯¥å¤„ç•¥è¿‡æœ¬é¡¹ç›®çš„æ–‡ä»¶æ ‘<br> Â  Â  Â  Â iner_ip<span class="hljs-selector-class">.cpp</span><br>        iner_ip<span class="hljs-selector-class">.h</span><br>        <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.cpp</span><br>        view_ip<span class="hljs-selector-class">.cpp</span><br>        view_ip<span class="hljs-selector-class">.h</span> <br>        TestDataTransmission<span class="hljs-selector-class">.cpp</span> <br>        TestDataTransmission<span class="hljs-selector-class">.h</span> <br>        Iperf<span class="hljs-selector-class">.cpp</span> <br>        Iperf.h)<br><br></code></pre></td></tr></table></figure><p>å®Œæˆä¸Šè¿°æ­¥éª¤å³å¯ç¼–è¯‘æˆæ‰§è¡Œæ–‡ä»¶ã€‚</p><h3 id="3-è°ƒè¯•-æµ‹è¯•å·¥å…·">3 è°ƒè¯•/æµ‹è¯•å·¥å…·</h3><p>MobaXtermï¼šè¯¥è½¯ä»¶æåŠ›æ¨èï¼ŒåŠŸèƒ½å¾ˆå¤šå¾ˆå…¨ã€‚ä¸€èˆ¬æ¿å¡æµ‹è¯•éƒ½ä½¿ç”¨ä¸²å£ï¼Œè¿™é‡Œè§†æµ‹è¯•ç¯å¢ƒæƒ…å†µè€Œå®šã€‚ä¾‹å¦‚54æ‰€æœºç®±è¾ƒä¸ºé é‡Œï¼Œä¸²å£çº¿çŸ­ï¼Œç¬”è®°æœ¬æ— å¤„å®‰æ”¾ï¼Œè¿è½è„šçš„åœ°æ–¹éƒ½å¾ˆå°ï¼Œæ‰€ä»¥å¯ä»¥å°†æ¿å¡æ‹“å±•å‡ºæ¥çš„æ§åˆ¶ç½‘å£æ¥äº¤æ¢æœºï¼Œç¬”è®°æœ¬ä¹Ÿæ¥äº¤æ¢æœºé€šè¿‡sshå»è¿œç¨‹æ§åˆ¶ï¼Œå¯ä»¥åŒæ—¶æ§åˆ¶å¤šä¸ªç»ˆç«¯ã€‚</p><p>SSH ï¼šå…ˆé€šè¿‡ä¸²å£å·¥å…·ç™»å…¥æ¿å¡çš„kylinç³»ç»Ÿï¼Œåœ¨ç³»ç»Ÿä¸­å¯åŠ¨sshæœåŠ¡ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code class="hljs">systemctl start sshd          å¼€å¯SSHæœåŠ¡syatemctl is-enabled sshd Â  è®¾ç½®å¼€å¯å¯åŠ¨sshæœåŠ¡</code></pre><p>å…¶ä»–çš„Linuxç‰ˆæœ¬å¼€å¯çš„æ–¹æ³•å¤§è‡´ç•¥åŒï¼Œå¶æœ‰å·®åˆ«å¯ç™¾åº¦/è°·æ­Œè§£å†³ã€‚å¦‚æœæ²¡æœ‰sshæœåŠ¡ï¼Œå¯ä»¥é€šè¿‡åŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…openssh.</p><p>è¿æ¥sshä½¿ç”¨æ–¹æ³•ï¼šæ‰“å¼€MobaXtermï¼Œç‚¹å‡»å·¦ä¸Šè§’ã€‚å¦‚å›¾</p><p><img src="/images/2022-12-2-08.png" alt="uploaded!"></p><p>åœ¨é€‰æ‹©ssh</p><p><img src="/images/2022-12-2-09.png" alt="uploaded!"></p><p>è®°ä½æ¿å¡çš„IPå’Œç”¨æˆ·åå’Œç™»å½•å¯†ç è¾“å…¥è¿›å»</p><p><img src="/images/2022-12-2-10.png" alt="uploaded!"></p><p>å³å¯ç™»å½•æ¿å¡å‘½ä»¤ç»ˆç«¯ç•Œé¢ã€‚</p><p><img src="/images/2022-12-2-11.png" alt="uploaded!"></p><p>1.å½“ä½ æˆåŠŸè¿æ¥æ¿å¡çš„å‘½ä»¤ç»ˆç«¯ç•Œé¢åï¼Œä¼šåœ¨çª—å£çš„å·¦ä¾§ç”Ÿæˆä¸€ä¸ªsftpçš„çª—å£ï¼Œå¯ä»¥æ–¹ä¾¿æ–‡ä»¶ä¼ è¾“å’Œè½¯ä»¶çš„æ›´æ–°ã€‚2.åœ¨çª—å£çš„ä¸­é—´æ—¶å¯ä»¥è¿œç¨‹æ§åˆ¶æ¿å¡ç³»ç»Ÿçš„å‘½ä»¤ç»ˆç«¯çª—å£ã€‚3.åœ¨çª—å£çš„ä¸‹æ–¹è¿˜æœ‰ä¸€ä¸ªå°æ ï¼Œä¼šç”Ÿæˆç›‘æ§æ¿å¡ç³»ç»Ÿä¿¡æ¯çš„å†…å®¹ã€‚æ³¨ï¼šéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸€ä¸ªsshç”¨æˆ·éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç”¨æˆ·ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥åœ¨åŒä¸€ä¸ªIPæ‰“å¼€å¤šä¸ªè¿œç¨‹çª—å£ï¼Œè¿™äº›è¿œç¨‹çª—å£åœ¨è¿›ç¨‹ä¹‹é—´äº’ä¸ç›¸é€šã€‚ä¹Ÿå°±æ˜¯ä½ åœ¨ç¬¬ä¸€ä¸ªsshçª—å£æ‰“å¼€äº†ä¸€ä¸ªç¨‹åºï¼Œä½ åœ¨ç¬¬äºŒä¸ªçª—å£å´æ— æ³•çœ‹åˆ°å®ƒã€‚Pså‘½ä»¤ä¹Ÿæ— æ³•çœ‹åˆ°å®ƒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€åµŒå…¥å¼ç¬”è®°0ã€‘åµŒå…¥å¼æŠ€æœ¯æ ˆåˆ†æ</title>
      <link href="/2022/11/17/%E3%80%90%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B00%E3%80%91%E5%B5%8C%E5%85%A5%E5%BC%8F%E6%8A%80%E6%9C%AF%E6%A0%88%E5%88%86%E6%9E%90/"/>
      <url>/2022/11/17/%E3%80%90%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%AC%94%E8%AE%B00%E3%80%91%E5%B5%8C%E5%85%A5%E5%BC%8F%E6%8A%80%E6%9C%AF%E6%A0%88%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1>åµŒå…¥å¼æŠ€æœ¯æ ˆåˆ†æ</h1><h2 id="åµŒå…¥å¼å¼€å‘æµç¨‹">åµŒå…¥å¼å¼€å‘æµç¨‹</h2><p><img src="/images/2022-11-17/2022-11-17-cg449pxsfq.png" alt="æµç¨‹å›¾"></p><p>ä¸€èˆ¬æ¥è¯´ï¼ŒåµŒå…¥å¼å¼€å‘çš„åŸºæœ¬æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æˆ‘ä»¬â€œä»ä¸‹å¾€ä¸Šâ€è®²è§£ã€‚</p><h3 id="1ã€ç”»åŸç†å›¾">1ã€ç”»åŸç†å›¾</h3><p>å¤§å­¦çš„æ—¶å€™å› ä¸ºä¸€äº›ç‰¹æ®Šçš„åŸå› ï¼Œæ¥è§¦è¿‡ç”µè·¯è®¾è®¡ä»¥åŠç¡¬ä»¶å¼€å‘çš„çŸ¥è¯†ã€‚ä½†ç ”ç©¶å¹¶ä¸æ·±ï¼Œä¹Ÿæœªæ›¾æƒ³åˆ°è‡ªå·±ä¼šä»äº‹åµŒå…¥å¼å¼€å‘ï¼Œæ‰€ä»¥å·¥ä½œæ—¶åªèƒ½èŠ±å¤§é‡æ—¶é—´å°†å…¶è¡¥ä¸Šã€‚</p><p>è¨€å½’æ­£ä¼ ï¼Œç”»åŸç†å›¾é¦–å…ˆæ˜¯éœ€è¦æœ‰åŸç†å›¾åº“ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ„å»ºå…ƒå™¨ä»¶å›¾ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»åˆ«äººé‚£é‡Œæ‹·è´ã€‚æœ‰äº†åŸç†å›¾åº“ï¼Œå°±å¼€å§‹ç”»åŸç†å›¾ã€‚ç”»åŸç†å›¾éœ€è¦ä½ æœ‰å¾ˆæ‰å®çš„ç”µè·¯ã€æ•°ç”µã€æ¨¡ç”µã€ç”µåŠ›ç”µå­åŸºç¡€ï¼Œéœ€è¦ä¼šè®¾è®¡ç”µè·¯åŸç†ï¼Œéœ€è¦ä¼šå™¨ä»¶é€‰å‹ï¼Œç†Ÿæ‚‰èŠ¯ç‰‡çš„æœ€å°ç³»ç»Ÿï¼Œç†Ÿæ‚‰å¸¸ç”¨çš„ç”µæºç”µè·¯ï¼Œç†Ÿæ‚‰åŸºæœ¬çš„æ»¤æ³¢ç”µè·¯å’Œè¿ç®—æ”¾å¤§ç”µè·¯ã€‚</p><p>ä¸‹é¢æ˜¯æˆ‘ä»ç½‘ä¸Šéšä¾¿æ‰¾çš„åŸç†å›¾ï¼Œå¯åšå‚è€ƒã€‚</p><p><img src="/images/2022-11-17/2022-11-17-R-C.png" alt="R-C"></p><h3 id="2ã€ç”»PCBå›¾">2ã€ç”»PCBå›¾</h3><p>åŸç†å›¾ç”»å¥½äº†ä»¥åï¼Œå¼€å§‹ç”»PCBæ¿ï¼ŒPrinted Circuit Boardï¼Œå°åˆ¶ç”µè·¯æ¿ã€‚ç”»PCBæ¿å­ï¼Œé¦–å…ˆæ˜¯æ ¹æ®é€‰å‹çš„å…ƒå™¨ä»¶ï¼ŒæŸ¥çœ‹å…ƒå™¨ä»¶çš„æ•°æ®æ‰‹å†Œï¼Œæ ¹æ®å…ƒå™¨ä»¶çœŸå®å°è£…å¤§å°ç”»å‡ºPCBå…ƒå™¨ä»¶åº“ã€‚æœ‰äº†PCBå…ƒå™¨ä»¶åº“ï¼Œå°±å¼€å§‹ç”»PCBï¼Œç”»PCBéœ€è¦ä½ æ‡‚å¦‚ä½•èµ°çº¿ï¼ˆæ¯”å¦‚ä¸å¯ä»¥èµ°ç›´è§’ï¼‰ï¼Œå¦‚ä½•è¿›è¡Œå¼ºå¼±ç”µåˆ†ç¦»ï¼Œå¦‚ä½•é¿å…ç”µæºå¯¹ä¿¡å·çš„å¹²æ‰°ï¼Œå¦‚ä½•å¤„ç†EMIã€EMCï¼Œå¦‚ä½•å¯¹é«˜é¢‘ä¿¡å·è¿›è¡Œè›‡å½¢ç­‰é•¿èµ°çº¿ï¼Œä¸“é—¨å¹²è¿™ä¸ªçš„å«layoutå·¥ç¨‹å¸ˆï¼ˆæœ‰æ—¶å€™è¿˜éœ€è¦ç”»å¤šå±‚æ¿ï¼Œæ›´éš¾ï¼‰ã€‚ä»¥ä¸Šä¸¤æ­¥å¸¸ç”¨çš„è½¯ä»¶æœ‰ADã€PADSã€Cadence Allegroç­‰ã€‚</p><p>å¦‚æœè¯´åŸç†å›¾æ˜¯å¯¹ç”µè·¯æ¿çš„é€»è¾‘è®¾è®¡ï¼Œé‚£PCBå°±æ˜¯å¯¹ç”µè·¯æ¿çš„å®ç°è®¾è®¡ã€‚è¿™é‡Œä¸»è¦ç›®æ ‡æ˜¯é’ˆå¯¹å¦‚ä½•æ›´å¥½çš„å®ç°ç”µè·¯æ¿ï¼Œè®©å…¶æ›´åŠ ç¬¦åˆç†æƒ³åŒ–ã€‚å›´ç»•çš„é—®é¢˜åœ¨äºå…ƒå™¨ä»¶å¤§å°ï¼Œå…ƒå™¨ä»¶æ’å¸ƒï¼Œèµ°çº¿ä¹‹é—´å½±å“æœ€å°ç­‰ç­‰ã€‚</p><p>å› ä¸ºæœ€è¿‘æ¯”è¾ƒå…³æ³¨å˜‰ç«‹åˆ›çš„å¼€æºé¡¹ç›®ï¼Œä¸€ä¸ªè¿·ä½ çš„å°ç”µè§†ï¼Œåœ¨æ­¤æˆªä¸ªPCBå›¾ä»¥ä½œå‚è€ƒã€‚</p><p><img src="/images/2022-11-17/2022-11-17-215454.png" alt="2022-11-17-215454"></p><h3 id="3ã€æ‰“æ¿ä¸ç„Šæ¥">3ã€æ‰“æ¿ä¸ç„Šæ¥</h3><p>æ‰“æ¿å°±æ˜¯å°†æ¿å­ç»™åšå‡ºæ¥ï¼Œè€ŒPCBè®¾è®¡ä¾¿æ˜¯å¯¹æ¿å­çš„è®¾è®¡ã€‚PCBç”»å¥½äº†ä»¥åï¼Œå¯ä»¥å‘ç»™å‚å®¶æ‰“æ¿ç”Ÿäº§ï¼ˆå¦‚å˜‰ç«‹åˆ›ï¼Œæ¯ä¸ªæœˆéƒ½æœ‰ä¸¤æ¬¡å…è´¹æ‰“æ¿çš„æœºä¼šï¼‰ï¼Œæ¿å­å›æ¥ä»¥åï¼Œè¿›è¡Œç„Šæ¥ã€‚ç„Šæ¥ä¹Ÿæ˜¯ä¸€ä¸ªæŠ€æœ¯æ´»ï¼Œæœ€éš¾çš„æ˜¯ç„Šæ¥èŠ¯ç‰‡ï¼Œå…¶ä»–å…ƒå™¨ä»¶éƒ½å¥½ç„Šã€‚è¿™ä¸ªå› ä¸ºæ²¡æœ‰å®é™…åŠ¨æ‰‹æ“ä½œè¿‡ï¼Œå°±ä¸å¤šè¯´äº†ã€‚</p><h3 id="4ã€åµŒå…¥å¼è½¯ä»¶è®¾è®¡ï¼ˆç³»ç»Ÿç§»æ¤ï¼‰">4ã€åµŒå…¥å¼è½¯ä»¶è®¾è®¡ï¼ˆç³»ç»Ÿç§»æ¤ï¼‰</h3><p>æœ¬äººå·¥ä½œçš„ä¸»è¦å†…å®¹ä¾¿åœ¨è¿™ä¸ªç¯èŠ‚ã€‚</p><p>å½“ç¡®å®šç»è¿‡æµ‹è¯•ç¡¬ä»¶æ²¡æœ‰é—®é¢˜åï¼Œæ¿å­éœ€è¦äº¤åˆ°è½¯ä»¶å·¥ç¨‹å¸ˆæ‰‹ä¸­è¿›è¡Œè®¾è®¡ä¸å¼€å‘ã€‚å› ä¸ºwindowsç³»ç»Ÿå¤ªè¿‡äºè‡ƒè‚¿ï¼Œæ‰€ä»¥æ¿è½½ç³»ç»Ÿéƒ½æ˜¯Linuxï¼ˆLinuxç³»ç»Ÿä¸ä»…å°ï¼Œè¿˜å¯ä»¥ç»è¿‡å‰ªè£å’ŒäºŒæ¬¡å¼€å‘ä½¿å…¶æ›´ç¬¦åˆç›¸å…³ä¸šåŠ¡ï¼‰ã€‚</p><p>å…³äºåµŒå…¥å¼è®¾è®¡ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–°æŠ€æœ¯ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å·¥ä½œåæ‰çŸ¥é“çš„FPGAå¼€å‘è®¾è®¡ã€‚è¯¥æŠ€æœ¯å…·æœ‰å…¶ç‰¹æ®Šæ€§ï¼Œåœ¨å¯ç¼–ç¨‹èŠ¯ç‰‡ä¸Šæ‰æœ‰è¿™é¡¹æŠ€æœ¯ã€‚FPGAæœ¬è´¨ä¸Šå…¶å®ä¹Ÿç®—æ˜¯è½¯ä»¶å±‚é¢çš„ï¼Œæˆ–è€…è¯´æ˜¯ç¡¬ä»¶åˆ°è½¯ä»¶è¿‡åº¦å±‚é¢çš„ã€‚å› ä¸ºæ‰€ç”¨çš„ç”µå­å…ƒå™¨ä»¶å…·æœ‰ç‰¹æ®Šæ€§ï¼Œä¸ºå¯ç¼–ç¨‹èŠ¯ç‰‡ã€‚æ‰€ä»¥è¯¥èŠ¯ç‰‡çš„å¼•è„šå’ŒåŠŸèƒ½å‡ºå‚æ—¶å¹¶æœªå›ºå®šæ­»ï¼Œä¹Ÿå°±ç•™å‡ºæ¥ä¸€å®šçš„è®¾è®¡ç©ºé—´ã€‚ä½†å…¶å®ä¹Ÿå—é™äºç¡¬ä»¶ï¼Œç¡¬ä»¶ä»æˆæ ·åä¾¿å›ºå®šæ­»äº†ï¼Œæ‰€ä»¥FPGAçš„è®¾è®¡è¢«å±€é™äºäº§å“èŠ¯ç‰‡çš„å¼•è„šç­‰ã€‚ï¼ˆFPGAåˆšå­¦æ²¡å¤šä¹…ï¼Œè¿™äº›éƒ½æ˜¯è‡ªæ¥è§¦ä»¥æ¥çš„ä¸ªäººç†è§£ï¼Œå¦‚æœ‰é”™è¯¯è¯·è¯„è®ºï¼Œæˆ‘ä¼šåŠæ—¶ä¿®æ­£ï¼‰</p><p>åµŒå…¥å¼è½¯ä»¶è®¾è®¡æœ‰å•ç‰‡æœºçš„ç¨‹åºè®¾è®¡ï¼ˆä¸€èˆ¬æ˜¯Cè¯­è¨€ï¼‰å’Œç³»ç»Ÿç§»æ¤çš„Linuxè½¯ä»¶å¼€å‘ï¼ˆè¿™ä¸ªè¯­è¨€å°±å¾ˆå¾ˆå¹¿æ³›äº†ï¼Œä½†C/C++å› ä¸ºæ›´è¿‘ä½å±‚ï¼Œæ€§èƒ½æ›´å¼ºï¼Œæ‰€ä»¥ç”¨çš„æ›´å¤šï¼‰ã€‚</p><p>åµŒå…¥å¼Linuxè½¯ä»¶å¼€å‘åˆ†ä¸ºï¼šç³»ç»Ÿç§»æ¤ï¼Œé©±åŠ¨ç¼–å†™ï¼Œç¨‹åºå¼€å‘ï¼Œå›ºä»¶çƒ§å†™ç­‰ã€‚</p><p>å› ä¸ºä»äº‹çš„å·¥ä½œæ¶‰åŠåˆ°ç‰¹å®šçš„èŠ¯ç‰‡ä»¥åŠè¯¥èŠ¯ç‰‡ç›¸å…³çš„æŠ€æœ¯ä¸è½¯ä»¶ï¼Œæ‰€ä»¥åç»­çš„åµŒå…¥å¼å­¦ä¹ ç¬”è®°å°†ä»¥å·¥ä½œæ‰€éœ€æŠ€æœ¯ä¸ºä¸»è¿›è¡Œç¼–å†™ã€‚</p><h3 id="5ã€é€šè®¯åè®®çš„å®šåˆ¶ä¸æµ‹è¯•">5ã€é€šè®¯åè®®çš„å®šåˆ¶ä¸æµ‹è¯•</h3><p>è¯¥æ­¥éª¤å…¶å®æ˜¯å’Œä¸Šä¸€èŠ‚åŒæ­¥è¿›è¡Œçš„ï¼Œå› ä¸ºåœ¨å†™ç¨‹åºçš„æ—¶å€™å¾€å¾€å°±å¼€å§‹é’ˆå¯¹é€šä¿¡åè®®è¿›è¡Œå•†è®¨å’Œåˆ¶å®šã€‚è€Œæˆ‘å†™ä»£ç çš„ä¸»è¦å†…å®¹ä¾¿æ˜¯å›´ç»•ç€è¿™äº›åè®®ï¼Œç¼–å†™UDPæ‰¿è½½æˆ–è€…TCPï¼ˆå¾ˆå°‘ç”¨ï¼‰ï¼Œç„¶åé’ˆå¯¹æ•°æ®è¿›è¡Œå„ç§ä½è¿ç®—ï¼Œä¸€å±‚å±‚çš„ç»™æ•°æ®å¥—ä¸Šè‡ªå®šä¹‰çš„åè®®å¤´ç­‰ç­‰ï¼Œè¿™é‡Œè®¡ç®—æœºç½‘ç»œç›¸å…³çš„çŸ¥è¯†å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>å¦‚æœè®©æˆ‘è¯´æ•´ä¸ªåµŒå…¥å¼æŠ€æœ¯æ ˆä¸­å“ªä¸€æ­¥æœ€éš¾ï¼Ÿæˆ‘ä¸ªäººè§‰å¾—å±€é™æ€§è¶Šå¤§çš„æŠ€æœ¯è¶Šéš¾ï¼Œå› ä¸ºä½ è¦åœ¨æå°çš„è®¾è®¡ç©ºé—´å†…å®Œæˆä¸šåŠ¡çš„è®¾è®¡æµç¨‹ï¼Œæ˜¯ä¸€ä»¶å¾ˆè´¹è„‘ç»†èƒçš„ä¸€ä»¶äº‹ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘è®¤ä¸ºéš¾åº¦ï¼šç¡¬ä»¶&gt;FPGA&gt;è½¯ä»¶å¼€å‘ã€‚</p><p>è½¯ä»¶çš„ä¼˜åŠ¿åœ¨äºå¼€æºç¤¾åŒºï¼Œç½‘ä¸Šå…·æœ‰è®¸å¤šèµ„æ–™ï¼Œå­¦ä¹ é—¨æ§›ä½ã€‚</p><p>FPGAåœ¨ä¸åŒèŠ¯ç‰‡ä¸­å…·æœ‰ä¸åŒçš„è®¾è®¡ï¼Œç›¸å…³èµ„æ–™å°‘ï¼Œå¦‚æœé’ˆå¯¹è¾ƒä¸ºæµè¡Œé€šç”¨çš„èŠ¯ç‰‡ï¼ˆä¾‹å¦‚èµ›çµæ€ï¼‰è¿›è¡Œå­¦ä¹ éš¾åº¦åº”è¯¥ä¸æ˜¯å¤ªå¤§ï¼Œä½†ä¸é™äºä¸€ç±»èŠ¯ç‰‡æ—¶ï¼Œå„ç§èŠ¯ç‰‡ä¹‹é—´çš„åŒºåˆ«ï¼Œå…¼å®¹æ€§ç­‰ç­‰èƒ½è®©ä½ å¤´ç–¼ã€‚ä¾‹å¦‚æˆ‘æœ€è¿‘åœ¨åšä»èµ›çµæ€è·¨åº¦åˆ°å¤æ—¦å¾®çš„å›½äº§åŒ–å°±é—®é¢˜ä¸æ–­ã€‚</p><p>ç¡¬ä»¶çš„å¼€å‘ç›¸å…³çš„å­¦ä¹ èµ„æ–™å°±æ›´å°‘äº†ï¼Œé™¤æ­¤ä¹‹å¤–ç¡¬ä»¶å‡ºBUGåœ¨ç½‘ä¸Šæ˜¯å¾ˆéš¾å»æœç´¢ç­”æ¡ˆçš„ï¼Œéœ€è¦è®¸å¤šå·¥å…·å»æ£€éªŒï¼ˆä¾‹å¦‚ä¸‡ç”¨è¡¨ã€‚é¢‘è°±ä»ªï¼Œç¤ºæ³¢å™¨ç­‰ç­‰ï¼‰è€Œä¸”ç¡¬ä»¶çš„å­¦ä¹ æˆæœ¬æé«˜ã€‚ï¼ˆå„ç±»å…ƒå™¨ä»¶éƒ½å¥½è´µçš„ï¼Œä¸€ä¸ªå¥½çš„é¢‘è°±ä»ªå’Œç¤ºæ³¢å™¨ä»·æ ¼éƒ½è´µçš„å“äººï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€C++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤07ï¼šè·¨ç³»ç»Ÿå…¼å®¹Linuxçš„è®¾è®¡</title>
      <link href="/2022/11/12/%E3%80%90C-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A407%EF%BC%9A%E5%85%BC%E5%AE%B9Linux%E7%9A%84%E8%AE%BE%E8%AE%A1/"/>
      <url>/2022/11/12/%E3%80%90C-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A407%EF%BC%9A%E5%85%BC%E5%AE%B9Linux%E7%9A%84%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h1>ã€C++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤07ï¼šè·¨ç³»ç»Ÿå…¼å®¹Linuxçš„è®¾è®¡</h1><h2 id="1-è¯´æ˜">1.è¯´æ˜</h2><p>å› ä¸ºwindowsç¯å¢ƒä¸‹ä¸linuxç¯å¢ƒä¸‹çš„ç½‘ç»œç¼–ç¨‹å­˜åœ¨å·®å¼‚ï¼Œå½“ä½ æƒ³å°†windowsä¸‹çš„ç³»ç»Ÿç§»æ¤åˆ°Linuxç¯å¢ƒä¸­ç¼–è¯‘è¿è¡Œæ—¶ï¼Œéœ€è¦ä¿®æ”¹è®¸å¤šå†…å®¹ã€‚ä¸ºäº†æ–¹ä¾¿ç§»æ¤ï¼Œå¢åŠ å…¶è·¨å¹³å°ç‰¹æ€§ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­æ·»åŠ å®è¿›è¡Œåˆ¤æ–­ï¼Œä»è€Œæé«˜è½¯ä»¶å…¼å®¹æ€§ã€‚</p><h2 id="2-ä»£ç ">2.ä»£ç </h2><p>å› ä¸ºåœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œå°†è®²è§£éƒ½ä»¥æ³¨é‡Šçš„æ–¹å¼å†™åœ¨ä»£ç é‡Œï¼Œè¿™é‡Œå°†ä¸å†é‡å¤ï¼Œç›´æ¥çœ‹ä»£ç æ³¨é‡Šã€‚</p><h3 id="2-1-Serverç«¯">2.1 Serverç«¯</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">author: è¿æ€é‘«</span><br><span class="hljs-comment">time: 2022-11-12</span><br><span class="hljs-comment">è·¨ç³»ç»Ÿå…¼å®¹Linuxçš„è®¾è®¡</span><br><span class="hljs-comment">*/</span><br><span class="hljs-comment">//å®åˆ¤æ–­è¿è¡Œç¯å¢ƒ</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span> <span class="hljs-comment">//uni std</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SOCKET int </span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVALID_SOCKET   (SOCKET)(~0)</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SOCKET_ERROR             (-1)</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdio.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">/*ä½¿ç”¨æŠ¥æ–‡çš„æ–¹å¼è¿›è¡Œä¼ è¾“*/</span><br><span class="hljs-comment">//æ•°æ®å¤´</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGIN_RESULT,<br>CMD_LOGINOUT,<br>CMD_LOGINOUT_RESULT,<br>CMD_NEW_USER_JOIN,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦ </span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-comment">//DataHeader header;</span><br><span class="hljs-built_in">Login</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(Login);<br>cmd = CMD_LOGIN;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginResult);<br>cmd = CMD_LOGIN_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOut</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOut);<br>cmd = CMD_LOGINOUT;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOutResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOutResult);<br>cmd = CMD_LOGINOUT_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-comment">//æ–°å®¢æˆ·ç«¯åŠ å…¥</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">NewUserJoin</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">NewUserJoin</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(NewUserJoin);<br>cmd = CMD_NEW_USER_JOIN;<br>sock = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> sock;<br>&#125;;<br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå…¨å±€çš„å®¹å™¨</span><br>vector&lt;SOCKET&gt; g_clients;<br><br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå‡½æ•°è¿›è¡Œå¤„ç†</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">processor</span><span class="hljs-params">(SOCKET _cSocket)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ä½¿ç”¨ç¼“å†²åŒºæ¥æ¥å—æ•°æ®</span><br><span class="hljs-type">char</span> szRecv[<span class="hljs-number">1024</span>] = &#123;&#125;;<br><span class="hljs-comment">//5 æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</span><br><span class="hljs-type">int</span> nLen = (<span class="hljs-type">int</span>)<span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;szRecv, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ‹†åŒ… å’Œ åˆ†åŒ…</span><br><span class="hljs-comment">/*æ‹†åŒ…å’Œåˆ†åŒ…çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨åœ¨æœåŠ¡ç«¯æ¥å—æ•°æ®æ—¶ä¸€æ¬¡æ¥å—æ•°æ®è¿‡é•¿ å’Œ è¿‡çŸ­çš„æƒ…å†µ*/</span><br>DataHeader* header = (DataHeader*)szRecv;<br><span class="hljs-keyword">if</span> (nLen &lt;= <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å®¢æˆ·ç«¯&lt;Socket = %d&gt;å·²ç»é€€å‡º, ä»»åŠ¡ç»“æŸã€‚\n&quot;</span>, _cSocket);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-comment">//printf(&quot;æ”¶åˆ°å‘½ä»¤: %d æ•°æ®é•¿åº¦ï¼š%d\n&quot;, header.cmd, header.dataLength);</span><br><span class="hljs-comment">/*åˆ¤æ–­æ‰€æ”¶åˆ°çš„æ•°æ®*/</span> <span class="hljs-comment">//å¤šå®¢æˆ·ç«¯è¿›è¡Œæ”¶å‘æ•°æ®çš„æƒ…å†µä¸‹ä½¿ç”¨</span><br> <span class="hljs-comment">//if (nLen &gt; sizeof(DataHeader))</span><br> <span class="hljs-comment">//&#123;</span><br> <span class="hljs-comment">//&#125;</span><br><span class="hljs-keyword">switch</span> (header-&gt;cmd)<br>&#123;<br><span class="hljs-keyword">case</span> CMD_LOGIN:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>Login* login = (Login*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å®¢æˆ·ç«¯&lt;Socket = %d&gt;è¯·æ±‚:CMD_LOGIN æ•°æ®é•¿åº¦ï¼š%d userName = %s passWord = %s\n&quot;</span>, _cSocket, login-&gt;dataLength, login-&gt;userName, login-&gt;PassWord);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginResult ret;<br><span class="hljs-comment">//send(_cSocket, (char*)&amp;header, sizeof(DataHeader), 0);</span><br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_LOGINOUT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginOut *loginout = (LoginOut*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å‘½ä»¤:CMD_LOGINOUT æ•°æ®é•¿åº¦ï¼š%d userName = %s\n&quot;</span>, loginout-&gt;dataLength, loginout-&gt;userName);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginOutResult ret;<br><span class="hljs-comment">//send(_cSocket, (char*)&amp;header, sizeof(DataHeader), 0);</span><br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginOutResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>&#123;<br>DataHeader header = &#123; <span class="hljs-number">0</span>, CMD_ERROR &#125;;<br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;header, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//--ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPæœåŠ¡ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket  å¥—æ¥å­— ï¼ˆwindowsï¼‰ linuxä¸ŠæŒ‡çš„æ˜¯æŒ‡é’ˆ</span><br><span class="hljs-comment">/*socket(</span><br><span class="hljs-comment">_In_ int af,(è¡¨ç¤ºä»€ä¹ˆç±»å‹çš„å¥—æ¥å­—)</span><br><span class="hljs-comment">_In_ int type,(æ•°æ®æµ)</span><br><span class="hljs-comment">_In_ int protocol</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//IPV4çš„ç½‘ç»œå¥—æ¥å­— AF_INET</span><br><span class="hljs-comment">//IPV6çš„ç½‘ç»œå¥—æ¥å­— AF_INET6</span><br>SOCKET _sock = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, IPPROTO_TCP);<br><span class="hljs-type">char</span> msgBuf[] = <span class="hljs-string">&quot;Hello, I&#x27;m Server.\n&quot;</span>;<br><span class="hljs-comment">//2ã€bind ç»‘å®šç”¨äºæ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥çš„ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">bind(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(namelen) const struct sockaddr FAR * name,</span><br><span class="hljs-comment">_In_ int namelen</span><br><span class="hljs-comment">);</span><br><span class="hljs-comment">*/</span><br>sockaddr_in _sin = &#123;&#125;;<br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//ç«¯å£å· ç”±äºä¸»æœºå’Œç½‘ç»œçš„æ•°æ®ç±»å‹ä¸åŒ å› æ­¤éœ€è¦è¿›è¡Œè½¬æ¢ ä½¿ç”¨ host to net unsigned short</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br>_sin.sin_addr.S_un.S_addr = INADDR_ANY;<span class="hljs-comment">//inet_addr(&quot;127.0.0.1&quot;);//æœåŠ¡å™¨çš„ipåœ°å€ INADDR_ANYæœ¬æœºæ‰€æœ‰çš„Ipåœ°å€éƒ½å¯ä»¥è®¿é—® ä¸€èˆ¬è¿™æ ·</span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>_sin.sin_addr.s_addr = INADDR_ANY;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-comment">//æœ‰å¯èƒ½ç»‘å®šå¤±è´¥</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">bind</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(_sin)))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç»‘å®šç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç»‘å®šç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//3ã€listen ç›‘å¬ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">listen(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_ int backlog</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">listen</span>(_sock, <span class="hljs-number">5</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç›‘å¬ç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›‘å¬ç½‘ç»œç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">// ä¼¯å…‹åˆ© BSD socket windowsä¸Šç¬¬ä¸€ä¸ªå‚æ•°æ— æ„ä¹‰</span><br><span class="hljs-comment">//linux è¡¨ç¤ºæè¿°ç¬¦åŠ 1</span><br><span class="hljs-comment">/*å¤„ç†å¤šå®¢æˆ·ç«¯ç±»å‹</span><br><span class="hljs-comment">select(</span><br><span class="hljs-comment">_In_ int nfds,</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * readfds,//å¯è¯»</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * writefds,//å¯å†™</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * exceptfds,//å¼‚å¸¸</span><br><span class="hljs-comment">_In_opt_ const struct timeval FAR * timeout//æŸ¥è¯¢å»¶è¿Ÿ</span><br><span class="hljs-comment">);*/</span><br>fd_set fdRead;<span class="hljs-comment">//æè¿°ç¬¦(socket)é›†åˆ</span><br>fd_set fdWrite;<br>fd_set fdExp;<br><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdRead);<span class="hljs-comment">//æ¸…ç©ºfd_seté›†åˆç±»å‹çš„æ•°æ® å…¶å®å°±æ˜¯å°†fd_count ç½®ä¸º0</span><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdWrite);<span class="hljs-comment">//æ¸…ç†é›†åˆ</span><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdExp);<br><span class="hljs-comment">//typedef struct fd_set &#123;</span><br><span class="hljs-comment">//u_int fd_count; æ•°é‡              /* how many are SET? */</span><br><span class="hljs-comment">//SOCKET  fd_array[FD_SETSIZE(64)];   /* an array of SOCKETs */</span><br><span class="hljs-comment">//&#125; fd_set;</span><br><br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdRead);<span class="hljs-comment">//å°†æè¿°ç¬¦åŠ å…¥é›†åˆä¸­</span><br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdWrite);<br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdExp);<br>SOCKET maxSock = _sock;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n = (<span class="hljs-type">int</span>)g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt;= <span class="hljs-number">0</span>; n--)<br>&#123;<br><span class="hljs-built_in">FD_SET</span>(g_clients[n], &amp;fdRead);<span class="hljs-comment">//æ”¾å…¥å¯è¯»æ•°æ®ä¸­æŸ¥è¯¢ æ˜¯å¦æœ‰å¯è¯»æ•°æ®</span><br><span class="hljs-keyword">if</span> (maxSock &lt; g_clients[n])<br>&#123;<br><span class="hljs-comment">//æ‰¾åˆ°æ‰€æœ‰æè¿°ç¬¦ä¸­çš„æœ€å¤§æè¿°ç¬¦</span><br>maxSock = g_clients[n];<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//nfdsæ˜¯ä¸€ä¸ªæ•´æ•°å€¼ æ˜¯æŒ‡fd_seté›†åˆä¸­æ‰€æœ‰æè¿°ç¬¦(socket)çš„èŒƒå›´ è€Œä¸æ˜¯æ•°é‡ </span><br><span class="hljs-comment">//æ—¢æ˜¯æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦æœ€å¤§å€¼+1 åœ¨windowsä¸­è¿™ä¸ªå‚æ•°å¯ä»¥å†™0</span><br><span class="hljs-comment">//æœ€åä¸€ä¸ªå‚æ•°å†™æˆNULLè¡¨ç¤ºä¸€ç›´é˜»å¡åœ¨æ­¤ç­‰å¾…</span><br>timeval t = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">0</span> &#125;;<span class="hljs-comment">//æ—¶é—´å˜é‡ &amp;t æœ€å¤§ä¸º1ç§’</span><br><br> <span class="hljs-comment">//struct timeval &#123;</span><br> <span class="hljs-comment">//long    tv_sec;         /* seconds */</span><br> <span class="hljs-comment">//long    tv_usec;        /* and microseconds */&#125;;</span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">select</span>(maxSock + <span class="hljs-number">1</span>, &amp;fdRead, &amp;fdWrite, &amp;fdExp, &amp;t);<br><span class="hljs-comment">/*_sock + 1èƒ½å¤Ÿ ä½¿å¾—åœ¨linuxä¸Šæ­£å¸¸ä½¿ç”¨*/</span><br><br><span class="hljs-comment">/*ä»¥ä¸Šæ–¹å¼ä¸ºé˜»å¡æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è¿›å…¥å°†é˜»å¡åœ¨æ­¤å¤„*/</span><br><span class="hljs-keyword">if</span> (ret &lt; <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;selectä»»åŠ¡ç»“æŸã€‚\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<span class="hljs-comment">//è¡¨ç¤ºå‡ºé”™ è·³å‡ºå¾ªç¯</span><br>&#125;<br><span class="hljs-comment">//å¦‚æœè¿™ä¸ªsocketå¯è¯»çš„è¯è¡¨ç¤º æœ‰å®¢æˆ·ç«¯å·²ç»è¿æ¥è¿›æ¥äº†</span><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(_sock, &amp;fdRead))<span class="hljs-comment">//åˆ¤æ–­æè¿°ç¬¦æ˜¯å¦åœ¨é›†åˆä¸­</span><br>&#123;<br><span class="hljs-comment">//æ¸…ç†</span><br><span class="hljs-built_in">FD_CLR</span>(_sock, &amp;fdRead);<br><span class="hljs-comment">//4ã€accept ç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">accept(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_Out_writes_bytes_opt_(*addrlen) struct sockaddr FAR * addr,</span><br><span class="hljs-comment">_Inout_opt_ int FAR * addrlen</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//accept ç­‰å¾…æ¥å—å®¢æˆ·ç«¯è¿æ¥</span><br>sockaddr_in clientAddr = &#123;&#125;;<br><span class="hljs-type">int</span> nAddrLen = <span class="hljs-built_in">sizeof</span>(sockaddr_in);<br>SOCKET _cSocket = INVALID_SOCKET;<br><span class="hljs-comment">//nAddrLenç±»å‹æ˜¯windowså’Œlinuxä¹‹é—´ä¸ä¸€æ ·çš„</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br>_cSocket = <span class="hljs-built_in">accept</span>(_sock, (sockaddr*)&amp;clientAddr, &amp;nAddrLen);<br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>_cSocket = <span class="hljs-built_in">accept</span>(_sock, (sockaddr*)&amp;clientAddr, (<span class="hljs-type">socklen_t</span>*)&amp;nAddrLen);<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _cSocket)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œæ¥æ”¶åˆ°æ— æ•ˆå®¢æˆ·ç«¯SOCKET...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-comment">//æœ‰æ–°å®¢æˆ·ç«¯åŠ å…¥ç¾¤å‘ç»™æ‰€æœ‰ç”¨æˆ· ç±»ä¼¼åƒèŠå¤©å®¤ æˆ–è€…ç‹¼äººæ€ç±»å‹</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n = (<span class="hljs-type">int</span>)g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt;= <span class="hljs-number">0</span>; n--)<br>&#123;<br>NewUserJoin userJoin;<br><span class="hljs-comment">//å‘é€ç»™ç°æœ‰çš„æ¯ä¸ªå®¢æˆ·ç«¯</span><br><span class="hljs-built_in">send</span>(g_clients[n], (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;userJoin, <span class="hljs-built_in">sizeof</span>(NewUserJoin), <span class="hljs-number">0</span>);<br>&#125;<br>g_clients.<span class="hljs-built_in">push_back</span>(_cSocket);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ–°å®¢æˆ·ç«¯åŠ å…¥: socket = %d IP = %s \n&quot;</span>, _cSocket, <span class="hljs-built_in">inet_ntoa</span>(clientAddr.sin_addr));<span class="hljs-comment">//inet_ntoaè½¬æ¢ä¸ºå¯è¯»åœ°å€</span><br>&#125;<br>&#125;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n = (<span class="hljs-type">int</span>)g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt;= <span class="hljs-number">0</span>; n--)<br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(g_clients[n], &amp;fdRead))<br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">processor</span>(g_clients[n]) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-keyword">auto</span> iter = g_clients.<span class="hljs-built_in">begin</span>() + n;<br><span class="hljs-keyword">if</span> (iter != g_clients.<span class="hljs-built_in">end</span>())<br>&#123;<br>g_clients.<span class="hljs-built_in">erase</span>(iter);<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">//printf(&quot;ç©ºé—²æ—¶é—´å¤„ç†å…¶ä»–ä¸šåŠ¡\n&quot;);</span><br>&#125;<br><span class="hljs-comment">//ä»¥é˜²ä¸‡ä¸€é€€å‡ºç¨‹åºæ—¶ å°†æ‰€æœ‰å¥—æ¥å­—è¿›è¡Œæ¸…ç†</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n = (<span class="hljs-type">int</span>)g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt;= <span class="hljs-number">0</span>; n--)<br>&#123;<br><span class="hljs-built_in">closesocket</span>(g_clients[n]);<br>&#125;<br><span class="hljs-comment">//5ã€send å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ•°æ®</span><br><span class="hljs-comment">/*send(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(len) const char FAR * buf,</span><br><span class="hljs-comment">_In_ int len,</span><br><span class="hljs-comment">_In_ int flags</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//char msgBuf[] = &quot;Hello, I&#x27;m Server.&quot;;</span><br><span class="hljs-comment">//+1è¡¨ç¤ºå°†ç»“å°¾ç¬¦ä¸€å¹¶å‘é€è¿‡å»</span><br><span class="hljs-comment">//send(_cSocket, msgBuf, strlen(msgBuf) + 1, 0);</span><br><br><span class="hljs-comment">//6ã€å…³é—­å¥—æ¥å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n = (<span class="hljs-type">int</span>)g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt;= <span class="hljs-number">0</span>; n--)<br>&#123;<br><span class="hljs-built_in">close</span>(g_clients[n]);<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡ºï¼Œä»»åŠ¡ç»“æŸ\n&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-Clientç«¯">2.2 Clientç«¯</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">author: è¿æ€é‘«</span><br><span class="hljs-comment">Time: 2022-11-12</span><br><span class="hljs-comment">è·¨å¹³å°å®¢æˆ·ç«¯</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">/*clientä»£ç å¯ä»¥è·¨linux windows macosä½¿ç”¨*/</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><br><span class="hljs-comment">//è¿›è¡Œç³»ç»Ÿåˆ¤æ–­ æ˜¯ä»€ä¹ˆç³»ç»Ÿå°±ä½¿ç”¨ä»€ä¹ˆåŒ…</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span> <span class="hljs-comment">//uni std</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SOCKET int </span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVALID_SOCKET   (SOCKET)(~0)</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SOCKET_ERROR             (-1)</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGIN_RESULT,<br>CMD_LOGINOUT,<br>CMD_LOGINOUT_RESULT,<br>CMD_NEW_USER_JOIN,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦ </span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-comment">//DataHeader header;</span><br><span class="hljs-built_in">Login</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(Login);<br>cmd = CMD_LOGIN;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginResult);<br>cmd = CMD_LOGIN_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOut</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOut);<br>cmd = CMD_LOGINOUT;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOutResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOutResult);<br>cmd = CMD_LOGINOUT_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-comment">//æ–°å®¢æˆ·ç«¯åŠ å…¥</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">NewUserJoin</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">NewUserJoin</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(NewUserJoin);<br>cmd = CMD_NEW_USER_JOIN;<br>sock = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> sock;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">processor</span><span class="hljs-params">(SOCKET _cSocket)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ä½¿ç”¨ç¼“å†²åŒºæ¥æ¥å—æ•°æ®</span><br><span class="hljs-type">char</span> szRecv[<span class="hljs-number">1024</span>] = &#123;&#125;;<br><span class="hljs-comment">//5 æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</span><br><span class="hljs-type">int</span> nLen = <span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;szRecv, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ‹†åŒ… å’Œ åˆ†åŒ…</span><br><span class="hljs-comment">/*æ‹†åŒ…å’Œåˆ†åŒ…çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨åœ¨æœåŠ¡ç«¯æ¥å—æ•°æ®æ—¶ä¸€æ¬¡æ¥å—æ•°æ®è¿‡é•¿ å’Œ è¿‡çŸ­çš„æƒ…å†µ*/</span><br>DataHeader* header = (DataHeader*)szRecv;<br><span class="hljs-keyword">if</span> (nLen &lt;= <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥, ä»»åŠ¡ç»“æŸã€‚\n&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-comment">//printf(&quot;æ”¶åˆ°å‘½ä»¤: %d æ•°æ®é•¿åº¦ï¼š%d\n&quot;, header.cmd, header.dataLength);</span><br><span class="hljs-comment">/*åˆ¤æ–­æ‰€æ”¶åˆ°çš„æ•°æ®*/</span> <span class="hljs-comment">//å¤šå®¢æˆ·ç«¯è¿›è¡Œæ”¶å‘æ•°æ®çš„æƒ…å†µä¸‹ä½¿ç”¨</span><br> <span class="hljs-comment">//if (nLen &gt; sizeof(DataHeader))</span><br> <span class="hljs-comment">//&#123;</span><br> <span class="hljs-comment">//&#125;</span><br><span class="hljs-keyword">switch</span> (header-&gt;cmd)<br>&#123;<br><span class="hljs-keyword">case</span> CMD_LOGIN_RESULT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginResult* login = (LoginResult*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯:CMD_LOGIN_RESULT æ•°æ®é•¿åº¦ï¼š%d \n&quot;</span>, login-&gt;dataLength);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_LOGINOUT_RESULT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginOutResult* loginout = (LoginOutResult*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯:CMD_LOGINOUT_RESULT æ•°æ®é•¿åº¦ï¼š%d \n&quot;</span>, loginout-&gt;dataLength);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_NEW_USER_JOIN:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>NewUserJoin* userJoin = (NewUserJoin*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯:CMD_NEW_USER_JOIN æ•°æ®é•¿åº¦ï¼š%d \n&quot;</span>, userJoin-&gt;dataLength);<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-type">bool</span> g_bRun = <span class="hljs-literal">true</span>;<br><span class="hljs-comment">//å°†è¾“å…¥å‘½ä»¤åˆ†ç¦»å‡ºæ¥</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">cmdThread</span><span class="hljs-params">(SOCKET sock)</span> </span>&#123;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-type">char</span> cmdBuf[<span class="hljs-number">256</span>] = &#123;&#125;;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, cmdBuf);<br><span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;exit&quot;</span>))<br>&#123;<br>g_bRun = <span class="hljs-literal">false</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é€€å‡ºcmdThreadçº¿ç¨‹\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;login&quot;</span>))<br>&#123;<br>Login login;<br><span class="hljs-built_in">strcpy</span>(login.userName, <span class="hljs-string">&quot;zjj&quot;</span>);<br><span class="hljs-built_in">strcpy</span>(login.PassWord, <span class="hljs-string">&quot;969513&quot;</span>);<br><span class="hljs-built_in">send</span>(sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;login, <span class="hljs-built_in">sizeof</span>(login), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;logout&quot;</span>))<br>&#123;<br>LoginOut logout;<br><span class="hljs-built_in">strcpy</span>(logout.userName, <span class="hljs-string">&quot;zjj&quot;</span>);<br><span class="hljs-built_in">send</span>(sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;logout, <span class="hljs-built_in">sizeof</span>(logout), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸æ”¯æŒçš„å‘½ä»¤\n&quot;</span>);<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPå®¢æˆ·ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket</span><br>SOCKET _sock = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _sock)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œå»ºç«‹Socketå¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å»ºç«‹socketæˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//2ã€é“¾æ¥æœåŠ¡å™¨ connect</span><br>sockaddr_in _sin = &#123;&#125;;<span class="hljs-comment">//å°†ç»“æ„ä½“åˆå§‹åŒ–</span><br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//å°†ç½‘ç»œè½¬æ¢ä¸ºæˆæ— ç¬¦å·ç±»å‹</span><br><span class="hljs-comment">//linuxä¿®æ”¹çš„åœ°æ–¹</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br>_sin.sin_addr.S_un.S_addr = <span class="hljs-built_in">inet_addr</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>_sin.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(<span class="hljs-string">&quot;192.168.137.1&quot;</span>);<br><span class="hljs-comment">//_sin.sin_addr.s_addr = inet_addr(&quot;192.168.25.1&quot;);</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">connect</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(sockaddr_in)); <span class="hljs-comment">//ä½¿ç”¨sizeof(sockaddr_in)ç±»å‹æ›´å®‰å…¨</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == ret)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œé“¾æ¥æœåŠ¡å™¨å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾æ¥æœåŠ¡å™¨æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//å¯åŠ¨çº¿ç¨‹</span><br><span class="hljs-function">thread <span class="hljs-title">t1</span><span class="hljs-params">(cmdThread, _sock)</span></span>;<br>t<span class="hljs-number">1.</span><span class="hljs-built_in">detach</span>();<span class="hljs-comment">//å°†å…¶ä¸ä¸»çº¿ç¨‹è¿›è¡Œåˆ†ç¦»</span><br><br><span class="hljs-keyword">while</span> (g_bRun)<br>&#123;<br>fd_set fdReads;<br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdReads);<br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdReads);<br>timeval t = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">0</span> &#125;;<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">select</span>(_sock + <span class="hljs-number">1</span>, &amp;fdReads, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, &amp;t);<br><span class="hljs-keyword">if</span> (ret &lt; <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;selectä»»åŠ¡ç»“æŸï¼ï¼ï¼\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(_sock, &amp;fdReads))<br>&#123;<br><span class="hljs-built_in">FD_CLR</span>(_sock, &amp;fdReads);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">processor</span>(_sock) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;selectä»»åŠ¡ç»“æŸ2\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-comment">//çº¿ç¨‹thread å¦‚æœåœ¨ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­åŠ å…¥scanfé‚£ä¹ˆç¨‹åºå°†ä¼šé˜»å¡</span><br><span class="hljs-comment">//printf(&quot;ç©ºé—²æ—¶é—´å¤„ç†å…¶ä»–ä¸šåŠ¡\n&quot;);</span><br><span class="hljs-comment">//Sleep(1000);</span><br>&#125;<br><br><span class="hljs-comment">//7 å…³é—­å¥—èŠ‚å­—closesocket</span><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-built_in">closesocket</span>(_sock);<span class="hljs-comment">//windowsä¸‹ä½¿ç”¨</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br><span class="hljs-built_in">close</span>(_sock);<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡º.\n&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ•ˆæœæ¼”ç¤º">æ•ˆæœæ¼”ç¤º</h2><p>Linuxç¯å¢ƒä¸ºWSLå®¹å™¨Ubuntuï¼ˆè¿è¡ŒæˆåŠŸï¼ï¼ï¼‰<img src="/images/2022-11-12-1.png" alt="Linuxç¯å¢ƒä¸‹çš„server"></p><p>å®Œæ•´å±•ç¤ºï¼š</p><p><img src="/images/2022-11-12-02.png" alt="uploaded!"></p><p>è¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªç®€å•çš„å¤šç”¨æˆ·èŠå¤©å®¤åŠŸèƒ½ï¼Œä¸”è·¨å¹³å°ã€‚serverè¿è¡Œåœ¨Linuxå®¹å™¨å†…ï¼Œclientè¿è¡Œåœ¨windows11ç¯å¢ƒä¸­ã€‚åç»­å¯ä»¥ç”¨QTå†™UIç¾åŒ–ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä»é›¶å¼€å§‹å†™ä¸€ä¸ªèŠå¤©å®¤ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++é¡¹ç›® </tag>
            
            <tag> ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤ </tag>
            
            <tag> æœåŠ¡å™¨ç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤06ï¼šç½‘ç»œç¼–ç¨‹çº¿ç¨‹</title>
      <link href="/2022/09/29/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A406%EF%BC%9A%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%BA%BF%E7%A8%8B/"/>
      <url>/2022/09/29/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A406%EF%BC%9A%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1>ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤06ï¼šç½‘ç»œç¼–ç¨‹çº¿ç¨‹</h1><p>åŸºæœ¬ä¸Šæ¯å¥ä»£ç éƒ½å†™æœ‰æ³¨é‡Šï¼Œè¿™é‡Œå°±ä¸ç½—å—¦äº†ã€‚</p><h2 id="Serverç«¯">Serverç«¯</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">Time ï¼š2022-9-29</span><br><span class="hljs-comment">Author: è¿æ€é‘«</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdio.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">/*ä½¿ç”¨æŠ¥æ–‡åè®®çš„æ–¹å¼è¿›è¡Œä¼ è¾“*/</span><br><span class="hljs-comment">//æ•°æ®å¤´</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGIN_RESULT,<br>CMD_LOGINOUT,<br>CMD_LOGINOUT_RESULT,<br>CMD_NEW_USER_JOIN,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦ </span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-comment">//DataHeader header;</span><br><span class="hljs-built_in">Login</span>() <br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(Login);<br>cmd = CMD_LOGIN;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginResult);<br>cmd = CMD_LOGIN_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOut</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOut);<br>cmd = CMD_LOGINOUT;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOutResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOutResult);<br>cmd = CMD_LOGINOUT_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-comment">//æ–°å®¢æˆ·ç«¯åŠ å…¥</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">NewUserJoin</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">NewUserJoin</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(NewUserJoin);<br>cmd = CMD_NEW_USER_JOIN;<br>sock = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> sock;<br>&#125;;<br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå…¨å±€çš„å®¹å™¨</span><br>vector&lt;SOCKET&gt; g_clients;<br><br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå‡½æ•°è¿›è¡Œå¤„ç†</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">processor</span><span class="hljs-params">(SOCKET _cSocket)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ä½¿ç”¨ç¼“å†²åŒºæ¥æ¥å—æ•°æ®</span><br><span class="hljs-type">char</span> szRecv[<span class="hljs-number">1024</span>] = &#123;&#125;;<br><span class="hljs-comment">//5 æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</span><br><span class="hljs-type">int</span> nLen = <span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;szRecv, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ‹†åŒ… å’Œ åˆ†åŒ…</span><br><span class="hljs-comment">/*æ‹†åŒ…å’Œåˆ†åŒ…çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨åœ¨æœåŠ¡ç«¯æ¥å—æ•°æ®æ—¶ä¸€æ¬¡æ¥å—æ•°æ®è¿‡é•¿ å’Œ è¿‡çŸ­çš„æƒ…å†µ*/</span><br>DataHeader* header = (DataHeader*)szRecv;<br><span class="hljs-keyword">if</span> (nLen &lt;= <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å®¢æˆ·ç«¯&lt;Socket = %d&gt;å·²ç»é€€å‡º, ä»»åŠ¡ç»“æŸã€‚\n&quot;</span>, _cSocket);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-comment">//printf(&quot;æ”¶åˆ°å‘½ä»¤: %d æ•°æ®é•¿åº¦ï¼š%d\n&quot;, header.cmd, header.dataLength);</span><br><span class="hljs-comment">/*åˆ¤æ–­æ‰€æ”¶åˆ°çš„æ•°æ®*/</span> <span class="hljs-comment">//å¤šå®¢æˆ·ç«¯è¿›è¡Œæ”¶å‘æ•°æ®çš„æƒ…å†µä¸‹ä½¿ç”¨</span><br><span class="hljs-comment">//if (nLen &gt; sizeof(DataHeader))</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-keyword">switch</span> (header-&gt;cmd)<br>&#123;<br><span class="hljs-keyword">case</span> CMD_LOGIN:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>Login* login = (Login*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å®¢æˆ·ç«¯&lt;Socket = %d&gt;è¯·æ±‚:CMD_LOGIN æ•°æ®é•¿åº¦ï¼š%d userName = %s passWord = %s\n&quot;</span>,_cSocket, login-&gt;dataLength, login-&gt;userName, login-&gt;PassWord);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginResult ret;<br><span class="hljs-comment">//send(_cSocket, (char*)&amp;header, sizeof(DataHeader), 0);</span><br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_LOGINOUT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginOut *loginout = (LoginOut*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å‘½ä»¤:CMD_LOGINOUT æ•°æ®é•¿åº¦ï¼š%d userName = %s\n&quot;</span>, loginout-&gt;dataLength, loginout-&gt;userName);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginOutResult ret;<br><span class="hljs-comment">//send(_cSocket, (char*)&amp;header, sizeof(DataHeader), 0);</span><br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginOutResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>&#123;<br>DataHeader header = &#123; <span class="hljs-number">0</span>, CMD_ERROR &#125;;<br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;header, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//--ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPæœåŠ¡ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket  å¥—æ¥å­— ï¼ˆwindowsï¼‰ linuxä¸ŠæŒ‡çš„æ˜¯æŒ‡é’ˆ</span><br><span class="hljs-comment">/*socket(</span><br><span class="hljs-comment">_In_ int af,(è¡¨ç¤ºä»€ä¹ˆç±»å‹çš„å¥—æ¥å­—)</span><br><span class="hljs-comment">_In_ int type,(æ•°æ®æµ)</span><br><span class="hljs-comment">_In_ int protocol</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//IPV4çš„ç½‘ç»œå¥—æ¥å­— AF_INET</span><br><span class="hljs-comment">//IPV6çš„ç½‘ç»œå¥—æ¥å­— AF_INET6</span><br>SOCKET _sock =  <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, IPPROTO_TCP);<br><span class="hljs-type">char</span> msgBuf[] = <span class="hljs-string">&quot;Hello, I&#x27;m Server.\n&quot;</span>;<br><span class="hljs-comment">//2ã€bind ç»‘å®šç”¨äºæ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥çš„ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">bind(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(namelen) const struct sockaddr FAR * name,</span><br><span class="hljs-comment">_In_ int namelen</span><br><span class="hljs-comment">);</span><br><span class="hljs-comment">*/</span><br>sockaddr_in _sin = &#123;&#125;;<br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//ç«¯å£å· ç”±äºä¸»æœºå’Œç½‘ç»œçš„æ•°æ®ç±»å‹ä¸åŒ å› æ­¤éœ€è¦è¿›è¡Œè½¬æ¢ ä½¿ç”¨ host to net unsigned short</span><br>_sin.sin_addr.S_un.S_addr = INADDR_ANY;<span class="hljs-comment">//inet_addr(&quot;127.0.0.1&quot;);//æœåŠ¡å™¨çš„ipåœ°å€ INADDR_ANYæœ¬æœºæ‰€æœ‰çš„Ipåœ°å€éƒ½å¯ä»¥è®¿é—® ä¸€èˆ¬è¿™æ ·</span><br><span class="hljs-comment">//æœ‰å¯èƒ½ç»‘å®šå¤±è´¥</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">bind</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(_sin))) <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç»‘å®šç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç»‘å®šç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//3ã€listen ç›‘å¬ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">listen(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_ int backlog</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">listen</span>(_sock, <span class="hljs-number">5</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç›‘å¬ç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›‘å¬ç½‘ç»œç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">// ä¼¯å…‹åˆ© BSD socket windowsä¸Šç¬¬ä¸€ä¸ªå‚æ•°æ— æ„ä¹‰</span><br><span class="hljs-comment">//linux è¡¨ç¤ºæè¿°ç¬¦åŠ 1</span><br><span class="hljs-comment">/*å¤„ç†å¤šå®¢æˆ·ç«¯ç±»å‹</span><br><span class="hljs-comment">select(</span><br><span class="hljs-comment">_In_ int nfds,</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * readfds,//å¯è¯»</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * writefds,//å¯å†™</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * exceptfds,//å¼‚å¸¸</span><br><span class="hljs-comment">_In_opt_ const struct timeval FAR * timeout//æŸ¥è¯¢å»¶è¿Ÿ</span><br><span class="hljs-comment">);*/</span><br>fd_set fdRead;<span class="hljs-comment">//æè¿°ç¬¦(socket)é›†åˆ</span><br>fd_set fdWrite;<br>fd_set fdExp;<br><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdRead);<span class="hljs-comment">//æ¸…ç©ºfd_seté›†åˆç±»å‹çš„æ•°æ® å…¶å®å°±æ˜¯å°†fd_count ç½®ä¸º0</span><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdWrite);<span class="hljs-comment">//æ¸…ç†é›†åˆ</span><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdExp);<br><span class="hljs-comment">//typedef struct fd_set &#123;</span><br><span class="hljs-comment">//u_int fd_count; æ•°é‡              /* how many are SET? */</span><br><span class="hljs-comment">//SOCKET  fd_array[FD_SETSIZE(64)];   /* an array of SOCKETs */</span><br><span class="hljs-comment">//&#125; fd_set;</span><br><br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdRead);<span class="hljs-comment">//å°†æè¿°ç¬¦åŠ å…¥é›†åˆä¸­</span><br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdWrite);<br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdExp);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n = (<span class="hljs-type">int</span>)g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt;= <span class="hljs-number">0</span>; n --)<br>&#123;<br><span class="hljs-built_in">FD_SET</span>(g_clients[n], &amp;fdRead);<span class="hljs-comment">//æ”¾å…¥å¯è¯»æ•°æ®ä¸­æŸ¥è¯¢ æ˜¯å¦æœ‰å¯è¯»æ•°æ®</span><br>&#125;<br><span class="hljs-comment">//nfdsæ˜¯ä¸€ä¸ªæ•´æ•°å€¼ æ˜¯æŒ‡fd_seté›†åˆä¸­æ‰€æœ‰æè¿°ç¬¦(socket)çš„èŒƒå›´ è€Œä¸æ˜¯æ•°é‡ </span><br><span class="hljs-comment">//æ—¢æ˜¯æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦æœ€å¤§å€¼+1 åœ¨windowsä¸­è¿™ä¸ªå‚æ•°å¯ä»¥å†™0</span><br><span class="hljs-comment">//æœ€åä¸€ä¸ªå‚æ•°å†™æˆNULLè¡¨ç¤ºä¸€ç›´é˜»å¡åœ¨æ­¤ç­‰å¾…</span><br>timeval t = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;;<span class="hljs-comment">//æ—¶é—´å˜é‡ &amp;t æœ€å¤§ä¸º1ç§’</span><br><span class="hljs-comment">//struct timeval &#123;</span><br><span class="hljs-comment">//long    tv_sec;         /* seconds */</span><br><span class="hljs-comment">//long    tv_usec;        /* and microseconds */&#125;;</span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">select</span>(_sock + <span class="hljs-number">1</span>, &amp;fdRead, &amp;fdWrite, &amp;fdExp, &amp;t);<br><span class="hljs-comment">/*ä»¥ä¸Šæ–¹å¼ä¸ºé˜»å¡æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è¿›å…¥å°†é˜»å¡åœ¨æ­¤å¤„*/</span><br><span class="hljs-keyword">if</span> (ret &lt; <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;selectä»»åŠ¡ç»“æŸã€‚\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<span class="hljs-comment">//è¡¨ç¤ºå‡ºé”™ è·³å‡ºå¾ªç¯</span><br>&#125;<br><span class="hljs-comment">//å¦‚æœè¿™ä¸ªsocketå¯è¯»çš„è¯è¡¨ç¤º æœ‰å®¢æˆ·ç«¯å·²ç»è¿æ¥è¿›æ¥äº†</span><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(_sock, &amp;fdRead))<span class="hljs-comment">//åˆ¤æ–­æè¿°ç¬¦æ˜¯å¦åœ¨é›†åˆä¸­</span><br>&#123;<br><span class="hljs-comment">//æ¸…ç†</span><br><span class="hljs-built_in">FD_CLR</span>(_sock, &amp;fdRead);<br><span class="hljs-comment">//4ã€accept ç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">accept(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_Out_writes_bytes_opt_(*addrlen) struct sockaddr FAR * addr,</span><br><span class="hljs-comment">_Inout_opt_ int FAR * addrlen</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//accept ç­‰å¾…æ¥å—å®¢æˆ·ç«¯è¿æ¥</span><br>sockaddr_in clientAddr = &#123;&#125;;<br><span class="hljs-type">int</span> nAddrLen = <span class="hljs-built_in">sizeof</span>(sockaddr_in);<br>SOCKET _cSocket = INVALID_SOCKET;<br>_cSocket = <span class="hljs-built_in">accept</span>(_sock, (sockaddr*)&amp;clientAddr, &amp;nAddrLen);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _cSocket)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œæ¥æ”¶åˆ°æ— æ•ˆå®¢æˆ·ç«¯SOCKET...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-comment">//æœ‰æ–°å®¢æˆ·ç«¯åŠ å…¥ç¾¤å‘ç»™æ‰€æœ‰ç”¨æˆ· ç±»ä¼¼åƒèŠå¤©å®¤ æˆ–è€…ç‹¼äººæ€ç±»å‹</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n = (<span class="hljs-type">int</span>)g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt;= <span class="hljs-number">0</span>; n--)<br>&#123;<br>NewUserJoin userJoin;<br><span class="hljs-comment">//å‘é€ç»™ç°æœ‰çš„æ¯ä¸ªå®¢æˆ·ç«¯</span><br><span class="hljs-built_in">send</span>(g_clients[n], (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;userJoin, <span class="hljs-built_in">sizeof</span>(NewUserJoin), <span class="hljs-number">0</span>);<br>&#125;<br>g_clients.<span class="hljs-built_in">push_back</span>(_cSocket);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ–°å®¢æˆ·ç«¯åŠ å…¥: socket = %d IP = %s \n&quot;</span>, _cSocket, <span class="hljs-built_in">inet_ntoa</span>(clientAddr.sin_addr));<span class="hljs-comment">//inet_ntoaè½¬æ¢ä¸ºå¯è¯»åœ°å€</span><br>&#125;<br><br>&#125;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> n = <span class="hljs-number">0</span>; n &lt; fdRead.fd_count; n++)<br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">processor</span>(fdRead.fd_array[n]) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-keyword">auto</span> iter = <span class="hljs-built_in">find</span>(g_clients.<span class="hljs-built_in">begin</span>(), g_clients.<span class="hljs-built_in">end</span>(), fdRead.fd_array[n]);<br><span class="hljs-keyword">if</span> (iter != g_clients.<span class="hljs-built_in">end</span>())<br>&#123;<br>g_clients.<span class="hljs-built_in">erase</span>(iter);<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">//printf(&quot;ç©ºé—²æ—¶é—´å¤„ç†å…¶ä»–ä¸šåŠ¡\n&quot;);</span><br>&#125;<br><span class="hljs-comment">//ä»¥é˜²ä¸‡ä¸€é€€å‡ºç¨‹åºæ—¶ å°†æ‰€æœ‰å¥—æ¥å­—è¿›è¡Œæ¸…ç†</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> n = g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt; <span class="hljs-number">0</span>; n --)<br>&#123;<br><span class="hljs-built_in">closesocket</span>(g_clients[n]);<br>&#125;<br><span class="hljs-comment">//5ã€send å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ•°æ®</span><br><span class="hljs-comment">/*send(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(len) const char FAR * buf,</span><br><span class="hljs-comment">_In_ int len,</span><br><span class="hljs-comment">_In_ int flags</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//char msgBuf[] = &quot;Hello, I&#x27;m Server.&quot;;</span><br><span class="hljs-comment">//+1è¡¨ç¤ºå°†ç»“å°¾ç¬¦ä¸€å¹¶å‘é€è¿‡å»</span><br><span class="hljs-comment">//send(_cSocket, msgBuf, strlen(msgBuf) + 1, 0);</span><br><br><span class="hljs-comment">//6ã€å…³é—­å¥—æ¥å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡ºï¼Œä»»åŠ¡ç»“æŸ\n&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="Clientç«¯">Clientç«¯</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">Time ï¼š2022-9-29</span><br><span class="hljs-comment">Author: è¿æ€é‘«</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGIN_RESULT,<br>CMD_LOGINOUT,<br>CMD_LOGINOUT_RESULT,<br>CMD_NEW_USER_JOIN,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦ </span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-comment">//DataHeader header;</span><br><span class="hljs-built_in">Login</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(Login);<br>cmd = CMD_LOGIN;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginResult);<br>cmd = CMD_LOGIN_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOut</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOut);<br>cmd = CMD_LOGINOUT;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOutResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOutResult);<br>cmd = CMD_LOGINOUT_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-comment">//æ–°å®¢æˆ·ç«¯åŠ å…¥</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">NewUserJoin</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">NewUserJoin</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(NewUserJoin);<br>cmd = CMD_NEW_USER_JOIN;<br>sock = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> sock;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">processor</span><span class="hljs-params">(SOCKET _cSocket)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ä½¿ç”¨ç¼“å†²åŒºæ¥æ¥å—æ•°æ®</span><br><span class="hljs-type">char</span> szRecv[<span class="hljs-number">1024</span>] = &#123;&#125;;<br><span class="hljs-comment">//5 æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</span><br><span class="hljs-type">int</span> nLen = <span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;szRecv, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ‹†åŒ… å’Œ åˆ†åŒ…</span><br><span class="hljs-comment">/*æ‹†åŒ…å’Œåˆ†åŒ…çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨åœ¨æœåŠ¡ç«¯æ¥å—æ•°æ®æ—¶ä¸€æ¬¡æ¥å—æ•°æ®è¿‡é•¿ å’Œ è¿‡çŸ­çš„æƒ…å†µ*/</span><br>DataHeader* header = (DataHeader*)szRecv;<br><span class="hljs-keyword">if</span> (nLen &lt;= <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥, ä»»åŠ¡ç»“æŸã€‚\n&quot;</span>, _cSocket);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-comment">//printf(&quot;æ”¶åˆ°å‘½ä»¤: %d æ•°æ®é•¿åº¦ï¼š%d\n&quot;, header.cmd, header.dataLength);</span><br><span class="hljs-comment">/*åˆ¤æ–­æ‰€æ”¶åˆ°çš„æ•°æ®*/</span> <span class="hljs-comment">//å¤šå®¢æˆ·ç«¯è¿›è¡Œæ”¶å‘æ•°æ®çš„æƒ…å†µä¸‹ä½¿ç”¨</span><br> <span class="hljs-comment">//if (nLen &gt; sizeof(DataHeader))</span><br> <span class="hljs-comment">//&#123;</span><br> <span class="hljs-comment">//&#125;</span><br><span class="hljs-keyword">switch</span> (header-&gt;cmd)<br>&#123;<br><span class="hljs-keyword">case</span> CMD_LOGIN_RESULT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginResult* login = (LoginResult*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯:CMD_LOGIN_RESULT æ•°æ®é•¿åº¦ï¼š%d \n&quot;</span>, login-&gt;dataLength);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_LOGINOUT_RESULT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginOutResult* loginout = (LoginOutResult*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯:CMD_LOGINOUT_RESULT æ•°æ®é•¿åº¦ï¼š%d \n&quot;</span>, loginout-&gt;dataLength);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_NEW_USER_JOIN:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>NewUserJoin* userJoin = (NewUserJoin*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯:CMD_NEW_USER_JOIN æ•°æ®é•¿åº¦ï¼š%d \n&quot;</span>, userJoin-&gt;dataLength);<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-type">bool</span> g_bRun = <span class="hljs-literal">true</span>;<br><span class="hljs-comment">//å°†è¾“å…¥å‘½ä»¤åˆ†ç¦»å‡ºæ¥</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">cmdThread</span><span class="hljs-params">(SOCKET sock)</span> </span>&#123;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-type">char</span> cmdBuf[<span class="hljs-number">256</span>] = &#123;&#125;;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, cmdBuf);<br><span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;exit&quot;</span>))<br>&#123;<br>g_bRun = <span class="hljs-literal">false</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é€€å‡ºcmdThreadçº¿ç¨‹\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;login&quot;</span>))<br>&#123;<br>Login login;<br><span class="hljs-built_in">strcpy</span>(login.userName, <span class="hljs-string">&quot;zjj&quot;</span>);<br><span class="hljs-built_in">strcpy</span>(login.PassWord, <span class="hljs-string">&quot;969513&quot;</span>);<br><span class="hljs-built_in">send</span>(sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;login, <span class="hljs-built_in">sizeof</span>(login), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;logout&quot;</span>))<br>&#123;<br>LoginOut logout;<br><span class="hljs-built_in">strcpy</span>(logout.userName, <span class="hljs-string">&quot;zjj&quot;</span>);<br><span class="hljs-built_in">send</span>(sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;logout, <span class="hljs-built_in">sizeof</span>(logout), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸æ”¯æŒçš„å‘½ä»¤\n&quot;</span>);<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPå®¢æˆ·ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket</span><br>SOCKET _sock = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _sock)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œå»ºç«‹Socketå¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å»ºç«‹socketæˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//2ã€é“¾æ¥æœåŠ¡å™¨ connect</span><br>sockaddr_in _sin = &#123;&#125;;<span class="hljs-comment">//å°†ç»“æ„ä½“åˆå§‹åŒ–</span><br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//å°†ç½‘ç»œè½¬æ¢ä¸ºæˆæ— ç¬¦å·ç±»å‹</span><br>_sin.sin_addr.S_un.S_addr = <span class="hljs-built_in">inet_addr</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">connect</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(sockaddr_in)); <span class="hljs-comment">//ä½¿ç”¨sizeof(sockaddr_in)ç±»å‹æ›´å®‰å…¨</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == ret)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œé“¾æ¥æœåŠ¡å™¨å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾æ¥æœåŠ¡å™¨æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//å¯åŠ¨çº¿ç¨‹</span><br><span class="hljs-function">thread <span class="hljs-title">t1</span><span class="hljs-params">(cmdThread, _sock)</span></span>;<br>t<span class="hljs-number">1.</span><span class="hljs-built_in">detach</span>();<span class="hljs-comment">//å°†å…¶ä¸ä¸»çº¿ç¨‹è¿›è¡Œåˆ†ç¦»</span><br><br><span class="hljs-keyword">while</span> (g_bRun)<br>&#123;<br>fd_set fdReads;<br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdReads);<br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdReads);<br>timeval t = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">0</span> &#125;;<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">select</span>(_sock, &amp;fdReads, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, &amp;t);<br><span class="hljs-keyword">if</span> (ret &lt; <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;selectä»»åŠ¡ç»“æŸï¼ï¼ï¼\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(_sock, &amp;fdReads))<br>&#123;<br><span class="hljs-built_in">FD_CLR</span>(_sock, &amp;fdReads);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">processor</span>(_sock) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;selectä»»åŠ¡ç»“æŸ2\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-comment">//çº¿ç¨‹thread å¦‚æœåœ¨ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­åŠ å…¥scanfé‚£ä¹ˆç¨‹åºå°†ä¼šé˜»å¡</span><br><span class="hljs-comment">//printf(&quot;ç©ºé—²æ—¶é—´å¤„ç†å…¶ä»–ä¸šåŠ¡\n&quot;);</span><br><span class="hljs-comment">//Sleep(1000);</span><br>&#125;<br><br><span class="hljs-comment">//7 å…³é—­å¥—èŠ‚å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡º.\n&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»é›¶å¼€å§‹å†™ä¸€ä¸ªèŠå¤©å®¤ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œç¼–ç¨‹ </tag>
            
            <tag> C++é¡¹ç›® </tag>
            
            <tag> socketæœåŠ¡å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤05ï¼šå®¢æˆ·ç«¯å‡çº§ä¸ºselectæ¨¡å‹</title>
      <link href="/2022/09/08/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A405%EF%BC%9A%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8D%87%E7%BA%A7%E4%B8%BAselect%E6%A8%A1%E5%9E%8B/"/>
      <url>/2022/09/08/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A405%EF%BC%9A%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8D%87%E7%BA%A7%E4%B8%BAselect%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="ã€c-é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤05ï¼šå®¢æˆ·ç«¯å‡çº§ä¸ºselectæ¨¡å‹">ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤05ï¼šå®¢æˆ·ç«¯å‡çº§ä¸ºselectæ¨¡å‹</h2><p>è¯¦ç»†çš„è¿‡ç¨‹ä»¥åŠè®²è§£æˆ‘éƒ½ä»¥æ³¨é‡Šçš„å½¢å¼å†™åœ¨ä»£ç é‡Œï¼Œè¿™é‡Œå°±ä¸å•°å—¦äº†ã€‚</p><h3 id="serverç«¯">serverç«¯</h3><p>server.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">author: è¿æ€é‘«</span><br><span class="hljs-comment">2022-09-08</span><br><span class="hljs-comment">å®¢æˆ·ç«¯å‡çº§ä¸ºselectæ¨¡å‹</span><br><span class="hljs-comment">    </span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdio.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">/*ä½¿ç”¨æŠ¥æ–‡çš„æ–¹å¼è¿›è¡Œä¼ è¾“*/</span><br><span class="hljs-comment">//æ•°æ®å¤´</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGIN_RESULT,<br>CMD_LOGINOUT,<br>CMD_LOGINOUT_RESULT,<br>CMD_NEW_USER_JOIN,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦ </span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-comment">//DataHeader header;</span><br><span class="hljs-built_in">Login</span>() <br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(Login);<br>cmd = CMD_LOGIN;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginResult);<br>cmd = CMD_LOGIN_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOut</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOut);<br>cmd = CMD_LOGINOUT;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOutResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOutResult);<br>cmd = CMD_LOGINOUT_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-comment">//æ–°å®¢æˆ·ç«¯åŠ å…¥</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">NewUserJoin</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">NewUserJoin</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(NewUserJoin);<br>cmd = CMD_NEW_USER_JOIN;<br>sock = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> sock;<br>&#125;;<br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå…¨å±€çš„å®¹å™¨</span><br>vector&lt;SOCKET&gt; g_clients;<br><br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå‡½æ•°è¿›è¡Œå¤„ç†</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">processor</span><span class="hljs-params">(SOCKET _cSocket)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ä½¿ç”¨ç¼“å†²åŒºæ¥æ¥å—æ•°æ®</span><br><span class="hljs-type">char</span> szRecv[<span class="hljs-number">1024</span>] = &#123;&#125;;<br><span class="hljs-comment">//5 æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</span><br><span class="hljs-type">int</span> nLen = <span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;szRecv, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ‹†åŒ… å’Œ åˆ†åŒ…</span><br><span class="hljs-comment">/*æ‹†åŒ…å’Œåˆ†åŒ…çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨åœ¨æœåŠ¡ç«¯æ¥å—æ•°æ®æ—¶ä¸€æ¬¡æ¥å—æ•°æ®è¿‡é•¿ å’Œ è¿‡çŸ­çš„æƒ…å†µ*/</span><br>DataHeader* header = (DataHeader*)szRecv;<br><span class="hljs-keyword">if</span> (nLen &lt;= <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å®¢æˆ·ç«¯&lt;Socket = %d&gt;å·²ç»é€€å‡º, ä»»åŠ¡ç»“æŸã€‚\n&quot;</span>, _cSocket);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-comment">//printf(&quot;æ”¶åˆ°å‘½ä»¤: %d æ•°æ®é•¿åº¦ï¼š%d\n&quot;, header.cmd, header.dataLength);</span><br><span class="hljs-comment">/*åˆ¤æ–­æ‰€æ”¶åˆ°çš„æ•°æ®*/</span> <span class="hljs-comment">//å¤šå®¢æˆ·ç«¯è¿›è¡Œæ”¶å‘æ•°æ®çš„æƒ…å†µä¸‹ä½¿ç”¨</span><br><span class="hljs-comment">//if (nLen &gt; sizeof(DataHeader))</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-keyword">switch</span> (header-&gt;cmd)<br>&#123;<br><span class="hljs-keyword">case</span> CMD_LOGIN:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>Login* login = (Login*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å®¢æˆ·ç«¯&lt;Socket = %d&gt;è¯·æ±‚:CMD_LOGIN æ•°æ®é•¿åº¦ï¼š%d userName = %s passWord = %s\n&quot;</span>,_cSocket, login-&gt;dataLength, login-&gt;userName, login-&gt;PassWord);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginResult ret;<br><span class="hljs-comment">//send(_cSocket, (char*)&amp;header, sizeof(DataHeader), 0);</span><br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_LOGINOUT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginOut *loginout = (LoginOut*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å‘½ä»¤:CMD_LOGINOUT æ•°æ®é•¿åº¦ï¼š%d userName = %s\n&quot;</span>, loginout-&gt;dataLength, loginout-&gt;userName);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginOutResult ret;<br><span class="hljs-comment">//send(_cSocket, (char*)&amp;header, sizeof(DataHeader), 0);</span><br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginOutResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>&#123;<br>DataHeader header = &#123; <span class="hljs-number">0</span>, CMD_ERROR &#125;;<br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;header, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//--ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPæœåŠ¡ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket  å¥—æ¥å­— ï¼ˆwindowsï¼‰ linuxä¸ŠæŒ‡çš„æ˜¯æŒ‡é’ˆ</span><br><span class="hljs-comment">/*socket(</span><br><span class="hljs-comment">_In_ int af,(è¡¨ç¤ºä»€ä¹ˆç±»å‹çš„å¥—æ¥å­—)</span><br><span class="hljs-comment">_In_ int type,(æ•°æ®æµ)</span><br><span class="hljs-comment">_In_ int protocol</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//IPV4çš„ç½‘ç»œå¥—æ¥å­— AF_INET</span><br><span class="hljs-comment">//IPV6çš„ç½‘ç»œå¥—æ¥å­— AF_INET6</span><br>SOCKET _sock =  <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, IPPROTO_TCP);<br><span class="hljs-type">char</span> msgBuf[] = <span class="hljs-string">&quot;Hello, I&#x27;m Server.\n&quot;</span>;<br><span class="hljs-comment">//2ã€bind ç»‘å®šç”¨äºæ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥çš„ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">bind(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(namelen) const struct sockaddr FAR * name,</span><br><span class="hljs-comment">_In_ int namelen</span><br><span class="hljs-comment">);</span><br><span class="hljs-comment">*/</span><br>sockaddr_in _sin = &#123;&#125;;<br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//ç«¯å£å· ç”±äºä¸»æœºå’Œç½‘ç»œçš„æ•°æ®ç±»å‹ä¸åŒ å› æ­¤éœ€è¦è¿›è¡Œè½¬æ¢ ä½¿ç”¨ host to net unsigned short</span><br>_sin.sin_addr.S_un.S_addr = INADDR_ANY;<span class="hljs-comment">//inet_addr(&quot;127.0.0.1&quot;);//æœåŠ¡å™¨çš„ipåœ°å€ INADDR_ANYæœ¬æœºæ‰€æœ‰çš„Ipåœ°å€éƒ½å¯ä»¥è®¿é—® ä¸€èˆ¬è¿™æ ·</span><br><span class="hljs-comment">//æœ‰å¯èƒ½ç»‘å®šå¤±è´¥</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">bind</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(_sin))) <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç»‘å®šç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç»‘å®šç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//3ã€listen ç›‘å¬ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">listen(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_ int backlog</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">listen</span>(_sock, <span class="hljs-number">5</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç›‘å¬ç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›‘å¬ç½‘ç»œç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">// ä¼¯å…‹åˆ© BSD socket windowsä¸Šç¬¬ä¸€ä¸ªå‚æ•°æ— æ„ä¹‰</span><br><span class="hljs-comment">//linux è¡¨ç¤ºæè¿°ç¬¦åŠ 1</span><br><span class="hljs-comment">/*å¤„ç†å¤šå®¢æˆ·ç«¯ç±»å‹</span><br><span class="hljs-comment">select(</span><br><span class="hljs-comment">_In_ int nfds,</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * readfds,//å¯è¯»</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * writefds,//å¯å†™</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * exceptfds,//å¼‚å¸¸</span><br><span class="hljs-comment">_In_opt_ const struct timeval FAR * timeout//æŸ¥è¯¢å»¶è¿Ÿ</span><br><span class="hljs-comment">);*/</span><br>fd_set fdRead;<span class="hljs-comment">//æè¿°ç¬¦(socket)é›†åˆ</span><br>fd_set fdWrite;<br>fd_set fdExp;<br><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdRead);<span class="hljs-comment">//æ¸…ç©ºfd_seté›†åˆç±»å‹çš„æ•°æ® å…¶å®å°±æ˜¯å°†fd_count ç½®ä¸º0</span><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdWrite);<span class="hljs-comment">//æ¸…ç†é›†åˆ</span><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdExp);<br><span class="hljs-comment">//typedef struct fd_set &#123;</span><br><span class="hljs-comment">//u_int fd_count; æ•°é‡              /* how many are SET? */</span><br><span class="hljs-comment">//SOCKET  fd_array[FD_SETSIZE(64)];   /* an array of SOCKETs */</span><br><span class="hljs-comment">//&#125; fd_set;</span><br><br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdRead);<span class="hljs-comment">//å°†æè¿°ç¬¦åŠ å…¥é›†åˆä¸­</span><br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdWrite);<br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdExp);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n = (<span class="hljs-type">int</span>)g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt;= <span class="hljs-number">0</span>; n --)<br>&#123;<br><span class="hljs-built_in">FD_SET</span>(g_clients[n], &amp;fdRead);<span class="hljs-comment">//æ”¾å…¥å¯è¯»æ•°æ®ä¸­æŸ¥è¯¢ æ˜¯å¦æœ‰å¯è¯»æ•°æ®</span><br>&#125;<br><span class="hljs-comment">//nfdsæ˜¯ä¸€ä¸ªæ•´æ•°å€¼ æ˜¯æŒ‡fd_seté›†åˆä¸­æ‰€æœ‰æè¿°ç¬¦(socket)çš„èŒƒå›´ è€Œä¸æ˜¯æ•°é‡ </span><br><span class="hljs-comment">//æ—¢æ˜¯æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦æœ€å¤§å€¼+1 åœ¨windowsä¸­è¿™ä¸ªå‚æ•°å¯ä»¥å†™0</span><br><span class="hljs-comment">//æœ€åä¸€ä¸ªå‚æ•°å†™æˆNULLè¡¨ç¤ºä¸€ç›´é˜»å¡åœ¨æ­¤ç­‰å¾…</span><br>timeval t = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;;<span class="hljs-comment">//æ—¶é—´å˜é‡ &amp;t æœ€å¤§ä¸º1ç§’</span><br><span class="hljs-comment">//struct timeval &#123;</span><br><span class="hljs-comment">//long    tv_sec;         /* seconds */</span><br><span class="hljs-comment">//long    tv_usec;        /* and microseconds */&#125;;</span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">select</span>(_sock + <span class="hljs-number">1</span>, &amp;fdRead, &amp;fdWrite, &amp;fdExp, &amp;t);<br><span class="hljs-comment">/*ä»¥ä¸Šæ–¹å¼ä¸ºé˜»å¡æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è¿›å…¥å°†é˜»å¡åœ¨æ­¤å¤„*/</span><br><span class="hljs-keyword">if</span> (ret &lt; <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;selectä»»åŠ¡ç»“æŸã€‚\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<span class="hljs-comment">//è¡¨ç¤ºå‡ºé”™ è·³å‡ºå¾ªç¯</span><br>&#125;<br><span class="hljs-comment">//å¦‚æœè¿™ä¸ªsocketå¯è¯»çš„è¯è¡¨ç¤º æœ‰å®¢æˆ·ç«¯å·²ç»è¿æ¥è¿›æ¥äº†</span><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(_sock, &amp;fdRead))<span class="hljs-comment">//åˆ¤æ–­æè¿°ç¬¦æ˜¯å¦åœ¨é›†åˆä¸­</span><br>&#123;<br><span class="hljs-comment">//æ¸…ç†</span><br><span class="hljs-built_in">FD_CLR</span>(_sock, &amp;fdRead);<br><span class="hljs-comment">//4ã€accept ç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">accept(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_Out_writes_bytes_opt_(*addrlen) struct sockaddr FAR * addr,</span><br><span class="hljs-comment">_Inout_opt_ int FAR * addrlen</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//accept ç­‰å¾…æ¥å—å®¢æˆ·ç«¯è¿æ¥</span><br>sockaddr_in clientAddr = &#123;&#125;;<br><span class="hljs-type">int</span> nAddrLen = <span class="hljs-built_in">sizeof</span>(sockaddr_in);<br>SOCKET _cSocket = INVALID_SOCKET;<br>_cSocket = <span class="hljs-built_in">accept</span>(_sock, (sockaddr*)&amp;clientAddr, &amp;nAddrLen);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _cSocket)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œæ¥æ”¶åˆ°æ— æ•ˆå®¢æˆ·ç«¯SOCKET...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-comment">//æœ‰æ–°å®¢æˆ·ç«¯åŠ å…¥ç¾¤å‘ç»™æ‰€æœ‰ç”¨æˆ· ç±»ä¼¼åƒèŠå¤©å®¤ æˆ–è€…ç‹¼äººæ€ç±»å‹</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n = (<span class="hljs-type">int</span>)g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt;= <span class="hljs-number">0</span>; n--)<br>&#123;<br>NewUserJoin userJoin;<br><span class="hljs-comment">//å‘é€ç»™ç°æœ‰çš„æ¯ä¸ªå®¢æˆ·ç«¯</span><br><span class="hljs-built_in">send</span>(g_clients[n], (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;userJoin, <span class="hljs-built_in">sizeof</span>(NewUserJoin), <span class="hljs-number">0</span>);<br>&#125;<br>g_clients.<span class="hljs-built_in">push_back</span>(_cSocket);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ–°å®¢æˆ·ç«¯åŠ å…¥: socket = %d IP = %s \n&quot;</span>, _cSocket, <span class="hljs-built_in">inet_ntoa</span>(clientAddr.sin_addr));<span class="hljs-comment">//inet_ntoaè½¬æ¢ä¸ºå¯è¯»åœ°å€</span><br>&#125;<br><br>&#125;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> n = <span class="hljs-number">0</span>; n &lt; fdRead.fd_count; n++)<br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">processor</span>(fdRead.fd_array[n]) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-keyword">auto</span> iter = <span class="hljs-built_in">find</span>(g_clients.<span class="hljs-built_in">begin</span>(), g_clients.<span class="hljs-built_in">end</span>(), fdRead.fd_array[n]);<br><span class="hljs-keyword">if</span> (iter != g_clients.<span class="hljs-built_in">end</span>())<br>&#123;<br>g_clients.<span class="hljs-built_in">erase</span>(iter);<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç©ºé—²æ—¶é—´å¤„ç†å…¶ä»–ä¸šåŠ¡\n&quot;</span>);<br>&#125;<br><span class="hljs-comment">//ä»¥é˜²ä¸‡ä¸€é€€å‡ºç¨‹åºæ—¶ å°†æ‰€æœ‰å¥—æ¥å­—è¿›è¡Œæ¸…ç†</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> n = g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt; <span class="hljs-number">0</span>; n --)<br>&#123;<br><span class="hljs-built_in">closesocket</span>(g_clients[n]);<br>&#125;<br><span class="hljs-comment">//5ã€send å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ•°æ®</span><br><span class="hljs-comment">/*send(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(len) const char FAR * buf,</span><br><span class="hljs-comment">_In_ int len,</span><br><span class="hljs-comment">_In_ int flags</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//char msgBuf[] = &quot;Hello, I&#x27;m Server.&quot;;</span><br><span class="hljs-comment">//+1è¡¨ç¤ºå°†ç»“å°¾ç¬¦ä¸€å¹¶å‘é€è¿‡å»</span><br><span class="hljs-comment">//send(_cSocket, msgBuf, strlen(msgBuf) + 1, 0);</span><br><br><span class="hljs-comment">//6ã€å…³é—­å¥—æ¥å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡ºï¼Œä»»åŠ¡ç»“æŸ\n&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="clientç«¯">clientç«¯</h3><p>client.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">author: è¿æ€é‘«</span><br><span class="hljs-comment">2022-09-08</span><br><span class="hljs-comment">å®¢æˆ·ç«¯å‡çº§ä¸ºselectæ¨¡å‹</span><br><span class="hljs-comment">    </span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGIN_RESULT,<br>CMD_LOGINOUT,<br>CMD_LOGINOUT_RESULT,<br>CMD_NEW_USER_JOIN,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦ </span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-comment">//DataHeader header;</span><br><span class="hljs-built_in">Login</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(Login);<br>cmd = CMD_LOGIN;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginResult);<br>cmd = CMD_LOGIN_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOut</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOut);<br>cmd = CMD_LOGINOUT;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOutResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOutResult);<br>cmd = CMD_LOGINOUT_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-comment">//æ–°å®¢æˆ·ç«¯åŠ å…¥</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">NewUserJoin</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">NewUserJoin</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(NewUserJoin);<br>cmd = CMD_NEW_USER_JOIN;<br>sock = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> sock;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">processor</span><span class="hljs-params">(SOCKET _cSocket)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ä½¿ç”¨ç¼“å†²åŒºæ¥æ¥å—æ•°æ®</span><br><span class="hljs-type">char</span> szRecv[<span class="hljs-number">1024</span>] = &#123;&#125;;<br><span class="hljs-comment">//5 æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</span><br><span class="hljs-type">int</span> nLen = <span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;szRecv, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ‹†åŒ… å’Œ åˆ†åŒ…</span><br><span class="hljs-comment">/*æ‹†åŒ…å’Œåˆ†åŒ…çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨åœ¨æœåŠ¡ç«¯æ¥å—æ•°æ®æ—¶ä¸€æ¬¡æ¥å—æ•°æ®è¿‡é•¿ å’Œ è¿‡çŸ­çš„æƒ…å†µ*/</span><br>DataHeader* header = (DataHeader*)szRecv;<br><span class="hljs-keyword">if</span> (nLen &lt;= <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥, ä»»åŠ¡ç»“æŸã€‚\n&quot;</span>, _cSocket);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-comment">//printf(&quot;æ”¶åˆ°å‘½ä»¤: %d æ•°æ®é•¿åº¦ï¼š%d\n&quot;, header.cmd, header.dataLength);</span><br><span class="hljs-comment">/*åˆ¤æ–­æ‰€æ”¶åˆ°çš„æ•°æ®*/</span> <span class="hljs-comment">//å¤šå®¢æˆ·ç«¯è¿›è¡Œæ”¶å‘æ•°æ®çš„æƒ…å†µä¸‹ä½¿ç”¨</span><br> <span class="hljs-comment">//if (nLen &gt; sizeof(DataHeader))</span><br> <span class="hljs-comment">//&#123;</span><br> <span class="hljs-comment">//&#125;</span><br><span class="hljs-keyword">switch</span> (header-&gt;cmd)<br>&#123;<br><span class="hljs-keyword">case</span> CMD_LOGIN_RESULT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginResult* login = (LoginResult*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯:CMD_LOGIN_RESULT æ•°æ®é•¿åº¦ï¼š%d \n&quot;</span>, _cSocket, login-&gt;dataLength);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_LOGINOUT_RESULT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginOutResult* loginout = (LoginOutResult*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯:CMD_LOGINOUT_RESULT æ•°æ®é•¿åº¦ï¼š%d \n&quot;</span>, _cSocket, loginout-&gt;dataLength);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_NEW_USER_JOIN:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>NewUserJoin* userJoin = (NewUserJoin*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯:CMD_NEW_USER_JOIN æ•°æ®é•¿åº¦ï¼š%d \n&quot;</span>, _cSocket, userJoin-&gt;dataLength);<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPå®¢æˆ·ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket</span><br>SOCKET _sock = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _sock)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œå»ºç«‹Socketå¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å»ºç«‹socketæˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//2ã€é“¾æ¥æœåŠ¡å™¨ connect</span><br>sockaddr_in _sin = &#123;&#125;;<span class="hljs-comment">//å°†ç»“æ„ä½“åˆå§‹åŒ–</span><br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//å°†ç½‘ç»œè½¬æ¢ä¸ºæˆæ— ç¬¦å·ç±»å‹</span><br>_sin.sin_addr.S_un.S_addr = <span class="hljs-built_in">inet_addr</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">connect</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(sockaddr_in)); <span class="hljs-comment">//ä½¿ç”¨sizeof(sockaddr_in)ç±»å‹æ›´å®‰å…¨</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == ret)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œé“¾æ¥æœåŠ¡å™¨å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾æ¥æœåŠ¡å™¨æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br>fd_set fdReads;<br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdReads);<br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdReads);<br>timeval t = &#123; <span class="hljs-number">0</span>, <span class="hljs-number">0</span> &#125;;<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">select</span>(_sock, &amp;fdReads, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, &amp;t);<br><span class="hljs-keyword">if</span> (ret &lt; <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;selectä»»åŠ¡ç»“æŸï¼ï¼ï¼\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(_sock, &amp;fdReads))<br>&#123;<br><span class="hljs-built_in">FD_CLR</span>(_sock, &amp;fdReads);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">processor</span>(_sock) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;selectä»»åŠ¡ç»“æŸ2\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç©ºé—²æ—¶é—´å¤„ç†å…¶ä»–ä¸šåŠ¡\n&quot;</span>);<br>Login login;<br><span class="hljs-built_in">strcpy</span>(login.userName, <span class="hljs-string">&quot;zjj&quot;</span>);<br><span class="hljs-built_in">strcpy</span>(login.PassWord, <span class="hljs-string">&quot;456451&quot;</span>);<br><span class="hljs-built_in">send</span>(_sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;login, <span class="hljs-built_in">sizeof</span>(login), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">Sleep</span>(<span class="hljs-number">1000</span>);<br>&#125;<br><br><span class="hljs-comment">//7 å…³é—­å¥—èŠ‚å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡º.\n&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æˆæœå±•ç¤º">æˆæœå±•ç¤º</h3><p><img src="/images/2022-9-8-001.png" alt="upload successful"></p><p>server.exeä½“éªŒï¼š<a href="/download/q0009.exe">ç‚¹æˆ‘ä¸‹è½½</a></p><p>client.exeä½“éªŒï¼š<a href="/download/q0010.exe">ç‚¹æˆ‘ä¸‹è½½</a></p>]]></content>
      
      
      <categories>
          
          <category> ä»é›¶å¼€å§‹å†™ä¸€ä¸ªèŠå¤©å®¤ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++é¡¹ç›® </tag>
            
            <tag> socketç¼–ç¨‹ </tag>
            
            <tag> æœåŠ¡å™¨é¡¹ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤04ï¼šåŠ å…¥selectæ¨¡å‹å¤„ç†å¤šå®¢æˆ·ç«¯</title>
      <link href="/2022/07/04/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A404%EF%BC%9A%E5%8A%A0%E5%85%A5select%E6%A8%A1%E5%9E%8B%E5%A4%84%E7%90%86%E5%A4%9A%E5%AE%A2%E6%88%B7%E7%AB%AF/"/>
      <url>/2022/07/04/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A404%EF%BC%9A%E5%8A%A0%E5%85%A5select%E6%A8%A1%E5%9E%8B%E5%A4%84%E7%90%86%E5%A4%9A%E5%AE%A2%E6%88%B7%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="ã€c-é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤04ï¼šåŠ å…¥selectæ¨¡å‹å¤„ç†å¤šå®¢æˆ·ç«¯">ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤04ï¼šåŠ å…¥selectæ¨¡å‹å¤„ç†å¤šå®¢æˆ·ç«¯</h2><p>è¯¦ç»†çš„è¿‡ç¨‹ä»¥åŠè®²è§£æˆ‘éƒ½ä»¥æ³¨é‡Šçš„å½¢å¼å†™åœ¨ä»£ç é‡Œï¼Œè¿™é‡Œå°±ä¸å•°å—¦äº†ã€‚</p><h3 id="serverç«¯">serverç«¯</h3><p>server.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">author: è¿æ€é‘«</span><br><span class="hljs-comment">2022-07-04</span><br><span class="hljs-comment">åŠ å…¥selectæ¨¡å‹å¤„ç†å¤šå®¢æˆ·ç«¯</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdio.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">/*ä½¿ç”¨æŠ¥æ–‡çš„æ–¹å¼è¿›è¡Œä¼ è¾“*/</span><br><span class="hljs-comment">//æ•°æ®å¤´</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGIN_RESULT,<br>CMD_LOGINOUT,<br>CMD_LOGINOUT_RESULT,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦ </span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-comment">//DataHeader header;</span><br><span class="hljs-built_in">Login</span>() <br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(Login);<br>cmd = CMD_LOGIN;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginResult);<br>cmd = CMD_LOGIN_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOut</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOut);<br>cmd = CMD_LOGINOUT;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOutResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOutResult);<br>cmd = CMD_LOGINOUT_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå…¨å±€çš„å®¹å™¨</span><br>vector&lt;SOCKET&gt; g_clients;<br><br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå‡½æ•°è¿›è¡Œå¤„ç†</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">processor</span><span class="hljs-params">(SOCKET _cSocket)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ä½¿ç”¨ç¼“å†²åŒºæ¥æ¥å—æ•°æ®</span><br><span class="hljs-type">char</span> szRecv[<span class="hljs-number">1024</span>] = &#123;&#125;;<br><span class="hljs-comment">//5 æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</span><br><span class="hljs-type">int</span> nLen = <span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;szRecv, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ‹†åŒ… å’Œ åˆ†åŒ…</span><br><span class="hljs-comment">/*æ‹†åŒ…å’Œåˆ†åŒ…çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨åœ¨æœåŠ¡ç«¯æ¥å—æ•°æ®æ—¶ä¸€æ¬¡æ¥å—æ•°æ®è¿‡é•¿ å’Œ è¿‡çŸ­çš„æƒ…å†µ*/</span><br>DataHeader* header = (DataHeader*)szRecv;<br><span class="hljs-keyword">if</span> (nLen &lt;= <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å®¢æˆ·ç«¯å·²ç»é€€å‡º, ä»»åŠ¡ç»“æŸã€‚\n&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-comment">//printf(&quot;æ”¶åˆ°å‘½ä»¤: %d æ•°æ®é•¿åº¦ï¼š%d\n&quot;, header.cmd, header.dataLength);</span><br><span class="hljs-comment">/*åˆ¤æ–­æ‰€æ”¶åˆ°çš„æ•°æ®*/</span> <span class="hljs-comment">//å¤šå®¢æˆ·ç«¯è¿›è¡Œæ”¶å‘æ•°æ®çš„æƒ…å†µä¸‹ä½¿ç”¨</span><br><span class="hljs-comment">//if (nLen &gt; sizeof(DataHeader))</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-keyword">switch</span> (header-&gt;cmd)<br>&#123;<br><span class="hljs-keyword">case</span> CMD_LOGIN:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>Login* login = (Login*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å‘½ä»¤:CMD_LOGIN æ•°æ®é•¿åº¦ï¼š%d userName = %s passWord = %s\n&quot;</span>, login-&gt;dataLength, login-&gt;userName, login-&gt;PassWord);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginResult ret;<br><span class="hljs-comment">//send(_cSocket, (char*)&amp;header, sizeof(DataHeader), 0);</span><br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_LOGINOUT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginOut *loginout = (LoginOut*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å‘½ä»¤:CMD_LOGINOUT æ•°æ®é•¿åº¦ï¼š%d userName = %s\n&quot;</span>, loginout-&gt;dataLength, loginout-&gt;userName);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginOutResult ret;<br><span class="hljs-comment">//send(_cSocket, (char*)&amp;header, sizeof(DataHeader), 0);</span><br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginOutResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>&#123;<br>DataHeader header = &#123; <span class="hljs-number">0</span>, CMD_ERROR &#125;;<br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;header, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//--ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPæœåŠ¡ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket  å¥—æ¥å­— ï¼ˆwindowsï¼‰ linuxä¸ŠæŒ‡çš„æ˜¯æŒ‡é’ˆ</span><br><span class="hljs-comment">/*socket(</span><br><span class="hljs-comment">_In_ int af,(è¡¨ç¤ºä»€ä¹ˆç±»å‹çš„å¥—æ¥å­—)</span><br><span class="hljs-comment">_In_ int type,(æ•°æ®æµ)</span><br><span class="hljs-comment">_In_ int protocol</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//IPV4çš„ç½‘ç»œå¥—æ¥å­— AF_INET</span><br><span class="hljs-comment">//IPV6çš„ç½‘ç»œå¥—æ¥å­— AF_INET6</span><br>SOCKET _sock =  <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, IPPROTO_TCP);<br><span class="hljs-type">char</span> msgBuf[] = <span class="hljs-string">&quot;Hello, I&#x27;m Server.\n&quot;</span>;<br><span class="hljs-comment">//2ã€bind ç»‘å®šç”¨äºæ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥çš„ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">bind(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(namelen) const struct sockaddr FAR * name,</span><br><span class="hljs-comment">_In_ int namelen</span><br><span class="hljs-comment">);</span><br><span class="hljs-comment">*/</span><br>sockaddr_in _sin = &#123;&#125;;<br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//ç«¯å£å· ç”±äºä¸»æœºå’Œç½‘ç»œçš„æ•°æ®ç±»å‹ä¸åŒ å› æ­¤éœ€è¦è¿›è¡Œè½¬æ¢ ä½¿ç”¨ host to net unsigned short</span><br>_sin.sin_addr.S_un.S_addr = INADDR_ANY;<span class="hljs-comment">//inet_addr(&quot;127.0.0.1&quot;);//æœåŠ¡å™¨çš„ipåœ°å€ INADDR_ANYæœ¬æœºæ‰€æœ‰çš„Ipåœ°å€éƒ½å¯ä»¥è®¿é—® ä¸€èˆ¬è¿™æ ·</span><br><span class="hljs-comment">//æœ‰å¯èƒ½ç»‘å®šå¤±è´¥</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">bind</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(_sin))) <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç»‘å®šç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç»‘å®šç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//3ã€listen ç›‘å¬ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">listen(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_ int backlog</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">listen</span>(_sock, <span class="hljs-number">5</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç›‘å¬ç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›‘å¬ç½‘ç»œç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">// ä¼¯å…‹åˆ© socket windowsä¸Šç¬¬ä¸€ä¸ªå‚æ•°æ— æ„ä¹‰</span><br><span class="hljs-comment">//linux è¡¨ç¤ºæè¿°ç¬¦åŠ 1</span><br><span class="hljs-comment">/*å¤„ç†å¤šå®¢æˆ·ç«¯ç±»å‹</span><br><span class="hljs-comment">select(</span><br><span class="hljs-comment">_In_ int nfds,</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * readfds,//å¯è¯»</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * writefds,//å¯å†™</span><br><span class="hljs-comment">_Inout_opt_ fd_set FAR * exceptfds,//å¼‚å¸¸</span><br><span class="hljs-comment">_In_opt_ const struct timeval FAR * timeout//æŸ¥è¯¢å»¶è¿Ÿ</span><br><span class="hljs-comment">);*/</span><br>fd_set fdRead;<br>fd_set fdWrite;<br>fd_set fdExp;<br><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdRead);<span class="hljs-comment">//æ¸…ç©ºfd_seté›†åˆç±»å‹çš„æ•°æ® å…¶å®å°±æ˜¯å°†fd_count ç½®ä¸º0</span><br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdWrite);<br><span class="hljs-built_in">FD_ZERO</span>(&amp;fdExp);<br><span class="hljs-comment">//typedef struct fd_set &#123;</span><br><span class="hljs-comment">//u_int fd_count; æ•°é‡              /* how many are SET? */</span><br><span class="hljs-comment">//SOCKET  fd_array[FD_SETSIZE(64)];   /* an array of SOCKETs */</span><br><span class="hljs-comment">//&#125; fd_set;</span><br><br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdRead);<span class="hljs-comment">//å¯è¯»</span><br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdWrite);<br><span class="hljs-built_in">FD_SET</span>(_sock, &amp;fdExp);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n = (<span class="hljs-type">int</span>)g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt;= <span class="hljs-number">0</span>; n --)<br>&#123;<br><span class="hljs-built_in">FD_SET</span>(g_clients[n], &amp;fdRead);<span class="hljs-comment">//æ”¾å…¥å¯è¯»æ•°æ®ä¸­æŸ¥è¯¢ æ˜¯å¦æœ‰å¯è¯»æ•°æ®</span><br>&#125;<br><span class="hljs-comment">//nfdsæ˜¯ä¸€ä¸ªæ•´æ•°å€¼ æ˜¯æŒ‡fd_seté›†åˆä¸­æ‰€æœ‰æè¿°ç¬¦(socket)çš„èŒƒå›´ è€Œä¸æ˜¯æ•°é‡ </span><br><span class="hljs-comment">//æ—¢æ˜¯æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦æœ€å¤§å€¼+1 åœ¨windowsä¸­è¿™ä¸ªå‚æ•°å¯ä»¥å†™0</span><br><span class="hljs-comment">//æœ€åä¸€ä¸ªå‚æ•°å†™æˆNULLè¡¨ç¤ºä¸€ç›´é˜»å¡åœ¨æ­¤ç­‰å¾…</span><br>timeval t = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<span class="hljs-comment">//æ—¶é—´å˜é‡</span><br><span class="hljs-comment">//struct timeval &#123;</span><br><span class="hljs-comment">//long    tv_sec;         /* seconds */</span><br><span class="hljs-comment">//long    tv_usec;        /* and microseconds */&#125;;</span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">select</span>(_sock + <span class="hljs-number">1</span>, &amp;fdRead, &amp;fdWrite, &amp;fdExp, &amp;t);<br><span class="hljs-comment">/*ä»¥ä¸Šæ–¹å¼ä¸ºé˜»å¡æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è¿›å…¥å°†é˜»å¡åœ¨æ­¤å¤„*/</span><br><span class="hljs-keyword">if</span> (ret &lt; <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;selectä»»åŠ¡ç»“æŸã€‚\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<span class="hljs-comment">//è¡¨ç¤ºå‡ºé”™ è·³å‡ºå¾ªç¯</span><br>&#125;<br><span class="hljs-comment">//å¦‚æœè¿™ä¸ªsocketå¯è¯»çš„è¯è¡¨ç¤º æœ‰å®¢æˆ·ç«¯å·²ç»è¿æ¥è¿›æ¥äº†</span><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(_sock, &amp;fdRead))<br>&#123;<br><span class="hljs-comment">//æ¸…ç†</span><br><span class="hljs-built_in">FD_CLR</span>(_sock, &amp;fdRead);<br><span class="hljs-comment">//4ã€accept ç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">accept(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_Out_writes_bytes_opt_(*addrlen) struct sockaddr FAR * addr,</span><br><span class="hljs-comment">_Inout_opt_ int FAR * addrlen</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//accept ç­‰å¾…æ¥å—å®¢æˆ·ç«¯è¿æ¥</span><br>sockaddr_in clientAddr = &#123;&#125;;<br><span class="hljs-type">int</span> nAddrLen = <span class="hljs-built_in">sizeof</span>(sockaddr_in);<br>SOCKET _cSocket = INVALID_SOCKET;<br>_cSocket = <span class="hljs-built_in">accept</span>(_sock, (sockaddr*)&amp;clientAddr, &amp;nAddrLen);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _cSocket)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œæ¥æ”¶åˆ°æ— æ•ˆå®¢æˆ·ç«¯SOCKET...\n&quot;</span>);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ–°å®¢æˆ·ç«¯åŠ å…¥: socket = %d IP = %s \n&quot;</span>, _cSocket, <span class="hljs-built_in">inet_ntoa</span>(clientAddr.sin_addr));<span class="hljs-comment">//inet_ntoaè½¬æ¢ä¸ºå¯è¯»åœ°å€</span><br>g_clients.<span class="hljs-built_in">push_back</span>(_cSocket);<br>&#125;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> n = <span class="hljs-number">0</span>; n &lt; fdRead.fd_count; n++)<br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">processor</span>(fdRead.fd_array[n]) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-keyword">auto</span> iter = <span class="hljs-built_in">find</span>(g_clients.<span class="hljs-built_in">begin</span>(), g_clients.<span class="hljs-built_in">end</span>(), fdRead.fd_array[n]);<br><span class="hljs-keyword">if</span> (iter != g_clients.<span class="hljs-built_in">end</span>())<br>&#123;<br>g_clients.<span class="hljs-built_in">erase</span>(iter);<br>&#125;<br>&#125;<br>&#125;<br><br>&#125;<br><span class="hljs-comment">//ä»¥é˜²ä¸‡ä¸€é€€å‡ºç¨‹åºæ—¶ å°†æ‰€æœ‰å¥—æ¥å­—è¿›è¡Œæ¸…ç†</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> n = g_clients.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; n &gt; <span class="hljs-number">0</span>; n --)<br>&#123;<br><span class="hljs-built_in">closesocket</span>(g_clients[n]);<br>&#125;<br><span class="hljs-comment">//5ã€send å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ•°æ®</span><br><span class="hljs-comment">/*send(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(len) const char FAR * buf,</span><br><span class="hljs-comment">_In_ int len,</span><br><span class="hljs-comment">_In_ int flags</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//char msgBuf[] = &quot;Hello, I&#x27;m Server.&quot;;</span><br><span class="hljs-comment">//+1è¡¨ç¤ºå°†ç»“å°¾ç¬¦ä¸€å¹¶å‘é€è¿‡å»</span><br><span class="hljs-comment">//send(_cSocket, msgBuf, strlen(msgBuf) + 1, 0);</span><br><br><span class="hljs-comment">//6ã€å…³é—­å¥—æ¥å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡ºï¼Œä»»åŠ¡ç»“æŸ\n&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="clientç«¯">clientç«¯</h3><p>client.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">author: è¿æ€é‘«</span><br><span class="hljs-comment">2022-07-04</span><br><span class="hljs-comment">åŠ å…¥selectæ¨¡å‹å¤„ç†å¤šå®¢æˆ·ç«¯</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGIN_RESULT,<br>CMD_LOGINOUT,<br>CMD_LOGINOUT_RESULT,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦</span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-comment">//DataHeader header;</span><br><span class="hljs-built_in">Login</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(Login);<br>cmd = CMD_LOGIN;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginResult);<br>cmd = CMD_LOGIN_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOut</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOut);<br>cmd = CMD_LOGINOUT;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOutResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOutResult);<br>cmd = CMD_LOGINOUT_RESULT;<br>result = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> result;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPå®¢æˆ·ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket</span><br>SOCKET _sock = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _sock)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œå»ºç«‹Socketå¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å»ºç«‹socketæˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//2ã€é“¾æ¥æœåŠ¡å™¨ connect</span><br>sockaddr_in _sin = &#123;&#125;;<span class="hljs-comment">//å°†ç»“æ„ä½“åˆå§‹åŒ–</span><br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//å°†ç½‘ç»œè½¬æ¢ä¸ºæˆæ— ç¬¦å·ç±»å‹</span><br>_sin.sin_addr.S_un.S_addr = <span class="hljs-built_in">inet_addr</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">connect</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(sockaddr_in)); <span class="hljs-comment">//ä½¿ç”¨sizeof(sockaddr_in)ç±»å‹æ›´å®‰å…¨</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == ret)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œé“¾æ¥æœåŠ¡å™¨å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾æ¥æœåŠ¡å™¨æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">//3 è¾“å…¥è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-type">char</span> cmdBuf[<span class="hljs-number">128</span>] = &#123;&#125;;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, cmdBuf);<br><br><span class="hljs-comment">//4 å¤„ç†è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;exit&quot;</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°exitå‘½ä»¤ï¼Œä»»åŠ¡ç»“æŸ\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;login&quot;</span>))<br>&#123;<br>Login login;<br><span class="hljs-built_in">strcpy</span>(login.userName, <span class="hljs-string">&quot;lsx&quot;</span>);<br><span class="hljs-built_in">strcpy</span>(login.PassWord, <span class="hljs-string">&quot;7758521&quot;</span>);<br><span class="hljs-comment">//DataHeader dh = &#123;sizeof(login), CMD_LOGIN&#125;;</span><br><span class="hljs-comment">//login.userName = &quot;lsx&quot;;</span><br><span class="hljs-comment">//login.PassWord = &quot;7758521&quot;;</span><br><span class="hljs-comment">//5 å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-comment">//send(_sock, (const char*)&amp;dh, sizeof(dh), 0);</span><br><span class="hljs-built_in">send</span>(_sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;login, <span class="hljs-built_in">sizeof</span>(login), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span><br><span class="hljs-comment">//DataHeader retHeader = &#123;&#125;;</span><br>LoginResult loginRet;<br><span class="hljs-comment">//recv(_sock, (char*)&amp;retHeader, sizeof(retHeader), 0);</span><br><span class="hljs-built_in">recv</span>(_sock, (<span class="hljs-type">char</span>*)&amp;loginRet, <span class="hljs-built_in">sizeof</span>(loginRet), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;LoginResult: %d\n&quot;</span>, loginRet.result);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;logout&quot;</span>))<br>&#123;<br>LoginOut logout;<br><span class="hljs-built_in">strcpy</span>(logout.userName, <span class="hljs-string">&quot;lsx&quot;</span>);<br><span class="hljs-comment">//DataHeader dh = &#123;sizeof(logout), CMD_LOGINOUT &#125;;</span><br><span class="hljs-comment">//5 å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-comment">//send(_sock, (const char*)&amp;dh, sizeof(dh), 0);</span><br><span class="hljs-built_in">send</span>(_sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;logout, <span class="hljs-built_in">sizeof</span>(logout), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span><br><span class="hljs-comment">//DataHeader retHeader = &#123;&#125;;</span><br>LoginOutResult loginoutRet;<br><span class="hljs-comment">//recv(_sock, (char*)&amp;retHeader, sizeof(retHeader), 0);</span><br><span class="hljs-built_in">recv</span>(_sock, (<span class="hljs-type">char</span>*)&amp;loginoutRet, <span class="hljs-built_in">sizeof</span>(loginoutRet), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;LoginResult: %d\n&quot;</span>, loginoutRet.result);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸æ”¯æŒçš„å‘½ä»¤ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚\n&quot;</span>);<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//7 å…³é—­å¥—èŠ‚å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡º.\n&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æˆæœå±•ç¤º">æˆæœå±•ç¤º</h3><p><img src="/images/2022-7-4-0001.png" alt="uploaded!"></p><p>server.exeä½“éªŒï¼š<a href="/download/q0007.exe">ç‚¹æˆ‘ä¸‹è½½</a></p><p>client.exeä½“éªŒï¼š<a href="/download/q0008.exe">ç‚¹æˆ‘ä¸‹è½½</a></p>]]></content>
      
      
      <categories>
          
          <category> ä»é›¶å¼€å§‹å†™ä¸€ä¸ªèŠå¤©å®¤ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++é¡¹ç›® </tag>
            
            <tag> Socketç¼–ç¨‹ </tag>
            
            <tag> æœåŠ¡å™¨ç¼–å†™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Cè¯­è¨€é¡¹ç›®ã€‘å­—ç¬¦ä¸²å·¦æ—‹</title>
      <link href="/2022/06/24/%E3%80%90C%E8%AF%AD%E8%A8%80%E9%A1%B9%E7%9B%AE%E3%80%91%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B7%A6%E6%97%8B/"/>
      <url>/2022/06/24/%E3%80%90C%E8%AF%AD%E8%A8%80%E9%A1%B9%E7%9B%AE%E3%80%91%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B7%A6%E6%97%8B/</url>
      
        <content type="html"><![CDATA[<h1>ã€Cè¯­è¨€é¡¹ç›®ã€‘å­—ç¬¦ä¸²å·¦æ—‹</h1><h2 id="é¡¹ç›®è¯´æ˜">é¡¹ç›®è¯´æ˜</h2><p>å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥å·¦æ—‹å­—ç¬¦ä¸²ä¸­çš„kä¸ªå­—ç¬¦ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>ABCDå·¦æ—‹ä¸€ä¸ªå­—ç¬¦å¾—åˆ°BCDA</p><p>ABCDå·¦æ—‹ä¸¤ä¸ªå­—ç¬¦å¾—åˆ°CDAB</p><h2 id="ä»£ç å®ç°">ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> *  2022-6-24</span><br><span class="hljs-comment"> *  è¿æ€é‘«</span><br><span class="hljs-comment"> *  å­—ç¬¦ä¸²å·¦æ—‹</span><br><span class="hljs-comment"> * */</span><br><br><span class="hljs-comment">//å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥å·¦æ—‹å­—ç¬¦ä¸²ä¸­çš„kä¸ªå­—ç¬¦ã€‚</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">//ä¾‹å¦‚ï¼š</span><br><span class="hljs-comment">//ABCDå·¦æ—‹ä¸€ä¸ªå­—ç¬¦å¾—åˆ°BCDA</span><br><span class="hljs-comment">//ABCDå·¦æ—‹ä¸¤ä¸ªå­—ç¬¦å¾—åˆ°CDAB</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;assert.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">char</span>* <span class="hljs-title">strRightReverse</span><span class="hljs-params">(<span class="hljs-type">char</span>* str, <span class="hljs-type">int</span> num)</span> </span>&#123;<br><br><span class="hljs-type">char</span> strAfterReverse[<span class="hljs-number">100</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">char</span>* strReverse = str;<br><span class="hljs-type">char</span>* strNotReverse = str;<br><span class="hljs-type">int</span> i;<br><span class="hljs-type">int</span> length = <span class="hljs-built_in">strlen</span>(str);<br><br><span class="hljs-keyword">if</span> (num &lt; <span class="hljs-number">0</span> || num &gt; <span class="hljs-built_in">strlen</span>(str)) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Illegal input!\n&quot;</span>);<br><span class="hljs-keyword">return</span> str;<br>&#125;<br><br><span class="hljs-comment">//æˆ‘ä»¬å…ˆå°†ä¸å·¦æ—‹çš„æ•°æ”¾è¿› strReverse æ•°ç»„ä¸­</span><br>strNotReverse += num;<br><br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; length - num; i++)<br>strAfterReverse[i] = *strNotReverse++;<br><br><span class="hljs-comment">//å†å°†è¦å·¦æ—‹çš„æ•°ä¾æ¬¡æ”¾å…¥æ•°ç»„å°¾</span><br><span class="hljs-keyword">for</span> (i = length - num; i &lt; length; i++) &#123;<br>strAfterReverse[i] = *strReverse++;<br>&#125;<br>strAfterReverse[length] = <span class="hljs-string">&#x27;\0&#x27;</span>;<br><br><span class="hljs-built_in">strcpy</span>(str, strAfterReverse);<br><br><span class="hljs-keyword">return</span> str;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> </span>&#123;<br><br><span class="hljs-type">char</span> str[<span class="hljs-number">100</span>];<br><span class="hljs-type">int</span> num = <span class="hljs-number">0</span>;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter a string: &quot;</span>);<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, str);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter a number: &quot;</span>);<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;num);<br><br><span class="hljs-built_in">strRightReverse</span>(str, num);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;output: %s\n&quot;</span>, str);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æ•ˆæœ">æ•ˆæœ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">./test</span><br>Enter a string: abcde<br>Enter a number: 2<br>output: cdeab<br></code></pre></td></tr></table></figure><p><img src="/images/2022-6-24-00009.png" alt="uploaded!"></p>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€é¡¹ç›® </tag>
            
            <tag> å­—ç¬¦ä¸²å·¦æ—‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Cè¯­è¨€é¡¹ç›®ã€‘å­—ç¬¦ä¸²æ—‹è½¬åˆ¤æ–­</title>
      <link href="/2022/06/24/%E3%80%90C%E8%AF%AD%E8%A8%80%E9%A1%B9%E7%9B%AE%E3%80%91%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%97%8B%E8%BD%AC%E5%88%A4%E6%96%AD/"/>
      <url>/2022/06/24/%E3%80%90C%E8%AF%AD%E8%A8%80%E9%A1%B9%E7%9B%AE%E3%80%91%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%97%8B%E8%BD%AC%E5%88%A4%E6%96%AD/</url>
      
        <content type="html"><![CDATA[<h1>å­—ç¬¦ä¸²æ—‹è½¬</h1><p>å†™ä¸€ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºå¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æ—‹è½¬ä¹‹åçš„å­—ç¬¦ä¸²ã€‚</p><p>ä¾‹å¦‚ï¼šç»™å®šs1 =AABCDå’Œs2 = BCDAAï¼Œè¿”å›1ç»™å®šs1=abcdå’Œs2=ACBDï¼Œè¿”å›0.</p><p>AABCDå·¦æ—‹ä¸€ä¸ªå­—ç¬¦å¾—åˆ°ABCDAAABCDå·¦æ—‹ä¸¤ä¸ªå­—ç¬¦å¾—åˆ°BCDAAAABCDå³æ—‹ä¸€ä¸ªå­—ç¬¦å¾—åˆ°DAABC</p><h2 id="ä»£ç å®ç°">ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> *  2022-6-24</span><br><span class="hljs-comment"> *  è¿æ€é‘«</span><br><span class="hljs-comment"> *  å­—ç¬¦ä¸²æ—‹è½¬</span><br><span class="hljs-comment"> * */</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;assert.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">strJudge</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* str1, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* str2)</span> </span>&#123;<br><br><span class="hljs-type">char</span>* str2_start = (<span class="hljs-type">char</span>*)str2;<br><br><span class="hljs-comment">//str1 å’Œ str2 ä¸èƒ½æ˜¯ç©ºæŒ‡é’ˆ</span><br><span class="hljs-built_in">assert</span>(str1 != <span class="hljs-literal">NULL</span> &amp;&amp; str2 != <span class="hljs-literal">NULL</span>);<br><br><span class="hljs-comment">//å¦‚æœå­—ç¬¦ä¸²é•¿åº¦æ˜¯ 1 ï¼Œè¿™ä¸ªåˆ¤æ–­å°±æ²¡æœ‰æ„ä¹‰äº†</span><br><span class="hljs-built_in">assert</span>(<span class="hljs-built_in">strlen</span>(str1) != <span class="hljs-number">1</span>);<br><br><span class="hljs-comment">//å¦‚æœè¿ä¸ªå­—ç¬¦ä¸²é•¿åº¦éƒ½ä¸ä¸€æ ·ï¼Œè‚¯å®šä¸æ˜¯</span><br><span class="hljs-keyword">if</span> (!(<span class="hljs-built_in">strlen</span>(str1) == <span class="hljs-built_in">strlen</span>(str2)))<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br><span class="hljs-comment">//åœ¨ str2 ä¸­å¯»æ‰¾ str1 çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="hljs-keyword">while</span> (*str2) &#123;<br><span class="hljs-keyword">if</span> (*str2 == *str1) &#123;<br>++str1;<span class="hljs-comment">// str1 ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å·²ç»æ‰¾åˆ°ï¼Œåœ¨ä¸‹ä¸€ä¸ªå¾ªç¯å¯»æ‰¾ str1 ä¸­çš„ä¸‹ä¸€ä¸ª</span><br><span class="hljs-keyword">break</span>;<br>&#125;<br><br>++str2;<br>&#125;<br><span class="hljs-comment">//æ²¡æœ‰æ‰¾åˆ°ï¼Œç›´æ¥è¿”å› 0</span><br><span class="hljs-keyword">if</span> (*str2 == <span class="hljs-string">&#x27;\0&#x27;</span>)<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">while</span> (*str1) &#123;<br><br>++str2;<br><br><span class="hljs-keyword">if</span> (*str2 == <span class="hljs-string">&#x27;\0&#x27;</span>)<br>str2 = str2_start;<br><br><span class="hljs-keyword">if</span> (!(*str2 == *str1))<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>++str1;<br><br>&#125;<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> </span>&#123;<br><br><span class="hljs-type">char</span> str1[<span class="hljs-number">100</span>];<br><span class="hljs-type">char</span> str2[<span class="hljs-number">100</span>];<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter two strings: &quot;</span>);<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s %s&quot;</span>, str1, str2);<br><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">strJudge</span>(str1, str2))<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Yes\n&quot;</span>);<br><span class="hljs-keyword">else</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;No\n&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ•ˆæœ">æ•ˆæœ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">lsx@DESKTOP-LFPDU8K:~$ ./test<br>Enter two strings: AABCD BCDAA<br>Yes<br>lsx@DESKTOP-LFPDU8K:~$ ./test<br>Enter two strings: asdas dsasd<br>No<br></code></pre></td></tr></table></figure><p><img src="/images/2022-6-24-00632.png" alt="uploaded!"></p>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€é¡¹ç›® </tag>
            
            <tag> å­—ç¬¦ä¸²æ—‹è½¬åˆ¤æ–­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Cè¯­è¨€é¡¹ç›®ã€‘æ¨è¾‰ä¸‰è§’</title>
      <link href="/2022/06/24/%E3%80%90C%E8%AF%AD%E8%A8%80%E9%A1%B9%E7%9B%AE%E3%80%91%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92/"/>
      <url>/2022/06/24/%E3%80%90C%E8%AF%AD%E8%A8%80%E9%A1%B9%E7%9B%AE%E3%80%91%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92/</url>
      
        <content type="html"><![CDATA[<h1>ã€Cè¯­è¨€é¡¹ç›®ã€‘æ¨è¾‰ä¸‰è§’</h1><p>æœ€è¿‘å·¥ä½œè¾ƒä¸ºæ¸…é—²ï¼Œå†™ç‚¹Cè¯­è¨€é¡¹ç›®ç»ƒç»ƒæ‰‹ã€‚</p><h2 id="ä»£ç ">ä»£ç </h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> *  2022-6-24</span><br><span class="hljs-comment"> *  è¿æ€é‘«</span><br><span class="hljs-comment"> *  æ¨è¾‰ä¸‰è§’çš„å®ç°</span><br><span class="hljs-comment"> * */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> HEIGHT 10 <span class="hljs-comment">//å‡è®¾æ¨è¾‰ä¸‰è§’çš„é«˜åº¦æ˜¯10</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> </span>&#123;<br><br><span class="hljs-type">int</span> YHtrangle[HEIGHT][HEIGHT] = &#123; <span class="hljs-number">0</span> &#125;;<br><span class="hljs-type">int</span> i, j;<br><br><span class="hljs-comment">//è®¡ç®—æ¨è¾‰ä¸‰è§’</span><br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; HEIGHT; i++) &#123;<br><br>YHtrangle[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<span class="hljs-comment">//æ¯è¡Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸º 1</span><br>YHtrangle[i][i] = <span class="hljs-number">1</span>;<span class="hljs-comment">//æ¯è¡Œæœ€åä¸€ä¸ªå…ƒç´ ä¸º 1</span><br><span class="hljs-comment">//éœ€è¦è®¡ç®—çš„æ˜¯ä»ç¬¬ä¸‰è¡Œå¼€å§‹ï¼Œi == 2</span><br><span class="hljs-keyword">for</span> (j = <span class="hljs-number">1</span>; j &lt; i; j++)<br>YHtrangle[i][j] = YHtrangle[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + YHtrangle[i - <span class="hljs-number">1</span>][j];<span class="hljs-comment">// æ¯”å¦‚ç¬¬ä¸‰è¡Œçš„ 2 æ˜¯ ç¬¬äºŒè¡Œ 1 + 1çš„å’Œï¼Œè¿™æ˜¯æ¨è¾‰ä¸‰è§’çš„è§„å¾‹</span><br>&#125;<br><br><span class="hljs-comment">//è¾“å‡ºæ¨è¾‰ä¸‰è§’</span><br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; HEIGHT; i++) &#123;<br><span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt;= i; j++) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, YHtrangle[i][j]);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡çº§ç‰ˆ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> *  2022-6-24</span><br><span class="hljs-comment"> *  è¿æ€é‘«</span><br><span class="hljs-comment"> *  æ¨è¾‰ä¸‰è§’çš„å®ç°</span><br><span class="hljs-comment"> * */</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> HEIGHT 10 <span class="hljs-comment">//å¦‚æœè¦ä¿®æ”¹æ¨è¾‰ä¸‰è§’çš„é«˜åº¦ä¿®æ”¹è¿™ä¸ªå‚æ•°å³å¯</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ARRLEN HEIGHT + 1 </span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printYH</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[][ARRLEN])</span> </span>&#123;<br><br><span class="hljs-type">int</span> row, col;<br><br><span class="hljs-comment">//è¿™ä¸ªç¨‹åºæ¯”è¾ƒæ–¹ä¾¿æƒ¯æ€§æ€ç»´ç†è§£ï¼Œæ•°ç»„çš„é¦–è¡Œé¦–åˆ—ä¸ç”¨ï¼ˆä¸‹æ ‡ä» 1 å¼€å§‹ï¼‰</span><br><span class="hljs-keyword">for</span> (row = <span class="hljs-number">1</span>; row &lt;= HEIGHT; row++) &#123;<br><br><span class="hljs-keyword">for</span> (col = <span class="hljs-number">1</span>; col &lt;= row; col++) &#123;<br><br><span class="hljs-keyword">if</span> (col == <span class="hljs-number">1</span> || col == row)<br>arr[row][col] = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">else</span><br>arr[row][col] = arr[row - <span class="hljs-number">1</span>][col - <span class="hljs-number">1</span>] + arr[row - <span class="hljs-number">1</span>][col];<br><br><span class="hljs-comment">//ç›´æ¥è¾“å‡ºè®¡ç®—ç»“æœä¸éœ€è¦å†ç”¨å¦ä¸€ä¸ªå¾ªç¯è¾“å‡º</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, arr[row][col]);<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><span class="hljs-comment">//å½“ç„¶è¿™ä¸ªç¨‹åºä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå¦‚æœä½ åœ¨ç¨‹åºä¸­ä½¿ç”¨è¿™ä¸ªæ•°ç»„ï¼Œä½ éœ€è¦æ—¶åˆ»è®°å¾—ä¸‹æ ‡ä¸º 0 æ˜¯ä¸å­˜ä»»ä½•æœ‰æ„ä¹‰çš„æ•°æ®çš„</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> </span>&#123;<br><br><span class="hljs-type">int</span> YHtrangle[ARRLEN][ARRLEN] = &#123; <span class="hljs-number">0</span> &#125;;<br><br><span class="hljs-built_in">printYH</span>(YHtrangle);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ•ˆæœ">æ•ˆæœ</h2><p><img src="/images/2022-6-24-0003-1.png" alt="uploaded!"></p>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> Cè¯­è¨€é¡¹ç›® </tag>
            
            <tag> æ¨è¾‰ä¸‰è§’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€c++é¡¹ç›®ã€‘å°é‘«è®°å•è¯ç³»ç»Ÿ</title>
      <link href="/2022/06/24/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E5%B0%8F%E9%91%AB%E8%AE%B0%E5%8D%95%E8%AF%8D%E7%B3%BB%E7%BB%9F/"/>
      <url>/2022/06/24/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E5%B0%8F%E9%91%AB%E8%AE%B0%E5%8D%95%E8%AF%8D%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1>ã€c++é¡¹ç›®ã€‘å°é‘«è®°å•è¯ç³»ç»Ÿ</h1><h2 id="å‰è¨€">å‰è¨€</h2><p>å››çº§æ²¡è¿‡çš„æˆ‘å¿«å“­äº†â€¦å› æ­¤å¼€å‘äº†ä¸€ä¸ªè®°å•è¯çš„ç³»ç»Ÿã€‚å¯ä»¥å½•å…¥å•è¯ï¼ŒéšæœºæŠ½å–å•è¯è®°å¿†ï¼Œæ˜¾ç¤ºå•è¯æœ¬ç­‰åŠŸèƒ½ã€‚ä»£ç å†™çš„ä»“ä¿ƒï¼Œæœ‰ç‚¹å±å±±ä»£ç çš„æ„å‘³ã€‚æ‰€ä»¥åœ¨å†™ä»£ç ä¹‹å‰ï¼Œè¿˜æ˜¯è¦äº‹å…ˆå†™å¥½å¼€å‘æ–‡æ¡£ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œæ”¾ä»£ç ã€‚</p><h2 id="ä»£ç ">ä»£ç </h2><p>englishStudy.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">    2022-6-24</span><br><span class="hljs-comment">    è¿æ€é‘«</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;sendEnglish.h&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> num;<br>    sendEnglish sendenglish;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;************************&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;*     å°é‘«è®°å•è¯ç³»ç»Ÿ      *&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;************************&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;*     1.å½•å…¥å•è¯         *&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;*     2.éšæœºå­¦å•è¯       *&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;*     3.æ˜¾ç¤ºå•è¯æœ¬       *&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;*     4.æ¸…ç©ºå•è¯æœ¬       *&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;*     0.é€€å‡º            *&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;************************&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·æ ¹æ®ç¼–å·é€‰æ‹©ï¼š&quot;</span>;<br>        cin &gt;&gt; num;<br>        <span class="hljs-keyword">switch</span> (num) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>            sendenglish.<span class="hljs-built_in">show</span>();<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>            sendenglish.<span class="hljs-built_in">rec</span>();<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>            sendenglish.<span class="hljs-built_in">book</span>();<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>            sendenglish.<span class="hljs-built_in">del_book</span>();<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>sendEnglish.h</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">    2022-6-24</span><br><span class="hljs-comment">    è¿æ€é‘«</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> ENGLISHSTUDY_SENDENGLISH_H</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ENGLISHSTUDY_SENDENGLISH_H</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX 10000</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//å•è¯ç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">English</span> &#123;<br>    string english;<br>    string chinese;<br>&#125;;<br><br><span class="hljs-comment">//å•è¯æœ¬ç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Englishbook</span> &#123;<br><br>    <span class="hljs-type">int</span> number; <span class="hljs-comment">//å•è¯ä¸ªæ•°</span><br>    English english[MAX];<span class="hljs-comment">//ä¸€ä¸‡ä¸ªå•è¯</span><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">sendEnglish</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//æ˜¾ç¤º</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">send</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//å†™å…¥</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">rec</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//è¯»å–</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">book</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//å•è¯æœ¬</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">del_book</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//æ¸…ç©ºå•è¯æœ¬</span><br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-comment">//åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸ºç©º</span><br>    <span class="hljs-type">bool</span> fileIsEmpty;<br><br>&#125;;<br><br><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">//ENGLISHSTUDY_SENDENGLISH_H</span></span><br><br></code></pre></td></tr></table></figure><p>sendEnglish.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">    2022-6-24</span><br><span class="hljs-comment">    è¿æ€é‘«</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;sendEnglish.h&quot;</span></span><br>Englishbook englishbook;<br><br><br><span class="hljs-comment">//éšæœºæ•°ç”Ÿæˆ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">randomNumber</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> </span>&#123;<br>    <span class="hljs-built_in">srand</span>((<span class="hljs-type">int</span>)<span class="hljs-built_in">time</span>(<span class="hljs-number">0</span>));<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">rand</span>() % (num + <span class="hljs-number">1</span>);<br>&#125;<br><br><br><span class="hljs-comment">//C++å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ŒC++æ ‡å‡†åº“é‡Œæ²¡æœ‰ã€‚ã€‚ã€‚åªèƒ½è‡ªå·±å»å®ç°äº†ã€‚</span><br><span class="hljs-type">static</span> <span class="hljs-type">void</span> _split(<span class="hljs-type">const</span> string&amp; s, <span class="hljs-type">char</span> delim, vector&lt;string&gt;&amp; elems) &#123;<br>    <span class="hljs-function">stringstream <span class="hljs-title">ss</span><span class="hljs-params">(s)</span></span>;<br>    string item;<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">getline</span>(ss, item, delim))<br>    &#123;<br>        elems.<span class="hljs-built_in">push_back</span>(item);<br>    &#125;<br>&#125;<br><br><span class="hljs-function">vector&lt;string&gt; <span class="hljs-title">split</span><span class="hljs-params">(<span class="hljs-type">const</span> string&amp; s, <span class="hljs-type">char</span> delim)</span> </span>&#123;<br>    vector&lt;string&gt; elems;<br>    _split(s, delim, elems);<br>    <span class="hljs-keyword">return</span> elems;<br>&#125;<br><br><span class="hljs-comment">//:~</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= englishbook.number; ++i) &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;-----------------------------------&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; : &quot;</span> &lt;&lt; englishbook.english[i].english &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; englishbook.english[i].chinese &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;-----------------------------------&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sendEnglish::show</span><span class="hljs-params">()</span> </span>&#123;<br>    string s;<br>    <span class="hljs-type">int</span> num = <span class="hljs-number">0</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*************************&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;* è¯·è¾“å…¥å•è¯ä»¥åŠè¯¥å•è¯çš„ç¿»è¯‘ *&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*     æŒ‰å›è½¦å³å¯ä¿å­˜       *&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*     è¾“å…¥0æŒ‰å›è½¦å³å¯ç»“æŸ   *&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*************************&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ‚¨è¦è¾“å…¥çš„è‹±è¯­å•è¯ï¼š&quot;</span>;<br>        cin &gt;&gt; s;<br>        <span class="hljs-keyword">if</span> (s == <span class="hljs-string">&quot;0&quot;</span>) &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        englishbook.number = num;<br>        englishbook.english[num].english = s;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥è¯¥è‹±è¯­çš„ç¿»è¯‘ï¼š&quot;</span>;<br>        cin &gt;&gt; englishbook.english[num].chinese;<br>        cout &lt;&lt; <span class="hljs-string">&quot;------------------------&quot;</span> &lt;&lt; endl;<br>        num++;<br>        <span class="hljs-built_in">send</span>();<br>    &#125;<br>    <span class="hljs-built_in">test</span>(); <span class="hljs-comment">//æµ‹è¯•å•è¯å†™å…¥ç»“æ„ä½“æ˜¯å¦æˆåŠŸ</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;ä»¥ä¸Šæ˜¯æ‚¨å½•å…¥çš„æ–°å•è¯ï¼Œå·²ä¿å­˜ï¼ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sendEnglish::send</span><span class="hljs-params">()</span> </span>&#123;<br><br>    ofstream ofs;<br>    ofs.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;english.csv&quot;</span>, ios::out | ios::app); <span class="hljs-comment">// ç”¨è¿½åŠ çš„æ–¹å¼å†™æ–‡ä»¶</span><br>    <span class="hljs-keyword">if</span> (!ofs.<span class="hljs-built_in">is_open</span>()) &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ–‡ä»¶æ²¡æœ‰æ‰“å¼€ï¼&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-function">ifstream <span class="hljs-title">ifs</span><span class="hljs-params">(<span class="hljs-string">&quot;english.csv&quot;</span>, ios::in)</span></span>; <span class="hljs-comment">//è¯»æ–‡ä»¶</span><br>    <span class="hljs-keyword">if</span> (!ifs.<span class="hljs-built_in">is_open</span>())<br>    &#123;<br>        <span class="hljs-keyword">this</span>-&gt;fileIsEmpty = <span class="hljs-literal">true</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ–‡ä»¶ä¸å­˜åœ¨&quot;</span> &lt;&lt; endl;<br>        ifs.<span class="hljs-built_in">close</span>();<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>   <span class="hljs-type">int</span> s = <span class="hljs-number">0</span>;<br>   string data;<br>   <span class="hljs-keyword">while</span> (<span class="hljs-built_in">getline</span>(ifs,data))<br>    &#123;<br>            s++;<br>    &#125;<br>   ifs.<span class="hljs-built_in">close</span>();<br><br>    <span class="hljs-comment">//å°†æ•°æ® å†™å…¥åˆ°æ–‡ä»¶ä¸­</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= englishbook.number; i++)<br>    &#123;<br>        ofs &lt;&lt; s+i &lt;&lt; <span class="hljs-string">&quot;,&quot;</span> &lt;&lt; englishbook.english[i].english &lt;&lt; <span class="hljs-string">&quot;,&quot;</span> &lt;&lt; englishbook.english[i].chinese &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-comment">//å…³é—­</span><br>    ofs.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-comment">//cout &lt;&lt; &quot;è®°å½•å·²ç»ä¿å­˜&quot; &lt;&lt; endl;</span><br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sendEnglish::rec</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> num;<br>    <span class="hljs-comment">//memset(&amp;englishbook, 0, sizeof(englishbook)); </span><br>    <span class="hljs-comment">//æ¸…ç©ºç»“æ„ä½“,è¿™ä¸ªåœ°æ–¹åŠ ä¸Šæœ‰bugï¼Œå­—ç¬¦ä¸²ä¼šä¹±ç ï¼Œæ²¡ææ˜ç™½ä¸ºä»€ä¹ˆã€‚æ‰€ä»¥æ³¨é‡Šæ‰äº†ï¼Œå¯èƒ½ä¸æ˜¯æˆ‘è¿™ä¹ˆç”¨çš„ã€‚æœ‰çŸ¥é“çš„å¤§ä½¬å¯ä»¥æŒ‡ç‚¹ä¸€ä¸‹ã€‚</span><br>    <span class="hljs-function">ifstream <span class="hljs-title">ifs</span><span class="hljs-params">(<span class="hljs-string">&quot;english.csv&quot;</span>, ios::in)</span></span>; <span class="hljs-comment">//è¯»æ–‡ä»¶</span><br>    <span class="hljs-keyword">if</span> (!ifs.<span class="hljs-built_in">is_open</span>())<br>    &#123;<br>        <span class="hljs-keyword">this</span>-&gt;fileIsEmpty = <span class="hljs-literal">true</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ–‡ä»¶ä¸å­˜åœ¨&quot;</span> &lt;&lt; endl;<br>        ifs.<span class="hljs-built_in">close</span>();<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    string buff;<br>    <span class="hljs-type">int</span> s = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">getline</span>(ifs, buff))<br>    &#123;<br>        vector&lt;string&gt; data = <span class="hljs-built_in">split</span>(buff, <span class="hljs-string">&#x27;,&#x27;</span>);<br>        <span class="hljs-comment">//for (auto it = begin(data); it != end(data); ++it)</span><br>        <span class="hljs-comment">//&#123;</span><br>        <span class="hljs-comment">//    cout &lt;&lt; *it &lt;&lt; endl;</span><br>        <span class="hljs-comment">//&#125;</span><br>        englishbook.english[s].english = data[<span class="hljs-number">1</span>];<br>        englishbook.english[s].chinese = data[<span class="hljs-number">2</span>];<br>        s++;<br>    &#125;<br>    englishbook.number = s<span class="hljs-number">-1</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å¦‚æœæƒ³è¦é€€å‡ºè¯·æŒ‰0.&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>    &#123;<br>        string chinese;<br>        num = <span class="hljs-built_in">randomNumber</span>(englishbook.number);<br>        <span class="hljs-comment">//cout &lt;&lt; num &lt;&lt; endl;//æµ‹è¯•éšæœºæ•°æ˜¯å¦ç”Ÿæˆ</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·å†™å‡º&quot;</span> &lt;&lt; englishbook.english[num].english &lt;&lt; <span class="hljs-string">&quot;çš„ç¿»è¯‘ï¼š&quot;</span>;<br>        cin &gt;&gt; chinese;<br>        <span class="hljs-keyword">if</span> (chinese == <span class="hljs-string">&quot;0&quot;</span>)<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (englishbook.english[num].chinese == chinese) &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;å›ç­”æ­£ç¡®ï¼ï¼&quot;</span> &lt;&lt; endl;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (englishbook.english[num].chinese != chinese)<br>        &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;å›ç­”é”™è¯¯ï¼ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š&quot;</span> &lt;&lt; englishbook.english[num].chinese &lt;&lt; endl;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sendEnglish::book</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">ifstream <span class="hljs-title">ifs</span><span class="hljs-params">(<span class="hljs-string">&quot;english.csv&quot;</span>, ios::in)</span></span>; <span class="hljs-comment">//è¯»æ–‡ä»¶</span><br>    <span class="hljs-keyword">if</span> (!ifs.<span class="hljs-built_in">is_open</span>())<br>    &#123;<br>        <span class="hljs-keyword">this</span>-&gt;fileIsEmpty = <span class="hljs-literal">true</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ–‡ä»¶ä¸å­˜åœ¨&quot;</span> &lt;&lt; endl;<br>        ifs.<span class="hljs-built_in">close</span>();<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    string buff;<br>    <span class="hljs-type">int</span> s = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">getline</span>(ifs, buff))<br>    &#123;<br>        vector&lt;string&gt; data = <span class="hljs-built_in">split</span>(buff, <span class="hljs-string">&#x27;,&#x27;</span>);<br>        <span class="hljs-comment">//for (auto it = begin(data); it != end(data); ++it)</span><br>        <span class="hljs-comment">//&#123;</span><br>        <span class="hljs-comment">//    cout &lt;&lt; *it &lt;&lt; endl;</span><br>        <span class="hljs-comment">//&#125;</span><br>        englishbook.english[s].english = data[<span class="hljs-number">1</span>];<br>        englishbook.english[s].chinese = data[<span class="hljs-number">2</span>];<br>        s++;<br>    &#125;<br>    englishbook.number = s - <span class="hljs-number">1</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å·²å½•å…¥å•è¯å¦‚ä¸‹ï¼š&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-built_in">test</span>();<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sendEnglish::del_book</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> num;<br>    cout &lt;&lt; <span class="hljs-string">&quot;************************&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;æ‚¨ç¡®å®šè¦æ¸…ç©ºå•è¯æœ¬å—ï¼Ÿ&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;æ˜¯ï¼Œè¯·è¾“å…¥1&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å¦ï¼Œè¯·è¾“å…¥0&quot;</span> &lt;&lt; endl;<br>    cin &gt;&gt; num;<br>    <span class="hljs-keyword">if</span> (num == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(num == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-built_in">remove</span>(<span class="hljs-string">&quot;english.csv&quot;</span>);<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h2 id="æ•ˆæœå±•ç¤º">æ•ˆæœå±•ç¤º</h2><p><img src="/images/2022-6-24-0001.png" alt="uploaded!"></p><p><img src="/images/2022-6-24-00002.png" alt="uploaded!"></p><p>å¯æ‰§è¡Œç¨‹åºï¼š<a href="/download/englishStudy.exe">ç‚¹æˆ‘ä¸‹è½½</a></p>]]></content>
      
      
      <categories>
          
          <category> C++é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++é¡¹ç›® </tag>
            
            <tag> å°é‘«è®°å•è¯ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPè¯¦è§£</title>
      <link href="/2022/06/22/HTTP%E8%AF%A6%E8%A7%A3/"/>
      <url>/2022/06/22/HTTP%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1>HTTPè¯¦è§£</h1><h2 id="ä¸€-ã€åŸºç¡€æ¦‚å¿µ">ä¸€ ã€åŸºç¡€æ¦‚å¿µ</h2><h3 id="è¯·æ±‚å’Œå“åº”æŠ¥æ–‡">è¯·æ±‚å’Œå“åº”æŠ¥æ–‡</h3><p>å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ ¹æ®è¯·æ±‚æŠ¥æ–‡ä¸­çš„ä¿¡æ¯è¿›è¡Œå¤„ç†ï¼Œå¹¶å°†å¤„ç†ç»“æœæ”¾å…¥å“åº”æŠ¥æ–‡ä¸­è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>è¯·æ±‚æŠ¥æ–‡ç»“æ„ï¼š</p><ul><li>ç¬¬ä¸€è¡Œæ˜¯åŒ…å«äº†è¯·æ±‚æ–¹æ³•ã€URLã€åè®®ç‰ˆæœ¬ï¼›</li><li>æ¥ä¸‹æ¥çš„å¤šè¡Œéƒ½æ˜¯è¯·æ±‚é¦–éƒ¨ Headerï¼Œæ¯ä¸ªé¦–éƒ¨éƒ½æœ‰ä¸€ä¸ªé¦–éƒ¨åç§°ï¼Œä»¥åŠå¯¹åº”çš„å€¼ã€‚</li><li>ä¸€ä¸ªç©ºè¡Œç”¨æ¥åˆ†éš”é¦–éƒ¨å’Œå†…å®¹ä¸»ä½“ Body</li><li>æœ€åæ˜¯è¯·æ±‚çš„å†…å®¹ä¸»ä½“</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">http://www.example.com/</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9<br><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>gzip, deflate<br><span class="hljs-attribute">Accept-Language</span><span class="hljs-punctuation">: </span>zh-CN,zh;q=0.9,en;q=0.8<br><span class="hljs-attribute">Cache-Control</span><span class="hljs-punctuation">: </span>max-age=0<br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>www.example.com<br><span class="hljs-attribute">If-Modified-Since</span><span class="hljs-punctuation">: </span>Thu, 17 Oct 2019 07:18:26 GMT<br><span class="hljs-attribute">If-None-Match</span><span class="hljs-punctuation">: </span>&quot;3147526947+gzip&quot;<br><span class="hljs-attribute">Proxy-Connection</span><span class="hljs-punctuation">: </span>keep-alive<br><span class="hljs-attribute">Upgrade-Insecure-Requests</span><span class="hljs-punctuation">: </span>1<br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>Mozilla/5.0 xxx<br><br><span class="language-apache"><span class="hljs-attribute">param1</span>=<span class="hljs-number">1</span>&amp;param2=<span class="hljs-number">2</span></span><br></code></pre></td></tr></table></figure><p>å“åº”æŠ¥æ–‡ç»“æ„ï¼š</p><ul><li>ç¬¬ä¸€è¡ŒåŒ…å«åè®®ç‰ˆæœ¬ã€çŠ¶æ€ç ä»¥åŠæè¿°ï¼Œæœ€å¸¸è§çš„æ˜¯ 200 OK è¡¨ç¤ºè¯·æ±‚æˆåŠŸäº†</li><li>æ¥ä¸‹æ¥å¤šè¡Œä¹Ÿæ˜¯é¦–éƒ¨å†…å®¹</li><li>ä¸€ä¸ªç©ºè¡Œåˆ†éš”é¦–éƒ¨å’Œå†…å®¹ä¸»ä½“</li><li>æœ€åæ˜¯å“åº”çš„å†…å®¹ä¸»ä½“</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Age</span><span class="hljs-punctuation">: </span>529651<br><span class="hljs-attribute">Cache-Control</span><span class="hljs-punctuation">: </span>max-age=604800<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive<br><span class="hljs-attribute">Content-Encoding</span><span class="hljs-punctuation">: </span>gzip<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>648<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Date</span><span class="hljs-punctuation">: </span>Mon, 02 Nov 2020 17:53:39 GMT<br><span class="hljs-attribute">Etag</span><span class="hljs-punctuation">: </span>&quot;3147526947+ident+gzip&quot;<br><span class="hljs-attribute">Expires</span><span class="hljs-punctuation">: </span>Mon, 09 Nov 2020 17:53:39 GMT<br><span class="hljs-attribute">Keep-Alive</span><span class="hljs-punctuation">: </span>timeout=4<br><span class="hljs-attribute">Last-Modified</span><span class="hljs-punctuation">: </span>Thu, 17 Oct 2019 07:18:26 GMT<br><span class="hljs-attribute">Proxy-Connection</span><span class="hljs-punctuation">: </span>keep-alive<br><span class="hljs-attribute">Server</span><span class="hljs-punctuation">: </span>ECS (sjc/16DF)<br><span class="hljs-attribute">Vary</span><span class="hljs-punctuation">: </span>Accept-Encoding<br><span class="hljs-attribute">X-Cache</span><span class="hljs-punctuation">: </span>HIT<br><br><span class="language-xml"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Example Domain<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="language-xml">// çœç•¥... </span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br><span class="language-xml"></span><br></code></pre></td></tr></table></figure><h3 id="URL">URL</h3><p>HTTP ä½¿ç”¨ URLï¼ˆ <strong>U</strong> niform <strong>R</strong>esource <strong>L</strong>ocatorï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰æ¥å®šä½èµ„æºï¼Œå®ƒæ˜¯  URIï¼ˆ<strong>U</strong>niform <strong>R</strong>esource <strong>I</strong>dentifierï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰çš„å­é›†ï¼ŒURL åœ¨ URI çš„åŸºç¡€ä¸Šå¢åŠ äº†å®šä½èƒ½åŠ›ã€‚URI é™¤äº†åŒ…å« URLï¼Œè¿˜åŒ…å« URNï¼ˆUniform Resource Nameï¼Œç»Ÿä¸€èµ„æºåç§°ï¼‰ï¼Œå®ƒåªæ˜¯ç”¨æ¥å®šä¹‰ä¸€ä¸ªèµ„æºçš„åç§°ï¼Œå¹¶ä¸å…·å¤‡å®šä½è¯¥èµ„æºçš„èƒ½åŠ›ã€‚ä¾‹å¦‚ urn:isbn:0451450523 ç”¨æ¥å®šä¹‰ä¸€ä¸ªä¹¦ç±åç§°ï¼Œä½†æ˜¯å´æ²¡æœ‰è¡¨ç¤ºæ€ä¹ˆæ‰¾åˆ°è¿™æœ¬ä¹¦ã€‚</p><div align="center"> <img src="/pics/8441b2c4-dca7-4d6b-8efb-f22efccaf331.png" width="500px"> </div><br><ul><li><a href="https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E6%A0%87%E5%BF%97%E7%AC%A6">wikipediaï¼šç»Ÿä¸€èµ„æºæ ‡å¿—ç¬¦</a></li><li><a href="https://en.wikipedia.org/wiki/URL">wikipedia: URL</a></li><li><a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2.2">rfc2616ï¼š3.2.2 http URL</a></li><li><a href="https://stackoverflow.com/questions/176264/what-is-the-difference-between-a-uri-a-url-and-a-urn">What is the difference between a URI, a URL and a URN?</a></li></ul><h2 id="äºŒã€HTTP-æ–¹æ³•">äºŒã€HTTP æ–¹æ³•</h2><p>å®¢æˆ·ç«¯å‘é€çš„   <strong>è¯·æ±‚æŠ¥æ–‡</strong>   ç¬¬ä¸€è¡Œä¸ºè¯·æ±‚è¡Œï¼ŒåŒ…å«äº†æ–¹æ³•å­—æ®µã€‚</p><h3 id="GET">GET</h3><blockquote><p>è·å–èµ„æº</p></blockquote><p>å½“å‰ç½‘ç»œè¯·æ±‚ä¸­ï¼Œç»å¤§éƒ¨åˆ†ä½¿ç”¨çš„æ˜¯ GET æ–¹æ³•ã€‚</p><h3 id="HEAD">HEAD</h3><blockquote><p>è·å–æŠ¥æ–‡é¦–éƒ¨</p></blockquote><p>å’Œ GET æ–¹æ³•ç±»ä¼¼ï¼Œä½†æ˜¯ä¸è¿”å›æŠ¥æ–‡å®ä½“ä¸»ä½“éƒ¨åˆ†ã€‚</p><p>ä¸»è¦ç”¨äºç¡®è®¤ URL çš„æœ‰æ•ˆæ€§ä»¥åŠèµ„æºæ›´æ–°çš„æ—¥æœŸæ—¶é—´ç­‰ã€‚</p><h3 id="POST">POST</h3><blockquote><p>ä¼ è¾“å®ä½“ä¸»ä½“</p></blockquote><p>POST ä¸»è¦ç”¨æ¥ä¼ è¾“æ•°æ®ï¼Œè€Œ GET ä¸»è¦ç”¨æ¥è·å–èµ„æºã€‚</p><p>æ›´å¤š POST ä¸ GET çš„æ¯”è¾ƒè¯·è§ç¬¬ä¹ç« ã€‚</p><h3 id="PUT">PUT</h3><blockquote><p>ä¸Šä¼ æ–‡ä»¶</p></blockquote><p>ç”±äºè‡ªèº«ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œå› æ­¤å­˜åœ¨å®‰å…¨æ€§é—®é¢˜ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨è¯¥æ–¹æ³•ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">PUT /new.html HTTP/1.1<br>Host: example.com<br>Content-type: text/html<br>Content-length: 16<br><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>New File<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="PATCH">PATCH</h3><blockquote><p>å¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†ä¿®æ”¹</p></blockquote><p>PUT ä¹Ÿå¯ä»¥ç”¨äºä¿®æ”¹èµ„æºï¼Œä½†æ˜¯åªèƒ½å®Œå…¨æ›¿ä»£åŸå§‹èµ„æºï¼ŒPATCH å…è®¸éƒ¨åˆ†ä¿®æ”¹ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html">PATCH /file.txt HTTP/1.1<br>Host: www.example.com<br>Content-Type: application/example<br>If-Match: &quot;e0023aa4e&quot;<br>Content-Length: 100<br><br>[description of changes]<br></code></pre></td></tr></table></figure><h3 id="DELETE">DELETE</h3><blockquote><p>åˆ é™¤æ–‡ä»¶</p></blockquote><p>ä¸ PUT åŠŸèƒ½ç›¸åï¼Œå¹¶ä¸”åŒæ ·ä¸å¸¦éªŒè¯æœºåˆ¶ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">DELETE /file.html HTTP/1.1<br></code></pre></td></tr></table></figure><h3 id="OPTIONS">OPTIONS</h3><blockquote><p>æŸ¥è¯¢æ”¯æŒçš„æ–¹æ³•</p></blockquote><p>æŸ¥è¯¢æŒ‡å®šçš„ URL èƒ½å¤Ÿæ”¯æŒçš„æ–¹æ³•ã€‚</p><p>ä¼šè¿”å› <code>Allow: GET, POST, HEAD, OPTIONS</code> è¿™æ ·çš„å†…å®¹ã€‚</p><h3 id="CONNECT">CONNECT</h3><blockquote><p>è¦æ±‚åœ¨ä¸ä»£ç†æœåŠ¡å™¨é€šä¿¡æ—¶å»ºç«‹éš§é“</p></blockquote><p>ä½¿ç”¨ SSLï¼ˆSecure Sockets Layerï¼Œå®‰å…¨å¥—æ¥å±‚ï¼‰å’Œ TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰åè®®æŠŠé€šä¿¡å†…å®¹åŠ å¯†åç»ç½‘ç»œéš§é“ä¼ è¾“ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">CONNECT www.example.com:443 HTTP/1.1<br></code></pre></td></tr></table></figure><div align="center"> <img src="/pics/dc00f70e-c5c8-4d20-baf1-2d70014a97e3.jpg" width=""/> </div><br><h3 id="TRACE">TRACE</h3><blockquote><p>è¿½è¸ªè·¯å¾„</p></blockquote><p>æœåŠ¡å™¨ä¼šå°†é€šä¿¡è·¯å¾„è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>å‘é€è¯·æ±‚æ—¶ï¼Œåœ¨ Max-Forwards é¦–éƒ¨å­—æ®µä¸­å¡«å…¥æ•°å€¼ï¼Œæ¯ç»è¿‡ä¸€ä¸ªæœåŠ¡å™¨å°±ä¼šå‡ 1ï¼Œå½“æ•°å€¼ä¸º 0 æ—¶å°±åœæ­¢ä¼ è¾“ã€‚</p><p>é€šå¸¸ä¸ä¼šä½¿ç”¨ TRACEï¼Œå¹¶ä¸”å®ƒå®¹æ˜“å—åˆ° XST æ”»å‡»ï¼ˆCross-Site Tracingï¼Œè·¨ç«™è¿½è¸ªï¼‰ã€‚</p><h2 id="ä¸‰ã€HTTP-çŠ¶æ€ç ">ä¸‰ã€HTTP çŠ¶æ€ç </h2><p>æœåŠ¡å™¨è¿”å›çš„   <strong>å“åº”æŠ¥æ–‡</strong>   ä¸­ç¬¬ä¸€è¡Œä¸ºçŠ¶æ€è¡Œï¼ŒåŒ…å«äº†çŠ¶æ€ç ä»¥åŠåŸå› çŸ­è¯­ï¼Œç”¨æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯è¯·æ±‚çš„ç»“æœã€‚</p><table><thead><tr><th style="text-align:center">çŠ¶æ€ç </th><th style="text-align:center">ç±»åˆ«</th><th style="text-align:center">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">1XX</td><td style="text-align:center">Informationalï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰</td><td style="text-align:center">æ¥æ”¶çš„è¯·æ±‚æ­£åœ¨å¤„ç†</td></tr><tr><td style="text-align:center">2XX</td><td style="text-align:center">Successï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰</td><td style="text-align:center">è¯·æ±‚æ­£å¸¸å¤„ç†å®Œæ¯•</td></tr><tr><td style="text-align:center">3XX</td><td style="text-align:center">Redirectionï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰</td><td style="text-align:center">éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œä»¥å®Œæˆè¯·æ±‚</td></tr><tr><td style="text-align:center">4XX</td><td style="text-align:center">Client Errorï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰</td><td style="text-align:center">æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚</td></tr><tr><td style="text-align:center">5XX</td><td style="text-align:center">Server Errorï¼ˆæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼‰</td><td style="text-align:center">æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™</td></tr></tbody></table><h3 id="1XX-ä¿¡æ¯">1XX ä¿¡æ¯</h3><ul><li><strong>100 Continue</strong>  ï¼šè¡¨æ˜åˆ°ç›®å‰ä¸ºæ­¢éƒ½å¾ˆæ­£å¸¸ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘é€è¯·æ±‚æˆ–è€…å¿½ç•¥è¿™ä¸ªå“åº”ã€‚</li></ul><h3 id="2XX-æˆåŠŸ">2XX æˆåŠŸ</h3><ul><li><p><strong>200 OK</strong></p></li><li><p><strong>204 No Content</strong>  ï¼šè¯·æ±‚å·²ç»æˆåŠŸå¤„ç†ï¼Œä½†æ˜¯è¿”å›çš„å“åº”æŠ¥æ–‡ä¸åŒ…å«å®ä½“çš„ä¸»ä½“éƒ¨åˆ†ã€‚ä¸€èˆ¬åœ¨åªéœ€è¦ä»å®¢æˆ·ç«¯å¾€æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦è¿”å›æ•°æ®æ—¶ä½¿ç”¨ã€‚</p></li><li><p><strong>206 Partial Content</strong>  ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ï¼Œå“åº”æŠ¥æ–‡åŒ…å«ç”± Content-Range æŒ‡å®šèŒƒå›´çš„å®ä½“å†…å®¹ã€‚</p></li></ul><h3 id="3XX-é‡å®šå‘">3XX é‡å®šå‘</h3><ul><li><p><strong>301 Moved Permanently</strong>  ï¼šæ°¸ä¹…æ€§é‡å®šå‘</p></li><li><p><strong>302 Found</strong>  ï¼šä¸´æ—¶æ€§é‡å®šå‘</p></li><li><p><strong>303 See Other</strong>  ï¼šå’Œ 302 æœ‰ç€ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯ 303 æ˜ç¡®è¦æ±‚å®¢æˆ·ç«¯åº”è¯¥é‡‡ç”¨ GET æ–¹æ³•è·å–èµ„æºã€‚</p></li><li><p>æ³¨ï¼šè™½ç„¶ HTTP åè®®è§„å®š 301ã€302 çŠ¶æ€ä¸‹é‡å®šå‘æ—¶ä¸å…è®¸æŠŠ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ï¼Œä½†æ˜¯å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¼šåœ¨ 301ã€302 å’Œ 303 çŠ¶æ€ä¸‹çš„é‡å®šå‘æŠŠ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ã€‚</p></li><li><p><strong>304 Not Modified</strong>  ï¼šå¦‚æœè¯·æ±‚æŠ¥æ–‡é¦–éƒ¨åŒ…å«ä¸€äº›æ¡ä»¶ï¼Œä¾‹å¦‚ï¼šIf-Matchï¼ŒIf-Modified-Sinceï¼ŒIf-None-Matchï¼ŒIf-Rangeï¼ŒIf-Unmodified-Sinceï¼Œå¦‚æœä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™æœåŠ¡å™¨ä¼šè¿”å› 304 çŠ¶æ€ç ã€‚</p></li><li><p><strong>307 Temporary Redirect</strong>  ï¼šä¸´æ—¶é‡å®šå‘ï¼Œä¸ 302 çš„å«ä¹‰ç±»ä¼¼ï¼Œä½†æ˜¯ 307 è¦æ±‚æµè§ˆå™¨ä¸ä¼šæŠŠé‡å®šå‘è¯·æ±‚çš„ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ã€‚</p></li></ul><h3 id="4XX-å®¢æˆ·ç«¯é”™è¯¯">4XX å®¢æˆ·ç«¯é”™è¯¯</h3><ul><li><p><strong>400 Bad Request</strong>  ï¼šè¯·æ±‚æŠ¥æ–‡ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚</p></li><li><p><strong>401 Unauthorized</strong>  ï¼šè¯¥çŠ¶æ€ç è¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰è®¤è¯ä¿¡æ¯ï¼ˆBASIC è®¤è¯ã€DIGEST è®¤è¯ï¼‰ã€‚å¦‚æœä¹‹å‰å·²è¿›è¡Œè¿‡ä¸€æ¬¡è¯·æ±‚ï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·è®¤è¯å¤±è´¥ã€‚</p></li><li><p><strong>403 Forbidden</strong>  ï¼šè¯·æ±‚è¢«æ‹’ç»ã€‚</p></li><li><p><strong>404 Not Found</strong></p></li></ul><h3 id="5XX-æœåŠ¡å™¨é”™è¯¯">5XX æœåŠ¡å™¨é”™è¯¯</h3><ul><li><p><strong>500 Internal Server Error</strong>  ï¼šæœåŠ¡å™¨æ­£åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯ã€‚</p></li><li><p><strong>503 Service Unavailable</strong>  ï¼šæœåŠ¡å™¨æš‚æ—¶å¤„äºè¶…è´Ÿè½½æˆ–æ­£åœ¨è¿›è¡Œåœæœºç»´æŠ¤ï¼Œç°åœ¨æ— æ³•å¤„ç†è¯·æ±‚ã€‚</p></li></ul><h2 id="å››ã€HTTP-é¦–éƒ¨">å››ã€HTTP é¦–éƒ¨</h2><p>æœ‰ 4 ç§ç±»å‹çš„é¦–éƒ¨å­—æ®µï¼šé€šç”¨é¦–éƒ¨å­—æ®µã€è¯·æ±‚é¦–éƒ¨å­—æ®µã€å“åº”é¦–éƒ¨å­—æ®µå’Œå®ä½“é¦–éƒ¨å­—æ®µã€‚</p><p>å„ç§é¦–éƒ¨å­—æ®µåŠå…¶å«ä¹‰å¦‚ä¸‹ï¼ˆä¸éœ€è¦å…¨è®°ï¼Œä»…ä¾›æŸ¥é˜…ï¼‰ï¼š</p><h3 id="é€šç”¨é¦–éƒ¨å­—æ®µ">é€šç”¨é¦–éƒ¨å­—æ®µ</h3><table><thead><tr><th style="text-align:center">é¦–éƒ¨å­—æ®µå</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">Cache-Control</td><td style="text-align:center">æ§åˆ¶ç¼“å­˜çš„è¡Œä¸º</td></tr><tr><td style="text-align:center">Connection</td><td style="text-align:center">æ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µã€ç®¡ç†æŒä¹…è¿æ¥</td></tr><tr><td style="text-align:center">Date</td><td style="text-align:center">åˆ›å»ºæŠ¥æ–‡çš„æ—¥æœŸæ—¶é—´</td></tr><tr><td style="text-align:center">Pragma</td><td style="text-align:center">æŠ¥æ–‡æŒ‡ä»¤</td></tr><tr><td style="text-align:center">Trailer</td><td style="text-align:center">æŠ¥æ–‡æœ«ç«¯çš„é¦–éƒ¨ä¸€è§ˆ</td></tr><tr><td style="text-align:center">Transfer-Encoding</td><td style="text-align:center">æŒ‡å®šæŠ¥æ–‡ä¸»ä½“çš„ä¼ è¾“ç¼–ç æ–¹å¼</td></tr><tr><td style="text-align:center">Upgrade</td><td style="text-align:center">å‡çº§ä¸ºå…¶ä»–åè®®</td></tr><tr><td style="text-align:center">Via</td><td style="text-align:center">ä»£ç†æœåŠ¡å™¨çš„ç›¸å…³ä¿¡æ¯</td></tr><tr><td style="text-align:center">Warning</td><td style="text-align:center">é”™è¯¯é€šçŸ¥</td></tr></tbody></table><h3 id="è¯·æ±‚é¦–éƒ¨å­—æ®µ">è¯·æ±‚é¦–éƒ¨å­—æ®µ</h3><table><thead><tr><th style="text-align:center">é¦–éƒ¨å­—æ®µå</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">Accept</td><td style="text-align:center">ç”¨æˆ·ä»£ç†å¯å¤„ç†çš„åª’ä½“ç±»å‹</td></tr><tr><td style="text-align:center">Accept-Charset</td><td style="text-align:center">ä¼˜å…ˆçš„å­—ç¬¦é›†</td></tr><tr><td style="text-align:center">Accept-Encoding</td><td style="text-align:center">ä¼˜å…ˆçš„å†…å®¹ç¼–ç </td></tr><tr><td style="text-align:center">Accept-Language</td><td style="text-align:center">ä¼˜å…ˆçš„è¯­è¨€ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰</td></tr><tr><td style="text-align:center">Authorization</td><td style="text-align:center">Web è®¤è¯ä¿¡æ¯</td></tr><tr><td style="text-align:center">Expect</td><td style="text-align:center">æœŸå¾…æœåŠ¡å™¨çš„ç‰¹å®šè¡Œä¸º</td></tr><tr><td style="text-align:center">From</td><td style="text-align:center">ç”¨æˆ·çš„ç”µå­é‚®ç®±åœ°å€</td></tr><tr><td style="text-align:center">Host</td><td style="text-align:center">è¯·æ±‚èµ„æºæ‰€åœ¨æœåŠ¡å™¨</td></tr><tr><td style="text-align:center">If-Match</td><td style="text-align:center">æ¯”è¾ƒå®ä½“æ ‡è®°ï¼ˆETagï¼‰</td></tr><tr><td style="text-align:center">If-Modified-Since</td><td style="text-align:center">æ¯”è¾ƒèµ„æºçš„æ›´æ–°æ—¶é—´</td></tr><tr><td style="text-align:center">If-None-Match</td><td style="text-align:center">æ¯”è¾ƒå®ä½“æ ‡è®°ï¼ˆä¸ If-Match ç›¸åï¼‰</td></tr><tr><td style="text-align:center">If-Range</td><td style="text-align:center">èµ„æºæœªæ›´æ–°æ—¶å‘é€å®ä½“ Byte çš„èŒƒå›´è¯·æ±‚</td></tr><tr><td style="text-align:center">If-Unmodified-Since</td><td style="text-align:center">æ¯”è¾ƒèµ„æºçš„æ›´æ–°æ—¶é—´ï¼ˆä¸ If-Modified-Since ç›¸åï¼‰</td></tr><tr><td style="text-align:center">Max-Forwards</td><td style="text-align:center">æœ€å¤§ä¼ è¾“é€è·³æ•°</td></tr><tr><td style="text-align:center">Proxy-Authorization</td><td style="text-align:center">ä»£ç†æœåŠ¡å™¨è¦æ±‚å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯</td></tr><tr><td style="text-align:center">Range</td><td style="text-align:center">å®ä½“çš„å­—èŠ‚èŒƒå›´è¯·æ±‚</td></tr><tr><td style="text-align:center">Referer</td><td style="text-align:center">å¯¹è¯·æ±‚ä¸­ URI çš„åŸå§‹è·å–æ–¹</td></tr><tr><td style="text-align:center">TE</td><td style="text-align:center">ä¼ è¾“ç¼–ç çš„ä¼˜å…ˆçº§</td></tr><tr><td style="text-align:center">User-Agent</td><td style="text-align:center">HTTP å®¢æˆ·ç«¯ç¨‹åºçš„ä¿¡æ¯</td></tr></tbody></table><h3 id="å“åº”é¦–éƒ¨å­—æ®µ">å“åº”é¦–éƒ¨å­—æ®µ</h3><table><thead><tr><th style="text-align:center">é¦–éƒ¨å­—æ®µå</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">Accept-Ranges</td><td style="text-align:center">æ˜¯å¦æ¥å—å­—èŠ‚èŒƒå›´è¯·æ±‚</td></tr><tr><td style="text-align:center">Age</td><td style="text-align:center">æ¨ç®—èµ„æºåˆ›å»ºç»è¿‡æ—¶é—´</td></tr><tr><td style="text-align:center">ETag</td><td style="text-align:center">èµ„æºçš„åŒ¹é…ä¿¡æ¯</td></tr><tr><td style="text-align:center">Location</td><td style="text-align:center">ä»¤å®¢æˆ·ç«¯é‡å®šå‘è‡³æŒ‡å®š URI</td></tr><tr><td style="text-align:center">Proxy-Authenticate</td><td style="text-align:center">ä»£ç†æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯</td></tr><tr><td style="text-align:center">Retry-After</td><td style="text-align:center">å¯¹å†æ¬¡å‘èµ·è¯·æ±‚çš„æ—¶æœºè¦æ±‚</td></tr><tr><td style="text-align:center">Server</td><td style="text-align:center">HTTP æœåŠ¡å™¨çš„å®‰è£…ä¿¡æ¯</td></tr><tr><td style="text-align:center">Vary</td><td style="text-align:center">ä»£ç†æœåŠ¡å™¨ç¼“å­˜çš„ç®¡ç†ä¿¡æ¯</td></tr><tr><td style="text-align:center">WWW-Authenticate</td><td style="text-align:center">æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯</td></tr></tbody></table><h3 id="å®ä½“é¦–éƒ¨å­—æ®µ">å®ä½“é¦–éƒ¨å­—æ®µ</h3><table><thead><tr><th style="text-align:center">é¦–éƒ¨å­—æ®µå</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">Allow</td><td style="text-align:center">èµ„æºå¯æ”¯æŒçš„ HTTP æ–¹æ³•</td></tr><tr><td style="text-align:center">Content-Encoding</td><td style="text-align:center">å®ä½“ä¸»ä½“é€‚ç”¨çš„ç¼–ç æ–¹å¼</td></tr><tr><td style="text-align:center">Content-Language</td><td style="text-align:center">å®ä½“ä¸»ä½“çš„è‡ªç„¶è¯­è¨€</td></tr><tr><td style="text-align:center">Content-Length</td><td style="text-align:center">å®ä½“ä¸»ä½“çš„å¤§å°</td></tr><tr><td style="text-align:center">Content-Location</td><td style="text-align:center">æ›¿ä»£å¯¹åº”èµ„æºçš„ URI</td></tr><tr><td style="text-align:center">Content-MD5</td><td style="text-align:center">å®ä½“ä¸»ä½“çš„æŠ¥æ–‡æ‘˜è¦</td></tr><tr><td style="text-align:center">Content-Range</td><td style="text-align:center">å®ä½“ä¸»ä½“çš„ä½ç½®èŒƒå›´</td></tr><tr><td style="text-align:center">Content-Type</td><td style="text-align:center">å®ä½“ä¸»ä½“çš„åª’ä½“ç±»å‹</td></tr><tr><td style="text-align:center">Expires</td><td style="text-align:center">å®ä½“ä¸»ä½“è¿‡æœŸçš„æ—¥æœŸæ—¶é—´</td></tr><tr><td style="text-align:center">Last-Modified</td><td style="text-align:center">èµ„æºçš„æœ€åä¿®æ”¹æ—¥æœŸæ—¶é—´</td></tr></tbody></table><h2 id="äº”ã€å…·ä½“åº”ç”¨">äº”ã€å…·ä½“åº”ç”¨</h2><h3 id="è¿æ¥ç®¡ç†">è¿æ¥ç®¡ç†</h3><div align="center"> <img src="/pics/HTTP1_x_Connections.png" width="800"/> </div><br><h4 id="1-çŸ­è¿æ¥ä¸é•¿è¿æ¥">1. çŸ­è¿æ¥ä¸é•¿è¿æ¥</h4><p>å½“æµè§ˆå™¨è®¿é—®ä¸€ä¸ªåŒ…å«å¤šå¼ å›¾ç‰‡çš„ HTML é¡µé¢æ—¶ï¼Œé™¤äº†è¯·æ±‚è®¿é—®çš„ HTML é¡µé¢èµ„æºï¼Œè¿˜ä¼šè¯·æ±‚å›¾ç‰‡èµ„æºã€‚å¦‚æœæ¯è¿›è¡Œä¸€æ¬¡ HTTP é€šä¿¡å°±è¦æ–°å»ºä¸€ä¸ª TCP è¿æ¥ï¼Œé‚£ä¹ˆå¼€é”€ä¼šå¾ˆå¤§ã€‚</p><p>é•¿è¿æ¥åªéœ€è¦å»ºç«‹ä¸€æ¬¡ TCP è¿æ¥å°±èƒ½è¿›è¡Œå¤šæ¬¡ HTTP é€šä¿¡ã€‚</p><ul><li>ä» HTTP/1.1 å¼€å§‹é»˜è®¤æ˜¯é•¿è¿æ¥çš„ï¼Œå¦‚æœè¦æ–­å¼€è¿æ¥ï¼Œéœ€è¦ç”±å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨ç«¯æå‡ºæ–­å¼€ï¼Œä½¿ç”¨ <code>Connection : close</code>ï¼›</li><li>åœ¨ HTTP/1.1 ä¹‹å‰é»˜è®¤æ˜¯çŸ­è¿æ¥çš„ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨é•¿è¿æ¥ï¼Œåˆ™ä½¿ç”¨ <code>Connection : Keep-Alive</code>ã€‚</li></ul><h4 id="2-æµæ°´çº¿">2. æµæ°´çº¿</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHTTP è¯·æ±‚æ˜¯æŒ‰é¡ºåºå‘å‡ºçš„ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚åªæœ‰åœ¨å½“å‰è¯·æ±‚æ”¶åˆ°å“åº”ä¹‹åæ‰ä¼šè¢«å‘å‡ºã€‚ç”±äºå—åˆ°ç½‘ç»œå»¶è¿Ÿå’Œå¸¦å®½çš„é™åˆ¶ï¼Œåœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚è¢«å‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰ï¼Œå¯èƒ½éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´ã€‚</p><p>æµæ°´çº¿æ˜¯åœ¨åŒä¸€æ¡é•¿è¿æ¥ä¸Šè¿ç»­å‘å‡ºè¯·æ±‚ï¼Œè€Œä¸ç”¨ç­‰å¾…å“åº”è¿”å›ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å»¶è¿Ÿã€‚</p><h3 id="Cookie">Cookie</h3><p>HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®© HTTP åè®®å°½å¯èƒ½ç®€å•ï¼Œä½¿å¾—å®ƒèƒ½å¤Ÿå¤„ç†å¤§é‡äº‹åŠ¡ã€‚HTTP/1.1 å¼•å…¥ Cookie æ¥ä¿å­˜çŠ¶æ€ä¿¡æ¯ã€‚</p><p>Cookie æ˜¯æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®ï¼Œå®ƒä¼šåœ¨æµè§ˆå™¨ä¹‹åå‘åŒä¸€æœåŠ¡å™¨å†æ¬¡å‘èµ·è¯·æ±‚æ—¶è¢«æºå¸¦ä¸Šï¼Œç”¨äºå‘ŠçŸ¥æœåŠ¡ç«¯ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€æµè§ˆå™¨ã€‚ç”±äºä¹‹åæ¯æ¬¡è¯·æ±‚éƒ½ä¼šéœ€è¦æºå¸¦ Cookie æ•°æ®ï¼Œå› æ­¤ä¼šå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ï¼ˆå°¤å…¶æ˜¯åœ¨ç§»åŠ¨ç¯å¢ƒä¸‹ï¼‰ã€‚</p><p>Cookie æ›¾ä¸€åº¦ç”¨äºå®¢æˆ·ç«¯æ•°æ®çš„å­˜å‚¨ï¼Œå› ä¸ºå½“æ—¶å¹¶æ²¡æœ‰å…¶å®ƒåˆé€‚çš„å­˜å‚¨åŠæ³•è€Œä½œä¸ºå”¯ä¸€çš„å­˜å‚¨æ‰‹æ®µï¼Œä½†ç°åœ¨éšç€ç°ä»£æµè§ˆå™¨å¼€å§‹æ”¯æŒå„ç§å„æ ·çš„å­˜å‚¨æ–¹å¼ï¼ŒCookie æ¸æ¸è¢«æ·˜æ±°ã€‚æ–°çš„æµè§ˆå™¨ API å·²ç»å…è®¸å¼€å‘è€…ç›´æ¥å°†æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°ï¼Œå¦‚ä½¿ç”¨ Web storage APIï¼ˆæœ¬åœ°å­˜å‚¨å’Œä¼šè¯å­˜å‚¨ï¼‰æˆ– IndexedDBã€‚</p><h4 id="1-ç”¨é€”">1. ç”¨é€”</h4><ul><li>ä¼šè¯çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ã€æ¸¸æˆåˆ†æ•°æˆ–å…¶å®ƒéœ€è¦è®°å½•çš„ä¿¡æ¯ï¼‰</li><li>ä¸ªæ€§åŒ–è®¾ç½®ï¼ˆå¦‚ç”¨æˆ·è‡ªå®šä¹‰è®¾ç½®ã€ä¸»é¢˜ç­‰ï¼‰</li><li>æµè§ˆå™¨è¡Œä¸ºè·Ÿè¸ªï¼ˆå¦‚è·Ÿè¸ªåˆ†æç”¨æˆ·è¡Œä¸ºç­‰ï¼‰</li></ul><h4 id="2-åˆ›å»ºè¿‡ç¨‹">2. åˆ›å»ºè¿‡ç¨‹</h4><p>æœåŠ¡å™¨å‘é€çš„å“åº”æŠ¥æ–‡åŒ…å« Set-Cookie é¦–éƒ¨å­—æ®µï¼Œå®¢æˆ·ç«¯å¾—åˆ°å“åº”æŠ¥æ–‡åæŠŠ Cookie å†…å®¹ä¿å­˜åˆ°æµè§ˆå™¨ä¸­ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">HTTP/1.0 200 OK<br>Content-type: text/html<br>Set-Cookie: yummy_cookie=choco<br>Set-Cookie: tasty_cookie=strawberry<br><br>[page content]<br></code></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ä¹‹åå¯¹åŒä¸€ä¸ªæœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œä¼šä»æµè§ˆå™¨ä¸­å–å‡º Cookie ä¿¡æ¯å¹¶é€šè¿‡ Cookie è¯·æ±‚é¦–éƒ¨å­—æ®µå‘é€ç»™æœåŠ¡å™¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">GET /sample_page.html HTTP/1.1<br>Host: www.example.org<br>Cookie: yummy_cookie=choco; tasty_cookie=strawberry<br></code></pre></td></tr></table></figure><h4 id="3-åˆ†ç±»">3. åˆ†ç±»</h4><ul><li>ä¼šè¯æœŸ Cookieï¼šæµè§ˆå™¨å…³é—­ä¹‹åå®ƒä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»…åœ¨ä¼šè¯æœŸå†…æœ‰æ•ˆã€‚</li><li>æŒä¹…æ€§ Cookieï¼šæŒ‡å®šè¿‡æœŸæ—¶é—´ï¼ˆExpiresï¼‰æˆ–æœ‰æ•ˆæœŸï¼ˆmax-ageï¼‰ä¹‹åå°±æˆä¸ºäº†æŒä¹…æ€§çš„ Cookieã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT;<br></code></pre></td></tr></table></figure><h4 id="4-ä½œç”¨åŸŸ">4. ä½œç”¨åŸŸ</h4><p>Domain æ ‡è¯†æŒ‡å®šäº†å“ªäº›ä¸»æœºå¯ä»¥æ¥å— Cookieã€‚å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºå½“å‰æ–‡æ¡£çš„ä¸»æœºï¼ˆä¸åŒ…å«å­åŸŸåï¼‰ã€‚å¦‚æœæŒ‡å®šäº† Domainï¼Œåˆ™ä¸€èˆ¬åŒ…å«å­åŸŸåã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¾ç½® <a href="http://Domain=mozilla.org">Domain=mozilla.org</a>ï¼Œåˆ™ Cookie ä¹ŸåŒ…å«åœ¨å­åŸŸåä¸­ï¼ˆå¦‚ <a href="http://developer.mozilla.org">developer.mozilla.org</a>ï¼‰ã€‚</p><p>Path æ ‡è¯†æŒ‡å®šäº†ä¸»æœºä¸‹çš„å“ªäº›è·¯å¾„å¯ä»¥æ¥å— Cookieï¼ˆè¯¥ URL è·¯å¾„å¿…é¡»å­˜åœ¨äºè¯·æ±‚ URL ä¸­ï¼‰ã€‚ä»¥å­—ç¬¦ %x2F (â€œ/â€) ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ï¼Œå­è·¯å¾„ä¹Ÿä¼šè¢«åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œè®¾ç½® Path=/docsï¼Œåˆ™ä»¥ä¸‹åœ°å€éƒ½ä¼šåŒ¹é…ï¼š</p><ul><li>/docs</li><li>/docs/Web/</li><li>/docs/Web/HTTP</li></ul><h4 id="5-JavaScript">5. JavaScript</h4><p>æµè§ˆå™¨é€šè¿‡ <code>document.cookie</code> å±æ€§å¯åˆ›å»ºæ–°çš„ Cookieï¼Œä¹Ÿå¯é€šè¿‡è¯¥å±æ€§è®¿é—®é HttpOnly æ ‡è®°çš„ Cookieã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">document.cookie = &quot;yummy_cookie=choco&quot;;<br>document.cookie = &quot;tasty_cookie=strawberry&quot;;<br>console.log(document.cookie);<br></code></pre></td></tr></table></figure><h4 id="6-HttpOnly">6. HttpOnly</h4><p>æ ‡è®°ä¸º HttpOnly çš„ Cookie ä¸èƒ½è¢« JavaScript è„šæœ¬è°ƒç”¨ã€‚è·¨ç«™è„šæœ¬æ”»å‡» (XSS) å¸¸å¸¸ä½¿ç”¨ JavaScript çš„ <code>document.cookie</code> API çªƒå–ç”¨æˆ·çš„ Cookie ä¿¡æ¯ï¼Œå› æ­¤ä½¿ç”¨ HttpOnly æ ‡è®°å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å… XSS æ”»å‡»ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly<br></code></pre></td></tr></table></figure><h4 id="7-Secure">7. Secure</h4><p>æ ‡è®°ä¸º Secure çš„ Cookie åªèƒ½é€šè¿‡è¢« HTTPS åè®®åŠ å¯†è¿‡çš„è¯·æ±‚å‘é€ç»™æœåŠ¡ç«¯ã€‚ä½†å³ä¾¿è®¾ç½®äº† Secure æ ‡è®°ï¼Œæ•æ„Ÿä¿¡æ¯ä¹Ÿä¸åº”è¯¥é€šè¿‡ Cookie ä¼ è¾“ï¼Œå› ä¸º Cookie æœ‰å…¶å›ºæœ‰çš„ä¸å®‰å…¨æ€§ï¼ŒSecure æ ‡è®°ä¹Ÿæ— æ³•æä¾›ç¡®å®çš„å®‰å…¨ä¿éšœã€‚</p><h4 id="8-Session">8. Session</h4><p>é™¤äº†å¯ä»¥å°†ç”¨æˆ·ä¿¡æ¯é€šè¿‡ Cookie å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ Session å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„ä¿¡æ¯æ›´åŠ å®‰å…¨ã€‚</p><p>Session å¯ä»¥å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€æ•°æ®åº“æˆ–è€…å†…å­˜ä¸­ã€‚ä¹Ÿå¯ä»¥å°† Session å­˜å‚¨åœ¨ Redis è¿™ç§å†…å­˜å‹æ•°æ®åº“ä¸­ï¼Œæ•ˆç‡ä¼šæ›´é«˜ã€‚</p><p>ä½¿ç”¨ Session ç»´æŠ¤ç”¨æˆ·ç™»å½•çŠ¶æ€çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ç”¨æˆ·è¿›è¡Œç™»å½•æ—¶ï¼Œç”¨æˆ·æäº¤åŒ…å«ç”¨æˆ·åå’Œå¯†ç çš„è¡¨å•ï¼Œæ”¾å…¥ HTTP è¯·æ±‚æŠ¥æ–‡ä¸­ï¼›</li><li>æœåŠ¡å™¨éªŒè¯è¯¥ç”¨æˆ·åå’Œå¯†ç ï¼Œå¦‚æœæ­£ç¡®åˆ™æŠŠç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ° Redis ä¸­ï¼Œå®ƒåœ¨ Redis ä¸­çš„ Key ç§°ä¸º Session IDï¼›</li><li>æœåŠ¡å™¨è¿”å›çš„å“åº”æŠ¥æ–‡çš„ Set-Cookie é¦–éƒ¨å­—æ®µåŒ…å«äº†è¿™ä¸ª Session IDï¼Œå®¢æˆ·ç«¯æ”¶åˆ°å“åº”æŠ¥æ–‡ä¹‹åå°†è¯¥ Cookie å€¼å­˜å…¥æµè§ˆå™¨ä¸­ï¼›</li><li>å®¢æˆ·ç«¯ä¹‹åå¯¹åŒä¸€ä¸ªæœåŠ¡å™¨è¿›è¡Œè¯·æ±‚æ—¶ä¼šåŒ…å«è¯¥ Cookie å€¼ï¼ŒæœåŠ¡å™¨æ”¶åˆ°ä¹‹åæå–å‡º Session IDï¼Œä» Redis ä¸­å–å‡ºç”¨æˆ·ä¿¡æ¯ï¼Œç»§ç»­ä¹‹å‰çš„ä¸šåŠ¡æ“ä½œã€‚</li></ul><p>åº”è¯¥æ³¨æ„ Session ID çš„å®‰å…¨æ€§é—®é¢˜ï¼Œä¸èƒ½è®©å®ƒè¢«æ¶æ„æ”»å‡»è€…è½»æ˜“è·å–ï¼Œé‚£ä¹ˆå°±ä¸èƒ½äº§ç”Ÿä¸€ä¸ªå®¹æ˜“è¢«çŒœåˆ°çš„ Session ID å€¼ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦ç»å¸¸é‡æ–°ç”Ÿæˆ Session IDã€‚åœ¨å¯¹å®‰å…¨æ€§è¦æ±‚æé«˜çš„åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚è½¬è´¦ç­‰æ“ä½œï¼Œé™¤äº†ä½¿ç”¨ Session ç®¡ç†ç”¨æˆ·çŠ¶æ€ä¹‹å¤–ï¼Œè¿˜éœ€è¦å¯¹ç”¨æˆ·è¿›è¡Œé‡æ–°éªŒè¯ï¼Œæ¯”å¦‚é‡æ–°è¾“å…¥å¯†ç ï¼Œæˆ–è€…ä½¿ç”¨çŸ­ä¿¡éªŒè¯ç ç­‰æ–¹å¼ã€‚</p><h4 id="9-æµè§ˆå™¨ç¦ç”¨-Cookie">9. æµè§ˆå™¨ç¦ç”¨ Cookie</h4><p>æ­¤æ—¶æ— æ³•ä½¿ç”¨ Cookie æ¥ä¿å­˜ç”¨æˆ·ä¿¡æ¯ï¼Œåªèƒ½ä½¿ç”¨ Sessionã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸èƒ½å†å°† Session ID å­˜æ”¾åˆ° Cookie ä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨ URL é‡å†™æŠ€æœ¯ï¼Œå°† Session ID ä½œä¸º URL çš„å‚æ•°è¿›è¡Œä¼ é€’ã€‚</p><h4 id="10-Cookie-ä¸-Session-é€‰æ‹©">10. Cookie ä¸ Session é€‰æ‹©</h4><ul><li>Cookie åªèƒ½å­˜å‚¨ ASCII ç å­—ç¬¦ä¸²ï¼Œè€Œ Session åˆ™å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œå› æ­¤åœ¨è€ƒè™‘æ•°æ®å¤æ‚æ€§æ—¶é¦–é€‰ Sessionï¼›</li><li>Cookie å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­ï¼Œå®¹æ˜“è¢«æ¶æ„æŸ¥çœ‹ã€‚å¦‚æœéè¦å°†ä¸€äº›éšç§æ•°æ®å­˜åœ¨ Cookie ä¸­ï¼Œå¯ä»¥å°† Cookie å€¼è¿›è¡ŒåŠ å¯†ï¼Œç„¶ååœ¨æœåŠ¡å™¨è¿›è¡Œè§£å¯†ï¼›</li><li>å¯¹äºå¤§å‹ç½‘ç«™ï¼Œå¦‚æœç”¨æˆ·æ‰€æœ‰çš„ä¿¡æ¯éƒ½å­˜å‚¨åœ¨ Session ä¸­ï¼Œé‚£ä¹ˆå¼€é”€æ˜¯éå¸¸å¤§çš„ï¼Œå› æ­¤ä¸å»ºè®®å°†æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯éƒ½å­˜å‚¨åˆ° Session ä¸­ã€‚</li></ul><h3 id="ç¼“å­˜">ç¼“å­˜</h3><h4 id="1-ä¼˜ç‚¹">1. ä¼˜ç‚¹</h4><ul><li>ç¼“è§£æœåŠ¡å™¨å‹åŠ›ï¼›</li><li>é™ä½å®¢æˆ·ç«¯è·å–èµ„æºçš„å»¶è¿Ÿï¼šç¼“å­˜é€šå¸¸ä½äºå†…å­˜ä¸­ï¼Œè¯»å–ç¼“å­˜çš„é€Ÿåº¦æ›´å¿«ã€‚å¹¶ä¸”ç¼“å­˜æœåŠ¡å™¨åœ¨åœ°ç†ä½ç½®ä¸Šä¹Ÿæœ‰å¯èƒ½æ¯”æºæœåŠ¡å™¨æ¥å¾—è¿‘ï¼Œä¾‹å¦‚æµè§ˆå™¨ç¼“å­˜ã€‚</li></ul><h4 id="2-å®ç°æ–¹æ³•">2. å®ç°æ–¹æ³•</h4><ul><li>è®©ä»£ç†æœåŠ¡å™¨è¿›è¡Œç¼“å­˜ï¼›</li><li>è®©å®¢æˆ·ç«¯æµè§ˆå™¨è¿›è¡Œç¼“å­˜ã€‚</li></ul><h4 id="3-Cache-Control">3. Cache-Control</h4><p>HTTP/1.1 é€šè¿‡ Cache-Control é¦–éƒ¨å­—æ®µæ¥æ§åˆ¶ç¼“å­˜ã€‚</p><p><strong>3.1 ç¦æ­¢è¿›è¡Œç¼“å­˜</strong></p><p>no-store æŒ‡ä»¤è§„å®šä¸èƒ½å¯¹è¯·æ±‚æˆ–å“åº”çš„ä»»ä½•ä¸€éƒ¨åˆ†è¿›è¡Œç¼“å­˜ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Cache-Control: no-store<br></code></pre></td></tr></table></figure><p><strong>3.2 å¼ºåˆ¶ç¡®è®¤ç¼“å­˜</strong></p><p>no-cache æŒ‡ä»¤è§„å®šç¼“å­˜æœåŠ¡å™¨éœ€è¦å…ˆå‘æºæœåŠ¡å™¨éªŒè¯ç¼“å­˜èµ„æºçš„æœ‰æ•ˆæ€§ï¼Œåªæœ‰å½“ç¼“å­˜èµ„æºæœ‰æ•ˆæ—¶æ‰èƒ½ä½¿ç”¨è¯¥ç¼“å­˜å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚è¿›è¡Œå“åº”ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Cache-Control: no-cache<br></code></pre></td></tr></table></figure><p><strong>3.3 ç§æœ‰ç¼“å­˜å’Œå…¬å…±ç¼“å­˜</strong></p><p>private æŒ‡ä»¤è§„å®šäº†å°†èµ„æºä½œä¸ºç§æœ‰ç¼“å­˜ï¼Œåªèƒ½è¢«å•ç‹¬ç”¨æˆ·ä½¿ç”¨ï¼Œä¸€èˆ¬å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Cache-Control: private<br></code></pre></td></tr></table></figure><p>public æŒ‡ä»¤è§„å®šäº†å°†èµ„æºä½œä¸ºå…¬å…±ç¼“å­˜ï¼Œå¯ä»¥è¢«å¤šä¸ªç”¨æˆ·ä½¿ç”¨ï¼Œä¸€èˆ¬å­˜å‚¨åœ¨ä»£ç†æœåŠ¡å™¨ä¸­ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Cache-Control: public<br></code></pre></td></tr></table></figure><p><strong>3.4 ç¼“å­˜è¿‡æœŸæœºåˆ¶</strong></p><p>max-age æŒ‡ä»¤å‡ºç°åœ¨è¯·æ±‚æŠ¥æ–‡ï¼Œå¹¶ä¸”ç¼“å­˜èµ„æºçš„ç¼“å­˜æ—¶é—´å°äºè¯¥æŒ‡ä»¤æŒ‡å®šçš„æ—¶é—´ï¼Œé‚£ä¹ˆå°±èƒ½æ¥å—è¯¥ç¼“å­˜ã€‚</p><p>max-age æŒ‡ä»¤å‡ºç°åœ¨å“åº”æŠ¥æ–‡ï¼Œè¡¨ç¤ºç¼“å­˜èµ„æºåœ¨ç¼“å­˜æœåŠ¡å™¨ä¸­ä¿å­˜çš„æ—¶é—´ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Cache-Control: max-age=31536000<br></code></pre></td></tr></table></figure><p>Expires é¦–éƒ¨å­—æ®µä¹Ÿå¯ä»¥ç”¨äºå‘ŠçŸ¥ç¼“å­˜æœåŠ¡å™¨è¯¥èµ„æºä»€ä¹ˆæ—¶å€™ä¼šè¿‡æœŸã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Expires: Wed, 04 Jul 2012 08:26:05 GMT<br></code></pre></td></tr></table></figure><ul><li>åœ¨ HTTP/1.1 ä¸­ï¼Œä¼šä¼˜å…ˆå¤„ç† max-age æŒ‡ä»¤ï¼›</li><li>åœ¨ HTTP/1.0 ä¸­ï¼Œmax-age æŒ‡ä»¤ä¼šè¢«å¿½ç•¥æ‰ã€‚</li></ul><h4 id="4-ç¼“å­˜éªŒè¯">4. ç¼“å­˜éªŒè¯</h4><p>éœ€è¦å…ˆäº†è§£ ETag é¦–éƒ¨å­—æ®µçš„å«ä¹‰ï¼Œå®ƒæ˜¯èµ„æºçš„å”¯ä¸€æ ‡è¯†ã€‚URL ä¸èƒ½å”¯ä¸€è¡¨ç¤ºèµ„æºï¼Œä¾‹å¦‚ <code>http://www.google.com/</code> æœ‰ä¸­æ–‡å’Œè‹±æ–‡ä¸¤ä¸ªèµ„æºï¼Œåªæœ‰ ETag æ‰èƒ½å¯¹è¿™ä¸¤ä¸ªèµ„æºè¿›è¡Œå”¯ä¸€æ ‡è¯†ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">ETag: &quot;82e22293907ce725faf67773957acd12&quot;<br></code></pre></td></tr></table></figure><p>å¯ä»¥å°†ç¼“å­˜èµ„æºçš„ ETag å€¼æ”¾å…¥ If-None-Match é¦–éƒ¨ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯¥è¯·æ±‚åï¼Œåˆ¤æ–­ç¼“å­˜èµ„æºçš„ ETag å€¼å’Œèµ„æºçš„æœ€æ–° ETag å€¼æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™è¡¨ç¤ºç¼“å­˜èµ„æºæœ‰æ•ˆï¼Œè¿”å› 304 Not Modifiedã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">If-None-Match: &quot;82e22293907ce725faf67773957acd12&quot;<br></code></pre></td></tr></table></figure><p>Last-Modified é¦–éƒ¨å­—æ®µä¹Ÿå¯ä»¥ç”¨äºç¼“å­˜éªŒè¯ï¼Œå®ƒåŒ…å«åœ¨æºæœåŠ¡å™¨å‘é€çš„å“åº”æŠ¥æ–‡ä¸­ï¼ŒæŒ‡ç¤ºæºæœåŠ¡å™¨å¯¹èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚ä½†æ˜¯å®ƒæ˜¯ä¸€ç§å¼±æ ¡éªŒå™¨ï¼Œå› ä¸ºåªèƒ½ç²¾ç¡®åˆ°ä¸€ç§’ï¼Œæ‰€ä»¥å®ƒé€šå¸¸ä½œä¸º ETag çš„å¤‡ç”¨æ–¹æ¡ˆã€‚å¦‚æœå“åº”é¦–éƒ¨å­—æ®µé‡Œå«æœ‰è¿™ä¸ªä¿¡æ¯ï¼Œå®¢æˆ·ç«¯å¯ä»¥åœ¨åç»­çš„è¯·æ±‚ä¸­å¸¦ä¸Š If-Modified-Since æ¥éªŒè¯ç¼“å­˜ã€‚æœåŠ¡å™¨åªåœ¨æ‰€è¯·æ±‚çš„èµ„æºåœ¨ç»™å®šçš„æ—¥æœŸæ—¶é—´ä¹‹åå¯¹å†…å®¹è¿›è¡Œè¿‡ä¿®æ”¹çš„æƒ…å†µä¸‹æ‰ä¼šå°†èµ„æºè¿”å›ï¼ŒçŠ¶æ€ç ä¸º 200 OKã€‚å¦‚æœè¯·æ±‚çš„èµ„æºä»é‚£æ—¶èµ·æœªç»ä¿®æ”¹ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªä¸å¸¦æœ‰å®ä½“ä¸»ä½“çš„ 304 Not Modified å“åº”æŠ¥æ–‡ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Last-Modified: Wed, 21 Oct 2015 07:28:00 GMT<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">If-Modified-Since: Wed, 21 Oct 2015 07:28:00 GMT<br></code></pre></td></tr></table></figure><h3 id="å†…å®¹åå•†">å†…å®¹åå•†</h3><p>é€šè¿‡å†…å®¹åå•†è¿”å›æœ€åˆé€‚çš„å†…å®¹ï¼Œä¾‹å¦‚æ ¹æ®æµè§ˆå™¨çš„é»˜è®¤è¯­è¨€é€‰æ‹©è¿”å›ä¸­æ–‡ç•Œé¢è¿˜æ˜¯è‹±æ–‡ç•Œé¢ã€‚</p><h4 id="1-ç±»å‹">1. ç±»å‹</h4><p><strong>1.1 æœåŠ¡ç«¯é©±åŠ¨å‹</strong></p><p>å®¢æˆ·ç«¯è®¾ç½®ç‰¹å®šçš„ HTTP é¦–éƒ¨å­—æ®µï¼Œä¾‹å¦‚ Acceptã€Accept-Charsetã€Accept-Encodingã€Accept-Languageï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™äº›å­—æ®µè¿”å›ç‰¹å®šçš„èµ„æºã€‚</p><p>å®ƒå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>æœåŠ¡å™¨å¾ˆéš¾çŸ¥é“å®¢æˆ·ç«¯æµè§ˆå™¨çš„å…¨éƒ¨ä¿¡æ¯ï¼›</li><li>å®¢æˆ·ç«¯æä¾›çš„ä¿¡æ¯ç›¸å½“å†—é•¿ï¼ˆHTTP/2 åè®®çš„é¦–éƒ¨å‹ç¼©æœºåˆ¶ç¼“è§£äº†è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œå¹¶ä¸”å­˜åœ¨éšç§é£é™©ï¼ˆHTTP æŒ‡çº¹è¯†åˆ«æŠ€æœ¯ï¼‰ï¼›</li><li>ç»™å®šçš„èµ„æºéœ€è¦è¿”å›ä¸åŒçš„å±•ç°å½¢å¼ï¼Œå…±äº«ç¼“å­˜çš„æ•ˆç‡ä¼šé™ä½ï¼Œè€ŒæœåŠ¡å™¨ç«¯çš„å®ç°ä¼šè¶Šæ¥è¶Šå¤æ‚ã€‚</li></ul><p><strong>1.2 ä»£ç†é©±åŠ¨å‹</strong></p><p>æœåŠ¡å™¨è¿”å› 300 Multiple Choices æˆ–è€… 406 Not Acceptableï¼Œå®¢æˆ·ç«¯ä»ä¸­é€‰å‡ºæœ€åˆé€‚çš„é‚£ä¸ªèµ„æºã€‚</p><h4 id="2-Vary">2. Vary</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Vary: Accept-Language<br></code></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨å†…å®¹åå•†çš„æƒ…å†µä¸‹ï¼Œåªæœ‰å½“ç¼“å­˜æœåŠ¡å™¨ä¸­çš„ç¼“å­˜æ»¡è¶³å†…å®¹åå•†æ¡ä»¶æ—¶ï¼Œæ‰èƒ½ä½¿ç”¨è¯¥ç¼“å­˜ï¼Œå¦åˆ™åº”è¯¥å‘æºæœåŠ¡å™¨è¯·æ±‚è¯¥èµ„æºã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªåŒ…å« Accept-Language é¦–éƒ¨å­—æ®µçš„è¯·æ±‚ä¹‹åï¼ŒæºæœåŠ¡å™¨è¿”å›çš„å“åº”åŒ…å« <code>Vary: Accept-Language</code> å†…å®¹ï¼Œç¼“å­˜æœåŠ¡å™¨å¯¹è¿™ä¸ªå“åº”è¿›è¡Œç¼“å­˜ä¹‹åï¼Œåœ¨å®¢æˆ·ç«¯ä¸‹ä¸€æ¬¡è®¿é—®åŒä¸€ä¸ª URL èµ„æºï¼Œå¹¶ä¸” Accept-Language ä¸ç¼“å­˜ä¸­çš„å¯¹åº”çš„å€¼ç›¸åŒæ—¶æ‰ä¼šè¿”å›è¯¥ç¼“å­˜ã€‚</p><h3 id="å†…å®¹ç¼–ç ">å†…å®¹ç¼–ç </h3><p>å†…å®¹ç¼–ç å°†å®ä½“ä¸»ä½“è¿›è¡Œå‹ç¼©ï¼Œä»è€Œå‡å°‘ä¼ è¾“çš„æ•°æ®é‡ã€‚</p><p>å¸¸ç”¨çš„å†…å®¹ç¼–ç æœ‰ï¼šgzipã€compressã€deflateã€identityã€‚</p><p>æµè§ˆå™¨å‘é€ Accept-Encoding é¦–éƒ¨ï¼Œå…¶ä¸­åŒ…å«æœ‰å®ƒæ‰€æ”¯æŒçš„å‹ç¼©ç®—æ³•ï¼Œä»¥åŠå„è‡ªçš„ä¼˜å…ˆçº§ã€‚æœåŠ¡å™¨åˆ™ä»ä¸­é€‰æ‹©ä¸€ç§ï¼Œä½¿ç”¨è¯¥ç®—æ³•å¯¹å“åº”çš„æ¶ˆæ¯ä¸»ä½“è¿›è¡Œå‹ç¼©ï¼Œå¹¶ä¸”å‘é€ Content-Encoding é¦–éƒ¨æ¥å‘ŠçŸ¥æµè§ˆå™¨å®ƒé€‰æ‹©äº†å“ªä¸€ç§ç®—æ³•ã€‚ç”±äºè¯¥å†…å®¹åå•†è¿‡ç¨‹æ˜¯åŸºäºç¼–ç ç±»å‹æ¥é€‰æ‹©èµ„æºçš„å±•ç°å½¢å¼çš„ï¼Œå“åº”æŠ¥æ–‡çš„ Vary é¦–éƒ¨å­—æ®µè‡³å°‘è¦åŒ…å« Content-Encodingã€‚</p><h3 id="èŒƒå›´è¯·æ±‚">èŒƒå›´è¯·æ±‚</h3><p>å¦‚æœç½‘ç»œå‡ºç°ä¸­æ–­ï¼ŒæœåŠ¡å™¨åªå‘é€äº†ä¸€éƒ¨åˆ†æ•°æ®ï¼ŒèŒƒå›´è¯·æ±‚å¯ä»¥ä½¿å¾—å®¢æˆ·ç«¯åªè¯·æ±‚æœåŠ¡å™¨æœªå‘é€çš„é‚£éƒ¨åˆ†æ•°æ®ï¼Œä»è€Œé¿å…æœåŠ¡å™¨é‡æ–°å‘é€æ‰€æœ‰æ•°æ®ã€‚</p><h4 id="1-Range">1. Range</h4><p>åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­æ·»åŠ  Range é¦–éƒ¨å­—æ®µæŒ‡å®šè¯·æ±‚çš„èŒƒå›´ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">GET /z4d4kWk.jpg HTTP/1.1<br>Host: i.imgur.com<br>Range: bytes=0-1023<br></code></pre></td></tr></table></figure><p>è¯·æ±‚æˆåŠŸçš„è¯æœåŠ¡å™¨è¿”å›çš„å“åº”åŒ…å« 206 Partial Content çŠ¶æ€ç ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html">HTTP/1.1 206 Partial Content<br>Content-Range: bytes 0-1023/146515<br>Content-Length: 1024<br>...<br>(binary content)<br></code></pre></td></tr></table></figure><h4 id="2-Accept-Ranges">2. Accept-Ranges</h4><p>å“åº”é¦–éƒ¨å­—æ®µ Accept-Ranges ç”¨äºå‘ŠçŸ¥å®¢æˆ·ç«¯æ˜¯å¦èƒ½å¤„ç†èŒƒå›´è¯·æ±‚ï¼Œå¯ä»¥å¤„ç†ä½¿ç”¨ bytesï¼Œå¦åˆ™ä½¿ç”¨ noneã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Accept-Ranges: bytes<br></code></pre></td></tr></table></figure><h4 id="3-å“åº”çŠ¶æ€ç ">3. å“åº”çŠ¶æ€ç </h4><ul><li>åœ¨è¯·æ±‚æˆåŠŸçš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šè¿”å› 206 Partial Content çŠ¶æ€ç ã€‚</li><li>åœ¨è¯·æ±‚çš„èŒƒå›´è¶Šç•Œçš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šè¿”å› 416 Requested Range Not Satisfiable çŠ¶æ€ç ã€‚</li><li>åœ¨ä¸æ”¯æŒèŒƒå›´è¯·æ±‚çš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šè¿”å› 200 OK çŠ¶æ€ç ã€‚</li></ul><h3 id="åˆ†å—ä¼ è¾“ç¼–ç ">åˆ†å—ä¼ è¾“ç¼–ç </h3><p>Chunked Transfer Encodingï¼Œå¯ä»¥æŠŠæ•°æ®åˆ†å‰²æˆå¤šå—ï¼Œè®©æµè§ˆå™¨é€æ­¥æ˜¾ç¤ºé¡µé¢ã€‚</p><h3 id="å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ">å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆ</h3><p>ä¸€ä»½æŠ¥æ–‡ä¸»ä½“å†…å¯å«æœ‰å¤šç§ç±»å‹çš„å®ä½“åŒæ—¶å‘é€ï¼Œæ¯ä¸ªéƒ¨åˆ†ä¹‹é—´ç”¨ boundary å­—æ®µå®šä¹‰çš„åˆ†éš”ç¬¦è¿›è¡Œåˆ†éš”ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥æœ‰é¦–éƒ¨å­—æ®µã€‚</p><p>ä¾‹å¦‚ï¼Œä¸Šä¼ å¤šä¸ªè¡¨å•æ—¶å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html">Content-Type: multipart/form-data; boundary=AaB03x<br><br>--AaB03x<br>Content-Disposition: form-data; name=&quot;submit-name&quot;<br><br>Larry<br>--AaB03x<br>Content-Disposition: form-data; name=&quot;files&quot;; filename=&quot;file1.txt&quot;<br>Content-Type: text/plain<br><br>... contents of file1.txt ...<br>--AaB03x--<br></code></pre></td></tr></table></figure><h3 id="è™šæ‹Ÿä¸»æœº">è™šæ‹Ÿä¸»æœº</h3><p>HTTP/1.1 ä½¿ç”¨è™šæ‹Ÿä¸»æœºæŠ€æœ¯ï¼Œä½¿å¾—ä¸€å°æœåŠ¡å™¨æ‹¥æœ‰å¤šä¸ªåŸŸåï¼Œå¹¶ä¸”åœ¨é€»è¾‘ä¸Šå¯ä»¥çœ‹æˆå¤šä¸ªæœåŠ¡å™¨ã€‚</p><h3 id="é€šä¿¡æ•°æ®è½¬å‘">é€šä¿¡æ•°æ®è½¬å‘</h3><h4 id="1-ä»£ç†">1. ä»£ç†</h4><p>ä»£ç†æœåŠ¡å™¨æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶ä¸”è½¬å‘ç»™å…¶å®ƒæœåŠ¡å™¨ã€‚</p><p>ä½¿ç”¨ä»£ç†çš„ä¸»è¦ç›®çš„æ˜¯ï¼š</p><ul><li>ç¼“å­˜</li><li>è´Ÿè½½å‡è¡¡</li><li>ç½‘ç»œè®¿é—®æ§åˆ¶</li><li>è®¿é—®æ—¥å¿—è®°å½•</li></ul><p>ä»£ç†æœåŠ¡å™¨åˆ†ä¸ºæ­£å‘ä»£ç†å’Œåå‘ä»£ç†ä¸¤ç§ï¼š</p><ul><li>ç”¨æˆ·å¯Ÿè§‰å¾—åˆ°æ­£å‘ä»£ç†çš„å­˜åœ¨ã€‚</li></ul><div align="center"> <img src="/pics/a314bb79-5b18-4e63-a976-3448bffa6f1b.png" width=""/> </div><br><ul><li>è€Œåå‘ä»£ç†ä¸€èˆ¬ä½äºå†…éƒ¨ç½‘ç»œä¸­ï¼Œç”¨æˆ·å¯Ÿè§‰ä¸åˆ°ã€‚</li></ul><div align="center"> <img src="/pics/2d09a847-b854-439c-9198-b29c65810944.png" width=""/> </div><br><h4 id="2-ç½‘å…³">2. ç½‘å…³</h4><p>ä¸ä»£ç†æœåŠ¡å™¨ä¸åŒçš„æ˜¯ï¼Œç½‘å…³æœåŠ¡å™¨ä¼šå°† HTTP è½¬åŒ–ä¸ºå…¶å®ƒåè®®è¿›è¡Œé€šä¿¡ï¼Œä»è€Œè¯·æ±‚å…¶å®ƒé HTTP æœåŠ¡å™¨çš„æœåŠ¡ã€‚</p><h4 id="3-éš§é“">3. éš§é“</h4><p>ä½¿ç”¨ SSL ç­‰åŠ å¯†æ‰‹æ®µï¼Œåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€æ¡å®‰å…¨çš„é€šä¿¡çº¿è·¯ã€‚</p><h2 id="å…­ã€HTTPS">å…­ã€HTTPS</h2><p>HTTP æœ‰ä»¥ä¸‹å®‰å…¨æ€§é—®é¢˜ï¼š</p><ul><li>ä½¿ç”¨æ˜æ–‡è¿›è¡Œé€šä¿¡ï¼Œå†…å®¹å¯èƒ½ä¼šè¢«çªƒå¬ï¼›</li><li>ä¸éªŒè¯é€šä¿¡æ–¹çš„èº«ä»½ï¼Œé€šä¿¡æ–¹çš„èº«ä»½æœ‰å¯èƒ½é­é‡ä¼ªè£…ï¼›</li><li>æ— æ³•è¯æ˜æŠ¥æ–‡çš„å®Œæ•´æ€§ï¼ŒæŠ¥æ–‡æœ‰å¯èƒ½é­ç¯¡æ”¹ã€‚</li></ul><p>HTTPS å¹¶ä¸æ˜¯æ–°åè®®ï¼Œè€Œæ˜¯è®© HTTP å…ˆå’Œ SSLï¼ˆSecure Sockets Layerï¼‰é€šä¿¡ï¼Œå†ç”± SSL å’Œ TCP é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯è¯´ HTTPS ä½¿ç”¨äº†éš§é“è¿›è¡Œé€šä¿¡ã€‚</p><p>é€šè¿‡ä½¿ç”¨ SSLï¼ŒHTTPS å…·æœ‰äº†åŠ å¯†ï¼ˆé˜²çªƒå¬ï¼‰ã€è®¤è¯ï¼ˆé˜²ä¼ªè£…ï¼‰å’Œå®Œæ•´æ€§ä¿æŠ¤ï¼ˆé˜²ç¯¡æ”¹ï¼‰ã€‚</p><div align="center"> <img src="/pics/ssl-offloading.jpg" width="700"/> </div><br><h3 id="åŠ å¯†">åŠ å¯†</h3><h4 id="1-å¯¹ç§°å¯†é’¥åŠ å¯†">1. å¯¹ç§°å¯†é’¥åŠ å¯†</h4><p>å¯¹ç§°å¯†é’¥åŠ å¯†ï¼ˆSymmetric-Key Encryptionï¼‰ï¼ŒåŠ å¯†å’Œè§£å¯†ä½¿ç”¨åŒä¸€å¯†é’¥ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šè¿ç®—é€Ÿåº¦å¿«ï¼›</li><li>ç¼ºç‚¹ï¼šæ— æ³•å®‰å…¨åœ°å°†å¯†é’¥ä¼ è¾“ç»™é€šä¿¡æ–¹ã€‚</li></ul><div align="center"> <img src="/pics/7fffa4b8-b36d-471f-ad0c-a88ee763bb76.png" width="600"/> </div><br><h4 id="2-éå¯¹ç§°å¯†é’¥åŠ å¯†">2.éå¯¹ç§°å¯†é’¥åŠ å¯†</h4><p>éå¯¹ç§°å¯†é’¥åŠ å¯†ï¼Œåˆç§°å…¬å¼€å¯†é’¥åŠ å¯†ï¼ˆPublic-Key Encryptionï¼‰ï¼ŒåŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸åŒçš„å¯†é’¥ã€‚</p><p>å…¬å¼€å¯†é’¥æ‰€æœ‰äººéƒ½å¯ä»¥è·å¾—ï¼Œé€šä¿¡å‘é€æ–¹è·å¾—æ¥æ”¶æ–¹çš„å…¬å¼€å¯†é’¥ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨å…¬å¼€å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°é€šä¿¡å†…å®¹åä½¿ç”¨ç§æœ‰å¯†é’¥è§£å¯†ã€‚</p><p>éå¯¹ç§°å¯†é’¥é™¤äº†ç”¨æ¥åŠ å¯†ï¼Œè¿˜å¯ä»¥ç”¨æ¥è¿›è¡Œç­¾åã€‚å› ä¸ºç§æœ‰å¯†é’¥æ— æ³•è¢«å…¶ä»–äººè·å–ï¼Œå› æ­¤é€šä¿¡å‘é€æ–¹ä½¿ç”¨å…¶ç§æœ‰å¯†é’¥è¿›è¡Œç­¾åï¼Œé€šä¿¡æ¥æ”¶æ–¹ä½¿ç”¨å‘é€æ–¹çš„å…¬å¼€å¯†é’¥å¯¹ç­¾åè¿›è¡Œè§£å¯†ï¼Œå°±èƒ½åˆ¤æ–­è¿™ä¸ªç­¾åæ˜¯å¦æ­£ç¡®ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šå¯ä»¥æ›´å®‰å…¨åœ°å°†å…¬å¼€å¯†é’¥ä¼ è¾“ç»™é€šä¿¡å‘é€æ–¹ï¼›</li><li>ç¼ºç‚¹ï¼šè¿ç®—é€Ÿåº¦æ…¢ã€‚</li></ul><div align="center"> <img src="/pics/39ccb299-ee99-4dd1-b8b4-2f9ec9495cb4.png" width="600"/> </div><br><h4 id="3-HTTPS-é‡‡ç”¨çš„åŠ å¯†æ–¹å¼">3. HTTPS é‡‡ç”¨çš„åŠ å¯†æ–¹å¼</h4><p>ä¸Šé¢æåˆ°å¯¹ç§°å¯†é’¥åŠ å¯†æ–¹å¼çš„ä¼ è¾“æ•ˆç‡æ›´é«˜ï¼Œä½†æ˜¯æ— æ³•å®‰å…¨åœ°å°†å¯†é’¥ Secret Key ä¼ è¾“ç»™é€šä¿¡æ–¹ã€‚è€Œéå¯¹ç§°å¯†é’¥åŠ å¯†æ–¹å¼å¯ä»¥ä¿è¯ä¼ è¾“çš„å®‰å…¨æ€§ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨éå¯¹ç§°å¯†é’¥åŠ å¯†æ–¹å¼å°† Secret Key  ä¼ è¾“ç»™é€šä¿¡æ–¹ã€‚HTTPS é‡‡ç”¨æ··åˆçš„åŠ å¯†æœºåˆ¶ï¼Œæ­£æ˜¯åˆ©ç”¨äº†ä¸Šé¢æåˆ°çš„æ–¹æ¡ˆï¼š</p><ul><li>ä½¿ç”¨éå¯¹ç§°å¯†é’¥åŠ å¯†æ–¹å¼ï¼Œä¼ è¾“å¯¹ç§°å¯†é’¥åŠ å¯†æ–¹å¼æ‰€éœ€è¦çš„ Secret Keyï¼Œä»è€Œä¿è¯å®‰å…¨æ€§;</li><li>è·å–åˆ° Secret Key åï¼Œå†ä½¿ç”¨å¯¹ç§°å¯†é’¥åŠ å¯†æ–¹å¼è¿›è¡Œé€šä¿¡ï¼Œä»è€Œä¿è¯æ•ˆç‡ã€‚ï¼ˆä¸‹å›¾ä¸­çš„ Session Key å°±æ˜¯ Secret Keyï¼‰</li></ul><div align="center"> <img src="/pics/How-HTTPS-Works.png" width="600"/> </div><br><h3 id="è®¤è¯">è®¤è¯</h3><p>é€šè¿‡ä½¿ç”¨   <strong>è¯ä¹¦</strong>   æ¥å¯¹é€šä¿¡æ–¹è¿›è¡Œè®¤è¯ã€‚</p><p>æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆCAï¼ŒCertificate Authorityï¼‰æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨åŒæ–¹éƒ½å¯ä¿¡èµ–çš„ç¬¬ä¸‰æ–¹æœºæ„ã€‚</p><p>æœåŠ¡å™¨çš„è¿è¥äººå‘˜å‘ CA æå‡ºå…¬å¼€å¯†é’¥çš„ç”³è¯·ï¼ŒCA åœ¨åˆ¤æ˜æå‡ºç”³è¯·è€…çš„èº«ä»½ä¹‹åï¼Œä¼šå¯¹å·²ç”³è¯·çš„å…¬å¼€å¯†é’¥åšæ•°å­—ç­¾åï¼Œç„¶ååˆ†é…è¿™ä¸ªå·²ç­¾åçš„å…¬å¼€å¯†é’¥ï¼Œå¹¶å°†è¯¥å…¬å¼€å¯†é’¥æ”¾å…¥å…¬å¼€å¯†é’¥è¯ä¹¦åç»‘å®šåœ¨ä¸€èµ·ã€‚</p><p>è¿›è¡Œ HTTPS é€šä¿¡æ—¶ï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯å–å¾—å…¶ä¸­çš„å…¬å¼€å¯†é’¥ä¹‹åï¼Œå…ˆä½¿ç”¨æ•°å­—ç­¾åè¿›è¡ŒéªŒè¯ï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼Œå°±å¯ä»¥å¼€å§‹é€šä¿¡äº†ã€‚</p><div align="center"> <img src="/pics/2017-06-11-ca.png" width=""/> </div><br><h3 id="å®Œæ•´æ€§ä¿æŠ¤">å®Œæ•´æ€§ä¿æŠ¤</h3><p>SSL æä¾›æŠ¥æ–‡æ‘˜è¦åŠŸèƒ½æ¥è¿›è¡Œå®Œæ•´æ€§ä¿æŠ¤ã€‚</p><p>HTTP ä¹Ÿæä¾›äº† MD5 æŠ¥æ–‡æ‘˜è¦åŠŸèƒ½ï¼Œä½†ä¸æ˜¯å®‰å…¨çš„ã€‚ä¾‹å¦‚æŠ¥æ–‡å†…å®¹è¢«ç¯¡æ”¹ä¹‹åï¼ŒåŒæ—¶é‡æ–°è®¡ç®— MD5 çš„å€¼ï¼Œé€šä¿¡æ¥æ”¶æ–¹æ˜¯æ— æ³•æ„è¯†åˆ°å‘ç”Ÿäº†ç¯¡æ”¹ã€‚</p><p>HTTPS çš„æŠ¥æ–‡æ‘˜è¦åŠŸèƒ½ä¹‹æ‰€ä»¥å®‰å…¨ï¼Œæ˜¯å› ä¸ºå®ƒç»“åˆäº†åŠ å¯†å’Œè®¤è¯è¿™ä¸¤ä¸ªæ“ä½œã€‚è¯•æƒ³ä¸€ä¸‹ï¼ŒåŠ å¯†ä¹‹åçš„æŠ¥æ–‡ï¼Œé­åˆ°ç¯¡æ”¹ä¹‹åï¼Œä¹Ÿå¾ˆéš¾é‡æ–°è®¡ç®—æŠ¥æ–‡æ‘˜è¦ï¼Œå› ä¸ºæ— æ³•è½»æ˜“è·å–æ˜æ–‡ã€‚</p><h3 id="HTTPS-çš„ç¼ºç‚¹">HTTPS çš„ç¼ºç‚¹</h3><ul><li>å› ä¸ºéœ€è¦è¿›è¡ŒåŠ å¯†è§£å¯†ç­‰è¿‡ç¨‹ï¼Œå› æ­¤é€Ÿåº¦ä¼šæ›´æ…¢ï¼›</li><li>éœ€è¦æ”¯ä»˜è¯ä¹¦æˆæƒçš„é«˜é¢è´¹ç”¨ã€‚</li></ul><h2 id="ä¸ƒã€HTTP-2-0">ä¸ƒã€HTTP/2.0</h2><h3 id="HTTP-1-x-ç¼ºé™·">HTTP/1.x ç¼ºé™·</h3><p>HTTP/1.x å®ç°ç®€å•æ˜¯ä»¥ç‰ºç‰²æ€§èƒ½ä¸ºä»£ä»·çš„ï¼š</p><ul><li>å®¢æˆ·ç«¯éœ€è¦ä½¿ç”¨å¤šä¸ªè¿æ¥æ‰èƒ½å®ç°å¹¶å‘å’Œç¼©çŸ­å»¶è¿Ÿï¼›</li><li>ä¸ä¼šå‹ç¼©è¯·æ±‚å’Œå“åº”é¦–éƒ¨ï¼Œä»è€Œå¯¼è‡´ä¸å¿…è¦çš„ç½‘ç»œæµé‡ï¼›</li><li>ä¸æ”¯æŒæœ‰æ•ˆçš„èµ„æºä¼˜å…ˆçº§ï¼Œè‡´ä½¿åº•å±‚ TCP è¿æ¥çš„åˆ©ç”¨ç‡ä½ä¸‹ã€‚</li></ul><h3 id="äºŒè¿›åˆ¶åˆ†å¸§å±‚">äºŒè¿›åˆ¶åˆ†å¸§å±‚</h3><p>HTTP/2.0 å°†æŠ¥æ–‡åˆ†æˆ HEADERS å¸§å’Œ DATA å¸§ï¼Œå®ƒä»¬éƒ½æ˜¯äºŒè¿›åˆ¶æ ¼å¼çš„ã€‚</p><div align="center"> <img src="/pics/86e6a91d-a285-447a-9345-c5484b8d0c47.png" width="400"/> </div><br><p>åœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œåªä¼šæœ‰ä¸€ä¸ª TCP è¿æ¥å­˜åœ¨ï¼Œå®ƒæ‰¿è½½äº†ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµï¼ˆStreamï¼‰ã€‚</p><ul><li>ä¸€ä¸ªæ•°æ®æµï¼ˆStreamï¼‰éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦å’Œå¯é€‰çš„ä¼˜å…ˆçº§ä¿¡æ¯ï¼Œç”¨äºæ‰¿è½½åŒå‘ä¿¡æ¯ã€‚</li><li>æ¶ˆæ¯ï¼ˆMessageï¼‰æ˜¯ä¸é€»è¾‘è¯·æ±‚æˆ–å“åº”å¯¹åº”çš„å®Œæ•´çš„ä¸€ç³»åˆ—å¸§ã€‚</li><li>å¸§ï¼ˆFrameï¼‰æ˜¯æœ€å°çš„é€šä¿¡å•ä½ï¼Œæ¥è‡ªä¸åŒæ•°æ®æµçš„å¸§å¯ä»¥äº¤é”™å‘é€ï¼Œç„¶åå†æ ¹æ®æ¯ä¸ªå¸§å¤´çš„æ•°æ®æµæ ‡è¯†ç¬¦é‡æ–°ç»„è£…ã€‚</li></ul><div align="center"> <img src="/pics/af198da1-2480-4043-b07f-a3b91a88b815.png" width="600"/> </div><br><h3 id="æœåŠ¡ç«¯æ¨é€">æœåŠ¡ç«¯æ¨é€</h3><p>HTTP/2.0 åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œä¼šæŠŠç›¸å…³çš„èµ„æºä¸€èµ·å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±ä¸éœ€è¦å†æ¬¡å‘èµ·è¯·æ±‚äº†ã€‚ä¾‹å¦‚å®¢æˆ·ç«¯è¯·æ±‚ page.html é¡µé¢ï¼ŒæœåŠ¡ç«¯å°±æŠŠ script.js å’Œ style.css ç­‰ä¸ä¹‹ç›¸å…³çš„èµ„æºä¸€èµ·å‘ç»™å®¢æˆ·ç«¯ã€‚</p><div align="center"> <img src="/pics/e3f1657c-80fc-4dfa-9643-bf51abd201c6.png" width="800"/> </div><br><h3 id="é¦–éƒ¨å‹ç¼©">é¦–éƒ¨å‹ç¼©</h3><p>HTTP/1.1 çš„é¦–éƒ¨å¸¦æœ‰å¤§é‡ä¿¡æ¯ï¼Œè€Œä¸”æ¯æ¬¡éƒ½è¦é‡å¤å‘é€ã€‚</p><p>HTTP/2.0 è¦æ±‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒæ—¶ç»´æŠ¤å’Œæ›´æ–°ä¸€ä¸ªåŒ…å«ä¹‹å‰è§è¿‡çš„é¦–éƒ¨å­—æ®µè¡¨ï¼Œä»è€Œé¿å…äº†é‡å¤ä¼ è¾“ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼ŒHTTP/2.0 ä¹Ÿä½¿ç”¨ Huffman ç¼–ç å¯¹é¦–éƒ¨å­—æ®µè¿›è¡Œå‹ç¼©ã€‚</p><div align="center"> <img src="/pics/_u4E0B_u8F7D.png" width="600"/> </div><br><h2 id="å…«ã€HTTP-1-1-æ–°ç‰¹æ€§">å…«ã€HTTP/1.1 æ–°ç‰¹æ€§</h2><p>è¯¦ç»†å†…å®¹è¯·è§ä¸Šæ–‡</p><ul><li>é»˜è®¤æ˜¯é•¿è¿æ¥</li><li>æ”¯æŒæµæ°´çº¿</li><li>æ”¯æŒåŒæ—¶æ‰“å¼€å¤šä¸ª TCP è¿æ¥</li><li>æ”¯æŒè™šæ‹Ÿä¸»æœº</li><li>æ–°å¢çŠ¶æ€ç  100</li><li>æ”¯æŒåˆ†å—ä¼ è¾“ç¼–ç </li><li>æ–°å¢ç¼“å­˜å¤„ç†æŒ‡ä»¤ max-age</li></ul><h2 id="ä¹ã€GET-å’Œ-POST-æ¯”è¾ƒ">ä¹ã€GET å’Œ POST æ¯”è¾ƒ</h2><h3 id="ä½œç”¨">ä½œç”¨</h3><p>GET ç”¨äºè·å–èµ„æºï¼Œè€Œ POST ç”¨äºä¼ è¾“å®ä½“ä¸»ä½“ã€‚</p><h3 id="å‚æ•°">å‚æ•°</h3><p>GET å’Œ POST çš„è¯·æ±‚éƒ½èƒ½ä½¿ç”¨é¢å¤–çš„å‚æ•°ï¼Œä½†æ˜¯ GET çš„å‚æ•°æ˜¯ä»¥æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºç°åœ¨ URL ä¸­ï¼Œè€Œ POST çš„å‚æ•°å­˜å‚¨åœ¨å®ä½“ä¸»ä½“ä¸­ã€‚ä¸èƒ½å› ä¸º POST å‚æ•°å­˜å‚¨åœ¨å®ä½“ä¸»ä½“ä¸­å°±è®¤ä¸ºå®ƒçš„å®‰å…¨æ€§æ›´é«˜ï¼Œå› ä¸ºç…§æ ·å¯ä»¥é€šè¿‡ä¸€äº›æŠ“åŒ…å·¥å…·ï¼ˆFiddlerï¼‰æŸ¥çœ‹ã€‚</p><p>å› ä¸º URL åªæ”¯æŒ ASCII ç ï¼Œå› æ­¤ GET çš„å‚æ•°ä¸­å¦‚æœå­˜åœ¨ä¸­æ–‡ç­‰å­—ç¬¦å°±éœ€è¦å…ˆè¿›è¡Œç¼–ç ã€‚ä¾‹å¦‚ <code>ä¸­æ–‡</code> ä¼šè½¬æ¢ä¸º <code>%E4%B8%AD%E6%96%87</code>ï¼Œè€Œç©ºæ ¼ä¼šè½¬æ¢ä¸º <code>%20</code>ã€‚POST å‚æ•°æ”¯æŒæ ‡å‡†å­—ç¬¦é›†ã€‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/test/demo_form.asp?name1=value1&amp;name2=value2</span> <span class="hljs-meta">HTTP/1.1</span><br></code></pre></td></tr></table></figure><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">POST <span class="hljs-symbol">/test/demo_form.asp</span> HTTP<span class="hljs-symbol">/1.1</span><br><span class="hljs-params">Host:</span> w3schools.com<br>n<span class="hljs-attr">ame1</span><span class="hljs-operator">=</span>value1&amp;name2<span class="hljs-operator">=</span>value2<br></code></pre></td></tr></table></figure><h3 id="å®‰å…¨">å®‰å…¨</h3><p>å®‰å…¨çš„ HTTP æ–¹æ³•ä¸ä¼šæ”¹å˜æœåŠ¡å™¨çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªæ˜¯å¯è¯»çš„ã€‚</p><p>GET æ–¹æ³•æ˜¯å®‰å…¨çš„ï¼Œè€Œ POST å´ä¸æ˜¯ï¼Œå› ä¸º POST çš„ç›®çš„æ˜¯ä¼ é€å®ä½“ä¸»ä½“å†…å®¹ï¼Œè¿™ä¸ªå†…å®¹å¯èƒ½æ˜¯ç”¨æˆ·ä¸Šä¼ çš„è¡¨å•æ•°æ®ï¼Œä¸Šä¼ æˆåŠŸä¹‹åï¼ŒæœåŠ¡å™¨å¯èƒ½æŠŠè¿™ä¸ªæ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œå› æ­¤çŠ¶æ€ä¹Ÿå°±å‘ç”Ÿäº†æ”¹å˜ã€‚</p><p>å®‰å…¨çš„æ–¹æ³•é™¤äº† GET ä¹‹å¤–è¿˜æœ‰ï¼šHEADã€OPTIONSã€‚</p><p>ä¸å®‰å…¨çš„æ–¹æ³•é™¤äº† POST ä¹‹å¤–è¿˜æœ‰ PUTã€DELETEã€‚</p><h3 id="å¹‚ç­‰æ€§">å¹‚ç­‰æ€§</h3><p>å¹‚ç­‰çš„ HTTP æ–¹æ³•ï¼ŒåŒæ ·çš„è¯·æ±‚è¢«æ‰§è¡Œä¸€æ¬¡ä¸è¿ç»­æ‰§è¡Œå¤šæ¬¡çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼ŒæœåŠ¡å™¨çš„çŠ¶æ€ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ¢å¥è¯è¯´å°±æ˜¯ï¼Œå¹‚ç­‰æ–¹æ³•ä¸åº”è¯¥å…·æœ‰å‰¯ä½œç”¨ï¼ˆç»Ÿè®¡ç”¨é€”é™¤å¤–ï¼‰ã€‚</p><p>æ‰€æœ‰çš„å®‰å…¨æ–¹æ³•ä¹Ÿéƒ½æ˜¯å¹‚ç­‰çš„ã€‚</p><p>åœ¨æ­£ç¡®å®ç°çš„æ¡ä»¶ä¸‹ï¼ŒGETï¼ŒHEADï¼ŒPUT å’Œ DELETE ç­‰æ–¹æ³•éƒ½æ˜¯å¹‚ç­‰çš„ï¼Œè€Œ POST æ–¹æ³•ä¸æ˜¯ã€‚</p><p>GET /pageX HTTP/1.1 æ˜¯å¹‚ç­‰çš„ï¼Œè¿ç»­è°ƒç”¨å¤šæ¬¡ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">GET</span> /pageX HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">GET</span> /pageX HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">GET</span> /pageX HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">GET</span> /pageX HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>POST /add_row HTTP/1.1 ä¸æ˜¯å¹‚ç­‰çš„ï¼Œå¦‚æœè°ƒç”¨å¤šæ¬¡ï¼Œå°±ä¼šå¢åŠ å¤šè¡Œè®°å½•ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">POST</span> /add_row HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span>   -&gt; Adds a <span class="hljs-number">1</span>nd row<br><span class="hljs-attribute">POST</span> /add_row HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span>   -&gt; Adds a <span class="hljs-number">2</span>nd row<br><span class="hljs-attribute">POST</span> /add_row HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span>   -&gt; Adds a <span class="hljs-number">3</span>rd row<br></code></pre></td></tr></table></figure><p>DELETE /idX/delete HTTP/1.1 æ˜¯å¹‚ç­‰çš„ï¼Œå³ä½¿ä¸åŒçš„è¯·æ±‚æ¥æ”¶åˆ°çš„çŠ¶æ€ç ä¸ä¸€æ ·ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">DELETE</span> /idX/<span class="hljs-keyword">delete</span> HTTP/<span class="hljs-number">1.1</span>   -&gt; <span class="hljs-keyword">Returns</span> <span class="hljs-number">200</span> <span class="hljs-keyword">if</span> idX <span class="hljs-keyword">exists</span><br><span class="hljs-keyword">DELETE</span> /idX/<span class="hljs-keyword">delete</span> HTTP/<span class="hljs-number">1.1</span>   -&gt; <span class="hljs-keyword">Returns</span> <span class="hljs-number">404</span> <span class="hljs-keyword">as</span> it just got deleted<br><span class="hljs-keyword">DELETE</span> /idX/<span class="hljs-keyword">delete</span> HTTP/<span class="hljs-number">1.1</span>   -&gt; <span class="hljs-keyword">Returns</span> <span class="hljs-number">404</span><br></code></pre></td></tr></table></figure><h3 id="å¯ç¼“å­˜">å¯ç¼“å­˜</h3><p>å¦‚æœè¦å¯¹å“åº”è¿›è¡Œç¼“å­˜ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ul><li>è¯·æ±‚æŠ¥æ–‡çš„ HTTP æ–¹æ³•æœ¬èº«æ˜¯å¯ç¼“å­˜çš„ï¼ŒåŒ…æ‹¬ GET å’Œ HEADï¼Œä½†æ˜¯ PUT å’Œ DELETE ä¸å¯ç¼“å­˜ï¼ŒPOST åœ¨å¤šæ•°æƒ…å†µä¸‹ä¸å¯ç¼“å­˜çš„ã€‚</li><li>å“åº”æŠ¥æ–‡çš„çŠ¶æ€ç æ˜¯å¯ç¼“å­˜çš„ï¼ŒåŒ…æ‹¬ï¼š200, 203, 204, 206, 300, 301, 404, 405, 410, 414, and 501ã€‚</li><li>å“åº”æŠ¥æ–‡çš„ Cache-Control é¦–éƒ¨å­—æ®µæ²¡æœ‰æŒ‡å®šä¸è¿›è¡Œç¼“å­˜ã€‚</li></ul><h3 id="XMLHttpRequest">XMLHttpRequest</h3><p>ä¸ºäº†é˜è¿° POST å’Œ GET çš„å¦ä¸€ä¸ªåŒºåˆ«ï¼Œéœ€è¦å…ˆäº†è§£ XMLHttpRequestï¼š</p><blockquote><p>XMLHttpRequest æ˜¯ä¸€ä¸ª APIï¼Œå®ƒä¸ºå®¢æˆ·ç«¯æä¾›äº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„åŠŸèƒ½ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé€šè¿‡ URL æ¥è·å–æ•°æ®çš„ç®€å•æ–¹å¼ï¼Œå¹¶ä¸”ä¸ä¼šä½¿æ•´ä¸ªé¡µé¢åˆ·æ–°ã€‚è¿™ä½¿å¾—ç½‘é¡µåªæ›´æ–°ä¸€éƒ¨åˆ†é¡µé¢è€Œä¸ä¼šæ‰“æ‰°åˆ°ç”¨æˆ·ã€‚XMLHttpRequest åœ¨ AJAX ä¸­è¢«å¤§é‡ä½¿ç”¨ã€‚</p></blockquote><ul><li>åœ¨ä½¿ç”¨ XMLHttpRequest çš„ POST æ–¹æ³•æ—¶ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘é€ Header å†å‘é€ Dataã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨ä¼šè¿™ä¹ˆåšï¼Œä¾‹å¦‚ç«ç‹å°±ä¸ä¼šã€‚</li><li>è€Œ GET æ–¹æ³• Header å’Œ Data ä¼šä¸€èµ·å‘é€ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
            <tag> ç½‘ç»œå­¦ä¹  </tag>
            
            <tag> çŸ¥è¯†æ”¶é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤03ï¼šå°†å¤šæ¬¡æ”¶å‘æ•°æ®ä¿®æ”¹ä¸º2æ¬¡</title>
      <link href="/2022/06/22/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A403%EF%BC%9A/"/>
      <url>/2022/06/22/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A403%EF%BC%9A/</url>
      
        <content type="html"><![CDATA[<h2 id="ã€c-é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤03ï¼šå°†å¤šæ¬¡æ”¶å‘æ•°æ®ä¿®æ”¹ä¸º2æ¬¡">ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤03ï¼šå°†å¤šæ¬¡æ”¶å‘æ•°æ®ä¿®æ”¹ä¸º2æ¬¡</h2><p>è¯¦ç»†çš„è¿‡ç¨‹æˆ‘éƒ½ä»¥æ³¨é‡Šçš„å½¢å¼å†™åœ¨ä»£ç é‡Œï¼Œè¿™é‡Œå°±ä¸å•°å—¦äº†ã€‚å…¶å®ä¸ä»…ä»…æ˜¯å±€åŸŸç½‘ï¼Œå¦‚æœèƒ½å¤Ÿè·å–å…¬ç½‘ipï¼Œä¹Ÿå¯ä»¥å»ºç«‹é€šä¿¡ã€‚</p><h3 id="serverç«¯">serverç«¯</h3><p>server.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">å°†å¤šæ¬¡æ”¶å‘æ•°æ®ä¿®æ”¹ä¸º2æ¬¡</span><br><span class="hljs-comment">2022-6-22</span><br><span class="hljs-comment">Liansixin</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdio.h&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">/*ä½¿ç”¨æŠ¥æ–‡çš„æ–¹å¼è¿›è¡Œä¼ è¾“*/</span><br><span class="hljs-comment">//æ•°æ®å¤´</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGIN_RESULT,<br>CMD_LOGINOUT,<br>CMD_LOGINOUT_RESULT,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦ </span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-comment">//DataHeader header;</span><br><span class="hljs-built_in">Login</span>() <br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(Login);<br>cmd = CMD_LOGIN;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginResult);<br>cmd = CMD_LOGIN_RESULT;<br>&#125;<br><span class="hljs-type">char</span> result[<span class="hljs-number">32</span>] = <span class="hljs-string">&quot;ç™»é™†æˆåŠŸï¼ï¼&quot;</span>;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOut</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOut);<br>cmd = CMD_LOGINOUT;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOutResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOutResult);<br>cmd = CMD_LOGINOUT_RESULT;<br>&#125;<br><span class="hljs-type">char</span> result[<span class="hljs-number">32</span>] = <span class="hljs-string">&quot;æ³¨é”€æˆåŠŸï¼ï¼&quot;</span>;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//--ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPæœåŠ¡ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket  å¥—æ¥å­— ï¼ˆwindowsï¼‰ linuxä¸ŠæŒ‡çš„æ˜¯æŒ‡é’ˆ</span><br><span class="hljs-comment">/*socket(</span><br><span class="hljs-comment">_In_ int af,(è¡¨ç¤ºä»€ä¹ˆç±»å‹çš„å¥—æ¥å­—)</span><br><span class="hljs-comment">_In_ int type,(æ•°æ®æµ)</span><br><span class="hljs-comment">_In_ int protocol</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//IPV4çš„ç½‘ç»œå¥—æ¥å­— AF_INET</span><br><span class="hljs-comment">//IPV6çš„ç½‘ç»œå¥—æ¥å­— AF_INET6</span><br>SOCKET _sock =  <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, IPPROTO_TCP);<br><span class="hljs-type">char</span> msgBuf[] = <span class="hljs-string">&quot;Hello, I&#x27;m Server.\n&quot;</span>;<br><span class="hljs-comment">//2ã€bind ç»‘å®šç”¨äºæ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥çš„ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">bind(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(namelen) const struct sockaddr FAR * name,</span><br><span class="hljs-comment">_In_ int namelen</span><br><span class="hljs-comment">);</span><br><span class="hljs-comment">*/</span><br>sockaddr_in _sin = &#123;&#125;;<br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//ç«¯å£å· ç”±äºä¸»æœºå’Œç½‘ç»œçš„æ•°æ®ç±»å‹ä¸åŒ å› æ­¤éœ€è¦è¿›è¡Œè½¬æ¢ ä½¿ç”¨ host to net unsigned short</span><br>_sin.sin_addr.S_un.S_addr = INADDR_ANY;<span class="hljs-comment">//inet_addr(&quot;127.0.0.1&quot;);//æœåŠ¡å™¨çš„ipåœ°å€ INADDR_ANYæœ¬æœºæ‰€æœ‰çš„Ipåœ°å€éƒ½å¯ä»¥è®¿é—® ä¸€èˆ¬è¿™æ ·</span><br><span class="hljs-comment">//æœ‰å¯èƒ½ç»‘å®šå¤±è´¥</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">bind</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(_sin))) <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç»‘å®šç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç»‘å®šç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//3ã€listen ç›‘å¬ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">listen(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_ int backlog</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">listen</span>(_sock, <span class="hljs-number">5</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç›‘å¬ç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›‘å¬ç½‘ç»œç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//4ã€accept ç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">accept(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_Out_writes_bytes_opt_(*addrlen) struct sockaddr FAR * addr,</span><br><span class="hljs-comment">_Inout_opt_ int FAR * addrlen</span><br><span class="hljs-comment">);*/</span><br>sockaddr_in clientAddr = &#123;&#125;;<span class="hljs-comment">//å®¢æˆ·ç«¯åœ°å€</span><br><span class="hljs-type">int</span> nAddrLen = <span class="hljs-built_in">sizeof</span>(sockaddr_in);<span class="hljs-comment">//åœ°å€é•¿åº¦</span><br>SOCKET _cSocket = INVALID_SOCKET;<br><br>_cSocket = <span class="hljs-built_in">accept</span>(_sock, (sockaddr*)&amp;clientAddr, &amp;nAddrLen);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _cSocket)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œæ¥æ”¶åˆ°æ— æ•ˆå®¢æˆ·ç«¯SOCKET...\n&quot;</span>);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ–°å®¢æˆ·ç«¯åŠ å…¥: socket = %d IP = %s \n&quot;</span>, _cSocket, <span class="hljs-built_in">inet_ntoa</span>(clientAddr.sin_addr));<span class="hljs-comment">//inet_ntoaè½¬æ¢ä¸ºå¯è¯»åœ°å€</span><br><span class="hljs-comment">//ä¸€ç›´ä¸åœçš„æ”¶å‘æ•°æ®</span><br><span class="hljs-comment">//char _recvBuf[128] = &#123;&#125;;//æ¥æ”¶ç¼“å†²åŒº</span><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">//ä½¿ç”¨ç¼“å†²åŒºæ¥æ¥å—æ•°æ®</span><br><span class="hljs-type">char</span> szRecv[<span class="hljs-number">1024</span>] = &#123;&#125;;<br><span class="hljs-comment">//5 æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</span><br><span class="hljs-type">int</span> nLen = <span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;szRecv, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ‹†åŒ… å’Œ åˆ†åŒ…</span><br><span class="hljs-comment">/*æ‹†åŒ…å’Œåˆ†åŒ…çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨åœ¨æœåŠ¡ç«¯æ¥å—æ•°æ®æ—¶ä¸€æ¬¡æ¥å—æ•°æ®è¿‡é•¿ å’Œ è¿‡çŸ­çš„æƒ…å†µ*/</span><br>DataHeader* header = (DataHeader*)szRecv;<br><span class="hljs-keyword">if</span> (nLen &lt;= <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å®¢æˆ·ç«¯å·²ç»é€€å‡º, ä»»åŠ¡ç»“æŸã€‚\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-comment">//printf(&quot;æ”¶åˆ°å‘½ä»¤: %d æ•°æ®é•¿åº¦ï¼š%d\n&quot;, header.cmd, header.dataLength);</span><br><span class="hljs-comment">/*åˆ¤æ–­æ‰€æ”¶åˆ°çš„æ•°æ®*/</span> <span class="hljs-comment">//å¤šå®¢æˆ·ç«¯è¿›è¡Œæ”¶å‘æ•°æ®çš„æƒ…å†µä¸‹ä½¿ç”¨</span><br><span class="hljs-comment">//if (nLen &gt; sizeof(DataHeader))</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-keyword">switch</span> (header-&gt;cmd)<br>&#123;<br><span class="hljs-keyword">case</span> CMD_LOGIN:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>Login* login = (Login*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å‘½ä»¤:CMD_LOGIN æ•°æ®é•¿åº¦ï¼š%d userName = %s passWord = %s\n&quot;</span>, login-&gt;dataLength, login-&gt;userName, login-&gt;PassWord);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginResult ret;<br><span class="hljs-comment">//send(_cSocket, (char*)&amp;header, sizeof(DataHeader), 0);</span><br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_LOGINOUT:<br>&#123;<br><span class="hljs-built_in">recv</span>(_cSocket, szRecv + <span class="hljs-built_in">sizeof</span>(DataHeader), header-&gt;dataLength - <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>LoginOut *loginout = (LoginOut*)szRecv;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å‘½ä»¤:CMD_LOGINOUT æ•°æ®é•¿åº¦ï¼š%d userName = %s\n&quot;</span>, loginout-&gt;dataLength, loginout-&gt;userName);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginOutResult ret;<br><span class="hljs-comment">//send(_cSocket, (char*)&amp;header, sizeof(DataHeader), 0);</span><br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginOutResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>&#123;<br>DataHeader header = &#123; <span class="hljs-number">0</span>, CMD_ERROR &#125;;<br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;header, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><br>&#125;<br><span class="hljs-comment">//5ã€send å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ•°æ®</span><br><span class="hljs-comment">/*send(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(len) const char FAR * buf,</span><br><span class="hljs-comment">_In_ int len,</span><br><span class="hljs-comment">_In_ int flags</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//char msgBuf[] = &quot;Hello, I&#x27;m Server.&quot;;</span><br><span class="hljs-comment">//+1è¡¨ç¤ºå°†ç»“å°¾ç¬¦ä¸€å¹¶å‘é€è¿‡å»</span><br><span class="hljs-comment">//send(_cSocket, msgBuf, strlen(msgBuf) + 1, 0);</span><br><br><span class="hljs-comment">//6ã€å…³é—­å¥—æ¥å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡ºï¼Œä»»åŠ¡ç»“æŸ\n&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="clientç«¯">clientç«¯</h3><p>client.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">å°†å¤šæ¬¡æ”¶å‘æ•°æ®ä¿®æ”¹ä¸º2æ¬¡</span><br><span class="hljs-comment">2022-6-22</span><br><span class="hljs-comment">Liansixin</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGIN_RESULT,<br>CMD_LOGINOUT,<br>CMD_LOGINOUT_RESULT,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦</span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-comment">//DataHeader header;</span><br><span class="hljs-built_in">Login</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(Login);<br>cmd = CMD_LOGIN;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginResult);<br>cmd = CMD_LOGIN_RESULT;<br>&#125;<br><span class="hljs-type">char</span> result[<span class="hljs-number">32</span>] = <span class="hljs-string">&quot;ç™»é™†æˆåŠŸï¼ï¼&quot;</span>;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOut</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOut);<br>cmd = CMD_LOGINOUT;<br>&#125;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span> : <span class="hljs-keyword">public</span> DataHeader<br>&#123;<br><span class="hljs-built_in">LoginOutResult</span>()<br>&#123;<br>dataLength = <span class="hljs-built_in">sizeof</span>(LoginOutResult);<br>cmd = CMD_LOGINOUT_RESULT;<br>&#125;<br><span class="hljs-type">char</span> result[<span class="hljs-number">32</span>] = <span class="hljs-string">&quot;æ³¨é”€æˆåŠŸï¼ï¼&quot;</span>;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPå®¢æˆ·ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket</span><br>SOCKET _sock = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _sock)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œå»ºç«‹Socketå¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å»ºç«‹socketæˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//2ã€é“¾æ¥æœåŠ¡å™¨ connect</span><br>sockaddr_in _sin = &#123;&#125;;<span class="hljs-comment">//å°†ç»“æ„ä½“åˆå§‹åŒ–</span><br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//å°†ç½‘ç»œè½¬æ¢ä¸ºæˆæ— ç¬¦å·ç±»å‹</span><br>_sin.sin_addr.S_un.S_addr = <span class="hljs-built_in">inet_addr</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">connect</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(sockaddr_in)); <span class="hljs-comment">//ä½¿ç”¨sizeof(sockaddr_in)ç±»å‹æ›´å®‰å…¨</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == ret)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œé“¾æ¥æœåŠ¡å™¨å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾æ¥æœåŠ¡å™¨æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">//3 è¾“å…¥è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-type">char</span> cmdBuf[<span class="hljs-number">128</span>] = &#123;&#125;;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, cmdBuf);<br><br><span class="hljs-comment">//4 å¤„ç†è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;exit&quot;</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°exitå‘½ä»¤ï¼Œä»»åŠ¡ç»“æŸ\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;login&quot;</span>))<br>&#123;<br><span class="hljs-comment">// å½“åˆ›å»ºLoginè¿™ç§ç±»å‹æ—¶å°±å·²ç»å®ä¾‹åŒ–äº†cmdç­‰ä¿¡æ¯</span><br>Login login;<br><span class="hljs-built_in">strcpy</span>(login.userName, <span class="hljs-string">&quot;lsx&quot;</span>);<br><span class="hljs-built_in">strcpy</span>(login.PassWord, <span class="hljs-string">&quot;lsxyyds&quot;</span>);<br><span class="hljs-comment">//DataHeader dh = &#123;sizeof(login), CMD_LOGIN&#125;;</span><br><span class="hljs-comment">//login.userName = &quot;lsx&quot;;</span><br><span class="hljs-comment">//login.PassWord = &quot;lsxyyds&quot;;</span><br><span class="hljs-comment">//5 å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-comment">//send(_sock, (const char*)&amp;dh, sizeof(dh), 0);</span><br><span class="hljs-built_in">send</span>(_sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;login, <span class="hljs-built_in">sizeof</span>(login), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span><br><span class="hljs-comment">//DataHeader retHeader = &#123;&#125;;</span><br>LoginResult loginRet;<br><span class="hljs-comment">//recv(_sock, (char*)&amp;retHeader, sizeof(retHeader), 0);</span><br><span class="hljs-built_in">recv</span>(_sock, (<span class="hljs-type">char</span>*)&amp;loginRet, <span class="hljs-built_in">sizeof</span>(loginRet), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;LoginResult: %s\n&quot;</span>, loginRet.result);<br><br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;logout&quot;</span>))<br>&#123;<br>LoginOut logout;<br><span class="hljs-built_in">strcpy</span>(logout.userName, <span class="hljs-string">&quot;lsx&quot;</span>);<br><span class="hljs-comment">//DataHeader dh = &#123;sizeof(logout), CMD_LOGINOUT &#125;;</span><br><span class="hljs-comment">//5 å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-comment">//send(_sock, (const char*)&amp;dh, sizeof(dh), 0);</span><br><span class="hljs-built_in">send</span>(_sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;logout, <span class="hljs-built_in">sizeof</span>(logout), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span><br><span class="hljs-comment">//DataHeader retHeader = &#123;&#125;;</span><br>LoginOutResult loginoutRet;<br><span class="hljs-comment">//recv(_sock, (char*)&amp;retHeader, sizeof(retHeader), 0);</span><br><span class="hljs-built_in">recv</span>(_sock, (<span class="hljs-type">char</span>*)&amp;loginoutRet, <span class="hljs-built_in">sizeof</span>(loginoutRet), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;LogoutResult: %s\n&quot;</span>, loginoutRet.result);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸æ”¯æŒçš„å‘½ä»¤ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚\n&quot;</span>);<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//7 å…³é—­å¥—èŠ‚å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡º.\n&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æˆæœå±•ç¤º">æˆæœå±•ç¤º</h3><p><img src="/images/2022-6-22-0000123.png" alt="upload successful"></p><p>server.exeä½“éªŒï¼š<a href="/download/q0005.exe">ç‚¹æˆ‘ä¸‹è½½</a></p><p>client.exeä½“éªŒï¼š<a href="/download/q0006.exe">ç‚¹æˆ‘ä¸‹è½½</a></p>]]></content>
      
      
      <categories>
          
          <category> ä»é›¶å¼€å§‹å†™ä¸€ä¸ªèŠå¤©å®¤ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++é¡¹ç›® </tag>
            
            <tag> å±€åŸŸç½‘èŠå¤©å®¤ </tag>
            
            <tag> socketç¼–ç¨‹ </tag>
            
            <tag> å±€åŸŸç½‘æœåŠ¡å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤02ï¼šç»“æ„ä½“ç±»å‹æ•°æ®ä¼ è¾“</title>
      <link href="/2022/06/22/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A402%EF%BC%9A%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93/"/>
      <url>/2022/06/22/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A402%EF%BC%9A%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93/</url>
      
        <content type="html"><![CDATA[<h2 id="ã€c-é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤02ï¼šç»“æ„ä½“ç±»å‹æ•°æ®ä¼ è¾“">ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤02ï¼šç»“æ„ä½“ç±»å‹æ•°æ®ä¼ è¾“</h2><p>è¯¦ç»†çš„è¿‡ç¨‹æˆ‘éƒ½ä»¥æ³¨é‡Šçš„å½¢å¼å†™åœ¨ä»£ç é‡Œï¼Œè¿™é‡Œå°±ä¸å•°å—¦äº†ã€‚</p><h3 id="serverç«¯">serverç«¯</h3><p>server.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">2022-6-22</span><br><span class="hljs-comment">author:è¿æ€é‘«</span><br><span class="hljs-comment">ç»“æ„ä½“ç±»å‹æ•°æ®ä¼ è¾“serverç«¯</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdio.h&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">/*ä½¿ç”¨æŠ¥æ–‡çš„æ–¹å¼è¿›è¡Œä¼ è¾“*/</span><br><span class="hljs-comment">//æ•°æ®å¤´</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN, <br>CMD_LOGINOUT,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦</span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span> <br>&#123;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span><br>&#123;<br><span class="hljs-type">char</span> result[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span><br>&#123;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span><br>&#123;<br><span class="hljs-type">char</span> result[<span class="hljs-number">32</span>];<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//--ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPæœåŠ¡ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket  å¥—æ¥å­— ï¼ˆwindowsï¼‰ linuxä¸ŠæŒ‡çš„æ˜¯æŒ‡é’ˆ</span><br><span class="hljs-comment">/*socket(</span><br><span class="hljs-comment">_In_ int af,(è¡¨ç¤ºä»€ä¹ˆç±»å‹çš„å¥—æ¥å­—)</span><br><span class="hljs-comment">_In_ int type,(æ•°æ®æµ)</span><br><span class="hljs-comment">_In_ int protocol</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//IPV4çš„ç½‘ç»œå¥—æ¥å­— AF_INET</span><br><span class="hljs-comment">//IPV6çš„ç½‘ç»œå¥—æ¥å­— AF_INET6</span><br>SOCKET _sock =  <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, IPPROTO_TCP);<br><span class="hljs-type">char</span> msgBuf[] = <span class="hljs-string">&quot;Hello, I&#x27;m Server.&quot;</span>;<br><span class="hljs-comment">//2ã€bind ç»‘å®šç”¨äºæ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥çš„ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">bind(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(namelen) const struct sockaddr FAR * name,</span><br><span class="hljs-comment">_In_ int namelen</span><br><span class="hljs-comment">);</span><br><span class="hljs-comment">*/</span><br>sockaddr_in _sin = &#123;&#125;;<br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//ç«¯å£å· ç”±äºä¸»æœºå’Œç½‘ç»œçš„æ•°æ®ç±»å‹ä¸åŒ å› æ­¤éœ€è¦è¿›è¡Œè½¬æ¢ ä½¿ç”¨ host to net unsigned short</span><br>_sin.sin_addr.S_un.S_addr = INADDR_ANY;<span class="hljs-comment">//inet_addr(&quot;127.0.0.1&quot;);//æœåŠ¡å™¨çš„ipåœ°å€ INADDR_ANYæœ¬æœºæ‰€æœ‰çš„Ipåœ°å€éƒ½å¯ä»¥è®¿é—® ä¸€èˆ¬è¿™æ ·</span><br><span class="hljs-comment">//æœ‰å¯èƒ½ç»‘å®šå¤±è´¥</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">bind</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(_sin))) <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç»‘å®šç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç»‘å®šç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//3ã€listen ç›‘å¬ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">listen(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_ int backlog</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">listen</span>(_sock, <span class="hljs-number">5</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç›‘å¬ç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›‘å¬ç½‘ç»œç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//4ã€accept ç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">accept(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_Out_writes_bytes_opt_(*addrlen) struct sockaddr FAR * addr,</span><br><span class="hljs-comment">_Inout_opt_ int FAR * addrlen</span><br><span class="hljs-comment">);*/</span><br>sockaddr_in clientAddr = &#123;&#125;;<span class="hljs-comment">//å®¢æˆ·ç«¯åœ°å€</span><br><span class="hljs-type">int</span> nAddrLen = <span class="hljs-built_in">sizeof</span>(sockaddr_in);<span class="hljs-comment">//åœ°å€é•¿åº¦</span><br>SOCKET _cSocket = INVALID_SOCKET;<br><br>_cSocket = <span class="hljs-built_in">accept</span>(_sock, (sockaddr*)&amp;clientAddr, &amp;nAddrLen);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _cSocket)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œæ¥æ”¶åˆ°æ— æ•ˆå®¢æˆ·ç«¯SOCKET...\n&quot;</span>);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ–°å®¢æˆ·ç«¯åŠ å…¥: socket = %d IP = %s \n&quot;</span>, _cSocket, <span class="hljs-built_in">inet_ntoa</span>(clientAddr.sin_addr));<span class="hljs-comment">//inet_ntoaè½¬æ¢ä¸ºå¯è¯»åœ°å€</span><br><span class="hljs-comment">//ä¸€ç›´ä¸åœçš„æ”¶å‘æ•°æ®</span><br><span class="hljs-comment">//char _recvBuf[128] = &#123;&#125;;//æ¥æ”¶ç¼“å†²åŒº</span><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">//ä½¿ç”¨headeræ¥æ¥å—å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„å‘½ä»¤æ•°æ® é€šè¿‡å‘½ä»¤åˆ¤æ–­å®¢æˆ·ç«¯çš„éœ€æ±‚</span><br>DataHeader header = &#123;&#125;;<br><span class="hljs-comment">//5 æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</span><br><span class="hljs-type">int</span> nLen = <span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;header, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (nLen &lt;= <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å®¢æˆ·ç«¯å·²ç»é€€å‡º, ä»»åŠ¡ç»“æŸã€‚&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å‘½ä»¤: %d æ•°æ®é•¿åº¦ï¼š%d\n&quot;</span>, header.cmd, header.dataLength);<br><span class="hljs-keyword">switch</span> (header.cmd)<br>&#123;<br><span class="hljs-keyword">case</span> CMD_LOGIN:<br>&#123;<br>Login login = &#123;&#125;;<br><span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;login, <span class="hljs-built_in">sizeof</span>(login), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginResult ret = &#123; <span class="hljs-string">&quot;ç™»å½•æˆåŠŸï¼ï¼ï¼&quot;</span>&#125;;<br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;header, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> CMD_LOGINOUT:<br>&#123;<br>LoginOut loginout = &#123;&#125;;<br><span class="hljs-built_in">recv</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;loginout, <span class="hljs-built_in">sizeof</span>(LoginOut), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//å¿½ç•¥åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®çš„è¿‡ç¨‹</span><br>LoginOutResult ret = &#123; <span class="hljs-string">&quot;æ³¨é”€æˆåŠŸï¼ï¼&quot;</span>&#125;;<br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;header, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;ret, <span class="hljs-built_in">sizeof</span>(LoginOutResult), <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>header.cmd = CMD_ERROR;<br>header.dataLength = <span class="hljs-number">0</span>;<br><span class="hljs-built_in">send</span>(_cSocket, (<span class="hljs-type">char</span>*)&amp;header, <span class="hljs-built_in">sizeof</span>(DataHeader), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><br>&#125;<br><span class="hljs-comment">//5ã€send å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ•°æ®</span><br><span class="hljs-comment">/*send(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(len) const char FAR * buf,</span><br><span class="hljs-comment">_In_ int len,</span><br><span class="hljs-comment">_In_ int flags</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//char msgBuf[] = &quot;Hello, I&#x27;m Server.&quot;;</span><br><span class="hljs-comment">//+1è¡¨ç¤ºå°†ç»“å°¾ç¬¦ä¸€å¹¶å‘é€è¿‡å»</span><br><span class="hljs-comment">//send(_cSocket, msgBuf, strlen(msgBuf) + 1, 0);</span><br><br><span class="hljs-comment">//6ã€å…³é—­å¥—æ¥å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡ºï¼Œä»»åŠ¡ç»“æŸ&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br>cout &lt;&lt; <span class="hljs-string">&quot;hello...&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="clientç«¯">clientç«¯</h3><p>client.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">2022-6-22</span><br><span class="hljs-comment">author:è¿æ€é‘«</span><br><span class="hljs-comment">ç»“æ„ä½“ç±»å‹æ•°æ®ä¼ è¾“clientç«¯</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">CMD</span><br>&#123;<br>CMD_LOGIN,<br>CMD_LOGINOUT,<br>CMD_ERROR<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DataHeader</span><br>&#123;<br><span class="hljs-type">short</span> dataLength;<span class="hljs-comment">//æ•°æ®é•¿åº¦</span><br><span class="hljs-type">short</span> cmd;<span class="hljs-comment">//å‘½ä»¤</span><br>&#125;;<br><span class="hljs-comment">//DataPackage</span><br><span class="hljs-comment">//åŒ…ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Login</span><br>&#123;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br><span class="hljs-type">char</span> PassWord[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginResult</span><br>&#123;<br><span class="hljs-type">char</span> result[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOut</span><br>&#123;<br><span class="hljs-type">char</span> userName[<span class="hljs-number">32</span>];<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">LoginOutResult</span><br>&#123;<br><span class="hljs-type">char</span> result[<span class="hljs-number">32</span>];<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPå®¢æˆ·ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket</span><br>SOCKET _sock = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _sock)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œå»ºç«‹Socketå¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å»ºç«‹socketæˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//2ã€é“¾æ¥æœåŠ¡å™¨ connect</span><br>sockaddr_in _sin = &#123;&#125;;<span class="hljs-comment">//å°†ç»“æ„ä½“åˆå§‹åŒ–</span><br>_sin.sin_family = AF_INET;<br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//å°†ç½‘ç»œè½¬æ¢ä¸ºæˆæ— ç¬¦å·ç±»å‹</span><br>_sin.sin_addr.S_un.S_addr = <span class="hljs-built_in">inet_addr</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">connect</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(sockaddr_in)); <span class="hljs-comment">//ä½¿ç”¨sizeof(sockaddr_in)ç±»å‹æ›´å®‰å…¨</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == ret)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œé“¾æ¥æœåŠ¡å™¨å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾æ¥æœåŠ¡å™¨æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">//3 è¾“å…¥è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-type">char</span> cmdBuf[<span class="hljs-number">128</span>] = &#123;&#125;;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, cmdBuf);<br><br><span class="hljs-comment">//4 å¤„ç†è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;exit&quot;</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°exitå‘½ä»¤ï¼Œä»»åŠ¡ç»“æŸ&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;login&quot;</span>))<br>&#123;<br>Login login = &#123; <span class="hljs-string">&quot;lsx&quot;</span>, <span class="hljs-string">&quot;lsxyyds&quot;</span> &#125;;<br>DataHeader dh = &#123;<span class="hljs-built_in">sizeof</span>(login), CMD_LOGIN&#125;;<br><span class="hljs-comment">//login.userName = &quot;lsx&quot;;</span><br><span class="hljs-comment">//login.PassWord = &quot;lsxyyds&quot;;</span><br><span class="hljs-comment">//5 å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-built_in">send</span>(_sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;dh, <span class="hljs-built_in">sizeof</span>(dh), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">send</span>(_sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;login, <span class="hljs-built_in">sizeof</span>(login), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span><br>DataHeader retHeader = &#123;&#125;;<br>LoginResult loginRet = &#123;&#125;;<br><span class="hljs-built_in">recv</span>(_sock, (<span class="hljs-type">char</span>*)&amp;retHeader, <span class="hljs-built_in">sizeof</span>(retHeader), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">recv</span>(_sock, (<span class="hljs-type">char</span>*)&amp;loginRet, <span class="hljs-built_in">sizeof</span>(loginRet), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//printf(&quot;LoginResult: %s&quot;, loginRet.result);</span><br>cout &lt;&lt; <span class="hljs-string">&quot;LoginResult:&quot;</span> &lt;&lt; loginRet.result &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;logout&quot;</span>))<br>&#123;<br>LoginOut logout = &#123;<span class="hljs-string">&quot;lsx&quot;</span>&#125;;<br>DataHeader dh = &#123;<span class="hljs-built_in">sizeof</span>(logout), CMD_LOGINOUT &#125;;<br><span class="hljs-comment">//5 å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-built_in">send</span>(_sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;dh, <span class="hljs-built_in">sizeof</span>(dh), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">send</span>(_sock, (<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;logout, <span class="hljs-built_in">sizeof</span>(logout), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span><br>DataHeader retHeader = &#123;&#125;;<br>LoginOutResult loginoutRet = &#123;&#125;;<br><span class="hljs-built_in">recv</span>(_sock, (<span class="hljs-type">char</span>*)&amp;retHeader, <span class="hljs-built_in">sizeof</span>(retHeader), <span class="hljs-number">0</span>);<br><span class="hljs-built_in">recv</span>(_sock, (<span class="hljs-type">char</span>*)&amp;loginoutRet, <span class="hljs-built_in">sizeof</span>(loginoutRet), <span class="hljs-number">0</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;LogoutResult:&quot;</span> &lt;&lt; loginoutRet.result &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸æ”¯æŒçš„å‘½ä»¤ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚\n&quot;</span>);<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//7 å…³é—­å¥—èŠ‚å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡º.&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æˆæœå±•ç¤º">æˆæœå±•ç¤º</h3><p><img src="/images/2022-6-22-0001.png" alt="upload successful"></p><p>server.exeä½“éªŒï¼š<a href="/download/q0003.exe">ç‚¹æˆ‘ä¸‹è½½</a></p><p>client.exeä½“éªŒï¼š<a href="/download/q0004.exe">ç‚¹æˆ‘ä¸‹è½½</a></p>]]></content>
      
      
      <categories>
          
          <category> ä»é›¶å¼€å§‹å†™ä¸€ä¸ªèŠå¤©å®¤ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++é¡¹ç›® </tag>
            
            <tag> å±€åŸŸç½‘èŠå¤©å®¤ </tag>
            
            <tag> socketç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤01ï¼šç®€å•æ•°æ®ç½‘ç»œä¼ è¾“</title>
      <link href="/2022/06/21/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A401/"/>
      <url>/2022/06/21/%E3%80%90c-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E5%B1%80%E5%9F%9F%E7%BD%91%E8%81%8A%E5%A4%A9%E5%AE%A401/</url>
      
        <content type="html"><![CDATA[<h2 id="ã€c-é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤01ï¼šç®€å•æ•°æ®ç½‘ç»œä¼ è¾“">ã€c++é¡¹ç›®ã€‘ä»é›¶å¼€å§‹å†™ä¸€ä¸ªå±€åŸŸç½‘èŠå¤©å®¤01ï¼šç®€å•æ•°æ®ç½‘ç»œä¼ è¾“</h2><p>è¯¦ç»†çš„è¿‡ç¨‹æˆ‘éƒ½ä»¥æ³¨é‡Šçš„å½¢å¼å†™åœ¨ä»£ç é‡Œï¼Œè¿™é‡Œå°±ä¸å•°å—¦äº†ã€‚</p><h3 id="serverç«¯">serverç«¯</h3><p>server.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdio.h&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">//åŠ å…¥windowsçš„é™æ€é“¾æ¥åº“--åœ¨windowsé‡Œé¢æ”¯æŒè¿™ç§å†™æ³•</span><br><span class="hljs-comment">//æœ€å¥½è¿˜æ˜¯åœ¨å±æ€§è®¾ç½®ä¸­å»åŠ å…¥ws2_32.lib</span><br><span class="hljs-comment">//#pragma comment(lib, &quot;ws2_32.lib&quot;)</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">socketç¼–ç¨‹ä¸­ï¼š</span><br><span class="hljs-comment">å£°æ˜è°ƒç”¨ä¸åŒçš„Winsockç‰ˆæœ¬ã€‚ä¾‹å¦‚MAKEWORD(2,2)å°±æ˜¯è°ƒç”¨2.2ç‰ˆï¼ŒMAKEWORD(1,1)å°±æ˜¯è°ƒç”¨1.1ç‰ˆã€‚</span><br><span class="hljs-comment">ä¸åŒç‰ˆæœ¬æ˜¯æœ‰åŒºåˆ«çš„ï¼Œä¾‹å¦‚1.1ç‰ˆåªæ”¯æŒTCP/IPåè®®ï¼Œè€Œ2.0ç‰ˆå¯ä»¥æ”¯æŒå¤šåè®®ã€‚2.0ç‰ˆæœ‰è‰¯å¥½çš„å‘</span><br><span class="hljs-comment">åå…¼å®¹æ€§ï¼Œä»»ä½•ä½¿ç”¨1.1ç‰ˆçš„æºä»£ç ã€äºŒè¿›åˆ¶æ–‡ä»¶ã€åº”ç”¨ç¨‹åºéƒ½å¯ä»¥ä¸åŠ ä¿®æ”¹åœ°åœ¨2.0è§„èŒƒä¸‹ä½¿ç”¨ã€‚</span><br><span class="hljs-comment">æ­¤å¤–winsock 2.0æ”¯æŒå¼‚æ­¥ 1.1ä¸æ”¯æŒå¼‚æ­¥.</span><br><span class="hljs-comment">*/</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br><span class="hljs-comment">/*WSADATAï¼Œä¸€ç§æ•°æ®ç»“æ„ã€‚è¿™ä¸ªç»“æ„è¢«ç”¨æ¥å­˜å‚¨è¢«WSAStartupå‡½æ•°è°ƒç”¨åè¿”å›çš„Windows Socketsæ•°æ®ã€‚</span><br><span class="hljs-comment">å®ƒåŒ…å«Winsock.dllæ‰§è¡Œçš„æ•°æ®ã€‚*/</span><br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•° å¯åŠ¨æœåŠ¡å™¨</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//--ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPæœåŠ¡ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket  å¥—æ¥å­— ï¼ˆwindowsï¼‰ linuxä¸ŠæŒ‡çš„æ˜¯æŒ‡é’ˆ</span><br><span class="hljs-comment">/*socket(</span><br><span class="hljs-comment">_In_ int af,(è¡¨ç¤ºä»€ä¹ˆç±»å‹çš„å¥—æ¥å­—)</span><br><span class="hljs-comment">_In_ int type,(æ•°æ®æµ)</span><br><span class="hljs-comment">_In_ int protocol</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//IPV4çš„ç½‘ç»œå¥—æ¥å­— AF_INET</span><br><span class="hljs-comment">//IPV6çš„ç½‘ç»œå¥—æ¥å­— AF_INET6</span><br><span class="hljs-comment">//SOCKET _sock =  socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);</span><br>SOCKET _sock =  <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br><span class="hljs-comment">//IPPROTO_TCP ä½¿ç”¨TCPåè®®,å¦‚æœç½®0å®ƒä¼šè‡ªå·±é€‰æ‹©ã€‚</span><br><br><span class="hljs-comment">//2ã€bind ç»‘å®šç”¨äºæ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥çš„ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">bind(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(namelen) const struct sockaddr FAR * name,</span><br><span class="hljs-comment">_In_ int namelen</span><br><span class="hljs-comment">);</span><br><span class="hljs-comment">*/</span><br>sockaddr_in _sin = &#123;&#125;;<br>_sin.sin_family = AF_INET;<span class="hljs-comment">//ipv4</span><br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//ç«¯å£å· ç”±äºä¸»æœºå’Œç½‘ç»œçš„æ•°æ®ç±»å‹ä¸åŒ å› æ­¤éœ€è¦è¿›è¡Œè½¬æ¢ ä½¿ç”¨ host to net unsigned short</span><br>_sin.sin_addr.S_un.S_addr = INADDR_ANY;<span class="hljs-comment">//inet_addr(&quot;127.0.0.1&quot;);//æœåŠ¡å™¨çš„ipåœ°å€ INADDR_ANYæœ¬æœºæ‰€æœ‰çš„Ipåœ°å€éƒ½å¯ä»¥è®¿é—® ä¸€èˆ¬è¿™æ ·</span><br><span class="hljs-comment">//æœ‰å¯èƒ½ç»‘å®šå¤±è´¥</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">bind</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(_sin))) <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç»‘å®šç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç»‘å®šç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//3ã€listen ç›‘å¬ç½‘ç»œç«¯å£</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">listen(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_ int backlog</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//5 ä»£è¡¨çš„æ˜¯æ¥å£æœ€å¤š5ä¸ªå®¢æˆ·ç«¯å¯ä¸æœåŠ¡å™¨è¿›è¡Œè¿æ¥</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == <span class="hljs-built_in">listen</span>(_sock, <span class="hljs-number">5</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œç›‘å¬ç½‘ç»œç«¯å£å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›‘å¬ç½‘ç»œç«¯å£æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//4ã€accept ç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯é“¾æ¥</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">accept(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_Out_writes_bytes_opt_(*addrlen) struct sockaddr FAR * addr,</span><br><span class="hljs-comment">_Inout_opt_ int FAR * addrlen</span><br><span class="hljs-comment">);*/</span><br>sockaddr_in clientAddr = &#123;&#125;;<span class="hljs-comment">//å®¢æˆ·ç«¯åœ°å€</span><br><span class="hljs-type">int</span> nAddrLen = <span class="hljs-built_in">sizeof</span>(sockaddr_in);<span class="hljs-comment">//åœ°å€é•¿åº¦</span><br>SOCKET _cSocket = INVALID_SOCKET;<br><span class="hljs-comment">//char msgBuf[] = &quot;Hello, I&#x27;m Server.&quot;;</span><br>_cSocket = <span class="hljs-built_in">accept</span>(_sock, (sockaddr*)&amp;clientAddr, &amp;nAddrLen);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _cSocket)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œæ¥æ”¶åˆ°æ— æ•ˆå®¢æˆ·ç«¯SOCKET...\n&quot;</span>);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ–°å®¢æˆ·ç«¯åŠ å…¥: socket = %d IP = %s \n&quot;</span>, _cSocket, <span class="hljs-built_in">inet_ntoa</span>(clientAddr.sin_addr));<span class="hljs-comment">//inet_ntoaè½¬æ¢ä¸ºå¯è¯»åœ°å€</span><br><span class="hljs-comment">//ä¸€ç›´ä¸åœçš„æ”¶å‘æ•°æ®</span><br><span class="hljs-type">char</span> _recvBuf[<span class="hljs-number">128</span>] = &#123;&#125;;<span class="hljs-comment">//æ¥æ”¶ç¼“å†²åŒº</span><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">//5 æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</span><br><span class="hljs-comment">/*recv(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_Out_writes_bytes_to_(len, return) __out_data_source(NETWORK) char FAR * buf,</span><br><span class="hljs-comment">_In_ int len,</span><br><span class="hljs-comment">_In_ int flags</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//ä»¥128é•¿åº¦æ¥æ¥å—</span><br><span class="hljs-type">int</span> nLen = <span class="hljs-built_in">recv</span>(_cSocket, _recvBuf, <span class="hljs-number">128</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (nLen &lt;= <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å®¢æˆ·ç«¯å·²ç»é€€å‡º, ä»»åŠ¡ç»“æŸã€‚&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°å‘½ä»¤: %s\n&quot;</span>, _recvBuf);<br><span class="hljs-comment">//6 å¤„ç†è¯·æ±‚</span><br><span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(_recvBuf, <span class="hljs-string">&quot;getname&quot;</span>))<br>&#123;<br><span class="hljs-comment">//7 send å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ•°æ®</span><br><span class="hljs-type">char</span> msgBuf[] = <span class="hljs-string">&quot;æ— æ‰€ä¸èƒ½çš„å°é‘«ï¼&quot;</span>;<br><span class="hljs-comment">//åŠ 1çš„ç›®çš„æ˜¯ä¸ºäº†å°†å­—ç¬¦ä¸²çš„æœ«å°¾ä¸€å¹¶åŠ å…¥ æ–¹ä¾¿å®¢æˆ·ç«¯è¿›è¡Œå­—ç¬¦ä¸²é•¿åº¦çš„è®¡ç®—</span><br><span class="hljs-built_in">send</span>(_cSocket, msgBuf, <span class="hljs-built_in">strlen</span>(msgBuf) + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(_recvBuf, <span class="hljs-string">&quot;getage&quot;</span>))<br>&#123;<br><span class="hljs-comment">//7 send å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ•°æ®</span><br><span class="hljs-type">char</span> msgBuf[] = <span class="hljs-string">&quot;23&quot;</span>;<br><span class="hljs-built_in">send</span>(_cSocket, msgBuf, <span class="hljs-built_in">strlen</span>(msgBuf) + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-comment">//7 send å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ•°æ®</span><br><span class="hljs-type">char</span> msgBuf[] = <span class="hljs-string">&quot;ä½ ä¸ªå‚»ç‹—ï¼ï¼è¾“å…¥é”™äº†&quot;</span>;<br><span class="hljs-built_in">send</span>(_cSocket, msgBuf, <span class="hljs-built_in">strlen</span>(msgBuf) + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>&#125;<br>&#125;<br><br><br><span class="hljs-comment">//5ã€send å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ•°æ®</span><br><span class="hljs-comment">/*send(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(len) const char FAR * buf,</span><br><span class="hljs-comment">_In_ int len,</span><br><span class="hljs-comment">_In_ int flags</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//char msgBuf[] = &quot;Hello, I&#x27;m Server.&quot;;</span><br><span class="hljs-comment">//+1è¡¨ç¤ºå°†ç»“å°¾ç¬¦ä¸€å¹¶å‘é€è¿‡å»</span><br><span class="hljs-comment">//send(_cSocket, msgBuf, strlen(msgBuf) + 1, 0);</span><br><br><span class="hljs-comment">//6ã€å…³é—­å¥—æ¥å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡ºï¼Œä»»åŠ¡ç»“æŸ&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br>cout &lt;&lt; <span class="hljs-string">&quot;hello...&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="clientç«¯">clientç«¯</h3><p>client.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">define</span> WIN32_LEAN_AND_MEAN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _WINSOCK_DEPRECATED_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;iostream&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">//åŠ å…¥windowsçš„é™æ€é“¾æ¥åº“--åœ¨windowsé‡Œé¢æ”¯æŒè¿™ç§å†™æ³•</span><br><span class="hljs-comment">//æœ€å¥½è¿˜æ˜¯åœ¨å±æ€§è®¾ç½®ä¸­å»åŠ å…¥ws2_32.lib</span><br><span class="hljs-comment">//#pragma comment(lib, &quot;ws2_32.lib&quot;)</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*å¯åŠ¨Windows socket 2.xç¯å¢ƒ*/</span><br><span class="hljs-comment">//ç‰ˆæœ¬å·</span><br>WORD ver = <span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br>WSADATA dat;<br><span class="hljs-comment">//socketç½‘ç»œç¼–ç¨‹å¯åŠ¨å‡½æ•°</span><br><span class="hljs-built_in">WSAStartup</span>(ver, &amp;dat);<br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-comment">//ç”¨Socket APIå»ºç«‹ç®€æ˜“TCPå®¢æˆ·ç«¯</span><br><span class="hljs-comment">//1ã€å»ºç«‹ä¸€ä¸ªsocket</span><br>SOCKET _sock = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (INVALID_SOCKET == _sock)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œå»ºç«‹Socketå¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å»ºç«‹socketæˆåŠŸ...\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//2ã€é“¾æ¥æœåŠ¡å™¨ connect</span><br>sockaddr_in _sin = &#123;&#125;;<span class="hljs-comment">//å°†ç»“æ„ä½“åˆå§‹åŒ–</span><br>_sin.sin_family = AF_INET;<br>_sin.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">4567</span>);<span class="hljs-comment">//å°†ç½‘ç»œè½¬æ¢ä¸ºæˆæ— ç¬¦å·ç±»å‹</span><br>_sin.sin_addr.S_un.S_addr = <span class="hljs-built_in">inet_addr</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">connect</span>(_sock, (sockaddr*)&amp;_sin, <span class="hljs-built_in">sizeof</span>(sockaddr_in)); <span class="hljs-comment">//ä½¿ç”¨sizeof(sockaddr_in)ç±»å‹æ›´å®‰å…¨</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == ret)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é”™è¯¯ï¼Œé“¾æ¥æœåŠ¡å™¨å¤±è´¥...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾æ¥æœåŠ¡å™¨æˆåŠŸ...\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">//3 è¾“å…¥è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-type">char</span> cmdBuf[<span class="hljs-number">128</span>] = &#123;&#125;;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, cmdBuf);<br><br><span class="hljs-comment">//4 å¤„ç†è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">strcmp</span>(cmdBuf, <span class="hljs-string">&quot;exit&quot;</span>))<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ”¶åˆ°exitå‘½ä»¤ï¼Œä»»åŠ¡ç»“æŸ&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-comment">/*send(</span><br><span class="hljs-comment">_In_ SOCKET s,</span><br><span class="hljs-comment">_In_reads_bytes_(len) const char FAR * buf,</span><br><span class="hljs-comment">_In_ int len,</span><br><span class="hljs-comment">_In_ int flags</span><br><span class="hljs-comment">);*/</span><br><span class="hljs-comment">//5 å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‘½ä»¤</span><br><span class="hljs-built_in">send</span>(_sock, cmdBuf, <span class="hljs-built_in">strlen</span>(cmdBuf) + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-comment">//6 æ¥æ”¶æœåŠ¡å™¨ä¿¡æ¯ recv</span><br><span class="hljs-type">char</span> recvBuf[<span class="hljs-number">128</span>] = &#123;&#125;;<br><span class="hljs-type">int</span> nlen = <span class="hljs-built_in">recv</span>(_sock, recvBuf, <span class="hljs-number">128</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (nlen &gt; <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ¥æ”¶åˆ°æ•°æ®: %s\n&quot;</span>, recvBuf);<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//7 å…³é—­å¥—èŠ‚å­—closesocket</span><br><span class="hljs-built_in">closesocket</span>(_sock);<br><br><span class="hljs-comment">//---------------------------</span><br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·²é€€å‡º.&quot;</span>);<br><span class="hljs-built_in">getchar</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æˆæœå±•ç¤º">æˆæœå±•ç¤º</h3><p><img src="/images/2022-6-21-0001.png" alt="overwrote existing file"></p><p>server.exeä½“éªŒï¼š<a href="/download/q0002.exe">ç‚¹æˆ‘ä¸‹è½½</a></p><p>client.exeä½“éªŒï¼š<a href="/download/q0001.exe">ç‚¹æˆ‘ä¸‹è½½</a></p>]]></content>
      
      
      <categories>
          
          <category> ä»é›¶å¼€å§‹å†™ä¸€ä¸ªèŠå¤©å®¤ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++é¡¹ç›® </tag>
            
            <tag> socket </tag>
            
            <tag> å±€åŸŸç½‘èŠå¤©å®¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°05: send å’Œ recv å‡½æ•°åœ¨é˜»å¡å’Œéé˜»å¡æ¨¡å¼ä¸‹çš„è¡Œä¸º</title>
      <link href="/2022/06/21/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B005%EF%BC%9A-send-%E5%92%8C-recv-%E5%87%BD%E6%95%B0%E5%9C%A8%E9%98%BB%E5%A1%9E%E5%92%8C%E9%9D%9E%E9%98%BB%E5%A1%9E%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%9A%84%E8%A1%8C%E4%B8%BA/"/>
      <url>/2022/06/21/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B005%EF%BC%9A-send-%E5%92%8C-recv-%E5%87%BD%E6%95%B0%E5%9C%A8%E9%98%BB%E5%A1%9E%E5%92%8C%E9%9D%9E%E9%98%BB%E5%A1%9E%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%9A%84%E8%A1%8C%E4%B8%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°05-send-å’Œ-recv-å‡½æ•°åœ¨é˜»å¡å’Œéé˜»å¡æ¨¡å¼ä¸‹çš„è¡Œä¸º">ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°05: send å’Œ recv å‡½æ•°åœ¨é˜»å¡å’Œéé˜»å¡æ¨¡å¼ä¸‹çš„è¡Œä¸º</h2><h4 id="send-å’Œ-recv-å‡½æ•°åœ¨é˜»å¡å’Œéé˜»å¡æ¨¡å¼ä¸‹çš„è¡Œä¸º">send å’Œ recv å‡½æ•°åœ¨é˜»å¡å’Œéé˜»å¡æ¨¡å¼ä¸‹çš„è¡Œä¸º</h4><p>send å’Œ recv å‡½æ•°å…¶å®åä¸ç¬¦å®ã€‚</p><p>send å‡½æ•°æœ¬è´¨ä¸Šå¹¶ä¸æ˜¯å¾€ç½‘ç»œä¸Šå‘é€æ•°æ®ï¼Œè€Œæ˜¯å°†åº”ç”¨å±‚å‘é€ç¼“å†²åŒºçš„æ•°æ®æ‹·è´åˆ°å†…æ ¸ç¼“å†²åŒºï¼ˆä¸‹æ–‡ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä»¥â€œç½‘å¡ç¼“å†²åŒºâ€ä»£æŒ‡ï¼‰ä¸­å»ï¼Œè‡³äºä»€ä¹ˆæ—¶å€™æ•°æ®ä¼šä»ç½‘å¡ç¼“å†²åŒºä¸­çœŸæ­£åœ°å‘åˆ°ç½‘ç»œä¸­å»è¦æ ¹æ® TCP/IP åè®®æ ˆçš„è¡Œä¸ºæ¥ç¡®å®šã€‚</p><p>recv å‡½æ•°æœ¬è´¨ä¸Šä¹Ÿå¹¶ä¸æ˜¯ä»ç½‘ç»œä¸Šæ”¶å–æ•°æ®ï¼Œè€Œåªæ˜¯å°†å†…æ ¸ç¼“å†²åŒºä¸­çš„æ•°æ®æ‹·è´åˆ°åº”ç”¨ç¨‹åºçš„ç¼“å†²åŒºä¸­ï¼Œå½“ç„¶æ‹·è´å®Œæˆä»¥åä¼šå°†å†…æ ¸ç¼“å†²åŒºä¸­è¯¥éƒ¨åˆ†æ•°æ®ç§»é™¤ã€‚</p><p>ä¸åŒçš„ç¨‹åºè¿›è¡Œç½‘ç»œé€šä¿¡æ—¶ï¼Œå‘é€çš„ä¸€æ–¹ä¼šå°†å†…æ ¸ç¼“å†²åŒºçš„æ•°æ®é€šè¿‡ç½‘ç»œä¼ è¾“ç»™æ¥æ”¶æ–¹çš„å†…æ ¸ç¼“å†²åŒºã€‚åœ¨åº”ç”¨ç¨‹åº A ä¸ åº”ç”¨ç¨‹åº B å»ºç«‹äº† TCP è¿æ¥ä¹‹åï¼Œå‡è®¾åº”ç”¨ç¨‹åº A ä¸æ–­è°ƒç”¨ send å‡½æ•°ï¼Œè¿™æ ·æ•°æ®ä¼šä¸æ–­æ‹·è´è‡³å¯¹åº”çš„å†…æ ¸ç¼“å†²åŒºä¸­ï¼Œå¦‚æœ B é‚£ä¸€ç«¯ä¸€ç›´ä¸è°ƒç”¨  recv å‡½æ•°ï¼Œé‚£ä¹ˆ B çš„å†…æ ¸ç¼“å†²åŒºè¢«å¡«æ»¡ä»¥åï¼ŒA çš„å†…æ ¸ç¼“å†²åŒºä¹Ÿä¼šè¢«å¡«æ»¡ï¼Œæ­¤æ—¶ A ç»§ç»­è°ƒç”¨ send å‡½æ•°ä¼šæ˜¯ä»€ä¹ˆç»“æœå‘¢ï¼Ÿ å…·ä½“çš„ç»“æœå–å†³äºè¯¥ socket æ˜¯å¦æ˜¯é˜»å¡æ¨¡å¼ã€‚æˆ‘ä»¬è¿™é‡Œå…ˆç»™å‡ºç»“è®ºï¼š</p><ul><li>å½“ socket æ˜¯é˜»å¡æ¨¡å¼çš„ï¼Œç»§ç»­è°ƒç”¨ send/recv å‡½æ•°ä¼šå¯¼è‡´ç¨‹åºé˜»å¡åœ¨ send/recv è°ƒç”¨å¤„ã€‚</li><li>å½“ socket æ˜¯éé˜»å¡æ¨¡å¼ï¼Œç»§ç»­è°ƒç”¨ send/recv å‡½æ•°ï¼Œsend/recv å‡½æ•°ä¸ä¼šé˜»å¡ç¨‹åºæ‰§è¡Œæµï¼Œè€Œæ˜¯ä¼šç«‹å³å‡ºé”™è¿”å›ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªç›¸å…³çš„é”™è¯¯ç ï¼ŒLinux å¹³å°ä¸Šè¯¥é”™è¯¯ç ä¸º EWOULDBLOCK æˆ– EAGAINï¼ˆè¿™ä¸¤ä¸ªé”™è¯¯ç å€¼ç›¸åŒï¼‰ï¼ŒWindows å¹³å°ä¸Šé”™è¯¯ç ä¸º WSAEWOULDBLOCKã€‚</li></ul><p>æˆ‘ä»¬å®é™…æ¥ç¼–å†™ä¸€ä¸‹ä»£ç æ¥éªŒè¯ä¸€ä¸‹ä»¥ä¸Šè¯´çš„ä¸¤ç§æƒ…å†µã€‚</p><h5 id="socket-é˜»å¡æ¨¡å¼ä¸‹çš„-send-è¡Œä¸º">socket é˜»å¡æ¨¡å¼ä¸‹çš„ send è¡Œä¸º</h5><p>æœåŠ¡ç«¯ä»£ç ï¼ˆblocking_server.cppï¼‰å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * éªŒè¯é˜»å¡æ¨¡å¼ä¸‹sendå‡½æ•°çš„è¡Œä¸ºï¼Œserverç«¯</span><br><span class="hljs-comment"> * liansixin 2022-6-21</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºä¸€ä¸ªä¾¦å¬socket</span><br>    <span class="hljs-type">int</span> listenfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (listenfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create listen socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//2.åˆå§‹åŒ–æœåŠ¡å™¨åœ°å€</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> bindaddr;<br>    bindaddr.sin_family = AF_INET;<br>    bindaddr.sin_addr.s_addr = <span class="hljs-built_in">htonl</span>(INADDR_ANY);<br>    bindaddr.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">3000</span>);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bind</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;bindaddr, <span class="hljs-built_in">sizeof</span>(bindaddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;bind listen socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-built_in">close</span>(listenfd);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//3.å¯åŠ¨ä¾¦å¬</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">listen</span>(listenfd, SOMAXCONN) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;listen error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-built_in">close</span>(listenfd);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>    &#123;<br>        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> clientaddr;<br>        <span class="hljs-type">socklen_t</span> clientaddrlen = <span class="hljs-built_in">sizeof</span>(clientaddr);<br><span class="hljs-comment">//4. æ¥å—å®¢æˆ·ç«¯è¿æ¥</span><br>        <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">accept</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;clientaddr, &amp;clientaddrlen);<br>        <span class="hljs-keyword">if</span> (clientfd != <span class="hljs-number">-1</span>)<br>        &#123;         <br><span class="hljs-comment">//åªæ¥å—è¿æ¥ï¼Œä¸è°ƒç”¨recvæ”¶å–ä»»ä½•æ•°æ®</span><br>std:: cout &lt;&lt; <span class="hljs-string">&quot;accept a client connection.&quot;</span> &lt;&lt; std::endl;<br>        &#125;<br>    &#125;<br><br><span class="hljs-comment">//7.å…³é—­ä¾¦å¬socket</span><br><span class="hljs-built_in">close</span>(listenfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ä»£ç ï¼ˆblocking_client.cppï¼‰å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * éªŒè¯é˜»å¡æ¨¡å¼ä¸‹sendå‡½æ•°çš„è¡Œä¸ºï¼Œclientç«¯</span><br><span class="hljs-comment"> * liansixin 2022-6-21</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_ADDRESS <span class="hljs-string">&quot;127.0.0.1&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_PORT     3000</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SEND_DATA       <span class="hljs-string">&quot;helloworld&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºä¸€ä¸ªsocket</span><br>    <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create client socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-built_in">close</span>(clientfd);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//2.è¿æ¥æœåŠ¡å™¨</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serveraddr;<br>    serveraddr.sin_family = AF_INET;<br>    serveraddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(SERVER_ADDRESS);<br>    serveraddr.sin_port = <span class="hljs-built_in">htons</span>(SERVER_PORT);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;serveraddr, <span class="hljs-built_in">sizeof</span>(serveraddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;connect socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//3. ä¸æ–­å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œæˆ–è€…å‡ºé”™é€€å‡º</span><br><span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">send</span>(clientfd, SEND_DATA, <span class="hljs-built_in">strlen</span>(SEND_DATA), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret != <span class="hljs-built_in">strlen</span>(SEND_DATA))<br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">break</span>;<br>&#125; <br><span class="hljs-keyword">else</span><br>&#123;<br>count ++;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data successfully, count = &quot;</span> &lt;&lt; count &lt;&lt; std::endl;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//5. å…³é—­socket</span><br><span class="hljs-built_in">close</span>(clientfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ shell ä¸­åˆ†åˆ«ç¼–è¯‘è¿™ä¸¤ä¸ª cpp æ–‡ä»¶å¾—åˆ°ä¸¤ä¸ªå¯æ‰§è¡Œç¨‹åº <strong>blocking_server</strong> å’Œ <strong>blocking_client</strong>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">g</span>++ -<span class="hljs-selector-tag">g</span> -o blocking_server blocking_server<span class="hljs-selector-class">.cpp</span><br><span class="hljs-selector-tag">g</span>++ -<span class="hljs-selector-tag">g</span> -o blocking_client blocking_client<span class="hljs-selector-class">.cpp</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆå¯åŠ¨ <strong>blocking_server</strong>ï¼Œç„¶åç”¨ gdb å¯åŠ¨ <strong>blocking_client</strong>ï¼Œè¾“å…¥ <strong>run</strong> å‘½ä»¤è®© <strong>blocking_client</strong>è·‘èµ·æ¥ï¼Œ<strong>blocking_client</strong> ä¼šä¸æ–­åœ°å‘ <strong>blocking_server</strong> å‘é€&quot;<strong>helloworld</strong>&quot;å­—ç¬¦ä¸²ï¼Œæ¯æ¬¡ send æˆåŠŸåï¼Œä¼šå°†è®¡æ•°å™¨ <strong>count</strong> çš„å€¼æ‰“å°å‡ºæ¥ï¼Œè®¡æ•°å™¨ä¼šä¸æ–­å¢åŠ ï¼Œç¨‹åºè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œè®¡æ•°å™¨ <strong>count</strong> å€¼ä¸å†å¢åŠ ä¸”ç¨‹åºä¸å†æœ‰è¾“å‡ºã€‚æ“ä½œè¿‡ç¨‹åŠè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><p><strong>blocking_server</strong> ç«¯ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">[root<span class="hljs-variable">@localhost</span> testsocket]<span class="hljs-comment"># ./blocking_server </span><br><span class="hljs-keyword">accept</span> a client connection.<br></code></pre></td></tr></table></figure><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@localhost testsocket]# gdb blocking_client<br>GNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-100.el7_4.1<br><span class="hljs-keyword">Copyright</span> (C) 2013 Free Software Foundation, Inc.<br>License GPLv3+: GNU GPL <span class="hljs-keyword">version</span> 3 or later &lt;http:<span class="hljs-comment">//gnu.org/licenses/gpl.html&gt;</span><br>This is free software: you are free to change and redistribute it.<br>There is <span class="hljs-keyword">NO</span> WARRANTY, to the extent permitted <span class="hljs-keyword">by</span> law.  <span class="hljs-keyword">Type</span> <span class="hljs-string">&quot;show copying&quot;</span><br>and <span class="hljs-string">&quot;show warranty&quot;</span> <span class="hljs-keyword">for</span> details.<br>This GDB was configured <span class="hljs-keyword">as</span> <span class="hljs-string">&quot;x86_64-redhat-linux-gnu&quot;</span>.<br><span class="hljs-keyword">For</span> bug reporting instructions, please see:<br>&lt;http:<span class="hljs-comment">//www.gnu.org/software/gdb/bugs/&gt;...</span><br>Reading symbols from /root/testsocket/blocking_client...done.<br>(gdb) <span class="hljs-keyword">run</span><br><span class="hljs-comment">//è¾“å‡ºç»“æœå¤ªå¤šï¼Œçœç•¥éƒ¨åˆ†...</span><br>send data successfully, <span class="hljs-keyword">count</span> = 355384<br>send data successfully, <span class="hljs-keyword">count</span> = 355385<br>send data successfully, <span class="hljs-keyword">count</span> = 355386<br>send data successfully, <span class="hljs-keyword">count</span> = 355387<br>send data successfully, <span class="hljs-keyword">count</span> = 355388<br>send data successfully, <span class="hljs-keyword">count</span> = 355389<br>send data successfully, <span class="hljs-keyword">count</span> = 355390<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ç¨‹åºä¸å†æœ‰è¾“å‡ºï¼Œè¯´æ˜æˆ‘ä»¬çš„ç¨‹åºåº”è¯¥â€œå¡åœ¨â€æŸä¸ªåœ°æ–¹ï¼Œç»§ç»­æŒ‰ <strong>Ctrl + C</strong> è®© gdb ä¸­æ–­ä¸‹æ¥ï¼Œè¾“å…¥ <strong>bt</strong> å‘½ä»¤æŸ¥çœ‹æ­¤æ—¶çš„è°ƒç”¨å †æ ˆï¼Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„ç¨‹åºç¡®å®é˜»å¡åœ¨ <strong>send</strong> å‡½æ•°è°ƒç”¨å¤„ï¼š</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">^C<br>Program received signal SIGINT, Interrupt.<br><span class="hljs-number">0x00007ffff72f130d</span> <span class="hljs-keyword">in</span> send () from /lib64/libc<span class="hljs-number">.</span>so<span class="hljs-number">.6</span><br>(gdb) <span class="hljs-keyword">bt</span><br>#<span class="hljs-number">0</span>  <span class="hljs-number">0x00007ffff72f130d</span> <span class="hljs-keyword">in</span> send () from /lib64/libc<span class="hljs-number">.</span>so<span class="hljs-number">.6</span><br>#<span class="hljs-number">1</span>  <span class="hljs-number">0x0000000000400b46</span> <span class="hljs-keyword">in</span> main (argc=<span class="hljs-number">1</span>, argv=<span class="hljs-number">0x7fffffffe598</span>) <span class="hljs-meta">at</span> blocking_client<span class="hljs-number">.</span>cpp:<span class="hljs-number">41</span><br>(gdb) <br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç¤ºä¾‹éªŒè¯äº†å¦‚æœä¸€ç«¯ä¸€ç›´å‘æ•°æ®ï¼Œè€Œå¯¹ç«¯åº”ç”¨å±‚ä¸€ç›´ä¸å–æ•°æ®ï¼ˆæˆ–æ”¶å–æ•°æ®çš„é€Ÿåº¦æ…¢äºå‘é€é€Ÿåº¦ï¼‰ï¼Œåˆ™å¾ˆå¿«ä¸¤ç«¯çš„å†…æ ¸ç¼“å†²åŒºå¾ˆå¿«å°±ä¼šè¢«å¡«æ»¡ï¼Œå¯¼è‡´å‘é€ç«¯è°ƒç”¨ send å‡½æ•°è¢«é˜»å¡ã€‚è¿™é‡Œè¯´çš„â€œ<strong>å†…æ ¸ç¼“å†²åŒº</strong>â€ å…¶å®æœ‰ä¸ªä¸“é—¨çš„åå­—ï¼Œå³ TCP çª—å£ã€‚ä¹Ÿå°±æ˜¯è¯´ socket é˜»å¡æ¨¡å¼ä¸‹ï¼Œ send å‡½æ•°åœ¨ TCP çª—å£å¤ªå°æ—¶çš„è¡Œä¸ºæ˜¯é˜»å¡å½“å‰ç¨‹åºæ‰§è¡Œæµï¼ˆå³é˜»å¡ send å‡½æ•°æ‰€åœ¨çš„çº¿ç¨‹çš„æ‰§è¡Œï¼‰ã€‚</p><p>è¯´ç‚¹é¢˜å¤–è¯ï¼Œä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ¯æ¬¡å‘é€ä¸€ä¸ªâ€œ<strong>helloworld</strong>â€ï¼ˆ10ä¸ªå­—èŠ‚ï¼‰ï¼Œä¸€å…±å‘äº† 355390 æ¬¡ï¼ˆæ¯æ¬¡æµ‹è¯•çš„ç»“æœç•¥æœ‰ä¸åŒï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç²—ç•¥åœ°ç®—å‡º TCP çª—å£çš„å¤§å°å¤§çº¦ç­‰äº 1.7 Må·¦å³ ï¼ˆ10 * 355390 / 2ï¼‰ã€‚</p><p>è®©æˆ‘ä»¬å†æ·±å…¥ä¸€ç‚¹ï¼Œæˆ‘ä»¬åˆ©ç”¨ Linux tcpdump å·¥å…·æ¥åŠ¨æ€çœ‹ä¸€ä¸‹è¿™ç§æƒ…å½¢ä¸‹ TCP çª—å£å¤§å°çš„åŠ¨æ€å˜åŒ–ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒLinux ä¸‹ä½¿ç”¨ tcpdump è¿™ä¸ªå‘½ä»¤éœ€è¦æœ‰ root æƒé™ã€‚</p><p>æˆ‘ä»¬å¼€å¯ä¸‰ä¸ª shell çª—å£ï¼Œåœ¨ç¬¬ä¸€ä¸ªçª—å£å…ˆå¯åŠ¨ <strong>blocking_server</strong> è¿›ç¨‹ï¼Œåœ¨ç¬¬äºŒä¸ªçª—å£ç”¨ tcpdump æŠ“ç»è¿‡ TCP ç«¯å£ 3000 ä¸Šçš„æ•°æ®åŒ…ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@localhost testsocket]# tcpdump -i <span class="hljs-keyword">any</span> -nn -S <span class="hljs-string">&#x27;tcp port 3000&#x27;</span>    <br>tcpdump: <span class="hljs-keyword">verbose</span> output suppressed, use -v <span class="hljs-keyword">or</span> -vv <span class="hljs-keyword">for</span> <span class="hljs-keyword">full</span> protocol decode<br>listening <span class="hljs-keyword">on</span> <span class="hljs-keyword">any</span>, link-<span class="hljs-keyword">type</span> LINUX_SLL (Linux cooked), capture size <span class="hljs-number">262144</span> bytes<br></code></pre></td></tr></table></figure><p>æ¥ç€åœ¨ç¬¬ä¸‰ä¸ª shell çª—å£ï¼Œå¯åŠ¨ <strong>blocking_client</strong>ã€‚å½“ <strong>blocking_client</strong> è¿›ç¨‹ä¸å†è¾“å‡ºæ—¶ï¼Œæˆ‘ä»¬æŠ“åŒ…çš„ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><code class="hljs dns">[root@localhost testsocket]# tcpdump -i any -nn -S &#x27;tcp port <span class="hljs-number">3000</span>&#x27; <br>tcpdump: verbose output suppressed, use -v or -vv for full protocol decode<br>listening on any, link-type LINUX_SLL (Linux cooked), capture size <span class="hljs-number">262144</span> bytes<br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907381</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [S], seq <span class="hljs-number">1394135076</span>, win <span class="hljs-number">43690</span>, options [mss <span class="hljs-number">65495</span>,sackOK,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">0</span>,nop,wscale <span class="hljs-number">7</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">20</span>:<span class="hljs-number">32</span>:<span class="hljs-number">21.261484</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [S.], seq <span class="hljs-number">1233000591</span>, ack <span class="hljs-number">1394135077</span>, win <span class="hljs-number">43690</span>, options [mss <span class="hljs-number">65495</span>,sackOK,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>,nop,wscale <span class="hljs-number">7</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907441</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [.], ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907615</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394135077</span>:<span class="hljs-number">1394135087</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907626</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394135087</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907785</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394135087</span>:<span class="hljs-number">1394135097</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907793</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394135097</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907809</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394135097</span>:<span class="hljs-number">1394135107</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907814</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394135107</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907839</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394135117</span>:<span class="hljs-number">1394135127</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907853</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394135127</span>:<span class="hljs-number">1394135137</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907880</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394135147</span>:<span class="hljs-number">1394135157</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907896</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394135167</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907920</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394135177</span>:<span class="hljs-number">1394135187</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907924</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394135187</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.907938</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394135197</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907688</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.923799</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [.], seq <span class="hljs-number">1394135247</span>:<span class="hljs-number">1394157135</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907704</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">21888</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.923840</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394157135</span>, win <span class="hljs-number">1365</span>, options [nop,nop,TS val <span class="hljs-number">78907704</span> ecr <span class="hljs-number">78907688</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.923851</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394157135</span>:<span class="hljs-number">1394157137</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907704</span> ecr <span class="hljs-number">78907704</span>], length <span class="hljs-number">2</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.964013</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394157137</span>, win <span class="hljs-number">1365</span>, options [nop,nop,TS val <span class="hljs-number">78907744</span> ecr <span class="hljs-number">78907704</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.964036</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394157137</span>:<span class="hljs-number">1394170597</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907744</span> ecr <span class="hljs-number">78907744</span>], length <span class="hljs-number">13460</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35.964043</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394170597</span>, win <span class="hljs-number">2388</span>, options [nop,nop,TS val <span class="hljs-number">78907744</span> ecr <span class="hljs-number">78907744</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.081009</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394170597</span>:<span class="hljs-number">1394170607</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907861</span> ecr <span class="hljs-number">78907744</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:36.121161</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394170607</span>, win <span class="hljs-number">2388</span>, options [nop,nop,TS val <span class="hljs-number">78907901</span> ecr <span class="hljs-number">78907861</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:36.121252</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394170607</span>:<span class="hljs-number">1394188957</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78907902</span> ecr <span class="hljs-number">78907901</span>], length <span class="hljs-number">18350</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:36.121285</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394188957</span>, win <span class="hljs-number">3411</span>, options [nop,nop,TS val <span class="hljs-number">78907902</span> ecr <span class="hljs-number">78907902</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:36.243907</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394188957</span>:<span class="hljs-number">1394188967</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908024</span> ecr <span class="hljs-number">78907902</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.284003</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394188967</span>, win <span class="hljs-number">3411</span>, options [nop,nop,TS val <span class="hljs-number">78908064</span> ecr <span class="hljs-number">78908024</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.284024</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394188967</span>:<span class="hljs-number">1394207257</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908064</span> ecr <span class="hljs-number">78908064</span>], length <span class="hljs-number">18290</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.284034</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394207257</span>, win <span class="hljs-number">3635</span>, options [nop,nop,TS val <span class="hljs-number">78908064</span> ecr <span class="hljs-number">78908064</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.409664</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394207257</span>:<span class="hljs-number">1394207267</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908190</span> ecr <span class="hljs-number">78908064</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:36.450133</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394207267</span>, win <span class="hljs-number">3635</span>, options [nop,nop,TS val <span class="hljs-number">78908230</span> ecr <span class="hljs-number">78908190</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:36.450187</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394207267</span>:<span class="hljs-number">1394224477</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908231</span> ecr <span class="hljs-number">78908230</span>], length <span class="hljs-number">17210</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.491025</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394224477</span>, win <span class="hljs-number">3635</span>, options [nop,nop,TS val <span class="hljs-number">78908271</span> ecr <span class="hljs-number">78908231</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.569355</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394224477</span>:<span class="hljs-number">1394224487</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908350</span> ecr <span class="hljs-number">78908271</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.609958</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394224487</span>, win <span class="hljs-number">3635</span>, options [nop,nop,TS val <span class="hljs-number">78908390</span> ecr <span class="hljs-number">78908350</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.609993</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394224487</span>:<span class="hljs-number">1394242657</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908390</span> ecr <span class="hljs-number">78908390</span>], length <span class="hljs-number">18170</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:36.650181</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394242657</span>, win <span class="hljs-number">3635</span>, options [nop,nop,TS val <span class="hljs-number">78908430</span> ecr <span class="hljs-number">78908390</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:36.731142</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394242657</span>:<span class="hljs-number">1394242667</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908511</span> ecr <span class="hljs-number">78908430</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.771958</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394242667</span>, win <span class="hljs-number">3635</span>, options [nop,nop,TS val <span class="hljs-number">78908552</span> ecr <span class="hljs-number">78908511</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.771979</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394242667</span>:<span class="hljs-number">1394258437</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908552</span> ecr <span class="hljs-number">78908552</span>], length <span class="hljs-number">15770</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.811957</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394258437</span>, win <span class="hljs-number">3580</span>, options [nop,nop,TS val <span class="hljs-number">78908592</span> ecr <span class="hljs-number">78908552</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.892064</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394258437</span>:<span class="hljs-number">1394258447</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908672</span> ecr <span class="hljs-number">78908592</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.932039</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394258447</span>, win <span class="hljs-number">3580</span>, options [nop,nop,TS val <span class="hljs-number">78908712</span> ecr <span class="hljs-number">78908672</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.932082</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394258447</span>:<span class="hljs-number">1394276017</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908712</span> ecr <span class="hljs-number">78908712</span>], length <span class="hljs-number">17570</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">36.971983</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394276017</span>, win <span class="hljs-number">3499</span>, options [nop,nop,TS val <span class="hljs-number">78908752</span> ecr <span class="hljs-number">78908712</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.056904</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394276017</span>:<span class="hljs-number">1394276027</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908837</span> ecr <span class="hljs-number">78908752</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.096966</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394276027</span>, win <span class="hljs-number">3499</span>, options [nop,nop,TS val <span class="hljs-number">78908877</span> ecr <span class="hljs-number">78908837</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.096989</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394276027</span>:<span class="hljs-number">1394291677</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78908877</span> ecr <span class="hljs-number">78908877</span>], length <span class="hljs-number">15650</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:37.136941</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394291677</span>, win <span class="hljs-number">3425</span>, options [nop,nop,TS val <span class="hljs-number">78908917</span> ecr <span class="hljs-number">78908877</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:37.223275</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394291677</span>:<span class="hljs-number">1394291687</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909004</span> ecr <span class="hljs-number">78908917</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.263951</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394291687</span>, win <span class="hljs-number">3425</span>, options [nop,nop,TS val <span class="hljs-number">78909044</span> ecr <span class="hljs-number">78909004</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.263974</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394291687</span>:<span class="hljs-number">1394308477</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909044</span> ecr <span class="hljs-number">78909044</span>], length <span class="hljs-number">16790</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.303956</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394308477</span>, win <span class="hljs-number">3347</span>, options [nop,nop,TS val <span class="hljs-number">78909084</span> ecr <span class="hljs-number">78909044</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.383620</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394308477</span>:<span class="hljs-number">1394308487</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909164</span> ecr <span class="hljs-number">78909084</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.423926</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394308487</span>, win <span class="hljs-number">3347</span>, options [nop,nop,TS val <span class="hljs-number">78909204</span> ecr <span class="hljs-number">78909164</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.423952</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394308487</span>:<span class="hljs-number">1394326297</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909204</span> ecr <span class="hljs-number">78909204</span>], length <span class="hljs-number">17810</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.463914</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394326297</span>, win <span class="hljs-number">3266</span>, options [nop,nop,TS val <span class="hljs-number">78909244</span> ecr <span class="hljs-number">78909204</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.545414</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394326297</span>:<span class="hljs-number">1394326307</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909326</span> ecr <span class="hljs-number">78909244</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.586052</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394326307</span>, win <span class="hljs-number">3266</span>, options [nop,nop,TS val <span class="hljs-number">78909366</span> ecr <span class="hljs-number">78909326</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:37.586109</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394326307</span>:<span class="hljs-number">1394343097</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909366</span> ecr <span class="hljs-number">78909366</span>], length <span class="hljs-number">16790</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.626049</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394343097</span>, win <span class="hljs-number">3188</span>, options [nop,nop,TS val <span class="hljs-number">78909406</span> ecr <span class="hljs-number">78909366</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.707516</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394343097</span>:<span class="hljs-number">1394343107</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909488</span> ecr <span class="hljs-number">78909406</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.747870</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394343107</span>, win <span class="hljs-number">3188</span>, options [nop,nop,TS val <span class="hljs-number">78909528</span> ecr <span class="hljs-number">78909488</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.747892</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394343107</span>:<span class="hljs-number">1394358877</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909528</span> ecr <span class="hljs-number">78909528</span>], length <span class="hljs-number">15770</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">37.787982</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394358877</span>, win <span class="hljs-number">3114</span>, options [nop,nop,TS val <span class="hljs-number">78909568</span> ecr <span class="hljs-number">78909528</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068368</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394358877</span>:<span class="hljs-number">1394358887</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909568</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068434</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394358887</span>, win <span class="hljs-number">3114</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068459</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394358887</span>:<span class="hljs-number">1394358897</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068461</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394358897</span>, win <span class="hljs-number">3114</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068466</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394358897</span>:<span class="hljs-number">1394358907</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068467</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394358907</span>, win <span class="hljs-number">3114</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068471</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394358907</span>:<span class="hljs-number">1394358917</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068472</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394358917</span>, win <span class="hljs-number">3114</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068475</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394358917</span>:<span class="hljs-number">1394358927</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068476</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394358927</span>, win <span class="hljs-number">3114</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068480</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394358937</span>, win <span class="hljs-number">3114</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068483</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394358937</span>:<span class="hljs-number">1394358947</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068488</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394358947</span>:<span class="hljs-number">1394358957</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068491</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394358957</span>:<span class="hljs-number">1394358967</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.068496</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394358967</span>:<span class="hljs-number">1394358977</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909849</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:38.108851</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394358977</span>, win <span class="hljs-number">3114</span>, options [nop,nop,TS val <span class="hljs-number">78909889</span> ecr <span class="hljs-number">78909849</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:38.108910</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394358977</span>:<span class="hljs-number">1394376697</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78909889</span> ecr <span class="hljs-number">78909889</span>], length <span class="hljs-number">17720</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:38.149011</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394376697</span>, win <span class="hljs-number">3032</span>, options [nop,nop,TS val <span class="hljs-number">78909929</span> ecr <span class="hljs-number">78909889</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:38.234851</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394376697</span>:<span class="hljs-number">1394376707</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910015</span> ecr <span class="hljs-number">78909929</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.274934</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394376707</span>, win <span class="hljs-number">3032</span>, options [nop,nop,TS val <span class="hljs-number">78910055</span> ecr <span class="hljs-number">78910015</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.274949</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394376707</span>:<span class="hljs-number">1394392477</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910055</span> ecr <span class="hljs-number">78910055</span>], length <span class="hljs-number">15770</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.314919</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394392477</span>, win <span class="hljs-number">2958</span>, options [nop,nop,TS val <span class="hljs-number">78910095</span> ecr <span class="hljs-number">78910055</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.314940</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394392477</span>:<span class="hljs-number">1394409277</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910095</span> ecr <span class="hljs-number">78910095</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.354895</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394409277</span>, win <span class="hljs-number">2889</span>, options [nop,nop,TS val <span class="hljs-number">78910135</span> ecr <span class="hljs-number">78910095</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.354913</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394409277</span>:<span class="hljs-number">1394426077</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910135</span> ecr <span class="hljs-number">78910135</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.394876</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394426077</span>, win <span class="hljs-number">2820</span>, options [nop,nop,TS val <span class="hljs-number">78910175</span> ecr <span class="hljs-number">78910135</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.394890</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394426077</span>:<span class="hljs-number">1394442877</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910175</span> ecr <span class="hljs-number">78910175</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.434909</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394442877</span>, win <span class="hljs-number">2751</span>, options [nop,nop,TS val <span class="hljs-number">78910215</span> ecr <span class="hljs-number">78910175</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.434925</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394442877</span>:<span class="hljs-number">1394459677</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910215</span> ecr <span class="hljs-number">78910215</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.474890</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394459677</span>, win <span class="hljs-number">2683</span>, options [nop,nop,TS val <span class="hljs-number">78910255</span> ecr <span class="hljs-number">78910215</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.474901</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394459677</span>:<span class="hljs-number">1394470177</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910255</span> ecr <span class="hljs-number">78910255</span>], length <span class="hljs-number">10500</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.514891</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394470177</span>, win <span class="hljs-number">2638</span>, options [nop,nop,TS val <span class="hljs-number">78910295</span> ecr <span class="hljs-number">78910255</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.514908</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394470177</span>:<span class="hljs-number">1394476477</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910295</span> ecr <span class="hljs-number">78910295</span>], length <span class="hljs-number">6300</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.554921</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394476477</span>, win <span class="hljs-number">2610</span>, options [nop,nop,TS val <span class="hljs-number">78910335</span> ecr <span class="hljs-number">78910295</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.554941</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394476477</span>:<span class="hljs-number">1394493277</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910335</span> ecr <span class="hljs-number">78910335</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.594888</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394493277</span>, win <span class="hljs-number">2541</span>, options [nop,nop,TS val <span class="hljs-number">78910375</span> ecr <span class="hljs-number">78910335</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.594905</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394493277</span>:<span class="hljs-number">1394510077</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910375</span> ecr <span class="hljs-number">78910375</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.634904</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394510077</span>, win <span class="hljs-number">2472</span>, options [nop,nop,TS val <span class="hljs-number">78910415</span> ecr <span class="hljs-number">78910375</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.634922</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394510077</span>:<span class="hljs-number">1394527897</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910415</span> ecr <span class="hljs-number">78910415</span>], length <span class="hljs-number">17820</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.674852</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394527897</span>, win <span class="hljs-number">2400</span>, options [nop,nop,TS val <span class="hljs-number">78910455</span> ecr <span class="hljs-number">78910415</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.674864</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394527897</span>:<span class="hljs-number">1394544637</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910455</span> ecr <span class="hljs-number">78910455</span>], length <span class="hljs-number">16740</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.714870</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394544637</span>, win <span class="hljs-number">2331</span>, options [nop,nop,TS val <span class="hljs-number">78910495</span> ecr <span class="hljs-number">78910455</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.714897</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394544637</span>:<span class="hljs-number">1394560337</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910495</span> ecr <span class="hljs-number">78910495</span>], length <span class="hljs-number">15700</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.754893</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394560337</span>, win <span class="hljs-number">2266</span>, options [nop,nop,TS val <span class="hljs-number">78910535</span> ecr <span class="hljs-number">78910495</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.754925</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394560337</span>:<span class="hljs-number">1394560357</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910535</span> ecr <span class="hljs-number">78910535</span>], length <span class="hljs-number">20</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.794922</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394560357</span>, win <span class="hljs-number">2266</span>, options [nop,nop,TS val <span class="hljs-number">78910575</span> ecr <span class="hljs-number">78910535</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.794942</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394560357</span>:<span class="hljs-number">1394577157</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910575</span> ecr <span class="hljs-number">78910575</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.834848</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394577157</span>, win <span class="hljs-number">2188</span>, options [nop,nop,TS val <span class="hljs-number">78910615</span> ecr <span class="hljs-number">78910575</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.834868</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394577157</span>:<span class="hljs-number">1394595037</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910615</span> ecr <span class="hljs-number">78910615</span>], length <span class="hljs-number">17880</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.874858</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394595037</span>, win <span class="hljs-number">2115</span>, options [nop,nop,TS val <span class="hljs-number">78910655</span> ecr <span class="hljs-number">78910615</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.874878</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394595037</span>:<span class="hljs-number">1394610757</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910655</span> ecr <span class="hljs-number">78910655</span>], length <span class="hljs-number">15720</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.914841</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394610757</span>, win <span class="hljs-number">2050</span>, options [nop,nop,TS val <span class="hljs-number">78910695</span> ecr <span class="hljs-number">78910655</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.914854</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394610757</span>:<span class="hljs-number">1394628637</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910695</span> ecr <span class="hljs-number">78910695</span>], length <span class="hljs-number">17880</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.954812</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394628637</span>, win <span class="hljs-number">1977</span>, options [nop,nop,TS val <span class="hljs-number">78910735</span> ecr <span class="hljs-number">78910695</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.954841</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394628637</span>:<span class="hljs-number">1394645437</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910735</span> ecr <span class="hljs-number">78910735</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.994885</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394645437</span>, win <span class="hljs-number">1908</span>, options [nop,nop,TS val <span class="hljs-number">78910775</span> ecr <span class="hljs-number">78910735</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">38.994895</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394645437</span>:<span class="hljs-number">1394652257</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910775</span> ecr <span class="hljs-number">78910775</span>], length <span class="hljs-number">6820</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.035093</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394652257</span>, win <span class="hljs-number">1878</span>, options [nop,nop,TS val <span class="hljs-number">78910815</span> ecr <span class="hljs-number">78910775</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:39.035141</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394652257</span>:<span class="hljs-number">1394662237</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910815</span> ecr <span class="hljs-number">78910815</span>], length <span class="hljs-number">9980</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.074820</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394662237</span>, win <span class="hljs-number">1836</span>, options [nop,nop,TS val <span class="hljs-number">78910855</span> ecr <span class="hljs-number">78910815</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.074842</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394662237</span>:<span class="hljs-number">1394677717</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910855</span> ecr <span class="hljs-number">78910855</span>], length <span class="hljs-number">15480</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:39.114860</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394677717</span>, win <span class="hljs-number">1771</span>, options [nop,nop,TS val <span class="hljs-number">78910895</span> ecr <span class="hljs-number">78910855</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:39.114880</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394677717</span>:<span class="hljs-number">1394694517</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910895</span> ecr <span class="hljs-number">78910895</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:39.154880</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394694517</span>, win <span class="hljs-number">1702</span>, options [nop,nop,TS val <span class="hljs-number">78910935</span> ecr <span class="hljs-number">78910895</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:39.154897</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394694517</span>:<span class="hljs-number">1394711317</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910935</span> ecr <span class="hljs-number">78910935</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:39.194830</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394711317</span>, win <span class="hljs-number">1633</span>, options [nop,nop,TS val <span class="hljs-number">78910975</span> ecr <span class="hljs-number">78910935</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:39.194842</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394711317</span>:<span class="hljs-number">1394728117</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78910975</span> ecr <span class="hljs-number">78910975</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:39.234790</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394728117</span>, win <span class="hljs-number">1564</span>, options [nop,nop,TS val <span class="hljs-number">78911015</span> ecr <span class="hljs-number">78910975</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:39.234826</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394728117</span>:<span class="hljs-number">1394740847</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911015</span> ecr <span class="hljs-number">78911015</span>], length <span class="hljs-number">12730</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.274844</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394740847</span>, win <span class="hljs-number">1511</span>, options [nop,nop,TS val <span class="hljs-number">78911055</span> ecr <span class="hljs-number">78911015</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.274862</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394740847</span>:<span class="hljs-number">1394744797</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911055</span> ecr <span class="hljs-number">78911055</span>], length <span class="hljs-number">3950</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.314819</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394744797</span>, win <span class="hljs-number">1493</span>, options [nop,nop,TS val <span class="hljs-number">78911095</span> ecr <span class="hljs-number">78911055</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.314841</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394744797</span>:<span class="hljs-number">1394761597</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911095</span> ecr <span class="hljs-number">78911095</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.354806</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394761597</span>, win <span class="hljs-number">1424</span>, options [nop,nop,TS val <span class="hljs-number">78911135</span> ecr <span class="hljs-number">78911095</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.354823</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394761597</span>:<span class="hljs-number">1394778397</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911135</span> ecr <span class="hljs-number">78911135</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.394793</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394778397</span>, win <span class="hljs-number">1355</span>, options [nop,nop,TS val <span class="hljs-number">78911175</span> ecr <span class="hljs-number">78911135</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.394814</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394778397</span>:<span class="hljs-number">1394795197</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911175</span> ecr <span class="hljs-number">78911175</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.434759</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394795197</span>, win <span class="hljs-number">1286</span>, options [nop,nop,TS val <span class="hljs-number">78911215</span> ecr <span class="hljs-number">78911175</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.434800</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394795197</span>:<span class="hljs-number">1394811997</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911215</span> ecr <span class="hljs-number">78911215</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.474748</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394811997</span>, win <span class="hljs-number">1217</span>, options [nop,nop,TS val <span class="hljs-number">78911255</span> ecr <span class="hljs-number">78911215</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.474760</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394811997</span>:<span class="hljs-number">1394824597</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911255</span> ecr <span class="hljs-number">78911255</span>], length <span class="hljs-number">12600</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.514771</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394824597</span>, win <span class="hljs-number">1164</span>, options [nop,nop,TS val <span class="hljs-number">78911295</span> ecr <span class="hljs-number">78911255</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.514789</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394824597</span>:<span class="hljs-number">1394828797</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911295</span> ecr <span class="hljs-number">78911295</span>], length <span class="hljs-number">4200</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.554833</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394828797</span>, win <span class="hljs-number">1145</span>, options [nop,nop,TS val <span class="hljs-number">78911335</span> ecr <span class="hljs-number">78911295</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.554853</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394828797</span>:<span class="hljs-number">1394845597</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911335</span> ecr <span class="hljs-number">78911335</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.594805</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394845597</span>, win <span class="hljs-number">1076</span>, options [nop,nop,TS val <span class="hljs-number">78911375</span> ecr <span class="hljs-number">78911335</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.594830</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394845597</span>:<span class="hljs-number">1394862397</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911375</span> ecr <span class="hljs-number">78911375</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.634725</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394862397</span>, win <span class="hljs-number">1007</span>, options [nop,nop,TS val <span class="hljs-number">78911415</span> ecr <span class="hljs-number">78911375</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.634744</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394862397</span>:<span class="hljs-number">1394879197</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911415</span> ecr <span class="hljs-number">78911415</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.674776</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394879197</span>, win <span class="hljs-number">938</span>, options [nop,nop,TS val <span class="hljs-number">78911455</span> ecr <span class="hljs-number">78911415</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.674789</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394879197</span>:<span class="hljs-number">1394895997</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911455</span> ecr <span class="hljs-number">78911455</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.714767</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394895997</span>, win <span class="hljs-number">869</span>, options [nop,nop,TS val <span class="hljs-number">78911495</span> ecr <span class="hljs-number">78911455</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.714876</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394895997</span>:<span class="hljs-number">1394910697</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911495</span> ecr <span class="hljs-number">78911495</span>], length <span class="hljs-number">14700</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.754771</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394910697</span>, win <span class="hljs-number">808</span>, options [nop,nop,TS val <span class="hljs-number">78911535</span> ecr <span class="hljs-number">78911495</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.754788</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394910697</span>:<span class="hljs-number">1394912797</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911535</span> ecr <span class="hljs-number">78911535</span>], length <span class="hljs-number">2100</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.794797</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394912797</span>, win <span class="hljs-number">797</span>, options [nop,nop,TS val <span class="hljs-number">78911575</span> ecr <span class="hljs-number">78911535</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.794817</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394912797</span>:<span class="hljs-number">1394929597</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911575</span> ecr <span class="hljs-number">78911575</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.834832</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394929597</span>, win <span class="hljs-number">728</span>, options [nop,nop,TS val <span class="hljs-number">78911615</span> ecr <span class="hljs-number">78911575</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.834853</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394929597</span>:<span class="hljs-number">1394947417</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911615</span> ecr <span class="hljs-number">78911615</span>], length <span class="hljs-number">17820</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.874741</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394947417</span>, win <span class="hljs-number">655</span>, options [nop,nop,TS val <span class="hljs-number">78911655</span> ecr <span class="hljs-number">78911615</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.874759</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394947417</span>:<span class="hljs-number">1394963437</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911655</span> ecr <span class="hljs-number">78911655</span>], length <span class="hljs-number">16020</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.914743</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394963437</span>, win <span class="hljs-number">589</span>, options [nop,nop,TS val <span class="hljs-number">78911695</span> ecr <span class="hljs-number">78911655</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.914756</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394963437</span>:<span class="hljs-number">1394980117</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911695</span> ecr <span class="hljs-number">78911695</span>], length <span class="hljs-number">16680</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.954818</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394980117</span>, win <span class="hljs-number">520</span>, options [nop,nop,TS val <span class="hljs-number">78911735</span> ecr <span class="hljs-number">78911695</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.954830</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394980117</span>:<span class="hljs-number">1394996917</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911735</span> ecr <span class="hljs-number">78911735</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">39.994802</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394996917</span>, win <span class="hljs-number">451</span>, options [nop,nop,TS val <span class="hljs-number">78911775</span> ecr <span class="hljs-number">78911735</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:39.995152</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394996917</span>:<span class="hljs-number">1394996927</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911775</span> ecr <span class="hljs-number">78911775</span>], length <span class="hljs-number">10</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">40.035846</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1394996927</span>, win <span class="hljs-number">451</span>, options [nop,nop,TS val <span class="hljs-number">78911816</span> ecr <span class="hljs-number">78911775</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">40.035915</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1394996927</span>:<span class="hljs-number">1395013717</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911816</span> ecr <span class="hljs-number">78911816</span>], length <span class="hljs-number">16790</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">40.075794</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1395013717</span>, win <span class="hljs-number">374</span>, options [nop,nop,TS val <span class="hljs-number">78911856</span> ecr <span class="hljs-number">78911816</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">40.075829</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1395013717</span>:<span class="hljs-number">1395030517</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911856</span> ecr <span class="hljs-number">78911856</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:40.115847</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1395030517</span>, win <span class="hljs-number">305</span>, options [nop,nop,TS val <span class="hljs-number">78911896</span> ecr <span class="hljs-number">78911856</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:40.115866</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1395030517</span>:<span class="hljs-number">1395047317</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911896</span> ecr <span class="hljs-number">78911896</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:40.155703</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1395047317</span>, win <span class="hljs-number">174</span>, options [nop,nop,TS val <span class="hljs-number">78911936</span> ecr <span class="hljs-number">78911896</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:40.155752</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1395047317</span>:<span class="hljs-number">1395064117</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78911936</span> ecr <span class="hljs-number">78911936</span>], length <span class="hljs-number">16800</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:40.195132</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1395064117</span>, win <span class="hljs-number">43</span>, options [nop,nop,TS val <span class="hljs-number">78911976</span> ecr <span class="hljs-number">78911936</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">40.435748</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [P.], seq <span class="hljs-number">1395064117</span>:<span class="hljs-number">1395069621</span>, ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78912216</span> ecr <span class="hljs-number">78911976</span>], length <span class="hljs-number">5504</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">40.435782</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1395069621</span>, win <span class="hljs-number">0</span>, options [nop,nop,TS val <span class="hljs-number">78912216</span> ecr <span class="hljs-number">78912216</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">40.670661</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [.], ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78912451</span> ecr <span class="hljs-number">78912216</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">40.670674</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1395069621</span>, win <span class="hljs-number">0</span>, options [nop,nop,TS val <span class="hljs-number">78912451</span> ecr <span class="hljs-number">78912216</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52:41.141703</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [.], ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78912922</span> ecr <span class="hljs-number">78912451</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">42.083643</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [.], ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78913864</span> ecr <span class="hljs-number">78912451</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">42.083655</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1395069621</span>, win <span class="hljs-number">0</span>, options [nop,nop,TS val <span class="hljs-number">78913864</span> ecr <span class="hljs-number">78912216</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">43.967506</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [.], ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78915748</span> ecr <span class="hljs-number">78913864</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">43.967532</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1395069621</span>, win <span class="hljs-number">0</span>, options [nop,nop,TS val <span class="hljs-number">78915748</span> ecr <span class="hljs-number">78912216</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">47.739259</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [.], ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78919520</span> ecr <span class="hljs-number">78915748</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">47.739274</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1395069621</span>, win <span class="hljs-number">0</span>, options [nop,nop,TS val <span class="hljs-number">78919520</span> ecr <span class="hljs-number">78912216</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">55.275863</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags [.], ack <span class="hljs-number">1233000592</span>, win <span class="hljs-number">342</span>, options [nop,nop,TS val <span class="hljs-number">78927056</span> ecr <span class="hljs-number">78919520</span>], length <span class="hljs-number">0</span><br><span class="hljs-number">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">55.275931</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags [.], ack <span class="hljs-number">1395069621</span>, win <span class="hljs-number">0</span>, options [nop,nop,TS val <span class="hljs-number">78927056</span> ecr <span class="hljs-number">78912216</span>], length <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>æŠ“å–åˆ°çš„å‰ä¸‰ä¸ªæ•°æ®åŒ…æ˜¯ <strong>blocking_client</strong> ä¸ <strong>blocking_server</strong> å»ºç«‹ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35</span>.<span class="hljs-number">907381</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags<span class="hljs-meta"> [S], seq 1394135076, win 43690, options [mss 65495,sackOK,TS val 78907688 ecr 0,nop,wscale 7], length 0</span><br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">20</span>:<span class="hljs-number">32</span>:<span class="hljs-number">21</span>.<span class="hljs-number">261484</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span>: Flags<span class="hljs-meta"> [S.], seq 1233000591, ack 1394135077, win 43690, options [mss 65495,sackOK,TS val 78907688 ecr 78907688,nop,wscale 7], length 0</span><br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">11</span>:<span class="hljs-number">52</span>:<span class="hljs-number">35</span>.<span class="hljs-number">907441</span> IP <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">40846</span> &gt; <span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">3000</span>: Flags<span class="hljs-meta"> [.], ack 1233000592, win 342, options [nop,nop,TS val 78907688 ecr 78907688], length 0</span><br></code></pre></td></tr></table></figure><p>å½“æ¯æ¬¡ <strong>blocking_client</strong> ç»™ <strong>blocking_server</strong> å‘æ•°æ®ä»¥åï¼Œ<strong>blocking_server</strong> ä¼šåº”ç­” <strong>blocking_server</strong>ï¼Œåœ¨æ¯æ¬¡åº”ç­”çš„æ•°æ®åŒ…ä¸­ä¼šå¸¦ä¸Šè‡ªå·±çš„å½“å‰å¯ç”¨ TCP çª—å£å¤§å°ï¼ˆçœ‹ä¸Šæ–‡ä¸­ç»“æœä» <strong>127.0.0.1.3000 &gt; 127.0.0.1.40846</strong> æ–¹å‘çš„æ•°æ®åŒ…çš„ <strong>win</strong> å­—æ®µå¤§å°å˜åŒ–ï¼‰ï¼Œç”±äº TCP æµé‡æ§åˆ¶å’Œæ‹¥èµ›æ§åˆ¶æœºåˆ¶çš„å­˜åœ¨ï¼Œ<strong>blocking_server</strong> ç«¯çš„ TCP çª—å£å¤§å°çŸ­æœŸå†…ä¼šæ…¢æ…¢å¢åŠ ï¼Œåé¢éšç€æ¥æ”¶ç¼“å†²åŒºä¸­æ•°æ®ç§¯å‹è¶Šæ¥è¶Šå¤šï¼Œ TCP çª—å£ä¼šæ…¢æ…¢å˜å°ï¼Œæœ€ç»ˆå˜ä¸º 0ã€‚</p><p>å¦å¤–ï¼Œç»†å¿ƒçš„è¯»è€…å¦‚æœå®é™…å»åšä¸€ä¸‹è¿™ä¸ªå®éªŒä¼šå‘ç°ä¸€ä¸ªç°è±¡ï¼Œå³å½“ tcpdump å·²ç»æ˜¾ç¤ºå¯¹ç«¯çš„ TCP çª—å£æ˜¯ 0 æ—¶ï¼Œ <strong>blocking_client</strong> ä»ç„¶å¯ä»¥ç»§ç»­å‘é€ä¸€æ®µæ—¶é—´çš„æ•°æ®ï¼Œæ­¤æ—¶çš„æ•°æ®å·²ç»ä¸æ˜¯åœ¨å‘å¾€å¯¹ç«¯ï¼Œè€Œæ˜¯é€æ¸å¡«æ»¡åˆ°æœ¬ç«¯çš„å†…æ ¸å‘é€ç¼“å†²åŒºä¸­å»äº†ï¼Œè¿™ä¹ŸéªŒè¯äº† send å‡½æ•°å®é™…ä¸Šæ˜¯å¾€å†…æ ¸ç¼“å†²åŒºä¸­æ‹·è´æ•°æ®è¿™ä¸€è¡Œä¸ºã€‚</p><h5 id="socket-éé˜»å¡æ¨¡å¼ä¸‹çš„-send-è¡Œä¸º">socket éé˜»å¡æ¨¡å¼ä¸‹çš„ send è¡Œä¸º</h5><p>æˆ‘ä»¬å†æ¥éªŒè¯ä¸€ä¸‹éé˜»å¡ socket çš„ send è¡Œä¸ºï¼Œ<strong>server</strong> ç«¯çš„ä»£ç ä¸å˜ï¼Œæˆ‘ä»¬å°† <strong>blocking_client.cpp</strong> ä¸­ socket è®¾ç½®æˆéé˜»å¡çš„ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * éªŒè¯éé˜»å¡æ¨¡å¼ä¸‹sendå‡½æ•°çš„è¡Œä¸ºï¼Œclientç«¯ï¼Œnonblocking_client.cpp</span><br><span class="hljs-comment"> * liansixin 2022-6-21</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;errno.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_ADDRESS <span class="hljs-string">&quot;127.0.0.1&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_PORT     3000</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SEND_DATA       <span class="hljs-string">&quot;helloworld&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºä¸€ä¸ªsocket</span><br>    <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create client socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//2.è¿æ¥æœåŠ¡å™¨</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serveraddr;<br>    serveraddr.sin_family = AF_INET;<br>    serveraddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(SERVER_ADDRESS);<br>    serveraddr.sin_port = <span class="hljs-built_in">htons</span>(SERVER_PORT);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;serveraddr, <span class="hljs-built_in">sizeof</span>(serveraddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;connect socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-built_in">close</span>(clientfd);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//è¿æ¥æˆåŠŸä»¥åï¼Œæˆ‘ä»¬å†å°† clientfd è®¾ç½®æˆéé˜»å¡æ¨¡å¼ï¼Œ</span><br><span class="hljs-comment">//ä¸èƒ½åœ¨åˆ›å»ºæ—¶å°±è®¾ç½®ï¼Œè¿™æ ·ä¼šå½±å“åˆ° connect å‡½æ•°çš„è¡Œä¸º</span><br><span class="hljs-type">int</span> oldSocketFlag = <span class="hljs-built_in">fcntl</span>(clientfd, F_GETFL, <span class="hljs-number">0</span>);<br><span class="hljs-type">int</span> newSocketFlag = oldSocketFlag | O_NONBLOCK;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">fcntl</span>(clientfd, F_SETFL,  newSocketFlag) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">close</span>(clientfd);<br>std::cout &lt;&lt; <span class="hljs-string">&quot;set socket to nonblock error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">//3. ä¸æ–­å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œæˆ–è€…å‡ºé”™é€€å‡º</span><br><span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">send</span>(clientfd, SEND_DATA, <span class="hljs-built_in">strlen</span>(SEND_DATA), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret == <span class="hljs-number">-1</span>) <br>&#123;<br><span class="hljs-comment">//éé˜»å¡æ¨¡å¼ä¸‹sendå‡½æ•°ç”±äºTCPçª—å£å¤ªå°å‘ä¸å‡ºå»æ•°æ®ï¼Œé”™è¯¯ç æ˜¯EWOULDBLOCK</span><br><span class="hljs-keyword">if</span> (errno == EWOULDBLOCK)<br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data error as TCP Window size is too small.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">continue</span>;<br>&#125; <br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (errno == EINTR)<br>&#123;<br><span class="hljs-comment">//å¦‚æœè¢«ä¿¡å·ä¸­æ–­ï¼Œæˆ‘ä»¬ç»§ç»­é‡è¯•</span><br>std::cout &lt;&lt; <span class="hljs-string">&quot;sending data interrupted by signal.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">continue</span>;<br>&#125; <br><span class="hljs-keyword">else</span> <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> (ret == <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-comment">//å¯¹ç«¯å…³é—­äº†è¿æ¥ï¼Œæˆ‘ä»¬ä¹Ÿå…³é—­</span><br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-built_in">close</span>(clientfd);<br><span class="hljs-keyword">break</span>;<br>&#125; <br><span class="hljs-keyword">else</span><br>&#123;<br>count ++;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data successfully, count = &quot;</span> &lt;&lt; count &lt;&lt; std::endl;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//5. å…³é—­socket</span><br><span class="hljs-built_in">close</span>(clientfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘ <strong>nonblocking_client.cpp</strong> å¾—åˆ°å¯æ‰§è¡Œç¨‹åº <strong>nonblocking_client</strong>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">g</span>++ -<span class="hljs-selector-tag">g</span> -o nonblocking_client nonblocking_client<span class="hljs-selector-class">.cpp</span> <br></code></pre></td></tr></table></figure><p>è¿è¡Œ <strong>nonblocking_client</strong>ï¼Œè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œç”±äºå¯¹ç«¯å’Œæœ¬ç«¯çš„ TCP çª—å£å·²æ»¡ï¼Œæ•°æ®å‘ä¸å‡ºå»äº†ï¼Œä½†æ˜¯ send å‡½æ•°ä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯ç«‹å³è¿”å›ï¼Œè¿”å›å€¼æ˜¯ <strong>-1</strong>ï¼ˆWindows ç³»ç»Ÿä¸Š è¿”å› SOCKET_ERRORï¼Œè¿™ä¸ªå®çš„å€¼ä¹Ÿæ˜¯ <strong>-1</strong>ï¼‰ï¼Œæ­¤æ—¶å¾—åˆ°é”™è¯¯ç æ˜¯ <strong>EWOULDBLOCK</strong>ã€‚</p><h5 id="socket-é˜»å¡æ¨¡å¼ä¸‹çš„-recv-è¡Œä¸º">socket é˜»å¡æ¨¡å¼ä¸‹çš„ recv è¡Œä¸º</h5><p>åœ¨äº†è§£äº† send å‡½æ•°çš„è¡Œä¸ºï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹é˜»å¡æ¨¡å¼ä¸‹çš„ recv å‡½æ•°è¡Œä¸ºã€‚æœåŠ¡å™¨ç«¯ä»£ç ä¸éœ€è¦ä¿®æ”¹ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å®¢æˆ·ç«¯ä»£ç ï¼Œå¦‚æœæœåŠ¡å™¨ç«¯ä¸ç»™å®¢æˆ·ç«¯å‘æ•°æ®ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯è°ƒç”¨ recv å‡½æ•°æ‰§è¡Œæµä¼šé˜»å¡åœ¨ recv å‡½æ•°è°ƒç”¨å¤„ã€‚ç»§ç»­ä¿®æ”¹ä¸€ä¸‹å®¢æˆ·ç«¯ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * éªŒè¯é˜»å¡æ¨¡å¼ä¸‹recvå‡½æ•°çš„è¡Œä¸ºï¼Œclientç«¯ï¼Œblocking_client_recv.cpp</span><br><span class="hljs-comment"> * liansixin 2022-6-21</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_ADDRESS <span class="hljs-string">&quot;127.0.0.1&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_PORT     3000</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SEND_DATA       <span class="hljs-string">&quot;helloworld&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºä¸€ä¸ªsocket</span><br>    <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create client socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//2.è¿æ¥æœåŠ¡å™¨</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serveraddr;<br>    serveraddr.sin_family = AF_INET;<br>    serveraddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(SERVER_ADDRESS);<br>    serveraddr.sin_port = <span class="hljs-built_in">htons</span>(SERVER_PORT);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;serveraddr, <span class="hljs-built_in">sizeof</span>(serveraddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;connect socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-built_in">close</span>(clientfd);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//ç›´æ¥è°ƒç”¨recvå‡½æ•°ï¼Œç¨‹åºä¼šé˜»å¡åœ¨recvå‡½æ•°è°ƒç”¨å¤„</span><br><span class="hljs-type">char</span> recvbuf[<span class="hljs-number">32</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">recv</span>(clientfd, recvbuf, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret &gt; <span class="hljs-number">0</span>) <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv successfully.&quot;</span> &lt;&lt; std::endl;<br>&#125; <br><span class="hljs-keyword">else</span> <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data error.&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-comment">//5. å…³é—­socket</span><br><span class="hljs-built_in">close</span>(clientfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘ <strong>blocking_client_recv.cpp</strong> å¹¶ä½¿ç”¨å¯åŠ¨ï¼Œæˆ‘ä»¬å‘ç°ç¨‹åºæ—¢æ²¡æœ‰æ‰“å° recv è°ƒç”¨æˆåŠŸçš„ä¿¡æ¯ä¹Ÿæ²¡æœ‰è°ƒç”¨å¤±è´¥çš„ä¿¡æ¯ï¼Œå°†ç¨‹åºä¸­æ–­ä¸‹æ¥ï¼Œä½¿ç”¨ <strong>bt</strong> å‘½ä»¤æŸ¥çœ‹æ­¤æ—¶çš„è°ƒç”¨å †æ ˆï¼Œå‘ç°ç¨‹åºç¡®å®é˜»å¡åœ¨ recv å‡½æ•°è°ƒç”¨å¤„ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp">[<span class="hljs-meta">root@localhost testsocket</span>]<span class="hljs-meta"># g++ -g -o blocking_client_recv blocking_client_recv.cpp </span><br>[<span class="hljs-meta">root@localhost testsocket</span>]<span class="hljs-meta"># gdb blocking_client_recv</span><br>Reading symbols <span class="hljs-keyword">from</span> /root/testsocket/blocking_client_recv...done.<br>(gdb) r<br>Starting program: /root/testsocket/blocking_client_recv <br>^C<br>Program received signal SIGINT, Interrupt.<br><span class="hljs-number">0x00007ffff72f119d</span> <span class="hljs-function"><span class="hljs-keyword">in</span> <span class="hljs-title">recv</span> () <span class="hljs-keyword">from</span> /lib64/libc.so.6</span><br><span class="hljs-function">Missing separate debuginfos, use: debuginfo-install glibc-2.17-196.el7_4.2.x86_64 libgcc-4.8.5-16.el7_4.2.x86_64 libstdc++-4.8.5-16.el7_4.2.<span class="hljs-title">x86_64</span></span><br><span class="hljs-function">(<span class="hljs-params">gdb</span>) bt</span><br><span class="hljs-function">#0  0x00007ffff72f119d <span class="hljs-keyword">in</span> <span class="hljs-title">recv</span> () <span class="hljs-keyword">from</span> /lib64/libc.so.6</span><br><span class="hljs-function">#1  0x0000000000400b18 <span class="hljs-keyword">in</span> <span class="hljs-title">main</span> (<span class="hljs-params">argc=<span class="hljs-number">1</span>, argv=<span class="hljs-number">0x7fffffffe588</span></span>) at blocking_client_recv.cpp:40</span><br></code></pre></td></tr></table></figure><h5 id="socket-éé˜»å¡æ¨¡å¼ä¸‹çš„-recv-è¡Œä¸º">socket éé˜»å¡æ¨¡å¼ä¸‹çš„ recv è¡Œä¸º</h5><p>éé˜»å¡æ¨¡å¼ä¸‹å¦‚æœå½“å‰æ— æ•°æ®å¯è¯»ï¼Œrecv å‡½æ•°å°†ç«‹å³è¿”å›ï¼Œè¿”å›å€¼ä¸º <strong>-1</strong>ï¼Œé”™è¯¯ç ä¸º <strong>EWOULDBLOCK</strong>ã€‚å°†å®¢æˆ·ç«¯ä»£ç ä¿®æˆä¸€ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * éªŒè¯é˜»å¡æ¨¡å¼ä¸‹recvå‡½æ•°çš„è¡Œä¸ºï¼Œclientç«¯ï¼Œblocking_client_recv.cpp</span><br><span class="hljs-comment"> * liansixin 2022-6-21</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;errno.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_ADDRESS <span class="hljs-string">&quot;127.0.0.1&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_PORT     3000</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SEND_DATA       <span class="hljs-string">&quot;helloworld&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºä¸€ä¸ªsocket</span><br>    <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create client socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//2.è¿æ¥æœåŠ¡å™¨</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serveraddr;<br>    serveraddr.sin_family = AF_INET;<br>    serveraddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(SERVER_ADDRESS);<br>    serveraddr.sin_port = <span class="hljs-built_in">htons</span>(SERVER_PORT);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;serveraddr, <span class="hljs-built_in">sizeof</span>(serveraddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;connect socket error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-built_in">close</span>(clientfd);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//è¿æ¥æˆåŠŸä»¥åï¼Œæˆ‘ä»¬å†å°† clientfd è®¾ç½®æˆéé˜»å¡æ¨¡å¼ï¼Œ</span><br><span class="hljs-comment">//ä¸èƒ½åœ¨åˆ›å»ºæ—¶å°±è®¾ç½®ï¼Œè¿™æ ·ä¼šå½±å“åˆ° connect å‡½æ•°çš„è¡Œä¸º</span><br><span class="hljs-type">int</span> oldSocketFlag = <span class="hljs-built_in">fcntl</span>(clientfd, F_GETFL, <span class="hljs-number">0</span>);<br><span class="hljs-type">int</span> newSocketFlag = oldSocketFlag | O_NONBLOCK;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">fcntl</span>(clientfd, F_SETFL,  newSocketFlag) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">close</span>(clientfd);<br>std::cout &lt;&lt; <span class="hljs-string">&quot;set socket to nonblock error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">//ç›´æ¥è°ƒç”¨recvå‡½æ•°ï¼Œç¨‹åºä¼šé˜»å¡åœ¨recvå‡½æ•°è°ƒç”¨å¤„</span><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-type">char</span> recvbuf[<span class="hljs-number">32</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">recv</span>(clientfd, recvbuf, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret &gt; <span class="hljs-number">0</span>) <br>&#123;<br><span class="hljs-comment">//æ”¶åˆ°äº†æ•°æ®</span><br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv successfully.&quot;</span> &lt;&lt; std::endl;<br>&#125; <br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-comment">//å¯¹ç«¯å…³é—­äº†è¿æ¥</span><br>std::cout &lt;&lt; <span class="hljs-string">&quot;peer close the socket.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">break</span>;<br>&#125; <br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">-1</span>) <br>&#123;<br><span class="hljs-keyword">if</span> (errno == EWOULDBLOCK)<br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;There is no data available now.&quot;</span> &lt;&lt; std::endl;<br>&#125; <br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (errno == EINTR) <br>&#123;<br><span class="hljs-comment">//å¦‚æœè¢«ä¿¡å·ä¸­æ–­äº†ï¼Œåˆ™ç»§ç»­é‡è¯•recvå‡½æ•°</span><br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data interrupted by signal.&quot;</span> &lt;&lt; std::endl;<br>&#125; <span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-comment">//çœŸçš„å‡ºé”™äº†</span><br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//5. å…³é—­socket</span><br><span class="hljs-built_in">close</span>(clientfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœä¸æˆ‘ä»¬é¢„æœŸçš„ä¸€æ¨¡ä¸€æ ·ï¼Œ recv å‡½æ•°åœ¨æ— æ•°æ®å¯è¯»çš„æƒ…å†µä¸‹å¹¶ä¸ä¼šé˜»å¡æƒ…ç»ªï¼Œæ‰€ä»¥ç¨‹åºä¼šä¸€ç›´æœ‰â€œ<strong>There is no data available now.</strong>â€ç›¸å…³çš„è¾“å‡ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œé€šè®¯åŸºç¡€å­¦ä¹ ç¬”è®°ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç½‘ç»œé€šè®¯åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°04ï¼šsocket çš„é˜»å¡æ¨¡å¼å’Œéé˜»å¡æ¨¡å¼</title>
      <link href="/2022/06/21/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B004%EF%BC%9Asocket-%E7%9A%84%E9%98%BB%E5%A1%9E%E6%A8%A1%E5%BC%8F%E5%92%8C%E9%9D%9E%E9%98%BB%E5%A1%9E%E6%A8%A1%E5%BC%8F/"/>
      <url>/2022/06/21/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B004%EF%BC%9Asocket-%E7%9A%84%E9%98%BB%E5%A1%9E%E6%A8%A1%E5%BC%8F%E5%92%8C%E9%9D%9E%E9%98%BB%E5%A1%9E%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°04ï¼šsocket-çš„é˜»å¡æ¨¡å¼å’Œéé˜»å¡æ¨¡å¼">ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°04ï¼šsocket çš„é˜»å¡æ¨¡å¼å’Œéé˜»å¡æ¨¡å¼</h2><h3 id="socket-çš„é˜»å¡æ¨¡å¼å’Œéé˜»å¡æ¨¡å¼">socket çš„é˜»å¡æ¨¡å¼å’Œéé˜»å¡æ¨¡å¼</h3><p>å¯¹ socket åœ¨é˜»å¡å’Œéé˜»å¡æ¨¡å¼ä¸‹çš„å„ä¸ªå‡½æ•°çš„è¡Œä¸ºå·®åˆ«æ·±å…¥çš„ç†è§£æ˜¯æŒæ¡ç½‘ç»œç¼–ç¨‹çš„åŸºæœ¬è¦æ±‚ä¹‹ä¸€ï¼Œæ˜¯é‡ç‚¹ä¹Ÿæ˜¯éš¾ç‚¹ã€‚</p><p>é˜»å¡å’Œéé˜»å¡æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å¸¸è®¨è®ºçš„å…·æœ‰ä¸åŒè¡Œä¸ºè¡¨ç°çš„ socket å‡½æ•°ä¸€èˆ¬æœ‰å¦‚ä¸‹å‡ ä¸ªï¼Œè§ä¸‹è¡¨ï¼š</p><ul><li>connect</li><li>accept</li><li>send (Linux å¹³å°ä¸Šå¯¹ socket è¿›è¡Œæ“ä½œæ—¶ä¹ŸåŒ…æ‹¬ <strong>write</strong> å‡½æ•°ï¼Œä¸‹æ–‡ä¸­å¯¹ send å‡½æ•°çš„è®¨è®ºä¹Ÿé€‚ç”¨äº <strong>write</strong> å‡½æ•°)</li><li>recv (Linux å¹³å°ä¸Šå¯¹ socket è¿›è¡Œæ“ä½œæ—¶ä¹ŸåŒ…æ‹¬ <strong>read</strong> å‡½æ•°ï¼Œä¸‹æ–‡ä¸­å¯¹ recv å‡½æ•°çš„è®¨è®ºä¹Ÿé€‚ç”¨äº <strong>read</strong> å‡½æ•°)</li></ul><p>åœ¨æ­£å¼è®¨è®ºä»¥ä¸Šå››ä¸ªå‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè§£é‡Šä¸€ä¸‹é˜»å¡æ¨¡å¼å’Œéé˜»å¡æ¨¡å¼çš„æ¦‚å¿µã€‚æ‰€è°“<strong>é˜»å¡æ¨¡å¼</strong>ï¼Œ<strong>å°±å½“æŸä¸ªå‡½æ•°â€œæ‰§è¡ŒæˆåŠŸçš„æ¡ä»¶â€å½“å‰ä¸èƒ½æ»¡è¶³æ—¶ï¼Œè¯¥å‡½æ•°ä¼šé˜»å¡å½“å‰æ‰§è¡Œçº¿ç¨‹ï¼Œç¨‹åºæ‰§è¡Œæµåœ¨è¶…æ—¶æ—¶é—´åˆ°è¾¾æˆ–â€œæ‰§è¡ŒæˆåŠŸçš„æ¡ä»¶â€æ»¡è¶³åæ¢å¤ç»§ç»­æ‰§è¡Œ</strong>ã€‚è€Œ<strong>éé˜»å¡æ¨¡å¼</strong>æ°æ°ç›¸åï¼Œå³ä½¿æŸä¸ªå‡½æ•°çš„â€œæ‰§è¡ŒæˆåŠŸçš„æ¡ä»¶â€ä¸å½“å‰ä¸èƒ½æ»¡è¶³ï¼Œè¯¥å‡½æ•°ä¹Ÿä¸ä¼šé˜»å¡å½“å‰æ‰§è¡Œçº¿ç¨‹ï¼Œè€Œæ˜¯ç«‹å³è¿”å›ï¼Œç»§ç»­è¿è¡Œæ‰§è¡Œç¨‹åºæµã€‚å¦‚æœè¯»è€…ä¸å¤ªæ˜ç™½è¿™ä¸¤ä¸ªå®šä¹‰ä¹Ÿæ²¡å…³ç³»ï¼Œåé¢æˆ‘ä»¬ä¼šä»¥å…·ä½“çš„ç¤ºä¾‹æ¥è®²è§£è¿™ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«ã€‚</p><h4 id="å¦‚ä½•å°†-socket-è®¾ç½®æˆéé˜»å¡æ¨¡å¼">å¦‚ä½•å°† socket è®¾ç½®æˆéé˜»å¡æ¨¡å¼</h4><p>æ— è®ºæ˜¯ Windows è¿˜æ˜¯ Linux å¹³å°ï¼Œé»˜è®¤åˆ›å»ºçš„ socket éƒ½æ˜¯é˜»å¡æ¨¡å¼çš„ã€‚</p><p>åœ¨ Linux å¹³å°ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <strong>fcntl() å‡½æ•°</strong>æˆ– <strong>ioctl() å‡½æ•°</strong>ç»™åˆ›å»ºçš„ socket å¢åŠ  <strong>O_NONBLOCK</strong> æ ‡å¿—æ¥å°† socket è®¾ç½®æˆéé˜»å¡æ¨¡å¼ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">int</span> oldSocketFlag = <span class="hljs-keyword">fcntl</span>(sockfd, F_GETFL, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">int</span> newSocketFlag = oldSocketFlag | O_NONBLOCK;<br><span class="hljs-keyword">fcntl</span>(sockfd, F_SETFL,  newSocketFlag);<br></code></pre></td></tr></table></figure><p><strong>ioctl() å‡½æ•°</strong> ä¸ <strong>fcntl()</strong> å‡½æ•°ä½¿ç”¨æ–¹å¼åŸºæœ¬ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸å†ç»™å‡ºç¤ºä¾‹ä»£ç äº†ã€‚</p><p>å½“ç„¶ï¼ŒLinux ä¸‹çš„ <strong>socket()</strong> åˆ›å»ºå‡½æ•°ä¹Ÿå¯ä»¥ç›´æ¥åœ¨åˆ›å»ºæ—¶å°† socket è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ï¼Œ<strong>socket()</strong> å‡½æ•°çš„ç­¾åå¦‚ä¸‹ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-type">int</span> socket(<span class="hljs-type">int</span> <span class="hljs-keyword">domain</span>, <span class="hljs-type">int</span> <span class="hljs-keyword">type</span>, <span class="hljs-type">int</span> protocol);<br></code></pre></td></tr></table></figure><p>ç»™ <strong>type</strong> å‚æ•°å¢åŠ ä¸€ä¸ª <strong>SOCK_NONBLOCK</strong> æ ‡å¿—å³å¯ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">int s</span> = socket(AF_INET, SOCK_STREAM | SOCK_NONBLOCK, IPPROTO_TCP);<br></code></pre></td></tr></table></figure><p>ä¸ä»…å¦‚æ­¤ï¼ŒLinux ç³»ç»Ÿä¸‹åˆ©ç”¨ accept() å‡½æ•°è¿”å›çš„ä»£è¡¨ä¸å®¢æˆ·ç«¯é€šä¿¡çš„ socket ä¹Ÿæä¾›äº†ä¸€ä¸ªæ‰©å±•å‡½æ•° <strong>accept4()</strong>ï¼Œç›´æ¥å°† accept å‡½æ•°è¿”å›çš„ socket è®¾ç½®æˆéé˜»å¡çš„ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">accept</span><span class="hljs-params">(<span class="hljs-type">int</span> sockfd, <span class="hljs-keyword">struct</span> sockaddr *addr, <span class="hljs-type">socklen_t</span> *addrlen)</span></span>; <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">accept4</span><span class="hljs-params">(<span class="hljs-type">int</span> sockfd, <span class="hljs-keyword">struct</span> sockaddr *addr, <span class="hljs-type">socklen_t</span> *addrlen, <span class="hljs-type">int</span> flags)</span></span>;<br></code></pre></td></tr></table></figure><p>åªè¦å°† <strong>accept4()</strong> å‡½æ•°æœ€åä¸€ä¸ªå‚æ•° <strong>flags</strong> è®¾ç½®æˆ <strong>SOCK_NONBLOCK</strong> å³å¯ã€‚ä¹Ÿå°±æ˜¯è¯´ä»¥ä¸‹ä»£ç æ˜¯ç­‰ä»·çš„ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">socklen_t addrlen</span> = sizeof(clientaddr);<br><span class="hljs-attribute">int clientfd</span> = accept4(listenfd, &amp;clientaddr, &amp;addrlen, SOCK_NONBLOCK);<br></code></pre></td></tr></table></figure><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl">socklen_t addrlen = sizeof(clientaddr);<br><span class="hljs-keyword">int</span> clientfd = <span class="hljs-keyword">accept</span>(listenfd, &amp;clientaddr, &amp;addrlen);<br><span class="hljs-keyword">if</span> (clientfd != -<span class="hljs-number">1</span>)<br>&#123;<br>    <span class="hljs-keyword">int</span> oldSocketFlag = <span class="hljs-keyword">fcntl</span>(clientfd, F_GETFL, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">int</span> newSocketFlag = oldSocketFlag | O_NONBLOCK;<br><span class="hljs-keyword">fcntl</span>(clientfd, F_SETFL,  newSocketFlag);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ Windows å¹³å°ä¸Šï¼Œå¯ä»¥è°ƒç”¨ <strong>ioctlsocket() å‡½æ•°</strong> å°† socket è®¾ç½®æˆéé˜»å¡æ¨¡å¼ï¼Œ<strong>ioctlsocket()</strong> ç­¾åå¦‚ä¸‹ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ioctlsocket</span><span class="hljs-params">(SOCKET s, <span class="hljs-type">long</span> cmd, u_long *argp)</span></span>;<br></code></pre></td></tr></table></figure><p>å°† <strong>cmd</strong> å‚æ•°è®¾ç½®ä¸º <strong>FIONBIO</strong>ï¼Œ*<strong>argp</strong> è®¾ç½®ä¸º <strong>0</strong> å³å¯å°† socket è®¾ç½®æˆé˜»å¡æ¨¡å¼ï¼Œè€Œå°† *<strong>argp</strong> è®¾ç½®æˆé <strong>0</strong> å³å¯è®¾ç½®æˆéé˜»å¡æ¨¡å¼ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-comment">//å°† socket è®¾ç½®æˆéé˜»å¡æ¨¡å¼</span><br>u_long argp <span class="hljs-punctuation">=</span> <span class="hljs-number">1</span><span class="hljs-punctuation">;</span><br>ioctlsocket<span class="hljs-punctuation">(</span>s<span class="hljs-punctuation">,</span> FIONBIO<span class="hljs-punctuation">,</span> <span class="hljs-meta">&amp;argp);</span><br><br><span class="hljs-comment">//å°† socket è®¾ç½®æˆé˜»å¡æ¨¡å¼</span><br>u_long argp <span class="hljs-punctuation">=</span> <span class="hljs-number">0</span><span class="hljs-punctuation">;</span><br>ioctlsocket<span class="hljs-punctuation">(</span>s<span class="hljs-punctuation">,</span> FIONBIO<span class="hljs-punctuation">,</span> <span class="hljs-meta">&amp;argp);</span><br></code></pre></td></tr></table></figure><p>Windows å¹³å°éœ€è¦æ³¨æ„ä¸€ä¸ªåœ°æ–¹ï¼Œå¦‚æœå¯¹ä¸€ä¸ª socket è°ƒç”¨äº† <strong>WSAAsyncSelect()</strong> æˆ– <strong>WSAEventSelect()</strong> å‡½æ•°åï¼Œå†è°ƒç”¨ <strong>ioctlsocket()</strong> å‡½æ•°å°†è¯¥ socket è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ä¼šå¤±è´¥ï¼Œä½ å¿…é¡»å…ˆè°ƒç”¨ <strong>WSAAsyncSelect()</strong> é€šè¿‡å°† <strong>lEvent</strong> å‚æ•°ä¸º <strong>0</strong> æˆ–è°ƒç”¨ <strong>WSAEventSelect()</strong> é€šè¿‡è®¾ç½® <strong>lNetworkEvents</strong> å‚æ•°ä¸º <strong>0</strong> æ¥æ¸…é™¤å·²ç»è®¾ç½®çš„ socket ç›¸å…³æ ‡å¿—ä½ï¼Œå†æ¬¡è°ƒç”¨ <strong>ioctlsocket()</strong> å°†è¯¥ socket è®¾ç½®æˆé˜»å¡æ¨¡å¼æ‰ä¼šæˆåŠŸã€‚å› ä¸ºè°ƒç”¨ <strong>WSAAsyncSelect()</strong> æˆ–<strong>WSAEventSelect()</strong> å‡½æ•°ä¼šè‡ªåŠ¨å°† socket è®¾ç½®æˆéé˜»å¡æ¨¡å¼ã€‚MSDN ä¸ŠåŸæ–‡ï¼ˆ<a href="https://docs.microsoft.com/en-us/windows/desktop/api/winsock/nf-winsock-ioctlsocket%EF%BC%89%E5%A6%82%E4%B8%8B%EF%BC%9A">https://docs.microsoft.com/en-us/windows/desktop/api/winsock/nf-winsock-ioctlsocketï¼‰å¦‚ä¸‹ï¼š</a></p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">The WSAAsyncSelect <span class="hljs-keyword">and</span> WSAEventSelect functions automatically <span class="hljs-keyword">set</span> a socket <span class="hljs-keyword">to</span> nonblocking mode. If WSAAsyncSelect <span class="hljs-keyword">or</span> WSAEventSelect has been issued <span class="hljs-keyword">on</span> a socket, <span class="hljs-keyword">then</span> any attempt <span class="hljs-keyword">to</span> use ioctlsocket <span class="hljs-keyword">to</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">the</span> socket <span class="hljs-keyword">back</span> <span class="hljs-keyword">to</span> blocking mode will fail <span class="hljs-keyword">with</span> WSAEINVAL.<br><br>To <span class="hljs-keyword">set</span> <span class="hljs-keyword">the</span> socket <span class="hljs-keyword">back</span> <span class="hljs-keyword">to</span> blocking mode, an <span class="hljs-built_in">application</span> must <span class="hljs-keyword">first</span> disable WSAAsyncSelect <span class="hljs-keyword">by</span> calling WSAAsyncSelect <span class="hljs-keyword">with</span> <span class="hljs-keyword">the</span> lEvent parameter <span class="hljs-keyword">equal</span> <span class="hljs-keyword">to</span> zero, <span class="hljs-keyword">or</span> disable WSAEventSelect <span class="hljs-keyword">by</span> calling WSAEventSelect <span class="hljs-keyword">with</span> <span class="hljs-keyword">the</span> lNetworkEvents parameter <span class="hljs-keyword">equal</span> <span class="hljs-keyword">to</span> zero.<br></code></pre></td></tr></table></figure><p>å…³äº <strong>WSAAsyncSelect()</strong> å’Œ <strong>WSAEventSelect()</strong> è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œåæ–‡ä¸­ä¼šè¯¦ç»†è®²è§£ã€‚</p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼šæ— è®ºæ˜¯ Linux çš„ fcntl å‡½æ•°ï¼Œè¿˜æ˜¯ Windows çš„ ioctlsocketï¼Œå»ºè®®è¯»è€…åœ¨å®é™…ç¼–ç ä¸­åˆ¤æ–­ä¸€ä¸‹å‡½æ•°è¿”å›å€¼ä»¥ç¡®å®šæ˜¯å¦è°ƒç”¨æˆåŠŸã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œé€šè®¯åŸºç¡€å­¦ä¹ ç¬”è®°ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç½‘ç»œé€šä¿¡åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°03ï¼šselect å‡½æ•°ç”¨æ³•</title>
      <link href="/2022/06/20/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B003%EF%BC%9Aselect-%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95/"/>
      <url>/2022/06/20/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B003%EF%BC%9Aselect-%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°03ï¼šselect-å‡½æ•°ç”¨æ³•">ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°03ï¼šselect å‡½æ•°ç”¨æ³•</h2><h3 id="select-å‡½æ•°ç”¨æ³•">select å‡½æ•°ç”¨æ³•</h3><p><strong>select</strong> å‡½æ•°æ˜¯ç½‘ç»œé€šä¿¡ç¼–ç¨‹ä¸­éå¸¸å¸¸ç”¨çš„ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤åº”è¯¥ç†Ÿç»ƒæŒæ¡å®ƒã€‚è™½ç„¶å®ƒæ˜¯ BSD æ ‡å‡†ä¹‹ä¸€çš„ Socket å‡½æ•°ä¹‹ä¸€ï¼Œä½†åœ¨ Linux å’Œ Windows å¹³å°ï¼Œå…¶è¡Œä¸ºè¡¨ç°è¿˜æ˜¯æœ‰ç‚¹åŒºåˆ«çš„ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ Linux å¹³å°ä¸Šçš„ select å‡½æ•°ã€‚</p><h4 id="Linux-å¹³å°ä¸‹çš„-select-å‡½æ•°">Linux å¹³å°ä¸‹çš„ select å‡½æ•°</h4><p><strong>select</strong> å‡½æ•°çš„ä½œç”¨æ˜¯æ£€æµ‹ä¸€ç»„ socket ä¸­æŸä¸ªæˆ–æŸå‡ ä¸ªæ˜¯å¦æœ‰â€œ<strong>äº‹ä»¶</strong>â€å°±ç»ªï¼Œè¿™é‡Œçš„â€œ<strong>äº‹ä»¶</strong>â€ä¸€èˆ¬åˆ†ä¸ºå¦‚ä¸‹ä¸‰ç±»ï¼š</p><ul><li><p><strong>è¯»äº‹ä»¶å°±ç»ª</strong>ï¼š</p><blockquote><ol><li>socket å†…æ ¸ä¸­ï¼Œæ¥æ”¶ç¼“å†²åŒºä¸­çš„å­—èŠ‚æ•°å¤§äºç­‰äºä½æ°´ä½æ ‡è®° SO_RCVLOWATï¼Œæ­¤æ—¶è°ƒç”¨ <strong>recv</strong> æˆ– <strong>read</strong> å‡½æ•°å¯ä»¥æ— é˜»å¡çš„è¯»è¯¥æ–‡ä»¶æè¿°ç¬¦ï¼Œ å¹¶ä¸”è¿”å›å€¼å¤§äº0ï¼›</li><li>TCP è¿æ¥çš„å¯¹ç«¯å…³é—­è¿æ¥ï¼Œæ­¤æ—¶è°ƒç”¨ <strong>recv</strong> æˆ– <strong>read</strong> å‡½æ•°å¯¹è¯¥ socket è¯»ï¼Œåˆ™è¿”å› 0ï¼›</li><li>ä¾¦å¬ socket ä¸Šæœ‰æ–°çš„è¿æ¥è¯·æ±‚ï¼›</li><li>socket ä¸Šæœ‰æœªå¤„ç†çš„é”™è¯¯ã€‚</li></ol></blockquote></li><li><p><strong>å†™äº‹ä»¶å°±ç»ªï¼š</strong></p><blockquote><ol><li>socket å†…æ ¸ä¸­ï¼Œå‘é€ç¼“å†²åŒºä¸­çš„å¯ç”¨å­—èŠ‚æ•°(å‘é€ç¼“å†²åŒºçš„ç©ºé—²ä½ç½®å¤§â¼©) å¤§äºç­‰äºä½æ°´ä½æ ‡è®° SO_SNDLOWATï¼Œæ­¤æ—¶å¯ä»¥æ— é˜»å¡çš„å†™, å¹¶ä¸”è¿”å›å€¼å¤§äº0ï¼›</li><li>socket çš„å†™æ“ä½œè¢«å…³é—­(è°ƒç”¨äº† close æˆ–è€… shutdown å‡½æ•°)ï¼ˆ å¯¹ä¸€ä¸ªå†™æ“ä½œè¢«å…³é—­çš„ socket è¿›è¡Œå†™æ“ä½œ, ä¼šè§¦å‘ SIGPIPE ä¿¡å·ï¼‰ï¼›</li><li>socket ä½¿â½¤éé˜»å¡ connect è¿æ¥æˆåŠŸæˆ–å¤±è´¥ä¹‹åï¼›</li></ol></blockquote></li><li><p><strong>å¼‚å¸¸äº‹ä»¶å°±ç»ª</strong></p><blockquote><p>socket ä¸Šæ”¶åˆ°å¸¦å¤–æ•°æ®ã€‚</p></blockquote></li></ul><p>å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">select</span><span class="hljs-params">(<span class="hljs-type">int</span> nfds, </span></span><br><span class="hljs-params"><span class="hljs-function">   fd_set *readfds,</span></span><br><span class="hljs-params"><span class="hljs-function">           fd_set *writefds,</span></span><br><span class="hljs-params"><span class="hljs-function">           fd_set *exceptfds,</span></span><br><span class="hljs-params"><span class="hljs-function">           <span class="hljs-keyword">struct</span> timeval *timeout)</span></span>;<br></code></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><p>å‚æ•° <strong>nfds</strong>ï¼Œ Linux ä¸‹ socket ä¹Ÿç§° fdï¼Œè¿™ä¸ªå‚æ•°çš„å€¼è®¾ç½®æˆæ‰€æœ‰éœ€è¦ä½¿ç”¨ select å‡½æ•°ç›‘å¬çš„ fd ä¸­æœ€å¤§ fd å€¼åŠ  1ã€‚</p></li><li><p>å‚æ•° <strong>readfds</strong>ï¼Œéœ€è¦ç›‘å¬å¯è¯»äº‹ä»¶çš„ fd é›†åˆã€‚</p></li><li><p>å‚æ•° <strong>writefds</strong>ï¼Œéœ€è¦ç›‘å¬å¯å†™äº‹ä»¶çš„ fd é›†åˆã€‚</p></li><li><p>å‚æ•° <strong>exceptfds</strong>ï¼Œéœ€è¦ç›‘å¬å¼‚å¸¸äº‹ä»¶ fd é›†åˆã€‚</p><p><strong>readfds</strong>ã€<strong>writefds</strong> å’Œ <strong>exceptfds</strong> ç±»å‹éƒ½æ˜¯ <strong>fd_set</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªç»“æ„ä½“ä¿¡æ¯ï¼Œå…¶å®šä¹‰ä½äº <strong>/usr/include/sys/select.h</strong> ä¸­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/* The fd_set member is required to be an array of longs.  */</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">int</span> __fd_mask;<br><br><span class="hljs-comment">/* Some versions of &lt;linux/posix_types.h&gt; define this macros.  */</span><br><span class="hljs-meta">#<span class="hljs-keyword">undef</span>  __NFDBITS</span><br><span class="hljs-comment">/* It&#x27;s easier to assume 8-bit bytes than to get CHAR_BIT.  */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> __NFDBITS       (8 * (int) sizeof (__fd_mask))</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> __FD_ELT(d)     ((d) / __NFDBITS)</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> __FD_MASK(d)    ((__fd_mask) 1 &lt;&lt; ((d) % __NFDBITS))</span><br><br><span class="hljs-comment">/* fd_set for select and pselect.  */</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span><br>  &#123;<br>    <span class="hljs-comment">/* XPG4.2 requires this member name.  Otherwise avoid the name</span><br><span class="hljs-comment">       from the global namespace.  */</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __USE_XOPEN</span><br>    __fd_mask fds_bits[__FD_SETSIZE / __NFDBITS];<br><span class="hljs-meta"># <span class="hljs-keyword">define</span> __FDS_BITS(set) ((set)-&gt;fds_bits)</span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br><span class="hljs-comment">// åœ¨æˆ‘çš„centOS 7.0 ç³»ç»Ÿä¸­çš„å€¼ï¼š</span><br><span class="hljs-comment">// __FD_SETSIZE = 1024</span><br><span class="hljs-comment">//__NFDBITS = 64</span><br>    __fd_mask __fds_bits[__FD_SETSIZE / __NFDBITS]; <br><span class="hljs-meta"># <span class="hljs-keyword">define</span> __FDS_BITS(set) ((set)-&gt;__fds_bits)</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>  &#125; fd_set;<br><br><span class="hljs-comment">/* Maximum number of file descriptors in `fd_set&#x27;.  */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> FD_SETSIZE              __FD_SETSIZE</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å‡è®¾æœªå®šä¹‰å® <strong>__USE_XOPEN</strong>ï¼Œå°†ä¸Šé¢çš„ä»£ç æ•´ç†ä¸€ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span><br>&#123; <br>    <span class="hljs-type">long</span> <span class="hljs-type">int</span> __fds_bits[<span class="hljs-number">16</span>]; <br>&#125; fd_set;<br></code></pre></td></tr></table></figure><p>å°†ä¸€ä¸ª fd æ·»åŠ åˆ° fd_set è¿™ä¸ªé›†åˆä¸­éœ€è¦ä½¿ç”¨ <strong>FD_SET</strong> å®ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">FD_SET</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, fd_set *set)</span></span>;<br></code></pre></td></tr></table></figure><p>å…¶å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">define</span> FD_SET(fd,fdsetp) __FD_SET(fd,fdsetp)</span><br></code></pre></td></tr></table></figure><p><strong>FD_SET</strong> åœ¨å†…éƒ¨åˆæ˜¯é€šè¿‡å® <strong>__FD_SET</strong> æ¥å®ç°çš„ï¼Œ<strong>__FD_SET</strong> çš„å®šä¹‰å¦‚ä¸‹ï¼ˆä½äº <strong>/usr/include/bits/select.h</strong> ä¸­ï¼‰ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">if</span> defined __GNUC__ &amp;&amp; __GNUC__ &gt;= 2</span><br><br><span class="hljs-meta"># <span class="hljs-keyword">if</span> __WORDSIZE == 64</span><br><span class="hljs-meta">#  <span class="hljs-keyword">define</span> __FD_ZERO_STOS <span class="hljs-string">&quot;stosq&quot;</span></span><br><span class="hljs-meta"># <span class="hljs-keyword">else</span></span><br><span class="hljs-meta">#  <span class="hljs-keyword">define</span> __FD_ZERO_STOS <span class="hljs-string">&quot;stosl&quot;</span></span><br><span class="hljs-meta"># <span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta"># <span class="hljs-keyword">define</span> __FD_ZERO(fdsp) \</span><br><span class="hljs-meta">  do &#123;                                                                        \</span><br><span class="hljs-meta">    int __d0, __d1;                                                           \</span><br><span class="hljs-meta">    __asm__ __volatile__ (<span class="hljs-string">&quot;cld; rep; &quot;</span> __FD_ZERO_STOS                         \</span><br><span class="hljs-meta">                          : <span class="hljs-string">&quot;=c&quot;</span> (__d0), <span class="hljs-string">&quot;=D&quot;</span> (__d1)                          \</span><br><span class="hljs-meta">                          : <span class="hljs-string">&quot;a&quot;</span> (0), <span class="hljs-string">&quot;0&quot;</span> (sizeof (fd_set)                     \</span><br><span class="hljs-meta">                                          / sizeof (__fd_mask)),              \</span><br><span class="hljs-meta">                            <span class="hljs-string">&quot;1&quot;</span> (&amp;__FDS_BITS (fdsp)[0])                       \</span><br><span class="hljs-meta">                          : <span class="hljs-string">&quot;memory&quot;</span>);                                        \</span><br><span class="hljs-meta">  &#125; while (0)</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">else</span>   <span class="hljs-comment">/* ! GNU CC */</span></span><br><br><span class="hljs-comment">/* We don&#x27;t use `memset&#x27; because this would require a prototype and</span><br><span class="hljs-comment">   the array isn&#x27;t too big.  */</span><br><span class="hljs-meta"># <span class="hljs-keyword">define</span> __FD_ZERO(set)  \</span><br><span class="hljs-meta">  do &#123;                                                                        \</span><br><span class="hljs-meta">    unsigned int __i;                                                         \</span><br><span class="hljs-meta">    fd_set *__arr = (set);                                                    \</span><br><span class="hljs-meta">    for (__i = 0; __i &lt; sizeof (fd_set) / sizeof (__fd_mask); ++__i)          \</span><br><span class="hljs-meta">      __FDS_BITS (__arr)[__i] = 0;                                            \</span><br><span class="hljs-meta">  &#125; while (0)</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span>  <span class="hljs-comment">/* GNU CC */</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> __FD_SET(d, set) \</span><br><span class="hljs-meta">  ((void) (__FDS_BITS (set)[__FD_ELT (d)] |= __FD_MASK (d)))</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> __FD_CLR(d, set) \</span><br><span class="hljs-meta">  ((void) (__FDS_BITS (set)[__FD_ELT (d)] &amp;= ~__FD_MASK (d)))</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> __FD_ISSET(d, set) \</span><br><span class="hljs-meta">  ((__FDS_BITS (set)[__FD_ELT (d)] &amp; __FD_MASK (d)) != 0)</span><br></code></pre></td></tr></table></figure><p>é‡ç‚¹çœ‹è¿™ä¸€è¡Œï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">((<span class="hljs-type">void</span>) (__FDS_BITS (set)[__FD_ELT (d)] |= __FD_MASK (d)))<br></code></pre></td></tr></table></figure><p><strong>__FD_MASK</strong> å’Œ <strong>__FD_ELT</strong> å®åœ¨ä¸Šé¢çš„ä»£ç ä¸­å·²ç»ç»™å‡ºå®šä¹‰ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">define</span> __FD_ELT(d)     ((d) / __NFDBITS)</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> __FD_MASK(d)    ((__fd_mask) 1 &lt;&lt; ((d) % __NFDBITS))</span><br></code></pre></td></tr></table></figure><p><strong>__NFDBITS</strong> çš„å€¼æ˜¯ <strong>64</strong> ï¼ˆ<strong>8 * 8</strong>ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ **__FD_MASK (d) ** å…ˆè®¡ç®— fd ä¸ 64 çš„ä½™æ•° nï¼Œç„¶åæ‰§è¡Œ 1 &lt;&lt; nï¼Œè¿™ä¸€æ“ä½œå®é™…ä¸Šæ˜¯å°† fd çš„å€¼æ”¾åœ¨ 0ï½63 è¿™ 64 çš„ä½ç½®ä¸Šå»ï¼Œè¿™ä¸ªä½ç½®ç´¢å¼•å°±æ˜¯ fd ä¸ 64 å–æ¨¡çš„ç»“æœï¼›åŒç† <strong>__FD_ELT(d)</strong> å°±æ˜¯è®¡ç®—ä½ç½®ç´¢å¼•å€¼äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç°åœ¨ fd çš„ å€¼æ˜¯ 57ï¼Œé‚£ä¹ˆåœ¨è¿™ 64 ä¸ªä½ç½®çš„ 57 ä½ï¼Œå…¶å€¼åœ¨ 64 ä¸ªé•¿åº¦çš„äºŒè¿›åˆ¶ä¸­ç½®ä½æ˜¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-number">0000 </span><span class="hljs-number">0010 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå€¼å°±æ˜¯ **1 &lt;&lt; (57 % 64) **å¾—åˆ°çš„æ•°å­—ã€‚</p><p>ä½†æ˜¯å‰é¢ fd æ•°ç»„çš„å®šä¹‰æ˜¯ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span><br>&#123; <br>    <span class="hljs-type">long</span> <span class="hljs-type">int</span> __fds_bits[<span class="hljs-number">16</span>];<span class="hljs-comment">//å¯ä»¥çœ‹æˆæ˜¯128 bitçš„æ•°ç»„ </span><br>&#125; fd_set;<br></code></pre></td></tr></table></figure><p><strong>long int</strong> å  8 ä¸ªå­—èŠ‚ï¼Œæ¯ä¸ªå­—èŠ‚ 8 bitï¼Œä¸€å…± 16 ä¸ª <strong>long int</strong>ï¼Œå¦‚æœæ¢æˆäºŒè¿›åˆ¶çš„ä½( <strong>bit</strong> )å°±æ˜¯ <strong>8 * 8 * 16</strong> = <strong>1024</strong>ï¼Œ è¿™è¯´æ˜åœ¨æˆ‘çš„æœºå™¨ä¸Šï¼Œselect å‡½æ•°æ”¯æŒæ“ä½œçš„æœ€å¤§ fd æ•°é‡æ˜¯ 1024ã€‚</p><p>åŒç†ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä» fd_set ä¸Šåˆ é™¤ä¸€ä¸ª fdï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ <strong>FD_CLR</strong>ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">FD_CLR</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, fd_set *set)</span></span>;<br></code></pre></td></tr></table></figure><p>åŸç†å’Œ <strong>FD_SET</strong> ç›¸åŒï¼Œå³å°†å¯¹åº”æ ‡å¿—æ¸…é›¶å³å¯ã€‚</p><p>å¦‚æœï¼Œæˆ‘ä»¬éœ€è¦å°† fd_set ä¸­æ‰€æœ‰çš„ fd éƒ½æ¸…æ‰ï¼Œåˆ™ä½¿ç”¨å® <strong>FD_ZERO</strong>ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">FD_ZERO</span><span class="hljs-params">(fd_set *set)</span></span>;<br></code></pre></td></tr></table></figure><p>å½“ select å‡½æ•°è¿”å›æ—¶ï¼Œ æˆ‘ä»¬ä½¿ç”¨ <strong>FD_ISSET</strong> å®æ¥åˆ¤æ–­æŸä¸ª fd æ˜¯å¦æœ‰æˆ‘ä»¬å…³å¿ƒçš„äº‹ä»¶ï¼Œ<strong>FD_ISSET</strong> å®çš„å®šä¹‰å¦‚ä¸‹ï¼š</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span>  <span class="hljs-title">FD_ISSET</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, fd_set *set)</span></span>;<br></code></pre></td></tr></table></figure><p><strong>FD_ISSET</strong> å®æœ¬è´¨ä¸Šå°±æ˜¯æ£€æµ‹å¯¹åº”çš„ä½ç½®ä¸Šæ˜¯å¦ç½® 1ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">define</span> __FD_ISSET(d, set) \</span><br><span class="hljs-meta">  ((__FDS_BITS (set)[__FD_ELT (d)] &amp; __FD_MASK (d)) != 0)</span><br></code></pre></td></tr></table></figure><blockquote><p>æé†’ä¸€ä¸‹ï¼š __FD_ELT å’Œ __FD_MASK å®å‰æ–‡çš„ä»£ç å·²ç»ç»™è¿‡å…·ä½“å®ç°äº†ã€‚</p></blockquote><ul><li><p>å‚æ•° <strong>timeout</strong>ï¼Œè¶…æ—¶æ—¶é—´ï¼Œå³åœ¨è¿™ä¸ªå‚æ•°è®¾å®šçš„æ—¶é—´å†…æ£€æµ‹è¿™äº› fd çš„äº‹ä»¶ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´å <strong>select</strong> å‡½æ•°å°†ç«‹å³è¿”å›ã€‚è¿™æ˜¯ä¸€ä¸ª <strong>timeval</strong> ç±»å‹ç»“æ„ä½“ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">timeval</span> <br>&#123;<br><span class="hljs-type">long</span>    tv_sec;         <span class="hljs-comment">/* seconds */</span><br><span class="hljs-type">long</span>    tv_usec;        <span class="hljs-comment">/* microseconds */</span><br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>select</strong> å‡½æ•°çš„æ€»è¶…æ—¶æ—¶é—´æ˜¯ <strong>timeout-&gt;tv_sec</strong> å’Œ <strong>timeout-&gt;tv_usec</strong> ä¹‹å’Œï¼Œ å‰è€…çš„æ—¶é—´å•ä½æ˜¯ç§’ï¼Œåè€…çš„æ—¶é—´å•ä½æ˜¯å¾®ç§’ã€‚</p></li></ul><p>è¯´äº†è¿™ä¹ˆå¤šç†è®ºçŸ¥è¯†ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªå…·ä½“çš„ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * selectå‡½æ•°ç¤ºä¾‹ï¼Œserverç«¯, select_server.cpp</span><br><span class="hljs-comment"> * liansixin 2022-6-20</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/time.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;errno.h&gt;</span></span><br><br><span class="hljs-comment">//è‡ªå®šä¹‰ä»£è¡¨æ— æ•ˆfdçš„å€¼</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVALID_FD -1</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªä¾¦å¬socket</span><br>    <span class="hljs-type">int</span> listenfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (listenfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create listen socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//åˆå§‹åŒ–æœåŠ¡å™¨åœ°å€</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> bindaddr;<br>    bindaddr.sin_family = AF_INET;<br>    bindaddr.sin_addr.s_addr = <span class="hljs-built_in">htonl</span>(INADDR_ANY);<br>    bindaddr.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">3000</span>);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bind</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;bindaddr, <span class="hljs-built_in">sizeof</span>(bindaddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;bind listen socket error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-built_in">close</span>(listenfd);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//å¯åŠ¨ä¾¦å¬</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">listen</span>(listenfd, SOMAXCONN) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;listen error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-built_in">close</span>(listenfd);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//å­˜å‚¨å®¢æˆ·ç«¯socketçš„æ•°ç»„</span><br>std::vector&lt;<span class="hljs-type">int</span>&gt; clientfds;<br><span class="hljs-type">int</span> maxfd = listenfd;<br><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) <br>&#123;<br>fd_set readset;<br><span class="hljs-built_in">FD_ZERO</span>(&amp;readset);<br><br><span class="hljs-comment">//å°†ä¾¦å¬socketåŠ å…¥åˆ°å¾…æ£€æµ‹çš„å¯è¯»äº‹ä»¶ä¸­å»</span><br><span class="hljs-built_in">FD_SET</span>(listenfd, &amp;readset);<br><br><span class="hljs-comment">//å°†å®¢æˆ·ç«¯fdåŠ å…¥åˆ°å¾…æ£€æµ‹çš„å¯è¯»äº‹ä»¶ä¸­å»</span><br><span class="hljs-type">int</span> clientfdslength = clientfds.<span class="hljs-built_in">size</span>();<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; clientfdslength; ++i)<br>&#123;<br><span class="hljs-keyword">if</span> (clientfds[i] != INVALID_FD)<br>&#123;<br><span class="hljs-built_in">FD_SET</span>(clientfds[i], &amp;readset);<br>&#125;<br>&#125;<br><br>timeval tm;<br>tm.tv_sec = <span class="hljs-number">1</span>;<br>tm.tv_usec = <span class="hljs-number">0</span>;<br><span class="hljs-comment">//æš‚ä¸”åªæ£€æµ‹å¯è¯»äº‹ä»¶ï¼Œä¸æ£€æµ‹å¯å†™å’Œå¼‚å¸¸äº‹ä»¶</span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">select</span>(maxfd + <span class="hljs-number">1</span>, &amp;readset, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, &amp;tm);<br><span class="hljs-keyword">if</span> (ret == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-comment">//å‡ºé”™ï¼Œé€€å‡ºç¨‹åºã€‚</span><br><span class="hljs-keyword">if</span> (errno != EINTR)<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-comment">//select å‡½æ•°è¶…æ—¶ï¼Œä¸‹æ¬¡ç»§ç»­</span><br><span class="hljs-keyword">continue</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-comment">//æ£€æµ‹åˆ°æŸä¸ªsocketæœ‰äº‹ä»¶</span><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(listenfd, &amp;readset))<br>&#123;<br><span class="hljs-comment">//ä¾¦å¬socketçš„å¯è¯»äº‹ä»¶ï¼Œåˆ™è¡¨æ˜æœ‰æ–°çš„è¿æ¥åˆ°æ¥</span><br><span class="hljs-keyword">struct</span> sockaddr_in clientaddr;<br><span class="hljs-type">socklen_t</span> clientaddrlen = <span class="hljs-built_in">sizeof</span>(clientaddr);<br><span class="hljs-comment">//4. æ¥å—å®¢æˆ·ç«¯è¿æ¥</span><br><span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">accept</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;clientaddr, &amp;clientaddrlen);<br><span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>&#123;         <br><span class="hljs-comment">//æ¥å—è¿æ¥å‡ºé”™ï¼Œé€€å‡ºç¨‹åº</span><br><span class="hljs-keyword">break</span>;<br>&#125;<br><br><span class="hljs-comment">//åªæ¥å—è¿æ¥ï¼Œä¸è°ƒç”¨recvæ”¶å–ä»»ä½•æ•°æ®</span><br>std:: cout &lt;&lt; <span class="hljs-string">&quot;accept a client connection, fd: &quot;</span> &lt;&lt; clientfd &lt;&lt; std::endl;<br>clientfds.<span class="hljs-built_in">push_back</span>(clientfd);<br><span class="hljs-comment">//è®°å½•ä¸€ä¸‹æœ€æ–°çš„æœ€å¤§fdå€¼ï¼Œä»¥ä¾¿ä½œä¸ºä¸‹ä¸€è½®å¾ªç¯ä¸­selectçš„ç¬¬ä¸€ä¸ªå‚æ•°</span><br><span class="hljs-keyword">if</span> (clientfd &gt; maxfd)<br>maxfd = clientfd;<br>&#125; <br><span class="hljs-keyword">else</span> <br>&#123;<br><span class="hljs-comment">//å‡è®¾å¯¹ç«¯å‘æ¥çš„æ•°æ®é•¿åº¦ä¸è¶…è¿‡63ä¸ªå­—ç¬¦</span><br><span class="hljs-type">char</span> recvbuf[<span class="hljs-number">64</span>];<br><span class="hljs-type">int</span> clientfdslength = clientfds.<span class="hljs-built_in">size</span>();<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; clientfdslength; ++i)<br>&#123;<br><span class="hljs-keyword">if</span> (clientfds[i] != <span class="hljs-number">-1</span> &amp;&amp; <span class="hljs-built_in">FD_ISSET</span>(clientfds[i], &amp;readset))<br>&#123;<br><span class="hljs-built_in">memset</span>(recvbuf, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(recvbuf));<br><span class="hljs-comment">//éä¾¦å¬socketï¼Œåˆ™æ¥æ”¶æ•°æ®</span><br><span class="hljs-type">int</span> length = <span class="hljs-built_in">recv</span>(clientfds[i], recvbuf, <span class="hljs-number">64</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (length &lt;= <span class="hljs-number">0</span> &amp;&amp; errno != EINTR)<br>&#123;<br><span class="hljs-comment">//æ”¶å–æ•°æ®å‡ºé”™äº†</span><br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data error, clientfd: &quot;</span> &lt;&lt; clientfds[i] &lt;&lt; std::endl;<br><span class="hljs-built_in">close</span>(clientfds[i]);<br><span class="hljs-comment">//ä¸ç›´æ¥åˆ é™¤è¯¥å…ƒç´ ï¼Œå°†è¯¥ä½ç½®çš„å…ƒç´ ç½®ä½-1</span><br>clientfds[i] = INVALID_FD;<br><span class="hljs-keyword">continue</span>;<br>&#125;<br><br>std::cout &lt;&lt; <span class="hljs-string">&quot;clientfd: &quot;</span> &lt;&lt; clientfds[i] &lt;&lt; <span class="hljs-string">&quot;, recv data: &quot;</span> &lt;&lt; recvbuf &lt;&lt; std::endl;<br>&#125;<br>&#125;<br><br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//å…³é—­æ‰€æœ‰å®¢æˆ·ç«¯socket</span><br><span class="hljs-type">int</span> clientfdslength = clientfds.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; clientfdslength; ++i)<br>&#123;<br><span class="hljs-keyword">if</span> (clientfds[i] != INVALID_FD)<br>&#123;<br><span class="hljs-built_in">close</span>(clientfds[i]);<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//å…³é—­ä¾¦å¬socket</span><br><span class="hljs-built_in">close</span>(listenfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ç¼–è¯‘å¹¶è¿è¡Œç¨‹åºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost testsocket]# g++ -g -o select_server select_server.cpp <br>[root@localhost testsocket]# ./select_server <br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬å†å¤šå¼€å‡ ä¸ª shell çª—å£ï¼Œæˆ‘ä»¬è¿™é‡Œä¸å†ä¸“é—¨ç¼–å†™å®¢æˆ·ç«¯ç¨‹åºäº†ï¼Œæˆ‘ä»¬ä½¿ç”¨ Linux ä¸‹çš„ <strong>nc</strong> æŒ‡ä»¤æ¨¡æ‹Ÿå‡ºä¸¤ä¸ªå®¢æˆ·ç«¯ã€‚</p><p>shell çª—å£1ï¼Œè¿æ¥æˆåŠŸä»¥åå‘é€å­—ç¬¦ä¸² <strong>hello123</strong>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost ~]# nc -v 127.0.0.1 3000<br>Ncat: Version 6.40 ( http://nmap.org/ncat )<br>Ncat: Connected to 127.0.0.1:3000.<br>hello123<br></code></pre></td></tr></table></figure><p>shell çª—å£2ï¼Œè¿æ¥æˆåŠŸä»¥åå‘é€å­—ç¬¦ä¸² <strong>helloworld</strong>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost ~]# nc -v 127.0.0.1 3000<br>Ncat: Version 6.40 ( http://nmap.org/ncat )<br>Ncat: Connected to 127.0.0.1:3000.<br>helloworld<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶æœåŠ¡å™¨ç«¯è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/images/2022-6-20-001.png" alt="upload successful"></p><p>æ³¨æ„ï¼Œç”±äº <strong>nc</strong> å‘é€çš„æ•°æ®æ˜¯æŒ‰æ¢è¡Œç¬¦æ¥åŒºåˆ†çš„ï¼Œæ¯ä¸€ä¸ªæ•°æ®åŒ…é»˜è®¤çš„æ¢è¡Œç¬¦ä»¥**\n** ç»“æŸï¼ˆå½“ç„¶ï¼Œä½ å¯ä»¥ <strong>-C</strong> é€‰é¡¹æ¢æˆ\r\nï¼‰ï¼Œæ‰€ä»¥æœåŠ¡å™¨æ”¶åˆ°æ•°æ®åï¼Œæ˜¾ç¤ºå‡ºæ¥çš„æ•°æ®æ¯ä¸€è¡Œä¸‹é¢éƒ½æœ‰ä¸€ä¸ªç©ºç™½è¡Œã€‚</p><p>å½“æ–­å¼€å„ä¸ªå®¢æˆ·ç«¯è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨ç«¯ select å‡½æ•°å¯¹å„ä¸ªå®¢æˆ·ç«¯ fd æ£€æµ‹æ—¶ï¼Œä»ç„¶ä¼šè§¦å‘å¯è¯»äº‹ä»¶ï¼Œæ­¤æ—¶å¯¹è¿™äº› fd è°ƒç”¨ recv å‡½æ•°ä¼šè¿”å› <strong>0</strong>ï¼ˆrecv å‡½æ•°è¿”å›0ï¼Œè¡¨æ˜å¯¹ç«¯å…³é—­äº†è¿æ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œä¸‹æ–‡æˆ‘ä»¬ä¼šæœ‰ä¸€ç« èŠ‚ä¸“é—¨ä»‹ç»è¿™äº›å‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿå…³é—­è¿™äº›è¿æ¥å°±å¯ä»¥äº†ã€‚</p><p>å®¢æˆ·ç«¯æ–­å¼€è¿æ¥åï¼ŒæœåŠ¡å™¨ç«¯çš„è¿è¡Œè¾“å‡ºç»“æœï¼š</p><p><img src="/images/2022-6-20-0002.png" alt="upload successful"></p><p>ä»¥ä¸Šä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨ç¨‹åºå®ç°çš„åŸºæœ¬æµç¨‹ï¼Œä»£ç è™½ç„¶ç®€å•ï¼Œä½†æ˜¯éå¸¸å…·æœ‰å…¸å‹æ€§å’Œä»£è¡¨æ€§ï¼Œè€Œä¸”åŒæ ·é€‚ç”¨äºå®¢æˆ·ç«¯ç½‘ç»œé€šä¿¡ï¼Œå¦‚æœç”¨äºå®¢æˆ·ç«¯çš„è¯ï¼Œåªéœ€è¦ç”¨ select æ£€æµ‹è¿æ¥ socket å°±å¯ä»¥äº†ï¼Œå¦‚æœè¿æ¥ socket æœ‰å¯è¯»äº‹ä»¶ï¼Œè°ƒç”¨ recv å‡½æ•°æ¥æ¥æ”¶æ•°æ®ï¼Œå‰©ä¸‹çš„é€»è¾‘éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>å…³äºä¸Šè¿°ä»£ç åœ¨å®é™…å¼€å‘ä¸­æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„äº‹é¡¹ï¼Œè¿™é‡Œé€ä¸€æ¥è¯´æ˜ä¸€ä¸‹ï¼š</p><ol><li><p><strong>select å‡½æ•°è°ƒç”¨å‰åä¼šä¿®æ”¹ readfdsã€writefds å’Œ exceptfds è¿™ä¸‰ä¸ªé›†åˆä¸­çš„å†…å®¹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œæ‰€ä»¥å¦‚æœæ‚¨æƒ³ä¸‹æ¬¡è°ƒç”¨ select å¤ç”¨è¿™ä¸ªå˜é‡ï¼Œè®°å¾—åœ¨ä¸‹æ¬¡è°ƒç”¨å‰å†æ¬¡è°ƒç”¨ select å‰å…ˆä½¿ç”¨ FD_ZERO å°†é›†åˆæ¸…é›¶ï¼Œç„¶åè°ƒç”¨ FD_SET å°†éœ€è¦æ£€æµ‹äº‹ä»¶çš„ fd å†æ¬¡æ·»åŠ è¿›å»</strong>ã€‚</p><blockquote><p>select å‡½æ•°è°ƒç”¨ä¹‹åï¼Œ<strong>readfds</strong>ã€<strong>writefds</strong> å’Œ <strong>exceptfds</strong> è¿™ä¸‰ä¸ªé›†åˆä¸­å­˜æ”¾çš„ä¸æ˜¯æˆ‘ä»¬ä¹‹å‰è®¾ç½®è¿›å»çš„ fdï¼Œè€Œæ˜¯æœ‰ç›¸å…³æœ‰è¯»å†™æˆ–å¼‚å¸¸äº‹ä»¶çš„ fdï¼Œä¹Ÿå°±æ˜¯è¯´ select å‡½æ•°ä¼šä¿®æ”¹è¿™ä¸‰ä¸ªå‚æ•°çš„å†…å®¹ï¼Œè¿™ä¹Ÿè¦æ±‚æˆ‘ä»¬<strong>å½“ä¸€ä¸ª fd_set è¢« select å‡½æ•°è°ƒç”¨åï¼Œè¿™ä¸ª fd_set å°±å·²ç»å‘ç”Ÿäº†æ”¹å˜ï¼Œä¸‹æ¬¡å¦‚æœæˆ‘ä»¬éœ€è¦ä½¿ç”¨å®ƒï¼Œå¿…é¡»ä½¿ç”¨ FD_ZERO å®å…ˆæ¸…é›¶ï¼Œå†é‡æ–°å°†æˆ‘ä»¬å…³å¿ƒçš„ fd è®¾ç½®è¿›å»</strong>ã€‚è¿™ç‚¹æˆ‘ä»¬ä» <strong>FD_ISSET</strong> æºç ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼š</p></blockquote></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">define</span> __FD_ISSET(d, set) \</span><br><span class="hljs-meta">   ((__FDS_BITS (set)[__FD_ELT (d)] &amp; __FD_MASK (d)) != 0)</span><br></code></pre></td></tr></table></figure><pre><code class="hljs">   å¦‚æœè°ƒç”¨ select å‡½æ•°ä¹‹åæ²¡æœ‰æ”¹å˜ fd_set é›†åˆï¼Œé‚£ä¹ˆå³ä½¿æŸä¸ª socket ä¸Šæ²¡æœ‰äº‹ä»¶ï¼Œè°ƒç”¨ select å‡½æ•°ä¹‹åæˆ‘ä»¬ç”¨ **FD_ISSET** æ£€æµ‹ï¼Œä¼šåŸè·¯å¾—åˆ°åŸæ¥è®¾ç½®ä¸Šå»çš„ socketã€‚è¿™æ˜¯å¾ˆå¤šåˆå­¦è€…åœ¨å­¦ä¹  select å‡½æ•°å®¹æ˜“çŠ¯çš„ä¸€ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥éªŒè¯ä¸€ä¸‹ï¼Œè¿™æ¬¡æˆ‘ä»¬æŠŠ select å‡½æ•°ç”¨åœ¨å®¢æˆ·ç«¯ã€‚</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * éªŒè¯è°ƒç”¨selectåå¿…é¡»é‡è®¾fd_setï¼Œselect_client.cpp</span><br><span class="hljs-comment"> * liansixin 2022-6-20</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;errno.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_ADDRESS <span class="hljs-string">&quot;127.0.0.1&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_PORT     3000</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªsocket</span><br>    <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create client socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//è¿æ¥æœåŠ¡å™¨</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serveraddr;<br>    serveraddr.sin_family = AF_INET;<br>    serveraddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(SERVER_ADDRESS);<br>    serveraddr.sin_port = <span class="hljs-built_in">htons</span>(SERVER_PORT);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;serveraddr, <span class="hljs-built_in">sizeof</span>(serveraddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;connect socket error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-built_in">close</span>(clientfd);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>fd_set readset;<br><span class="hljs-built_in">FD_ZERO</span>(&amp;readset);<br><br><span class="hljs-comment">//å°†ä¾¦å¬socketåŠ å…¥åˆ°å¾…æ£€æµ‹çš„å¯è¯»äº‹ä»¶ä¸­å»</span><br><span class="hljs-built_in">FD_SET</span>(clientfd, &amp;readset);<br>timeval tm;<br>tm.tv_sec = <span class="hljs-number">5</span>;<br>tm.tv_usec = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> ret;<br><span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;<br>fd_set backup_readset;<br><span class="hljs-built_in">memcpy</span>(&amp;backup_readset, &amp;readset, <span class="hljs-built_in">sizeof</span>(fd_set));<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">memcmp</span>(&amp;readset, &amp;backup_readset, <span class="hljs-built_in">sizeof</span>(fd_set)) == <span class="hljs-number">0</span>)<br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;equal&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;not equal&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-comment">//æš‚ä¸”åªæ£€æµ‹å¯è¯»äº‹ä»¶ï¼Œä¸æ£€æµ‹å¯å†™å’Œå¼‚å¸¸äº‹ä»¶</span><br>ret = <span class="hljs-built_in">select</span>(clientfd + <span class="hljs-number">1</span>, &amp;readset, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, &amp;tm);<br>std::cout &lt;&lt; <span class="hljs-string">&quot;tm.tv_sec: &quot;</span> &lt;&lt; tm.tv_sec &lt;&lt; <span class="hljs-string">&quot;, tm.tv_usec: &quot;</span> &lt;&lt; tm.tv_usec &lt;&lt; std::endl;<br><span class="hljs-keyword">if</span> (ret == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-comment">//é™¤äº†è¢«ä¿¡å·ä¸­æ–­çš„æƒ…å½¢ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯å‡ºé”™</span><br><span class="hljs-keyword">if</span> (errno != EINTR)<br><span class="hljs-keyword">break</span>;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">0</span>)&#123;<br><span class="hljs-comment">//selectå‡½æ•°è¶…æ—¶</span><br>std::cout &lt;&lt; <span class="hljs-string">&quot;no event in specific time interval, countï¼š&quot;</span> &lt;&lt; count &lt;&lt; std::endl;<br>++count;<br><span class="hljs-keyword">continue</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(clientfd, &amp;readset))<br>&#123;<br><span class="hljs-comment">//æ£€æµ‹åˆ°å¯è¯»äº‹ä»¶</span><br><span class="hljs-type">char</span> recvbuf[<span class="hljs-number">32</span>];<br><span class="hljs-built_in">memset</span>(recvbuf, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(recvbuf));<br><span class="hljs-comment">//å‡è®¾å¯¹ç«¯å‘æ•°æ®çš„æ—¶å€™ä¸è¶…è¿‡31ä¸ªå­—ç¬¦ã€‚</span><br><span class="hljs-type">int</span> n = <span class="hljs-built_in">recv</span>(clientfd, recvbuf, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-comment">//é™¤äº†è¢«ä¿¡å·ä¸­æ–­çš„æƒ…å½¢ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯å‡ºé”™</span><br><span class="hljs-keyword">if</span> (errno != EINTR)<br><span class="hljs-keyword">break</span>;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-comment">//å¯¹ç«¯å…³é—­äº†è¿æ¥</span><br><span class="hljs-keyword">break</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data: &quot;</span> &lt;&lt; recvbuf &lt;&lt; std::endl;<br>&#125;<br>&#125;<br><span class="hljs-keyword">else</span> <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;other socket event.&quot;</span> &lt;&lt; std::endl;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//å…³é—­socket</span><br><span class="hljs-built_in">close</span>(clientfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ shell çª—å£è¾“å…¥ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘ç¨‹åºäº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ <strong>select_client</strong>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">g</span>++ -<span class="hljs-selector-tag">g</span> -o select_client select_client<span class="hljs-selector-class">.cpp</span><br></code></pre></td></tr></table></figure><p>è¿™æ¬¡äº§ç”Ÿçš„æ˜¯å®¢æˆ·ç«¯ç¨‹åºï¼ŒæœåŠ¡å™¨ç¨‹åºæˆ‘ä»¬è¿™é‡Œä½¿ç”¨ Linux <strong>nc</strong> å‘½ä»¤æ¥æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œç”±äºå®¢æˆ·ç«¯è¿æ¥çš„æ˜¯ <strong>127.0.0.1:3000</strong> è¿™ä¸ªåœ°å€å’Œç«¯å£å·ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¦å¤–ä¸€ä¸ªshell çª—å£çš„ <strong>nc</strong> å‘½ä»¤çš„å‚æ•°å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">nc</span> -v -l <span class="hljs-number">0.0.0.0</span> <span class="hljs-number">3000</span><br></code></pre></td></tr></table></figure><p>æ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/images/2022-6-20-0003.png" alt="upload successful"></p><p>æ¥ç€æˆ‘ä»¬å¯åŠ¨å®¢æˆ·ç«¯ <strong>select_client</strong>ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@myaliyun</span> testsocket]<span class="hljs-meta"># ./select_client </span><br></code></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæˆ‘æ•…æ„å°†å®¢æˆ·ç«¯ä»£ç ä¸­ select å‡½æ•°çš„è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º5ç§’ï¼Œä»¥è¶³å¤Ÿæˆ‘ä»¬åœ¨è¿™ 5 ç§’å†…ç»™å®¢æˆ·ç«¯å‘ä¸€ä¸ªæ•°æ®ã€‚å¦‚æœæˆ‘ä»¬åœ¨ 5 ç§’å†…ç»™å®¢æˆ·ç«¯å‘é€ <strong>hello</strong> å­—ç¬¦ä¸²ï¼š</p><p>å®¢æˆ·ç«¯è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vim">[root@myaliyun testsocket]# ./select_client <br>equal<br>recv data: hello<br><br>...éƒ¨åˆ†æ•°æ®çœç•¥...<br>not equal<br><span class="hljs-keyword">tm</span>.tv_sec: <span class="hljs-number">0</span>, <span class="hljs-keyword">tm</span>.tv_usec: <span class="hljs-number">0</span><br><span class="hljs-keyword">no</span> event in specific time interval, <span class="hljs-built_in">count</span>ï¼š<span class="hljs-number">31454</span><br>not equal<br><span class="hljs-keyword">tm</span>.tv_sec: <span class="hljs-number">0</span>, <span class="hljs-keyword">tm</span>.tv_usec: <span class="hljs-number">0</span><br><span class="hljs-keyword">no</span> event in specific time interval, <span class="hljs-built_in">count</span>ï¼š<span class="hljs-number">31455</span><br>not equal<br><span class="hljs-keyword">tm</span>.tv_sec: <span class="hljs-number">0</span>, <span class="hljs-keyword">tm</span>.tv_usec: <span class="hljs-number">0</span><br><span class="hljs-keyword">no</span> event in specific time interval, <span class="hljs-built_in">count</span>ï¼š<span class="hljs-number">31456</span><br>not equal<br><span class="hljs-keyword">tm</span>.tv_sec: <span class="hljs-number">0</span>, <span class="hljs-keyword">tm</span>.tv_usec: <span class="hljs-number">0</span><br><span class="hljs-keyword">no</span> event in specific time interval, <span class="hljs-built_in">count</span>ï¼š<span class="hljs-number">31457</span><br>...éƒ¨åˆ†è¾“å‡ºçœç•¥...<br></code></pre></td></tr></table></figure><p>é™¤äº†ç¬¬ä¸€æ¬¡ <strong>select_client</strong> ä¼šè¾“å‡º <strong>equal</strong> å­—æ ·ï¼Œåé¢å†ä¹Ÿæ²¡è¾“å‡ºï¼Œè€Œ <strong>select</strong> å‡½æ•°ä»¥åçš„æ‰§è¡Œç»“æœä¹Ÿæ˜¯è¶…æ—¶ï¼Œå³ä½¿æ­¤æ—¶æœåŠ¡å™¨ç«¯å†æ¬¡ç»™å®¢æˆ·ç«¯å‘é€æ•°æ®ã€‚å› æ­¤éªŒè¯äº†ï¼š<strong>select å‡½æ•°æ‰§è¡Œåï¼Œç¡®å®ä¼šå¯¹ä¸‰ä¸ªå‚æ•°çš„ fd_set è¿›è¡Œä¿®æ”¹</strong> ã€‚</p><p>å› æ­¤åœ¨è°ƒç”¨ <strong>select</strong> å‡½æ•°ä»¥åï¼Œ åŸæ¥ä½ç½®çš„çš„æ ‡å¿—ä½å¯èƒ½å·²ç»ä¸å¤å­˜åœ¨ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„ä»£ç ä¸­è°ƒç”¨ä¸€æ¬¡ <strong>select</strong> å‡½æ•°ä»¥åï¼Œå³ä½¿æœåŠ¡å™¨ç«¯å†æ¬¡å‘é€æ•°æ®è¿‡æ¥ï¼Œ<strong>select</strong> å‡½æ•°ä¹Ÿä¸ä¼šå†å› ä¸ºå­˜åœ¨å¯è¯»äº‹ä»¶è€Œè¿”å›äº†ï¼Œå› ä¸ºç¬¬äºŒæ¬¡ clientfd å·²ç»ä¸åœ¨é‚£ä¸ª read_set ä¸­äº†ã€‚å› æ­¤å¦‚æœå¤ç”¨è¿™äº› fd_set å˜é‡ï¼Œå¿…é¡»æŒ‰ä¸Šæ–‡æ‰€è¯´çš„é‡æ–°æ¸…é›¶å†é‡æ–°æ·»åŠ å…³å¿ƒçš„ socket åˆ°é›†åˆä¸­å»ã€‚</p><ol start="2"><li><p><strong>select å‡½æ•°ä¹Ÿä¼šä¿®æ”¹ timeval ç»“æ„ä½“çš„å€¼ï¼Œè¿™ä¹Ÿè¦æ±‚æˆ‘ä»¬å¦‚æœåƒå¤ç”¨è¿™ä¸ªå˜é‡ï¼Œå¿…é¡»ç»™ timeval å˜é‡é‡æ–°è®¾ç½®å€¼ã€‚</strong></p><p>æ³¨æ„è§‚å¯Ÿä¸Šé¢çš„ä¾‹å­çš„è¾“å‡ºï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨ <strong>select</strong> å‡½æ•°ä¸€æ¬¡ä¹‹åï¼Œå˜é‡ tv çš„å€¼ä¹Ÿè¢«ä¿®æ”¹äº†ã€‚å…·ä½“ä¿®æ”¹æˆå¤šå°‘ï¼Œå¾—çœ‹ç³»ç»Ÿçš„è¡¨ç°ã€‚å½“ç„¶è¿™ç§ç‰¹æ€§å´ä¸æ˜¯è·¨å¹³å°çš„ï¼Œåœ¨ Linux ç³»ç»Ÿä¸­æ˜¯è¿™æ ·çš„ï¼Œè€Œåœ¨å…¶ä»–æ“ä½œç³»ç»Ÿä¸Šå´ä¸ä¸€å®šæ˜¯è¿™æ ·ï¼ˆWindows ä¸Šå°±ä¸ä¼šä¿®æ”¹è¿™ä¸ªç»“æ„ä½“çš„å€¼ï¼‰ï¼Œè¿™ç‚¹åœ¨ Linux man æ‰‹å†Œ <strong>select</strong> å‡½æ•°çš„è¯´æ˜ä¸­è¯´çš„å¾ˆæ¸…æ¥šï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">On</span>  Linux,  <span class="hljs-keyword">select</span>()  modifies timeout <span class="hljs-keyword">to</span> reflect the amount <span class="hljs-keyword">of</span> <span class="hljs-type">time</span> <span class="hljs-keyword">not</span> slept; most other implementations <span class="hljs-keyword">do</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">do</span> this.(POSIX<span class="hljs-number">.1</span><span class="hljs-number">-2001</span> permits either behavior.)  This causes problems <span class="hljs-keyword">both</span> <span class="hljs-keyword">when</span> Linux code which reads timeout <span class="hljs-keyword">is</span> ported <span class="hljs-keyword">to</span>  other operating systems, <span class="hljs-keyword">and</span> <span class="hljs-keyword">when</span> code <span class="hljs-keyword">is</span> ported <span class="hljs-keyword">to</span> Linux that reuses a struct timeval <span class="hljs-keyword">for</span> multiple <span class="hljs-keyword">select</span>()s <span class="hljs-keyword">in</span> a <span class="hljs-keyword">loop</span> <span class="hljs-keyword">without</span> reinitializing it.  Consider timeout <span class="hljs-keyword">to</span> be undefined <span class="hljs-keyword">after</span> <span class="hljs-keyword">select</span>() <span class="hljs-keyword">returns</span>.<br></code></pre></td></tr></table></figure><p>ç”±äºä¸åŒç³»ç»Ÿçš„å®ç°ä¸ä¸€æ ·ï¼Œman æ‰‹å†Œçš„å»ºè®®å°† <strong>select</strong> å‡½æ•°ä¿®æ”¹ <strong>timeval</strong> ç»“æ„ä½“çš„å€¼çš„è¡Œä¸ºå½“ä½œæ˜¯æœªå®šä¹‰çš„ï¼Œè¨€ä¸‹ä¹‹æ„æ˜¯<strong>å¦‚æœä½ è¦ä¸‹æ¬¡ä½¿ç”¨ select å‡½æ•°å¤ç”¨è¿™ä¸ªå˜é‡æ—¶ï¼Œè®°å¾—é‡æ–°èµ‹å€¼</strong>ã€‚è¿™æ˜¯ select å‡½æ•°éœ€è¦æ³¨æ„çš„ç¬¬äºŒä¸ªåœ°æ–¹ã€‚</p></li><li><p><strong>select å‡½æ•°çš„ timeval ç»“æ„ä½“çš„ tv_sec å’Œ tv_sec å¦‚æœä¸¤ä¸ªå€¼è®¾ç½®ä¸º 0ï¼Œå³æ£€æµ‹äº‹ä»¶æ€»æ—¶é—´è®¾ç½®ä¸º0ï¼Œå…¶è¡Œä¸ºæ˜¯ select ä¼šæ£€æµ‹ä¸€ä¸‹ç›¸å…³é›†åˆä¸­çš„ fdï¼Œå¦‚æœæ²¡æœ‰éœ€è¦çš„äº‹ä»¶ï¼Œåˆ™ç«‹å³è¿”å›</strong>ã€‚</p><p>æˆ‘ä»¬å°†ä¸Šè¿° <strong>select_client.cpp</strong> ä¿®æ”¹ä¸€ä¸‹ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š</p></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* éªŒè¯selectæ—¶é—´å‚æ•°è®¾ç½®ä¸º0ï¼Œselect_client_tv0.cpp</span><br><span class="hljs-comment">* liansixin 2022-6-20</span><br><span class="hljs-comment">*/</span><br>   <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br>   <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br>   <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br>   <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br>   <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br>   <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br>   <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;errno.h&gt;</span></span><br>   <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br>   <br>   <span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_ADDRESS <span class="hljs-string">&quot;127.0.0.1&quot;</span></span><br>   <span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_PORT     3000</span><br>   <br>   <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function">   </span>&#123;<br>       <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªsocket</span><br>       <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>       <span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>       &#123;<br>           std::cout &lt;&lt; <span class="hljs-string">&quot;create client socket error.&quot;</span> &lt;&lt; std::endl;<br>           <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>       &#125;<br>   <br>       <span class="hljs-comment">//è¿æ¥æœåŠ¡å™¨</span><br>       <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serveraddr;<br>       serveraddr.sin_family = AF_INET;<br>       serveraddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(SERVER_ADDRESS);<br>       serveraddr.sin_port = <span class="hljs-built_in">htons</span>(SERVER_PORT);<br>       <span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;serveraddr, <span class="hljs-built_in">sizeof</span>(serveraddr)) == <span class="hljs-number">-1</span>)<br>       &#123;<br>           std::cout &lt;&lt; <span class="hljs-string">&quot;connect socket error.&quot;</span> &lt;&lt; std::endl;<br>   <span class="hljs-built_in">close</span>(clientfd);<br>           <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>       &#125;<br>   <br>   <span class="hljs-type">int</span> ret;<br>   <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>   &#123;<br>   fd_set readset;<br>   <span class="hljs-built_in">FD_ZERO</span>(&amp;readset);<br>   <span class="hljs-comment">//å°†ä¾¦å¬socketåŠ å…¥åˆ°å¾…æ£€æµ‹çš„å¯è¯»äº‹ä»¶ä¸­å»</span><br>   <span class="hljs-built_in">FD_SET</span>(clientfd, &amp;readset);<br>   timeval tm;<br>   tm.tv_sec = <span class="hljs-number">0</span>;<br>   tm.tv_usec = <span class="hljs-number">0</span>;<br>   <br>   <span class="hljs-comment">//æš‚ä¸”åªæ£€æµ‹å¯è¯»äº‹ä»¶ï¼Œä¸æ£€æµ‹å¯å†™å’Œå¼‚å¸¸äº‹ä»¶</span><br>   ret = <span class="hljs-built_in">select</span>(clientfd + <span class="hljs-number">1</span>, &amp;readset, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, &amp;tm);<br>   std::cout &lt;&lt; <span class="hljs-string">&quot;tm.tv_sec: &quot;</span> &lt;&lt; tm.tv_sec &lt;&lt; <span class="hljs-string">&quot;, tm.tv_usec: &quot;</span> &lt;&lt; tm.tv_usec &lt;&lt; std::endl;<br>   <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">-1</span>)<br>   &#123;<br>   <span class="hljs-comment">//é™¤äº†è¢«ä¿¡å·ä¸­æ–­çš„æƒ…å½¢ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯å‡ºé”™</span><br>   <span class="hljs-keyword">if</span> (errno != EINTR)<br>   <span class="hljs-keyword">break</span>;<br>   &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">0</span>)&#123;<br>   <span class="hljs-comment">//selectå‡½æ•°è¶…æ—¶</span><br>   std::cout &lt;&lt; <span class="hljs-string">&quot;no event in specific time interval.&quot;</span> &lt;&lt; std::endl;<br>   <span class="hljs-keyword">continue</span>;<br>   &#125; <span class="hljs-keyword">else</span> &#123;<br>   <span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(clientfd, &amp;readset))<br>   &#123;<br>   <span class="hljs-comment">//æ£€æµ‹åˆ°å¯è¯»äº‹ä»¶</span><br>   <span class="hljs-type">char</span> recvbuf[<span class="hljs-number">32</span>];<br>   <span class="hljs-built_in">memset</span>(recvbuf, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(recvbuf));<br>   <span class="hljs-comment">//å‡è®¾å¯¹ç«¯å‘æ•°æ®çš„æ—¶å€™ä¸è¶…è¿‡31ä¸ªå­—ç¬¦ã€‚</span><br>   <span class="hljs-type">int</span> n = <span class="hljs-built_in">recv</span>(clientfd, recvbuf, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>);<br>   <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">0</span>)<br>   &#123;<br>   <span class="hljs-comment">//é™¤äº†è¢«ä¿¡å·ä¸­æ–­çš„æƒ…å½¢ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯å‡ºé”™</span><br>   <span class="hljs-keyword">if</span> (errno != EINTR)<br>   <span class="hljs-keyword">break</span>;<br>   &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) &#123;<br>   <span class="hljs-comment">//å¯¹ç«¯å…³é—­äº†è¿æ¥</span><br>   <span class="hljs-keyword">break</span>;<br>   &#125; <span class="hljs-keyword">else</span> &#123;<br>   std::cout &lt;&lt; <span class="hljs-string">&quot;recv data: &quot;</span> &lt;&lt; recvbuf &lt;&lt; std::endl;<br>   &#125;<br>   &#125;<br>   <span class="hljs-keyword">else</span> <br>   &#123;<br>   std::cout &lt;&lt; <span class="hljs-string">&quot;other socket event.&quot;</span> &lt;&lt; std::endl;<br>   &#125;<br>   &#125;<br>   &#125;<br>   <br>   <br>   <span class="hljs-comment">//å…³é—­socket</span><br>   <span class="hljs-built_in">close</span>(clientfd);<br>   <br>       <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>   &#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœç¡®å®å¦‚æˆ‘ä»¬é¢„æœŸçš„ï¼Œè¿™é‡Œ select å‡½æ•°åªæ˜¯ç®€å•åœ°æ£€æµ‹ä¸€ä¸‹ clientfdï¼Œå¹¶ä¸ä¼šç­‰å¾…å›ºå®šçš„æ—¶é—´ï¼Œç„¶åç«‹å³è¿”å›ã€‚</p><ol start="4"><li><p><strong>å¦‚æœå°† select å‡½æ•°çš„ timeval å‚æ•°è®¾ç½®ä¸º NULLï¼Œåˆ™ select å‡½æ•°ä¼šä¸€ç›´é˜»å¡ä¸‹å»ï¼Œç›´åˆ°æˆ‘ä»¬éœ€è¦çš„äº‹ä»¶è§¦å‘ã€‚</strong></p><p>æˆ‘ä»¬å°†ä¸Šè¿°ä»£ç å†ä¿®æ”¹ä¸€ä¸‹ï¼š</p></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * éªŒè¯selectæ—¶é—´å‚æ•°è®¾ç½®ä¸ºNULLï¼Œselect_client_tvnull.cpp</span><br><span class="hljs-comment"> * liansixin 2022-6-20</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;errno.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_ADDRESS <span class="hljs-string">&quot;127.0.0.1&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_PORT     3000</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªsocket</span><br>    <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create client socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//è¿æ¥æœåŠ¡å™¨</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serveraddr;<br>    serveraddr.sin_family = AF_INET;<br>    serveraddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(SERVER_ADDRESS);<br>    serveraddr.sin_port = <span class="hljs-built_in">htons</span>(SERVER_PORT);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;serveraddr, <span class="hljs-built_in">sizeof</span>(serveraddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;connect socket error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-built_in">close</span>(clientfd);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-type">int</span> ret;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br>fd_set readset;<br><span class="hljs-built_in">FD_ZERO</span>(&amp;readset);<br><span class="hljs-comment">//å°†ä¾¦å¬socketåŠ å…¥åˆ°å¾…æ£€æµ‹çš„å¯è¯»äº‹ä»¶ä¸­å»</span><br><span class="hljs-built_in">FD_SET</span>(clientfd, &amp;readset);<br><span class="hljs-comment">//timeval tm;</span><br><span class="hljs-comment">//tm.tv_sec = 0;</span><br><span class="hljs-comment">//tm.tv_usec = 0;</span><br><br><span class="hljs-comment">//æš‚ä¸”åªæ£€æµ‹å¯è¯»äº‹ä»¶ï¼Œä¸æ£€æµ‹å¯å†™å’Œå¼‚å¸¸äº‹ä»¶</span><br>ret = <span class="hljs-built_in">select</span>(clientfd + <span class="hljs-number">1</span>, &amp;readset, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>);<br><span class="hljs-keyword">if</span> (ret == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-comment">//é™¤äº†è¢«ä¿¡å·ä¸­æ–­çš„æƒ…å½¢ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯å‡ºé”™</span><br><span class="hljs-keyword">if</span> (errno != EINTR)<br><span class="hljs-keyword">break</span>;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">0</span>)&#123;<br><span class="hljs-comment">//selectå‡½æ•°è¶…æ—¶</span><br>std::cout &lt;&lt; <span class="hljs-string">&quot;no event in specific time interval.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">continue</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">FD_ISSET</span>(clientfd, &amp;readset))<br>&#123;<br><span class="hljs-comment">//æ£€æµ‹åˆ°å¯è¯»äº‹ä»¶</span><br><span class="hljs-type">char</span> recvbuf[<span class="hljs-number">32</span>];<br><span class="hljs-built_in">memset</span>(recvbuf, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(recvbuf));<br><span class="hljs-comment">//å‡è®¾å¯¹ç«¯å‘æ•°æ®çš„æ—¶å€™ä¸è¶…è¿‡31ä¸ªå­—ç¬¦ã€‚</span><br><span class="hljs-type">int</span> n = <span class="hljs-built_in">recv</span>(clientfd, recvbuf, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-comment">//é™¤äº†è¢«ä¿¡å·ä¸­æ–­çš„æƒ…å½¢ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯å‡ºé”™</span><br><span class="hljs-keyword">if</span> (errno != EINTR)<br><span class="hljs-keyword">break</span>;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-comment">//å¯¹ç«¯å…³é—­äº†è¿æ¥</span><br><span class="hljs-keyword">break</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data: &quot;</span> &lt;&lt; recvbuf &lt;&lt; std::endl;<br>&#125;<br>&#125;<br><span class="hljs-keyword">else</span> <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;other socket event.&quot;</span> &lt;&lt; std::endl;<br>&#125;<br>&#125;<br>&#125;<br><br><br><span class="hljs-comment">//å…³é—­socket</span><br><span class="hljs-built_in">close</span>(clientfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆåœ¨å¦å¤–ä¸€ä¸ª shell çª—å£ç”¨ <strong>nc</strong> å‘½ä»¤æ¨¡æ‹Ÿä¸€ä¸ªæœåŠ¡å™¨ï¼Œç›‘å¬çš„ ip åœ°å€å’Œç«¯å£å·æ˜¯ <strong>0.0.0.0:3000</strong>ï¼š</p>   <figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">[root@myaliyun ~]<span class="hljs-meta"># nc -v -l 0.0.0.0 3000</span><br><span class="hljs-symbol">Ncat:</span> Version <span class="hljs-number">6.40</span> ( http://nmap<span class="hljs-meta">.org</span>/ncat )<br><span class="hljs-symbol">Ncat:</span> Listening on <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">3000</span><br></code></pre></td></tr></table></figure><p>ç„¶åå›åˆ°åŸæ¥çš„ shell çª—å£ï¼Œç¼–è¯‘ä¸Šè¿° <strong>select_client_tvnull.cpp</strong>ï¼Œå¹¶ä½¿ç”¨ gdb è¿è¡Œç¨‹åºï¼Œè¿™æ¬¡ä½¿ç”¨ gdb è¿è¡Œç¨‹åºçš„ç›®çš„æ˜¯ä¸ºäº†å½“ç¨‹åºâ€œå¡â€åœ¨æŸä¸ªä½ç½®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Ctrl + C æŠŠç¨‹åºä¸­æ–­ä¸‹æ¥çœ‹çœ‹ç¨‹åºé˜»å¡åœ¨å“ªä¸ªå‡½æ•°è°ƒç”¨å¤„ï¼š</p>   <figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs nix">[root@myaliyun testsocket]<span class="hljs-comment"># g++ -g -o select_client_tvnull select_client_tvnull.cpp </span><br>[root@myaliyun testsocket]<span class="hljs-comment"># gdb select_client_tvnull</span><br>Reading symbols from <span class="hljs-symbol">/root/testsocket/select_client_tvnull...done.</span><br>(gdb) r<br>Starting <span class="hljs-params">program:</span> <span class="hljs-symbol">/root/testsocket/select_client_tvnull</span> <br>^C<br>Program received signal SIGINT, Interrupt.<br><span class="hljs-number">0</span>x00007ffff72e7783 <span class="hljs-keyword">in</span> __select_nocancel () from <span class="hljs-symbol">/lib64/libc.so.6</span><br>Missing separate debuginfos, <span class="hljs-params">use:</span> debuginfo-install glibc-<span class="hljs-number">2.1</span>7-<span class="hljs-number">196</span>.el7_4.<span class="hljs-number">2</span>.x86_64 libgcc-<span class="hljs-number">4.8</span>.<span class="hljs-number">5</span><span class="hljs-operator">-</span><span class="hljs-number">16</span>.el7_4.<span class="hljs-number">1</span>.x86_64 libstdc<span class="hljs-operator">++</span><span class="hljs-operator">-</span><span class="hljs-number">4.8</span>.<span class="hljs-number">5</span><span class="hljs-operator">-</span><span class="hljs-number">16</span>.el7_4.<span class="hljs-number">1</span>.x86_64<br>(gdb) bt<br><span class="hljs-comment">#0  0x00007ffff72e7783 in __select_nocancel () from /lib64/libc.so.6</span><br><span class="hljs-comment">#1  0x0000000000400c75 in main (argc=1, argv=0x7fffffffe5f8) at select_client_tvnull.cpp:51</span><br>(gdb) c<br>Continuing.<br>recv <span class="hljs-params">data:</span> hello<br><br>^C<br>Program received signal SIGINT, Interrupt.<br><span class="hljs-number">0</span>x00007ffff72e7783 <span class="hljs-keyword">in</span> __select_nocancel () from <span class="hljs-symbol">/lib64/libc.so.6</span><br>(gdb) c<br>Continuing.<br>recv <span class="hljs-params">data:</span> world<br><br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šè¾“å‡ºç»“æœæ‰€ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨ gdb çš„ <strong>r</strong> å‘½ä»¤ï¼ˆrunï¼‰å°†ç¨‹åºè·‘èµ·æ¥åï¼Œç¨‹åºå¡åœ¨æŸä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬æŒ‰ Ctrl + C</p><p>ï¼ˆä»£ç ä¸­çš„ <strong>^C</strong>ï¼‰ä¸­æ–­ç¨‹åºåä½¿ç”¨ <strong>bt</strong> å‘½ä»¤æŸ¥çœ‹å½“å‰ç¨‹åºçš„è°ƒç”¨å †æ ˆï¼Œå‘ç°ç¡®å®é˜»å¡åœ¨ <strong>select</strong> å‡½æ•°è°ƒç”¨å¤„ï¼›æ¥ç€æˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯ç»™å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª <strong>hello</strong> æ•°æ®ï¼š</p>   <figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">[root@myaliyun ~]<span class="hljs-meta"># nc -v -l 0.0.0.0 3000</span><br><span class="hljs-symbol">Ncat:</span> Version <span class="hljs-number">6.40</span> ( http://nmap<span class="hljs-meta">.org</span>/ncat )<br><span class="hljs-symbol">Ncat:</span> Listening on <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">3000</span><br><span class="hljs-symbol">Ncat:</span> Connection from <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.<br><span class="hljs-symbol">Ncat:</span> Connection from <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">55968.</span><br>hello<br></code></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åï¼Œ<strong>select</strong> å‡½æ•°æ»¡è¶³æ¡ä»¶ï¼Œç«‹å³è¿”å›ï¼Œå¹¶å°†æ•°æ®è¾“å‡ºæ¥åç»§ç»­è¿›è¡Œä¸‹ä¸€è½® <strong>select</strong> æ£€æµ‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ Ctrl + C å°†ç¨‹åºä¸­æ–­ï¼Œå‘ç°ç¨‹åºåˆé˜»å¡åœ¨ <strong>select</strong> è°ƒç”¨å¤„ï¼›è¾“å…¥ <strong>c</strong> å‘½ä»¤ï¼ˆcontinueï¼‰è®©ç¨‹åºç»§ç»­è¿è¡Œï¼Œ æ­¤æ—¶ï¼Œæˆ‘ä»¬å†ç”¨æœåŠ¡å™¨ç«¯ç»™å®¢æˆ·ç«¯å‘é€ <strong>world</strong> å­—ç¬¦ä¸²ï¼Œ<strong>select</strong> å‡½æ•°å†æ¬¡è¿”å›ï¼Œå¹¶å°†æ•°æ®æ‰“å°å‡ºæ¥ï¼Œç„¶åç»§ç»­è¿›å…¥ä¸‹ä¸€è½® select æ£€æµ‹ï¼Œå¹¶ç»§ç»­åœ¨ select å¤„é˜»å¡ã€‚</p>   <figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">[root@myaliyun ~]<span class="hljs-meta"># nc -v -l 0.0.0.0 3000</span><br><span class="hljs-symbol">Ncat:</span> Version <span class="hljs-number">6.40</span> ( http://nmap<span class="hljs-meta">.org</span>/ncat )<br><span class="hljs-symbol">Ncat:</span> Listening on <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">3000</span><br><span class="hljs-symbol">Ncat:</span> Connection from <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.<br><span class="hljs-symbol">Ncat:</span> Connection from <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">55968.</span><br>hello<br>world<br></code></pre></td></tr></table></figure><ol start="5"><li><strong>åœ¨ Linux å¹³å°ä¸Šï¼Œselect å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»è®¾ç½®æˆéœ€è¦æ£€æµ‹äº‹ä»¶çš„æ‰€æœ‰ fd ä¸­çš„æœ€å¤§å€¼åŠ  1</strong>ã€‚æ‰€ä»¥ä¸Šæ–‡ä¸­ <strong>select_server.cpp</strong> ä¸­ï¼Œæ¯æ–°äº§ç”Ÿä¸€ä¸ª clientfdï¼Œæˆ‘éƒ½ä¼šä¸å½“å‰æœ€å¤§çš„ <strong>maxfd</strong> ä½œæ¯”è¾ƒï¼Œå¦‚æœå¤§äºå½“å‰çš„ <strong>maxfd</strong> åˆ™å°† <strong>maxfd</strong> æ›´æ–°æˆè¿™ä¸ªæ–°çš„æœ€å¤§å€¼ã€‚å…¶æœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†åœ¨ <strong>select</strong> è°ƒç”¨æ—¶ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆåŠ  1ï¼‰ä¼ è¿›å»ã€‚</li></ol><blockquote><p>åœ¨ Windows å¹³å°ä¸Šï¼Œselect å‡½æ•°çš„ç¬¬ä¸€ä¸ªå€¼ä¼ ä»»æ„å€¼éƒ½å¯ä»¥ï¼ŒWindows ç³»ç»Ÿæœ¬èº«ä¸ä½¿ç”¨è¿™ä¸ªå€¼ï¼Œåªæ˜¯ä¸ºäº†å…¼å®¹æ€§è€Œä¿ç•™äº†è¿™ä¸ªå‚æ•°ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ä¸ºäº†å…¼å®¹è·¨å¹³å°ä»£ç ï¼Œä¹Ÿä¼šæŒ‰æƒ¯ä¾‹ï¼Œå°†è¿™ä¸ªå€¼è®¾ç½®ä¸ºæœ€å¤§ socket åŠ  1ã€‚è¿™ç‚¹è¯·è¯»è€…æ³¨æ„ã€‚</p></blockquote><p>ä»¥ä¸Šæ˜¯æˆ‘æ€»ç»“çš„ Linux ä¸‹ select ä½¿ç”¨çš„<strong>äº”ä¸ªæ³¨æ„äº‹é¡¹</strong>ï¼Œå¸Œæœ›è¯»è€…èƒ½ç†è§£å®ƒä»¬ã€‚</p><p>Linux select å‡½æ•°çš„ç¼ºç‚¹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š</p><ul><li>æ¯æ¬¡è°ƒç”¨ <strong>select</strong> å‡½æ•°ï¼Œéƒ½éœ€è¦æŠŠ fd é›†åˆä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œè¿™ä¸ªå¼€é”€åœ¨ fd è¾ƒå¤šæ—¶ä¼šå¾ˆå¤§ï¼ŒåŒæ—¶æ¯æ¬¡è°ƒç”¨ <strong>select</strong> å‡½æ•°éƒ½éœ€è¦åœ¨å†…æ ¸éå†ä¼ é€’è¿›æ¥çš„æ‰€æœ‰ fdï¼Œè¿™ä¸ªå¼€é”€åœ¨ fd è¾ƒå¤šæ—¶ä¹Ÿå¾ˆå¤§ï¼›</li><li>å•ä¸ªè¿›ç¨‹èƒ½å¤Ÿç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡å­˜åœ¨æœ€å¤§é™åˆ¶ï¼Œåœ¨ Linux ä¸Šä¸€èˆ¬ä¸º 1024ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹å®å®šä¹‰ç„¶åé‡æ–°ç¼–è¯‘å†…æ ¸çš„æ–¹å¼æå‡è¿™ä¸€é™åˆ¶ï¼Œè¿™æ ·éå¸¸éº»çƒ¦è€Œä¸”æ•ˆç‡ä½ä¸‹ï¼›</li><li><strong>select</strong> å‡½æ•°åœ¨æ¯æ¬¡è°ƒç”¨ä¹‹å‰éƒ½è¦å¯¹ä¼ å…¥å‚æ•°è¿›è¡Œé‡æ–°è®¾å®šï¼Œè¿™æ ·åšæ¯”è¾ƒéº»çƒ¦è€Œä¸”ä¼šé™ä½æ€§èƒ½ã€‚</li></ul><blockquote><p>åœ¨ Linux å¹³å°ä¸Šï¼Œselect å‡½æ•°çš„å®ç°æ˜¯åˆ©ç”¨ poll å‡½æ•°çš„ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥æŸ¥æ‰¾ä¸€ä¸‹ç›¸å…³çš„èµ„æ–™æ¥é˜…è¯»ä¸€ä¸‹ã€‚å…³äº poll å‡½æ•°çš„ä½¿ç”¨ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¼šä»‹ç»ã€‚</p></blockquote><h4 id="Windows-å¹³å°ä¸Š-select-å‡½æ•°ä¸ä¼šä¿®æ”¹-timeval-çš„å€¼">Windows å¹³å°ä¸Š select å‡½æ•°ä¸ä¼šä¿®æ”¹ timeval çš„å€¼</h4><p>ä¸Šæ–‡æåˆ°ï¼Œåœ¨ Windows ç³»ç»Ÿä¸Šï¼Œ<strong>select</strong> å‡½æ•°ç»“æŸåï¼Œä¸ä¼šä¿®æ”¹å…¶å‚æ•° <strong>timeval</strong> çš„å€¼ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™æ®µä»£ç æ¥éªŒè¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">Connect</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* pServer, <span class="hljs-type">short</span> nPort)</span></span><br><span class="hljs-function"></span>&#123;<br>    SOCKET hSocket = ::<span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (hSocket == INVALID_SOCKET)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-comment">//å°†socketè®¾ç½®æˆéé˜»å¡çš„</span><br>    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> on = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (::<span class="hljs-built_in">ioctlsocket</span>(hSocket, FIONBIO, &amp;on) == SOCKET_ERROR)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> addrSrv = &#123; <span class="hljs-number">0</span> &#125;;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">hostent</span>* pHostent = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> addr = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">if</span> ((addrSrv.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(pServer) == INADDR_NONE)<br>    &#123;<br>        pHostent = ::<span class="hljs-built_in">gethostbyname</span>(pServer);<br>        <span class="hljs-keyword">if</span> (!pHostent)      <br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">else</span><br>            addrSrv.sin_addr.s_addr = *((<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span>*)pHostent-&gt;h_addr);<br>    &#125;<br><br>    addrSrv.sin_family = AF_INET;<br>    addrSrv.sin_port = <span class="hljs-built_in">htons</span>((nPort);<br>    <span class="hljs-type">int</span> ret = ::<span class="hljs-built_in">connect</span>(hSocket, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;addrSrv, <span class="hljs-built_in">sizeof</span>(addrSrv));<br>    <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-keyword">if</span> (ret == SOCKET_ERROR &amp;&amp; <span class="hljs-built_in">WSAGetLastError</span>() != WSAEWOULDBLOCK)       <br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    fd_set writeset;<br>    <span class="hljs-built_in">FD_ZERO</span>(&amp;writeset);<br>    <span class="hljs-built_in">FD_SET</span>(hSocket, &amp;writeset);<br>    <span class="hljs-keyword">struct</span> timeval tm = &#123; <span class="hljs-number">3</span>, <span class="hljs-number">200</span> &#125;;<br>    <span class="hljs-keyword">if</span> (::<span class="hljs-built_in">select</span>(hSocket + <span class="hljs-number">1</span>, <span class="hljs-literal">NULL</span>, &amp;writeset, <span class="hljs-literal">NULL</span>, &amp;tm) != <span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;tm.tv_sec: %d, tm.tv_usec: %d\n&quot;</span>, tm.tv_sec, tm.tv_usec);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;tm.tv_sec: %d, tm.tv_usec: %d\n&quot;</span>, tm.tv_sec, tm.tv_usec);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ<strong>38</strong> è¡Œè°ƒç”¨äº† <strong>select</strong> å‡½æ•°ï¼Œæ— è®º <strong>select</strong> æ˜¯æˆåŠŸè¿˜æ˜¯å‡ºé”™ï¼Œæˆ‘ä»¬éƒ½ä¼šæ‰“å°å‡ºå…¶å‚æ•°çš„ <strong>tm</strong> çš„å€¼ï¼ˆ<strong>40</strong> å’Œ <strong>44</strong> è¡Œï¼‰ï¼Œç»æµ‹è¯•éªŒè¯ <strong>tm</strong> ç»“æ„ä½“çš„ä¸¤ä¸ªæˆå‘˜å€¼åœ¨ <strong>select</strong> å‡½æ•°è°ƒç”¨å‰åå¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚</p><blockquote><p>è™½ç„¶ Windows ç³»ç»Ÿå¹¶ä¸ä¼šæ”¹å˜ select çš„è¶…æ—¶æ—¶é—´å‚æ•°çš„å€¼ï¼Œä½†æ˜¯ä¸ºäº†ä»£ç çš„è·¨å¹³å°æ€§ï¼Œæˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­ä¸åº”è¯¥ä¾èµ–è¿™ç§ç‰¹æ€§ï¼Œè€Œæ˜¯æ¯æ¬¡è°ƒç”¨ select å‡½æ•°å‰éƒ½é‡æ–°ç»™è¶…æ—¶æ—¶é—´å‚æ•°é‡æ–°è®¾ç½®å€¼ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œé€šè®¯åŸºç¡€å­¦ä¹ ç¬”è®°ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> socketç¼–ç¨‹ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç½‘ç»œé€šä¿¡åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€C++é¡¹ç›®ã€‘ä¸€ç§åœ¨åŒç«¯å£ä¸ŠåŒæ—¶å¤„ç†TCPå’ŒUDPçš„æœåŠ¡å™¨å®ç°</title>
      <link href="/2022/06/19/%E3%80%90C-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%B8%80%E7%A7%8D%E5%9C%A8%E5%90%8C%E4%B8%80%E7%AB%AF%E5%8F%A3%E4%B8%8A%E5%90%8C%E6%97%B6%E5%A4%84%E7%90%86TCP%E5%92%8CUDP%E4%B8%A4%E7%A7%8D%E8%AF%B7%E6%B1%82%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E7%8E%B0/"/>
      <url>/2022/06/19/%E3%80%90C-%E9%A1%B9%E7%9B%AE%E3%80%91%E4%B8%80%E7%A7%8D%E5%9C%A8%E5%90%8C%E4%B8%80%E7%AB%AF%E5%8F%A3%E4%B8%8A%E5%90%8C%E6%97%B6%E5%A4%84%E7%90%86TCP%E5%92%8CUDP%E4%B8%A4%E7%A7%8D%E8%AF%B7%E6%B1%82%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ç§åœ¨åŒä¸€ç«¯å£ä¸ŠåŒæ—¶å¤„ç†TCPå’ŒUDPä¸¤ç§è¯·æ±‚çš„æœåŠ¡å™¨å®ç°">ä¸€ç§åœ¨åŒä¸€ç«¯å£ä¸ŠåŒæ—¶å¤„ç†TCPå’ŒUDPä¸¤ç§è¯·æ±‚çš„æœåŠ¡å™¨å®ç°</h2><p>æœåŠ¡å™¨å®ç°ä»£ç :</p><p>server.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">2022-6-19</span><br><span class="hljs-comment">ä¸€ç§åœ¨åŒç«¯å£ä¸ŠåŒæ—¶å¤„ç†TCPå’ŒUDPçš„æœåŠ¡å™¨å®ç°</span><br><span class="hljs-comment">ä½œè€…ï¼šè¿æ€é‘«</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;errno.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;assert.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pthread.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;netinet/in.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/epoll.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">/// åœ¨åŒä¸€ç«¯å£ä¸ŠåŒæ—¶å¤„ç†TCPå’ŒUDPä¸¤ç§è¯·æ±‚</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_EVENT_NUMBER 1024</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> TCP_BUFFER_SIZE  512</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> UDP_BUFFER_SIZE  (1024*4)</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> EFFECT_TEST  <span class="hljs-string">&quot;Server received!!&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">setnonblocking</span><span class="hljs-params">(<span class="hljs-type">int</span> fd)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> old_option = <span class="hljs-built_in">fcntl</span>(fd, F_GETFL);<br>    <span class="hljs-type">int</span> new_option = old_option | O_NONBLOCK;<br>    <span class="hljs-built_in">fcntl</span>(fd, F_SETFL, new_option);<br>    <span class="hljs-keyword">return</span> old_option;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addfd</span><span class="hljs-params">(<span class="hljs-type">int</span> epollfd, <span class="hljs-type">int</span> fd)</span></span><br><span class="hljs-function"></span>&#123;<br>    epoll_event event;<br>    event.data.fd = fd;<br>    <span class="hljs-comment">//event.events = EPOLLIN | EPOLLET;</span><br>    event.events = EPOLLIN;<br>    <span class="hljs-built_in">epoll_ctl</span>(epollfd, EPOLL_CTL_ADD, fd, &amp;event);<br>    <span class="hljs-built_in">setnonblocking</span>(fd);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(argc &lt;= <span class="hljs-number">2</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;usage: %s ip_address port_number\n&quot;</span>, <span class="hljs-built_in">basename</span>(argv[<span class="hljs-number">0</span>]));<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* ip = argv[<span class="hljs-number">1</span>];<br>    <span class="hljs-type">int</span> port = <span class="hljs-built_in">atoi</span>(argv[<span class="hljs-number">2</span>]);<br><br>    <span class="hljs-type">int</span> ret = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// åˆ›å»ºTCP Socketï¼Œç»‘å®šåˆ°ç«¯å£port</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> address;<br>    <span class="hljs-built_in">bzero</span>(&amp;address, <span class="hljs-built_in">sizeof</span>(address));<br>    address.sin_family = AF_INET;<br>    <span class="hljs-built_in">inet_pton</span>(AF_INET, ip, &amp;address.sin_addr);<br>    address.sin_port = <span class="hljs-built_in">htons</span>(port);<br>    <span class="hljs-type">int</span> listenfd = <span class="hljs-built_in">socket</span>(PF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">assert</span>(listenfd &gt;= <span class="hljs-number">0</span>);<br>    ret = <span class="hljs-built_in">bind</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;address, <span class="hljs-built_in">sizeof</span>(address));<br>    <span class="hljs-built_in">assert</span>(ret != <span class="hljs-number">-1</span>);<br>    ret = <span class="hljs-built_in">listen</span>(listenfd, <span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">assert</span>(ret != <span class="hljs-number">-1</span>);<br><br>    <span class="hljs-comment">// åˆ›å»ºUDP Socketï¼Œç»‘å®šåˆ°åŒæ ·ç«¯å£</span><br>    <span class="hljs-built_in">bzero</span>(&amp;address, <span class="hljs-built_in">sizeof</span>(address));<br>    address.sin_family = AF_INET;<br>    <span class="hljs-built_in">inet_pton</span>(AF_INET, ip, &amp;address.sin_addr);<br>    address.sin_port = <span class="hljs-built_in">htons</span>(port);<br>    <span class="hljs-type">int</span> udpfd = <span class="hljs-built_in">socket</span>(PF_INET, SOCK_DGRAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">assert</span>(udpfd &gt;= <span class="hljs-number">0</span>);<br>    ret = <span class="hljs-built_in">bind</span>(udpfd, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;address, <span class="hljs-built_in">sizeof</span>(address));<br>    <span class="hljs-built_in">assert</span>(ret != <span class="hljs-number">-1</span>);<br><br>    <span class="hljs-type">int</span> epollfd = <span class="hljs-built_in">epoll_create</span>(<span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">assert</span>(epollfd != <span class="hljs-number">-1</span>);<br><br>    <span class="hljs-comment">// åˆ†åˆ«æ³¨å†ŒTCPå’ŒUDP socketçš„å¯è¯»äº‹ä»¶åˆ°epollä¸Š</span><br>    <span class="hljs-built_in">addfd</span>(epollfd, listenfd);<br>    <span class="hljs-built_in">addfd</span>(epollfd, udpfd);<br><br>    epoll_event events[ MAX_EVENT_NUMBER ];<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-type">int</span> number = <span class="hljs-built_in">epoll_wait</span>(epollfd, events, MAX_EVENT_NUMBER, <span class="hljs-number">-1</span>);<br>        <span class="hljs-keyword">if</span> (number &lt; <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;epoll failure\n&quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; number; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> sockfd = events[i].data.fd;<br>            <span class="hljs-keyword">if</span> (sockfd == listenfd)<br>            &#123;<br>                <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> client_address;<br>                <span class="hljs-type">socklen_t</span> client_addrlength = <span class="hljs-built_in">sizeof</span>(client_address);<br>                <span class="hljs-type">int</span> connfd = <span class="hljs-built_in">accept</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;client_address, &amp;client_addrlength);<br>                <span class="hljs-built_in">addfd</span>(epollfd, connfd);<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sockfd == udpfd)<br>            &#123;<br>                <span class="hljs-type">char</span> buf[ UDP_BUFFER_SIZE ];<br>                <span class="hljs-built_in">memset</span>(buf, <span class="hljs-string">&#x27;\0&#x27;</span>, UDP_BUFFER_SIZE);<br>                <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> client_address;<br>                <span class="hljs-type">socklen_t</span> client_addrlength = <span class="hljs-built_in">sizeof</span>(client_address);<br><br>                ret = <span class="hljs-built_in">recvfrom</span>(udpfd, buf, UDP_BUFFER_SIZE<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;client_address, &amp;client_addrlength);<br>                <span class="hljs-keyword">if</span>(ret &gt; <span class="hljs-number">0</span>)<br>                &#123;<br>                    cout &lt;&lt; <span class="hljs-string">&quot;this is UDP:&quot;</span> &lt;&lt; buf &lt;&lt; endl;<br>                    <span class="hljs-comment">//sendto(udpfd, buf, UDP_BUFFER_SIZE-1, 0, (struct sockaddr*)&amp;client_address, client_addrlength);</span><br>                    <span class="hljs-built_in">sendto</span>(udpfd, EFFECT_TEST, UDP_BUFFER_SIZE<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;client_address, client_addrlength);<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (events[i].events &amp; EPOLLIN)<br>            &#123;<br>                <span class="hljs-type">char</span> buf[ TCP_BUFFER_SIZE ];<br>                <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>                &#123;<br>                    <span class="hljs-built_in">memset</span>(buf, <span class="hljs-string">&#x27;\0&#x27;</span>, TCP_BUFFER_SIZE);<br>                    ret = <span class="hljs-built_in">recv</span>(sockfd, buf, TCP_BUFFER_SIZE<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>);<br>                    <span class="hljs-keyword">if</span>(ret &lt; <span class="hljs-number">0</span>)<br>                    &#123;<br>                        <span class="hljs-keyword">if</span>((errno == EAGAIN) || (errno == EWOULDBLOCK))<br>                        &#123;<br>                            <span class="hljs-keyword">break</span>;<br>                        &#125;<br>                        <span class="hljs-built_in">close</span>(sockfd);<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(ret == <span class="hljs-number">0</span>)<br>                    &#123;<br>                        <span class="hljs-built_in">close</span>(sockfd);<br>                    &#125;<br>                    <span class="hljs-keyword">else</span><br>                    &#123;<br>                        cout &lt;&lt; <span class="hljs-string">&quot;this is TCP:&quot;</span> &lt;&lt; buf &lt;&lt; endl;<br>                        <span class="hljs-built_in">send</span>(sockfd, EFFECT_TEST, <span class="hljs-built_in">sizeof</span>(EFFECT_TEST), <span class="hljs-number">0</span>);<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;something else happened \n&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">close</span>(listenfd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç ï¼šclient_tcp.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">2022-6-19</span><br><span class="hljs-comment">æµ‹è¯•å¥—å­—èŠ‚ï¼ˆsocketï¼‰ç”¨æˆ·ç«¯å®ä¾‹ï¼ˆtcpï¼‰</span><br><span class="hljs-comment">ä½œè€…ï¼šè¿æ€é‘«</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;socket_u.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(argc &lt;= <span class="hljs-number">2</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;usage: %s ip_address port_number\n&quot;</span>, <span class="hljs-built_in">basename</span>(argv[<span class="hljs-number">0</span>]));<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* ip = argv[<span class="hljs-number">1</span>];<br>    <span class="hljs-type">int</span> port = <span class="hljs-built_in">atoi</span>(argv[<span class="hljs-number">2</span>]);<br><span class="hljs-comment">//è¿™æ˜¯å®¢æˆ·ç«¯</span><br>cout &lt;&lt; <span class="hljs-string">&quot;this is user&quot;</span> &lt;&lt; endl;<br><br><br><span class="hljs-comment">//socket</span><br><span class="hljs-comment">//åˆå§‹åŒ–socketï¼Œå¹¶æ£€æµ‹æ˜¯éƒ½æˆåŠŸ</span><br><span class="hljs-type">int</span> ulient = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>); <span class="hljs-comment">//tcp</span><br>    <span class="hljs-comment">//int ulient = socket(AF_INET, SOCK_DGRAM, 0); //udp</span><br><span class="hljs-keyword">if</span> (ulient == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">perror</span>(<span class="hljs-string">&quot;socket fail&quot;</span>);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">//connect</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serverAddr;<br>serverAddr.sin_family = AF_INET;<br>serverAddr.sin_port = <span class="hljs-built_in">htons</span>(port);<br>serverAddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(ip);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(ulient, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;serverAddr, <span class="hljs-built_in">sizeof</span>(serverAddr)) &lt; <span class="hljs-number">0</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;connect fail&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">2</span>);<br>&#125;<br>cout &lt;&lt; <span class="hljs-string">&quot;.....connect&quot;</span> &lt;&lt; endl;<br><span class="hljs-type">char</span> data[<span class="hljs-number">1024</span>];<br><span class="hljs-type">char</span> buf[<span class="hljs-number">1024</span>];<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br>cin &gt;&gt; data;<br><span class="hljs-built_in">send</span>(ulient, data, <span class="hljs-built_in">strlen</span>(data), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(data, <span class="hljs-string">&quot;exit&quot;</span>) == <span class="hljs-number">0</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;......disconnect&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-built_in">memset</span>(buf, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(buf));<br><span class="hljs-type">int</span> len = <span class="hljs-built_in">recv</span>(ulient, buf, <span class="hljs-built_in">sizeof</span>(buf), <span class="hljs-number">0</span>);<br>buf[len] = <span class="hljs-string">&#x27;\0&#x27;</span>;<br>cout &lt;&lt; buf &lt;&lt; endl;<br>&#125;<br><span class="hljs-built_in">close</span>(ulient);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>client_udp.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">2022-6-19</span><br><span class="hljs-comment">æµ‹è¯•å¥—å­—èŠ‚ï¼ˆsocketï¼‰ç”¨æˆ·ç«¯å®ä¾‹ï¼ˆudpï¼‰</span><br><span class="hljs-comment">ä½œè€…ï¼šè¿æ€é‘«</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;socket_u.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(argc &lt;= <span class="hljs-number">2</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;usage: %s ip_address port_number\n&quot;</span>, <span class="hljs-built_in">basename</span>(argv[<span class="hljs-number">0</span>]));<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* ip = argv[<span class="hljs-number">1</span>];<br>    <span class="hljs-type">int</span> port = <span class="hljs-built_in">atoi</span>(argv[<span class="hljs-number">2</span>]);<br><span class="hljs-comment">//è¿™æ˜¯å®¢æˆ·ç«¯</span><br>cout &lt;&lt; <span class="hljs-string">&quot;this is user&quot;</span> &lt;&lt; endl;<br><br><br><span class="hljs-comment">//socket</span><br><span class="hljs-comment">//åˆå§‹åŒ–socketï¼Œå¹¶æ£€æµ‹æ˜¯éƒ½æˆåŠŸ</span><br><span class="hljs-comment">//int ulient = socket(AF_INET, SOCK_STREAM, 0); //tcp</span><br>    <span class="hljs-type">int</span> ulient = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_DGRAM, <span class="hljs-number">0</span>); <span class="hljs-comment">//udp</span><br><span class="hljs-keyword">if</span> (ulient == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">perror</span>(<span class="hljs-string">&quot;socket fail&quot;</span>);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">//connect</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serverAddr;<br>serverAddr.sin_family = AF_INET;<br>serverAddr.sin_port = <span class="hljs-built_in">htons</span>(port);<br>serverAddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(ip);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(ulient, (<span class="hljs-keyword">struct</span> sockaddr*)&amp;serverAddr, <span class="hljs-built_in">sizeof</span>(serverAddr)) &lt; <span class="hljs-number">0</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;connect fail&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">2</span>);<br>&#125;<br>cout &lt;&lt; <span class="hljs-string">&quot;.....connect&quot;</span> &lt;&lt; endl;<br><span class="hljs-type">char</span> data[<span class="hljs-number">1024</span>];<br><span class="hljs-type">char</span> buf[<span class="hljs-number">1024</span>];<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br>cin &gt;&gt; data;<br><span class="hljs-built_in">send</span>(ulient, data, <span class="hljs-built_in">strlen</span>(data), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(data, <span class="hljs-string">&quot;exit&quot;</span>) == <span class="hljs-number">0</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;......disconnect&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-built_in">memset</span>(buf, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(buf));<br><span class="hljs-type">int</span> len = <span class="hljs-built_in">recv</span>(ulient, buf, <span class="hljs-built_in">sizeof</span>(buf), <span class="hljs-number">0</span>);<br>buf[len] = <span class="hljs-string">&#x27;\0&#x27;</span>;<br>cout &lt;&lt; buf &lt;&lt; endl;<br>&#125;<br><span class="hljs-built_in">close</span>(ulient);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœï¼šclient_udpç«¯</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ g++ socket_u.cpp -o client_udp<br>$ ./client_udp <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <span class="hljs-number">8000</span><br><span class="hljs-keyword">this</span> is user<br>.....connect<br><span class="hljs-number">123456</span><br><span class="hljs-built_in">Server</span> received!!<br><span class="hljs-number">12345458</span><br><span class="hljs-built_in">Server</span> received!!<br></code></pre></td></tr></table></figure><p>client_tcpç«¯</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ g++ socket_u.cpp -o client_tcp<br>$ ./client_tcp <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <span class="hljs-number">8000</span><br><span class="hljs-keyword">this</span> is user<br>.....connect<br><span class="hljs-number">123456</span><br><span class="hljs-built_in">Server</span> received!!<br><span class="hljs-number">123456</span><br><span class="hljs-built_in">Server</span> received!!<br></code></pre></td></tr></table></figure><p>serverç«¯</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">./a.<span class="hljs-keyword">out</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <span class="hljs-number">8000</span><br><span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> TCP:<span class="hljs-number">123456</span><br><span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> TCP:<span class="hljs-number">123456</span><br><span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> UDP:<span class="hljs-number">123456</span><br><span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> UDP:<span class="hljs-number">12345458</span><br></code></pre></td></tr></table></figure><p>å¦‚å›¾ï¼š</p><p><img src="/images/2022-6-19-001.png" alt="upload successful"></p>]]></content>
      
      
      <categories>
          
          <category> C++é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++é¡¹ç›® </tag>
            
            <tag> server </tag>
            
            <tag> æœåŠ¡å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°02ï¼šbind å‡½æ•°</title>
      <link href="/2022/06/19/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B002%EF%BC%9Abind-%E5%87%BD%E6%95%B0/"/>
      <url>/2022/06/19/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B002%EF%BC%9Abind-%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°02ï¼šbind-å‡½æ•°">ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°02ï¼šbind å‡½æ•°</h2><h4 id="bind-å‡½æ•°å¦‚ä½•é€‰æ‹©ç»‘å®šåœ°å€">bind å‡½æ•°å¦‚ä½•é€‰æ‹©ç»‘å®šåœ°å€</h4><p>ä¸Šä¸€èŠ‚çš„æœåŠ¡å™¨ä»£ç ä¸­æ¼”ç¤ºäº† bind å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å†çœ‹ä¸€ä¸‹ç›¸å…³çš„ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> bindaddr;<br>bindaddr.sin_family = AF_INET;<br>bindaddr.sin_addr.s_addr = <span class="hljs-built_in">htonl</span>(INADDR_ANY);<br>bindaddr.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">3000</span>);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">bind</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;bindaddr, <span class="hljs-built_in">sizeof</span>(bindaddr)) == <span class="hljs-number">-1</span>)<br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;bind listen socket error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ bind çš„åœ°å€æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå®å« <strong>INADDR_ANY</strong> ï¼Œå…³äºè¿™ä¸ªå®çš„è§£é‡Šå¦‚ä¸‹ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">If <span class="hljs-keyword">an</span> application does <span class="hljs-keyword">not</span> care what <span class="hljs-built_in">local</span> address is assigned, specify <span class="hljs-keyword">the</span> <span class="hljs-built_in">constant</span> <span class="hljs-built_in">value</span> INADDR_ANY <span class="hljs-keyword">for</span> <span class="hljs-keyword">an</span> IPv4 <span class="hljs-built_in">local</span> address <span class="hljs-keyword">or</span> <span class="hljs-keyword">the</span> <span class="hljs-built_in">constant</span> <span class="hljs-built_in">value</span> in6addr_any <span class="hljs-keyword">for</span> <span class="hljs-keyword">an</span> IPv6 <span class="hljs-built_in">local</span> address <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> sa_data member <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> name parameter. This allows <span class="hljs-keyword">the</span> underlying service provider <span class="hljs-built_in">to</span> use <span class="hljs-keyword">any</span> appropriate network address, potentially simplifying application programming <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> presence <span class="hljs-keyword">of</span> multihomed hosts (that is, hosts that have more than <span class="hljs-literal">one</span> network interface <span class="hljs-keyword">and</span> address).<br></code></pre></td></tr></table></figure><p>æ„è¯‘ä¸€ä¸‹ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">å¦‚æœåº”ç”¨ç¨‹åºä¸å…³å¿ƒbindç»‘å®šçš„<span class="hljs-built_in">ip</span>åœ°å€ï¼Œå¯ä»¥ä½¿ç”¨INADDR_ANY(å¦‚æœæ˜¯IPv6ï¼Œåˆ™å¯¹åº”in6addr_any)ï¼Œè¿™æ ·åº•å±‚çš„ï¼ˆåè®®æ ˆï¼‰æœåŠ¡ä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„<span class="hljs-built_in">ip</span>åœ°å€ï¼Œè¿™æ ·ä½¿åœ¨ä¸€ä¸ªæœ‰å¤šä¸ªç½‘å¡æœºå™¨ä¸Šé€‰æ‹©<span class="hljs-built_in">ip</span>åœ°å€é—®é¢˜å˜å¾—ç®€å•ã€‚<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ <strong>INADDR_ANY</strong> ç›¸å½“äºåœ°å€ <strong>0.0.0.0</strong>ã€‚å¯èƒ½è¯»è€…è¿˜æ˜¯ä¸å¤ªæ˜ç™½æˆ‘æƒ³è¡¨è¾¾ä»€ä¹ˆã€‚è¿™é‡Œæˆ‘ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬åœ¨ä¸€å°æœºå™¨ä¸Šå¼€å‘ä¸€ä¸ªæœåŠ¡å™¨ç¨‹åºï¼Œä½¿ç”¨ bind å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬æœ‰å¤šä¸ªip åœ°å€å¯ä»¥é€‰æ‹©ã€‚é¦–å…ˆï¼Œè¿™å°æœºå™¨å¯¹å¤–è®¿é—®çš„ipåœ°å€æ˜¯ <strong>120.55.94.78</strong>ï¼Œè¿™å°æœºå™¨åœ¨å½“å‰å±€åŸŸç½‘çš„åœ°å€æ˜¯ <strong>192.168.1.104</strong>ï¼›åŒæ—¶è¿™å°æœºå™¨æœ‰æœ¬åœ°å›ç¯åœ°å€<strong>127.0.0.1</strong>ã€‚</p><p>å¦‚æœä½ æŒ‡å‘æœ¬æœºä¸Šå¯ä»¥è®¿é—®ï¼Œé‚£ä¹ˆä½  bind å‡½æ•°ä¸­çš„åœ°å€å°±å¯ä»¥ä½¿ç”¨<strong>127.0.0.1</strong>; å¦‚æœä½ çš„æœåŠ¡åªæƒ³è¢«å±€åŸŸç½‘å†…éƒ¨æœºå™¨è®¿é—®ï¼Œbind å‡½æ•°çš„åœ°å€å¯ä»¥ä½¿ç”¨<strong>192.168.1.104</strong>ï¼›å¦‚æœå¸Œæœ›è¿™ä¸ªæœåŠ¡å¯ä»¥è¢«å…¬ç½‘è®¿é—®ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨åœ°å€<strong>0.0.0.0</strong> æˆ– <strong>INADDR_ANY</strong>ã€‚</p><h4 id="bind-å‡½æ•°ç«¯å£å·é—®é¢˜">bind å‡½æ•°ç«¯å£å·é—®é¢˜</h4><p>ç½‘ç»œé€šä¿¡ç¨‹åºçš„åŸºæœ¬é€»è¾‘æ˜¯å®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨ï¼Œå³ä»å®¢æˆ·ç«¯çš„<strong>åœ°å€:ç«¯å£</strong>è¿æ¥åˆ°æœåŠ¡å™¨<strong>åœ°å€:ç«¯å£</strong>ä¸Šï¼Œä»¥ä¸Šä¸€èŠ‚ä¸­çš„ç¤ºä¾‹ç¨‹åºä¸ºä¾‹ï¼ŒæœåŠ¡å™¨ç«¯çš„ç«¯å£å·ä½¿ç”¨ 3000ï¼Œé‚£å®¢æˆ·ç«¯è¿æ¥æ—¶çš„ç«¯å£å·æ˜¯å¤šå°‘å‘¢ï¼ŸTCP é€šä¿¡åŒæ–¹ä¸­ä¸€èˆ¬æœåŠ¡å™¨ç«¯ç«¯å£å·æ˜¯å›ºå®šçš„ï¼Œè€Œå®¢æˆ·ç«¯ç«¯å£å·æ˜¯è¿æ¥å‘èµ·æ—¶ç”±æ“ä½œç³»ç»Ÿéšæœºåˆ†é…çš„ï¼ˆä¸ä¼šåˆ†é…å·²ç»è¢«å ç”¨çš„ç«¯å£ï¼‰ã€‚ç«¯å£å·æ˜¯ä¸€ä¸ª C short ç±»å‹çš„å€¼ï¼Œå…¶èŒƒå›´æ˜¯0ï½65535ï¼ŒçŸ¥é“è¿™ç‚¹å¾ˆé‡è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç¼–å†™å‹åŠ›æµ‹è¯•ç¨‹åºæ—¶ï¼Œç”±äºç«¯å£æ•°é‡çš„é™åˆ¶ï¼Œåœ¨æŸå°æœºå™¨ä¸Šç½‘å¡åœ°å€ä¸å˜çš„æƒ…å†µä¸‹å‹åŠ›æµ‹è¯•ç¨‹åºç†è®ºä¸Šæœ€å¤šåªèƒ½å‘èµ·å…­ä¸‡äº”åƒå¤šä¸ªè¿æ¥ã€‚æ³¨æ„æˆ‘è¯´çš„æ˜¯ç†è®ºä¸Šï¼Œåœ¨å®é™…æƒ…å†µä¸‹ï¼Œç”±äºå½“æ—¶çš„æ“ä½œç³»ç»Ÿå¾ˆå¤šç«¯å£å¯èƒ½å·²ç»è¢«å ç”¨ï¼Œå®é™…å¯ä»¥ä½¿ç”¨çš„ç«¯å£æ¯”è¿™ä¸ªæ›´å°‘ï¼Œä¾‹å¦‚ï¼Œä¸€èˆ¬è§„å®šç«¯å£å·åœ¨1024ä»¥ä¸‹çš„ç«¯å£æ˜¯ä¿ç•™ç«¯å£ï¼Œä¸å»ºè®®ç”¨æˆ·ç¨‹åºä½¿ç”¨ã€‚è€Œå¯¹äº Windows ç³»ç»Ÿï¼ŒMSDN ç”šè‡³æ˜ç¡®åœ°è¯´ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">On</span> Windows Vista <span class="hljs-keyword">and</span> later, the dynamic client port range <span class="hljs-keyword">is</span> a <span class="hljs-keyword">value</span> <span class="hljs-keyword">between</span> <span class="hljs-number">49152</span> <span class="hljs-keyword">and</span> <span class="hljs-number">65535.</span> This <span class="hljs-keyword">is</span> a change <span class="hljs-keyword">from</span> Windows <span class="hljs-keyword">Server</span> <span class="hljs-number">2003</span> <span class="hljs-keyword">and</span> earlier <span class="hljs-keyword">where</span> the dynamic client port range was a <span class="hljs-keyword">value</span> <span class="hljs-keyword">between</span> <span class="hljs-number">1025</span> <span class="hljs-keyword">and</span> <span class="hljs-number">5000.</span><br>Vista åŠä»¥åçš„Windowsï¼Œå¯ç”¨çš„åŠ¨æ€ç«¯å£èŒƒå›´æ˜¯<span class="hljs-number">49152</span>ï½<span class="hljs-number">65535</span>ï¼Œè€Œ Windows <span class="hljs-keyword">Server</span>åŠæ›´æ—©çš„ç³»ç»Ÿï¼Œå¯ä»¥çš„åŠ¨æ€ç«¯å£èŒƒå›´æ˜¯<span class="hljs-number">1025</span>~<span class="hljs-number">5000</span>ã€‚ï¼ˆä½ å¯ä»¥é€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨æ¥æ”¹å˜è¿™ä¸€è®¾ç½®ï¼Œå‚è€ƒç½‘å€ï¼šhttps://docs.microsoft.com/en-us/windows/desktop/api/winsock/nf-winsock-bindï¼‰<br></code></pre></td></tr></table></figure><p>å¦‚æœå°† bind å‡½æ•°ä¸­çš„ç«¯å£å·è®¾ç½®æˆ0ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿä¼šéšæœºç»™ç¨‹åºåˆ†é…ä¸€ä¸ªå¯ç”¨çš„ä¾¦å¬ç«¯å£ï¼Œå½“ç„¶æœåŠ¡å™¨ç¨‹åºä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆåšï¼Œå› ä¸ºæœåŠ¡å™¨ç¨‹åºæ˜¯è¦å¯¹å¤–æœåŠ¡çš„ï¼Œå¿…é¡»è®©å®¢æˆ·ç«¯çŸ¥é“ç¡®åˆ‡çš„ipåœ°å€å’Œç«¯å£å·ã€‚</p><p>å¾ˆå¤šäººè§‰å¾—åªæœ‰æœåŠ¡å™¨ç¨‹åºå¯ä»¥è°ƒç”¨ bind å‡½æ•°ç»‘å®šä¸€ä¸ªç«¯å£å·ï¼Œå…¶å®ä¸ç„¶ï¼Œåœ¨ä¸€äº›ç‰¹æ®Šçš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®¢æˆ·ç«¯ç¨‹åºä»¥æŒ‡å®šçš„ç«¯å£å·å»è¿æ¥æœåŠ¡å™¨ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨å®¢æˆ·ç«¯ç¨‹åºä¸­è°ƒç”¨ bind å‡½æ•°ç»‘å®šä¸€ä¸ªå…·ä½“çš„ç«¯å£ã€‚</p><p>æˆ‘ä»¬ç”¨ä»£ç æ¥å®é™…éªŒè¯ä¸€ä¸‹ä¸Šè·¯æ‰€è¯´çš„ï¼Œä¸ºäº†èƒ½çœ‹åˆ°è¿æ¥çŠ¶æ€ï¼Œæˆ‘ä»¬å°†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å…³é—­socketçš„ä»£ç æ³¨é‡Šæ‰ï¼Œè¿™æ ·è¿æ¥ä¼šä¿æŒä¸€æ®µæ—¶é—´ã€‚</p><ul><li>æƒ…å½¢ä¸€ï¼šå®¢æˆ·ç«¯ä»£ç ä¸ç»‘å®šç«¯å£</li></ul><p>ä¿®æ”¹åçš„æœåŠ¡å™¨ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * TCPæœåŠ¡å™¨é€šä¿¡åŸºæœ¬æµç¨‹</span><br><span class="hljs-comment"> * liansixin 2022-6-19</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºä¸€ä¸ªä¾¦å¬socket</span><br>    <span class="hljs-type">int</span> listenfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (listenfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create listen socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//2.åˆå§‹åŒ–æœåŠ¡å™¨åœ°å€</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> bindaddr;<br>    bindaddr.sin_family = AF_INET;<br>    bindaddr.sin_addr.s_addr = <span class="hljs-built_in">htonl</span>(INADDR_ANY);<br>    bindaddr.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">3000</span>);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bind</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;bindaddr, <span class="hljs-built_in">sizeof</span>(bindaddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;bind listen socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//3.å¯åŠ¨ä¾¦å¬</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">listen</span>(listenfd, SOMAXCONN) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;listen error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//è®°å½•æ‰€æœ‰å®¢æˆ·ç«¯è¿æ¥çš„å®¹å™¨</span><br>std::vector&lt;<span class="hljs-type">int</span>&gt; clientfds;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>    &#123;<br>        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> clientaddr;<br>        <span class="hljs-type">socklen_t</span> clientaddrlen = <span class="hljs-built_in">sizeof</span>(clientaddr);<br><span class="hljs-comment">//4. æ¥å—å®¢æˆ·ç«¯è¿æ¥</span><br>        <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">accept</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;clientaddr, &amp;clientaddrlen);<br>        <span class="hljs-keyword">if</span> (clientfd != <span class="hljs-number">-1</span>)<br>        &#123;         <br><span class="hljs-type">char</span> recvBuf[<span class="hljs-number">32</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-comment">//5. ä»å®¢æˆ·ç«¯æ¥å—æ•°æ®</span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">recv</span>(clientfd, recvBuf, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret &gt; <span class="hljs-number">0</span>) <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data from client, data: &quot;</span> &lt;&lt; recvBuf &lt;&lt; std::endl;<br><span class="hljs-comment">//6. å°†æ”¶åˆ°çš„æ•°æ®åŸå°ä¸åŠ¨åœ°å‘ç»™å®¢æˆ·ç«¯</span><br>ret = <span class="hljs-built_in">send</span>(clientfd, recvBuf, <span class="hljs-built_in">strlen</span>(recvBuf), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret != <span class="hljs-built_in">strlen</span>(recvBuf))<br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data error.&quot;</span> &lt;&lt; std::endl;<br><br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data to client successfully, data: &quot;</span> &lt;&lt; recvBuf &lt;&lt; std::endl;<br>&#125; <br><span class="hljs-keyword">else</span> <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data error.&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-comment">//close(clientfd);</span><br>clientfds.<span class="hljs-built_in">push_back</span>(clientfd);<br>        &#125;<br>    &#125;<br><br><span class="hljs-comment">//7.å…³é—­ä¾¦å¬socket</span><br><span class="hljs-built_in">close</span>(listenfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹åçš„å®¢æˆ·ç«¯ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * TCPå®¢æˆ·ç«¯é€šä¿¡åŸºæœ¬æµç¨‹</span><br><span class="hljs-comment"> * liansixin 2022-6-19</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_ADDRESS <span class="hljs-string">&quot;127.0.0.1&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_PORT     3000</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SEND_DATA       <span class="hljs-string">&quot;helloworld&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºä¸€ä¸ªsocket</span><br>    <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create client socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//2.è¿æ¥æœåŠ¡å™¨</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serveraddr;<br>    serveraddr.sin_family = AF_INET;<br>    serveraddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(SERVER_ADDRESS);<br>    serveraddr.sin_port = <span class="hljs-built_in">htons</span>(SERVER_PORT);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;serveraddr, <span class="hljs-built_in">sizeof</span>(serveraddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;connect socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//3. å‘æœåŠ¡å™¨å‘é€æ•°æ®</span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">send</span>(clientfd, SEND_DATA, <span class="hljs-built_in">strlen</span>(SEND_DATA), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret != <span class="hljs-built_in">strlen</span>(SEND_DATA))<br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data successfully, data: &quot;</span> &lt;&lt; SEND_DATA &lt;&lt; std::endl;<br><br><span class="hljs-comment">//4. ä»å®¢æˆ·ç«¯æ”¶å–æ•°æ®</span><br><span class="hljs-type">char</span> recvBuf[<span class="hljs-number">32</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br>ret = <span class="hljs-built_in">recv</span>(clientfd, recvBuf, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret &gt; <span class="hljs-number">0</span>) <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data successfully, data: &quot;</span> &lt;&lt; recvBuf &lt;&lt; std::endl;<br>&#125; <br><span class="hljs-keyword">else</span> <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data error, data: &quot;</span> &lt;&lt; recvBuf &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-comment">//5. å…³é—­socket</span><br><span class="hljs-comment">//close(clientfd);</span><br><span class="hljs-comment">//è¿™é‡Œä»…ä»…æ˜¯ä¸ºäº†è®©å®¢æˆ·ç«¯ç¨‹åºä¸é€€å‡º</span><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) <br>&#123;<br><span class="hljs-built_in">sleep</span>(<span class="hljs-number">3</span>);<br>&#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å°†ç¨‹åºç¼–è¯‘å¥½åï¼ˆç¼–è¯‘æ–¹æ³•å’Œä¸Šæ–‡ä¸€æ ·ï¼‰ï¼Œæˆ‘ä»¬å…ˆå¯åŠ¨serverï¼Œå†å¯åŠ¨ä¸‰ä¸ªå®¢æˆ·ç«¯ã€‚ç„¶åé€šè¿‡ <strong>lsof</strong> å‘½ä»¤æŸ¥çœ‹å½“å‰æœºå™¨ä¸Šçš„ TCP è¿æ¥ä¿¡æ¯ï¼Œä¸ºäº†æ›´æ¸…æ¥šåœ°æ˜¾ç¤ºç»“æœï¼Œå·²ç»å°†ä¸ç›¸å…³çš„è¿æ¥ä¿¡æ¯å»æ‰äº†ï¼Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># lsof -i -Pn</span><br>COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME<br>server  <span class="hljs-number"> 1445 </span>root    3u  IPv4 <span class="hljs-number"> 21568 </span>     0t0  TCP *:3000 (LISTEN)<br>server  <span class="hljs-number"> 1445 </span>root    4u  IPv4 <span class="hljs-number"> 21569 </span>     0t0  TCP 127.0.0.1:3000-&gt;127.0.0.1:40818 (ESTABLISHED)<br>server  <span class="hljs-number"> 1445 </span>root    5u  IPv4 <span class="hljs-number"> 21570 </span>     0t0  TCP 127.0.0.1:3000-&gt;127.0.0.1:40820 (ESTABLISHED)<br>server  <span class="hljs-number"> 1445 </span>root    6u  IPv4 <span class="hljs-number"> 21038 </span>     0t0  TCP 127.0.0.1:3000-&gt;127.0.0.1:40822 (ESTABLISHED)<br>client  <span class="hljs-number"> 1447 </span>root    3u  IPv4 <span class="hljs-number"> 21037 </span>     0t0  TCP 127.0.0.1:40818-&gt;127.0.0.1:3000 (ESTABLISHED)<br>client  <span class="hljs-number"> 1448 </span>root    3u  IPv4 <span class="hljs-number"> 21571 </span>     0t0  TCP 127.0.0.1:40820-&gt;127.0.0.1:3000 (ESTABLISHED)<br>client  <span class="hljs-number"> 1449 </span>root    3u  IPv4 <span class="hljs-number"> 21572 </span>     0t0  TCP 127.0.0.1:40822-&gt;127.0.0.1:3000 (ESTABLISHED)<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç»“æœæ˜¾ç¤ºï¼Œ<strong>server</strong> è¿›ç¨‹ï¼ˆè¿›ç¨‹ ID æ˜¯ <strong>1445</strong>ï¼‰åœ¨ <strong>3000</strong> ç«¯å£å¼€å¯ä¾¦å¬ï¼Œæœ‰ä¸‰ä¸ª <strong>client</strong> è¿›ç¨‹ï¼ˆè¿›ç¨‹ ID åˆ†åˆ«æ˜¯<strong>1447</strong>ã€<strong>1448</strong>ã€<strong>1449</strong>ï¼‰åˆ†åˆ«é€šè¿‡ç«¯å£å· <strong>40818</strong>ã€<strong>40820</strong>ã€<strong>40822</strong> è¿åˆ° <strong>server</strong> è¿›ç¨‹ä¸Šçš„ï¼Œä½œä¸ºå®¢æˆ·ç«¯çš„ä¸€æ–¹ï¼Œç«¯å£å·æ˜¯ç³»ç»Ÿéšæœºåˆ†é…çš„ã€‚</p><ul><li><p>æƒ…å½¢äºŒï¼šå®¢æˆ·ç«¯ç»‘å®šç«¯å£å· <strong>0</strong></p><p>æœåŠ¡å™¨ç«¯ä»£ç ä¿æŒä¸å˜ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸‹å®¢æˆ·ç«¯ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * TCPå®¢æˆ·ç«¯é€šä¿¡åŸºæœ¬æµç¨‹</span><br><span class="hljs-comment"> * liansixin 2022-6-19</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_ADDRESS <span class="hljs-string">&quot;127.0.0.1&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_PORT     3000</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SEND_DATA       <span class="hljs-string">&quot;helloworld&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºä¸€ä¸ªsocket</span><br>    <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create client socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> bindaddr;<br>    bindaddr.sin_family = AF_INET;<br>    bindaddr.sin_addr.s_addr = <span class="hljs-built_in">htonl</span>(INADDR_ANY);<br><span class="hljs-comment">//å°†socketç»‘å®šåˆ°0å·ç«¯å£ä¸Šå»</span><br>    bindaddr.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bind</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;bindaddr, <span class="hljs-built_in">sizeof</span>(bindaddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;bind socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//2.è¿æ¥æœåŠ¡å™¨</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serveraddr;<br>    serveraddr.sin_family = AF_INET;<br>    serveraddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(SERVER_ADDRESS);<br>    serveraddr.sin_port = <span class="hljs-built_in">htons</span>(SERVER_PORT);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;serveraddr, <span class="hljs-built_in">sizeof</span>(serveraddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;connect socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//3. å‘æœåŠ¡å™¨å‘é€æ•°æ®</span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">send</span>(clientfd, SEND_DATA, <span class="hljs-built_in">strlen</span>(SEND_DATA), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret != <span class="hljs-built_in">strlen</span>(SEND_DATA))<br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data successfully, data: &quot;</span> &lt;&lt; SEND_DATA &lt;&lt; std::endl;<br><br><span class="hljs-comment">//4. ä»å®¢æˆ·ç«¯æ”¶å–æ•°æ®</span><br><span class="hljs-type">char</span> recvBuf[<span class="hljs-number">32</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br>ret = <span class="hljs-built_in">recv</span>(clientfd, recvBuf, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret &gt; <span class="hljs-number">0</span>) <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data successfully, data: &quot;</span> &lt;&lt; recvBuf &lt;&lt; std::endl;<br>&#125; <br><span class="hljs-keyword">else</span> <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data error, data: &quot;</span> &lt;&lt; recvBuf &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-comment">//5. å…³é—­socket</span><br><span class="hljs-comment">//close(clientfd);</span><br><span class="hljs-comment">//è¿™é‡Œä»…ä»…æ˜¯ä¸ºäº†è®©å®¢æˆ·ç«¯ç¨‹åºä¸é€€å‡º</span><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) <br>&#123;<br><span class="hljs-built_in">sleep</span>(<span class="hljs-number">3</span>);<br>&#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å†æ¬¡ç¼–è¯‘å®¢æˆ·ç«¯ç¨‹åºï¼Œå¹¶å¯åŠ¨ä¸‰ä¸ª <strong>client</strong> è¿›ç¨‹ï¼Œç„¶åç”¨ <strong>lsof</strong> å‘½ä»¤æŸ¥çœ‹æœºå™¨ä¸Šçš„ TCP è¿æ¥æƒ…å†µï¼Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># lsof -i -Pn</span><br>COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME<br>server  <span class="hljs-number"> 1593 </span>root    3u  IPv4 <span class="hljs-number"> 21807 </span>     0t0  TCP *:3000 (LISTEN)<br>server  <span class="hljs-number"> 1593 </span>root    4u  IPv4 <span class="hljs-number"> 21808 </span>     0t0  TCP 127.0.0.1:3000-&gt;127.0.0.1:44220 (ESTABLISHED)<br>server  <span class="hljs-number"> 1593 </span>root    5u  IPv4 <span class="hljs-number"> 19311 </span>     0t0  TCP 127.0.0.1:3000-&gt;127.0.0.1:38990 (ESTABLISHED)<br>server  <span class="hljs-number"> 1593 </span>root    6u  IPv4 <span class="hljs-number"> 21234 </span>     0t0  TCP 127.0.0.1:3000-&gt;127.0.0.1:42365 (ESTABLISHED)<br>client  <span class="hljs-number"> 1595 </span>root    3u  IPv4 <span class="hljs-number"> 22626 </span>     0t0  TCP 127.0.0.1:44220-&gt;127.0.0.1:3000 (ESTABLISHED)<br>client  <span class="hljs-number"> 1611 </span>root    3u  IPv4 <span class="hljs-number"> 21835 </span>     0t0  TCP 127.0.0.1:38990-&gt;127.0.0.1:3000 (ESTABLISHED)<br>client  <span class="hljs-number"> 1627 </span>root    3u  IPv4 <span class="hljs-number"> 21239 </span>     0t0  TCP 127.0.0.1:42365-&gt;127.0.0.1:3000 (ESTABLISHED)<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„ç»“æœï¼Œæˆ‘ä»¬å‘ç°ä¸‰ä¸ª <strong>client</strong> è¿›ç¨‹ä½¿ç”¨çš„ç«¯å£å·ä»ç„¶æ˜¯ç³»ç»Ÿéšæœºåˆ†é…çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç»‘å®š <strong>0</strong> å·ç«¯å£å’Œæ²¡æœ‰ç»‘å®šæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p></li><li><p>æƒ…å½¢ä¸‰ï¼šå®¢æˆ·ç«¯ç»‘å®šä¸€ä¸ªå›ºå®šç«¯å£</p><p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨ <strong>20000</strong> ç«¯å£ï¼Œå½“ç„¶è¯»è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©ï¼Œåªè¦ä¿è¯æ‰€é€‰æ‹©çš„ç«¯å£å·å½“å‰æ²¡æœ‰è¢«å…¶ä»–ç¨‹åºå ç”¨å³å¯ï¼ŒæœåŠ¡å™¨ä»£ç ä¿æŒä¸å˜ï¼Œå®¢æˆ·ç«¯ç»‘å®šä»£ç ä¸­çš„ç«¯å£å·ä» <strong>0</strong> æ”¹æˆ <strong>20000</strong>ã€‚è¿™é‡Œä¸ºäº†èŠ‚çœç¯‡å¹…ï¼Œåªè´´å‡ºä¿®æ”¹å¤„çš„ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> bindaddr;<br>bindaddr.sin_family = AF_INET;<br>bindaddr.sin_addr.s_addr = <span class="hljs-built_in">htonl</span>(INADDR_ANY);<br><span class="hljs-comment">//å°†socketç»‘å®šåˆ°20000å·ç«¯å£ä¸Šå»</span><br>bindaddr.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">20000</span>);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">bind</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;bindaddr, <span class="hljs-built_in">sizeof</span>(bindaddr)) == <span class="hljs-number">-1</span>)<br>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;bind socket error.&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å†æ¬¡é‡æ–°ç¼–è¯‘ç¨‹åºï¼Œå…ˆå¯åŠ¨ä¸€ä¸ªå®¢æˆ·ç«¯åï¼Œæˆ‘ä»¬çœ‹åˆ°æ­¤æ—¶çš„ TCP è¿æ¥çŠ¶æ€ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@localhost testsocket]<span class="hljs-comment"># lsof -i -Pn</span><br>COMMAND   PID <span class="hljs-keyword">USER</span>   <span class="hljs-title">FD</span>   <span class="hljs-keyword">TYPE</span> DEVICE SIZE/OFF <span class="hljs-keyword">NODE</span> <span class="hljs-title">NAME</span><br>server   <span class="hljs-number">1676</span> root    <span class="hljs-number">3</span>u  IPv4  <span class="hljs-number">21933</span>      <span class="hljs-number">0</span>t0  TCP *:<span class="hljs-number">3000</span> (LISTEN)<br>server   <span class="hljs-number">1676</span> root    <span class="hljs-number">4</span>u  IPv4  <span class="hljs-number">21934</span>      <span class="hljs-number">0</span>t0  TCP <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">3000</span>-&gt;<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">20000</span> (ESTABLISHED)<br>client   <span class="hljs-number">1678</span> root    <span class="hljs-number">3</span>u  IPv4  <span class="hljs-number">21336</span>      <span class="hljs-number">0</span>t0  TCP <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">20000</span>-&gt;<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">3000</span> (ESTABLISHED)<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„ç»“æœï¼Œæˆ‘ä»¬å‘ç° <strong>client</strong> è¿›ç¨‹ç¡®å®ä½¿ç”¨ <strong>20000</strong> å·ç«¯å£è¿æ¥åˆ° <strong>server</strong> è¿›ç¨‹ä¸Šå»äº†ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœæˆ‘ä»¬å†å¼€å¯ä¸€ä¸ª <strong>client</strong> è¿›ç¨‹ï¼Œæˆ‘ä»¬çŒœæƒ³ç”±äºç«¯å£å· <strong>20000</strong> å·²ç»è¢«å ç”¨ï¼Œæ–°å¯åŠ¨çš„ <strong>client</strong> ä¼šç”±äºè°ƒç”¨ <strong>bind</strong> å‡½æ•°å‡ºé”™è€Œé€€å‡ºï¼Œæˆ‘ä»¬å®é™…éªŒè¯ä¸€ä¸‹ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs perl">[root<span class="hljs-variable">@localhost</span> testsocket]<span class="hljs-comment"># ./client </span><br><span class="hljs-keyword">bind</span> <span class="hljs-keyword">socket</span> error.<br>[root<span class="hljs-variable">@localhost</span> testsocket]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p>ç»“æœç¡®å®å’Œæˆ‘ä»¬é¢„æƒ³çš„ä¸€æ ·ã€‚</p></li></ul><p>åœ¨æŠ€æœ¯é¢è¯•çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™é¢è¯•å®˜ä¼šé—® TCP ç½‘ç»œé€šä¿¡çš„å®¢æˆ·ç«¯ç¨‹åºä¸­çš„ socket æ˜¯å¦å¯ä»¥è°ƒç”¨ bind å‡½æ•°ï¼Œç›¸ä¿¡è¯»åˆ°è¿™é‡Œï¼Œèªæ˜çš„ä½ å·²ç»æœ‰ç­”æ¡ˆäº†ã€‚</p><p>å¦å¤–ï¼ŒLinux çš„ <strong>nc</strong> å‘½ä»¤æœ‰ä¸ª <strong>-p</strong> é€‰é¡¹ï¼ˆå­—æ¯ <strong>p</strong> æ˜¯å°å†™ï¼‰ï¼Œè¿™ä¸ªé€‰é¡¹çš„ä½œç”¨å°±æ˜¯ <strong>nc</strong> åœ¨æ¨¡æ‹Ÿå®¢æˆ·ç«¯ç¨‹åºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æŒ‡å®šç«¯å£å·è¿æ¥åˆ°æœåŠ¡å™¨ç¨‹åºä¸Šå»ï¼Œå®ç°åŸç†ç›¸ä¿¡è¯»è€…ä¹Ÿæ˜ç™½äº†ã€‚æˆ‘ä»¬è¿˜æ˜¯ä»¥ä¸Šé¢çš„æœåŠ¡å™¨ç¨‹åºä¸ºä¾‹ï¼Œè¿™ä¸ªæˆ‘ä»¬ä¸ç”¨æˆ‘ä»¬çš„ <strong>client</strong> ç¨‹åºï¼Œæ”¹ç”¨ <strong>nc</strong> å‘½ä»¤æ¥æ¨¡æ‹Ÿå®¢æˆ·ç«¯ã€‚åœ¨ <strong>shell</strong> ç»ˆç«¯è¾“å…¥ï¼š</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs delphi">[root@localhost testsocket]# nc -v -p <span class="hljs-number">9999</span> <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span> <span class="hljs-number">3000</span><br>Ncat: Version <span class="hljs-number">6.40</span> ( http:<span class="hljs-comment">//nmap.org/ncat )</span><br>Ncat: Connected <span class="hljs-keyword">to</span> <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">3000</span>.<br>My <span class="hljs-keyword">name</span> <span class="hljs-keyword">is</span> liansixin<br>My <span class="hljs-keyword">name</span> <span class="hljs-keyword">is</span> liansixin<br></code></pre></td></tr></table></figure><p><strong>-v</strong> é€‰é¡¹è¡¨ç¤ºè¾“å‡º <strong>nc</strong> å‘½ä»¤è¿æ¥çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¿™é‡Œè¿æ¥æˆåŠŸä»¥åï¼Œä¼šè¾“å‡ºâ€œ<strong>Ncat: Connected to 127.0.0.1:3000.</strong>â€ æç¤ºå·²ç»è¿æ¥åˆ°æœåŠ¡å™¨çš„ <strong>3000</strong> ç«¯å£ä¸Šå»äº†ã€‚</p><p><strong>-p</strong> é€‰é¡¹çš„å‚æ•°å€¼æ˜¯ <strong>9999</strong> è¡¨ç¤ºï¼Œæˆ‘ä»¬è¦æ±‚ <strong>nc</strong> å‘½ä»¤æœ¬åœ°ä»¥ç«¯å£å· <strong>9999</strong> è¿æ¥æœåŠ¡å™¨ï¼Œæ³¨æ„ä¸è¦ä¸ç«¯å£å· <strong>3000</strong> æ··æ·†ï¼Œ<strong>3000</strong> æ˜¯æœåŠ¡å™¨çš„ä¾¦å¬ç«¯å£å·ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„è¿æ¥çš„ç›®æ ‡ç«¯å£å·ï¼Œ<strong>9999</strong> æ˜¯æˆ‘ä»¬å®¢æˆ·ç«¯ä½¿ç”¨çš„ç«¯å£å·ã€‚æˆ‘ä»¬ç”¨ <strong>lsof</strong> å‘½ä»¤æ¥éªŒè¯ä¸€ä¸‹æˆ‘ä»¬çš„ <strong>nc</strong> å‘½ä»¤æ˜¯å¦ç¡®å®ä»¥ <strong>9999</strong> ç«¯å£å·è¿æ¥åˆ° <strong>server</strong> è¿›ç¨‹ä¸Šå»äº†ã€‚</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@localhost testsocket]<span class="hljs-comment"># lsof -i -Pn</span><br>COMMAND   PID <span class="hljs-keyword">USER</span>   <span class="hljs-title">FD</span>   <span class="hljs-keyword">TYPE</span> DEVICE SIZE/OFF <span class="hljs-keyword">NODE</span> <span class="hljs-title">NAME</span><br>server   <span class="hljs-number">1676</span> root    <span class="hljs-number">3</span>u  IPv4  <span class="hljs-number">21933</span>      <span class="hljs-number">0</span>t0  TCP *:<span class="hljs-number">3000</span> (LISTEN)<br>server   <span class="hljs-number">1676</span> root    <span class="hljs-number">7</span>u  IPv4  <span class="hljs-number">22405</span>      <span class="hljs-number">0</span>t0  TCP <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">3000</span>-&gt;<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">9999</span> (ESTABLISHED)<br>nc       <span class="hljs-number">2005</span> root    <span class="hljs-number">3</span>u  IPv4  <span class="hljs-number">22408</span>      <span class="hljs-number">0</span>t0  TCP <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">9999</span>-&gt;<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">3000</span> (ESTABLISHED)<br></code></pre></td></tr></table></figure><p>ç»“æœç¡®å®å¦‚æˆ‘ä»¬æœŸæœ›çš„ä¸€è‡´ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬ç”¨ <strong>nc</strong> å‘½ä»¤è¿æ¥ä¸Š <strong>server</strong> è¿›ç¨‹ä»¥åï¼Œæˆ‘ä»¬è¿˜ç»™æœåŠ¡å™¨å‘äº†ä¸€æ¡æ¶ˆæ¯&quot;<strong>My name is liansixin</strong>&quot;ï¼Œ<strong>server</strong> ç¨‹åºæ”¶åˆ°æ¶ˆæ¯åæŠŠè¿™æ¡æ¶ˆæ¯åŸå°ä¸åŠ¨åœ°è¿”è¿˜ç»™æˆ‘ä»¬ï¼Œä»¥ä¸‹æ˜¯ <strong>server</strong> ç«¯è¿è¡Œç»“æœï¼š</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xl">[root@localhost testsocket]# ./server   <br>recv <span class="hljs-keyword">data</span> from client, <span class="hljs-keyword">data</span>: My <span class="hljs-keyword">name</span> <span class="hljs-keyword">is</span> liansixin<br><br>send <span class="hljs-keyword">data</span> to client successfully, <span class="hljs-keyword">data</span>: My <span class="hljs-keyword">name</span> <span class="hljs-keyword">is</span> liansixin<br></code></pre></td></tr></table></figure><p>ç»“æŸ~</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œé€šè®¯åŸºç¡€å­¦ä¹ ç¬”è®°ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> socketç¼–ç¨‹ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç½‘ç»œç¼–ç¨‹åŸºç¡€ </tag>
            
            <tag> bindå‡½æ•°è®²è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°01ï¼šå¸¸ç”¨ socket å‡½æ•°åŸºç¡€</title>
      <link href="/2022/06/15/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B001%EF%BC%9A%E5%B8%B8%E7%94%A8-socket-%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80/"/>
      <url>/2022/06/15/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B001%EF%BC%9A%E5%B8%B8%E7%94%A8-socket-%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h2 id="ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°01ï¼šå¸¸ç”¨-socket-å‡½æ•°åŸºç¡€">ç½‘ç»œé€šä¿¡åŸºç¡€å­¦ä¹ ç¬”è®°01ï¼šå¸¸ç”¨ socket å‡½æ•°åŸºç¡€</h2><h3 id="å¸¸ç”¨-socket-å‡½æ•°åŸºç¡€">å¸¸ç”¨ socket å‡½æ•°åŸºç¡€</h3><p>Windows å’Œ Linux ä¸Šå¸¸ç”¨çš„ socket API å‡½æ•°å¹¶ä¸å¤šï¼Œé™¤äº†ç‰¹å®šæ“ä½œç³»ç»Ÿæä¾›çš„ä¸€äº›åŸºäºè‡ªèº«ç³»ç»Ÿç‰¹æ€§çš„ APIï¼Œ å¤§å¤šæ•° Socket API éƒ½æºäº<strong>BSD Socket</strong> ï¼ˆå³<strong>ä¼¯å…‹åˆ©å¥—æ¥å­—</strong>ï¼ˆ<strong>Berkeley Sockets</strong>ï¼‰ï¼‰ï¼Œå› æ­¤è¿™äº› socket å‡½æ•°åœ¨ä¸åŒçš„å¹³å°æœ‰ç€ç›¸ä¼¼çš„ç­¾åå’Œå‚æ•°ã€‚</p><p>ç»å¸¸æœ‰æƒ³å­¦ä¹ ç½‘ç»œç¼–ç¨‹çš„æ–°äººè¯¢é—®è¦æŒæ¡å“ªäº›åŸºç¡€çš„socket APIï¼Œæˆ‘è¿™é‡Œç»™ä¸€ä¸ªç®€å•çš„å‡½æ•°åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­ç»™å‡ºçš„éƒ½æ˜¯åº”è¯¥ç†Ÿç»ƒæŒæ¡çš„ socket å‡½æ•°ã€‚</p><p>â€‹                                                                      å¸¸ç”¨ Berkeley Sockets API ä¸€è§ˆè¡¨</p><table><thead><tr><th style="text-align:center">å‡½æ•°åç§°</th><th style="text-align:center">å‡½æ•°ç®€å•æè¿°</th><th style="text-align:center">é™„åŠ è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">socket</td><td style="text-align:center">åˆ›é€ æŸç§ç±»å‹çš„å¥—æ¥å­—</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">bind</td><td style="text-align:center">å°†ä¸€ä¸ª socket ç»‘å®šä¸€ä¸ªipä¸ç«¯å£çš„äºŒå…ƒç»„ä¸Š</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">listen</td><td style="text-align:center">å°†ä¸€ä¸ª socket å˜ä¸ºä¾¦å¬çŠ¶æ€</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">connect</td><td style="text-align:center">è¯•å›¾å»ºç«‹ä¸€ä¸ª TCP è¿æ¥</td><td style="text-align:center">ä¸€èˆ¬ç”¨äºå®¢æˆ·ç«¯</td></tr><tr><td style="text-align:center">accept</td><td style="text-align:center">å°è¯•æ¥æ”¶ä¸€ä¸ªè¿æ¥</td><td style="text-align:center">ä¸€èˆ¬ç”¨äºæœåŠ¡ç«¯</td></tr><tr><td style="text-align:center">send</td><td style="text-align:center">é€šè¿‡ä¸€ä¸ªsocketå‘é€æ•°æ®</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">recv</td><td style="text-align:center">é€šè¿‡ä¸€ä¸ªsocketæ”¶å–æ•°æ®</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">select</td><td style="text-align:center">åˆ¤æ–­ä¸€ç»„socketä¸Šçš„è¯»äº‹ä»¶</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">gethostbyname</td><td style="text-align:center">é€šè¿‡åŸŸåè·å–æœºå™¨åœ°å€</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">close</td><td style="text-align:center">å…³é—­ä¸€ä¸ªå¥—æ¥å­—ï¼Œå›æ”¶è¯¥ socket å¯¹åº”çš„èµ„æº</td><td style="text-align:center">Windows ç³»ç»Ÿä¸­å¯¹åº”çš„æ˜¯ closesocket</td></tr><tr><td style="text-align:center">shutdown</td><td style="text-align:center">å…³é—­ socket æ”¶æˆ–å‘é€šé“</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">setsockopt</td><td style="text-align:center">è®¾ç½®ä¸€ä¸ªå¥—æ¥å­—é€‰é¡¹</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">getsockopt</td><td style="text-align:center">è·å–ä¸€ä¸ªå¥—æ¥å­—é€‰é¡¹</td><td style="text-align:center"></td></tr></tbody></table><p>å¯¹äºæŸä¸ª socket å‡½æ•°ï¼Œå¦‚æœä½ æƒ³æŸ¥çœ‹å®ƒçš„ç”¨æ³•ï¼Œå¯ä»¥é€šè¿‡ç›¸åº”çš„å¸®åŠ©æ–‡æ¡£ã€‚</p><h4 id="Linux-ç³»ç»ŸæŸ¥çœ‹-socket-å‡½æ•°å¸®åŠ©">Linux ç³»ç»ŸæŸ¥çœ‹ socket å‡½æ•°å¸®åŠ©</h4><p>å¦‚æœæ˜¯ Linux ç³»ç»Ÿï¼Œä½ å¯ä»¥é€šè¿‡ man æ‰‹å†Œå»æŸ¥çœ‹ç›¸åº”çš„å‡½æ•°ç­¾åå’Œç”¨æ³•ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ è¦æŸ¥çœ‹ connect å‡½æ•°çš„ç”¨æ³•ï¼Œåªéœ€è¦åœ¨ Linux shell ç»ˆç«¯è¾“å…¥ <strong>man connect</strong> å³å¯ã€‚</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@localhost ~]<span class="hljs-comment"># man connect</span><br>CONNECT(<span class="hljs-number">2</span>)                                                          Linux Programmer&#x27;s Manual                                                         CONNECT(<span class="hljs-number">2</span>)<br><br>NAME<br>       connect - initiate a connection <span class="hljs-keyword">on</span> a socket<br><br>SYNOPSIS<br>       <span class="hljs-comment">#include &lt;sys/types.h&gt;          /* See NOTES */</span><br>       <span class="hljs-comment">#include &lt;sys/socket.h&gt;</span><br><br>       int connect(int sockfd, const struct sockaddr *addr,<br>                   socklen_t addrlen);<br><br>DESCRIPTION<br>       The connect() system call connects <span class="hljs-keyword">the</span> socket referred <span class="hljs-keyword">to</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">the</span> <span class="hljs-built_in">file</span> descriptor sockfd <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> address specified <span class="hljs-keyword">by</span> addr.  The addrlen argument specifies<br>       <span class="hljs-keyword">the</span> size <span class="hljs-keyword">of</span> addr.  The format <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> address <span class="hljs-keyword">in</span> addr <span class="hljs-keyword">is</span> determined <span class="hljs-keyword">by</span> <span class="hljs-keyword">the</span> address <span class="hljs-literal">space</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> socket sockfd; see socket(<span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> further details.<br><br>       If <span class="hljs-keyword">the</span> socket sockfd <span class="hljs-keyword">is</span> <span class="hljs-keyword">of</span> type SOCK_DGRAM <span class="hljs-keyword">then</span> addr <span class="hljs-keyword">is</span> <span class="hljs-keyword">the</span> address <span class="hljs-keyword">to</span> which datagrams are sent <span class="hljs-keyword">by</span> default, <span class="hljs-keyword">and</span> <span class="hljs-keyword">the</span> only address <span class="hljs-keyword">from</span> which datagrams are<br>       received.   If  <span class="hljs-keyword">the</span>  socket  <span class="hljs-keyword">is</span> <span class="hljs-keyword">of</span> type SOCK_STREAM <span class="hljs-keyword">or</span> SOCK_SEQPACKET, this call attempts <span class="hljs-keyword">to</span> make a connection <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> socket <span class="hljs-keyword">that</span> <span class="hljs-keyword">is</span> bound <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> address<br>       specified <span class="hljs-keyword">by</span> addr.<br><br>       Generally, connection-based protocol sockets may successfully connect() only once; connectionless protocol sockets may use connect()  multiple  <span class="hljs-keyword">times</span>  <span class="hljs-keyword">to</span><br>       change  their  association.  Connectionless sockets may dissolve <span class="hljs-keyword">the</span> association <span class="hljs-keyword">by</span> connecting <span class="hljs-keyword">to</span> an address <span class="hljs-keyword">with</span> <span class="hljs-keyword">the</span> sa_family member <span class="hljs-keyword">of</span> sockaddr <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span><br>       AF_UNSPEC (supported <span class="hljs-keyword">on</span> Linux <span class="hljs-keyword">since</span> kernel <span class="hljs-number">2.2</span>).<br><br>RETURN VALUE<br>       If <span class="hljs-keyword">the</span> connection <span class="hljs-keyword">or</span> binding succeeds, zero <span class="hljs-keyword">is</span> returned.  On <span class="hljs-keyword">error</span>, <span class="hljs-number">-1</span> <span class="hljs-keyword">is</span> returned, <span class="hljs-keyword">and</span> errno <span class="hljs-keyword">is</span> <span class="hljs-keyword">set</span> appropriately.<br><br>ERRORS<br>       The following are general socket errors only.  There may be other domain-specific <span class="hljs-keyword">error</span> codes.<br><br>       EACCES For UNIX domain sockets, which are identified <span class="hljs-keyword">by</span> pathname: Write permission <span class="hljs-keyword">is</span> denied <span class="hljs-keyword">on</span> <span class="hljs-keyword">the</span> socket <span class="hljs-built_in">file</span>, <span class="hljs-keyword">or</span> search permission <span class="hljs-keyword">is</span> denied  <span class="hljs-keyword">for</span>  one<br>              <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> directories <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> path prefix.  (See also path_resolution(<span class="hljs-number">7</span>).)<br><br>       EACCES, EPERM<br>              The  user  tried  <span class="hljs-keyword">to</span> connect <span class="hljs-keyword">to</span> a broadcast address <span class="hljs-keyword">without</span> having <span class="hljs-keyword">the</span> socket broadcast flag enabled <span class="hljs-keyword">or</span> <span class="hljs-keyword">the</span> connection request failed because <span class="hljs-keyword">of</span> a<br>              <span class="hljs-keyword">local</span> firewall rule.<br><br>       EADDRINUSE<br>              Local address <span class="hljs-keyword">is</span> already <span class="hljs-keyword">in</span> use.<br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šé¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œmanæ‰‹å†Œå¯¹äºä¸€ä¸ªå‡½æ•°çš„è¯´æ˜ä¸€èˆ¬åŒ…æ‹¬å¦‚ä¸‹å‡ éƒ¨åˆ†ï¼š</p><ul><li>å‡½æ•°å£°æ˜åŠç›¸å…³æ•°æ®ç»“æ„æ‰€åœ¨çš„å¤´æ–‡ä»¶ï¼Œä½ å®é™…ç¼–ç æ—¶å¦‚æœéœ€è¦ä½¿ç”¨è¿™ä¸ªå‡½æ•°å¿…é¡»åŒ…å«è¯¥å¤´æ–‡ä»¶ï¼›</li><li>å‡½æ•°çš„ç­¾åï¼Œå³è¯¥å‡½æ•°çš„å‚æ•°ç±»å‹ã€ä¸ªæ•°å’Œè¿”å›å€¼ï¼›</li><li>å‡½æ•°ç”¨æ³•è¯´æ˜ï¼Œå¹¶å¯èƒ½åŒ…æ‹¬ä¸€äº›æ³¨æ„äº‹é¡¹ï¼›</li><li>å‡½æ•°è¿”å›å€¼è¯´æ˜ï¼›</li><li>è°ƒç”¨å‡½æ•°å‡ºé”™å¯èƒ½å¾—åˆ°çš„é”™è¯¯ç å€¼ï¼›</li><li>ä¸€äº›ç›¸å…³å‡½æ•°åœ¨ man æ‰‹å†Œçš„ä½ç½®ç´¢å¼•ã€‚ï¼ˆconnect æ²¡æœ‰è¿™ä¸ªéƒ¨åˆ†ï¼‰</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä»…å¯ä»¥æŸ¥ socket å‡½æ•°ä¹Ÿå¯ä»¥æŸ¥çœ‹ Linux ä¸‹å…¶ä»–é€šç”¨å‡½æ•°ï¼ˆå¦‚ freadï¼‰ç”šè‡³ä¸€ä¸ª shell å‘½ä»¤ï¼ˆå¦‚ sleepï¼‰ã€‚ä»¥ sleep ä¸ºä¾‹ï¼Œå¦‚æœä½ æƒ³æŸ¥ç¨‹åºä¸­ sleep å‡½æ•°çš„ç”¨æ³•ï¼Œç”±äºLinux å†…ç½®æœ‰ä¸€ä¸ªå« sleep çš„ shell å‘½ä»¤ï¼Œå¦‚æœä½ åœ¨ shell çª—å£ç›´æ¥è¾“å…¥ <strong>man sleep</strong>ï¼Œæ˜¾ç¤ºå‡ºæ¥çš„é»˜è®¤ä¼šæ˜¯ sleep å‘½ä»¤è€Œä¸æ˜¯æˆ‘ä»¬è¦çš„ sleep å‡½æ•°çš„å¸®åŠ©ä¿¡æ¯ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <strong>man man</strong> å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹ man æ‰‹å†Œç»„æˆéƒ¨åˆ†ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@localhost ~]# <span class="hljs-keyword">man</span> <span class="hljs-keyword">man</span><br>## æ— å…³çš„éƒ¨åˆ†ï¼Œçœç•¥...<br>The <span class="hljs-keyword">table</span> below shows the section numbers of the manual followed <span class="hljs-keyword">by</span> the types of pages they contain.<br><br>1   Executable programs or <span class="hljs-keyword">shell</span> commands<br>2   System calls (functions provided <span class="hljs-keyword">by</span> the kernel)<br>3   Library calls (functions within <span class="hljs-keyword">program</span> libraries)<br>4   Special files (usually found <span class="hljs-keyword">in</span> /dev)<br>5   <span class="hljs-keyword">File</span> formats and conventions eg /etc/passwd<br>6   Games<br>7   Miscellaneous (including <span class="hljs-keyword">macro</span> packages and conventions), <span class="hljs-keyword">e</span>.<span class="hljs-keyword">g</span>. <span class="hljs-keyword">man</span>(7), groff(7)<br>8   System administration commands (usually only <span class="hljs-keyword">for</span> root)<br>9   Kernel routines [Non standard]<br><br>A manual page consists of several sections.<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„ä»£ç ç‰‡æ®µï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œman æ‰‹å†Œçš„å†…å®¹æ€»å…±æœ‰9éƒ¨åˆ†ç»„æˆï¼Œè€Œ sleep å‡½æ•°å±äºä¸Šé¢çš„ Section 3ï¼Œæ‰€ä»¥æˆ‘ä»¬è¾“å…¥ <strong>man 3 sleep</strong> å°±å¯ä»¥æŸ¥çœ‹ sleep å‡½æ•°çš„å¸®åŠ©ä¿¡æ¯äº†ï¼š</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">[root@localhost ~]# man <span class="hljs-number">3</span> sleep<br>SLEEP(<span class="hljs-number">3</span>)                                                            Linux Programmer<span class="hljs-symbol">&#x27;s</span> Manual                                                           SLEEP(<span class="hljs-number">3</span>)<br><br>NAME<br>       sleep - sleep <span class="hljs-keyword">for</span> the specified number <span class="hljs-keyword">of</span> seconds<br><br>SYNOPSIS<br>       #include &lt;unistd.h&gt;<br><br>       <span class="hljs-built_in">unsigned</span> int sleep(<span class="hljs-built_in">unsigned</span> int seconds);<br><br>DESCRIPTION<br>       sleep() makes the calling thread sleep <span class="hljs-keyword">until</span> seconds seconds have elapsed <span class="hljs-keyword">or</span> a <span class="hljs-keyword">signal</span> arrives which <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> ignored.<br><br><span class="hljs-keyword">RETURN</span> VALUE<br>       Zero <span class="hljs-keyword">if</span> the requested <span class="hljs-built_in">time</span> has elapsed, <span class="hljs-keyword">or</span> the number <span class="hljs-keyword">of</span> seconds left <span class="hljs-keyword">to</span> sleep, <span class="hljs-keyword">if</span> the call was interrupted by a <span class="hljs-keyword">signal</span> handler.<br><br>CONFORMING <span class="hljs-keyword">TO</span><br>       POSIX.<span class="hljs-number">1</span>-<span class="hljs-number">2001</span>.<br><br>BUGS<br>       sleep() may be implemented using SIGALRM; mixing calls <span class="hljs-keyword">to</span> alarm(<span class="hljs-number">2</span>) <span class="hljs-keyword">and</span> sleep() <span class="hljs-keyword">is</span> a bad idea.<br><br>       Using longjmp(<span class="hljs-number">3</span>) from a <span class="hljs-keyword">signal</span> handler <span class="hljs-keyword">or</span> modifying the handling <span class="hljs-keyword">of</span> SIGALRM <span class="hljs-keyword">while</span> sleeping will cause undefined results.<br><br>SEE ALSO<br>       alarm(<span class="hljs-number">2</span>), nanosleep(<span class="hljs-number">2</span>), <span class="hljs-keyword">signal</span>(<span class="hljs-number">2</span>), <span class="hljs-keyword">signal</span>(<span class="hljs-number">7</span>)<br><br>COLOPHON<br>       This  page  <span class="hljs-keyword">is</span>  part <span class="hljs-keyword">of</span> <span class="hljs-keyword">release</span> <span class="hljs-number">3.53</span> <span class="hljs-keyword">of</span> the Linux man-pages project.  A description <span class="hljs-keyword">of</span> the project, <span class="hljs-keyword">and</span> information about reporting bugs, can be found at<br>       http://www.kernel.org/doc/man-pages/.<br></code></pre></td></tr></table></figure><h4 id="Windows-ä¸ŠæŸ¥çœ‹-socket-å‡½æ•°å¸®åŠ©">Windows ä¸ŠæŸ¥çœ‹ socket å‡½æ•°å¸®åŠ©</h4><p>Windows ä¹Ÿæœ‰ç±»ä¼¼ man æ‰‹å†Œçš„å¸®åŠ©æ–‡æ¡£ï¼Œæ—©äº›å¹´ Visual Studio ä¼šè‡ªå¸¦ä¸€å¥—ç¦»çº¿çš„ MSDN æ–‡æ¡£åº“ï¼Œå…¶ä¼˜ç‚¹å°±æ˜¯ä¸éœ€è¦ç”µè„‘è”ç½‘ï¼Œç¼ºç‚¹æ˜¯å ç£ç›˜ç©ºé—´æ¯”è¾ƒå¤§ï¼Œå†…å®¹é™ˆæ—§ã€‚åœ¨æ‰‹æœºç½‘ç»œéƒ½å¦‚æ­¤æ™®åŠçš„ä»Šå¤©ï¼Œç¬”è€…è¿˜æ˜¯å»ºè®®ä½¿ç”¨åœ¨çº¿ç‰ˆæœ¬çš„ MSDNã€‚æŸ¥çœ‹ Windows API çš„å¸®åŠ©é“¾æ¥æ˜¯ï¼š<a href="https://docs.microsoft.com/en-us/windows/desktop/">https://docs.microsoft.com/en-us/windows/desktop/</a>  ï¼Œåœ¨é¡µé¢çš„æœç´¢æ¡†ä¸­è¾“å…¥ä½ æƒ³è¦æœç´¢çš„ API å‡½æ•°å³å¯ã€‚</p><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå»ºè®®è¯»è€…åœ¨é¡µé¢çš„åº•éƒ¨å°†é¡µé¢è¯­è¨€è®¾ç½®æˆEnglishï¼Œè¿™æ ·æœç´¢å‡ºæ¥çš„å†…å®¹ä¼šæ›´å‡†ç¡®æ›´ä¸°å¯Œã€‚</p></blockquote><p>æˆ‘ä»¬è¿˜æ˜¯ä»¥ connect å‡½æ•°ä¸ºä¾‹ï¼Œåœ¨ä¸Šè¿°é¡µé¢çš„æœç´¢æ¡†ä¸­è¾“å…¥ <strong>socket connect</strong> ï¼Œç„¶åå›è½¦ï¼Œå¾—åˆ°ä¸€ç»„æœç´¢ç»“æœï¼Œæˆ‘ä»¬é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„é¡µé¢ï¼Œæ‰“å¼€é“¾æ¥ï¼š<a href="https://docs.microsoft.com/en-us/windows/desktop/api/winsock2/nf-winsock2-connect">https://docs.microsoft.com/en-us/windows/desktop/api/winsock2/nf-winsock2-connect</a> ã€‚ä¸ç®€é™‹çš„ man æ‰‹å†Œç›¸æ¯”ï¼ŒMSDN å…³äºconnect å‡½æ•°çš„è¯´æ˜å°±æ¯”è¾ƒè¯¦ç»†äº†ï¼Œå¤§ä½“ä¹Ÿåˆ†ä¸ºä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š</p><ol><li><strong>Syntax</strong>ï¼Œ å³å‡½æ•°ç­¾åï¼Œå‡½æ•°çš„å‚æ•°ç±»å‹ã€ä¸ªæ•°å’Œè¿”å›å€¼ï¼›</li><li><strong>Parameters</strong>ï¼Œå‚æ•°çš„ç”¨æ³•è¯¦ç»†è¯´æ˜ï¼›</li><li><strong>Return Value</strong>ï¼Œ å‡½æ•°çš„è¿”å›å€¼è¯´æ˜ï¼Œåœ¨è¿”å›å€¼éƒ¨åˆ†ï¼Œè¿˜æœ‰å¦‚æœå‡½æ•°è°ƒç”¨å¤±è´¥è¯¦ç»†çš„é”™è¯¯ç è¯´æ˜ä¿¡æ¯ï¼›</li><li><strong>Remarks</strong>ï¼Œè¿™éƒ¨åˆ†å°±æ˜¯è¯¥å‡½æ•°çš„è¯¦ç»†ç”¨æ³•è¯´æ˜ï¼ŒæŸäº›å‡½æ•°è¿˜ä¼šç»™å‡ºç¤ºä¾‹ä»£ç ï¼›</li><li><strong>Requirements</strong>ï¼Œè¿™éƒ¨åˆ†æŒ‡çš„æ˜¯è¦ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œæ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬è¦æ±‚ï¼Œä»£ç éœ€è¦å¼•å…¥çš„å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</li><li><strong>See Also</strong>ï¼Œ è¿™éƒ¨åˆ†ä¸€èˆ¬æ˜¯ä¸€äº›ç›¸å…³å‡½æ•°å’ŒçŸ¥è¯†ç‚¹çš„é“¾æ¥ä¿¡æ¯ã€‚</li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ MSDN ä¸Šé˜…è¯»ç›¸å…³ API çš„å¸®åŠ©ä¿¡æ¯æ—¶ï¼Œä½ è¦è¾©è¯æ€§åœ°å¯¹å¾…å…¶æä¾›çš„ä¿¡æ¯ï¼Œå› ä¸ºå¾ˆå¤šå‡½æ•°çš„å®é™…å·¥ä½œåŸç†å’Œè¡Œä¸ºå¹¶ä¸ä¸€å®šå¦‚ MSDN ä»‹ç»çš„é‚£æ ·ã€‚æ‰€ä»¥åœ¨æœ‰äº› API å¸®åŠ©ä¸‹é¢ä¼šæœ‰ä¸€äº›è¯»è€…çš„è¯„è®ºä¿¡æ¯ï¼Œè¿™äº›è¯„è®ºä¿¡æ¯æˆ–å¯¹æ–‡æ¡£å†…å®¹åšä¸€äº›è¡¥å……æˆ–çº é”™ï¼Œæˆ–ç»™å‡ºä¸€äº›ä»£ç ç¤ºä¾‹ã€‚å»ºè®®è¯»è€…å®é™…æŸ¥é˜…æ—¶ï¼Œç•™æ„ä¸€ä¸‹è¿™éƒ¨åˆ†ä¿¡æ¯ï¼Œæˆ–è®¸èƒ½å¾—åˆ°ä¸€äº›å¾ˆæœ‰ç”¨çš„å¸®åŠ©ã€‚</p><h3 id="TCP-é€šä¿¡åŸºæœ¬æµç¨‹">TCP é€šä¿¡åŸºæœ¬æµç¨‹</h3><p>ä¸ç®¡å¤šä¹ˆå¤æ‚çš„æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯ç¨‹åºï¼Œå…¶ç½‘ç»œé€šä¿¡çš„åŸºæœ¬åŸç†ä¸€å®šå¦‚ä¸‹æ‰€è¿°ï¼š</p><p>å¯¹äºæœåŠ¡å™¨ï¼Œå…¶é€šä¿¡æµç¨‹ä¸€èˆ¬æœ‰å¦‚ä¸‹æ­¥éª¤ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-number">1</span>. è°ƒç”¨ <span class="hljs-keyword">socket</span> å‡½æ•°åˆ›å»º <span class="hljs-keyword">socket</span>ï¼ˆä¾¦å¬<span class="hljs-keyword">socket</span>ï¼‰<br><span class="hljs-number">2</span>. è°ƒç”¨ <span class="hljs-keyword">bind</span> å‡½æ•° å°† <span class="hljs-keyword">socket</span>ç»‘å®šåˆ°æŸä¸ªipå’Œç«¯å£çš„äºŒå…ƒç»„ä¸Š<br><span class="hljs-number">3</span>. è°ƒç”¨ <span class="hljs-keyword">listen</span> å‡½æ•° å¼€å¯ä¾¦å¬<br><span class="hljs-number">4</span>. å½“æœ‰å®¢æˆ·ç«¯è¯·æ±‚è¿æ¥ä¸Šæ¥åï¼Œè°ƒç”¨ <span class="hljs-keyword">accept</span> å‡½æ•°æ¥å—è¿æ¥ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„ <span class="hljs-keyword">socket</span>ï¼ˆå®¢æˆ·ç«¯ <span class="hljs-keyword">socket</span>ï¼‰<br><span class="hljs-number">5</span>. åŸºäºæ–°äº§ç”Ÿçš„ <span class="hljs-keyword">socket</span> è°ƒç”¨ <span class="hljs-keyword">send</span> æˆ– <span class="hljs-keyword">recv</span> å‡½æ•°å¼€å§‹ä¸å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®äº¤æµ<br><span class="hljs-number">6</span>. é€šä¿¡ç»“æŸåï¼Œè°ƒç”¨ <span class="hljs-keyword">close</span> å‡½æ•°å…³é—­ä¾¦å¬ <span class="hljs-keyword">socket</span><br></code></pre></td></tr></table></figure><p>å¯¹äºå®¢æˆ·ç«¯ï¼Œå…¶é€šä¿¡æµç¨‹ä¸€èˆ¬æœ‰å¦‚ä¸‹æ­¥éª¤ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-number">1</span>. è°ƒç”¨ <span class="hljs-keyword">socket</span>å‡½æ•°åˆ›å»ºå®¢æˆ·ç«¯ <span class="hljs-keyword">socket</span><br><span class="hljs-number">2</span>. è°ƒç”¨ <span class="hljs-keyword">connect</span> å‡½æ•°å°è¯•è¿æ¥æœåŠ¡å™¨<br><span class="hljs-number">3</span>. è¿æ¥æˆåŠŸä»¥åè°ƒç”¨ <span class="hljs-keyword">send</span> æˆ– <span class="hljs-keyword">recv</span> å‡½æ•°å¼€å§‹ä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®äº¤æµ<br><span class="hljs-number">4</span>. é€šä¿¡ç»“æŸåï¼Œè°ƒç”¨ <span class="hljs-keyword">close</span> å‡½æ•°å…³é—­ä¾¦å¬<span class="hljs-keyword">socket</span><br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆå®¢æˆ·ç«¯è°ƒç”¨ <strong>close()</strong> ï¼Œä¼šå’ŒæœåŠ¡å™¨ç«¯ <strong>recv()</strong> å‡½æ•°æœ‰å…³ã€‚è¿™ä¸ªæ¶‰åŠåˆ° <strong>recv()</strong> å‡½æ•°çš„è¿”å›å€¼æ„ä¹‰ï¼Œæˆ‘ä¼šåœ¨ä¸‹æ–‡ä¸­è¯¦ç»†è®²è§£ã€‚</p><p>æœåŠ¡å™¨ç«¯å®ç°ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * TCPæœåŠ¡å™¨é€šä¿¡åŸºæœ¬æµç¨‹</span><br><span class="hljs-comment"> * lian si xin 2022-6-15</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºä¸€ä¸ªä¾¦å¬socket</span><br>    <span class="hljs-type">int</span> listenfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (listenfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create listen socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//2.åˆå§‹åŒ–æœåŠ¡å™¨åœ°å€</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> bindaddr;<br>    bindaddr.sin_family = AF_INET;<br>    bindaddr.sin_addr.s_addr = <span class="hljs-built_in">htonl</span>(INADDR_ANY);<br>    bindaddr.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">3000</span>);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bind</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;bindaddr, <span class="hljs-built_in">sizeof</span>(bindaddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;bind listen socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//3.å¯åŠ¨ä¾¦å¬</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">listen</span>(listenfd, SOMAXCONN) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;listen error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>    &#123;<br>        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> clientaddr;<br>        <span class="hljs-type">socklen_t</span> clientaddrlen = <span class="hljs-built_in">sizeof</span>(clientaddr);<br><span class="hljs-comment">//4. æ¥å—å®¢æˆ·ç«¯è¿æ¥</span><br>        <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">accept</span>(listenfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;clientaddr, &amp;clientaddrlen);<br>        <span class="hljs-keyword">if</span> (clientfd != <span class="hljs-number">-1</span>)<br>        &#123;         <br><span class="hljs-type">char</span> recvBuf[<span class="hljs-number">32</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-comment">//5. ä»å®¢æˆ·ç«¯æ¥å—æ•°æ®</span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">recv</span>(clientfd, recvBuf, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret &gt; <span class="hljs-number">0</span>) <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data from client, data: &quot;</span> &lt;&lt; recvBuf &lt;&lt; std::endl;<br><span class="hljs-comment">//6. å°†æ”¶åˆ°çš„æ•°æ®åŸå°ä¸åŠ¨åœ°å‘ç»™å®¢æˆ·ç«¯</span><br>ret = <span class="hljs-built_in">send</span>(clientfd, recvBuf, <span class="hljs-built_in">strlen</span>(recvBuf), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret != <span class="hljs-built_in">strlen</span>(recvBuf))<br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data error.&quot;</span> &lt;&lt; std::endl;<br><br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data to client successfully, data: &quot;</span> &lt;&lt; recvBuf &lt;&lt; std::endl;<br>&#125; <br><span class="hljs-keyword">else</span> <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data error.&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-built_in">close</span>(clientfd);<br>        &#125;<br>    &#125;<br><br><span class="hljs-comment">//7.å…³é—­ä¾¦å¬socket</span><br><span class="hljs-built_in">close</span>(listenfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯å®ç°ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * TCPå®¢æˆ·ç«¯é€šä¿¡åŸºæœ¬æµç¨‹</span><br><span class="hljs-comment"> * lian si xin 2022-6-15</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_ADDRESS <span class="hljs-string">&quot;127.0.0.1&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERVER_PORT     3000</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SEND_DATA       <span class="hljs-string">&quot;helloworld&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºä¸€ä¸ªsocket</span><br>    <span class="hljs-type">int</span> clientfd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (clientfd == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;create client socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//2.è¿æ¥æœåŠ¡å™¨</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">sockaddr_in</span> serveraddr;<br>    serveraddr.sin_family = AF_INET;<br>    serveraddr.sin_addr.s_addr = <span class="hljs-built_in">inet_addr</span>(SERVER_ADDRESS);<br>    serveraddr.sin_port = <span class="hljs-built_in">htons</span>(SERVER_PORT);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">connect</span>(clientfd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;serveraddr, <span class="hljs-built_in">sizeof</span>(serveraddr)) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;connect socket error.&quot;</span> &lt;&lt; std::endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br><span class="hljs-comment">//3. å‘æœåŠ¡å™¨å‘é€æ•°æ®</span><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">send</span>(clientfd, SEND_DATA, <span class="hljs-built_in">strlen</span>(SEND_DATA), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret != <span class="hljs-built_in">strlen</span>(SEND_DATA))<br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data error.&quot;</span> &lt;&lt; std::endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br>std::cout &lt;&lt; <span class="hljs-string">&quot;send data successfully, data: &quot;</span> &lt;&lt; SEND_DATA &lt;&lt; std::endl;<br><br><span class="hljs-comment">//4. ä»å®¢æˆ·ç«¯æ”¶å–æ•°æ®</span><br><span class="hljs-type">char</span> recvBuf[<span class="hljs-number">32</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br>ret = <span class="hljs-built_in">recv</span>(clientfd, recvBuf, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (ret &gt; <span class="hljs-number">0</span>) <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data successfully, data: &quot;</span> &lt;&lt; recvBuf &lt;&lt; std::endl;<br>&#125; <br><span class="hljs-keyword">else</span> <br>&#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;recv data error, data: &quot;</span> &lt;&lt; recvBuf &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-comment">//5. å…³é—­socket</span><br><span class="hljs-built_in">close</span>(clientfd);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ï¼ŒæœåŠ¡å™¨ç«¯åœ¨åœ°å€ <strong>0.0.0.0:3000</strong> å¯åŠ¨ä¸€ä¸ªä¾¦å¬ï¼Œå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨æˆåŠŸåï¼Œç»™æœåŠ¡å™¨å‘é€å­—ç¬¦ä¸²&quot;helloworld&quot;ï¼›æœåŠ¡å™¨æ”¶åˆ°åï¼Œå°†æ”¶åˆ°çš„å­—ç¬¦ä¸²åŸå°ä¸åŠ¨åœ°å‘ç»™å®¢æˆ·ç«¯ã€‚</p><p>åœ¨ Linux Shell ç•Œé¢è¾“å…¥ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-meta"># ç¼–è¯‘ server.cpp ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ server   </span><br>[root<span class="hljs-symbol">@localhost</span> testsocket]<span class="hljs-meta"># g++ -g -o server server.cpp</span><br><span class="hljs-meta"># ç¼–è¯‘ client.cpp ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ client</span><br>[root<span class="hljs-symbol">@localhost</span> testsocket]<span class="hljs-meta"># g++ -g -o client client.cpp</span><br></code></pre></td></tr></table></figure><p>æ¥ç€ï¼Œæˆ‘ä»¬çœ‹ä¸‹æ‰§è¡Œæ•ˆæœï¼Œå…ˆå¯åŠ¨æœåŠ¡å™¨ç¨‹åºï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> testsocket]<span class="hljs-meta"># ./server</span><br></code></pre></td></tr></table></figure><p>å†å¯åŠ¨å®¢æˆ·ç«¯ç¨‹åºï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> testsocket]<span class="hljs-meta"># ./client </span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯è¾“å‡ºï¼š</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">send</span> <span class="hljs-class"><span class="hljs-keyword">data</span> successfully, <span class="hljs-keyword">data</span>: helloworld</span><br><span class="hljs-title">recv</span> <span class="hljs-class"><span class="hljs-keyword">data</span> successfully, <span class="hljs-keyword">data</span>: helloworld</span><br></code></pre></td></tr></table></figure><p>æœåŠ¡å™¨ç«¯è¾“å‡ºï¼š</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">recv</span> <span class="hljs-class"><span class="hljs-keyword">data</span> from client, <span class="hljs-keyword">data</span>: helloworld</span><br><span class="hljs-title">send</span> <span class="hljs-class"><span class="hljs-keyword">data</span> to client successfully, <span class="hljs-keyword">data</span>: helloworld</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ TCP socket ç½‘ç»œé€šä¿¡çš„åŸºæœ¬åŸç†ï¼Œå¯¹äºå¾ˆå¤šäººæ¥è¯´ï¼Œä¸Šè¿°ä»£ç å¯èƒ½å¾ˆç®€å•ï¼Œæ›´æœ‰ç‚¹â€œç©å…·â€çš„æ„å‘³ã€‚ä½†æ˜¯æ·±åˆ»ç†è§£è¿™ä¸¤ä¸ªä»£ç ç‰‡æ®µæ˜¯è¿›ä¸€æ­¥å­¦ä¹ å¼€å‘å¤æ‚çš„ç½‘ç»œé€šä¿¡ç¨‹åºçš„åŸºç¡€ã€‚è€Œä¸”çœ‹ä¼¼å¾ˆç®€å•çš„ä»£ç ï¼Œå´éšè—äº†å¾ˆå¤šçš„ç„æœºå’ŒåŸç†ï¼Œæ¥ä¸‹æ¥çš„ç« èŠ‚æˆ‘å°†ä»¥è¿™ä¸¤æ®µä»£ç ä¸ºè“æœ¬ï¼Œé€æ¸æ·±å…¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œé€šè®¯åŸºç¡€å­¦ä¹ ç¬”è®°ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> socketç¼–ç¨‹ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç½‘ç»œé€šä¿¡åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++æé«˜ç¼–ç¨‹è®²è§£</title>
      <link href="/2022/06/14/C-%E6%8F%90%E9%AB%98%E7%BC%96%E7%A8%8B%E8%AE%B2%E8%A7%A3/"/>
      <url>/2022/06/14/C-%E6%8F%90%E9%AB%98%E7%BC%96%E7%A8%8B%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1>C++æé«˜ç¼–ç¨‹</h1><ul><li>æœ¬é˜¶æ®µä¸»è¦é’ˆå¯¹C++==æ³›å‹ç¼–ç¨‹==å’Œ==STL==æŠ€æœ¯åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨C++æ›´æ·±å±‚çš„ä½¿ç”¨</li></ul><h2 id="1-æ¨¡æ¿">1 æ¨¡æ¿</h2><h3 id="1-1-æ¨¡æ¿çš„æ¦‚å¿µ">1.1 æ¨¡æ¿çš„æ¦‚å¿µ</h3><p>æ¨¡æ¿å°±æ˜¯å»ºç«‹<strong>é€šç”¨çš„æ¨¡å…·</strong>ï¼Œå¤§å¤§<strong>æé«˜å¤ç”¨æ€§</strong></p><p>ä¾‹å¦‚ç”Ÿæ´»ä¸­çš„æ¨¡æ¿</p><p>ä¸€å¯¸ç…§ç‰‡æ¨¡æ¿ï¼š</p><p><img src="/assetss/1547105026929.png" alt="1547105026929"></p><p>PPTæ¨¡æ¿ï¼š</p><p><img src="/assetss/1547103297864.png" alt="1547103297864"></p><p><img src="/assetss/1547103359158.png" alt="1547103359158"></p><p>æ¨¡æ¿çš„ç‰¹ç‚¹ï¼š</p><ul><li>æ¨¡æ¿ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ¡†æ¶</li><li>æ¨¡æ¿çš„é€šç”¨å¹¶ä¸æ˜¯ä¸‡èƒ½çš„</li></ul><h3 id="1-2-å‡½æ•°æ¨¡æ¿">1.2 å‡½æ•°æ¨¡æ¿</h3><ul><li><p>C++å¦ä¸€ç§ç¼–ç¨‹æ€æƒ³ç§°ä¸º ==æ³›å‹ç¼–ç¨‹== ï¼Œä¸»è¦åˆ©ç”¨çš„æŠ€æœ¯å°±æ˜¯æ¨¡æ¿</p></li><li><p>C++æä¾›ä¸¤ç§æ¨¡æ¿æœºåˆ¶:<strong>å‡½æ•°æ¨¡æ¿</strong>å’Œ<strong>ç±»æ¨¡æ¿</strong></p></li></ul><h4 id="1-2-1-å‡½æ•°æ¨¡æ¿è¯­æ³•">1.2.1 å‡½æ•°æ¨¡æ¿è¯­æ³•</h4><p>å‡½æ•°æ¨¡æ¿ä½œç”¨ï¼š</p><p>å»ºç«‹ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå…¶å‡½æ•°è¿”å›å€¼ç±»å‹å’Œå½¢å‚ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œç”¨ä¸€ä¸ª<strong>è™šæ‹Ÿçš„ç±»å‹</strong>æ¥ä»£è¡¨ã€‚</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br>å‡½æ•°å£°æ˜æˆ–å®šä¹‰<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><p>template  â€”  å£°æ˜åˆ›å»ºæ¨¡æ¿</p><p>typename  â€” è¡¨é¢å…¶åé¢çš„ç¬¦å·æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨classä»£æ›¿</p><p>T    â€”   é€šç”¨çš„æ•°æ®ç±»å‹ï¼Œåç§°å¯ä»¥æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-comment">//äº¤æ¢æ•´å‹å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swapInt</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; a, <span class="hljs-type">int</span>&amp; b)</span> </span>&#123;<br><span class="hljs-type">int</span> temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><span class="hljs-comment">//äº¤æ¢æµ®ç‚¹å‹å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swapDouble</span><span class="hljs-params">(<span class="hljs-type">double</span>&amp; a, <span class="hljs-type">double</span>&amp; b)</span> </span>&#123;<br><span class="hljs-type">double</span> temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><span class="hljs-comment">//åˆ©ç”¨æ¨¡æ¿æä¾›é€šç”¨çš„äº¤æ¢å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mySwap</span><span class="hljs-params">(T&amp; a, T&amp; b)</span></span><br><span class="hljs-function"></span>&#123;<br>T temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><br><span class="hljs-comment">//swapInt(a, b);</span><br><br><span class="hljs-comment">//åˆ©ç”¨æ¨¡æ¿å®ç°äº¤æ¢</span><br><span class="hljs-comment">//1ã€è‡ªåŠ¨ç±»å‹æ¨å¯¼</span><br><span class="hljs-built_in">mySwap</span>(a, b);<br><br><span class="hljs-comment">//2ã€æ˜¾ç¤ºæŒ‡å®šç±»å‹</span><br><span class="hljs-built_in">mySwap</span>&lt;<span class="hljs-type">int</span>&gt;(a, b);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å‡½æ•°æ¨¡æ¿åˆ©ç”¨å…³é”®å­— template</li><li>ä½¿ç”¨å‡½æ•°æ¨¡æ¿æœ‰ä¸¤ç§æ–¹å¼ï¼šè‡ªåŠ¨ç±»å‹æ¨å¯¼ã€æ˜¾ç¤ºæŒ‡å®šç±»å‹</li><li>æ¨¡æ¿çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜å¤ç”¨æ€§ï¼Œå°†ç±»å‹å‚æ•°åŒ–</li></ul><h4 id="1-2-2-å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹">1.2.2 å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹</h4><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¿…é¡»æ¨å¯¼å‡ºä¸€è‡´çš„æ•°æ®ç±»å‹T,æ‰å¯ä»¥ä½¿ç”¨</p></li><li><p>æ¨¡æ¿å¿…é¡»è¦ç¡®å®šå‡ºTçš„æ•°æ®ç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//åˆ©ç”¨æ¨¡æ¿æä¾›é€šç”¨çš„äº¤æ¢å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mySwap</span><span class="hljs-params">(T&amp; a, T&amp; b)</span></span><br><span class="hljs-function"></span>&#123;<br>T temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><br><span class="hljs-comment">// 1ã€è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¿…é¡»æ¨å¯¼å‡ºä¸€è‡´çš„æ•°æ®ç±»å‹T,æ‰å¯ä»¥ä½¿ç”¨</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><span class="hljs-type">char</span> c = <span class="hljs-string">&#x27;c&#x27;</span>;<br><br><span class="hljs-built_in">mySwap</span>(a, b); <span class="hljs-comment">// æ­£ç¡®ï¼Œå¯ä»¥æ¨å¯¼å‡ºä¸€è‡´çš„T</span><br><span class="hljs-comment">//mySwap(a, c); // é”™è¯¯ï¼Œæ¨å¯¼ä¸å‡ºä¸€è‡´çš„Tç±»å‹</span><br>&#125;<br><br><br><span class="hljs-comment">// 2ã€æ¨¡æ¿å¿…é¡»è¦ç¡®å®šå‡ºTçš„æ•°æ®ç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//func(); //é”™è¯¯ï¼Œæ¨¡æ¿ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå¿…é¡»ç¡®å®šå‡ºTçš„ç±»å‹</span><br><span class="hljs-built_in">func</span>&lt;<span class="hljs-type">int</span>&gt;(); <span class="hljs-comment">//åˆ©ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œç»™Tä¸€ä¸ªç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨è¯¥æ¨¡æ¿</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ä½¿ç”¨æ¨¡æ¿æ—¶å¿…é¡»ç¡®å®šå‡ºé€šç”¨æ•°æ®ç±»å‹Tï¼Œå¹¶ä¸”èƒ½å¤Ÿæ¨å¯¼å‡ºä¸€è‡´çš„ç±»å‹</li></ul><h4 id="1-2-3-å‡½æ•°æ¨¡æ¿æ¡ˆä¾‹">1.2.3 å‡½æ•°æ¨¡æ¿æ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°ï¼š</p><ul><li>åˆ©ç”¨å‡½æ•°æ¨¡æ¿å°è£…ä¸€ä¸ªæ’åºçš„å‡½æ•°ï¼Œå¯ä»¥å¯¹<strong>ä¸åŒæ•°æ®ç±»å‹æ•°ç»„</strong>è¿›è¡Œæ’åº</li><li>æ’åºè§„åˆ™ä»å¤§åˆ°å°ï¼Œæ’åºç®—æ³•ä¸º<strong>é€‰æ‹©æ’åº</strong></li><li>åˆ†åˆ«åˆ©ç”¨<strong>charæ•°ç»„</strong>å’Œ<strong>intæ•°ç»„</strong>è¿›è¡Œæµ‹è¯•</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//äº¤æ¢çš„å‡½æ•°æ¨¡æ¿</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mySwap</span><span class="hljs-params">(T &amp;a, T&amp;b)</span></span><br><span class="hljs-function"></span>&#123;<br>T temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt; <span class="hljs-comment">// ä¹Ÿå¯ä»¥æ›¿æ¢æˆtypename</span><br><span class="hljs-comment">//åˆ©ç”¨é€‰æ‹©æ’åºï¼Œè¿›è¡Œå¯¹æ•°ç»„ä»å¤§åˆ°å°çš„æ’åº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mySort</span><span class="hljs-params">(T arr[], <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>&#123;<br><span class="hljs-type">int</span> max = i; <span class="hljs-comment">//æœ€å¤§æ•°çš„ä¸‹æ ‡</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i + <span class="hljs-number">1</span>; j &lt; len; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (arr[max] &lt; arr[j])<br>&#123;<br>max = j;<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> (max != i) <span class="hljs-comment">//å¦‚æœæœ€å¤§æ•°çš„ä¸‹æ ‡ä¸æ˜¯iï¼Œäº¤æ¢ä¸¤è€…</span><br>&#123;<br><span class="hljs-built_in">mySwap</span>(arr[max], arr[i]);<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printArray</span><span class="hljs-params">(T arr[], <span class="hljs-type">int</span> len)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>cout &lt;&lt; arr[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//æµ‹è¯•charæ•°ç»„</span><br><span class="hljs-type">char</span> charArr[] = <span class="hljs-string">&quot;bdcfeagh&quot;</span>;<br><span class="hljs-type">int</span> num = <span class="hljs-built_in">sizeof</span>(charArr) / <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">char</span>);<br><span class="hljs-built_in">mySort</span>(charArr, num);<br><span class="hljs-built_in">printArray</span>(charArr, num);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//æµ‹è¯•intæ•°ç»„</span><br><span class="hljs-type">int</span> intArr[] = &#123; <span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span> &#125;;<br><span class="hljs-type">int</span> num = <span class="hljs-built_in">sizeof</span>(intArr) / <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>);<br><span class="hljs-built_in">mySort</span>(intArr, num);<br><span class="hljs-built_in">printArray</span>(intArr, num);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šæ¨¡æ¿å¯ä»¥æé«˜ä»£ç å¤ç”¨ï¼Œéœ€è¦ç†Ÿç»ƒæŒæ¡</p><h4 id="1-2-4-æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«">1.2.4 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«</h4><p><strong>æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ï¼š</strong></p><ul><li>æ™®é€šå‡½æ•°è°ƒç”¨æ—¶å¯ä»¥å‘ç”Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆéšå¼ç±»å‹è½¬æ¢ï¼‰</li><li>å‡½æ•°æ¨¡æ¿è°ƒç”¨æ—¶ï¼Œå¦‚æœåˆ©ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</li><li>å¦‚æœåˆ©ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œå¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//æ™®é€šå‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">myAdd01</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-comment">//å‡½æ•°æ¨¡æ¿</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function">T <span class="hljs-title">myAdd02</span><span class="hljs-params">(T a, T b)</span>  </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-comment">//ä½¿ç”¨å‡½æ•°æ¨¡æ¿æ—¶ï¼Œå¦‚æœç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå‘ç”Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢,å³éšå¼ç±»å‹è½¬æ¢</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><span class="hljs-type">char</span> c = <span class="hljs-string">&#x27;c&#x27;</span>;<br><br>cout &lt;&lt; <span class="hljs-built_in">myAdd01</span>(a, c) &lt;&lt; endl; <span class="hljs-comment">//æ­£ç¡®ï¼Œå°†charç±»å‹çš„&#x27;c&#x27;éšå¼è½¬æ¢ä¸ºintç±»å‹  &#x27;c&#x27; å¯¹åº” ASCIIç  99</span><br><br><span class="hljs-comment">//myAdd02(a, c); // æŠ¥é”™ï¼Œä½¿ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼æ—¶ï¼Œä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</span><br><br><span class="hljs-built_in">myAdd02</span>&lt;<span class="hljs-type">int</span>&gt;(a, c); <span class="hljs-comment">//æ­£ç¡®ï¼Œå¦‚æœç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹ï¼Œå¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå»ºè®®ä½¿ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œè°ƒç”¨å‡½æ•°æ¨¡æ¿ï¼Œå› ä¸ºå¯ä»¥è‡ªå·±ç¡®å®šé€šç”¨ç±»å‹T</p><h4 id="1-2-5-æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨è§„åˆ™">1.2.5 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨è§„åˆ™</h4><p>è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>å¦‚æœå‡½æ•°æ¨¡æ¿å’Œæ™®é€šå‡½æ•°éƒ½å¯ä»¥å®ç°ï¼Œä¼˜å…ˆè°ƒç”¨æ™®é€šå‡½æ•°</li><li>å¯ä»¥é€šè¿‡ç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨æ¥å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿</li><li>å‡½æ•°æ¨¡æ¿ä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½</li><li>å¦‚æœå‡½æ•°æ¨¡æ¿å¯ä»¥äº§ç”Ÿæ›´å¥½çš„åŒ¹é…,ä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿è°ƒç”¨è§„åˆ™</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myPrint</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;è°ƒç”¨çš„æ™®é€šå‡½æ•°&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myPrint</span><span class="hljs-params">(T a, T b)</span> </span><br><span class="hljs-function"></span>&#123; <br>cout &lt;&lt; <span class="hljs-string">&quot;è°ƒç”¨çš„æ¨¡æ¿&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myPrint</span><span class="hljs-params">(T a, T b, T c)</span> </span><br><span class="hljs-function"></span>&#123; <br>cout &lt;&lt; <span class="hljs-string">&quot;è°ƒç”¨é‡è½½çš„æ¨¡æ¿&quot;</span> &lt;&lt; endl; <br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//1ã€å¦‚æœå‡½æ•°æ¨¡æ¿å’Œæ™®é€šå‡½æ•°éƒ½å¯ä»¥å®ç°ï¼Œä¼˜å…ˆè°ƒç”¨æ™®é€šå‡½æ•°</span><br><span class="hljs-comment">// æ³¨æ„ å¦‚æœå‘Šè¯‰ç¼–è¯‘å™¨  æ™®é€šå‡½æ•°æ˜¯æœ‰çš„ï¼Œä½†åªæ˜¯å£°æ˜æ²¡æœ‰å®ç°ï¼Œæˆ–è€…ä¸åœ¨å½“å‰æ–‡ä»¶å†…å®ç°ï¼Œå°±ä¼šæŠ¥é”™æ‰¾ä¸åˆ°</span><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><span class="hljs-built_in">myPrint</span>(a, b); <span class="hljs-comment">//è°ƒç”¨æ™®é€šå‡½æ•°</span><br><br><span class="hljs-comment">//2ã€å¯ä»¥é€šè¿‡ç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨æ¥å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿</span><br>myPrint&lt;&gt;(a, b); <span class="hljs-comment">//è°ƒç”¨å‡½æ•°æ¨¡æ¿</span><br><br><span class="hljs-comment">//3ã€å‡½æ•°æ¨¡æ¿ä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½</span><br><span class="hljs-type">int</span> c = <span class="hljs-number">30</span>;<br><span class="hljs-built_in">myPrint</span>(a, b, c); <span class="hljs-comment">//è°ƒç”¨é‡è½½çš„å‡½æ•°æ¨¡æ¿</span><br><br><span class="hljs-comment">//4ã€ å¦‚æœå‡½æ•°æ¨¡æ¿å¯ä»¥äº§ç”Ÿæ›´å¥½çš„åŒ¹é…,ä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿</span><br><span class="hljs-type">char</span> c1 = <span class="hljs-string">&#x27;a&#x27;</span>;<br><span class="hljs-type">char</span> c2 = <span class="hljs-string">&#x27;b&#x27;</span>;<br><span class="hljs-built_in">myPrint</span>(c1, c2); <span class="hljs-comment">//è°ƒç”¨å‡½æ•°æ¨¡æ¿</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šæ—¢ç„¶æä¾›äº†å‡½æ•°æ¨¡æ¿ï¼Œæœ€å¥½å°±ä¸è¦æä¾›æ™®é€šå‡½æ•°ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°äºŒä¹‰æ€§</p><h4 id="1-2-6-æ¨¡æ¿çš„å±€é™æ€§">1.2.6 æ¨¡æ¿çš„å±€é™æ€§</h4><p><strong>å±€é™æ€§ï¼š</strong></p><ul><li>æ¨¡æ¿çš„é€šç”¨æ€§å¹¶ä¸æ˜¯ä¸‡èƒ½çš„</li></ul><p><strong>ä¾‹å¦‚ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(T a, T b)</span></span><br><span class="hljs-function"></span>&#123; <br>   a = b;<br>   &#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­æä¾›çš„èµ‹å€¼æ“ä½œï¼Œå¦‚æœä¼ å…¥çš„aå’Œbæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå°±æ— æ³•å®ç°äº†</p><p>å†ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(T a, T b)</span></span><br><span class="hljs-function"></span>&#123; <br>   <span class="hljs-keyword">if</span>(a &gt; b) &#123; ... &#125;<br>   &#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¦‚æœTçš„æ•°æ®ç±»å‹ä¼ å…¥çš„æ˜¯åƒPersonè¿™æ ·çš„è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œä¹Ÿæ— æ³•æ­£å¸¸è¿è¡Œ</p><p>å› æ­¤C++ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œæä¾›æ¨¡æ¿çš„é‡è½½ï¼Œå¯ä»¥ä¸ºè¿™äº›<strong>ç‰¹å®šçš„ç±»å‹</strong>æä¾›<strong>å…·ä½“åŒ–çš„æ¨¡æ¿</strong></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br>string m_Name;<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-comment">//æ™®é€šå‡½æ•°æ¨¡æ¿</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">myCompare</span><span class="hljs-params">(T&amp; a, T&amp; b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span> (a == b)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br>&#125;<br><br><br><span class="hljs-comment">//å…·ä½“åŒ–ï¼Œæ˜¾ç¤ºå…·ä½“åŒ–çš„åŸå‹å’Œå®šæ„æ€ä»¥template&lt;&gt;å¼€å¤´ï¼Œå¹¶é€šè¿‡åç§°æ¥æŒ‡å‡ºç±»å‹</span><br><span class="hljs-comment">//å…·ä½“åŒ–ä¼˜å…ˆäºå¸¸è§„æ¨¡æ¿</span><br><span class="hljs-keyword">template</span>&lt;&gt; <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">myCompare</span><span class="hljs-params">(Person &amp;p1, Person &amp;p2)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span> ( p<span class="hljs-number">1.</span>m_Name  == p<span class="hljs-number">2.</span>m_Name &amp;&amp; p<span class="hljs-number">1.</span>m_Age == p<span class="hljs-number">2.</span>m_Age)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><span class="hljs-comment">//å†…ç½®æ•°æ®ç±»å‹å¯ä»¥ç›´æ¥ä½¿ç”¨é€šç”¨çš„å‡½æ•°æ¨¡æ¿</span><br><span class="hljs-type">bool</span> ret = <span class="hljs-built_in">myCompare</span>(a, b);<br><span class="hljs-keyword">if</span> (ret)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;a == b &quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;a != b &quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œä¸ä¼šè°ƒç”¨æ™®é€šçš„å‡½æ•°æ¨¡æ¿</span><br><span class="hljs-comment">//å¯ä»¥åˆ›å»ºå…·ä½“åŒ–çš„Personæ•°æ®ç±»å‹çš„æ¨¡æ¿ï¼Œç”¨äºç‰¹æ®Šå¤„ç†è¿™ä¸ªç±»å‹</span><br><span class="hljs-type">bool</span> ret = <span class="hljs-built_in">myCompare</span>(p1, p2);<br><span class="hljs-keyword">if</span> (ret)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;p1 == p2 &quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;p1 != p2 &quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ©ç”¨å…·ä½“åŒ–çš„æ¨¡æ¿ï¼Œå¯ä»¥è§£å†³è‡ªå®šä¹‰ç±»å‹çš„é€šç”¨åŒ–</li><li>å­¦ä¹ æ¨¡æ¿å¹¶ä¸æ˜¯ä¸ºäº†å†™æ¨¡æ¿ï¼Œè€Œæ˜¯åœ¨STLèƒ½å¤Ÿè¿ç”¨ç³»ç»Ÿæä¾›çš„æ¨¡æ¿</li></ul><h3 id="1-3-ç±»æ¨¡æ¿">1.3 ç±»æ¨¡æ¿</h3><h4 id="1-3-1-ç±»æ¨¡æ¿è¯­æ³•">1.3.1 ç±»æ¨¡æ¿è¯­æ³•</h4><p>ç±»æ¨¡æ¿ä½œç”¨ï¼š</p><ul><li>å»ºç«‹ä¸€ä¸ªé€šç”¨ç±»ï¼Œç±»ä¸­çš„æˆå‘˜ æ•°æ®ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œç”¨ä¸€ä¸ª<strong>è™šæ‹Ÿçš„ç±»å‹</strong>æ¥ä»£è¡¨ã€‚</li></ul><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br>ç±»<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><p>template  â€”  å£°æ˜åˆ›å»ºæ¨¡æ¿</p><p>typename  â€” è¡¨é¢å…¶åé¢çš„ç¬¦å·æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨classä»£æ›¿</p><p>T    â€”   é€šç”¨çš„æ•°æ®ç±»å‹ï¼Œåç§°å¯ä»¥æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-comment">//ç±»æ¨¡æ¿</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">NameType</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeType</span>&gt; <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(NameType name, AgeType age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;mName = name;<br><span class="hljs-keyword">this</span>-&gt;mAge = age;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPerson</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;name: &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;mName &lt;&lt; <span class="hljs-string">&quot; age: &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;mAge &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">public</span>:<br>NameType mName;<br>AgeType mAge;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">// æŒ‡å®šNameType ä¸ºstringç±»å‹ï¼ŒAgeType ä¸º intç±»å‹</span><br>Person&lt;string, <span class="hljs-type">int</span>&gt;<span class="hljs-built_in">P1</span>(<span class="hljs-string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="hljs-number">999</span>);<br>P<span class="hljs-number">1.</span><span class="hljs-built_in">showPerson</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿è¯­æ³•ç›¸ä¼¼ï¼Œåœ¨å£°æ˜æ¨¡æ¿templateåé¢åŠ ç±»ï¼Œæ­¤ç±»ç§°ä¸ºç±»æ¨¡æ¿</p><h4 id="1-3-2-ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«">1.3.2 ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«</h4><p>ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p><ol><li>ç±»æ¨¡æ¿æ²¡æœ‰è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„ä½¿ç”¨æ–¹å¼</li><li>ç±»æ¨¡æ¿åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­å¯ä»¥æœ‰é»˜è®¤å‚æ•°</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-comment">//ç±»æ¨¡æ¿</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">NameType</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeType</span> = <span class="hljs-type">int</span>&gt; <br><span class="hljs-keyword">class</span> Person<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(NameType name, AgeType age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;mName = name;<br><span class="hljs-keyword">this</span>-&gt;mAge = age;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPerson</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;name: &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;mName &lt;&lt; <span class="hljs-string">&quot; age: &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;mAge &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">public</span>:<br>NameType mName;<br>AgeType mAge;<br>&#125;;<br><br><span class="hljs-comment">//1ã€ç±»æ¨¡æ¿æ²¡æœ‰è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„ä½¿ç”¨æ–¹å¼</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">// Person p(&quot;å­™æ‚Ÿç©º&quot;, 1000); // é”™è¯¯ ç±»æ¨¡æ¿ä½¿ç”¨æ—¶å€™ï¼Œä¸å¯ä»¥ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼</span><br>Person &lt;string ,<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="hljs-number">1000</span>); <span class="hljs-comment">//å¿…é¡»ä½¿ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œä½¿ç”¨ç±»æ¨¡æ¿</span><br>p.<span class="hljs-built_in">showPerson</span>();<br>&#125;<br><br><span class="hljs-comment">//2ã€ç±»æ¨¡æ¿åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­å¯ä»¥æœ‰é»˜è®¤å‚æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person &lt;string&gt; <span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="hljs-number">999</span>); <span class="hljs-comment">//ç±»æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°åˆ—è¡¨ å¯ä»¥æŒ‡å®šé»˜è®¤å‚æ•°</span><br>p.<span class="hljs-built_in">showPerson</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç±»æ¨¡æ¿ä½¿ç”¨åªèƒ½ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹æ–¹å¼</li><li>ç±»æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°åˆ—è¡¨å¯ä»¥æœ‰é»˜è®¤å‚æ•°</li></ul><h4 id="1-3-3-ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœº">1.3.3 ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœº</h4><p>ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°å’Œæ™®é€šç±»ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯æœ‰åŒºåˆ«çš„ï¼š</p><ul><li>æ™®é€šç±»ä¸­çš„æˆå‘˜å‡½æ•°ä¸€å¼€å§‹å°±å¯ä»¥åˆ›å»º</li><li>ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°åœ¨è°ƒç”¨æ—¶æ‰åˆ›å»º</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person1</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPerson1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Person1 show&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person2</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPerson2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Person2 show&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>T obj;<br><br><span class="hljs-comment">//ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œå¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±åˆ›å»ºçš„ï¼Œè€Œæ˜¯åœ¨æ¨¡æ¿è°ƒç”¨æ—¶å†ç”Ÿæˆ</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">fun1</span><span class="hljs-params">()</span> </span>&#123; obj.<span class="hljs-built_in">showPerson1</span>(); &#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">fun2</span><span class="hljs-params">()</span> </span>&#123; obj.<span class="hljs-built_in">showPerson2</span>(); &#125;<br><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>MyClass&lt;Person1&gt; m;<br><br>m.<span class="hljs-built_in">fun1</span>();<br><br><span class="hljs-comment">//m.fun2();//ç¼–è¯‘ä¼šå‡ºé”™ï¼Œè¯´æ˜å‡½æ•°è°ƒç”¨æ‰ä¼šå»åˆ›å»ºæˆå‘˜å‡½æ•°</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°å¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±åˆ›å»ºçš„ï¼Œåœ¨è°ƒç”¨æ—¶æ‰å»åˆ›å»º</p><h4 id="1-3-4-ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°">1.3.4 ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>ç±»æ¨¡æ¿å®ä¾‹åŒ–å‡ºçš„å¯¹è±¡ï¼Œå‘å‡½æ•°ä¼ å‚çš„æ–¹å¼</li></ul><p>ä¸€å…±æœ‰ä¸‰ç§ä¼ å…¥æ–¹å¼ï¼š</p><ol><li>æŒ‡å®šä¼ å…¥çš„ç±»å‹   â€” ç›´æ¥æ˜¾ç¤ºå¯¹è±¡çš„æ•°æ®ç±»å‹</li><li>å‚æ•°æ¨¡æ¿åŒ–           â€” å°†å¯¹è±¡ä¸­çš„å‚æ•°å˜ä¸ºæ¨¡æ¿è¿›è¡Œä¼ é€’</li><li>æ•´ä¸ªç±»æ¨¡æ¿åŒ–       â€” å°†è¿™ä¸ªå¯¹è±¡ç±»å‹ æ¨¡æ¿åŒ–è¿›è¡Œä¼ é€’</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-comment">//ç±»æ¨¡æ¿</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">NameType</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeType</span> = <span class="hljs-type">int</span>&gt; <br><span class="hljs-keyword">class</span> Person<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(NameType name, AgeType age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;mName = name;<br><span class="hljs-keyword">this</span>-&gt;mAge = age;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPerson</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;name: &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;mName &lt;&lt; <span class="hljs-string">&quot; age: &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;mAge &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">public</span>:<br>NameType mName;<br>AgeType mAge;<br>&#125;;<br><br><span class="hljs-comment">//1ã€æŒ‡å®šä¼ å…¥çš„ç±»å‹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printPerson1</span><span class="hljs-params">(Person&lt;string, <span class="hljs-type">int</span>&gt; &amp;p)</span> </span><br><span class="hljs-function"></span>&#123;<br>p.<span class="hljs-built_in">showPerson</span>();<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person &lt;string, <span class="hljs-type">int</span> &gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printPerson1</span>(p);<br>&#125;<br><br><span class="hljs-comment">//2ã€å‚æ•°æ¨¡æ¿åŒ–</span><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printPerson2</span><span class="hljs-params">(Person&lt;T1, T2&gt;&amp;p)</span></span><br><span class="hljs-function"></span>&#123;<br>p.<span class="hljs-built_in">showPerson</span>();<br>cout &lt;&lt; <span class="hljs-string">&quot;T1çš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">typeid</span>(T1).<span class="hljs-built_in">name</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;T2çš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">typeid</span>(T2).<span class="hljs-built_in">name</span>() &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person &lt;string, <span class="hljs-type">int</span> &gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="hljs-number">90</span>);<br><span class="hljs-built_in">printPerson2</span>(p);<br>&#125;<br><br><span class="hljs-comment">//3ã€æ•´ä¸ªç±»æ¨¡æ¿åŒ–</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printPerson3</span><span class="hljs-params">(T &amp; p)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Tçš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">typeid</span>(T).<span class="hljs-built_in">name</span>() &lt;&lt; endl;<br>p.<span class="hljs-built_in">showPerson</span>();<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person &lt;string, <span class="hljs-type">int</span> &gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;å”åƒ§&quot;</span>, <span class="hljs-number">30</span>);<br><span class="hljs-built_in">printPerson3</span>(p);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><span class="hljs-built_in">test02</span>();<br><span class="hljs-built_in">test03</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é€šè¿‡ç±»æ¨¡æ¿åˆ›å»ºçš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸‰ç§æ–¹å¼å‘å‡½æ•°ä¸­è¿›è¡Œä¼ å‚</li><li>ä½¿ç”¨æ¯”è¾ƒå¹¿æ³›æ˜¯ç¬¬ä¸€ç§ï¼šæŒ‡å®šä¼ å…¥çš„ç±»å‹</li></ul><h4 id="1-3-5-ç±»æ¨¡æ¿ä¸ç»§æ‰¿">1.3.5 ç±»æ¨¡æ¿ä¸ç»§æ‰¿</h4><p>å½“ç±»æ¨¡æ¿ç¢°åˆ°ç»§æ‰¿æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p><ul><li>å½“å­ç±»ç»§æ‰¿çš„çˆ¶ç±»æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿æ—¶ï¼Œå­ç±»åœ¨å£°æ˜çš„æ—¶å€™ï¼Œè¦æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„ç±»å‹</li><li>å¦‚æœä¸æŒ‡å®šï¼Œç¼–è¯‘å™¨æ— æ³•ç»™å­ç±»åˆ†é…å†…å­˜</li><li>å¦‚æœæƒ³çµæ´»æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„ç±»å‹ï¼Œå­ç±»ä¹Ÿéœ€å˜ä¸ºç±»æ¨¡æ¿</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span><br>&#123;<br>T m;<br>&#125;;<br><br><span class="hljs-comment">//class Son:public Base  //é”™è¯¯ï¼Œc++ç¼–è¯‘éœ€è¦ç»™å­ç±»åˆ†é…å†…å­˜ï¼Œå¿…é¡»çŸ¥é“çˆ¶ç±»ä¸­Tçš„ç±»å‹æ‰å¯ä»¥å‘ä¸‹ç»§æ‰¿</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> :<span class="hljs-keyword">public</span> Base&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-comment">//å¿…é¡»æŒ‡å®šä¸€ä¸ªç±»å‹</span><br>&#123;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Son c;<br>&#125;<br><br><span class="hljs-comment">//ç±»æ¨¡æ¿ç»§æ‰¿ç±»æ¨¡æ¿ ,å¯ä»¥ç”¨T2æŒ‡å®šçˆ¶ç±»ä¸­çš„Tç±»å‹</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son2</span> :<span class="hljs-keyword">public</span> Base&lt;T2&gt;<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Son2</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-built_in">typeid</span>(T1).<span class="hljs-built_in">name</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-built_in">typeid</span>(T2).<span class="hljs-built_in">name</span>() &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Son2&lt;<span class="hljs-type">int</span>, <span class="hljs-type">char</span>&gt; child1;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå¦‚æœçˆ¶ç±»æ˜¯ç±»æ¨¡æ¿ï¼Œå­ç±»éœ€è¦æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„æ•°æ®ç±»å‹</p><h4 id="1-3-6-ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°">1.3.6 ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</h4><p>å­¦ä¹ ç›®æ ‡ï¼šèƒ½å¤ŸæŒæ¡ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-comment">//ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//æˆå‘˜å‡½æ•°ç±»å†…å£°æ˜</span><br><span class="hljs-built_in">Person</span>(T1 name, T2 age);<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPerson</span><span class="hljs-params">()</span></span>;<br><br><span class="hljs-keyword">public</span>:<br>T1 m_Name;<br>T2 m_Age;<br>&#125;;<br><br><span class="hljs-comment">//æ„é€ å‡½æ•° ç±»å¤–å®ç°</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br>Person&lt;T1, T2&gt;::<span class="hljs-built_in">Person</span>(T1 name, T2 age) &#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br><br><span class="hljs-comment">//æˆå‘˜å‡½æ•° ç±»å¤–å®ç°</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-type">void</span> Person&lt;T1, T2&gt;::<span class="hljs-built_in">showPerson</span>() &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“å: &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„:&quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;m_Age &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">Person&lt;string, <span class="hljs-type">int</span>&gt; <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br>p.<span class="hljs-built_in">showPerson</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°ç±»å¤–å®ç°æ—¶ï¼Œéœ€è¦åŠ ä¸Šæ¨¡æ¿å‚æ•°åˆ—è¡¨</p><h4 id="1-3-7-ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™">1.3.7 ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°åˆ†æ–‡ä»¶ç¼–å†™äº§ç”Ÿçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹å¼</li></ul><p>é—®é¢˜ï¼š</p><ul><li>ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯åœ¨è°ƒç”¨é˜¶æ®µï¼Œå¯¼è‡´åˆ†æ–‡ä»¶ç¼–å†™æ—¶é“¾æ¥ä¸åˆ°</li></ul><p>è§£å†³ï¼š</p><ul><li>è§£å†³æ–¹å¼1ï¼šç›´æ¥åŒ…å«.cppæºæ–‡ä»¶</li><li>è§£å†³æ–¹å¼2ï¼šå°†å£°æ˜å’Œå®ç°å†™åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶æ›´æ”¹åç¼€åä¸º.hppï¼Œhppæ˜¯çº¦å®šçš„åç§°ï¼Œå¹¶ä¸æ˜¯å¼ºåˆ¶</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>person.hppä¸­ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(T1 name, T2 age);<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPerson</span><span class="hljs-params">()</span></span>;<br><span class="hljs-keyword">public</span>:<br>T1 m_Name;<br>T2 m_Age;<br>&#125;;<br><br><span class="hljs-comment">//æ„é€ å‡½æ•° ç±»å¤–å®ç°</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br>Person&lt;T1, T2&gt;::<span class="hljs-built_in">Person</span>(T1 name, T2 age) &#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br><br><span class="hljs-comment">//æˆå‘˜å‡½æ•° ç±»å¤–å®ç°</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-type">void</span> Person&lt;T1, T2&gt;::<span class="hljs-built_in">showPerson</span>() &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“å: &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„:&quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;m_Age &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™.cppä¸­ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//#include &quot;person.h&quot;</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;person.cpp&quot;</span> <span class="hljs-comment">//è§£å†³æ–¹å¼1ï¼ŒåŒ…å«cppæºæ–‡ä»¶</span></span><br><br><span class="hljs-comment">//è§£å†³æ–¹å¼2ï¼Œå°†å£°æ˜å’Œå®ç°å†™åˆ°ä¸€èµ·ï¼Œæ–‡ä»¶åç¼€åæ”¹ä¸º.hpp</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;person.hpp&quot;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">Person&lt;string, <span class="hljs-type">int</span>&gt; <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>p.<span class="hljs-built_in">showPerson</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä¸»æµçš„è§£å†³æ–¹å¼æ˜¯ç¬¬äºŒç§ï¼Œå°†ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°å†™åˆ°ä¸€èµ·ï¼Œå¹¶å°†åç¼€åæ”¹ä¸º.hpp</p><h4 id="1-3-8-ç±»æ¨¡æ¿ä¸å‹å…ƒ">1.3.8 ç±»æ¨¡æ¿ä¸å‹å…ƒ</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡ç±»æ¨¡æ¿é…åˆå‹å…ƒå‡½æ•°çš„ç±»å†…å’Œç±»å¤–å®ç°</li></ul><p>å…¨å±€å‡½æ•°ç±»å†…å®ç° - ç›´æ¥åœ¨ç±»å†…å£°æ˜å‹å…ƒå³å¯</p><p>å…¨å±€å‡½æ•°ç±»å¤–å®ç° - éœ€è¦æå‰è®©ç¼–è¯‘å™¨çŸ¥é“å…¨å±€å‡½æ•°çš„å­˜åœ¨</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-comment">//2ã€å…¨å±€å‡½æ•°é…åˆå‹å…ƒ  ç±»å¤–å®ç° - å…ˆåšå‡½æ•°æ¨¡æ¿å£°æ˜ï¼Œä¸‹æ–¹åœ¨åšå‡½æ•°æ¨¡æ¿å®šä¹‰ï¼Œåœ¨åšå‹å…ƒ</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>;<br><br><span class="hljs-comment">//å¦‚æœå£°æ˜äº†å‡½æ•°æ¨¡æ¿ï¼Œå¯ä»¥å°†å®ç°å†™åˆ°åé¢ï¼Œå¦åˆ™éœ€è¦å°†å®ç°ä½“å†™åˆ°ç±»çš„å‰é¢è®©ç¼–è¯‘å™¨æå‰çœ‹åˆ°</span><br><span class="hljs-comment">//template&lt;class T1, class T2&gt; void printPerson2(Person&lt;T1, T2&gt; &amp; p); </span><br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T1, <span class="hljs-keyword">class</span> T2&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printPerson2</span><span class="hljs-params">(Person&lt;T1, T2&gt; &amp; p)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç±»å¤–å®ç° ---- å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-comment">//1ã€å…¨å±€å‡½æ•°é…åˆå‹å…ƒ   ç±»å†…å®ç°</span><br><span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">printPerson</span><span class="hljs-params">(Person&lt;T1, T2&gt; &amp; p)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;<br>&#125;<br><br><br><span class="hljs-comment">//å…¨å±€å‡½æ•°é…åˆå‹å…ƒ  ç±»å¤–å®ç°</span><br><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> printPerson2&lt;&gt;(Person&lt;T1, T2&gt; &amp; p);<br><br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-built_in">Person</span>(T1 name, T2 age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br><br><br><span class="hljs-keyword">private</span>:<br>T1 m_Name;<br>T2 m_Age;<br><br>&#125;;<br><br><span class="hljs-comment">//1ã€å…¨å±€å‡½æ•°åœ¨ç±»å†…å®ç°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person &lt;string, <span class="hljs-type">int</span> &gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">20</span>);<br><span class="hljs-built_in">printPerson</span>(p);<br>&#125;<br><br><br><span class="hljs-comment">//2ã€å…¨å±€å‡½æ•°åœ¨ç±»å¤–å®ç°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person &lt;string, <span class="hljs-type">int</span> &gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;Jerry&quot;</span>, <span class="hljs-number">30</span>);<br><span class="hljs-built_in">printPerson2</span>(p);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå»ºè®®å…¨å±€å‡½æ•°åšç±»å†…å®ç°ï¼Œç”¨æ³•ç®€å•ï¼Œè€Œä¸”ç¼–è¯‘å™¨å¯ä»¥ç›´æ¥è¯†åˆ«</p><h4 id="1-3-9-ç±»æ¨¡æ¿æ¡ˆä¾‹">1.3.9 ç±»æ¨¡æ¿æ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°:  å®ç°ä¸€ä¸ªé€šç”¨çš„æ•°ç»„ç±»ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p><ul><li>å¯ä»¥å¯¹å†…ç½®æ•°æ®ç±»å‹ä»¥åŠè‡ªå®šä¹‰æ•°æ®ç±»å‹çš„æ•°æ®è¿›è¡Œå­˜å‚¨</li><li>å°†æ•°ç»„ä¸­çš„æ•°æ®å­˜å‚¨åˆ°å †åŒº</li><li>æ„é€ å‡½æ•°ä¸­å¯ä»¥ä¼ å…¥æ•°ç»„çš„å®¹é‡</li><li>æä¾›å¯¹åº”çš„æ‹·è´æ„é€ å‡½æ•°ä»¥åŠoperator=é˜²æ­¢æµ…æ‹·è´é—®é¢˜</li><li>æä¾›å°¾æ’æ³•å’Œå°¾åˆ æ³•å¯¹æ•°ç»„ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ å’Œåˆ é™¤</li><li>å¯ä»¥é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ </li><li>å¯ä»¥è·å–æ•°ç»„ä¸­å½“å‰å…ƒç´ ä¸ªæ•°å’Œæ•°ç»„çš„å®¹é‡</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>myArray.hppä¸­ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyArray</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <br><span class="hljs-comment">//æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">MyArray</span>(<span class="hljs-type">int</span> capacity)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Capacity = capacity;<br><span class="hljs-keyword">this</span>-&gt;m_Size = <span class="hljs-number">0</span>;<br>pAddress = <span class="hljs-keyword">new</span> T[<span class="hljs-keyword">this</span>-&gt;m_Capacity];<br>&#125;<br><br><span class="hljs-comment">//æ‹·è´æ„é€ </span><br><span class="hljs-built_in">MyArray</span>(<span class="hljs-type">const</span> MyArray &amp; arr)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Capacity = arr.m_Capacity;<br><span class="hljs-keyword">this</span>-&gt;m_Size = arr.m_Size;<br><span class="hljs-keyword">this</span>-&gt;pAddress = <span class="hljs-keyword">new</span> T[<span class="hljs-keyword">this</span>-&gt;m_Capacity];<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>-&gt;m_Size; i++)<br>&#123;<br><span class="hljs-comment">//å¦‚æœTä¸ºå¯¹è±¡ï¼Œè€Œä¸”è¿˜åŒ…å«æŒ‡é’ˆï¼Œå¿…é¡»éœ€è¦é‡è½½ = æ“ä½œç¬¦ï¼Œå› ä¸ºè¿™ä¸ªç­‰å·ä¸æ˜¯ æ„é€  è€Œæ˜¯èµ‹å€¼ï¼Œ</span><br><span class="hljs-comment">// æ™®é€šç±»å‹å¯ä»¥ç›´æ¥= ä½†æ˜¯æŒ‡é’ˆç±»å‹éœ€è¦æ·±æ‹·è´</span><br><span class="hljs-keyword">this</span>-&gt;pAddress[i] = arr.pAddress[i];<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//é‡è½½= æ“ä½œç¬¦  é˜²æ­¢æµ…æ‹·è´é—®é¢˜</span><br>MyArray&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> MyArray&amp; myarray) &#123;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;pAddress != <span class="hljs-literal">NULL</span>) &#123;<br><span class="hljs-keyword">delete</span>[] <span class="hljs-keyword">this</span>-&gt;pAddress;<br><span class="hljs-keyword">this</span>-&gt;m_Capacity = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">this</span>-&gt;m_Size = <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-keyword">this</span>-&gt;m_Capacity = myarray.m_Capacity;<br><span class="hljs-keyword">this</span>-&gt;m_Size = myarray.m_Size;<br><span class="hljs-keyword">this</span>-&gt;pAddress = <span class="hljs-keyword">new</span> T[<span class="hljs-keyword">this</span>-&gt;m_Capacity];<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>-&gt;m_Size; i++) &#123;<br><span class="hljs-keyword">this</span>-&gt;pAddress[i] = myarray[i];<br>&#125;<br><span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br><br><span class="hljs-comment">//é‡è½½[] æ“ä½œç¬¦  arr[0]</span><br>T&amp; <span class="hljs-keyword">operator</span> [](<span class="hljs-type">int</span> index)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;pAddress[index]; <span class="hljs-comment">//ä¸è€ƒè™‘è¶Šç•Œï¼Œç”¨æˆ·è‡ªå·±å»å¤„ç†</span><br>&#125;<br><br><span class="hljs-comment">//å°¾æ’æ³•</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Push_back</span><span class="hljs-params">(<span class="hljs-type">const</span> T &amp; val)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;m_Capacity == <span class="hljs-keyword">this</span>-&gt;m_Size)<br>&#123;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-keyword">this</span>-&gt;pAddress[<span class="hljs-keyword">this</span>-&gt;m_Size] = val;<br><span class="hljs-keyword">this</span>-&gt;m_Size++;<br>&#125;<br><br><span class="hljs-comment">//å°¾åˆ æ³•</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Pop_back</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;m_Size == <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-keyword">this</span>-&gt;m_Size--;<br>&#125;<br><br><span class="hljs-comment">//è·å–æ•°ç»„å®¹é‡</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getCapacity</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;m_Capacity;<br>&#125;<br><br><span class="hljs-comment">//è·å–æ•°ç»„å¤§å°</span><br><span class="hljs-function"><span class="hljs-type">int</span><span class="hljs-title">getSize</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;m_Size;<br>&#125;<br><br><br><span class="hljs-comment">//ææ„</span><br>~<span class="hljs-built_in">MyArray</span>()<br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;pAddress != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span>[] <span class="hljs-keyword">this</span>-&gt;pAddress;<br><span class="hljs-keyword">this</span>-&gt;pAddress = <span class="hljs-literal">NULL</span>;<br><span class="hljs-keyword">this</span>-&gt;m_Capacity = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">this</span>-&gt;m_Size = <span class="hljs-number">0</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">private</span>:<br>T * pAddress;  <span class="hljs-comment">//æŒ‡å‘ä¸€ä¸ªå †ç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´å­˜å‚¨çœŸæ­£çš„æ•°æ®</span><br><span class="hljs-type">int</span> m_Capacity; <span class="hljs-comment">//å®¹é‡</span><br><span class="hljs-type">int</span> m_Size;   <span class="hljs-comment">// å¤§å°</span><br>&#125;;<br></code></pre></td></tr></table></figure><p>ç±»æ¨¡æ¿æ¡ˆä¾‹â€”æ•°ç»„ç±»å°è£….cppä¸­</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;myArray.hpp&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printIntArray</span><span class="hljs-params">(MyArray&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> </span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-built_in">getSize</span>(); i++) &#123;<br>cout &lt;&lt; arr[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//æµ‹è¯•å†…ç½®æ•°æ®ç±»å‹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">MyArray&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">array1</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>array<span class="hljs-number">1.</span><span class="hljs-built_in">Push_back</span>(i);<br>&#125;<br>cout &lt;&lt; <span class="hljs-string">&quot;array1æ‰“å°è¾“å‡ºï¼š&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">printIntArray</span>(array1);<br>cout &lt;&lt; <span class="hljs-string">&quot;array1çš„å¤§å°ï¼š&quot;</span> &lt;&lt; array<span class="hljs-number">1.</span><span class="hljs-built_in">getSize</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;array1çš„å®¹é‡ï¼š&quot;</span> &lt;&lt; array<span class="hljs-number">1.</span><span class="hljs-built_in">getCapacity</span>() &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;--------------------------&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-function">MyArray&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">array2</span><span class="hljs-params">(array1)</span></span>;<br>array<span class="hljs-number">2.</span><span class="hljs-built_in">Pop_back</span>();<br>cout &lt;&lt; <span class="hljs-string">&quot;array2æ‰“å°è¾“å‡ºï¼š&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">printIntArray</span>(array2);<br>cout &lt;&lt; <span class="hljs-string">&quot;array2çš„å¤§å°ï¼š&quot;</span> &lt;&lt; array<span class="hljs-number">2.</span><span class="hljs-built_in">getSize</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;array2çš„å®¹é‡ï¼š&quot;</span> &lt;&lt; array<span class="hljs-number">2.</span><span class="hljs-built_in">getCapacity</span>() &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//æµ‹è¯•è‡ªå®šä¹‰æ•°æ®ç±»å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>() &#123;&#125; <br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age) &#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br><span class="hljs-keyword">public</span>:<br>string m_Name;<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printPersonArray</span><span class="hljs-params">(MyArray&lt;Person&gt;&amp; personArr)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; personArr.<span class="hljs-built_in">getSize</span>(); i++) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; personArr[i].m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; personArr[i].m_Age &lt;&lt; endl;<br>&#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//åˆ›å»ºæ•°ç»„</span><br><span class="hljs-function">MyArray&lt;Person&gt; <span class="hljs-title">pArray</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;éŸ©ä¿¡&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;å¦²å·±&quot;</span>, <span class="hljs-number">18</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;ç‹æ˜­å›&quot;</span>, <span class="hljs-number">15</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;èµµäº‘&quot;</span>, <span class="hljs-number">24</span>)</span></span>;<br><br><span class="hljs-comment">//æ’å…¥æ•°æ®</span><br>pArray.<span class="hljs-built_in">Push_back</span>(p1);<br>pArray.<span class="hljs-built_in">Push_back</span>(p2);<br>pArray.<span class="hljs-built_in">Push_back</span>(p3);<br>pArray.<span class="hljs-built_in">Push_back</span>(p4);<br>pArray.<span class="hljs-built_in">Push_back</span>(p5);<br><br><span class="hljs-built_in">printPersonArray</span>(pArray);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;pArrayçš„å¤§å°ï¼š&quot;</span> &lt;&lt; pArray.<span class="hljs-built_in">getSize</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;pArrayçš„å®¹é‡ï¼š&quot;</span> &lt;&lt; pArray.<span class="hljs-built_in">getCapacity</span>() &lt;&lt; endl;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>èƒ½å¤Ÿåˆ©ç”¨æ‰€å­¦çŸ¥è¯†ç‚¹å®ç°é€šç”¨çš„æ•°ç»„</p><h2 id="2-STLåˆè¯†">2 STLåˆè¯†</h2><h3 id="2-1-STLçš„è¯ç”Ÿ">2.1 STLçš„è¯ç”Ÿ</h3><ul><li><p>é•¿ä¹…ä»¥æ¥ï¼Œè½¯ä»¶ç•Œä¸€ç›´å¸Œæœ›å»ºç«‹ä¸€ç§å¯é‡å¤åˆ©ç”¨çš„ä¸œè¥¿</p></li><li><p>C++çš„<strong>é¢å‘å¯¹è±¡</strong>å’Œ<strong>æ³›å‹ç¼–ç¨‹</strong>æ€æƒ³ï¼Œç›®çš„å°±æ˜¯<strong>å¤ç”¨æ€§çš„æå‡</strong></p></li><li><p>å¤§å¤šæƒ…å†µä¸‹ï¼Œæ•°æ®ç»“æ„å’Œç®—æ³•éƒ½æœªèƒ½æœ‰ä¸€å¥—æ ‡å‡†,å¯¼è‡´è¢«è¿«ä»äº‹å¤§é‡é‡å¤å·¥ä½œ</p></li><li><p>ä¸ºäº†å»ºç«‹æ•°æ®ç»“æ„å’Œç®—æ³•çš„ä¸€å¥—æ ‡å‡†,è¯ç”Ÿäº†<strong>STL</strong></p></li></ul><h3 id="2-2-STLåŸºæœ¬æ¦‚å¿µ">2.2 STLåŸºæœ¬æ¦‚å¿µ</h3><ul><li>STL(Standard Template Library,<strong>æ ‡å‡†æ¨¡æ¿åº“</strong>)</li><li>STL ä»å¹¿ä¹‰ä¸Šåˆ†ä¸º: <strong>å®¹å™¨(container) ç®—æ³•(algorithm) è¿­ä»£å™¨(iterator)</strong></li><li><strong>å®¹å™¨</strong>å’Œ<strong>ç®—æ³•</strong>ä¹‹é—´é€šè¿‡<strong>è¿­ä»£å™¨</strong>è¿›è¡Œæ— ç¼è¿æ¥ã€‚</li><li>STL å‡ ä¹æ‰€æœ‰çš„ä»£ç éƒ½é‡‡ç”¨äº†æ¨¡æ¿ç±»æˆ–è€…æ¨¡æ¿å‡½æ•°</li></ul><h3 id="2-3-STLå…­å¤§ç»„ä»¶">2.3 STLå…­å¤§ç»„ä»¶</h3><p>STLå¤§ä½“åˆ†ä¸ºå…­å¤§ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯:<strong>å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨ã€ä»¿å‡½æ•°ã€é€‚é…å™¨ï¼ˆé…æ¥å™¨ï¼‰ã€ç©ºé—´é…ç½®å™¨</strong></p><ol><li>å®¹å™¨ï¼šå„ç§æ•°æ®ç»“æ„ï¼Œå¦‚vectorã€listã€dequeã€setã€mapç­‰,ç”¨æ¥å­˜æ”¾æ•°æ®ã€‚</li><li>ç®—æ³•ï¼šå„ç§å¸¸ç”¨çš„ç®—æ³•ï¼Œå¦‚sortã€findã€copyã€for_eachç­‰</li><li>è¿­ä»£å™¨ï¼šæ‰®æ¼”äº†å®¹å™¨ä¸ç®—æ³•ä¹‹é—´çš„èƒ¶åˆå‰‚ã€‚</li><li>ä»¿å‡½æ•°ï¼šè¡Œä¸ºç±»ä¼¼å‡½æ•°ï¼Œå¯ä½œä¸ºç®—æ³•çš„æŸç§ç­–ç•¥ã€‚</li><li>é€‚é…å™¨ï¼šä¸€ç§ç”¨æ¥ä¿®é¥°å®¹å™¨æˆ–è€…ä»¿å‡½æ•°æˆ–è¿­ä»£å™¨æ¥å£çš„ä¸œè¥¿ã€‚</li><li>ç©ºé—´é…ç½®å™¨ï¼šè´Ÿè´£ç©ºé—´çš„é…ç½®ä¸ç®¡ç†ã€‚</li></ol><h3 id="2-4-STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨">2.4  STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨</h3><p>**å®¹å™¨ï¼š**ç½®ç‰©ä¹‹æ‰€ä¹Ÿ</p><p>STL<strong>å®¹å™¨</strong>å°±æ˜¯å°†è¿ç”¨<strong>æœ€å¹¿æ³›çš„ä¸€äº›æ•°æ®ç»“æ„</strong>å®ç°å‡ºæ¥</p><p>å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼šæ•°ç»„, é“¾è¡¨,æ ‘, æ ˆ, é˜Ÿåˆ—, é›†åˆ, æ˜ å°„è¡¨ ç­‰</p><p>è¿™äº›å®¹å™¨åˆ†ä¸º<strong>åºåˆ—å¼å®¹å™¨</strong>å’Œ<strong>å…³è”å¼å®¹å™¨</strong>ä¸¤ç§:</p><p>â€‹<strong>åºåˆ—å¼å®¹å™¨</strong>:å¼ºè°ƒå€¼çš„æ’åºï¼Œåºåˆ—å¼å®¹å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ å‡æœ‰å›ºå®šçš„ä½ç½®ã€‚â€‹<strong>å…³è”å¼å®¹å™¨</strong>:äºŒå‰æ ‘ç»“æ„ï¼Œå„å…ƒç´ ä¹‹é—´æ²¡æœ‰ä¸¥æ ¼çš„ç‰©ç†ä¸Šçš„é¡ºåºå…³ç³»</p><p>**ç®—æ³•ï¼š**é—®é¢˜ä¹‹è§£æ³•ä¹Ÿ</p><p>æœ‰é™çš„æ­¥éª¤ï¼Œè§£å†³é€»è¾‘æˆ–æ•°å­¦ä¸Šçš„é—®é¢˜ï¼Œè¿™ä¸€é—¨å­¦ç§‘æˆ‘ä»¬å«åšç®—æ³•(Algorithms)</p><p>ç®—æ³•åˆ†ä¸º:<strong>è´¨å˜ç®—æ³•</strong>å’Œ<strong>éè´¨å˜ç®—æ³•</strong>ã€‚</p><p>è´¨å˜ç®—æ³•ï¼šæ˜¯æŒ‡è¿ç®—è¿‡ç¨‹ä¸­ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ çš„å†…å®¹ã€‚ä¾‹å¦‚æ‹·è´ï¼Œæ›¿æ¢ï¼Œåˆ é™¤ç­‰ç­‰</p><p>éè´¨å˜ç®—æ³•ï¼šæ˜¯æŒ‡è¿ç®—è¿‡ç¨‹ä¸­ä¸ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ å†…å®¹ï¼Œä¾‹å¦‚æŸ¥æ‰¾ã€è®¡æ•°ã€éå†ã€å¯»æ‰¾æå€¼ç­‰ç­‰</p><p>**è¿­ä»£å™¨ï¼š**å®¹å™¨å’Œç®—æ³•ä¹‹é—´ç²˜åˆå‰‚</p><p>æä¾›ä¸€ç§æ–¹æ³•ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¾åºå¯»è®¿æŸä¸ªå®¹å™¨æ‰€å«çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆæ— éœ€æš´éœ²è¯¥å®¹å™¨çš„å†…éƒ¨è¡¨ç¤ºæ–¹å¼ã€‚</p><p>æ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±ä¸“å±çš„è¿­ä»£å™¨</p><p>è¿­ä»£å™¨ä½¿ç”¨éå¸¸ç±»ä¼¼äºæŒ‡é’ˆï¼Œåˆå­¦é˜¶æ®µæˆ‘ä»¬å¯ä»¥å…ˆç†è§£è¿­ä»£å™¨ä¸ºæŒ‡é’ˆ</p><p>è¿­ä»£å™¨ç§ç±»ï¼š</p><table><thead><tr><th>ç§ç±»</th><th>åŠŸèƒ½</th><th>æ”¯æŒè¿ç®—</th></tr></thead><tbody><tr><td>è¾“å…¥è¿­ä»£å™¨</td><td>å¯¹æ•°æ®çš„åªè¯»è®¿é—®</td><td>åªè¯»ï¼Œæ”¯æŒ++ã€==ã€ï¼=</td></tr><tr><td>è¾“å‡ºè¿­ä»£å™¨</td><td>å¯¹æ•°æ®çš„åªå†™è®¿é—®</td><td>åªå†™ï¼Œæ”¯æŒ++</td></tr><tr><td>å‰å‘è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¹¶èƒ½å‘å‰æ¨è¿›è¿­ä»£å™¨</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€==ã€ï¼=</td></tr><tr><td>åŒå‘è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¹¶èƒ½å‘å‰å’Œå‘åæ“ä½œ</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€â€“ï¼Œ</td></tr><tr><td>éšæœºè®¿é—®è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¯ä»¥ä»¥è·³è·ƒçš„æ–¹å¼è®¿é—®ä»»æ„æ•°æ®ï¼ŒåŠŸèƒ½æœ€å¼ºçš„è¿­ä»£å™¨</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€â€“ã€[n]ã€-nã€&lt;ã€&lt;=ã€&gt;ã€&gt;=</td></tr></tbody></table><p>å¸¸ç”¨çš„å®¹å™¨ä¸­è¿­ä»£å™¨ç§ç±»ä¸ºåŒå‘è¿­ä»£å™¨ï¼Œå’Œéšæœºè®¿é—®è¿­ä»£å™¨</p><h3 id="2-5-å®¹å™¨ç®—æ³•è¿­ä»£å™¨åˆè¯†">2.5 å®¹å™¨ç®—æ³•è¿­ä»£å™¨åˆè¯†</h3><p>äº†è§£STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨æ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬åˆ©ç”¨ä»£ç æ„Ÿå—STLçš„é­…åŠ›</p><p>STLä¸­æœ€å¸¸ç”¨çš„å®¹å™¨ä¸ºVectorï¼Œå¯ä»¥ç†è§£ä¸ºæ•°ç»„ï¼Œä¸‹é¢æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å‘è¿™ä¸ªå®¹å™¨ä¸­æ’å…¥æ•°æ®ã€å¹¶éå†è¿™ä¸ªå®¹å™¨</p><h4 id="2-5-1-vectorå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹">2.5.1 vectorå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹</h4><p>å®¹å™¨ï¼š     <code>vector</code></p><p>ç®—æ³•ï¼š     <code>for_each</code></p><p>è¿­ä»£å™¨ï¼š <code>vector&lt;int&gt;::iterator</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MyPrint</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//åˆ›å»ºvectorå®¹å™¨å¯¹è±¡ï¼Œå¹¶ä¸”é€šè¿‡æ¨¡æ¿å‚æ•°æŒ‡å®šå®¹å™¨ä¸­å­˜æ”¾çš„æ•°æ®çš„ç±»å‹</span><br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br><span class="hljs-comment">//å‘å®¹å™¨ä¸­æ”¾æ•°æ®</span><br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br><span class="hljs-comment">//æ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨æ˜¯ç”¨æ¥éå†å®¹å™¨ä¸­çš„å…ƒç´ </span><br><span class="hljs-comment">//v.begin()è¿”å›è¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®</span><br><span class="hljs-comment">//v.end()è¿”å›è¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨æŒ‡å‘å®¹å™¨å…ƒç´ çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®</span><br><span class="hljs-comment">//vector&lt;int&gt;::iterator æ‹¿åˆ°vector&lt;int&gt;è¿™ç§å®¹å™¨çš„è¿­ä»£å™¨ç±»å‹</span><br><br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator pBegin = v.<span class="hljs-built_in">begin</span>();<br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator pEnd = v.<span class="hljs-built_in">end</span>();<br><br><span class="hljs-comment">//ç¬¬ä¸€ç§éå†æ–¹å¼ï¼š</span><br><span class="hljs-keyword">while</span> (pBegin != pEnd) &#123;<br>cout &lt;&lt; *pBegin &lt;&lt; endl;<br>pBegin++;<br>&#125;<br><br><br><span class="hljs-comment">//ç¬¬äºŒç§éå†æ–¹å¼ï¼š</span><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; endl;<br>&#125;<br>cout &lt;&lt; endl;<br><br><span class="hljs-comment">//ç¬¬ä¸‰ç§éå†æ–¹å¼ï¼š</span><br><span class="hljs-comment">//ä½¿ç”¨STLæä¾›æ ‡å‡†éå†ç®—æ³•  å¤´æ–‡ä»¶ algorithm</span><br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), MyPrint);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-5-2-Vectorå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹">2.5.2 Vectorå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹</h4><p>å­¦ä¹ ç›®æ ‡ï¼švectorä¸­å­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¹¶æ‰“å°è¾“å‡º</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age) &#123;<br>mName = name;<br>mAge = age;<br>&#125;<br><span class="hljs-keyword">public</span>:<br>string mName;<br><span class="hljs-type">int</span> mAge;<br>&#125;;<br><span class="hljs-comment">//å­˜æ”¾å¯¹è±¡</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br>vector&lt;Person&gt; v;<br><br><span class="hljs-comment">//åˆ›å»ºæ•°æ®</span><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;aaa&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;bbb&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;ccc&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;ddd&quot;</span>, <span class="hljs-number">40</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;eee&quot;</span>, <span class="hljs-number">50</span>)</span></span>;<br><br>v.<span class="hljs-built_in">push_back</span>(p1);<br>v.<span class="hljs-built_in">push_back</span>(p2);<br>v.<span class="hljs-built_in">push_back</span>(p3);<br>v.<span class="hljs-built_in">push_back</span>(p4);<br>v.<span class="hljs-built_in">push_back</span>(p5);<br><br><span class="hljs-keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Name:&quot;</span> &lt;&lt; (*it).mName &lt;&lt; <span class="hljs-string">&quot; Age:&quot;</span> &lt;&lt; (*it).mAge &lt;&lt; endl;<br><br>&#125;<br>&#125;<br><br><br><span class="hljs-comment">//æ”¾å¯¹è±¡æŒ‡é’ˆ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>&#123;<br><br>vector&lt;Person*&gt; v;<br><br><span class="hljs-comment">//åˆ›å»ºæ•°æ®</span><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;aaa&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;bbb&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;ccc&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;ddd&quot;</span>, <span class="hljs-number">40</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;eee&quot;</span>, <span class="hljs-number">50</span>)</span></span>;<br><br>v.<span class="hljs-built_in">push_back</span>(&amp;p1);<br>v.<span class="hljs-built_in">push_back</span>(&amp;p2);<br>v.<span class="hljs-built_in">push_back</span>(&amp;p3);<br>v.<span class="hljs-built_in">push_back</span>(&amp;p4);<br>v.<span class="hljs-built_in">push_back</span>(&amp;p5);<br><br><span class="hljs-keyword">for</span> (vector&lt;Person*&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br>Person * p = (*it);<br>cout &lt;&lt; <span class="hljs-string">&quot;Name:&quot;</span> &lt;&lt; p-&gt;mName &lt;&lt; <span class="hljs-string">&quot; Age:&quot;</span> &lt;&lt; (*it)-&gt;mAge &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br>    <br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-5-3-Vectorå®¹å™¨åµŒå¥—å®¹å™¨">2.5.3 Vectorå®¹å™¨åµŒå¥—å®¹å™¨</h4><p>å­¦ä¹ ç›®æ ‡ï¼šå®¹å™¨ä¸­åµŒå¥—å®¹å™¨ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰æ•°æ®è¿›è¡Œéå†è¾“å‡º</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-comment">//å®¹å™¨åµŒå¥—å®¹å™¨</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br>vector&lt; vector&lt;<span class="hljs-type">int</span>&gt; &gt;  v;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; v1;<br>vector&lt;<span class="hljs-type">int</span>&gt; v2;<br>vector&lt;<span class="hljs-type">int</span>&gt; v3;<br>vector&lt;<span class="hljs-type">int</span>&gt; v4;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) &#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">1</span>);<br>v<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">2</span>);<br>v<span class="hljs-number">3.</span><span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">3</span>);<br>v<span class="hljs-number">4.</span><span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">4</span>);<br>&#125;<br><br><span class="hljs-comment">//å°†å®¹å™¨å…ƒç´ æ’å…¥åˆ°vector vä¸­</span><br>v.<span class="hljs-built_in">push_back</span>(v1);<br>v.<span class="hljs-built_in">push_back</span>(v2);<br>v.<span class="hljs-built_in">push_back</span>(v3);<br>v.<span class="hljs-built_in">push_back</span>(v4);<br><br><br><span class="hljs-keyword">for</span> (vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator vit = (*it).<span class="hljs-built_in">begin</span>(); vit != (*it).<span class="hljs-built_in">end</span>(); vit++) &#123;<br>cout &lt;&lt; *vit &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-STL-å¸¸ç”¨å®¹å™¨">3 STL- å¸¸ç”¨å®¹å™¨</h2><h3 id="3-1-stringå®¹å™¨">3.1 stringå®¹å™¨</h3><h4 id="3-1-1-stringåŸºæœ¬æ¦‚å¿µ">3.1.1 stringåŸºæœ¬æ¦‚å¿µ</h4><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>stringæ˜¯C++é£æ ¼çš„å­—ç¬¦ä¸²ï¼Œè€Œstringæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç±»</li></ul><p><strong>stringå’Œchar * åŒºåˆ«ï¼š</strong></p><ul><li>char * æ˜¯ä¸€ä¸ªæŒ‡é’ˆ</li><li>stringæ˜¯ä¸€ä¸ªç±»ï¼Œç±»å†…éƒ¨å°è£…äº†char*ï¼Œç®¡ç†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä¸€ä¸ªchar*å‹çš„å®¹å™¨ã€‚</li></ul><p><strong>ç‰¹ç‚¹ï¼š</strong></p><p>string ç±»å†…éƒ¨å°è£…äº†å¾ˆå¤šæˆå‘˜æ–¹æ³•</p><p>ä¾‹å¦‚ï¼šæŸ¥æ‰¾findï¼Œæ‹·è´copyï¼Œåˆ é™¤delete æ›¿æ¢replaceï¼Œæ’å…¥insert</p><p>stringç®¡ç†char*æ‰€åˆ†é…çš„å†…å­˜ï¼Œä¸ç”¨æ‹…å¿ƒå¤åˆ¶è¶Šç•Œå’Œå–å€¼è¶Šç•Œç­‰ï¼Œç”±ç±»å†…éƒ¨è¿›è¡Œè´Ÿè´£</p><h4 id="3-1-2-stringæ„é€ å‡½æ•°">3.1.2 stringæ„é€ å‡½æ•°</h4><p>æ„é€ å‡½æ•°åŸå‹ï¼š</p><ul><li><code>string();</code>          //åˆ›å»ºä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸² ä¾‹å¦‚: string str;<code>string(const char* s);</code>        //ä½¿ç”¨å­—ç¬¦ä¸²såˆå§‹åŒ–</li><li><code>string(const string&amp; str);</code>    //ä½¿ç”¨ä¸€ä¸ªstringå¯¹è±¡åˆå§‹åŒ–å¦ä¸€ä¸ªstringå¯¹è±¡</li><li><code>string(int n, char c);</code>           //ä½¿ç”¨nä¸ªå­—ç¬¦cåˆå§‹åŒ–</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-comment">//stringæ„é€ </span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>string s1; <span class="hljs-comment">//åˆ›å»ºç©ºå­—ç¬¦ä¸²ï¼Œè°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span><br>cout &lt;&lt; <span class="hljs-string">&quot;str1 = &quot;</span> &lt;&lt; s1 &lt;&lt; endl;<br><br><span class="hljs-type">const</span> <span class="hljs-type">char</span>* str = <span class="hljs-string">&quot;hello world&quot;</span>;<br><span class="hljs-function">string <span class="hljs-title">s2</span><span class="hljs-params">(str)</span></span>; <span class="hljs-comment">//æŠŠc_stringè½¬æ¢æˆäº†string</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;str2 = &quot;</span> &lt;&lt; s2 &lt;&lt; endl;<br><br><span class="hljs-function">string <span class="hljs-title">s3</span><span class="hljs-params">(s2)</span></span>; <span class="hljs-comment">//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span><br>cout &lt;&lt; <span class="hljs-string">&quot;str3 = &quot;</span> &lt;&lt; s3 &lt;&lt; endl;<br><br><span class="hljs-function">string <span class="hljs-title">s4</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;a&#x27;</span>)</span></span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;str3 = &quot;</span> &lt;&lt; s3 &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šstringçš„å¤šç§æ„é€ æ–¹å¼æ²¡æœ‰å¯æ¯”æ€§ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-1-3-stringèµ‹å€¼æ“ä½œ">3.1.3 stringèµ‹å€¼æ“ä½œ</h4><p>åŠŸèƒ½æè¿°ï¼š</p><ul><li>ç»™stringå­—ç¬¦ä¸²è¿›è¡Œèµ‹å€¼</li></ul><p>èµ‹å€¼çš„å‡½æ•°åŸå‹ï¼š</p><ul><li><code>string&amp; operator=(const char* s);</code>             //char*ç±»å‹å­—ç¬¦ä¸² èµ‹å€¼ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; operator=(const string &amp;s);</code>         //æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; operator=(char c);</code>                          //å­—ç¬¦èµ‹å€¼ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const char *s);</code>                  //æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const char *s, int n);</code>     //æŠŠå­—ç¬¦ä¸²sçš„å‰nä¸ªå­—ç¬¦èµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const string &amp;s);</code>              //æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰å­—ç¬¦ä¸²</li><li><code>string&amp; assign(int n, char c);</code>                  //ç”¨nä¸ªå­—ç¬¦cèµ‹ç»™å½“å‰å­—ç¬¦ä¸²</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//èµ‹å€¼</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>string str1;<br>str1 = <span class="hljs-string">&quot;hello world&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;<br><br>string str2;<br>str2 = str1;<br>cout &lt;&lt; <span class="hljs-string">&quot;str2 = &quot;</span> &lt;&lt; str2 &lt;&lt; endl;<br><br>string str3;<br>str3 = <span class="hljs-string">&#x27;a&#x27;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;str3 = &quot;</span> &lt;&lt; str3 &lt;&lt; endl;<br><br>string str4;<br>str<span class="hljs-number">4.</span><span class="hljs-built_in">assign</span>(<span class="hljs-string">&quot;hello c++&quot;</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;str4 = &quot;</span> &lt;&lt; str4 &lt;&lt; endl;<br><br>string str5;<br>str<span class="hljs-number">5.</span><span class="hljs-built_in">assign</span>(<span class="hljs-string">&quot;hello c++&quot;</span>,<span class="hljs-number">5</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;str5 = &quot;</span> &lt;&lt; str5 &lt;&lt; endl;<br><br><br>string str6;<br>str<span class="hljs-number">6.</span><span class="hljs-built_in">assign</span>(str5);<br>cout &lt;&lt; <span class="hljs-string">&quot;str6 = &quot;</span> &lt;&lt; str6 &lt;&lt; endl;<br><br>string str7;<br>str<span class="hljs-number">7.</span><span class="hljs-built_in">assign</span>(<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;x&#x27;</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;str7 = &quot;</span> &lt;&lt; str7 &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>â€‹stringçš„èµ‹å€¼æ–¹å¼å¾ˆå¤šï¼Œ<code>operator=</code>  è¿™ç§æ–¹å¼æ˜¯æ¯”è¾ƒå®ç”¨çš„</p><h4 id="3-1-4-stringå­—ç¬¦ä¸²æ‹¼æ¥">3.1.4 stringå­—ç¬¦ä¸²æ‹¼æ¥</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°åœ¨å­—ç¬¦ä¸²æœ«å°¾æ‹¼æ¥å­—ç¬¦ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string&amp; operator+=(const char* str);</code>                   //é‡è½½+=æ“ä½œç¬¦</li><li><code>string&amp; operator+=(const char c);</code>                         //é‡è½½+=æ“ä½œç¬¦</li><li><code>string&amp; operator+=(const string&amp; str);</code>                //é‡è½½+=æ“ä½œç¬¦</li><li><code>string&amp; append(const char *s); </code>                               //æŠŠå­—ç¬¦ä¸²sè¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</li><li><code>string&amp; append(const char *s, int n);</code>                 //æŠŠå­—ç¬¦ä¸²sçš„å‰nä¸ªå­—ç¬¦è¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</li><li><code>string&amp; append(const string &amp;s);</code>                           //åŒoperator+=(const string&amp; str)</li><li><code>string&amp; append(const string &amp;s, int pos, int n);</code>//å­—ç¬¦ä¸²sä¸­ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦è¿æ¥åˆ°å­—ç¬¦ä¸²ç»“å°¾</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å­—ç¬¦ä¸²æ‹¼æ¥</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>string str1 = <span class="hljs-string">&quot;æˆ‘&quot;</span>;<br><br>str1 += <span class="hljs-string">&quot;çˆ±ç©æ¸¸æˆ&quot;</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;<br><br>str1 += <span class="hljs-string">&#x27;:&#x27;</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;<br><br>string str2 = <span class="hljs-string">&quot;LOL DNF&quot;</span>;<br><br>str1 += str2;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;<br><br>string str3 = <span class="hljs-string">&quot;I&quot;</span>;<br>str<span class="hljs-number">3.</span><span class="hljs-built_in">append</span>(<span class="hljs-string">&quot; love &quot;</span>);<br>str<span class="hljs-number">3.</span><span class="hljs-built_in">append</span>(<span class="hljs-string">&quot;game abcde&quot;</span>, <span class="hljs-number">4</span>);<br><span class="hljs-comment">//str3.append(str2);</span><br>str<span class="hljs-number">3.</span><span class="hljs-built_in">append</span>(str2, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// ä»ä¸‹æ ‡4ä½ç½®å¼€å§‹ ï¼Œæˆªå–3ä¸ªå­—ç¬¦ï¼Œæ‹¼æ¥åˆ°å­—ç¬¦ä¸²æœ«å°¾</span><br>cout &lt;&lt; <span class="hljs-string">&quot;str3 = &quot;</span> &lt;&lt; str3 &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå­—ç¬¦ä¸²æ‹¼æ¥çš„é‡è½½ç‰ˆæœ¬å¾ˆå¤šï¼Œåˆå­¦é˜¶æ®µè®°ä½å‡ ç§å³å¯</p><h4 id="3-1-5-stringæŸ¥æ‰¾å’Œæ›¿æ¢">3.1.5 stringæŸ¥æ‰¾å’Œæ›¿æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾ï¼šæŸ¥æ‰¾æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨</li><li>æ›¿æ¢ï¼šåœ¨æŒ‡å®šçš„ä½ç½®æ›¿æ¢å­—ç¬¦ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>int find(const string&amp; str, int pos = 0) const;</code>              //æŸ¥æ‰¾strç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int find(const char* s, int pos = 0) const; </code>                     //æŸ¥æ‰¾sç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int find(const char* s, int pos, int n) const; </code>               //ä»posä½ç½®æŸ¥æ‰¾sçš„å‰nä¸ªå­—ç¬¦ç¬¬ä¸€æ¬¡ä½ç½®</li><li><code>int find(const char c, int pos = 0) const; </code>                       //æŸ¥æ‰¾å­—ç¬¦cç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®</li><li><code>int rfind(const string&amp; str, int pos = npos) const;</code>      //æŸ¥æ‰¾stræœ€åä¸€æ¬¡ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int rfind(const char* s, int pos = npos) const;</code>              //æŸ¥æ‰¾sæœ€åä¸€æ¬¡å‡ºç°ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int rfind(const char* s, int pos, int n) const;</code>              //ä»posæŸ¥æ‰¾sçš„å‰nä¸ªå­—ç¬¦æœ€åä¸€æ¬¡ä½ç½®</li><li><code>int rfind(const char c, int pos = 0) const;  </code>                      //æŸ¥æ‰¾å­—ç¬¦cæœ€åä¸€æ¬¡å‡ºç°ä½ç½®</li><li><code>string&amp; replace(int pos, int n, const string&amp; str); </code>       //æ›¿æ¢ä»poså¼€å§‹nä¸ªå­—ç¬¦ä¸ºå­—ç¬¦ä¸²str</li><li><code>string&amp; replace(int pos, int n,const char* s); </code>                 //æ›¿æ¢ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦ä¸ºå­—ç¬¦ä¸²s</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//æŸ¥æ‰¾å’Œæ›¿æ¢</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//æŸ¥æ‰¾</span><br>string str1 = <span class="hljs-string">&quot;abcdefgde&quot;</span>;<br><br><span class="hljs-type">int</span> pos = str<span class="hljs-number">1.f</span>ind(<span class="hljs-string">&quot;de&quot;</span>);<br><br><span class="hljs-keyword">if</span> (pos == <span class="hljs-number">-1</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æœªæ‰¾åˆ°&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;pos = &quot;</span> &lt;&lt; pos &lt;&lt; endl;<br>&#125;<br><br><br>pos = str<span class="hljs-number">1.</span><span class="hljs-built_in">rfind</span>(<span class="hljs-string">&quot;de&quot;</span>);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;pos = &quot;</span> &lt;&lt; pos &lt;&lt; endl;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//æ›¿æ¢</span><br>string str1 = <span class="hljs-string">&quot;abcdefgde&quot;</span>;<br>str<span class="hljs-number">1.</span><span class="hljs-built_in">replace</span>(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&quot;1111&quot;</span>);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><span class="hljs-comment">//test02();</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>findæŸ¥æ‰¾æ˜¯ä»å·¦å¾€åï¼Œrfindä»å³å¾€å·¦</li><li>findæ‰¾åˆ°å­—ç¬¦ä¸²åè¿”å›æŸ¥æ‰¾çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä½ç½®ï¼Œæ‰¾ä¸åˆ°è¿”å›-1</li><li>replaceåœ¨æ›¿æ¢æ—¶ï¼Œè¦æŒ‡å®šä»å“ªä¸ªä½ç½®èµ·ï¼Œå¤šå°‘ä¸ªå­—ç¬¦ï¼Œæ›¿æ¢æˆä»€ä¹ˆæ ·çš„å­—ç¬¦ä¸²</li></ul><h4 id="3-1-6-stringå­—ç¬¦ä¸²æ¯”è¾ƒ">3.1.6 stringå­—ç¬¦ä¸²æ¯”è¾ƒ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å­—ç¬¦ä¸²ä¹‹é—´çš„æ¯”è¾ƒ</li></ul><p><strong>æ¯”è¾ƒæ–¹å¼ï¼š</strong></p><ul><li>å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯æŒ‰å­—ç¬¦çš„ASCIIç è¿›è¡Œå¯¹æ¯”</li></ul><p>= è¿”å›   0</p><p>&gt; è¿”å›   1</p><p>&lt; è¿”å›  -1</p><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>int compare(const string &amp;s) const; </code>  //ä¸å­—ç¬¦ä¸²sæ¯”è¾ƒ</li><li><code>int compare(const char *s) const;</code>      //ä¸å­—ç¬¦ä¸²sæ¯”è¾ƒ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å­—ç¬¦ä¸²æ¯”è¾ƒ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>string s1 = <span class="hljs-string">&quot;hello&quot;</span>;<br>string s2 = <span class="hljs-string">&quot;aello&quot;</span>;<br><br><span class="hljs-type">int</span> ret = s<span class="hljs-number">1.</span><span class="hljs-built_in">compare</span>(s2);<br><br><span class="hljs-keyword">if</span> (ret == <span class="hljs-number">0</span>) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;s1 ç­‰äº s2&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret &gt; <span class="hljs-number">0</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;s1 å¤§äº s2&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;s1 å°äº s2&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå­—ç¬¦ä¸²å¯¹æ¯”ä¸»è¦æ˜¯ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œåˆ¤æ–­è°å¤§è°å°çš„æ„ä¹‰å¹¶ä¸æ˜¯å¾ˆå¤§</p><h4 id="3-1-7-stringå­—ç¬¦å­˜å–">3.1.7 stringå­—ç¬¦å­˜å–</h4><p>stringä¸­å•ä¸ªå­—ç¬¦å­˜å–æ–¹å¼æœ‰ä¸¤ç§</p><ul><li><code>char&amp; operator[](int n); </code>     //é€šè¿‡[]æ–¹å¼å–å­—ç¬¦</li><li><code>char&amp; at(int n);   </code>                    //é€šè¿‡atæ–¹æ³•è·å–å­—ç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>string str = <span class="hljs-string">&quot;hello world&quot;</span>;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-built_in">size</span>(); i++)<br>&#123;<br>cout &lt;&lt; str[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-built_in">size</span>(); i++)<br>&#123;<br>cout &lt;&lt; str.<span class="hljs-built_in">at</span>(i) &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><br><br><span class="hljs-comment">//å­—ç¬¦ä¿®æ”¹</span><br>str[<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;x&#x27;</span>;<br>str.<span class="hljs-built_in">at</span>(<span class="hljs-number">1</span>) = <span class="hljs-string">&#x27;x&#x27;</span>;<br>cout &lt;&lt; str &lt;&lt; endl;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šstringå­—ç¬¦ä¸²ä¸­å•ä¸ªå­—ç¬¦å­˜å–æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ©ç”¨ [ ] æˆ– at</p><h4 id="3-1-8-stringæ’å…¥å’Œåˆ é™¤">3.1.8 stringæ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹stringå­—ç¬¦ä¸²è¿›è¡Œæ’å…¥å’Œåˆ é™¤å­—ç¬¦æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string&amp; insert(int pos, const char* s);  </code>                //æ’å…¥å­—ç¬¦ä¸²</li><li><code>string&amp; insert(int pos, const string&amp; str); </code>        //æ’å…¥å­—ç¬¦ä¸²</li><li><code>string&amp; insert(int pos, int n, char c);</code>                //åœ¨æŒ‡å®šä½ç½®æ’å…¥nä¸ªå­—ç¬¦c</li><li><code>string&amp; erase(int pos, int n = npos);</code>                    //åˆ é™¤ä»Poså¼€å§‹çš„nä¸ªå­—ç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å­—ç¬¦ä¸²æ’å…¥å’Œåˆ é™¤</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>string str = <span class="hljs-string">&quot;hello&quot;</span>;<br>str.<span class="hljs-built_in">insert</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;111&quot;</span>);<br>cout &lt;&lt; str &lt;&lt; endl;<br><br>str.<span class="hljs-built_in">erase</span>(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);  <span class="hljs-comment">//ä»1å·ä½ç½®å¼€å§‹3ä¸ªå­—ç¬¦</span><br>cout &lt;&lt; str &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**æ’å…¥å’Œåˆ é™¤çš„èµ·å§‹ä¸‹æ ‡éƒ½æ˜¯ä»0å¼€å§‹</p><h4 id="3-1-9-stringå­ä¸²">3.1.9 stringå­ä¸²</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ä»å­—ç¬¦ä¸²ä¸­è·å–æƒ³è¦çš„å­ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string substr(int pos = 0, int n = npos) const;</code>   //è¿”å›ç”±poså¼€å§‹çš„nä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å­ä¸²</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>string str = <span class="hljs-string">&quot;abcdefg&quot;</span>;<br>string subStr = str.<span class="hljs-built_in">substr</span>(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;subStr = &quot;</span> &lt;&lt; subStr &lt;&lt; endl;<br><br>string email = <span class="hljs-string">&quot;hello@sina.com&quot;</span>;<br><span class="hljs-type">int</span> pos = email.<span class="hljs-built_in">find</span>(<span class="hljs-string">&quot;@&quot;</span>);<br>string username = email.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>, pos);<br>cout &lt;&lt; <span class="hljs-string">&quot;username: &quot;</span> &lt;&lt; username &lt;&lt; endl;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**çµæ´»çš„è¿ç”¨æ±‚å­ä¸²åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å®é™…å¼€å‘ä¸­è·å–æœ‰æ•ˆçš„ä¿¡æ¯</p><h3 id="3-2-vectorå®¹å™¨">3.2 vectorå®¹å™¨</h3><h4 id="3-2-1-vectoråŸºæœ¬æ¦‚å¿µ">3.2.1 vectoråŸºæœ¬æ¦‚å¿µ</h4><p><strong>åŠŸèƒ½ï¼š</strong></p><ul><li>vectoræ•°æ®ç»“æ„å’Œ<strong>æ•°ç»„éå¸¸ç›¸ä¼¼</strong>ï¼Œä¹Ÿç§°ä¸º<strong>å•ç«¯æ•°ç»„</strong></li></ul><p><strong>vectorä¸æ™®é€šæ•°ç»„åŒºåˆ«ï¼š</strong></p><ul><li>ä¸åŒä¹‹å¤„åœ¨äºæ•°ç»„æ˜¯é™æ€ç©ºé—´ï¼Œè€Œvectorå¯ä»¥<strong>åŠ¨æ€æ‰©å±•</strong></li></ul><p><strong>åŠ¨æ€æ‰©å±•ï¼š</strong></p><ul><li>å¹¶ä¸æ˜¯åœ¨åŸç©ºé—´ä¹‹åç»­æ¥æ–°ç©ºé—´ï¼Œè€Œæ˜¯æ‰¾æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼Œç„¶åå°†åŸæ•°æ®æ‹·è´æ–°ç©ºé—´ï¼Œé‡Šæ”¾åŸç©ºé—´</li></ul><p><img src="/assetss/clip_image002.jpg" alt="è¯´æ˜: 2015-11-10_151152"></p><ul><li>vectorå®¹å™¨çš„è¿­ä»£å™¨æ˜¯æ”¯æŒéšæœºè®¿é—®çš„è¿­ä»£å™¨</li></ul><h4 id="3-2-2-vectoræ„é€ å‡½æ•°">3.2.2 vectoræ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ›å»ºvectorå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>vector&lt;T&gt; v; </code>                    //é‡‡ç”¨æ¨¡æ¿å®ç°ç±»å®ç°ï¼Œé»˜è®¤æ„é€ å‡½æ•°</li><li><code>vector(v.begin(), v.end());   </code>       //å°†v[begin(), end())åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>vector(n, elem);</code>                            //æ„é€ å‡½æ•°å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>vector(const vector &amp;vec);</code>         //æ‹·è´æ„é€ å‡½æ•°ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printVector</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; v)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v1; <span class="hljs-comment">//æ— å‚æ„é€ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v1);<br><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">v2</span><span class="hljs-params">(v<span class="hljs-number">1.</span>begin(), v<span class="hljs-number">1.</span>end())</span></span>;<br><span class="hljs-built_in">printVector</span>(v2);<br><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">v3</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>)</span></span>;<br><span class="hljs-built_in">printVector</span>(v3);<br><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">v4</span><span class="hljs-params">(v3)</span></span>;<br><span class="hljs-built_in">printVector</span>(v4);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**vectorçš„å¤šç§æ„é€ æ–¹å¼æ²¡æœ‰å¯æ¯”æ€§ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-2-3-vectorèµ‹å€¼æ“ä½œ">3.2.3 vectorèµ‹å€¼æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™vectorå®¹å™¨è¿›è¡Œèµ‹å€¼</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>vector&amp; operator=(const vector &amp;vec);</code>//é‡è½½ç­‰å·æ“ä½œç¬¦</p></li><li><p><code>assign(beg, end);</code>       //å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li><li><p><code>assign(n, elem);</code>        //å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printVector</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; v)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//èµ‹å€¼æ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v1; <span class="hljs-comment">//æ— å‚æ„é€ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v1);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;v2;<br>v2 = v1;<br><span class="hljs-built_in">printVector</span>(v2);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;v3;<br>v<span class="hljs-number">3.</span><span class="hljs-built_in">assign</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printVector</span>(v3);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;v4;<br>v<span class="hljs-number">4.</span><span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printVector</span>(v4);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š vectorèµ‹å€¼æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨operator=ï¼Œæˆ–è€…assignéƒ½å¯ä»¥</p><h4 id="3-2-4-vectorå®¹é‡å’Œå¤§å°">3.2.4  vectorå®¹é‡å’Œå¤§å°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹vectorå®¹å™¨çš„å®¹é‡å’Œå¤§å°æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>empty(); </code>                            //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>capacity();</code>                      //å®¹å™¨çš„å®¹é‡</p></li><li><p><code>size();</code>                              //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>resize(int num);</code>             //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹      //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>resize(int num, elem);</code>  //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹              //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printVector</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; v)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v1);<br><span class="hljs-keyword">if</span> (v<span class="hljs-number">1.</span><span class="hljs-built_in">empty</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;v1ä¸ºç©º&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;v1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;v1çš„å®¹é‡ = &quot;</span> &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">capacity</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;v1çš„å¤§å° = &quot;</span> &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//resize é‡æ–°æŒ‡å®šå¤§å° ï¼Œè‹¥æŒ‡å®šçš„æ›´å¤§ï¼Œé»˜è®¤ç”¨0å¡«å……æ–°ä½ç½®ï¼Œå¯ä»¥åˆ©ç”¨é‡è½½ç‰ˆæœ¬æ›¿æ¢é»˜è®¤å¡«å……</span><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">15</span>,<span class="hljs-number">10</span>);<br><span class="hljs-built_in">printVector</span>(v1);<br><br><span class="hljs-comment">//resize é‡æ–°æŒ‡å®šå¤§å° ï¼Œè‹¥æŒ‡å®šçš„æ›´å°ï¼Œè¶…å‡ºéƒ¨åˆ†å…ƒç´ è¢«åˆ é™¤</span><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">5</span>);<br><span class="hljs-built_in">printVector</span>(v1);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º  â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•°  â€” size</li><li>è¿”å›å®¹å™¨å®¹é‡  â€” capacity</li><li>é‡æ–°æŒ‡å®šå¤§å°  â€”  resize</li></ul><h4 id="3-2-5-vectoræ’å…¥å’Œåˆ é™¤">3.2.5 vectoræ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹vectorå®¹å™¨è¿›è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>push_back(ele);</code>                                         //å°¾éƒ¨æ’å…¥å…ƒç´ ele</li><li><code>pop_back();</code>                                                //åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </li><li><code>insert(const_iterator pos, ele);</code>        //è¿­ä»£å™¨æŒ‡å‘ä½ç½®posæ’å…¥å…ƒç´ ele</li><li><code>insert(const_iterator pos, int count,ele);</code>//è¿­ä»£å™¨æŒ‡å‘ä½ç½®posæ’å…¥countä¸ªå…ƒç´ ele</li><li><code>erase(const_iterator pos);</code>                     //åˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ </li><li><code>erase(const_iterator start, const_iterator end);</code>//åˆ é™¤è¿­ä»£å™¨ä»startåˆ°endä¹‹é—´çš„å…ƒç´ </li><li><code>clear();</code>                                                        //åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printVector</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; v)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//æ’å…¥å’Œåˆ é™¤</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v1;<br><span class="hljs-comment">//å°¾æ’</span><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br><span class="hljs-built_in">printVector</span>(v1);<br><span class="hljs-comment">//å°¾åˆ </span><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">pop_back</span>();<br><span class="hljs-built_in">printVector</span>(v1);<br><span class="hljs-comment">//æ’å…¥</span><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printVector</span>(v1);<br><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), <span class="hljs-number">2</span>, <span class="hljs-number">1000</span>);<br><span class="hljs-built_in">printVector</span>(v1);<br><br><span class="hljs-comment">//åˆ é™¤</span><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>());<br><span class="hljs-built_in">printVector</span>(v1);<br><br><span class="hljs-comment">//æ¸…ç©º</span><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>());<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">clear</span>();<br><span class="hljs-built_in">printVector</span>(v1);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å°¾æ’  â€” push_back</li><li>å°¾åˆ   â€” pop_back</li><li>æ’å…¥  â€” insert    (ä½ç½®è¿­ä»£å™¨)</li><li>åˆ é™¤  â€” erase  ï¼ˆä½ç½®è¿­ä»£å™¨ï¼‰</li><li>æ¸…ç©º  â€”  clear</li></ul><h4 id="3-2-6-vectoræ•°æ®å­˜å–">3.2.6 vectoræ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹vectorä¸­çš„æ•°æ®çš„å­˜å–æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>at(int idx); </code>     //è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>operator[]; </code>       //è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>front(); </code>            //è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ </li><li><code>back();</code>              //è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªæ•°æ®å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt;v1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>(); i++)<br>&#123;<br>cout &lt;&lt; v1[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>(); i++)<br>&#123;<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">at</span>(i) &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;v1çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; v<span class="hljs-number">1.f</span>ront() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;v1çš„æœ€åä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">back</span>() &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é™¤äº†ç”¨è¿­ä»£å™¨è·å–vectorå®¹å™¨ä¸­å…ƒç´ ï¼Œ[ ]å’Œatä¹Ÿå¯ä»¥</li><li>frontè¿”å›å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>backè¿”å›å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ </li></ul><h4 id="3-2-7-vectoräº’æ¢å®¹å™¨">3.2.7 vectoräº’æ¢å®¹å™¨</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°ä¸¤ä¸ªå®¹å™¨å†…å…ƒç´ è¿›è¡Œäº’æ¢</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>swap(vec);</code>  // å°†vecä¸æœ¬èº«çš„å…ƒç´ äº’æ¢</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printVector</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; v)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt;v1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v1);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;v2;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">10</span>; i &gt; <span class="hljs-number">0</span>; i--)<br>&#123;<br>v<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v2);<br><br><span class="hljs-comment">//äº’æ¢å®¹å™¨</span><br>cout &lt;&lt; <span class="hljs-string">&quot;äº’æ¢å&quot;</span> &lt;&lt; endl;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">swap</span>(v2);<br><span class="hljs-built_in">printVector</span>(v1);<br><span class="hljs-built_in">printVector</span>(v2);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) &#123;<br>v.<span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="hljs-built_in">capacity</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br><br>v.<span class="hljs-built_in">resize</span>(<span class="hljs-number">3</span>);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="hljs-built_in">capacity</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br><br><span class="hljs-comment">//æ”¶ç¼©å†…å­˜</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(v).<span class="hljs-built_in">swap</span>(v); <span class="hljs-comment">//åŒ¿åå¯¹è±¡</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="hljs-built_in">capacity</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šswapå¯ä»¥ä½¿ä¸¤ä¸ªå®¹å™¨äº’æ¢ï¼Œå¯ä»¥è¾¾åˆ°å®ç”¨çš„æ”¶ç¼©å†…å­˜æ•ˆæœ</p><h4 id="3-2-8-vectoré¢„ç•™ç©ºé—´">3.2.8 vectoré¢„ç•™ç©ºé—´</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‡å°‘vectoråœ¨åŠ¨æ€æ‰©å±•å®¹é‡æ—¶çš„æ‰©å±•æ¬¡æ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>reserve(int len);</code>//å®¹å™¨é¢„ç•™lenä¸ªå…ƒç´ é•¿åº¦ï¼Œé¢„ç•™ä½ç½®ä¸åˆå§‹åŒ–ï¼Œå…ƒç´ ä¸å¯è®¿é—®ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br><br><span class="hljs-comment">//é¢„ç•™ç©ºé—´</span><br>v.<span class="hljs-built_in">reserve</span>(<span class="hljs-number">100000</span>);<br><br><span class="hljs-type">int</span> num = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span>* p = <span class="hljs-literal">NULL</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) &#123;<br>v.<span class="hljs-built_in">push_back</span>(i);<br><span class="hljs-keyword">if</span> (p != &amp;v[<span class="hljs-number">0</span>]) &#123;<br>p = &amp;v[<span class="hljs-number">0</span>];<br>num++;<br>&#125;<br>&#125;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;num:&quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br>    <br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œå¯ä»¥ä¸€å¼€å§‹åˆ©ç”¨reserveé¢„ç•™ç©ºé—´</p><h3 id="3-3-dequeå®¹å™¨">3.3 dequeå®¹å™¨</h3><h4 id="3-3-1-dequeå®¹å™¨åŸºæœ¬æ¦‚å¿µ">3.3.1 dequeå®¹å™¨åŸºæœ¬æ¦‚å¿µ</h4><p><strong>åŠŸèƒ½ï¼š</strong></p><ul><li>åŒç«¯æ•°ç»„ï¼Œå¯ä»¥å¯¹å¤´ç«¯è¿›è¡Œæ’å…¥åˆ é™¤æ“ä½œ</li></ul><p><strong>dequeä¸vectoråŒºåˆ«ï¼š</strong></p><ul><li>vectorå¯¹äºå¤´éƒ¨çš„æ’å…¥åˆ é™¤æ•ˆç‡ä½ï¼Œæ•°æ®é‡è¶Šå¤§ï¼Œæ•ˆç‡è¶Šä½</li><li>dequeç›¸å¯¹è€Œè¨€ï¼Œå¯¹å¤´éƒ¨çš„æ’å…¥åˆ é™¤é€Ÿåº¦å›æ¯”vectorå¿«</li><li>vectorè®¿é—®å…ƒç´ æ—¶çš„é€Ÿåº¦ä¼šæ¯”dequeå¿«,è¿™å’Œä¸¤è€…å†…éƒ¨å®ç°æœ‰å…³</li></ul><p><img src="/assetss/clip_image002-1547547642923.jpg" alt="è¯´æ˜: 2015-11-19_204101"></p><p>dequeå†…éƒ¨å·¥ä½œåŸç†:</p><p>dequeå†…éƒ¨æœ‰ä¸ª<strong>ä¸­æ§å™¨</strong>ï¼Œç»´æŠ¤æ¯æ®µç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œç¼“å†²åŒºä¸­å­˜æ”¾çœŸå®æ•°æ®</p><p>ä¸­æ§å™¨ç»´æŠ¤çš„æ˜¯æ¯ä¸ªç¼“å†²åŒºçš„åœ°å€ï¼Œä½¿å¾—ä½¿ç”¨dequeæ—¶åƒä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´</p><p><img src="/assetss/clip_image002-1547547896341.jpg" alt="clip_image002-1547547896341"></p><ul><li>dequeå®¹å™¨çš„è¿­ä»£å™¨ä¹Ÿæ˜¯æ”¯æŒéšæœºè®¿é—®çš„</li></ul><h4 id="3-3-2-dequeæ„é€ å‡½æ•°">3.3.2 dequeæ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>dequeå®¹å™¨æ„é€ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>deque&lt;T&gt;</code> deqT;                      //é»˜è®¤æ„é€ å½¢å¼</li><li><code>deque(beg, end);</code>                  //æ„é€ å‡½æ•°å°†[beg, end)åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>deque(n, elem);</code>                    //æ„é€ å‡½æ•°å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>deque(const deque &amp;deq);</code>   //æ‹·è´æ„é€ å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printDeque</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt;&amp; d)</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (deque&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = d.<span class="hljs-built_in">begin</span>(); it != d.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br><br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//dequeæ„é€ </span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br>deque&lt;<span class="hljs-type">int</span>&gt; d1; <span class="hljs-comment">//æ— å‚æ„é€ å‡½æ•°</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printDeque</span>(d1);<br><span class="hljs-function">deque&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">d2</span><span class="hljs-params">(d<span class="hljs-number">1.</span>begin(),d<span class="hljs-number">1.</span>end())</span></span>;<br><span class="hljs-built_in">printDeque</span>(d2);<br><br>deque&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">d3</span>(<span class="hljs-number">10</span>,<span class="hljs-number">100</span>);<br><span class="hljs-built_in">printDeque</span>(d3);<br><br>deque&lt;<span class="hljs-type">int</span>&gt;d4 = d3;<br><span class="hljs-built_in">printDeque</span>(d4);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**dequeå®¹å™¨å’Œvectorå®¹å™¨çš„æ„é€ æ–¹å¼å‡ ä¹ä¸€è‡´ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-3-3-dequeèµ‹å€¼æ“ä½œ">3.3.3 dequeèµ‹å€¼æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™dequeå®¹å™¨è¿›è¡Œèµ‹å€¼</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>deque&amp; operator=(const deque &amp;deq); </code>         //é‡è½½ç­‰å·æ“ä½œç¬¦</p></li><li><p><code>assign(beg, end);</code>                                           //å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li><li><p><code>assign(n, elem);</code>                                             //å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printDeque</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt;&amp; d)</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (deque&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = d.<span class="hljs-built_in">begin</span>(); it != d.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br><br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//èµ‹å€¼æ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printDeque</span>(d1);<br><br>deque&lt;<span class="hljs-type">int</span>&gt;d2;<br>d2 = d1;<br><span class="hljs-built_in">printDeque</span>(d2);<br><br>deque&lt;<span class="hljs-type">int</span>&gt;d3;<br>d<span class="hljs-number">3.</span><span class="hljs-built_in">assign</span>(d<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), d<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printDeque</span>(d3);<br><br>deque&lt;<span class="hljs-type">int</span>&gt;d4;<br>d<span class="hljs-number">4.</span><span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printDeque</span>(d4);<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šdequeèµ‹å€¼æ“ä½œä¹Ÿä¸vectorç›¸åŒï¼Œéœ€ç†Ÿç»ƒæŒæ¡</p><h4 id="3-3-4-dequeå¤§å°æ“ä½œ">3.3.4 dequeå¤§å°æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹dequeå®¹å™¨çš„å¤§å°è¿›è¡Œæ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>deque.empty();</code>                       //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>deque.size();</code>                         //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>deque.resize(num);</code>                //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnum,è‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹                             //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>deque.resize(num, elem);</code>     //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnum,è‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹                                                     //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printDeque</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt;&amp; d)</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (deque&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = d.<span class="hljs-built_in">begin</span>(); it != d.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br><br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//å¤§å°æ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printDeque</span>(d1);<br><br><span class="hljs-comment">//åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</span><br><span class="hljs-keyword">if</span> (d<span class="hljs-number">1.</span><span class="hljs-built_in">empty</span>()) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;d1ä¸ºç©º!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;d1ä¸ä¸ºç©º!&quot;</span> &lt;&lt; endl;<br><span class="hljs-comment">//ç»Ÿè®¡å¤§å°</span><br>cout &lt;&lt; <span class="hljs-string">&quot;d1çš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; d<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//é‡æ–°æŒ‡å®šå¤§å°</span><br>d<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">15</span>, <span class="hljs-number">1</span>);<br><span class="hljs-built_in">printDeque</span>(d1);<br><br>d<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">5</span>);<br><span class="hljs-built_in">printDeque</span>(d1);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>dequeæ²¡æœ‰å®¹é‡çš„æ¦‚å¿µ</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•°   â€” size</li><li>é‡æ–°æŒ‡å®šä¸ªæ•°   â€” resize</li></ul><h4 id="3-3-5-deque-æ’å…¥å’Œåˆ é™¤">3.3.5 deque æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‘dequeå®¹å™¨ä¸­æ’å…¥å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><p>ä¸¤ç«¯æ’å…¥æ“ä½œï¼š</p><ul><li><code>push_back(elem);</code>          //åœ¨å®¹å™¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæ•°æ®</li><li><code>push_front(elem);</code>        //åœ¨å®¹å™¨å¤´éƒ¨æ’å…¥ä¸€ä¸ªæ•°æ®</li><li><code>pop_back();</code>                   //åˆ é™¤å®¹å™¨æœ€åä¸€ä¸ªæ•°æ®</li><li><code>pop_front();</code>                 //åˆ é™¤å®¹å™¨ç¬¬ä¸€ä¸ªæ•°æ®</li></ul><p>æŒ‡å®šä½ç½®æ“ä½œï¼š</p><ul><li><p><code>insert(pos,elem);</code>         //åœ¨posä½ç½®æ’å…¥ä¸€ä¸ªelemå…ƒç´ çš„æ‹·è´ï¼Œè¿”å›æ–°æ•°æ®çš„ä½ç½®ã€‚</p></li><li><p><code>insert(pos,n,elem);</code>     //åœ¨posä½ç½®æ’å…¥nä¸ªelemæ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</p></li><li><p><code>insert(pos,beg,end);</code>    //åœ¨posä½ç½®æ’å…¥[beg,end)åŒºé—´çš„æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</p></li><li><p><code>clear();</code>                           //æ¸…ç©ºå®¹å™¨çš„æ‰€æœ‰æ•°æ®</p></li><li><p><code>erase(beg,end);</code>             //åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</p></li><li><p><code>erase(pos);</code>                    //åˆ é™¤posä½ç½®çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printDeque</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt;&amp; d)</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (deque&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = d.<span class="hljs-built_in">begin</span>(); it != d.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br><br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//ä¸¤ç«¯æ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d;<br><span class="hljs-comment">//å°¾æ’</span><br>d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br><span class="hljs-comment">//å¤´æ’</span><br>d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br><br><span class="hljs-built_in">printDeque</span>(d);<br><br><span class="hljs-comment">//å°¾åˆ </span><br>d.<span class="hljs-built_in">pop_back</span>();<br><span class="hljs-comment">//å¤´åˆ </span><br>d.<span class="hljs-built_in">pop_front</span>();<br><span class="hljs-built_in">printDeque</span>(d);<br>&#125;<br><br><span class="hljs-comment">//æ’å…¥</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d;<br>d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printDeque</span>(d);<br><br>d.<span class="hljs-built_in">insert</span>(d.<span class="hljs-built_in">begin</span>(), <span class="hljs-number">1000</span>);<br><span class="hljs-built_in">printDeque</span>(d);<br><br>d.<span class="hljs-built_in">insert</span>(d.<span class="hljs-built_in">begin</span>(), <span class="hljs-number">2</span>,<span class="hljs-number">10000</span>);<br><span class="hljs-built_in">printDeque</span>(d);<br><br>deque&lt;<span class="hljs-type">int</span>&gt;d2;<br>d<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);<br>d<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);<br>d<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);<br><br>d.<span class="hljs-built_in">insert</span>(d.<span class="hljs-built_in">begin</span>(), d<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), d<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printDeque</span>(d);<br><br>&#125;<br><br><span class="hljs-comment">//åˆ é™¤</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d;<br>d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printDeque</span>(d);<br><br>d.<span class="hljs-built_in">erase</span>(d.<span class="hljs-built_in">begin</span>());<br><span class="hljs-built_in">printDeque</span>(d);<br><br>d.<span class="hljs-built_in">erase</span>(d.<span class="hljs-built_in">begin</span>(), d.<span class="hljs-built_in">end</span>());<br>d.<span class="hljs-built_in">clear</span>();<br><span class="hljs-built_in">printDeque</span>(d);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><br><span class="hljs-comment">//test02();</span><br><br>    <span class="hljs-built_in">test03</span>();<br>    <br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ’å…¥å’Œåˆ é™¤æä¾›çš„ä½ç½®æ˜¯è¿­ä»£å™¨ï¼</li><li>å°¾æ’   â€”  push_back</li><li>å°¾åˆ    â€”  pop_back</li><li>å¤´æ’   â€”  push_front</li><li>å¤´åˆ    â€”  pop_front</li></ul><h4 id="3-3-6-deque-æ•°æ®å­˜å–">3.3.6 deque æ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹deque ä¸­çš„æ•°æ®çš„å­˜å–æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>at(int idx); </code>     //è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>operator[]; </code>      //è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>front(); </code>            //è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ </li><li><code>back();</code>              //è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªæ•°æ®å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printDeque</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt;&amp; d)</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (deque&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = d.<span class="hljs-built_in">begin</span>(); it != d.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br><br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//æ•°æ®å­˜å–</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>deque&lt;<span class="hljs-type">int</span>&gt; d;<br>d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; d.<span class="hljs-built_in">size</span>(); i++) &#123;<br>cout &lt;&lt; d[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; d.<span class="hljs-built_in">size</span>(); i++) &#123;<br>cout &lt;&lt; d.<span class="hljs-built_in">at</span>(i) &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;front:&quot;</span> &lt;&lt; d.<span class="hljs-built_in">front</span>() &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;back:&quot;</span> &lt;&lt; d.<span class="hljs-built_in">back</span>() &lt;&lt; endl;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é™¤äº†ç”¨è¿­ä»£å™¨è·å–dequeå®¹å™¨ä¸­å…ƒç´ ï¼Œ[ ]å’Œatä¹Ÿå¯ä»¥</li><li>frontè¿”å›å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>backè¿”å›å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ </li></ul><h4 id="3-3-7-deque-æ’åº">3.3.7  deque æ’åº</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ©ç”¨ç®—æ³•å®ç°å¯¹dequeå®¹å™¨è¿›è¡Œæ’åº</li></ul><p><strong>ç®—æ³•ï¼š</strong></p><ul><li><code>sort(iterator beg, iterator end)</code>  //å¯¹begå’ŒendåŒºé—´å†…å…ƒç´ è¿›è¡Œæ’åº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printDeque</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt;&amp; d)</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (deque&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = d.<span class="hljs-built_in">begin</span>(); it != d.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br><br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>deque&lt;<span class="hljs-type">int</span>&gt; d;<br>d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br><br><span class="hljs-built_in">printDeque</span>(d);<br><span class="hljs-built_in">sort</span>(d.<span class="hljs-built_in">begin</span>(), d.<span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printDeque</span>(d);<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šsortç®—æ³•éå¸¸å®ç”¨ï¼Œä½¿ç”¨æ—¶åŒ…å«å¤´æ–‡ä»¶ algorithmå³å¯</p><h3 id="3-4-æ¡ˆä¾‹-è¯„å§”æ‰“åˆ†">3.4 æ¡ˆä¾‹-è¯„å§”æ‰“åˆ†</h3><h4 id="3-4-1-æ¡ˆä¾‹æè¿°">3.4.1 æ¡ˆä¾‹æè¿°</h4><p>æœ‰5åé€‰æ‰‹ï¼šé€‰æ‰‹ABCDEï¼Œ10ä¸ªè¯„å§”åˆ†åˆ«å¯¹æ¯ä¸€åé€‰æ‰‹æ‰“åˆ†ï¼Œå»é™¤æœ€é«˜åˆ†ï¼Œå»é™¤è¯„å§”ä¸­æœ€ä½åˆ†ï¼Œå–å¹³å‡åˆ†ã€‚</p><h4 id="3-4-2-å®ç°æ­¥éª¤">3.4.2 å®ç°æ­¥éª¤</h4><ol><li>åˆ›å»ºäº”åé€‰æ‰‹ï¼Œæ”¾åˆ°vectorä¸­</li><li>éå†vectorå®¹å™¨ï¼Œå–å‡ºæ¥æ¯ä¸€ä¸ªé€‰æ‰‹ï¼Œæ‰§è¡Œforå¾ªç¯ï¼Œå¯ä»¥æŠŠ10ä¸ªè¯„åˆ†æ‰“åˆ†å­˜åˆ°dequeå®¹å™¨ä¸­</li><li>sortç®—æ³•å¯¹dequeå®¹å™¨ä¸­åˆ†æ•°æ’åºï¼Œå»é™¤æœ€é«˜å’Œæœ€ä½åˆ†</li><li>dequeå®¹å™¨éå†ä¸€éï¼Œç´¯åŠ æ€»åˆ†</li><li>è·å–å¹³å‡åˆ†</li></ol><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//é€‰æ‰‹ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> score)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Score = score;<br>&#125;<br><br>string m_Name; <span class="hljs-comment">//å§“å</span><br><span class="hljs-type">int</span> m_Score;  <span class="hljs-comment">//å¹³å‡åˆ†</span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">createPerson</span><span class="hljs-params">(vector&lt;Person&gt;&amp;v)</span></span><br><span class="hljs-function"></span>&#123;<br>string nameSeed = <span class="hljs-string">&quot;ABCDE&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++)<br>&#123;<br>string name = <span class="hljs-string">&quot;é€‰æ‰‹&quot;</span>;<br>name += nameSeed[i];<br><br><span class="hljs-type">int</span> score = <span class="hljs-number">0</span>;<br><br><span class="hljs-function">Person <span class="hljs-title">p</span><span class="hljs-params">(name, score)</span></span>;<br><br><span class="hljs-comment">//å°†åˆ›å»ºçš„personå¯¹è±¡ æ”¾å…¥åˆ°å®¹å™¨ä¸­</span><br>v.<span class="hljs-built_in">push_back</span>(p);<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰“åˆ†</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setScore</span><span class="hljs-params">(vector&lt;Person&gt;&amp;v)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br><span class="hljs-comment">//å°†è¯„å§”çš„åˆ†æ•° æ”¾å…¥åˆ°dequeå®¹å™¨ä¸­</span><br>deque&lt;<span class="hljs-type">int</span>&gt;d;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br><span class="hljs-type">int</span> score = <span class="hljs-built_in">rand</span>() % <span class="hljs-number">41</span> + <span class="hljs-number">60</span>;  <span class="hljs-comment">// 60 ~ 100</span><br>d.<span class="hljs-built_in">push_back</span>(score);<br>&#125;<br><br><span class="hljs-comment">//cout &lt;&lt; &quot;é€‰æ‰‹ï¼š &quot; &lt;&lt; it-&gt;m_Name &lt;&lt; &quot; æ‰“åˆ†ï¼š &quot; &lt;&lt; endl;</span><br><span class="hljs-comment">//for (deque&lt;int&gt;::iterator dit = d.begin(); dit != d.end(); dit++)</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; *dit &lt;&lt; &quot; &quot;;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-comment">//cout &lt;&lt; endl;</span><br><br><span class="hljs-comment">//æ’åº</span><br><span class="hljs-built_in">sort</span>(d.<span class="hljs-built_in">begin</span>(), d.<span class="hljs-built_in">end</span>());<br><br><span class="hljs-comment">//å»é™¤æœ€é«˜å’Œæœ€ä½åˆ†</span><br>d.<span class="hljs-built_in">pop_back</span>();<br>d.<span class="hljs-built_in">pop_front</span>();<br><br><span class="hljs-comment">//å–å¹³å‡åˆ†</span><br><span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (deque&lt;<span class="hljs-type">int</span>&gt;::iterator dit = d.<span class="hljs-built_in">begin</span>(); dit != d.<span class="hljs-built_in">end</span>(); dit++)<br>&#123;<br>sum += *dit; <span class="hljs-comment">//ç´¯åŠ æ¯ä¸ªè¯„å§”çš„åˆ†æ•°</span><br>&#125;<br><br><span class="hljs-type">int</span> avg = sum / d.<span class="hljs-built_in">size</span>();<br><br><span class="hljs-comment">//å°†å¹³å‡åˆ† èµ‹å€¼ç»™é€‰æ‰‹èº«ä¸Š</span><br>it-&gt;m_Score = avg;<br>&#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showScore</span><span class="hljs-params">(vector&lt;Person&gt;&amp;v)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="hljs-string">&quot; å¹³å‡åˆ†ï¼š &quot;</span> &lt;&lt; it-&gt;m_Score &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//éšæœºæ•°ç§å­</span><br><span class="hljs-built_in">srand</span>((<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br><br><span class="hljs-comment">//1ã€åˆ›å»º5åé€‰æ‰‹</span><br>vector&lt;Person&gt;v;  <span class="hljs-comment">//å­˜æ”¾é€‰æ‰‹å®¹å™¨</span><br><span class="hljs-built_in">createPerson</span>(v);<br><br><span class="hljs-comment">//æµ‹è¯•</span><br><span class="hljs-comment">//for (vector&lt;Person&gt;::iterator it = v.begin(); it != v.end(); it++)</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; (*it).m_Name &lt;&lt; &quot; åˆ†æ•°ï¼š &quot; &lt;&lt; (*it).m_Score &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-comment">//2ã€ç»™5åé€‰æ‰‹æ‰“åˆ†</span><br><span class="hljs-built_in">setScore</span>(v);<br><br><span class="hljs-comment">//3ã€æ˜¾ç¤ºæœ€åå¾—åˆ†</span><br><span class="hljs-built_in">showScore</span>(v);<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> é€‰å–ä¸åŒçš„å®¹å™¨æ“ä½œæ•°æ®ï¼Œå¯ä»¥æå‡ä»£ç çš„æ•ˆç‡</p><h3 id="3-5-stackå®¹å™¨">3.5 stackå®¹å™¨</h3><h4 id="3-5-1-stack-åŸºæœ¬æ¦‚å¿µ">3.5.1 stack åŸºæœ¬æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š<strong>stackæ˜¯ä¸€ç§</strong>å…ˆè¿›åå‡º</strong>(First In Last Out,FILO)çš„æ•°æ®ç»“æ„ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå‡ºå£</p><p><img src="/assetss/clip_image002-1547604555425.jpg" alt="è¯´æ˜: 2015-11-15_195707"></p><p>æ ˆä¸­åªæœ‰é¡¶ç«¯çš„å…ƒç´ æ‰å¯ä»¥è¢«å¤–ç•Œä½¿ç”¨ï¼Œå› æ­¤æ ˆä¸å…è®¸æœ‰éå†è¡Œä¸º</p><p>æ ˆä¸­è¿›å…¥æ•°æ®ç§°ä¸º  â€” <strong>å…¥æ ˆ</strong>  <code>push</code></p><p>æ ˆä¸­å¼¹å‡ºæ•°æ®ç§°ä¸º  â€” <strong>å‡ºæ ˆ</strong>  <code>pop</code></p><p>ç”Ÿæ´»ä¸­çš„æ ˆï¼š</p><p><img src="/assetss/clip_image002.png" alt="img"></p><p><img src="/assetss/clip_image002-1547605111510.jpg" alt="img"></p><h4 id="3-5-2-stack-å¸¸ç”¨æ¥å£">3.5.2 stack å¸¸ç”¨æ¥å£</h4><p>åŠŸèƒ½æè¿°ï¼šæ ˆå®¹å™¨å¸¸ç”¨çš„å¯¹å¤–æ¥å£</p><p>æ„é€ å‡½æ•°ï¼š</p><ul><li><code>stack&lt;T&gt; stk;</code>                                 //stacké‡‡ç”¨æ¨¡æ¿ç±»å®ç°ï¼Œ stackå¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼</li><li><code>stack(const stack &amp;stk);</code>            //æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼æ“ä½œï¼š</p><ul><li><code>stack&amp; operator=(const stack &amp;stk);</code>           //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p>æ•°æ®å­˜å–ï¼š</p><ul><li><code>push(elem);</code>      //å‘æ ˆé¡¶æ·»åŠ å…ƒç´ </li><li><code>pop();</code>                //ä»æ ˆé¡¶ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li><code>top(); </code>                //è¿”å›æ ˆé¡¶å…ƒç´ </li></ul><p>å¤§å°æ“ä½œï¼š</p><ul><li><code>empty();</code>            //åˆ¤æ–­å †æ ˆæ˜¯å¦ä¸ºç©º</li><li><code>size(); </code>              //è¿”å›æ ˆçš„å¤§å°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stack&gt;</span></span><br><br><span class="hljs-comment">//æ ˆå®¹å™¨å¸¸ç”¨æ¥å£</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//åˆ›å»ºæ ˆå®¹å™¨ æ ˆå®¹å™¨å¿…é¡»ç¬¦åˆå…ˆè¿›åå‡º</span><br>stack&lt;<span class="hljs-type">int</span>&gt; s;<br><br><span class="hljs-comment">//å‘æ ˆä¸­æ·»åŠ å…ƒç´ ï¼Œå«åš å‹æ ˆ å…¥æ ˆ</span><br>s.<span class="hljs-built_in">push</span>(<span class="hljs-number">10</span>);<br>s.<span class="hljs-built_in">push</span>(<span class="hljs-number">20</span>);<br>s.<span class="hljs-built_in">push</span>(<span class="hljs-number">30</span>);<br><br><span class="hljs-keyword">while</span> (!s.<span class="hljs-built_in">empty</span>()) &#123;<br><span class="hljs-comment">//è¾“å‡ºæ ˆé¡¶å…ƒç´ </span><br>cout &lt;&lt; <span class="hljs-string">&quot;æ ˆé¡¶å…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; s.<span class="hljs-built_in">top</span>() &lt;&lt; endl;<br><span class="hljs-comment">//å¼¹å‡ºæ ˆé¡¶å…ƒç´ </span><br>s.<span class="hljs-built_in">pop</span>();<br>&#125;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ ˆçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; s.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å…¥æ ˆ   â€” push</li><li>å‡ºæ ˆ   â€” pop</li><li>è¿”å›æ ˆé¡¶   â€” top</li><li>åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›æ ˆå¤§å°   â€” size</li></ul><h3 id="3-6-queue-å®¹å™¨">3.6 queue å®¹å™¨</h3><h4 id="3-6-1-queue-åŸºæœ¬æ¦‚å¿µ">3.6.1 queue åŸºæœ¬æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š<strong>Queueæ˜¯ä¸€ç§</strong>å…ˆè¿›å…ˆå‡º</strong>(First In First Out,FIFO)çš„æ•°æ®ç»“æ„ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‡ºå£</p><p><img src="/assetss/clip_image002-1547606475892.jpg" alt="è¯´æ˜: 2015-11-15_214429"></p><p>é˜Ÿåˆ—å®¹å™¨å…è®¸ä»ä¸€ç«¯æ–°å¢å…ƒç´ ï¼Œä»å¦ä¸€ç«¯ç§»é™¤å…ƒç´ </p><p>é˜Ÿåˆ—ä¸­åªæœ‰é˜Ÿå¤´å’Œé˜Ÿå°¾æ‰å¯ä»¥è¢«å¤–ç•Œä½¿ç”¨ï¼Œå› æ­¤é˜Ÿåˆ—ä¸å…è®¸æœ‰éå†è¡Œä¸º</p><p>é˜Ÿåˆ—ä¸­è¿›æ•°æ®ç§°ä¸º â€” <strong>å…¥é˜Ÿ</strong>    <code>push</code></p><p>é˜Ÿåˆ—ä¸­å‡ºæ•°æ®ç§°ä¸º â€” <strong>å‡ºé˜Ÿ</strong>    <code>pop</code></p><p>ç”Ÿæ´»ä¸­çš„é˜Ÿåˆ—ï¼š</p><p><img src="/assetss/1547606785041.png" alt="1547606785041"></p><h4 id="3-6-2-queue-å¸¸ç”¨æ¥å£">3.6.2 queue å¸¸ç”¨æ¥å£</h4><p>åŠŸèƒ½æè¿°ï¼šæ ˆå®¹å™¨å¸¸ç”¨çš„å¯¹å¤–æ¥å£</p><p>æ„é€ å‡½æ•°ï¼š</p><ul><li><code>queue&lt;T&gt; que;</code>                                 //queueé‡‡ç”¨æ¨¡æ¿ç±»å®ç°ï¼Œqueueå¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼</li><li><code>queue(const queue &amp;que);</code>            //æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼æ“ä½œï¼š</p><ul><li><code>queue&amp; operator=(const queue &amp;que);</code>           //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p>æ•°æ®å­˜å–ï¼š</p><ul><li><code>push(elem);</code>                             //å¾€é˜Ÿå°¾æ·»åŠ å…ƒç´ </li><li><code>pop();</code>                                      //ä»é˜Ÿå¤´ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li><code>back();</code>                                    //è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </li><li><code>front(); </code>                                  //è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </li></ul><p>å¤§å°æ“ä½œï¼š</p><ul><li><code>empty();</code>            //åˆ¤æ–­å †æ ˆæ˜¯å¦ä¸ºç©º</li><li><code>size(); </code>              //è¿”å›æ ˆçš„å¤§å°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br><br>string m_Name;<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//åˆ›å»ºé˜Ÿåˆ—</span><br>queue&lt;Person&gt; q;<br><br><span class="hljs-comment">//å‡†å¤‡æ•°æ®</span><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;å”åƒ§&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="hljs-number">1000</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="hljs-number">900</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;æ²™åƒ§&quot;</span>, <span class="hljs-number">800</span>)</span></span>;<br><br><span class="hljs-comment">//å‘é˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´   å…¥é˜Ÿæ“ä½œ</span><br>q.<span class="hljs-built_in">push</span>(p1);<br>q.<span class="hljs-built_in">push</span>(p2);<br>q.<span class="hljs-built_in">push</span>(p3);<br>q.<span class="hljs-built_in">push</span>(p4);<br><br><span class="hljs-comment">//é˜Ÿåˆ—ä¸æä¾›è¿­ä»£å™¨ï¼Œæ›´ä¸æ”¯æŒéšæœºè®¿é—®</span><br><span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br><span class="hljs-comment">//è¾“å‡ºé˜Ÿå¤´å…ƒç´ </span><br>cout &lt;&lt; <span class="hljs-string">&quot;é˜Ÿå¤´å…ƒç´ -- å§“åï¼š &quot;</span> &lt;&lt; q.<span class="hljs-built_in">front</span>().m_Name <br>              &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span>&lt;&lt; q.<span class="hljs-built_in">front</span>().m_Age &lt;&lt; endl;<br>        <br>cout &lt;&lt; <span class="hljs-string">&quot;é˜Ÿå°¾å…ƒç´ -- å§“åï¼š &quot;</span> &lt;&lt; q.<span class="hljs-built_in">back</span>().m_Name  <br>              &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; q.<span class="hljs-built_in">back</span>().m_Age &lt;&lt; endl;<br>        <br>cout &lt;&lt; endl;<br><span class="hljs-comment">//å¼¹å‡ºé˜Ÿå¤´å…ƒç´ </span><br>q.<span class="hljs-built_in">pop</span>();<br>&#125;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;é˜Ÿåˆ—å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; q.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å…¥é˜Ÿ   â€” push</li><li>å‡ºé˜Ÿ   â€” pop</li><li>è¿”å›é˜Ÿå¤´å…ƒç´    â€” front</li><li>è¿”å›é˜Ÿå°¾å…ƒç´    â€” back</li><li>åˆ¤æ–­é˜Ÿæ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›é˜Ÿåˆ—å¤§å°   â€” size</li></ul><h3 id="3-7-listå®¹å™¨">3.7 listå®¹å™¨</h3><h4 id="3-7-1-liståŸºæœ¬æ¦‚å¿µ">3.7.1 liståŸºæœ¬æ¦‚å¿µ</h4><p>**åŠŸèƒ½ï¼š**å°†æ•°æ®è¿›è¡Œé“¾å¼å­˜å‚¨</p><p><strong>é“¾è¡¨</strong>ï¼ˆlistï¼‰æ˜¯ä¸€ç§ç‰©ç†å­˜å‚¨å•å…ƒä¸Šéè¿ç»­çš„å­˜å‚¨ç»“æ„ï¼Œæ•°æ®å…ƒç´ çš„é€»è¾‘é¡ºåºæ˜¯é€šè¿‡é“¾è¡¨ä¸­çš„æŒ‡é’ˆé“¾æ¥å®ç°çš„</p><p>é“¾è¡¨çš„ç»„æˆï¼šé“¾è¡¨ç”±ä¸€ç³»åˆ—<strong>ç»“ç‚¹</strong>ç»„æˆ</p><p>ç»“ç‚¹çš„ç»„æˆï¼šä¸€ä¸ªæ˜¯å­˜å‚¨æ•°æ®å…ƒç´ çš„<strong>æ•°æ®åŸŸ</strong>ï¼Œå¦ä¸€ä¸ªæ˜¯å­˜å‚¨ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€çš„<strong>æŒ‡é’ˆåŸŸ</strong></p><p>STLä¸­çš„é“¾è¡¨æ˜¯ä¸€ä¸ªåŒå‘å¾ªç¯é“¾è¡¨</p><p><img src="/assetss/clip_image002-1547608564071.jpg" alt="è¯´æ˜: 2015-11-15_225145"></p><p>ç”±äºé“¾è¡¨çš„å­˜å‚¨æ–¹å¼å¹¶ä¸æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤é“¾è¡¨listä¸­çš„è¿­ä»£å™¨åªæ”¯æŒå‰ç§»å’Œåç§»ï¼Œå±äº<strong>åŒå‘è¿­ä»£å™¨</strong></p><p>listçš„ä¼˜ç‚¹ï¼š</p><ul><li>é‡‡ç”¨åŠ¨æ€å­˜å‚¨åˆ†é…ï¼Œä¸ä¼šé€ æˆå†…å­˜æµªè´¹å’Œæº¢å‡º</li><li>é“¾è¡¨æ‰§è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œååˆ†æ–¹ä¾¿ï¼Œä¿®æ”¹æŒ‡é’ˆå³å¯ï¼Œä¸éœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ </li></ul><p>listçš„ç¼ºç‚¹ï¼š</p><ul><li>é“¾è¡¨çµæ´»ï¼Œä½†æ˜¯ç©ºé—´(æŒ‡é’ˆåŸŸ) å’Œ æ—¶é—´ï¼ˆéå†ï¼‰é¢å¤–è€—è´¹è¾ƒå¤§</li></ul><p>Listæœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨ï¼Œæ’å…¥æ“ä½œå’Œåˆ é™¤æ“ä½œéƒ½ä¸ä¼šé€ æˆåŸæœ‰listè¿­ä»£å™¨çš„å¤±æ•ˆï¼Œè¿™åœ¨vectoræ˜¯ä¸æˆç«‹çš„ã€‚</p><p>æ€»ç»“ï¼šSTLä¸­<strong>Listå’Œvectoræ˜¯ä¸¤ä¸ªæœ€å¸¸è¢«ä½¿ç”¨çš„å®¹å™¨</strong>ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹</p><h4 id="3-7-2-listæ„é€ å‡½æ•°">3.7.2  listæ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ›å»ºlistå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>list&lt;T&gt; lst;</code>                               //listé‡‡ç”¨é‡‡ç”¨æ¨¡æ¿ç±»å®ç°,å¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼ï¼š</li><li><code>list(beg,end);</code>                           //æ„é€ å‡½æ•°å°†[beg, end)åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>list(n,elem);</code>                             //æ„é€ å‡½æ•°å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>list(const list &amp;lst);</code>            //æ‹·è´æ„é€ å‡½æ•°ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printList</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;&amp; L)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = L.<span class="hljs-built_in">begin</span>(); it != L.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>list&lt;<span class="hljs-type">int</span>&gt;L1;<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br><span class="hljs-built_in">printList</span>(L1);<br><br>list&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">L2</span>(L<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(),L<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printList</span>(L2);<br><br>list&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">L3</span>(L2);<br><span class="hljs-built_in">printList</span>(L3);<br><br>list&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">L4</span>(<span class="hljs-number">10</span>, <span class="hljs-number">1000</span>);<br><span class="hljs-built_in">printList</span>(L4);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šlistæ„é€ æ–¹å¼åŒå…¶ä»–å‡ ä¸ªSTLå¸¸ç”¨å®¹å™¨ï¼Œç†Ÿç»ƒæŒæ¡å³å¯</p><h4 id="3-7-3-list-èµ‹å€¼å’Œäº¤æ¢">3.7.3 list èµ‹å€¼å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™listå®¹å™¨è¿›è¡Œèµ‹å€¼ï¼Œä»¥åŠäº¤æ¢listå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>assign(beg, end);</code>            //å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</li><li><code>assign(n, elem);</code>              //å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</li><li><code>list&amp; operator=(const list &amp;lst);</code>         //é‡è½½ç­‰å·æ“ä½œç¬¦</li><li><code>swap(lst);</code>                         //å°†lstä¸æœ¬èº«çš„å…ƒç´ äº’æ¢ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printList</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;&amp; L)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = L.<span class="hljs-built_in">begin</span>(); it != L.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//èµ‹å€¼å’Œäº¤æ¢</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>list&lt;<span class="hljs-type">int</span>&gt;L1;<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><span class="hljs-built_in">printList</span>(L1);<br><br><span class="hljs-comment">//èµ‹å€¼</span><br>list&lt;<span class="hljs-type">int</span>&gt;L2;<br>L2 = L1;<br><span class="hljs-built_in">printList</span>(L2);<br><br>list&lt;<span class="hljs-type">int</span>&gt;L3;<br>L<span class="hljs-number">3.</span><span class="hljs-built_in">assign</span>(L<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), L<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printList</span>(L3);<br><br>list&lt;<span class="hljs-type">int</span>&gt;L4;<br>L<span class="hljs-number">4.</span><span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printList</span>(L4);<br><br>&#125;<br><br><span class="hljs-comment">//äº¤æ¢</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>list&lt;<span class="hljs-type">int</span>&gt;L1;<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br>list&lt;<span class="hljs-type">int</span>&gt;L2;<br>L<span class="hljs-number">2.</span><span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äº¤æ¢å‰ï¼š &quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">printList</span>(L1);<br><span class="hljs-built_in">printList</span>(L2);<br><br>cout &lt;&lt; endl;<br><br>L<span class="hljs-number">1.</span><span class="hljs-built_in">swap</span>(L2);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äº¤æ¢åï¼š &quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">printList</span>(L1);<br><span class="hljs-built_in">printList</span>(L2);<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šlistèµ‹å€¼å’Œäº¤æ¢æ“ä½œèƒ½å¤Ÿçµæ´»è¿ç”¨å³å¯</p><h4 id="3-7-4-list-å¤§å°æ“ä½œ">3.7.4 list å¤§å°æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹listå®¹å™¨çš„å¤§å°è¿›è¡Œæ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>size(); </code>                             //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>empty(); </code>                           //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>resize(num);</code>                   //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹    //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>resize(num, elem); </code>       //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚</p><pre><code class="hljs">        //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</code></pre></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printList</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;&amp; L)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = L.<span class="hljs-built_in">begin</span>(); it != L.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//å¤§å°æ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>list&lt;<span class="hljs-type">int</span>&gt;L1;<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br><span class="hljs-keyword">if</span> (L<span class="hljs-number">1.</span><span class="hljs-built_in">empty</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;L1ä¸ºç©º&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;L1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;L1çš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; L<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//é‡æ–°æŒ‡å®šå¤§å°</span><br>L<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">10</span>);<br><span class="hljs-built_in">printList</span>(L1);<br><br>L<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">2</span>);<br><span class="hljs-built_in">printList</span>(L1);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•°   â€” size</li><li>é‡æ–°æŒ‡å®šä¸ªæ•°   â€” resize</li></ul><h4 id="3-7-5-list-æ’å…¥å’Œåˆ é™¤">3.7.5 list æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹listå®¹å™¨è¿›è¡Œæ•°æ®çš„æ’å…¥å’Œåˆ é™¤</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li>push_back(elem);//åœ¨å®¹å™¨å°¾éƒ¨åŠ å…¥ä¸€ä¸ªå…ƒç´ </li><li>pop_back();//åˆ é™¤å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ </li><li>push_front(elem);//åœ¨å®¹å™¨å¼€å¤´æ’å…¥ä¸€ä¸ªå…ƒç´ </li><li>pop_front();//ä»å®¹å™¨å¼€å¤´ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>insert(pos,elem);//åœ¨posä½ç½®æ’elemå…ƒç´ çš„æ‹·è´ï¼Œè¿”å›æ–°æ•°æ®çš„ä½ç½®ã€‚</li><li>insert(pos,n,elem);//åœ¨posä½ç½®æ’å…¥nä¸ªelemæ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</li><li>insert(pos,beg,end);//åœ¨posä½ç½®æ’å…¥[beg,end)åŒºé—´çš„æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</li><li>clear();//ç§»é™¤å®¹å™¨çš„æ‰€æœ‰æ•°æ®</li><li>erase(beg,end);//åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</li><li>erase(pos);//åˆ é™¤posä½ç½®çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</li><li>remove(elem);//åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰ä¸elemå€¼åŒ¹é…çš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printList</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;&amp; L)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = L.<span class="hljs-built_in">begin</span>(); it != L.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//æ’å…¥å’Œåˆ é™¤</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>list&lt;<span class="hljs-type">int</span>&gt; L;<br><span class="hljs-comment">//å°¾æ’</span><br>L.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>L.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>L.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br><span class="hljs-comment">//å¤´æ’</span><br>L.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>L.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br>L.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">300</span>);<br><br><span class="hljs-built_in">printList</span>(L);<br><br><span class="hljs-comment">//å°¾åˆ </span><br>L.<span class="hljs-built_in">pop_back</span>();<br><span class="hljs-built_in">printList</span>(L);<br><br><span class="hljs-comment">//å¤´åˆ </span><br>L.<span class="hljs-built_in">pop_front</span>();<br><span class="hljs-built_in">printList</span>(L);<br><br><span class="hljs-comment">//æ’å…¥</span><br>list&lt;<span class="hljs-type">int</span>&gt;::iterator it = L.<span class="hljs-built_in">begin</span>();<br>L.<span class="hljs-built_in">insert</span>(++it, <span class="hljs-number">1000</span>);<br><span class="hljs-built_in">printList</span>(L);<br><br><span class="hljs-comment">//åˆ é™¤</span><br>it = L.<span class="hljs-built_in">begin</span>();<br>L.<span class="hljs-built_in">erase</span>(++it);<br><span class="hljs-built_in">printList</span>(L);<br><br><span class="hljs-comment">//ç§»é™¤</span><br>L.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10000</span>);<br>L.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10000</span>);<br>L.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10000</span>);<br><span class="hljs-built_in">printList</span>(L);<br>L.<span class="hljs-built_in">remove</span>(<span class="hljs-number">10000</span>);<br><span class="hljs-built_in">printList</span>(L);<br>    <br>    <span class="hljs-comment">//æ¸…ç©º</span><br>L.<span class="hljs-built_in">clear</span>();<br><span class="hljs-built_in">printList</span>(L);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å°¾æ’   â€” push_back</li><li>å°¾åˆ    â€” pop_back</li><li>å¤´æ’   â€” push_front</li><li>å¤´åˆ    â€” pop_front</li><li>æ’å…¥   â€” insert</li><li>åˆ é™¤   â€” erase</li><li>ç§»é™¤   â€” remove</li><li>æ¸…ç©º   â€” clear</li></ul><h4 id="3-7-6-list-æ•°æ®å­˜å–">3.7.6 list æ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹listå®¹å™¨ä¸­æ•°æ®è¿›è¡Œå­˜å–</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>front();</code>        //è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li><li><code>back();</code>         //è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><br><span class="hljs-comment">//æ•°æ®å­˜å–</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>list&lt;<span class="hljs-type">int</span>&gt;L1;<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br><br><span class="hljs-comment">//cout &lt;&lt; L1.at(0) &lt;&lt; endl;//é”™è¯¯ ä¸æ”¯æŒatè®¿é—®æ•°æ®</span><br><span class="hljs-comment">//cout &lt;&lt; L1[0] &lt;&lt; endl; //é”™è¯¯  ä¸æ”¯æŒ[]æ–¹å¼è®¿é—®æ•°æ®</span><br>cout &lt;&lt; <span class="hljs-string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; L<span class="hljs-number">1.f</span>ront() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;æœ€åä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; L<span class="hljs-number">1.</span><span class="hljs-built_in">back</span>() &lt;&lt; endl;<br><br><span class="hljs-comment">//listå®¹å™¨çš„è¿­ä»£å™¨æ˜¯åŒå‘è¿­ä»£å™¨ï¼Œä¸æ”¯æŒéšæœºè®¿é—®</span><br>list&lt;<span class="hljs-type">int</span>&gt;::iterator it = L<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>();<br><span class="hljs-comment">//it = it + 1;//é”™è¯¯ï¼Œä¸å¯ä»¥è·³è·ƒè®¿é—®ï¼Œå³ä½¿æ˜¯+1</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>listå®¹å™¨ä¸­ä¸å¯ä»¥é€šè¿‡[]æˆ–è€…atæ–¹å¼è®¿é—®æ•°æ®</li><li>è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´    â€” front</li><li>è¿”å›æœ€åä¸€ä¸ªå…ƒç´    â€” back</li></ul><h4 id="3-7-7-list-åè½¬å’Œæ’åº">3.7.7 list åè½¬å’Œæ’åº</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨ä¸­çš„å…ƒç´ åè½¬ï¼Œä»¥åŠå°†å®¹å™¨ä¸­çš„æ•°æ®è¿›è¡Œæ’åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>reverse();</code>   //åè½¬é“¾è¡¨</li><li><code>sort();</code>        //é“¾è¡¨æ’åº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printList</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;&amp; L)</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = L.<span class="hljs-built_in">begin</span>(); it != L.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">myCompare</span><span class="hljs-params">(<span class="hljs-type">int</span> val1 , <span class="hljs-type">int</span> val2)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> val1 &gt; val2;<br>&#125;<br><br><span class="hljs-comment">//åè½¬å’Œæ’åº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>list&lt;<span class="hljs-type">int</span>&gt; L;<br>L.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">90</span>);<br>L.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>L.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>L.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">70</span>);<br><span class="hljs-built_in">printList</span>(L);<br><br><span class="hljs-comment">//åè½¬å®¹å™¨çš„å…ƒç´ </span><br>L.<span class="hljs-built_in">reverse</span>();<br><span class="hljs-built_in">printList</span>(L);<br><br><span class="hljs-comment">//æ’åº</span><br>L.<span class="hljs-built_in">sort</span>(); <span class="hljs-comment">//é»˜è®¤çš„æ’åºè§„åˆ™ ä»å°åˆ°å¤§</span><br><span class="hljs-built_in">printList</span>(L);<br><br>L.<span class="hljs-built_in">sort</span>(myCompare); <span class="hljs-comment">//æŒ‡å®šè§„åˆ™ï¼Œä»å¤§åˆ°å°</span><br><span class="hljs-built_in">printList</span>(L);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åè½¬   â€” reverse</li><li>æ’åº   â€” sort ï¼ˆæˆå‘˜å‡½æ•°ï¼‰</li></ul><h4 id="3-7-8-æ’åºæ¡ˆä¾‹">3.7.8 æ’åºæ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°ï¼šå°†Personè‡ªå®šä¹‰æ•°æ®ç±»å‹è¿›è¡Œæ’åºï¼ŒPersonä¸­å±æ€§æœ‰å§“åã€å¹´é¾„ã€èº«é«˜</p><p>æ’åºè§„åˆ™ï¼šæŒ‰ç…§å¹´é¾„è¿›è¡Œå‡åºï¼Œå¦‚æœå¹´é¾„ç›¸åŒæŒ‰ç…§èº«é«˜è¿›è¡Œé™åº</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age , <span class="hljs-type">int</span> height) &#123;<br>m_Name = name;<br>m_Age = age;<br>m_Height = height;<br>&#125;<br><br><span class="hljs-keyword">public</span>:<br>string m_Name;  <span class="hljs-comment">//å§“å</span><br><span class="hljs-type">int</span> m_Age;      <span class="hljs-comment">//å¹´é¾„</span><br><span class="hljs-type">int</span> m_Height;   <span class="hljs-comment">//èº«é«˜</span><br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">ComparePerson</span><span class="hljs-params">(Person&amp; p1, Person&amp; p2)</span> </span>&#123;<br><br><span class="hljs-keyword">if</span> (p<span class="hljs-number">1.</span>m_Age == p<span class="hljs-number">2.</span>m_Age) &#123;<br><span class="hljs-keyword">return</span> p<span class="hljs-number">1.</span>m_Height  &gt; p<span class="hljs-number">2.</span>m_Height;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">return</span>  p<span class="hljs-number">1.</span>m_Age &lt; p<span class="hljs-number">2.</span>m_Age;<br>&#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br>list&lt;Person&gt; L;<br><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;åˆ˜å¤‡&quot;</span>, <span class="hljs-number">35</span> , <span class="hljs-number">175</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;æ›¹æ“&quot;</span>, <span class="hljs-number">45</span> , <span class="hljs-number">180</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;å­™æƒ&quot;</span>, <span class="hljs-number">40</span> , <span class="hljs-number">170</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;èµµäº‘&quot;</span>, <span class="hljs-number">25</span> , <span class="hljs-number">190</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;å¼ é£&quot;</span>, <span class="hljs-number">35</span> , <span class="hljs-number">160</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p6</span><span class="hljs-params">(<span class="hljs-string">&quot;å…³ç¾½&quot;</span>, <span class="hljs-number">35</span> , <span class="hljs-number">200</span>)</span></span>;<br><br>L.<span class="hljs-built_in">push_back</span>(p1);<br>L.<span class="hljs-built_in">push_back</span>(p2);<br>L.<span class="hljs-built_in">push_back</span>(p3);<br>L.<span class="hljs-built_in">push_back</span>(p4);<br>L.<span class="hljs-built_in">push_back</span>(p5);<br>L.<span class="hljs-built_in">push_back</span>(p6);<br><br><span class="hljs-keyword">for</span> (list&lt;Person&gt;::iterator it = L.<span class="hljs-built_in">begin</span>(); it != L.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age <br>              &lt;&lt; <span class="hljs-string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; it-&gt;m_Height &lt;&lt; endl;<br>&#125;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;---------------------------------&quot;</span> &lt;&lt; endl;<br>L.<span class="hljs-built_in">sort</span>(ComparePerson); <span class="hljs-comment">//æ’åº</span><br><br><span class="hljs-keyword">for</span> (list&lt;Person&gt;::iterator it = L.<span class="hljs-built_in">begin</span>(); it != L.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age <br>              &lt;&lt; <span class="hljs-string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; it-&gt;m_Height &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li><p>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¿…é¡»è¦æŒ‡å®šæ’åºè§„åˆ™ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¸çŸ¥é“å¦‚ä½•è¿›è¡Œæ’åº</p></li><li><p>é«˜çº§æ’åºåªæ˜¯åœ¨æ’åºè§„åˆ™ä¸Šå†è¿›è¡Œä¸€æ¬¡é€»è¾‘è§„åˆ™åˆ¶å®šï¼Œå¹¶ä¸å¤æ‚</p></li></ul><h3 id="3-8-set-multiset-å®¹å™¨">3.8 set/ multiset å®¹å™¨</h3><h4 id="3-8-1-setåŸºæœ¬æ¦‚å¿µ">3.8.1 setåŸºæœ¬æ¦‚å¿µ</h4><p><strong>ç®€ä»‹ï¼š</strong></p><ul><li>æ‰€æœ‰å…ƒç´ éƒ½ä¼šåœ¨æ’å…¥æ—¶è‡ªåŠ¨è¢«æ’åº</li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>set/multisetå±äº<strong>å…³è”å¼å®¹å™¨</strong>ï¼Œåº•å±‚ç»“æ„æ˜¯ç”¨<strong>äºŒå‰æ ‘</strong>å®ç°ã€‚</li></ul><p><strong>setå’ŒmultisetåŒºåˆ«</strong>ï¼š</p><ul><li>setä¸å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤çš„å…ƒç´ </li><li>multisetå…è®¸å®¹å™¨ä¸­æœ‰é‡å¤çš„å…ƒç´ </li></ul><h4 id="3-8-2-setæ„é€ å’Œèµ‹å€¼">3.8.2 setæ„é€ å’Œèµ‹å€¼</h4><p>åŠŸèƒ½æè¿°ï¼šåˆ›å»ºsetå®¹å™¨ä»¥åŠèµ‹å€¼</p><p>æ„é€ ï¼š</p><ul><li><code>set&lt;T&gt; st;</code>                        //é»˜è®¤æ„é€ å‡½æ•°ï¼š</li><li><code>set(const set &amp;st);</code>       //æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼ï¼š</p><ul><li><code>set&amp; operator=(const set &amp;st);</code>    //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printSet</span><span class="hljs-params">(set&lt;<span class="hljs-type">int</span>&gt; &amp; s)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (set&lt;<span class="hljs-type">int</span>&gt;::iterator it = s.<span class="hljs-built_in">begin</span>(); it != s.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//æ„é€ å’Œèµ‹å€¼</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt; s1;<br><br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br><span class="hljs-built_in">printSet</span>(s1);<br><br><span class="hljs-comment">//æ‹·è´æ„é€ </span><br>set&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">s2</span>(s1);<br><span class="hljs-built_in">printSet</span>(s2);<br><br><span class="hljs-comment">//èµ‹å€¼</span><br>set&lt;<span class="hljs-type">int</span>&gt;s3;<br>s3 = s2;<br><span class="hljs-built_in">printSet</span>(s3);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>setå®¹å™¨æ’å…¥æ•°æ®æ—¶ç”¨insert</li><li>setå®¹å™¨æ’å…¥æ•°æ®çš„æ•°æ®ä¼šè‡ªåŠ¨æ’åº</li></ul><h4 id="3-8-3-setå¤§å°å’Œäº¤æ¢">3.8.3 setå¤§å°å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡setå®¹å™¨å¤§å°ä»¥åŠäº¤æ¢setå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>size();</code>          //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°ç›®</li><li><code>empty();</code>        //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</li><li><code>swap(st);</code>      //äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printSet</span><span class="hljs-params">(set&lt;<span class="hljs-type">int</span>&gt; &amp; s)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (set&lt;<span class="hljs-type">int</span>&gt;::iterator it = s.<span class="hljs-built_in">begin</span>(); it != s.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//å¤§å°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>set&lt;<span class="hljs-type">int</span>&gt; s1;<br><br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br><br><span class="hljs-keyword">if</span> (s<span class="hljs-number">1.</span><span class="hljs-built_in">empty</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;s1ä¸ºç©º&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;s1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;s1çš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; s<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>&#125;<br><br>&#125;<br><br><span class="hljs-comment">//äº¤æ¢</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt; s1;<br><br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br><br>set&lt;<span class="hljs-type">int</span>&gt; s2;<br><br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">100</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">300</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">200</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">400</span>);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äº¤æ¢å‰&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">printSet</span>(s1);<br><span class="hljs-built_in">printSet</span>(s2);<br>cout &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äº¤æ¢å&quot;</span> &lt;&lt; endl;<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">swap</span>(s2);<br><span class="hljs-built_in">printSet</span>(s1);<br><span class="hljs-built_in">printSet</span>(s2);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç»Ÿè®¡å¤§å°   â€” size</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>äº¤æ¢å®¹å™¨   â€” swap</li></ul><h4 id="3-8-4-setæ’å…¥å’Œåˆ é™¤">3.8.4 setæ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>setå®¹å™¨è¿›è¡Œæ’å…¥æ•°æ®å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>insert(elem);</code>           //åœ¨å®¹å™¨ä¸­æ’å…¥å…ƒç´ ã€‚</li><li><code>clear();</code>                    //æ¸…é™¤æ‰€æœ‰å…ƒç´ </li><li><code>erase(pos);</code>              //åˆ é™¤posè¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(beg, end);</code>    //åˆ é™¤åŒºé—´[beg,end)çš„æ‰€æœ‰å…ƒç´  ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(elem);</code>            //åˆ é™¤å®¹å™¨ä¸­å€¼ä¸ºelemçš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printSet</span><span class="hljs-params">(set&lt;<span class="hljs-type">int</span>&gt; &amp; s)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (set&lt;<span class="hljs-type">int</span>&gt;::iterator it = s.<span class="hljs-built_in">begin</span>(); it != s.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//æ’å…¥å’Œåˆ é™¤</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt; s1;<br><span class="hljs-comment">//æ’å…¥</span><br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br><span class="hljs-built_in">printSet</span>(s1);<br><br><span class="hljs-comment">//åˆ é™¤</span><br>s<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(s<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>());<br><span class="hljs-built_in">printSet</span>(s1);<br><br>s<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(<span class="hljs-number">30</span>);<br><span class="hljs-built_in">printSet</span>(s1);<br><br><span class="hljs-comment">//æ¸…ç©º</span><br><span class="hljs-comment">//s1.erase(s1.begin(), s1.end());</span><br>s<span class="hljs-number">1.</span><span class="hljs-built_in">clear</span>();<br><span class="hljs-built_in">printSet</span>(s1);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ’å…¥   â€” insert</li><li>åˆ é™¤   â€” erase</li><li>æ¸…ç©º   â€” clear</li></ul><h4 id="3-8-5-setæŸ¥æ‰¾å’Œç»Ÿè®¡">3.8.5 setæŸ¥æ‰¾å’Œç»Ÿè®¡</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹setå®¹å™¨è¿›è¡ŒæŸ¥æ‰¾æ•°æ®ä»¥åŠç»Ÿè®¡æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>find(key);</code>                  //æŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨,è‹¥å­˜åœ¨ï¼Œè¿”å›è¯¥é”®çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼›è‹¥ä¸å­˜åœ¨ï¼Œè¿”å›set.end();</li><li><code>count(key);</code>                //ç»Ÿè®¡keyçš„å…ƒç´ ä¸ªæ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><br><span class="hljs-comment">//æŸ¥æ‰¾å’Œç»Ÿè®¡</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt; s1;<br><span class="hljs-comment">//æ’å…¥</span><br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br><br><span class="hljs-comment">//æŸ¥æ‰¾</span><br>set&lt;<span class="hljs-type">int</span>&gt;::iterator pos = s<span class="hljs-number">1.f</span>ind(<span class="hljs-number">30</span>);<br><br><span class="hljs-keyword">if</span> (pos != s<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰¾åˆ°äº†å…ƒç´  ï¼š &quot;</span> &lt;&lt; *pos &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æœªæ‰¾åˆ°å…ƒç´ &quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//ç»Ÿè®¡</span><br><span class="hljs-type">int</span> num = s<span class="hljs-number">1.</span><span class="hljs-built_in">count</span>(<span class="hljs-number">30</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æŸ¥æ‰¾   â€”  find    ï¼ˆè¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼‰</li><li>ç»Ÿè®¡   â€”  count  ï¼ˆå¯¹äºsetï¼Œç»“æœä¸º0æˆ–è€…1ï¼‰</li></ul><h4 id="3-8-6-setå’ŒmultisetåŒºåˆ«">3.8.6 setå’ŒmultisetåŒºåˆ«</h4><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡setå’Œmultisetçš„åŒºåˆ«</li></ul><p><strong>åŒºåˆ«ï¼š</strong></p><ul><li>setä¸å¯ä»¥æ’å…¥é‡å¤æ•°æ®ï¼Œè€Œmultisetå¯ä»¥</li><li>setæ’å…¥æ•°æ®çš„åŒæ—¶ä¼šè¿”å›æ’å…¥ç»“æœï¼Œè¡¨ç¤ºæ’å…¥æ˜¯å¦æˆåŠŸ</li><li>multisetä¸ä¼šæ£€æµ‹æ•°æ®ï¼Œå› æ­¤å¯ä»¥æ’å…¥é‡å¤æ•°æ®</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><br><span class="hljs-comment">//setå’ŒmultisetåŒºåˆ«</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt; s;<br>pair&lt;set&lt;<span class="hljs-type">int</span>&gt;::iterator, <span class="hljs-type">bool</span>&gt;  ret = s.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br><span class="hljs-keyword">if</span> (ret.second) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç¬¬ä¸€æ¬¡æ’å…¥æˆåŠŸ!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç¬¬ä¸€æ¬¡æ’å…¥å¤±è´¥!&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>ret = s.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br><span class="hljs-keyword">if</span> (ret.second) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç¬¬äºŒæ¬¡æ’å…¥æˆåŠŸ!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç¬¬äºŒæ¬¡æ’å…¥å¤±è´¥!&quot;</span> &lt;&lt; endl;<br>&#125;<br>    <br><span class="hljs-comment">//multiset</span><br>multiset&lt;<span class="hljs-type">int</span>&gt; ms;<br>ms.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>ms.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br><br><span class="hljs-keyword">for</span> (multiset&lt;<span class="hljs-type">int</span>&gt;::iterator it = ms.<span class="hljs-built_in">begin</span>(); it != ms.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å¦‚æœä¸å…è®¸æ’å…¥é‡å¤æ•°æ®å¯ä»¥åˆ©ç”¨set</li><li>å¦‚æœéœ€è¦æ’å…¥é‡å¤æ•°æ®åˆ©ç”¨multiset</li></ul><h4 id="3-8-7-pairå¯¹ç»„åˆ›å»º">3.8.7 pairå¯¹ç»„åˆ›å»º</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æˆå¯¹å‡ºç°çš„æ•°æ®ï¼Œåˆ©ç”¨å¯¹ç»„å¯ä»¥è¿”å›ä¸¤ä¸ªæ•°æ®</li></ul><p><strong>ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š</strong></p><ul><li><code>pair&lt;type, type&gt; p ( value1, value2 );</code></li><li><code>pair&lt;type, type&gt; p = make_pair( value1, value2 );</code></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-comment">//å¯¹ç»„åˆ›å»º</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">pair&lt;string, <span class="hljs-type">int</span>&gt; <span class="hljs-title">p</span><span class="hljs-params">(string(<span class="hljs-string">&quot;Tom&quot;</span>), <span class="hljs-number">20</span>)</span></span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt;  p.first &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.second &lt;&lt; endl;<br><br>pair&lt;string, <span class="hljs-type">int</span>&gt; p2 = <span class="hljs-built_in">make_pair</span>(<span class="hljs-string">&quot;Jerry&quot;</span>, <span class="hljs-number">10</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p<span class="hljs-number">2.f</span>irst &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p<span class="hljs-number">2.</span>second &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥åˆ›å»ºå¯¹ç»„ï¼Œè®°ä½ä¸€ç§å³å¯</p><h4 id="3-8-8-setå®¹å™¨æ’åº">3.8.8 setå®¹å™¨æ’åº</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>setå®¹å™¨é»˜è®¤æ’åºè§„åˆ™ä¸ºä»å°åˆ°å¤§ï¼ŒæŒæ¡å¦‚ä½•æ”¹å˜æ’åºè§„åˆ™</li></ul><p>ä¸»è¦æŠ€æœ¯ç‚¹ï¼š</p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ç¤ºä¾‹ä¸€</strong>   setå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCompare</span> <br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v1, <span class="hljs-type">int</span> v2)</span> </span>&#123;<br><span class="hljs-keyword">return</span> v1 &gt; v2;<br>&#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;    <br>set&lt;<span class="hljs-type">int</span>&gt; s1;<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">50</span>);<br><br><span class="hljs-comment">//é»˜è®¤ä»å°åˆ°å¤§</span><br><span class="hljs-keyword">for</span> (set&lt;<span class="hljs-type">int</span>&gt;::iterator it = s<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(); it != s<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><br><span class="hljs-comment">//æŒ‡å®šæ’åºè§„åˆ™</span><br>set&lt;<span class="hljs-type">int</span>,MyCompare&gt; s2;<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">50</span>);<br><br><span class="hljs-keyword">for</span> (set&lt;<span class="hljs-type">int</span>, MyCompare&gt;::iterator it = s<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(); it != s<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šåˆ©ç”¨ä»¿å‡½æ•°å¯ä»¥æŒ‡å®šsetå®¹å™¨çš„æ’åºè§„åˆ™</p><p><strong>ç¤ºä¾‹äºŒ</strong> setå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br><br>string m_Name;<br><span class="hljs-type">int</span> m_Age;<br><br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">comparePerson</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> Person&amp; p1, <span class="hljs-type">const</span> Person &amp;p2)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//æŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åº  é™åº</span><br><span class="hljs-keyword">return</span> p<span class="hljs-number">1.</span>m_Age &gt; p<span class="hljs-number">2.</span>m_Age;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;Person, comparePerson&gt; s;<br><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;åˆ˜å¤‡&quot;</span>, <span class="hljs-number">23</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;å…³ç¾½&quot;</span>, <span class="hljs-number">27</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;å¼ é£&quot;</span>, <span class="hljs-number">25</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;èµµäº‘&quot;</span>, <span class="hljs-number">21</span>)</span></span>;<br><br>s.<span class="hljs-built_in">insert</span>(p1);<br>s.<span class="hljs-built_in">insert</span>(p2);<br>s.<span class="hljs-built_in">insert</span>(p3);<br>s.<span class="hljs-built_in">insert</span>(p4);<br><br><span class="hljs-keyword">for</span> (set&lt;Person, comparePerson&gt;::iterator it = s.<span class="hljs-built_in">begin</span>(); it != s.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œsetå¿…é¡»æŒ‡å®šæ’åºè§„åˆ™æ‰å¯ä»¥æ’å…¥æ•°æ®</p><h3 id="3-9-map-multimapå®¹å™¨">3.9 map/ multimapå®¹å™¨</h3><h4 id="3-9-1-mapåŸºæœ¬æ¦‚å¿µ">3.9.1 mapåŸºæœ¬æ¦‚å¿µ</h4><p><strong>ç®€ä»‹ï¼š</strong></p><ul><li>mapä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯pair</li><li>pairä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºkeyï¼ˆé”®å€¼ï¼‰ï¼Œèµ·åˆ°ç´¢å¼•ä½œç”¨ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¸ºvalueï¼ˆå®å€¼ï¼‰</li><li>æ‰€æœ‰å…ƒç´ éƒ½ä¼šæ ¹æ®å…ƒç´ çš„é”®å€¼è‡ªåŠ¨æ’åº</li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>map/multimapå±äº<strong>å…³è”å¼å®¹å™¨</strong>ï¼Œåº•å±‚ç»“æ„æ˜¯ç”¨äºŒå‰æ ‘å®ç°ã€‚</li></ul><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>å¯ä»¥æ ¹æ®keyå€¼å¿«é€Ÿæ‰¾åˆ°valueå€¼</li></ul><p>mapå’Œmultimap<strong>åŒºåˆ«</strong>ï¼š</p><ul><li>mapä¸å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤keyå€¼å…ƒç´ </li><li>multimapå…è®¸å®¹å™¨ä¸­æœ‰é‡å¤keyå€¼å…ƒç´ </li></ul><h4 id="3-9-2-mapæ„é€ å’Œèµ‹å€¼">3.9.2  mapæ„é€ å’Œèµ‹å€¼</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹mapå®¹å™¨è¿›è¡Œæ„é€ å’Œèµ‹å€¼æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><p><strong>æ„é€ ï¼š</strong></p><ul><li><code>map&lt;T1, T2&gt; mp;</code>                     //mapé»˜è®¤æ„é€ å‡½æ•°:</li><li><code>map(const map &amp;mp);</code>             //æ‹·è´æ„é€ å‡½æ•°</li></ul><p><strong>èµ‹å€¼ï¼š</strong></p><ul><li><code>map&amp; operator=(const map &amp;mp);</code>    //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printMap</span><span class="hljs-params">(map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&amp;m)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;::iterator it = m.<span class="hljs-built_in">begin</span>(); it != m.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="hljs-string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;m; <span class="hljs-comment">//é»˜è®¤æ„é€ </span><br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br><span class="hljs-built_in">printMap</span>(m);<br><br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;<span class="hljs-built_in">m2</span>(m); <span class="hljs-comment">//æ‹·è´æ„é€ </span><br><span class="hljs-built_in">printMap</span>(m2);<br><br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m3;<br>m3 = m2; <span class="hljs-comment">//èµ‹å€¼</span><br><span class="hljs-built_in">printMap</span>(m3);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šmapä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æˆå¯¹å‡ºç°ï¼Œæ’å…¥æ•°æ®æ—¶å€™è¦ä½¿ç”¨å¯¹ç»„</p><h4 id="3-9-3-mapå¤§å°å’Œäº¤æ¢">3.9.3 mapå¤§å°å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡mapå®¹å™¨å¤§å°ä»¥åŠäº¤æ¢mapå®¹å™¨</li></ul><p>å‡½æ•°åŸå‹ï¼š</p><ul><li><code>size();</code>          //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°ç›®</li><li><code>empty();</code>        //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</li><li><code>swap(st);</code>      //äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printMap</span><span class="hljs-params">(map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&amp;m)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;::iterator it = m.<span class="hljs-built_in">begin</span>(); it != m.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="hljs-string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m;<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br><br><span class="hljs-keyword">if</span> (m.<span class="hljs-built_in">empty</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;mä¸ºç©º&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;mä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;mçš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; m.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><br><span class="hljs-comment">//äº¤æ¢</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m;<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br><br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m2;<br>m<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">4</span>, <span class="hljs-number">100</span>));<br>m<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">5</span>, <span class="hljs-number">200</span>));<br>m<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">6</span>, <span class="hljs-number">300</span>));<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äº¤æ¢å‰&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">printMap</span>(m);<br><span class="hljs-built_in">printMap</span>(m2);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äº¤æ¢å&quot;</span> &lt;&lt; endl;<br>m.<span class="hljs-built_in">swap</span>(m2);<br><span class="hljs-built_in">printMap</span>(m);<br><span class="hljs-built_in">printMap</span>(m2);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç»Ÿè®¡å¤§å°   â€” size</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>äº¤æ¢å®¹å™¨   â€” swap</li></ul><h4 id="3-9-4-mapæ’å…¥å’Œåˆ é™¤">3.9.4 mapæ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>mapå®¹å™¨è¿›è¡Œæ’å…¥æ•°æ®å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>insert(elem);</code>           //åœ¨å®¹å™¨ä¸­æ’å…¥å…ƒç´ ã€‚</li><li><code>clear();</code>                    //æ¸…é™¤æ‰€æœ‰å…ƒç´ </li><li><code>erase(pos);</code>              //åˆ é™¤posè¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(beg, end);</code>    //åˆ é™¤åŒºé—´[beg,end)çš„æ‰€æœ‰å…ƒç´  ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(key);</code>            //åˆ é™¤å®¹å™¨ä¸­å€¼ä¸ºkeyçš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printMap</span><span class="hljs-params">(map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&amp;m)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;::iterator it = m.<span class="hljs-built_in">begin</span>(); it != m.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="hljs-string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//æ’å…¥</span><br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; m;<br><span class="hljs-comment">//ç¬¬ä¸€ç§æ’å…¥æ–¹å¼</span><br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br><span class="hljs-comment">//ç¬¬äºŒç§æ’å…¥æ–¹å¼</span><br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br><span class="hljs-comment">//ç¬¬ä¸‰ç§æ’å…¥æ–¹å¼</span><br>m.<span class="hljs-built_in">insert</span>(map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;::<span class="hljs-built_in">value_type</span>(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br><span class="hljs-comment">//ç¬¬å››ç§æ’å…¥æ–¹å¼</span><br>m[<span class="hljs-number">4</span>] = <span class="hljs-number">40</span>; <br><span class="hljs-built_in">printMap</span>(m);<br><br><span class="hljs-comment">//åˆ é™¤</span><br>m.<span class="hljs-built_in">erase</span>(m.<span class="hljs-built_in">begin</span>());<br><span class="hljs-built_in">printMap</span>(m);<br><br>m.<span class="hljs-built_in">erase</span>(<span class="hljs-number">3</span>);<br><span class="hljs-built_in">printMap</span>(m);<br><br><span class="hljs-comment">//æ¸…ç©º</span><br>m.<span class="hljs-built_in">erase</span>(m.<span class="hljs-built_in">begin</span>(),m.<span class="hljs-built_in">end</span>());<br>m.<span class="hljs-built_in">clear</span>();<br><span class="hljs-built_in">printMap</span>(m);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>mapæ’å…¥æ–¹å¼å¾ˆå¤šï¼Œè®°ä½å…¶ä¸€å³å¯</li></ul><ul><li>æ’å…¥   â€” insert</li><li>åˆ é™¤   â€” erase</li><li>æ¸…ç©º   â€” clear</li></ul><h4 id="3-9-5-mapæŸ¥æ‰¾å’Œç»Ÿè®¡">3.9.5 mapæŸ¥æ‰¾å’Œç»Ÿè®¡</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹mapå®¹å™¨è¿›è¡ŒæŸ¥æ‰¾æ•°æ®ä»¥åŠç»Ÿè®¡æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>find(key);</code>                  //æŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨,è‹¥å­˜åœ¨ï¼Œè¿”å›è¯¥é”®çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼›è‹¥ä¸å­˜åœ¨ï¼Œè¿”å›set.end();</li><li><code>count(key);</code>                //ç»Ÿè®¡keyçš„å…ƒç´ ä¸ªæ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><br><span class="hljs-comment">//æŸ¥æ‰¾å’Œç»Ÿè®¡</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m; <br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br><br><span class="hljs-comment">//æŸ¥æ‰¾</span><br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;::iterator pos = m.<span class="hljs-built_in">find</span>(<span class="hljs-number">3</span>);<br><br><span class="hljs-keyword">if</span> (pos != m.<span class="hljs-built_in">end</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰¾åˆ°äº†å…ƒç´  key = &quot;</span> &lt;&lt; (*pos).first &lt;&lt; <span class="hljs-string">&quot; value = &quot;</span> &lt;&lt; (*pos).second &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æœªæ‰¾åˆ°å…ƒç´ &quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//ç»Ÿè®¡</span><br><span class="hljs-type">int</span> num = m.<span class="hljs-built_in">count</span>(<span class="hljs-number">3</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æŸ¥æ‰¾   â€”  find    ï¼ˆè¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼‰</li><li>ç»Ÿè®¡   â€”  count  ï¼ˆå¯¹äºmapï¼Œç»“æœä¸º0æˆ–è€…1ï¼‰</li></ul><h4 id="3-9-6-mapå®¹å™¨æ’åº">3.9.6 mapå®¹å™¨æ’åº</h4><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>mapå®¹å™¨é»˜è®¤æ’åºè§„åˆ™ä¸º æŒ‰ç…§keyå€¼è¿›è¡Œ ä»å°åˆ°å¤§æ’åºï¼ŒæŒæ¡å¦‚ä½•æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ä¸»è¦æŠ€æœ¯ç‚¹:</strong></p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCompare</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v1, <span class="hljs-type">int</span> v2)</span> </span>&#123;<br><span class="hljs-keyword">return</span> v1 &gt; v2;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//é»˜è®¤ä»å°åˆ°å¤§æ’åº</span><br><span class="hljs-comment">//åˆ©ç”¨ä»¿å‡½æ•°å®ç°ä»å¤§åˆ°å°æ’åº</span><br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>, MyCompare&gt; m;<br><br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">4</span>, <span class="hljs-number">40</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">5</span>, <span class="hljs-number">50</span>));<br><br><span class="hljs-keyword">for</span> (map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>, MyCompare&gt;::iterator it = m.<span class="hljs-built_in">begin</span>(); it != m.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;key:&quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="hljs-string">&quot; value:&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°å¯ä»¥æŒ‡å®šmapå®¹å™¨çš„æ’åºè§„åˆ™</li><li>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œmapå¿…é¡»è¦æŒ‡å®šæ’åºè§„åˆ™,åŒsetå®¹å™¨</li></ul><h3 id="3-10-æ¡ˆä¾‹-å‘˜å·¥åˆ†ç»„">3.10 æ¡ˆä¾‹-å‘˜å·¥åˆ†ç»„</h3><h4 id="3-10-1-æ¡ˆä¾‹æè¿°">3.10.1 æ¡ˆä¾‹æè¿°</h4><ul><li>å…¬å¸ä»Šå¤©æ‹›è˜äº†10ä¸ªå‘˜å·¥ï¼ˆABCDEFGHIJï¼‰ï¼Œ10åå‘˜å·¥è¿›å…¥å…¬å¸ä¹‹åï¼Œéœ€è¦æŒ‡æ´¾å‘˜å·¥åœ¨é‚£ä¸ªéƒ¨é—¨å·¥ä½œ</li><li>å‘˜å·¥ä¿¡æ¯æœ‰: å§“å  å·¥èµ„ç»„æˆï¼›éƒ¨é—¨åˆ†ä¸ºï¼šç­–åˆ’ã€ç¾æœ¯ã€ç ”å‘</li><li>éšæœºç»™10åå‘˜å·¥åˆ†é…éƒ¨é—¨å’Œå·¥èµ„</li><li>é€šè¿‡multimapè¿›è¡Œä¿¡æ¯çš„æ’å…¥  key(éƒ¨é—¨ç¼–å·) value(å‘˜å·¥)</li><li>åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</li></ul><h4 id="3-10-2-å®ç°æ­¥éª¤">3.10.2 å®ç°æ­¥éª¤</h4><ol><li>åˆ›å»º10åå‘˜å·¥ï¼Œæ”¾åˆ°vectorä¸­</li><li>éå†vectorå®¹å™¨ï¼Œå–å‡ºæ¯ä¸ªå‘˜å·¥ï¼Œè¿›è¡Œéšæœºåˆ†ç»„</li><li>åˆ†ç»„åï¼Œå°†å‘˜å·¥éƒ¨é—¨ç¼–å·ä½œä¸ºkeyï¼Œå…·ä½“å‘˜å·¥ä½œä¸ºvalueï¼Œæ”¾å…¥åˆ°multimapå®¹å™¨ä¸­</li><li>åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</li></ol><p><strong>æ¡ˆä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">- å…¬å¸ä»Šå¤©æ‹›è˜äº†10ä¸ªå‘˜å·¥ï¼ˆABCDEFGHIJï¼‰ï¼Œ10åå‘˜å·¥è¿›å…¥å…¬å¸ä¹‹åï¼Œéœ€è¦æŒ‡æ´¾å‘˜å·¥åœ¨é‚£ä¸ªéƒ¨é—¨å·¥ä½œ</span><br><span class="hljs-comment">- å‘˜å·¥ä¿¡æ¯æœ‰: å§“å  å·¥èµ„ç»„æˆï¼›éƒ¨é—¨åˆ†ä¸ºï¼šç­–åˆ’ã€ç¾æœ¯ã€ç ”å‘</span><br><span class="hljs-comment">- éšæœºç»™10åå‘˜å·¥åˆ†é…éƒ¨é—¨å’Œå·¥èµ„</span><br><span class="hljs-comment">- é€šè¿‡multimapè¿›è¡Œä¿¡æ¯çš„æ’å…¥  key(éƒ¨é—¨ç¼–å·) value(å‘˜å·¥)</span><br><span class="hljs-comment">- åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> CEHUA  0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MEISHU 1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> YANFA  2</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Worker</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>string m_Name;<br><span class="hljs-type">int</span> m_Salary;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">createWorker</span><span class="hljs-params">(vector&lt;Worker&gt;&amp;v)</span></span><br><span class="hljs-function"></span>&#123;<br>string nameSeed = <span class="hljs-string">&quot;ABCDEFGHIJ&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>Worker worker;<br>worker.m_Name = <span class="hljs-string">&quot;å‘˜å·¥&quot;</span>;<br>worker.m_Name += nameSeed[i];<br><br>worker.m_Salary = <span class="hljs-built_in">rand</span>() % <span class="hljs-number">10000</span> + <span class="hljs-number">10000</span>; <span class="hljs-comment">// 10000 ~ 19999</span><br><span class="hljs-comment">//å°†å‘˜å·¥æ”¾å…¥åˆ°å®¹å™¨ä¸­</span><br>v.<span class="hljs-built_in">push_back</span>(worker);<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//å‘˜å·¥åˆ†ç»„</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setGroup</span><span class="hljs-params">(vector&lt;Worker&gt;&amp;v,multimap&lt;<span class="hljs-type">int</span>,Worker&gt;&amp;m)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (vector&lt;Worker&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br><span class="hljs-comment">//äº§ç”Ÿéšæœºéƒ¨é—¨ç¼–å·</span><br><span class="hljs-type">int</span> deptId = <span class="hljs-built_in">rand</span>() % <span class="hljs-number">3</span>; <span class="hljs-comment">// 0 1 2 </span><br><br><span class="hljs-comment">//å°†å‘˜å·¥æ’å…¥åˆ°åˆ†ç»„ä¸­</span><br><span class="hljs-comment">//keyéƒ¨é—¨ç¼–å·ï¼Œvalueå…·ä½“å‘˜å·¥</span><br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(deptId, *it));<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showWorkerByGourp</span><span class="hljs-params">(multimap&lt;<span class="hljs-type">int</span>,Worker&gt;&amp;m)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">// 0  A  B  C   1  D  E   2  F G ...</span><br>cout &lt;&lt; <span class="hljs-string">&quot;ç­–åˆ’éƒ¨é—¨ï¼š&quot;</span> &lt;&lt; endl;<br><br>multimap&lt;<span class="hljs-type">int</span>,Worker&gt;::iterator pos = m.<span class="hljs-built_in">find</span>(CEHUA);<br><span class="hljs-type">int</span> count = m.<span class="hljs-built_in">count</span>(CEHUA); <span class="hljs-comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span><br><span class="hljs-type">int</span> index = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (; pos != m.<span class="hljs-built_in">end</span>() &amp;&amp; index &lt; count; pos++ , index++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="hljs-string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;<br>&#125;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;----------------------&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç¾æœ¯éƒ¨é—¨ï¼š &quot;</span> &lt;&lt; endl;<br>pos = m.<span class="hljs-built_in">find</span>(MEISHU);<br>count = m.<span class="hljs-built_in">count</span>(MEISHU); <span class="hljs-comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span><br>index = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (; pos != m.<span class="hljs-built_in">end</span>() &amp;&amp; index &lt; count; pos++, index++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="hljs-string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;<br>&#125;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;----------------------&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç ”å‘éƒ¨é—¨ï¼š &quot;</span> &lt;&lt; endl;<br>pos = m.<span class="hljs-built_in">find</span>(YANFA);<br>count = m.<span class="hljs-built_in">count</span>(YANFA); <span class="hljs-comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span><br>index = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (; pos != m.<span class="hljs-built_in">end</span>() &amp;&amp; index &lt; count; pos++, index++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="hljs-string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;<br>&#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">srand</span>((<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br><br><span class="hljs-comment">//1ã€åˆ›å»ºå‘˜å·¥</span><br>vector&lt;Worker&gt;vWorker;<br><span class="hljs-built_in">createWorker</span>(vWorker);<br><br><span class="hljs-comment">//2ã€å‘˜å·¥åˆ†ç»„</span><br>multimap&lt;<span class="hljs-type">int</span>, Worker&gt;mWorker;<br><span class="hljs-built_in">setGroup</span>(vWorker, mWorker);<br><br><br><span class="hljs-comment">//3ã€åˆ†ç»„æ˜¾ç¤ºå‘˜å·¥</span><br><span class="hljs-built_in">showWorkerByGourp</span>(mWorker);<br><br><span class="hljs-comment">////æµ‹è¯•</span><br><span class="hljs-comment">//for (vector&lt;Worker&gt;::iterator it = vWorker.begin(); it != vWorker.end(); it++)</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; it-&gt;m_Name &lt;&lt; &quot; å·¥èµ„ï¼š &quot; &lt;&lt; it-&gt;m_Salary &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å½“æ•°æ®ä»¥é”®å€¼å¯¹å½¢å¼å­˜åœ¨ï¼Œå¯ä»¥è€ƒè™‘ç”¨map æˆ– multimap</li></ul><h2 id="4-STL-å‡½æ•°å¯¹è±¡">4 STL- å‡½æ•°å¯¹è±¡</h2><h3 id="4-1-å‡½æ•°å¯¹è±¡">4.1 å‡½æ•°å¯¹è±¡</h3><h4 id="4-1-1-å‡½æ•°å¯¹è±¡æ¦‚å¿µ">4.1.1 å‡½æ•°å¯¹è±¡æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>é‡è½½<strong>å‡½æ•°è°ƒç”¨æ“ä½œç¬¦</strong>çš„ç±»ï¼Œå…¶å¯¹è±¡å¸¸ç§°ä¸º<strong>å‡½æ•°å¯¹è±¡</strong></li><li><strong>å‡½æ•°å¯¹è±¡</strong>ä½¿ç”¨é‡è½½çš„()æ—¶ï¼Œè¡Œä¸ºç±»ä¼¼å‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå«<strong>ä»¿å‡½æ•°</strong></li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><p>å‡½æ•°å¯¹è±¡(ä»¿å‡½æ•°)æ˜¯ä¸€ä¸ª<strong>ç±»</strong>ï¼Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°</p><h4 id="4-1-2-å‡½æ•°å¯¹è±¡ä½¿ç”¨">4.1.2  å‡½æ•°å¯¹è±¡ä½¿ç”¨</h4><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>å‡½æ•°å¯¹è±¡åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨, å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥æœ‰è¿”å›å€¼</li><li>å‡½æ•°å¯¹è±¡è¶…å‡ºæ™®é€šå‡½æ•°çš„æ¦‚å¿µï¼Œå‡½æ•°å¯¹è±¡å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€</li><li>å‡½æ•°å¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’</li></ul><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-comment">//1ã€å‡½æ•°å¯¹è±¡åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨, å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥æœ‰è¿”å›å€¼</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdd</span><br>&#123;<br><span class="hljs-keyword">public</span> :<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v1,<span class="hljs-type">int</span> v2)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> v1 + v2;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>MyAdd myAdd;<br>cout &lt;&lt; <span class="hljs-built_in">myAdd</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>) &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//2ã€å‡½æ•°å¯¹è±¡å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">MyPrint</span>()<br>&#123;<br>count = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(string test)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; test &lt;&lt; endl;<br>count++; <span class="hljs-comment">//ç»Ÿè®¡ä½¿ç”¨æ¬¡æ•°</span><br>&#125;<br><br><span class="hljs-type">int</span> count; <span class="hljs-comment">//å†…éƒ¨è‡ªå·±çš„çŠ¶æ€</span><br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>MyPrint myPrint;<br><span class="hljs-built_in">myPrint</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br><span class="hljs-built_in">myPrint</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br><span class="hljs-built_in">myPrint</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;myPrintè°ƒç”¨æ¬¡æ•°ä¸ºï¼š &quot;</span> &lt;&lt; myPrint.count &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//3ã€å‡½æ•°å¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doPrint</span><span class="hljs-params">(MyPrint &amp;mp , string test)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">mp</span>(test);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>MyPrint myPrint;<br><span class="hljs-built_in">doPrint</span>(myPrint, <span class="hljs-string">&quot;Hello C++&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><span class="hljs-comment">//test02();</span><br><span class="hljs-built_in">test03</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ä»¿å‡½æ•°å†™æ³•éå¸¸çµæ´»ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ã€‚</li></ul><h3 id="4-2-è°“è¯">4.2  è°“è¯</h3><h4 id="4-2-1-è°“è¯æ¦‚å¿µ">4.2.1 è°“è¯æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>è¿”å›boolç±»å‹çš„ä»¿å‡½æ•°ç§°ä¸º<strong>è°“è¯</strong></li><li>å¦‚æœoperator()æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå«åšä¸€å…ƒè°“è¯</li><li>å¦‚æœoperator()æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå«åšäºŒå…ƒè°“è¯</li></ul><h4 id="4-2-2-ä¸€å…ƒè°“è¯">4.2.2 ä¸€å…ƒè°“è¯</h4><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-comment">//1.ä¸€å…ƒè°“è¯</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">GreaterFive</span>&#123;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> </span>&#123;<br><span class="hljs-keyword">return</span> val &gt; <span class="hljs-number">5</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v.<span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = <span class="hljs-built_in">find_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">GreaterFive</span>());<br><span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>()) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ²¡æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰¾åˆ°:&quot;</span> &lt;&lt; *it &lt;&lt; endl;<br>&#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå‚æ•°åªæœ‰ä¸€ä¸ªçš„è°“è¯ï¼Œç§°ä¸ºä¸€å…ƒè°“è¯</p><h4 id="4-2-3-äºŒå…ƒè°“è¯">4.2.3 äºŒå…ƒè°“è¯</h4><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-comment">//äºŒå…ƒè°“è¯</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCompare</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> num1 &gt; num2;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br><br><span class="hljs-comment">//é»˜è®¤ä»å°åˆ°å¤§</span><br><span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;----------------------------&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-comment">//ä½¿ç”¨å‡½æ•°å¯¹è±¡æ”¹å˜ç®—æ³•ç­–ç•¥ï¼Œæ’åºä»å¤§åˆ°å°</span><br><span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">MyCompare</span>());<br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå‚æ•°åªæœ‰ä¸¤ä¸ªçš„è°“è¯ï¼Œç§°ä¸ºäºŒå…ƒè°“è¯</p><h3 id="4-3-å†…å»ºå‡½æ•°å¯¹è±¡">4.3 å†…å»ºå‡½æ•°å¯¹è±¡</h3><h4 id="4-3-1-å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰">4.3.1 å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>STLå†…å»ºäº†ä¸€äº›å‡½æ•°å¯¹è±¡</li></ul><p><strong>åˆ†ç±»:</strong></p><ul><li><p>ç®—æœ¯ä»¿å‡½æ•°</p></li><li><p>å…³ç³»ä»¿å‡½æ•°</p></li><li><p>é€»è¾‘ä»¿å‡½æ•°</p></li></ul><p><strong>ç”¨æ³•ï¼š</strong></p><ul><li>è¿™äº›ä»¿å‡½æ•°æ‰€äº§ç”Ÿçš„å¯¹è±¡ï¼Œç”¨æ³•å’Œä¸€èˆ¬å‡½æ•°å®Œå…¨ç›¸åŒ</li><li>ä½¿ç”¨å†…å»ºå‡½æ•°å¯¹è±¡ï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶ <code>#include&lt;functional&gt;</code></li></ul><h4 id="4-3-2-ç®—æœ¯ä»¿å‡½æ•°">4.3.2 ç®—æœ¯ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°å››åˆ™è¿ç®—</li><li>å…¶ä¸­negateæ˜¯ä¸€å…ƒè¿ç®—ï¼Œå…¶ä»–éƒ½æ˜¯äºŒå…ƒè¿ç®—</li></ul><p><strong>ä»¿å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; T plus&lt;T&gt;</code>                //åŠ æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T minus&lt;T&gt;</code>              //å‡æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T multiplies&lt;T&gt;</code>    //ä¹˜æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T divides&lt;T&gt;</code>         //é™¤æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T modulus&lt;T&gt;</code>         //å–æ¨¡ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T negate&lt;T&gt;</code>           //å–åä»¿å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><span class="hljs-comment">//negate</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>negate&lt;<span class="hljs-type">int</span>&gt; n;<br>cout &lt;&lt; <span class="hljs-built_in">n</span>(<span class="hljs-number">50</span>) &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//plus</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>plus&lt;<span class="hljs-type">int</span>&gt; p;<br>cout &lt;&lt; <span class="hljs-built_in">p</span>(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>) &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä½¿ç”¨å†…å»ºå‡½æ•°å¯¹è±¡æ—¶ï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶ <code>#include &lt;functional&gt;</code></p><h4 id="4-3-3-å…³ç³»ä»¿å‡½æ•°">4.3.3 å…³ç³»ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°å…³ç³»å¯¹æ¯”</li></ul><p><strong>ä»¿å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; bool equal_to&lt;T&gt;</code>                    //ç­‰äº</li><li><code>template&lt;class T&gt; bool not_equal_to&lt;T&gt;</code>            //ä¸ç­‰äº</li><li><code>template&lt;class T&gt; bool greater&lt;T&gt;</code>                      //å¤§äº</li><li><code>template&lt;class T&gt; bool greater_equal&lt;T&gt;</code>          //å¤§äºç­‰äº</li><li><code>template&lt;class T&gt; bool less&lt;T&gt;</code>                           //å°äº</li><li><code>template&lt;class T&gt; bool less_equal&lt;T&gt;</code>               //å°äºç­‰äº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCompare</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v1,<span class="hljs-type">int</span> v2)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> v1 &gt; v2;<br>&#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br><br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><br><span class="hljs-comment">//è‡ªå·±å®ç°ä»¿å‡½æ•°</span><br><span class="hljs-comment">//sort(v.begin(), v.end(), MyCompare());</span><br><span class="hljs-comment">//STLå†…å»ºä»¿å‡½æ•°  å¤§äºä»¿å‡½æ•°</span><br><span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;());<br><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++) &#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå…³ç³»ä»¿å‡½æ•°ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯greater&lt;&gt;å¤§äº</p><h4 id="4-3-4-é€»è¾‘ä»¿å‡½æ•°">4.3.4 é€»è¾‘ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°é€»è¾‘è¿ç®—</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; bool logical_and&lt;T&gt;</code>              //é€»è¾‘ä¸</li><li><code>template&lt;class T&gt; bool logical_or&lt;T&gt;</code>                //é€»è¾‘æˆ–</li><li><code>template&lt;class T&gt; bool logical_not&lt;T&gt;</code>              //é€»è¾‘é</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">bool</span>&gt; v;<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">true</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">false</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">true</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">false</span>);<br><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">bool</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>();it!= v.<span class="hljs-built_in">end</span>();it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><br><span class="hljs-comment">//é€»è¾‘é  å°†vå®¹å™¨æ¬è¿åˆ°v2ä¸­ï¼Œå¹¶æ‰§è¡Œé€»è¾‘éè¿ç®—</span><br>vector&lt;<span class="hljs-type">bool</span>&gt; v2;<br>v<span class="hljs-number">2.</span><span class="hljs-built_in">resize</span>(v.<span class="hljs-built_in">size</span>());<br><span class="hljs-built_in">transform</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(),  v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), <span class="hljs-built_in">logical_not</span>&lt;<span class="hljs-type">bool</span>&gt;());<br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">bool</span>&gt;::iterator it = v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(); it != v<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šé€»è¾‘ä»¿å‡½æ•°å®é™…åº”ç”¨è¾ƒå°‘ï¼Œäº†è§£å³å¯</p><h2 id="5-STL-å¸¸ç”¨ç®—æ³•">5 STL- å¸¸ç”¨ç®—æ³•</h2><p><strong>æ¦‚è¿°</strong>:</p><ul><li><p>ç®—æ³•ä¸»è¦æ˜¯ç”±å¤´æ–‡ä»¶<code>&lt;algorithm&gt;</code> <code>&lt;functional&gt;</code> <code>&lt;numeric&gt;</code>ç»„æˆã€‚</p></li><li><p><code>&lt;algorithm&gt;</code>æ˜¯æ‰€æœ‰STLå¤´æ–‡ä»¶ä¸­æœ€å¤§çš„ä¸€ä¸ªï¼ŒèŒƒå›´æ¶‰åŠåˆ°æ¯”è¾ƒã€ äº¤æ¢ã€æŸ¥æ‰¾ã€éå†æ“ä½œã€å¤åˆ¶ã€ä¿®æ”¹ç­‰ç­‰</p></li><li><p><code>&lt;numeric&gt;</code>ä½“ç§¯å¾ˆå°ï¼ŒåªåŒ…æ‹¬å‡ ä¸ªåœ¨åºåˆ—ä¸Šé¢è¿›è¡Œç®€å•æ•°å­¦è¿ç®—çš„æ¨¡æ¿å‡½æ•°</p></li><li><p><code>&lt;functional&gt;</code>å®šä¹‰äº†ä¸€äº›æ¨¡æ¿ç±»,ç”¨ä»¥å£°æ˜å‡½æ•°å¯¹è±¡ã€‚</p></li></ul><h3 id="5-1-å¸¸ç”¨éå†ç®—æ³•">5.1 å¸¸ç”¨éå†ç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„éå†ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>for_each</code>     //éå†å®¹å™¨</li><li><code>transform</code>   //æ¬è¿å®¹å™¨åˆ°å¦ä¸€ä¸ªå®¹å™¨ä¸­</li></ul><h4 id="5-1-1-for-each">5.1.1 for_each</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°éå†å®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>for_each(iterator beg, iterator end, _func);  </code></p><p>// éå†ç®—æ³• éå†å®¹å™¨å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _func å‡½æ•°æˆ–è€…å‡½æ•°å¯¹è±¡</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-comment">//æ™®é€šå‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print01</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> </span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><span class="hljs-comment">//å‡½æ•°å¯¹è±¡</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">print02</span> <br>&#123;<br> <span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> </span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-comment">//for_eachç®—æ³•åŸºæœ¬ç”¨æ³•</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) <br>&#123;<br>v.<span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><br><span class="hljs-comment">//éå†ç®—æ³•</span><br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), print01);<br>cout &lt;&lt; endl;<br><br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**for_eachåœ¨å®é™…å¼€å‘ä¸­æ˜¯æœ€å¸¸ç”¨éå†ç®—æ³•ï¼Œéœ€è¦ç†Ÿç»ƒæŒæ¡</p><h4 id="5-1-2-transform">5.1.2 transform</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ¬è¿å®¹å™¨åˆ°å¦ä¸€ä¸ªå®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>transform(iterator beg1, iterator end1, iterator beg2, _func);</code></li></ul><p>//beg1 æºå®¹å™¨å¼€å§‹è¿­ä»£å™¨</p><p>//end1 æºå®¹å™¨ç»“æŸè¿­ä»£å™¨</p><p>//beg2 ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p><p>//_func å‡½æ•°æˆ–è€…å‡½æ•°å¯¹è±¡</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-comment">//å¸¸ç”¨éå†ç®—æ³•  æ¬è¿ transform</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TransForm</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> val;<br>&#125;<br><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt;v;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v.<span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><br>vector&lt;<span class="hljs-type">int</span>&gt;vTarget; <span class="hljs-comment">//ç›®æ ‡å®¹å™¨</span><br><br>vTarget.<span class="hljs-built_in">resize</span>(v.<span class="hljs-built_in">size</span>()); <span class="hljs-comment">// ç›®æ ‡å®¹å™¨éœ€è¦æå‰å¼€è¾Ÿç©ºé—´</span><br><br><span class="hljs-built_in">transform</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), vTarget.<span class="hljs-built_in">begin</span>(), <span class="hljs-built_in">TransForm</span>());<br><br>for_each(vTarget.<span class="hljs-built_in">begin</span>(), vTarget.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">MyPrint</span>());<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> æ¬è¿çš„ç›®æ ‡å®¹å™¨å¿…é¡»è¦æå‰å¼€è¾Ÿç©ºé—´ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸æ¬è¿</p><h3 id="5-2-å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•">5.2 å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•</h3><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡å¸¸ç”¨çš„æŸ¥æ‰¾ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>find</code>                     //æŸ¥æ‰¾å…ƒç´ </li><li><code>find_if</code>               //æŒ‰æ¡ä»¶æŸ¥æ‰¾å…ƒç´ </li><li><code>adjacent_find</code>    //æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </li><li><code>binary_search</code>    //äºŒåˆ†æŸ¥æ‰¾æ³•</li><li><code>count</code>                   //ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li><li><code>count_if</code>             //æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><h4 id="5-2-1-find">5.2.1 find</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾æŒ‡å®šå…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šå…ƒç´ çš„è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨end()</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>find(iterator beg, iterator end, value);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value æŸ¥æ‰¾çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>v.<span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-comment">//æŸ¥æ‰¾å®¹å™¨ä¸­æ˜¯å¦æœ‰ 5 è¿™ä¸ªå…ƒç´ </span><br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = <span class="hljs-built_in">find</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">5</span>);<br><span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>()) <br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> <br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰¾åˆ°:&quot;</span> &lt;&lt; *it &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age) <br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br><span class="hljs-comment">//é‡è½½==</span><br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> Person&amp; p) <br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="hljs-keyword">this</span>-&gt;m_Age == p.m_Age) <br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span>:<br>string m_Name;<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>&#123;<br><br>vector&lt;Person&gt; v;<br><br><span class="hljs-comment">//åˆ›å»ºæ•°æ®</span><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;aaa&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;bbb&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;ccc&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;ddd&quot;</span>, <span class="hljs-number">40</span>)</span></span>;<br><br>v.<span class="hljs-built_in">push_back</span>(p1);<br>v.<span class="hljs-built_in">push_back</span>(p2);<br>v.<span class="hljs-built_in">push_back</span>(p3);<br>v.<span class="hljs-built_in">push_back</span>(p4);<br><br>vector&lt;Person&gt;::iterator it = <span class="hljs-built_in">find</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), p2);<br><span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>()) <br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> <br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰¾åˆ°å§“å:&quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„: &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š åˆ©ç”¨findå¯ä»¥åœ¨å®¹å™¨ä¸­æ‰¾æŒ‡å®šçš„å…ƒç´ ï¼Œè¿”å›å€¼æ˜¯<strong>è¿­ä»£å™¨</strong></p><h4 id="5-2-2-find-if">5.2.2 find_if</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŒ‰æ¡ä»¶æŸ¥æ‰¾å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>find_if(iterator beg, iterator end, _Pred);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _Pred å‡½æ•°æˆ–è€…è°“è¯ï¼ˆè¿”å›boolç±»å‹çš„ä»¿å‡½æ•°ï¼‰</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-comment">//å†…ç½®æ•°æ®ç±»å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GreaterFive</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> val &gt; <span class="hljs-number">5</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>v.<span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">1</span>);<br>&#125;<br><br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = <span class="hljs-built_in">find_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">GreaterFive</span>());<br><span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>()) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰¾åˆ°å¤§äº5çš„æ•°å­—:&quot;</span> &lt;&lt; *it &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br><span class="hljs-keyword">public</span>:<br>string m_Name;<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Greater20</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(Person &amp;p)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> p.m_Age &gt; <span class="hljs-number">20</span>;<br>&#125;<br><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>&#123;<br><br>vector&lt;Person&gt; v;<br><br><span class="hljs-comment">//åˆ›å»ºæ•°æ®</span><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;aaa&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;bbb&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;ccc&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;ddd&quot;</span>, <span class="hljs-number">40</span>)</span></span>;<br><br>v.<span class="hljs-built_in">push_back</span>(p1);<br>v.<span class="hljs-built_in">push_back</span>(p2);<br>v.<span class="hljs-built_in">push_back</span>(p3);<br>v.<span class="hljs-built_in">push_back</span>(p4);<br><br>vector&lt;Person&gt;::iterator it = <span class="hljs-built_in">find_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">Greater20</span>());<br><span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰¾åˆ°å§“å:&quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„: &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šfind_ifæŒ‰æ¡ä»¶æŸ¥æ‰¾ä½¿æŸ¥æ‰¾æ›´åŠ çµæ´»ï¼Œæä¾›çš„ä»¿å‡½æ•°å¯ä»¥æ”¹å˜ä¸åŒçš„ç­–ç•¥</p><h4 id="5-2-3-adjacent-find">5.2.3 adjacent_find</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>adjacent_find(iterator beg, iterator end);  </code></p><p>// æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ ,è¿”å›ç›¸é‚»å…ƒç´ çš„ç¬¬ä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">5</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);<br><br><span class="hljs-comment">//æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </span><br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = <span class="hljs-built_in">adjacent_find</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br><span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>()) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰¾ä¸åˆ°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰¾åˆ°ç›¸é‚»é‡å¤å…ƒç´ ä¸º:&quot;</span> &lt;&lt; *it &lt;&lt; endl;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šé¢è¯•é¢˜ä¸­å¦‚æœå‡ºç°æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ ï¼Œè®°å¾—ç”¨STLä¸­çš„adjacent_findç®—æ³•</p><h4 id="5-2-4-binary-search">5.2.4 binary_search</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾æŒ‡å®šå…ƒç´ æ˜¯å¦å­˜åœ¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>bool binary_search(iterator beg, iterator end, value);  </code></p><p>// æŸ¥æ‰¾æŒ‡å®šçš„å…ƒç´ ï¼ŒæŸ¥åˆ° è¿”å›true  å¦åˆ™false</p><p>// æ³¨æ„: åœ¨<strong>æ— åºåºåˆ—ä¸­ä¸å¯ç”¨</strong></p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value æŸ¥æ‰¾çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt;v;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v.<span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-comment">//äºŒåˆ†æŸ¥æ‰¾</span><br><span class="hljs-type">bool</span> ret = <span class="hljs-built_in">binary_search</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(),<span class="hljs-number">2</span>);<br><span class="hljs-keyword">if</span> (ret)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰¾åˆ°äº†&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æœªæ‰¾åˆ°&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**äºŒåˆ†æŸ¥æ‰¾æ³•æŸ¥æ‰¾æ•ˆç‡å¾ˆé«˜ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æŸ¥æ‰¾çš„å®¹å™¨ä¸­å…ƒç´ å¿…é¡»çš„æœ‰åºåºåˆ—</p><h4 id="5-2-5-count">5.2.5 count</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>count(iterator beg, iterator end, value);  </code></p><p>// ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value ç»Ÿè®¡çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-comment">//å†…ç½®æ•°æ®ç±»å‹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">5</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);<br><br><span class="hljs-type">int</span> num = <span class="hljs-built_in">count</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">4</span>);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;4çš„ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> Person &amp; p)<br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;m_Age == p.m_Age)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br>&#125;<br>string m_Name;<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;Person&gt; v;<br><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;åˆ˜å¤‡&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;å…³ç¾½&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;å¼ é£&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;èµµäº‘&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;æ›¹æ“&quot;</span>, <span class="hljs-number">25</span>)</span></span>;<br><br>v.<span class="hljs-built_in">push_back</span>(p1);<br>v.<span class="hljs-built_in">push_back</span>(p2);<br>v.<span class="hljs-built_in">push_back</span>(p3);<br>v.<span class="hljs-built_in">push_back</span>(p4);<br>v.<span class="hljs-built_in">push_back</span>(p5);<br>    <br>    <span class="hljs-function">Person <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-string">&quot;è¯¸è‘›äº®&quot;</span>,<span class="hljs-number">35</span>)</span></span>;<br><br><span class="hljs-type">int</span> num = <span class="hljs-built_in">count</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), p);<br>cout &lt;&lt; <span class="hljs-string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> ç»Ÿè®¡è‡ªå®šä¹‰æ•°æ®ç±»å‹æ—¶å€™ï¼Œéœ€è¦é…åˆé‡è½½ <code>operator==</code></p><h4 id="5-2-6-count-if">5.2.6 count_if</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>count_if(iterator beg, iterator end, _Pred);  </code></p><p>// æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _Pred è°“è¯</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Greater4</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> val &gt;= <span class="hljs-number">4</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-comment">//å†…ç½®æ•°æ®ç±»å‹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">5</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);<br><br><span class="hljs-type">int</span> num = <span class="hljs-built_in">count_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">Greater4</span>());<br><br>cout &lt;&lt; <span class="hljs-string">&quot;å¤§äº4çš„ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;<br><br>string m_Name;<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeLess35</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> Person &amp;p)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> p.m_Age &lt; <span class="hljs-number">35</span>;<br>&#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;Person&gt; v;<br><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;åˆ˜å¤‡&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;å…³ç¾½&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;å¼ é£&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;èµµäº‘&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;æ›¹æ“&quot;</span>, <span class="hljs-number">25</span>)</span></span>;<br><br>v.<span class="hljs-built_in">push_back</span>(p1);<br>v.<span class="hljs-built_in">push_back</span>(p2);<br>v.<span class="hljs-built_in">push_back</span>(p3);<br>v.<span class="hljs-built_in">push_back</span>(p4);<br>v.<span class="hljs-built_in">push_back</span>(p5);<br><br><span class="hljs-type">int</span> num = <span class="hljs-built_in">count_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">AgeLess35</span>());<br>cout &lt;&lt; <span class="hljs-string">&quot;å°äº35å²çš„ä¸ªæ•°ï¼š&quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**æŒ‰å€¼ç»Ÿè®¡ç”¨countï¼ŒæŒ‰æ¡ä»¶ç»Ÿè®¡ç”¨count_if</p><h3 id="5-3-å¸¸ç”¨æ’åºç®—æ³•">5.3 å¸¸ç”¨æ’åºç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„æ’åºç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>sort</code>             //å¯¹å®¹å™¨å†…å…ƒç´ è¿›è¡Œæ’åº</li><li><code>random_shuffle</code>   //æ´—ç‰Œ   æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</li><li><code>merge </code>           // å®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</li><li><code>reverse</code>       // åè½¬æŒ‡å®šèŒƒå›´çš„å…ƒç´ </li></ul><h4 id="5-3-1-sort">5.3.1 sort</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹å®¹å™¨å†…å…ƒç´ è¿›è¡Œæ’åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>sort(iterator beg, iterator end, _Pred);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>//  beg    å¼€å§‹è¿­ä»£å™¨</p><p>//  end    ç»“æŸè¿­ä»£å™¨</p><p>// _Pred  è°“è¯</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myPrint</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br><span class="hljs-comment">//sorté»˜è®¤ä»å°åˆ°å¤§æ’åº</span><br><span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), myPrint);<br>cout &lt;&lt; endl;<br><br><span class="hljs-comment">//ä»å¤§åˆ°å°æ’åº</span><br><span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;());<br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), myPrint);<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**sortå±äºå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ç®—æ³•ä¹‹ä¸€ï¼Œéœ€ç†Ÿç»ƒæŒæ¡</p><h4 id="5-3-2-random-shuffle">5.3.2 random_shuffle</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ´—ç‰Œ   æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>random_shuffle(iterator beg, iterator end);  </code></p><p>// æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">srand</span>((<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span> ; i &lt; <span class="hljs-number">10</span>;i++)<br>&#123;<br>v.<span class="hljs-built_in">push_back</span>(i);<br>&#125;<br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br><br><span class="hljs-comment">//æ‰“ä¹±é¡ºåº</span><br><span class="hljs-built_in">random_shuffle</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**random_shuffleæ´—ç‰Œç®—æ³•æ¯”è¾ƒå®ç”¨ï¼Œä½¿ç”¨æ—¶è®°å¾—åŠ éšæœºæ•°ç§å­</p><h4 id="5-3-3-merge">5.3.3 merge</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ä¸¤ä¸ªå®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>merge(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// å®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</p><p>// æ³¨æ„: ä¸¤ä¸ªå®¹å™¨å¿…é¡»æ˜¯<strong>æœ‰åºçš„</strong></p><p>// beg1   å®¹å™¨1å¼€å§‹è¿­ä»£å™¨// end1   å®¹å™¨1ç»“æŸè¿­ä»£å™¨// beg2   å®¹å™¨2å¼€å§‹è¿­ä»£å™¨// end2   å®¹å™¨2ç»“æŸè¿­ä»£å™¨// dest    ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v1;<br>vector&lt;<span class="hljs-type">int</span>&gt; v2;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span> ; i++) <br>    &#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>v<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">1</span>);<br>&#125;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; vtarget;<br><span class="hljs-comment">//ç›®æ ‡å®¹å™¨éœ€è¦æå‰å¼€è¾Ÿç©ºé—´</span><br>vtarget.<span class="hljs-built_in">resize</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() + v<span class="hljs-number">2.</span><span class="hljs-built_in">size</span>());<br><span class="hljs-comment">//åˆå¹¶  éœ€è¦ä¸¤ä¸ªæœ‰åºåºåˆ—</span><br><span class="hljs-built_in">merge</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(), vtarget.<span class="hljs-built_in">begin</span>());<br>for_each(vtarget.<span class="hljs-built_in">begin</span>(), vtarget.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**mergeåˆå¹¶çš„ä¸¤ä¸ªå®¹å™¨å¿…é¡»çš„æœ‰åºåºåˆ—</p><h4 id="5-3-4-reverse">5.3.4 reverse</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨å†…å…ƒç´ è¿›è¡Œåè½¬</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>reverse(iterator beg, iterator end);  </code></p><p>// åè½¬æŒ‡å®šèŒƒå›´çš„å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;åè½¬å‰ï¼š &quot;</span> &lt;&lt; endl;<br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;åè½¬åï¼š &quot;</span> &lt;&lt; endl;<br><br><span class="hljs-built_in">reverse</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**reverseåè½¬åŒºé—´å†…å…ƒç´ ï¼Œé¢è¯•é¢˜å¯èƒ½æ¶‰åŠåˆ°</p><h3 id="5-4-å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•">5.4 å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„æ‹·è´å’Œæ›¿æ¢ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>copy</code>                      // å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„å…ƒç´ æ‹·è´åˆ°å¦ä¸€å®¹å™¨ä¸­</li><li><code>replace</code>                // å°†å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„æ—§å…ƒç´ ä¿®æ”¹ä¸ºæ–°å…ƒç´ </li><li><code>replace_if </code>          // å®¹å™¨å†…æŒ‡å®šèŒƒå›´æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ›¿æ¢ä¸ºæ–°å…ƒç´ </li><li><code>swap</code>                     // äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </li></ul><h4 id="5-4-1-copy">5.4.1 copy</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„å…ƒç´ æ‹·è´åˆ°å¦ä¸€å®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>copy(iterator beg, iterator end, iterator dest);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>// beg  å¼€å§‹è¿­ä»£å™¨</p><p>// end  ç»“æŸè¿­ä»£å™¨</p><p>// dest ç›®æ ‡èµ·å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">1</span>);<br>&#125;<br>vector&lt;<span class="hljs-type">int</span>&gt; v2;<br>v<span class="hljs-number">2.</span><span class="hljs-built_in">resize</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>());<br><span class="hljs-built_in">copy</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>());<br><br>for_each(v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**åˆ©ç”¨copyç®—æ³•åœ¨æ‹·è´æ—¶ï¼Œç›®æ ‡å®¹å™¨è®°å¾—æå‰å¼€è¾Ÿç©ºé—´</p><h4 id="5-4-2-replace">5.4.2 replace</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„æ—§å…ƒç´ ä¿®æ”¹ä¸ºæ–°å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>replace(iterator beg, iterator end, oldvalue, newvalue);  </code></p><p>// å°†åŒºé—´å†…æ—§å…ƒç´  æ›¿æ¢æˆ æ–°å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// oldvalue æ—§å…ƒç´ </p><p>// newvalue æ–°å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;æ›¿æ¢å‰ï¼š&quot;</span> &lt;&lt; endl;<br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br><br><span class="hljs-comment">//å°†å®¹å™¨ä¸­çš„20 æ›¿æ¢æˆ 2000</span><br>cout &lt;&lt; <span class="hljs-string">&quot;æ›¿æ¢åï¼š&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">replace</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">20</span>,<span class="hljs-number">2000</span>);<br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**replaceä¼šæ›¿æ¢åŒºé—´å†…æ»¡è¶³æ¡ä»¶çš„å…ƒç´ </p><h4 id="5-4-3-replace-if">5.4.3 replace_if</h4><p><strong>åŠŸèƒ½æè¿°:</strong></p><ul><li>å°†åŒºé—´å†…æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œæ›¿æ¢æˆæŒ‡å®šå…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>replace_if(iterator beg, iterator end, _pred, newvalue);  </code></p><p>// æŒ‰æ¡ä»¶æ›¿æ¢å…ƒç´ ï¼Œæ»¡è¶³æ¡ä»¶çš„æ›¿æ¢æˆæŒ‡å®šå…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _pred è°“è¯</p><p>// newvalue æ›¿æ¢çš„æ–°å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReplaceGreater30</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> val &gt;= <span class="hljs-number">30</span>;<br>&#125;<br><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;æ›¿æ¢å‰ï¼š&quot;</span> &lt;&lt; endl;<br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br><br><span class="hljs-comment">//å°†å®¹å™¨ä¸­å¤§äºç­‰äºçš„30 æ›¿æ¢æˆ 3000</span><br>cout &lt;&lt; <span class="hljs-string">&quot;æ›¿æ¢åï¼š&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">replace_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">ReplaceGreater30</span>(), <span class="hljs-number">3000</span>);<br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**replace_ifæŒ‰æ¡ä»¶æŸ¥æ‰¾ï¼Œå¯ä»¥åˆ©ç”¨ä»¿å‡½æ•°çµæ´»ç­›é€‰æ»¡è¶³çš„æ¡ä»¶</p><h4 id="5-4-4-swap">5.4.4 swap</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>swap(container c1, container c2);  </code></p><p>// äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </p><p>// c1å®¹å™¨1</p><p>// c2å®¹å™¨2</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v1;<br>vector&lt;<span class="hljs-type">int</span>&gt; v2;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>v<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(i<span class="hljs-number">+100</span>);<br>&#125;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äº¤æ¢å‰ï¼š &quot;</span> &lt;&lt; endl;<br>for_each(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>for_each(v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äº¤æ¢åï¼š &quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">swap</span>(v1, v2);<br>for_each(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>for_each(v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**swapäº¤æ¢å®¹å™¨æ—¶ï¼Œæ³¨æ„äº¤æ¢çš„å®¹å™¨è¦åŒç§ç±»å‹</p><h3 id="5-5-å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•">5.5 å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„ç®—æœ¯ç”Ÿæˆç®—æ³•</li></ul><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>ç®—æœ¯ç”Ÿæˆç®—æ³•å±äºå°å‹ç®—æ³•ï¼Œä½¿ç”¨æ—¶åŒ…å«çš„å¤´æ–‡ä»¶ä¸º <code>#include &lt;numeric&gt;</code></li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><p><code>accumulate</code>      // è®¡ç®—å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</p></li><li><p><code>fill</code>                 // å‘å®¹å™¨ä¸­æ·»åŠ å…ƒç´ </p></li></ul><h4 id="5-5-1-accumulate">5.5.1 accumulate</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>è®¡ç®—åŒºé—´å†… å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>accumulate(iterator beg, iterator end, value);  </code></p><p>// è®¡ç®—å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value èµ·å§‹å€¼</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;numeric&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">100</span>; i++) &#123;<br>v.<span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><br><span class="hljs-type">int</span> total = <span class="hljs-built_in">accumulate</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">0</span>);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;total = &quot;</span> &lt;&lt; total &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**accumulateä½¿ç”¨æ—¶å¤´æ–‡ä»¶æ³¨æ„æ˜¯ numericï¼Œè¿™ä¸ªç®—æ³•å¾ˆå®ç”¨</p><h4 id="5-5-2-fill">5.5.2 fill</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‘å®¹å™¨ä¸­å¡«å……æŒ‡å®šçš„å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>fill(iterator beg, iterator end, value);  </code></p><p>// å‘å®¹å™¨ä¸­å¡«å……å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value å¡«å……çš„å€¼</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;numeric&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; v;<br>v.<span class="hljs-built_in">resize</span>(<span class="hljs-number">10</span>);<br><span class="hljs-comment">//å¡«å……</span><br><span class="hljs-built_in">fill</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">100</span>);<br><br>for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**åˆ©ç”¨fillå¯ä»¥å°†å®¹å™¨åŒºé—´å†…å…ƒç´ å¡«å……ä¸º æŒ‡å®šçš„å€¼</p><h3 id="5-6-å¸¸ç”¨é›†åˆç®—æ³•">5.6 å¸¸ç”¨é›†åˆç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„é›†åˆç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><p><code>set_intersection</code>          // æ±‚ä¸¤ä¸ªå®¹å™¨çš„äº¤é›†</p></li><li><p><code>set_union</code>                       // æ±‚ä¸¤ä¸ªå®¹å™¨çš„å¹¶é›†</p></li><li><p><code>set_difference </code>              // æ±‚ä¸¤ä¸ªå®¹å™¨çš„å·®é›†</p></li></ul><h4 id="5-6-1-set-intersection">5.6.1 set_intersection</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªå®¹å™¨çš„äº¤é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_intersection(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤é›†</p><p>// <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>// beg1 å®¹å™¨1å¼€å§‹è¿­ä»£å™¨// end1 å®¹å™¨1ç»“æŸè¿­ä»£å™¨// beg2 å®¹å™¨2å¼€å§‹è¿­ä»£å™¨// end2 å®¹å™¨2ç»“æŸè¿­ä»£å™¨// dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v1;<br>vector&lt;<span class="hljs-type">int</span>&gt; v2;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>v<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(i<span class="hljs-number">+5</span>);<br>&#125;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; vTarget;<br><span class="hljs-comment">//å–ä¸¤ä¸ªé‡Œé¢è¾ƒå°çš„å€¼ç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span><br>vTarget.<span class="hljs-built_in">resize</span>(<span class="hljs-built_in">min</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">size</span>()));<br><br><span class="hljs-comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span><br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator itEnd = <br>        <span class="hljs-built_in">set_intersection</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(), vTarget.<span class="hljs-built_in">begin</span>());<br><br>for_each(vTarget.<span class="hljs-built_in">begin</span>(), itEnd, <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚äº¤é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦ä»<strong>ä¸¤ä¸ªå®¹å™¨ä¸­å–å°å€¼</strong></li><li>set_intersectionè¿”å›å€¼æ—¢æ˜¯äº¤é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul><h4 id="5-6-2-set-union">5.6.2 set_union</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_union(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†</p><p>// <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>// beg1 å®¹å™¨1å¼€å§‹è¿­ä»£å™¨// end1 å®¹å™¨1ç»“æŸè¿­ä»£å™¨// beg2 å®¹å™¨2å¼€å§‹è¿­ä»£å™¨// end2 å®¹å™¨2ç»“æŸè¿­ä»£å™¨// dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v1;<br>vector&lt;<span class="hljs-type">int</span>&gt; v2;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>v<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(i<span class="hljs-number">+5</span>);<br>&#125;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; vTarget;<br><span class="hljs-comment">//å–ä¸¤ä¸ªå®¹å™¨çš„å’Œç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span><br>vTarget.<span class="hljs-built_in">resize</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() + v<span class="hljs-number">2.</span><span class="hljs-built_in">size</span>());<br><br><span class="hljs-comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span><br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator itEnd = <br>        <span class="hljs-built_in">set_union</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(), vTarget.<span class="hljs-built_in">begin</span>());<br><br>for_each(vTarget.<span class="hljs-built_in">begin</span>(), itEnd, <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚å¹¶é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦<strong>ä¸¤ä¸ªå®¹å™¨ç›¸åŠ </strong></li><li>set_unionè¿”å›å€¼æ—¢æ˜¯å¹¶é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul><h4 id="5-6-3-set-difference">5.6.3  set_difference</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªé›†åˆçš„å·®é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_difference(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// æ±‚ä¸¤ä¸ªé›†åˆçš„å·®é›†</p><p>// <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>// beg1 å®¹å™¨1å¼€å§‹è¿­ä»£å™¨// end1 å®¹å™¨1ç»“æŸè¿­ä»£å™¨// beg2 å®¹å™¨2å¼€å§‹è¿­ä»£å™¨// end2 å®¹å™¨2ç»“æŸè¿­ä»£å™¨// dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt; v1;<br>vector&lt;<span class="hljs-type">int</span>&gt; v2;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>v<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(i<span class="hljs-number">+5</span>);<br>&#125;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; vTarget;<br><span class="hljs-comment">//å–ä¸¤ä¸ªé‡Œé¢è¾ƒå¤§çš„å€¼ç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span><br>vTarget.<span class="hljs-built_in">resize</span>( <span class="hljs-built_in">max</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() , v<span class="hljs-number">2.</span><span class="hljs-built_in">size</span>()));<br><br><span class="hljs-comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span><br>cout &lt;&lt; <span class="hljs-string">&quot;v1ä¸v2çš„å·®é›†ä¸ºï¼š &quot;</span> &lt;&lt; endl;<br>vector&lt;<span class="hljs-type">int</span>&gt;::iterator itEnd = <br>        <span class="hljs-built_in">set_difference</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(), vTarget.<span class="hljs-built_in">begin</span>());<br>for_each(vTarget.<span class="hljs-built_in">begin</span>(), itEnd, <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br><br><br>cout &lt;&lt; <span class="hljs-string">&quot;v2ä¸v1çš„å·®é›†ä¸ºï¼š &quot;</span> &lt;&lt; endl;<br>itEnd = <span class="hljs-built_in">set_difference</span>(v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>(), vTarget.<span class="hljs-built_in">begin</span>());<br>for_each(vTarget.<span class="hljs-built_in">begin</span>(), itEnd, <span class="hljs-built_in">myPrint</span>());<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚å·®é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦ä»<strong>ä¸¤ä¸ªå®¹å™¨å–è¾ƒå¤§å€¼</strong></li><li>set_differenceè¿”å›å€¼æ—¢æ˜¯å·®é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul>]]></content>
      
      
      <categories>
          
          <category> C++æ•™ç¨‹ä¸“è¾‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> C++æé«˜ç¼–ç¨‹è®²è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Cè¯­è¨€é¡¹ç›®ã€‘çˆ±çš„å¾é€”æ¸¸æˆå¼€æº</title>
      <link href="/2022/06/05/%E3%80%90C%E8%AF%AD%E8%A8%80%E9%A1%B9%E7%9B%AE%E3%80%91%E7%88%B1%E7%9A%84%E5%BE%81%E9%80%94%E6%B8%B8%E6%88%8F%E5%BC%80%E6%BA%90/"/>
      <url>/2022/06/05/%E3%80%90C%E8%AF%AD%E8%A8%80%E9%A1%B9%E7%9B%AE%E3%80%91%E7%88%B1%E7%9A%84%E5%BE%81%E9%80%94%E6%B8%B8%E6%88%8F%E5%BC%80%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<h1>ã€Cè¯­è¨€é¡¹ç›®ã€‘çˆ±çš„å¾é€”æ¸¸æˆå¼€æº</h1><p>ä¸çŸ¥é“å¤šå°‘å¹´å‰å†™çš„äº†ï¼Œæ˜¯æˆ‘å†™çš„ç¬¬ä¸€ä¸ªè§’è‰²æ‰®æ¼”çš„æ¸¸æˆï¼Œå†™è¿™ä¸ªæ¸¸æˆçš„æ—¶é—´åœ¨æˆ‘çš„é«˜ä¸­æ—¶ä»£ã€‚æ²¡åŠæ³•å†™å®ç°çš„æ•™ç¨‹äº†ï¼Œåªèƒ½ç›´æ¥æ”¾ä»£ç å‡ºæ¥ã€‚</p><h2 id="æˆå“å±•ç¤º">æˆå“å±•ç¤º</h2><p><img src="/images/2022-6-5-000006.png" alt="æ¸¸æˆèƒŒæ™¯"></p><p><img src="/images/2022-6-5-000007.png" alt="æ¸¸æˆåœ°å›¾"></p><h2 id="æºç å±•ç¤º">æºç å±•ç¤º</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string.h&gt;</span> </span><br><span class="hljs-comment">//åˆå§‹åŒ–åœ°å›¾ </span><br><span class="hljs-comment">//ç¬¬ä¸€å¼ åœ°å›¾ </span><br>    <span class="hljs-type">int</span> map1[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>]=&#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">50</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">9</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">6</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#125;;<br>   <span class="hljs-comment">//ç¬¬äºŒå¼ åœ°å›¾ é­”å¡”ç¬¬ä¸€å±‚ </span><br>  <span class="hljs-type">int</span> map2[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>]=&#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">11</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">15</span>,<span class="hljs-number">3</span>,<span class="hljs-number">14</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">19</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">25</span>,<span class="hljs-number">15</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">14</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">16</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">18</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">18</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">19</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">18</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">19</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">18</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">19</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">7</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">17</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">23</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">18</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">24</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">18</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">19</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#125;;<br>   <span class="hljs-comment">//ç¬¬ä¸‰å¼ åœ°å›¾ é­”å¡”ç¬¬äºŒå±‚ </span><br>  <span class="hljs-type">int</span> map3[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>]=&#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">24</span>,<span class="hljs-number">3</span>,<span class="hljs-number">16</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">17</span>,<span class="hljs-number">3</span>,<span class="hljs-number">23</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">10</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">14</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">14</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">18</span>,<span class="hljs-number">1</span>,<span class="hljs-number">19</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>,<span class="hljs-number">18</span>,<span class="hljs-number">1</span>,<span class="hljs-number">19</span>,<span class="hljs-number">15</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">15</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">15</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">12</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">21</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#125;;<br>   <span class="hljs-comment">//ç¬¬å››å¼ åœ°å›¾ é­”å¡”ç¬¬ä¸‰å±‚ </span><br>  <span class="hljs-type">int</span> map4[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>]=&#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">18</span>,<span class="hljs-number">18</span>,<span class="hljs-number">3</span>,<span class="hljs-number">17</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">18</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">19</span>,<span class="hljs-number">19</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">16</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">19</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">14</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">16</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">17</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">14</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">14</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">23</span>,<span class="hljs-number">3</span>,<span class="hljs-number">13</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">31</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">22</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#125;;<br>   <span class="hljs-comment">//ç¬¬äº”å¼ åœ°å›¾ é­”å¡”ç¬¬å››å±‚ </span><br>  <span class="hljs-type">int</span> map5[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>]=&#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">17</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">16</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">17</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">16</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">17</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">16</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">17</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">16</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">23</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">24</span>,<span class="hljs-number">3</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">32</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">41</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#125;;<br>   <span class="hljs-comment">//ç¬¬å…­å¼ åœ°å›¾ é­”å¡”ç¬¬äº”å±‚ </span><br>  <span class="hljs-type">int</span> map6[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>]=&#123;&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">100</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">13</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">42</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,<br>   &#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;,&#125;;<br><br><span class="hljs-comment">//è§’è‰²ä¿¡æ¯</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">hero</span>&#123;</span><br><span class="hljs-type">char</span> name[<span class="hljs-number">20</span>];<span class="hljs-comment">//ä¸»è§’å§“å </span><br><span class="hljs-type">int</span> z_x;<span class="hljs-comment">//ä¸»è§’æ¨ªåæ ‡ </span><br><span class="hljs-type">int</span> z_y;<span class="hljs-comment">//ä¸»è§’çºµåæ ‡ </span><br><span class="hljs-type">int</span> jade;<span class="hljs-comment">//é•‡é­‚ä¹‹ç‰ </span><br><span class="hljs-type">int</span> is_over;<span class="hljs-comment">//åˆ¤æ–­ä¸€ä¸ªç§»åŠ¨çš„ç»“æŸ </span><br><span class="hljs-type">int</span> hp;<span class="hljs-comment">//ä¸»è§’çš„è¡€é‡ </span><br><span class="hljs-type">int</span> carry;<span class="hljs-comment">//ä¸»è§’çš„æ”»å‡»åŠ› </span><br><span class="hljs-type">int</span> defend;<span class="hljs-comment">//ä¸»è§’çš„é˜²å¾¡åŠ› </span><br><span class="hljs-type">int</span> fortune; <span class="hljs-comment">//ä¸»è§’çš„é‡‘å¸ </span><br><span class="hljs-type">int</span> actor;<span class="hljs-comment">//ä¸»è§’çš„ä¿¡æ¯æ¿€æ´»ç  </span><br><span class="hljs-type">int</span> backpack; <span class="hljs-comment">//æ€ªç‰©å›¾è°±çš„æ¿€æ´»ç  </span><br><span class="hljs-type">int</span> shop;<span class="hljs-comment">//å•†åº—çš„æ¿€æ´»ç  </span><br><span class="hljs-type">int</span> <span class="hljs-built_in">floor</span>;<span class="hljs-comment">//æ¥¼å±‚æ•° </span><br><span class="hljs-type">int</span> money;<span class="hljs-comment">//ç”¨äºè´­ä¹°ä¸œè¥¿çš„é‡‘å¸ </span><br>&#125;;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">monster</span>&#123;</span><br><span class="hljs-type">char</span> m1_name[<span class="hljs-number">20</span>];<span class="hljs-comment">//å°å²è±å§†æ€ª </span><br><span class="hljs-type">int</span> m1_hp;<br><span class="hljs-type">int</span> m1_carry;<br><span class="hljs-type">int</span> m1_defend;<br><span class="hljs-type">char</span> m1_lose[<span class="hljs-number">20</span>];<br><span class="hljs-type">int</span> m1Lose;<br><span class="hljs-type">char</span> m2_name[<span class="hljs-number">20</span>];<span class="hljs-comment">//å¤§å²è±å§†æ€ª </span><br><span class="hljs-type">int</span> m2_hp;<br><span class="hljs-type">int</span> m2_carry;<br><span class="hljs-type">int</span> m2_defend;<br><span class="hljs-type">char</span> m2_lose[<span class="hljs-number">20</span>];<br><span class="hljs-type">int</span> m2Lose;<br><span class="hljs-type">char</span> m3_name[<span class="hljs-number">20</span>];<span class="hljs-comment">//é‚ªæ¶å·«å¸ˆ </span><br><span class="hljs-type">int</span> m3_hp;<br><span class="hljs-type">int</span> m3_carry;<br><span class="hljs-type">int</span> m3_defend;<br><span class="hljs-type">char</span> m3_lose[<span class="hljs-number">20</span>];<br><span class="hljs-type">int</span> m3Lose;<br><span class="hljs-type">char</span> m4_name[<span class="hljs-number">20</span>];<span class="hljs-comment">//åŒå‰‘æ­¦å£« </span><br><span class="hljs-type">int</span> m4_hp;<br><span class="hljs-type">int</span> m4_carry;<br><span class="hljs-type">int</span> m4_defend;<br><span class="hljs-type">char</span> m4_lose[<span class="hljs-number">20</span>];<br><span class="hljs-type">int</span> m4Lose;<br><span class="hljs-type">char</span> m5_name[<span class="hljs-number">20</span>];<span class="hljs-comment">//å¤§æ³•å¸ˆ </span><br><span class="hljs-type">int</span> m5_hp;<br><span class="hljs-type">int</span> m5_carry;<br><span class="hljs-type">int</span> m5_defend;<br><span class="hljs-type">char</span> m5_lose[<span class="hljs-number">20</span>];<br><span class="hljs-type">int</span> m5Lose;<br>&#125; ;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">contain</span>&#123;</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">hero</span> <span class="hljs-title">person</span>;</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">monster</span> <span class="hljs-title">ms</span>;</span><br>&#125;;<br><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">move</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">moveDown</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>; <br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">moveUp</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">moveRight</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">moveLeft</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">information</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">monsterBP</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">login</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">account</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">ShowMap</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">fightM1</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">fightM2</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>; <br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">fightM3</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>; <br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">fightM4</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>; <br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">fightM5</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">addCarry</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">addDefend</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">addCarry10</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">addDefend10</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">addHp</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">SHOP</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">openshop</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>;<br><br>   <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªåœ°å›¾çš„å‡½æ•°ï¼Œåå­—å«ShowMap </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">ShowMap</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>); <br> zd=account(zd);<br>system(<span class="hljs-string">&quot;color 75&quot;</span>);<br><span class="hljs-type">int</span> i=<span class="hljs-number">0</span>,j=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">20</span>;i++)&#123;<br><span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">20</span>;j++)&#123;<br><span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">1</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<span class="hljs-comment">//å¢™ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">2</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â™€&quot;</span>);<span class="hljs-comment">//ä¸»è§’ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">3</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;  &quot;</span>);<span class="hljs-comment">//ç©ºæ ¼ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">4</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ï¿ &quot;</span>);<span class="hljs-comment">//é•‡é­‚ä¹‹ç‰ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">5</span>||a[i][j]==<span class="hljs-number">8</span>||a[i][j]==<span class="hljs-number">9</span>||a[i][j]==<span class="hljs-number">50</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å&quot;</span>);<span class="hljs-comment">//æ€ªç‰© </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">6</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â™‚&quot;</span>);<span class="hljs-comment">//ç‹å­ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">7</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%c%c&quot;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>);<span class="hljs-comment">//è¡€ç“¶ 200ç‚¹ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">10</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ™º&quot;</span>);<span class="hljs-comment">//æ€ªç‰©å›¾è°± </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">11</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸Š&quot;</span>);<span class="hljs-comment">//ä¸€æ¥¼å¾€ä¸Šèµ° </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">12</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸‹&quot;</span>);<span class="hljs-comment">//äºŒæ¥¼å¾€ä¸‹èµ°</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">21</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸Š&quot;</span>);<span class="hljs-comment">//äºŒæ¥¼å¾€ä¸Šèµ° </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">22</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸‹&quot;</span>);<span class="hljs-comment">//ä¸‰æ¥¼å¾€ä¸‹èµ°</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">31</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸Š&quot;</span>);<span class="hljs-comment">//ä¸‰æ¥¼å¾€ä¸Šèµ° </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">32</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸‹&quot;</span>);<span class="hljs-comment">//å››æ¥¼å¾€ä¸‹èµ°</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">41</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸Š&quot;</span>);<span class="hljs-comment">//å››æ¥¼å¾€ä¸Šèµ° </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">42</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸‹&quot;</span>);<span class="hljs-comment">//äº”æ¥¼å¾€ä¸‹èµ° </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">13</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<span class="hljs-comment">//å¯ä»¥ç©¿é€çš„å¢™</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">14</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â—‹&quot;</span>);<span class="hljs-comment">//å°å²è±å§†æ€ª </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">15</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â—&quot;</span>);<span class="hljs-comment">//å¤§å²è±å§†æ€ª </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">16</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â˜†&quot;</span>);<span class="hljs-comment">//é‚ªæ¶å·«å¸ˆ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">17</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Â¤&quot;</span>);<span class="hljs-comment">//åŒå‰‘æ­¦å£« </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">18</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ã„¨&quot;</span>);<span class="hljs-comment">//æ”»å‡»  2ç‚¹ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">19</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â—‡&quot;</span>);<span class="hljs-comment">//é˜²å¾¡2ç‚¹ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">23</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‰‘&quot;</span>);<span class="hljs-comment">//å‰‘  æ”»å‡»  10ç‚¹ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">24</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›¾&quot;</span>);<span class="hljs-comment">//ç›¾  é˜²å¾¡  10ç‚¹ </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">25</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å•†&quot;</span>);<span class="hljs-comment">//æ¿€æ´»å•†åº— </span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i][j]==<span class="hljs-number">100</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â„–&quot;</span>);<span class="hljs-comment">//å¤§æ³•å¸ˆ  </span><br>&#125;<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">if</span>(zd.person.<span class="hljs-built_in">floor</span>&gt;=<span class="hljs-number">1</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t        é­”å¡”ç¬¬%då±‚\n&quot;</span>,zd.person.<span class="hljs-built_in">floor</span>);<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//æ€ªç‰©ä¸ä¸»è§’çš„æŸè¡€è®¡ç®—</span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">account</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br><span class="hljs-comment">//å°å²è±å§†æ€ª </span><br><span class="hljs-type">int</span> x=<span class="hljs-number">0</span>,y=<span class="hljs-number">0</span>,z=<span class="hljs-number">0</span>; <br>z=zd.person.carry-zd.ms.m1_defend;<br><span class="hljs-keyword">if</span>(z!=<span class="hljs-number">0</span>) x=zd.ms.m1_hp/z;<br>  y=(x<span class="hljs-number">-1</span>)*(zd.ms.m1_carry-zd.person.defend);<br><span class="hljs-keyword">if</span>(zd.person.carry&lt;=zd.ms.m1_defend||zd.person.hp&lt;=y)&#123;<br><span class="hljs-built_in">strcpy</span>(zd.ms.m1_lose,<span class="hljs-string">&quot;?????&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">if</span>(zd.ms.m1_carry&lt;=zd.person.defend)&#123;<br><span class="hljs-built_in">strcpy</span>(zd.ms.m1_lose,<span class="hljs-string">&quot;0&quot;</span>);<br>zd.ms.m1Lose=<span class="hljs-number">0</span>;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>      zd.ms.m1Lose=y;<br>itoa(zd.ms.m1Lose,zd.ms.m1_lose,<span class="hljs-number">10</span>);<br>&#125;<br>&#125;<br><span class="hljs-comment">//å¤§å²è±å§†æ€ª </span><br>z=zd.person.carry-zd.ms.m2_defend;<br><span class="hljs-keyword">if</span>(z!=<span class="hljs-number">0</span>) x=zd.ms.m2_hp/z;<br>y=(x<span class="hljs-number">-1</span>)*(zd.ms.m2_carry-zd.person.defend);<br><span class="hljs-keyword">if</span>(zd.person.carry&lt;=zd.ms.m2_defend||zd.person.hp&lt;=y)&#123;<br><span class="hljs-built_in">strcpy</span>(zd.ms.m2_lose,<span class="hljs-string">&quot;?????&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">if</span>(zd.ms.m2_carry&lt;=zd.person.defend)&#123;<br><span class="hljs-built_in">strcpy</span>(zd.ms.m2_lose,<span class="hljs-string">&quot;0&quot;</span>);<br>zd.ms.m2Lose=<span class="hljs-number">0</span>;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>       zd.ms.m2Lose=y;<br>itoa(zd.ms.m2Lose,zd.ms.m2_lose,<span class="hljs-number">10</span>);<br>&#125;<br>&#125;<br><span class="hljs-comment">//é‚ªæ¶å·«å¸ˆ  </span><br>z=zd.person.carry-zd.ms.m3_defend;<br><span class="hljs-keyword">if</span>(z!=<span class="hljs-number">0</span>) x=zd.ms.m3_hp/z;<br>y=(x<span class="hljs-number">-1</span>)*(zd.ms.m3_carry-zd.person.defend);<br><span class="hljs-keyword">if</span>(zd.person.carry&lt;=zd.ms.m3_defend||zd.person.hp&lt;=y)&#123;<br><span class="hljs-built_in">strcpy</span>(zd.ms.m3_lose,<span class="hljs-string">&quot;?????&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">if</span>(zd.ms.m3_carry&lt;=zd.person.defend)&#123;<br><span class="hljs-built_in">strcpy</span>(zd.ms.m3_lose,<span class="hljs-string">&quot;0&quot;</span>);<br>zd.ms.m3Lose=<span class="hljs-number">0</span>;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>  zd.ms.m3Lose=y;<br>itoa(zd.ms.m3Lose,zd.ms.m3_lose,<span class="hljs-number">10</span>);<br>&#125;<br>&#125;<br><span class="hljs-comment">//åŒå‰‘æ­¦å£« </span><br>z=zd.person.carry-zd.ms.m4_defend;<br><span class="hljs-keyword">if</span>(z!=<span class="hljs-number">0</span>) x=zd.ms.m4_hp/z;<br>y=(x<span class="hljs-number">-1</span>)*(zd.ms.m4_carry-zd.person.defend);<br><span class="hljs-keyword">if</span>(zd.person.carry&lt;=zd.ms.m4_defend||zd.person.hp&lt;=y)&#123;<br><span class="hljs-built_in">strcpy</span>(zd.ms.m4_lose,<span class="hljs-string">&quot;?????&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">if</span>(zd.ms.m4_carry&lt;=zd.person.defend)&#123;<br><span class="hljs-built_in">strcpy</span>(zd.ms.m4_lose,<span class="hljs-string">&quot;0&quot;</span>);<br>zd.ms.m4Lose=<span class="hljs-number">0</span>;<br>&#125;<span class="hljs-keyword">else</span> &#123; <br>       zd.ms.m4Lose=y;<br>itoa(zd.ms.m4Lose,zd.ms.m4_lose,<span class="hljs-number">10</span>);<br>&#125;<br>&#125;<br><span class="hljs-comment">//å¤§æ³•å¸ˆ </span><br>z=zd.person.carry-zd.ms.m5_defend;<br><span class="hljs-keyword">if</span>(z!=<span class="hljs-number">0</span>) x=zd.ms.m5_hp/z;<br>y=(x<span class="hljs-number">-1</span>)*(zd.ms.m5_carry-zd.person.defend);<br><span class="hljs-keyword">if</span>(zd.person.carry&lt;=zd.ms.m5_defend||zd.person.hp&lt;=y)&#123;<br><span class="hljs-built_in">strcpy</span>(zd.ms.m5_lose,<span class="hljs-string">&quot;?????&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">if</span>(zd.ms.m5_carry&lt;=zd.person.defend)&#123;<br><span class="hljs-built_in">strcpy</span>(zd.ms.m5_lose,<span class="hljs-string">&quot;0&quot;</span>);<br>zd.ms.m5Lose=<span class="hljs-number">0</span>;<br>&#125;<span class="hljs-keyword">else</span> &#123; <br>zd.ms.m5Lose=y;<br>itoa(zd.ms.m5Lose,zd.ms.m5_lose,<span class="hljs-number">10</span>);<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> zd;<br>&#125; <br><span class="hljs-comment">//ä¸»å‡½æ•° </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>&#123;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">hero</span> <span class="hljs-title">person</span>=</span>&#123;<span class="hljs-string">&quot;å…¬ä¸»&quot;</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">400</span>,<span class="hljs-number">6</span>,<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>&#125;;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">monster</span> <span class="hljs-title">ms</span>=</span>&#123; <span class="hljs-string">&quot;å°å²è±å§†æ€ª&quot;</span>,<span class="hljs-number">100</span>,<span class="hljs-number">20</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&quot;???&quot;</span>,<span class="hljs-number">1000000</span>, <br><span class="hljs-string">&quot;å¤§å²è±å§†æ€ª&quot;</span>,<span class="hljs-number">100</span>,<span class="hljs-number">50</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&quot;???&quot;</span>,<span class="hljs-number">1000000</span>,<br><span class="hljs-string">&quot;é‚ªæ¶å·«å¸ˆ&quot;</span>,<span class="hljs-number">200</span>,<span class="hljs-number">70</span>,<span class="hljs-number">10</span>,<span class="hljs-string">&quot;???&quot;</span>,<span class="hljs-number">1000000</span>,<br><span class="hljs-string">&quot;åŒå‰‘æ­¦å£«&quot;</span>,<span class="hljs-number">300</span>,<span class="hljs-number">100</span>,<span class="hljs-number">25</span>,<span class="hljs-string">&quot;???&quot;</span>,<span class="hljs-number">1000000</span>,<br><span class="hljs-string">&quot;å¤§æ³•å¸ˆ&quot;</span>,<span class="hljs-number">500</span>,<span class="hljs-number">200</span>,<span class="hljs-number">60</span>,<span class="hljs-string">&quot;???&quot;</span>,<span class="hljs-number">1000000</span>&#125;;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">contain</span> <span class="hljs-title">zd</span>;</span><br>zd.ms=ms;<br>zd.person=person;<br>load();<br>post();<br>background(); <br>scene();<br>mention();<br>jiazai();<br>ShowMap(zd,map1);<br>zd=move(zd,map1);<br>theme();<br>zd=login(zd);<br>ShowMap(zd,map2);<br>zd=move(zd,map2);<br>gameover();<br>getch();<br>&#125; <br><span class="hljs-comment">//æ¸¸æˆå‰çš„å°æé†’</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">mention</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\tæ¸¸æˆå°æç¤º:\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæ¸¸æˆå‰è¯·å°†è¾“å…¥æ³•åˆ‡æ¢ä¸ºè‹±æ–‡è¾“å…¥\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tå‘ä¸Šï¼šw\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tå‘ä¸‹ï¼šs\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tå‘å·¦ï¼ša\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tå‘å³ï¼šd\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\tæŒ‰ä»»æ„é”®ç»§ç»­...\n&quot;</span>);<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125; <br><span class="hljs-comment">//å‰§æƒ…â€”â€”å¼€ç«¯â€”â€”å…¬ä¸»çš„ç‹¬ç™½ </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">scene</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n\n\t\tloading&quot;</span>);<br><span class="hljs-type">int</span> x=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(x=<span class="hljs-number">0</span>;x&lt;<span class="hljs-number">7</span>;x++)&#123;<br> Sleep(<span class="hljs-number">100</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;.&quot;</span>);<br> &#125;<br> system(<span class="hljs-string">&quot;cls&quot;</span>);<br> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n\n    \t\tç‹å­å°é‘«çš„ç‹¬ç™½:\n&quot;</span>);Sleep(<span class="hljs-number">1000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tå¾ˆ&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¹…&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä»¥&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‰&quot;</span>);Sleep(<span class="hljs-number">500</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æˆ‘&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›¸\n&quot;</span>);Sleep(<span class="hljs-number">1000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tä¿¡&quot;</span>);Sleep(<span class="hljs-number">500</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çˆ±&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æƒ…&quot;</span>);Sleep(<span class="hljs-number">100</span>);<br> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›´&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ°&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœ‰&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸€\n&quot;</span>);Sleep(<span class="hljs-number">1000</span>);<br> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tå¤©&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é‡è§äº†ä½ \n&quot;</span>);Sleep(<span class="hljs-number">1000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæˆ‘&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ·±&quot;</span>);Sleep(<span class="hljs-number">700</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æƒ…&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çš„&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çˆ±&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç€&quot;</span>);Sleep(<span class="hljs-number">100</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä½ &quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å•Š\n&quot;</span>);Sleep(<span class="hljs-number">1000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tå¯&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä½ &quot;</span>);Sleep(<span class="hljs-number">100</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çªç„¶\n&quot;</span>);Sleep(<span class="hljs-number">1000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæ¶ˆå¤±&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åœ¨&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æˆ‘çš„&quot;</span>);Sleep(<span class="hljs-number">100</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸–&quot;</span>);Sleep(<span class="hljs-number">100</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç•Œ\n&quot;</span>);Sleep(<span class="hljs-number">500</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\tæŒ‰ä»»æ„é”®ç»§ç»­...\n&quot;</span>);<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125;<br><span class="hljs-comment">//å‰§æƒ…â€”â€”å¼€ç«¯â€”â€”ç”»é¢æ¸²æŸ“</span><br><span class="hljs-comment">//å­—å¹•ä¸€</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">postOne</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n&quot;</span>);<br><span class="hljs-keyword">switch</span>(count)&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t***************************************\n&quot;</span>);<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t*       â™€                            *\n&quot;</span>);<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t*             çˆ±çš„å¾é€”                *\n&quot;</span>);<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t*                            â™‚       *\n&quot;</span>); <br>   <span class="hljs-keyword">default</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t***************************************\n&quot;</span>);<br>&#125;<br>&#125; <br><span class="hljs-comment">//å­—å¹•äºŒ </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">postTwo</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n&quot;</span>);<br><span class="hljs-keyword">switch</span>(count)&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t***************************************\n&quot;</span>);<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t*                              ##     *\n&quot;</span>);<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t*        æ¼”å‘˜ï¼šç‹å­å°é‘«å’Œå…¬ä¸»æŸæŸ     *\n&quot;</span>);<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t*                                     *\n&quot;</span>); <br>   <span class="hljs-keyword">default</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t***************************************\n&quot;</span>);<br>&#125;<br>&#125;<br><span class="hljs-comment">//å­—å¹•ä¸‰ </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">postThree</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n&quot;</span>);<br><span class="hljs-keyword">switch</span>(count)&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t***************************************\n&quot;</span>);<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t*         å¯¼æ¼”             â„–         *\n&quot;</span>);<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t*             é‡‘ç¬”è¿å°‘     â„–         *\n&quot;</span>);<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t*                      â„–      ^-^    *\n&quot;</span>); <br>   <span class="hljs-keyword">default</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t***************************************\n&quot;</span>);<br>&#125;<br>&#125;<br><span class="hljs-comment">//å­—å¹•å¾ªç¯</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">post</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-type">int</span> count=<span class="hljs-number">0</span>,num=<span class="hljs-number">1</span>;<br>Sleep(<span class="hljs-number">1000</span>);<br><span class="hljs-keyword">for</span>(;num!=<span class="hljs-number">4</span>;)&#123;<br><span class="hljs-keyword">for</span>(;count!=<span class="hljs-number">5</span>;)&#123;<br><span class="hljs-keyword">switch</span>(num)&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:postOne(count);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:postTwo(count);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:postThree(count);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>Sleep(<span class="hljs-number">400</span>); <br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>count++;<br>&#125;<br>count--;<br><span class="hljs-keyword">for</span>(;count!=<span class="hljs-number">-1</span>;)&#123;<br><span class="hljs-keyword">switch</span>(num)&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:postOne(count);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:postTwo(count);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:postThree(count);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>Sleep(<span class="hljs-number">200</span>); <br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>count--;<br>&#125;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>Sleep(<span class="hljs-number">1000</span>);<br>count=<span class="hljs-number">0</span>;<br>num++;<br>&#125;<br><br>&#125; <br><span class="hljs-comment">//å‰§æƒ…â€”â€”èƒŒæ™¯å¼•å…¥</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">background</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-type">char</span> test[<span class="hljs-number">1000</span>]=<span class="hljs-string">&quot;\n \n \n \n \t\t\tè¡€ è…¥ çš„ é£ æ”¾ è‚† å˜² ç¬‘ \n \t\t\tæ¼« å¤© çš„ é»„ å¶ \n \t\t\tè¿™ å¤ å ¡ çš„ è·¯ \n \t\t\tå·² æ¨ª å°¸ é é‡ \n \t\t\tå¬ è¯´ \n \t\t\tä½  è½ å…¥ å° é—­ çš„ åœ° ç‰¢ \n \t\t\tå‘ ä¸ å‡º æ±‚ æ•‘ çš„ è®¯ å· \n \t\t\tæˆ‘ æŠ˜ è¿” è¿™ å¤ å ¡ \n \t\t\tæ ç€ åˆ€ \n \t\t\tæ€ çº¢ äº† çœ¼ \n \t\t\tä¸ ä¾ ä¸ é¥¶ \n&quot;</span>;<br><span class="hljs-type">char</span> *p ;<br>p = strtok(test,<span class="hljs-string">&quot; &quot;</span>);<br><span class="hljs-keyword">while</span>(p)&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,p);<br>p = strtok(<span class="hljs-literal">NULL</span>,<span class="hljs-string">&quot; &quot;</span>);<br>Sleep(<span class="hljs-number">100</span>);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\tæŒ‰ä»»æ„é”®ç»§ç»­\n&quot;</span>);<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125; <br><span class="hljs-comment">//æ­£åœ¨åŠ è½½ä¸­</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">jiazai</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">1</span>;i++)&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\tè¯·ç¨ç­‰ï¼Œæ­£åœ¨åŠ è½½ä¸­...\n&quot;</span>);Sleep(<span class="hljs-number">15</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t  ç¨ç­‰ï¼Œæ­£åœ¨åŠ è½½ä¸­...\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t  ç¨\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·  ç­‰ï¼Œæ­£åœ¨åŠ è½½ä¸­...\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t    ç­‰\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·ç¨  ï¼Œæ­£åœ¨åŠ è½½ä¸­...\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t      ï¼Œ\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·ç¨ç­‰  æ­£åœ¨åŠ è½½ä¸­...\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t        æ­£\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·ç¨ç­‰ï¼Œ  åœ¨åŠ è½½ä¸­...\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t          åœ¨\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·ç¨ç­‰ï¼Œæ­£  åŠ è½½ä¸­...\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t            åŠ \n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·ç¨ç­‰ï¼Œæ­£åœ¨  è½½ä¸­...\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t              è½½\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·ç¨ç­‰ï¼Œæ­£åœ¨åŠ   ä¸­...\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t                ä¸­\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·ç¨ç­‰ï¼Œæ­£åœ¨åŠ è½½  ...\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t                  .\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·ç¨ç­‰ï¼Œæ­£åœ¨åŠ è½½ä¸­ ..\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t                   .\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·ç¨ç­‰ï¼Œæ­£åœ¨åŠ è½½ä¸­. .\n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t                    .\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè¯·ç¨ç­‰ï¼Œæ­£åœ¨åŠ è½½ä¸­.. \n&quot;</span>);Sleep(<span class="hljs-number">50</span>);system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\tè¯·ç¨ç­‰ï¼Œæ­£åœ¨åŠ è½½ä¸­...\n&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125;<br>&#125; <br><span class="hljs-comment">//å‰§æƒ…â€”â€”ç»“å°¾</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">last</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n\n\t\t\tç‹&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å­&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çœ‹&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è§&quot;</span>);Sleep(<span class="hljs-number">500</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ¥&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‰¾&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è‡ª&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å·±&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çš„&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å…¬&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸»\n&quot;</span>);Sleep(<span class="hljs-number">2000</span>);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\té&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å¸¸&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çš„&quot;</span>);Sleep(<span class="hljs-number">600</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é«˜å…´&quot;</span>);Sleep(<span class="hljs-number">300</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç‹å­&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å°é‘«&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å°†å…¬ä¸»&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‹¥å…¥æ€€ä¸­\n&quot;</span>);Sleep(<span class="hljs-number">1000</span>);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tç‹å­ï¼š\n&quot;</span>); Sleep(<span class="hljs-number">2000</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæˆ‘&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä»¥ä¸º&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åœ¨ä¹Ÿ&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è§ä¸åˆ°&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä½ äº†ï¼&quot;</span>);Sleep(<span class="hljs-number">3000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\tä¸¤&quot;</span>);Sleep(<span class="hljs-number">400</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;äºº&quot;</span>);Sleep(<span class="hljs-number">400</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç´§&quot;</span>);Sleep(<span class="hljs-number">400</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç´§&quot;</span>);Sleep(<span class="hljs-number">400</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›¸&quot;</span>);Sleep(<span class="hljs-number">400</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‹¥\n&quot;</span>);Sleep(<span class="hljs-number">5000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»ï¼š\n&quot;</span>);Sleep(<span class="hljs-number">2000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè·ç¦»&quot;</span>);Sleep(<span class="hljs-number">1000</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç»ˆç©¶&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ²¡&quot;</span>);Sleep(<span class="hljs-number">700</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;èƒ½é˜»æŒ¡&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æˆ‘ä»¬&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çš„çˆ±\n&quot;</span>);Sleep(<span class="hljs-number">2000</span>);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæˆ‘ä¸æƒ³&quot;</span>);Sleep(<span class="hljs-number">700</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å¤±å»&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä½ ï¼Œ&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å¯æ˜¯&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æˆ‘ã€‚ã€‚ã€‚ã€‚\n&quot;</span>);Sleep(<span class="hljs-number">2000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæˆ‘çš„&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç‹å­æ®¿ä¸‹&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æˆ‘&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çˆ±&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä½ \n&quot;</span>);Sleep(<span class="hljs-number">2000</span>);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\tå…¬&quot;</span>);Sleep(<span class="hljs-number">700</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸»&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è½¬&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;èº«&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);Sleep(<span class="hljs-number">2000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\té»‘&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç™½&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ†&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ˜&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çš„&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çœ¼&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çœ¸&quot;</span>);Sleep(<span class="hljs-number">700</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ³›&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç€&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çº¢&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å®&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çŸ³&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸€&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ·&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;çš„&quot;</span>);Sleep(<span class="hljs-number">700</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å…‰&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ³½\n&quot;</span>);Sleep(<span class="hljs-number">2000</span>);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\tå¥¹&quot;</span>);Sleep(<span class="hljs-number">700</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆä¸€æ¬¡&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ¶ˆå¤±&quot;</span>);Sleep(<span class="hljs-number">200</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸è§\n&quot;</span>);Sleep(<span class="hljs-number">2000</span>);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tç‹&quot;</span>);Sleep(<span class="hljs-number">700</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å­&quot;</span>);Sleep(<span class="hljs-number">300</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç—›&quot;</span>);Sleep(<span class="hljs-number">200</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å“­ï¼š\n&quot;</span>);Sleep(<span class="hljs-number">5000</span>);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæˆ‘ä¸€å®š&quot;</span>);Sleep(<span class="hljs-number">1000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æŠŠä½ &quot;</span>);Sleep(<span class="hljs-number">1000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‰¾&quot;</span>);Sleep(<span class="hljs-number">1000</span>);<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å›æ¥ï¼ï¼\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\tæŒ‰ä»»æ„é”®ç»§ç»­\n&quot;</span>);<br>getch();<br>&#125;  <br> <span class="hljs-comment">//è¿›åº¦æ¡</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">load</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>&#123;<br><span class="hljs-type">int</span> i=<span class="hljs-number">0</span>,j=<span class="hljs-number">0</span>,count=<span class="hljs-number">0</span>;<br>system(<span class="hljs-string">&quot;color 73&quot;</span>);<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">50</span>;i++)&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n\n\t\t\t\t     Installing%d%%\n&quot;</span>,count);<br><span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>;j&lt;=count/<span class="hljs-number">2</span>;j++)&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;_&quot;</span>);<br>&#125;<br><span class="hljs-keyword">if</span>(count!=<span class="hljs-number">100</span>)&#123;<br>count=count+<span class="hljs-number">2</span>;<br>Sleep(<span class="hljs-number">10</span>);<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>Sleep(<span class="hljs-number">500</span>);<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br>&#125;<br>&#125; <br><span class="hljs-comment">//æ•ˆæœä¸€</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">actionOne</span><span class="hljs-params">()</span>&#123;<br>Sleep(<span class="hljs-number">1000</span>);<br>system(<span class="hljs-string">&quot;color 75&quot;</span>);<br>Sleep(<span class="hljs-number">1000</span>);<br>system(<span class="hljs-string">&quot;color 71&quot;</span>);<br>Sleep(<span class="hljs-number">1000</span>);<br>system(<span class="hljs-string">&quot;color 72&quot;</span>);<br>Sleep(<span class="hljs-number">1000</span>);<br>system(<span class="hljs-string">&quot;color 74&quot;</span>);<br>Sleep(<span class="hljs-number">1000</span>);<br>system(<span class="hljs-string">&quot;color 70&quot;</span>);<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125; <br><span class="hljs-comment">//è˜‘è‡</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">monsterOne</span><span class="hljs-params">()</span>&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t\tå¯çˆ±çš„è˜‘è‡ç”œç”œ\n\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t           &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;           \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t        &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;         \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t      &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;Â§      \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t    &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;     \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t   &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;   \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t  &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;ç¬ç¬ç¬ç¬ç¬ &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;  \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t  &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;ã€â‰¯   â‰®  ã€ƒ&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27; \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t   &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;ã€      ãƒŸ ã€ƒ&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;  \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t      ã€ƒã€ƒ   ï¸º     ã€ƒã€ƒ      \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t         &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;         \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t         &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;         \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t         &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;         \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t         &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;         \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t         &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;         \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t          &#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;          \n&quot;</span>);<br>&#125; <br><span class="hljs-comment">//å¥³å·«</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">monsterTwo</span><span class="hljs-params">()</span>&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t      å¯æ¶çš„å·«å©†\n\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t           @@@\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t          #   #\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t         / \\     \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t       /  @-.\\\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t     /_  )\\\\  _\\\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t    /\\/\\/ | \\/\\/\\\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t       /~~~~~\\\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t      |  ^ ^  |\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t      |   .   |\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t      | (\\_/) |\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t  / .-. \\___/ .-. \\\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t @/` /.-.   .-.\\ `\\@\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t    @`   \\ /   `@\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125; <br><span class="hljs-comment">//å¨å¸ˆ </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">monsterThree</span><span class="hljs-params">()</span>&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t      å¥‡å¨å¸ˆä½³å€©\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t               ã€ƒã€ƒã€ƒ         \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t             â‰ˆâ‰ˆâ‰ˆâ‰ˆâ„–         \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t           â‰ˆâ‰ˆâ‰ˆâ‰ˆã„¨ Î¾Î¶      \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t          â‰ˆâ‰ˆç¬ç¬ç¬ç¬ç¬Î¾Î¾    \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t        âˆšâˆ«âˆ«âˆ«       Î¶Î¾Î¾   \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t       âˆ«âˆ«âˆ«âˆ« E    E   Î¶Î¾Î¾ \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t       âˆ«âˆ«âˆ«âˆ«~       ãƒŸÎ¶Î¾Î¾ \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t       âˆ«âˆ«âˆ«âˆ«    -     Î¶Î¾Î¾ \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t       âˆ«âˆ«âˆ«âˆ«      ã„¨         \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n\n&quot;</span>);<br>&#125;<br><span class="hljs-comment">//ç§»åŠ¨çš„æ€»å‡½æ•° </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">move</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>&#123;<br><span class="hljs-keyword">for</span>(;;)&#123;<br><span class="hljs-type">char</span> position=getch();<br><span class="hljs-keyword">switch</span>(position)&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;w&#x27;</span>:zd=moveUp(zd,a);<br>  system(<span class="hljs-string">&quot;cls&quot;</span>);<br>  zd=ShowMap(zd,a);<br> <span class="hljs-keyword">break</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;a&#x27;</span>:zd=moveLeft(zd,a);<br>          system(<span class="hljs-string">&quot;cls&quot;</span>);<br>  zd=ShowMap(zd,a);<br> <span class="hljs-keyword">break</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;s&#x27;</span>:zd=moveDown(zd,a);<br>  system(<span class="hljs-string">&quot;cls&quot;</span>);<br>  zd=ShowMap(zd,a);<br> <span class="hljs-keyword">break</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;d&#x27;</span>:zd=moveRight(zd,a);<br> <span class="hljs-keyword">if</span>(zd.person.is_over==<span class="hljs-number">0</span>)&#123;<br>     system(<span class="hljs-string">&quot;cls&quot;</span>);<br>  zd=ShowMap(zd,a);<br> &#125; <br>  <span class="hljs-keyword">break</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;c&#x27;</span>:<span class="hljs-comment">//æŸ¥çœ‹äººç‰©ä¿¡æ¯ </span><br> <span class="hljs-keyword">if</span>(zd.person.actor==<span class="hljs-number">1</span>)&#123;<br> zd=information(zd,a);<br>  system(<span class="hljs-string">&quot;cls&quot;</span>);<br>  zd=ShowMap(zd,a);<br> &#125;<br> <span class="hljs-keyword">break</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;p&#x27;</span>:<span class="hljs-comment">//è¿›å…¥å•†åº— </span><br> <span class="hljs-keyword">if</span>(zd.person.shop==<span class="hljs-number">1</span>)&#123;<br> zd=SHOP(zd);<br>  system(<span class="hljs-string">&quot;cls&quot;</span>);<br>  zd=ShowMap(zd,a);<br> &#125;<br> <span class="hljs-keyword">break</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;b&#x27;</span>:<span class="hljs-comment">//æŸ¥çœ‹æ€ªç‰©å›¾è°± </span><br>  <span class="hljs-keyword">if</span>(zd.person.backpack==<span class="hljs-number">1</span>)&#123;<br>  zd=monsterBP(zd,a);<br>  system(<span class="hljs-string">&quot;cls&quot;</span>);<br>  zd=ShowMap(zd,a);<br>  &#125;<br> <span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">if</span>(zd.person.is_over==<span class="hljs-number">1</span>)&#123;<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> zd;<br>&#125; <br><span class="hljs-comment">//å‘ä¸Šç§»åŠ¨ </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">moveUp</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>&#123;<br><span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">3</span>||a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">13</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ç©ºæ ¼ </span><br>a[zd.person.z_x][zd.person.z_y]=<span class="hljs-number">3</span>;<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">2</span>;<br>zd.person.z_x=zd.person.z_x<span class="hljs-number">-1</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">4</span>)&#123;<span class="hljs-comment">//æ”¶é›†é•‡é­‚ä¹‹ç‰ </span><br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>zd.person.jade++;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ”¶é›†åˆ°%dä¸ªé•‡é­‚ä¹‹ç‰\n\t\té›†é½4ä¸ªé•‡é­‚ä¹‹ç‰æ‰å¯ä»¥æ•‘ç‹å­&quot;</span>,zd.person.jade);<br><span class="hljs-keyword">if</span>(zd.person.jade==<span class="hljs-number">4</span>)&#123;<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tä½ å·²é›†é½4é¢—é•‡é­‚ä¹‹ç‰\n\t\tå¿«å»æ•‘ä½ çš„ç‹å­å§\n&quot;</span>);<br>&#125;<br>getch();<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">10</span>)&#123;<span class="hljs-comment">//æ¿€æ´»æ€ªç‰©å›¾è°± </span><br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\tæ™ºè€…ï¼š\n\t\t\t    æ­å–œä½ è·å¾—æ€ªç‰©å›¾è°±ä¸€æœ¬ï¼Œ\n\t\t\t    æ¸¸æˆä¸­æŒ‰bé”®å¯éšæ—¶æŸ¥çœ‹æ€ªç‰©ä¿¡æ¯\n&quot;</span>);<br>zd.person.backpack=<span class="hljs-number">1</span>;<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>getch();<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">14</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯å°å²è±å§†æ€ª </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m1Lose)&#123;<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>zd=fightM1(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">15</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯å¤§å²è±å§†æ€ª </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m2Lose)&#123;<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>zd=fightM2(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">16</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯é‚ªæ¶å·«å¸ˆ </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m3Lose)&#123;<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>zd=fightM3(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">17</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŒå‰‘æ­¦å£« </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m4Lose)&#123;<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>zd=fightM4(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">100</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯å¤§æ³•å¸ˆ </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m5Lose)&#123;<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>zd=fightM5(zd);<br>zd.person.is_over=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">return</span> zd; <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">18</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ æ”»å‡»åŠ›2ç‚¹ </span><br>zd=addCarry(zd);<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">19</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ é˜²å¾¡åŠ›2ç‚¹ </span><br>zd=addDefend(zd);<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">23</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ æ”»å‡»åŠ›10ç‚¹ </span><br>zd=addCarry10(zd);<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">24</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ é˜²å¾¡åŠ›10ç‚¹ </span><br>zd=addDefend10(zd);<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]==<span class="hljs-number">7</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ è¡€200 </span><br>zd=addHp(zd);<br>a[zd.person.z_x<span class="hljs-number">-1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br> <span class="hljs-comment">//å‘ä¸‹ç§»åŠ¨ </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">moveDown</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>&#123;<br><span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">3</span>||a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">13</span>)&#123;<span class="hljs-comment">//å‘ä¸‹ä¸€æ­¥æ˜¯ç©ºæ ¼ </span><br>a[zd.person.z_x][zd.person.z_y]=<span class="hljs-number">3</span>;<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">2</span>;<br>zd.person.z_x=zd.person.z_x+<span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">12</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ä¸‹ä¸€æ¥¼ </span><br>zd.person.<span class="hljs-built_in">floor</span>=<span class="hljs-number">1</span>;<br>ShowMap(zd,map2);<br>zd.person.z_x=<span class="hljs-number">1</span>;<br>zd.person.z_y=<span class="hljs-number">1</span>; <br>zd=move(zd,map2);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">21</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ä¸Šä¸‰æ¥¼ </span><br>zd.person.<span class="hljs-built_in">floor</span>=<span class="hljs-number">3</span>;<br>ShowMap(zd,map4);<br>zd.person.z_x=<span class="hljs-number">17</span>;<br>zd.person.z_y=<span class="hljs-number">9</span>;<br>zd=move(zd,map4);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">22</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ä¸‹äºŒæ¥¼ </span><br>zd.person.<span class="hljs-built_in">floor</span>=<span class="hljs-number">2</span>;<br>ShowMap(zd,map3);<br>zd.person.z_x=<span class="hljs-number">17</span>;<br>zd.person.z_y=<span class="hljs-number">17</span>;<br>zd=move(zd,map3);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">31</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ä¸Šå››æ¥¼ </span><br>zd.person.<span class="hljs-built_in">floor</span>=<span class="hljs-number">4</span>;<br>ShowMap(zd,map5);<br>zd.person.z_x=<span class="hljs-number">17</span>;<br>zd.person.z_y=<span class="hljs-number">2</span>;<br>zd=move(zd,map5);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">32</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ä¸‹ä¸‰æ¥¼ </span><br>zd.person.<span class="hljs-built_in">floor</span>=<span class="hljs-number">3</span>;<br>ShowMap(zd,map4);<br>zd.person.z_x=<span class="hljs-number">17</span>;<br>zd.person.z_y=<span class="hljs-number">2</span>;<br>zd=move(zd,map4);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">41</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ä¸Šäº”æ¥¼ </span><br>zd.person.<span class="hljs-built_in">floor</span>=<span class="hljs-number">5</span>;<br>ShowMap(zd,map6);<br>zd.person.z_x=<span class="hljs-number">17</span>;<br>zd.person.z_y=<span class="hljs-number">17</span>;<br>zd=move(zd,map6);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">42</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ä¸‹å››æ¥¼ </span><br>zd.person.<span class="hljs-built_in">floor</span>=<span class="hljs-number">4</span>;<br>ShowMap(zd,map5);<br>zd.person.z_x=<span class="hljs-number">17</span>;<br>zd.person.z_y=<span class="hljs-number">17</span>;<br>zd=move(zd,map5);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">5</span>) &#123;<span class="hljs-comment">//å‘ä¸‹ä¸€æ­¥æ˜¯ç¬¬ä¸€ä¸ªæ€ªç‰© (1)</span><br>jiazai();<br>monsterOne();<br>sceneFirst();<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">50</span>) &#123;<span class="hljs-comment">//å‘ä¸‹ä¸€æ­¥æ˜¯ç¬¬ä¸€ä¸ªæ€ªç‰© (2)</span><br>jiazai();<br>monsterOne();<br>sceneFirstII();<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">8</span>) &#123;<span class="hljs-comment">//å‘ä¸‹ä¸€æ­¥æ˜¯ç¬¬äºŒä¸ªæ€ªç‰© </span><br>jiazai();<br>monsterTwo();<br>sceneSecond();<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">9</span>) &#123;<span class="hljs-comment">//å‘ä¸‹ä¸€æ­¥æ˜¯ç¬¬ä¸‰ä¸ªæ€ªç‰© </span><br>jiazai();<br>monsterThree();<br>sceneThird();<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">14</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯å°å²è±å§†æ€ª </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m1Lose)&#123;<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>zd=fightM1(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">15</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯å¤§å²è±å§†æ€ª </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m2Lose)&#123;<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>zd=fightM2(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">16</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯é‚ªæ¶å·«å¸ˆ </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m3Lose)&#123;<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>zd=fightM3(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">17</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŒå‰‘æ­¦å£« </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m4Lose)&#123;<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>zd=fightM4(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">18</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ æ”»å‡»åŠ›2ç‚¹ </span><br>zd=addCarry(zd);<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">19</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ é˜²å¾¡åŠ›2ç‚¹ </span><br>zd=addDefend(zd);<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">23</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ æ”»å‡»åŠ›10ç‚¹ </span><br>zd=addCarry10(zd);<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">24</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ é˜²å¾¡åŠ›10ç‚¹ </span><br>zd=addDefend10(zd);<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">7</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ è¡€200 </span><br>zd=addHp(zd);<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]==<span class="hljs-number">4</span>)&#123;<br>a[zd.person.z_x+<span class="hljs-number">1</span>][zd.person.z_y]=<span class="hljs-number">3</span>;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>zd.person.jade++;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ”¶é›†åˆ°%dä¸ªé•‡é­‚ä¹‹ç‰\n\t\té›†é½4ä¸ªé•‡é­‚ä¹‹ç‰æ‰å¯ä»¥æ•‘ç‹å­&quot;</span>,zd.person.jade);<br><span class="hljs-keyword">if</span>(zd.person.jade==<span class="hljs-number">4</span>)&#123;<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tä½ å·²é›†é½4é¢—é•‡é­‚ä¹‹ç‰\n\t\tå¿«å»æ•‘ä½ çš„ç‹å­å§\n&quot;</span>);<br>&#125;<br>getch();<br>&#125;<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br> <span class="hljs-comment">//å‘å·¦ç§»åŠ¨ </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">moveLeft</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>&#123;<br><span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">3</span>||a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">13</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ç©ºæ ¼ </span><br>a[zd.person.z_x][zd.person.z_y]=<span class="hljs-number">3</span>;<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">2</span>;<br>zd.person.z_y=zd.person.z_y<span class="hljs-number">-1</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">11</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ä¸ŠäºŒæ¥¼ </span><br>zd.person.<span class="hljs-built_in">floor</span>=<span class="hljs-number">2</span>;<br>ShowMap(zd,map3);<br>zd.person.z_x=<span class="hljs-number">17</span>;<br>zd.person.z_y=<span class="hljs-number">2</span>;<br>zd=move(zd,map3);<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">14</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯å°å²è±å§†æ€ª </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m1Lose)&#123;<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">3</span>;<br>zd=fightM1(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">15</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯å¤§å²è±å§†æ€ª </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m2Lose)&#123;<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">3</span>;<br>zd=fightM2(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">16</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯é‚ªæ¶å·«å¸ˆ </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m3Lose)&#123;<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">3</span>;<br>zd=fightM3(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">17</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŒå‰‘æ­¦å£« </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m4Lose)&#123;<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">3</span>;<br>zd=fightM4(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">18</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ æ”»å‡»åŠ›2ç‚¹ </span><br>zd=addCarry(zd);<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">19</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ é˜²å¾¡åŠ›2ç‚¹ </span><br>zd=addDefend(zd);<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">23</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ æ”»å‡»åŠ›10ç‚¹ </span><br>zd=addCarry10(zd);<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">24</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ é˜²å¾¡åŠ›10ç‚¹ </span><br>zd=addDefend10(zd);<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">7</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ è¡€200 </span><br>zd=addHp(zd);<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]==<span class="hljs-number">25</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯å•†åº—</span><br>zd=openshop(zd);<br>a[zd.person.z_x][zd.person.z_y<span class="hljs-number">-1</span>]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br> <span class="hljs-comment">//å‘å³ç§»åŠ¨ </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">moveRight</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>&#123;<br><span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">3</span>||a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">13</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯ç©ºæ ¼ </span><br>a[zd.person.z_x][zd.person.z_y]=<span class="hljs-number">3</span>;<br>a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]=<span class="hljs-number">2</span>;<br>zd.person.z_y=zd.person.z_y+<span class="hljs-number">1</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">6</span>&amp;&amp;zd.person.jade==<span class="hljs-number">4</span>)&#123;<span class="hljs-comment">//æ¸¸æˆé“ºå«å®Œæ¯• </span><br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>last();<br>gameBegin();<br>zd.person.is_over=<span class="hljs-number">1</span>;<br>zd.person.z_x=<span class="hljs-number">18</span>;<br>zd.person.z_y=<span class="hljs-number">10</span>;<br><span class="hljs-keyword">return</span> zd;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">14</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯å°å²è±å§†æ€ª </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m1Lose)&#123;<br>a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]=<span class="hljs-number">3</span>;<br>zd=fightM1(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">15</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯å¤§å²è±å§†æ€ª </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m2Lose)&#123;<br>a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]=<span class="hljs-number">3</span>;<br>zd=fightM2(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">16</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯é‚ªæ¶å·«å¸ˆ </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m3Lose)&#123;<br>a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]=<span class="hljs-number">3</span>;<br>zd=fightM3(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">17</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŒå‰‘æ­¦å£« </span><br><span class="hljs-keyword">if</span>(zd.person.hp&gt;zd.ms.m4Lose)&#123;<br>a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]=<span class="hljs-number">3</span>;<br>zd=fightM4(zd); <br>&#125;<span class="hljs-keyword">else</span> &#123;<br>faild(zd);<br>&#125; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">18</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ æ”»å‡»åŠ›2ç‚¹ </span><br>zd=addCarry(zd);<br>a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">19</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ é˜²å¾¡åŠ›2ç‚¹ </span><br>zd=addDefend(zd);<br>a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">23</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ æ”»å‡»åŠ›10ç‚¹ </span><br>zd=addCarry10(zd);<br>a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">24</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ é˜²å¾¡åŠ›10ç‚¹ </span><br>zd=addDefend10(zd);<br>a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]=<span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]==<span class="hljs-number">7</span>)&#123;<span class="hljs-comment">//ä¸‹ä¸€æ­¥æ˜¯åŠ è¡€200 </span><br>zd=addHp(zd);<br>a[zd.person.z_x][zd.person.z_y+<span class="hljs-number">1</span>]=<span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//æŸ¥çœ‹äººç‰©ä¿¡æ¯</span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">information</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\t    äººç‰©å±æ€§\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæ˜µç§°  ï¼š%s\n&quot;</span>,zd.person.name);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tç”Ÿå‘½å€¼ï¼š%d\n&quot;</span>,zd.person.hp);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæ”»å‡»  ï¼š%d\n&quot;</span>,zd.person.carry);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\té˜²å¾¡  ï¼š%d\n&quot;</span>,zd.person.defend);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\té‡‘å¸  ï¼š%d\n&quot;</span>,zd.person.fortune);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125; <br><span class="hljs-comment">//æ€ªç‰©å›¾è°±</span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">monsterBP</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd,<span class="hljs-type">int</span> a[<span class="hljs-number">20</span>][<span class="hljs-number">20</span>])</span>&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\t\t    &lt;æ€ªç‰©å›¾è°±&gt;\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tâ—‹:%-10s   è¡€é‡ï¼š%4d  æ”»å‡»ï¼š%-4d   é˜²å¾¡ï¼š%-4d   æŸè¡€ï¼š%s\n\n&quot;</span>,zd.ms.m1_name,zd.ms.m1_hp,zd.ms.m1_carry,zd.ms.m1_defend,zd.ms.m1_lose); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tâ—:%-10s   è¡€é‡ï¼š%4d  æ”»å‡»ï¼š%-4d   é˜²å¾¡ï¼š%-4d   æŸè¡€ï¼š%s\n\n&quot;</span>,zd.ms.m2_name,zd.ms.m2_hp,zd.ms.m2_carry,zd.ms.m2_defend,zd.ms.m2_lose); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tâ˜†:%-10s   è¡€é‡ï¼š%4d  æ”»å‡»ï¼š%-4d   é˜²å¾¡ï¼š%-4d   æŸè¡€ï¼š%s\n\n&quot;</span>,zd.ms.m3_name,zd.ms.m3_hp,zd.ms.m3_carry,zd.ms.m3_defend,zd.ms.m3_lose); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tÂ¤:%-10s   è¡€é‡ï¼š%4d  æ”»å‡»ï¼š%-4d   é˜²å¾¡ï¼š%-4d   æŸè¡€ï¼š%s\n\n&quot;</span>,zd.ms.m4_name,zd.ms.m4_hp,zd.ms.m4_carry,zd.ms.m4_defend,zd.ms.m4_lose); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tâ„–:%-10s   è¡€é‡ï¼š%4d  æ”»å‡»ï¼š%-4d   é˜²å¾¡ï¼š%-4d   æŸè¡€ï¼š%s\n\n&quot;</span>,zd.ms.m5_name,zd.ms.m5_hp,zd.ms.m5_carry,zd.ms.m5_defend,zd.ms.m5_lose); <br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125; <br><span class="hljs-comment">//å•†åº— </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">SHOP</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br><span class="hljs-keyword">for</span>(;;)&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\t\t  &lt;é­”æ³•å•†åº—&gt;\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\täº²çˆ±çš„%sï¼ŒèŠ±%dé‡‘å¸ä½ å¯ä»¥è´­ä¹°\n\n&quot;</span>,zd.person.name,zd.person.money);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t\tj ã€2ç‚¹æ”»å‡»åŠ›\n\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t\tk ã€2ç‚¹é˜²å¾¡åŠ›\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t\tl ã€ç¦»å¼€\n\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæ‚¨å½“å‰é‡‘å¸ä½™é¢ä¸ºï¼š%d\n\n\t\t\tè¯·è¾“å…¥ä½ é€‰æ‹©çš„é¡¹ç›®ä»£å·ï¼ˆå¦‚ j ï¼‰ï¼š\n\n&quot;</span>,zd.person.fortune);<br><span class="hljs-type">char</span> num1=getchar();<br><span class="hljs-type">char</span> num=getchar();<br><span class="hljs-keyword">switch</span>(num)&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;j&#x27;</span>:<span class="hljs-keyword">if</span>(zd.person.fortune&gt;=zd.person.money)&#123;<span class="hljs-comment">//åŠ æ”»å‡»åŠ›2ç‚¹ </span><br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>zd.person.fortune=zd.person.fortune-zd.person.money;<br>zd.person.carry=zd.person.carry+<span class="hljs-number">2</span>;<br>zd.person.money=zd.person.money*<span class="hljs-number">2</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\tæ‚¨çš„æ”»å‡»åŠ›æå‡äº†2ç‚¹\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tå½“å‰æ”»å‡»åŠ›ä¸ºï¼š%d\n\n&quot;</span>,zd.person.carry);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæ‚¨è¿˜å‰©ä¸‹é‡‘å¸ï¼š%d\n\n&quot;</span>,zd.person.fortune);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\tå¾ˆæŠ±æ­‰ï¼Œæ‚¨æ²¡æœ‰è¶³å¤Ÿçš„é‡‘å¸\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;k&#x27;</span>:<span class="hljs-keyword">if</span>(zd.person.fortune&gt;=zd.person.money)&#123;<span class="hljs-comment">//åŠ é˜²å¾¡åŠ›2ç‚¹ </span><br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>zd.person.fortune=zd.person.fortune-zd.person.money;<br>zd.person.defend=zd.person.defend+<span class="hljs-number">2</span>;<br>zd.person.money=zd.person.money*<span class="hljs-number">2</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\tæ‚¨çš„é˜²å¾¡åŠ›æå‡äº†2ç‚¹\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tå½“å‰é˜²å¾¡åŠ›ä¸ºï¼š%d\n\n&quot;</span>,zd.person.defend);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæ‚¨è¿˜å‰©ä¸‹é‡‘å¸ï¼š%d\n\n&quot;</span>,zd.person.fortune);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\tå¾ˆæŠ±æ­‰ï¼Œæ‚¨æ²¡æœ‰è¶³å¤Ÿçš„é‡‘å¸\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;l&#x27;</span>: <span class="hljs-keyword">return</span> zd;<span class="hljs-comment">//è¿”å› </span><br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:system(<span class="hljs-string">&quot;cls&quot;</span>);<span class="hljs-comment">//è¾“å…¥é”™è¯¯ </span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\tè¾“å…¥é”™è¯¯ï¼ï¼ï¼\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd; <br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> zd;<br>&#125; <br><span class="hljs-type">int</span> <span class="hljs-title function_">sceneFirst</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>&#123;<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t===============================\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè·¯é‡é‡ç”Ÿè˜‘è‡ä¸€æš\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t===============================\n\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»(å—¨æ£®)ï¼š\n\t\t\tå¥½å¯çˆ±å•Šï¼\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè˜‘è‡ç”œç”œï¼ˆå¾®ç¬‘ï¼‰ï¼š\n\t\t\tå¸¦æˆ‘å›å®¶å§ï¼Œæˆ‘ä¼šé™ªä½ åº¦è¿‡å¾ˆå¤šç¾å¥½æ—¶å…‰.\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»ï¼ˆçš±çœ‰ï¼‰ï¼š\n\t\t\tå¯¹ä¸èµ·å“¦ï¼Œæˆ‘å·²ç»æœ‰é™ªæˆ‘åº¦è¿‡ç¾å¥½æ—¶å…‰çš„äººäº†ï¼Œæˆ‘è¦å»æ‰¾ä»–\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè˜‘è‡ç”œç”œï¼ˆéš¾è¿‡ï¼‰ï¼š\n\t\t\té‚£ä½ åªæœ‰æŠŠæˆ‘æ€äº†æ‰å¯ä»¥è¿‡å»\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»å¸¦ç€æµ…æµ…ç¬‘æ„ï¼Œç¼“ç¼“èµ·èº«\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè½»è½»åˆä¸Šåˆ€å‰‘ï¼Œå¾å¾å‰è¡Œ\n&quot;</span>);getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br><span class="hljs-type">int</span> <span class="hljs-title function_">sceneFirstII</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>&#123;<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t===============================\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tè·¯é‡é‡ç”Ÿè˜‘è‡ä¸€æš\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t===============================\n\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè˜‘è‡ç”œç”œï¼ˆå¹³é™ï¼‰ï¼š\n\t\t\tå¦‚æœå†ç»™ä½ ä¸€æ¬¡æœºä¼šï¼Œä½ ä¼šé€‰æˆ‘å—ï¼Ÿ\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»ï¼ˆå†·æ¼ ï¼‰ï¼š\n\t\t\tä¸ä¼š\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè˜‘è‡ç”œç”œï¼ˆéš¾è¿‡ï¼‰ï¼š\n\t\t\tå»æ‹¿ä¸‹ä¸€ä¸ªé•‡é­‚ä¹‹ç‰å§ï¼Œæ—©ç‚¹æ•‘åˆ°ç‹å­ã€‚\n&quot;</span>);getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">sceneSecond</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>&#123;<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t===============================\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\té­é‡åˆ°å¯æ¶çš„å·«å©†\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t===============================\n\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå·«å©†ï¼ˆç¬‘ç›ˆç›ˆï¼‰ï¼š\n\t\t\tå¹´è½»çš„å…¬ä¸»å“Ÿï¼Œæˆ‘æœ‰ä¸€ä»¶å¥‡å¹»è¿è¡£è£™ï¼Œç©¿ä¸Šå®ƒï¼Œ\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tä½ å°†æˆä¸ºä¸¾ä¸–ç©ç›®çš„äººï¼Œå€¾å›½å€¾åŸ\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»ï¼ˆè­¦è§‰ï¼‰ï¼š\n\t\t\täº¤æ¢æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå·«å©†ï¼ˆç¬‘ç›ˆç›ˆï¼‰ï¼š\n\t\t\tä½ åªéœ€è¦åŸè·¯è¿”å›ï¼Œç‹å­çš„èº«ä½“ä¾›æˆ‘äº«ä¹\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»ï¼ˆå¤§æ€’ï¼‰ï¼š\n\t\t\tæ·«é‚ªçš„å·«å©†ï¼Œæˆ‘è¦æ€äº†ä½ \n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå·«å©†ï¼ˆé˜´é™©åœ°ç¬‘ï¼‰ï¼š\n\t\t\té‚£å°±æ²¡åŠæ³•äº†ï¼Œå‡ºæ‰‹å§ï¼\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»è½»ç¬‘ï¼Œå†ä¸€æ¬¡å±•ç¤ºäº†æ€æ‰‹ç´ å…»ã€‚\n&quot;</span>);getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">sceneThird</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>&#123;<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t===============================\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\t é‡åˆ°è¥¿å›½å¥‡å¨å¸ˆ\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t===============================\n\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tæŸæŸï¼ˆå†·æ¼ ï¼‰ï¼š\n\t\t\tèƒ½èµ°åˆ°è¿™å„¿ï¼Œæˆ‘æƒ³ä½ å·²ç»å¾ˆæ¸…æ¥šï¼Œ\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè¦é€šè¿‡å»å¤å ¡çš„è·¯ï¼Œå¿…é¡»...é™¤æ‰æˆ‘ä»¬è¿™ç¾¤æš§æ˜§å…š\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»æ‹”å‰‘ï¼š\n\t\t\tæ¥å§\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tç©ºæ°”ä¸­å¼¥æ¼«ç€å„ç§æƒ…ä»‡çš„å‘³é“\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»ä¸¾å‰‘ï¼Œç›´åˆºå‘æŸæŸå¿ƒè„\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t20cm,æŸæŸæ²¡æœ‰åŠ¨é™\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t10cm,æŸæŸæ²¡æœ‰åŠ¨é™\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\té²œè¡€æ®·çº¢äº†æŸæŸç™½è‰²çš„è¡£æœ\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tæŸæŸï¼š\n\t\t\tä½ è¿‡å»å§\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»æ„£ä½ä¸¤ç§’ï¼Œç”¨åŠ›æŠ½å‡ºæ»¡æ˜¯é²œè¡€çš„å‰‘\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tå…¬ä¸»å‰è¡Œ,å¥¹ä¸€å¥è¯ï¼Œåˆåœä½è„šæ­¥\n&quot;</span>);getch();<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tæŸæŸï¼š\n\t\t\tæˆ‘å’Œä½ æœ‰ç›¸ä¼¼çš„è¿‡å¾€\n&quot;</span>);getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">gameBegin</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>); <br>system(<span class="hljs-string">&quot;color 07&quot;</span>);<br><span class="hljs-type">char</span> test[<span class="hljs-number">1000</span>]=<span class="hljs-string">&quot;\n\n\n\t\t\tä½  ä»¥ ä¸º æˆ‘ ä»¬ çš„ æ¸¸ æˆ å·² ç» ç»“ æŸ äº† ï¼Ÿé‚£ åª æ˜¯ èƒŒ æ™¯ ä»‹ ç»ï¼Œ \n\t\t\t æ¸¸ æˆ æ‰ åˆš åˆš å¼€ å§‹\n&quot;</span>;<br><span class="hljs-type">char</span> *p ;<br>p = strtok(test,<span class="hljs-string">&quot; &quot;</span>);<br><span class="hljs-keyword">while</span>(p)&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,p);<br>p = strtok(<span class="hljs-literal">NULL</span>,<span class="hljs-string">&quot; &quot;</span>);<br>Sleep(<span class="hljs-number">100</span>);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\t\tæŒ‰ä»»æ„é”®ç»§ç»­...\n&quot;</span>);<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125;<br><span class="hljs-comment">//æ­£å¼çš„æ¸¸æˆ</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">theme</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">switch</span>(j)&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======å…¬ä¸»æ•‘ç‹å­======â– \n&quot;</span>);two();<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======å…¬ä¸»æ•‘ç‹  ======â– \n&quot;</span>);two();<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======å…¬ä¸»æ•‘    ======â– \n&quot;</span>);two();<br><span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======å…¬ä¸»      ======â– \n&quot;</span>);two();<br><span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======å…¬        ======â– \n&quot;</span>);two();<br><span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======          ======â– \n&quot;</span>);two();<br><span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======ç‹        ======â– \n&quot;</span>);two();<br><span class="hljs-keyword">case</span> <span class="hljs-number">8</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======ç‹å­      ======â– \n&quot;</span>);two();<br><span class="hljs-keyword">case</span> <span class="hljs-number">9</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======ç‹å­æ•‘    ======â– \n&quot;</span>);two();<br><span class="hljs-keyword">case</span> <span class="hljs-number">10</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======ç‹å­æ•‘å…¬  ======â– \n&quot;</span>);two();<br><span class="hljs-keyword">case</span> <span class="hljs-number">11</span>:one();<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======ç‹å­æ•‘å…¬ä¸»======â– \n&quot;</span>);two();<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tâ– â– â– â– â– â– â– â– â– â– â– â– â– \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======================â– \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ====== çˆ±çš„å¾é€” ======â– \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======================â– \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– â– â– â– â– â– â– â– â– â– â– â– â– \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\tæŒ‰ä»»æ„é”®ç»§ç»­...\n&quot;</span>);<br>getch();<br>&#125; <br><span class="hljs-type">int</span> <span class="hljs-title function_">one</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tâ– â– â– â– â– â– â– â– â– â– â– â– â– \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======================â– \n&quot;</span>);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">two</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– ======================â– \n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tâ– â– â– â– â– â– â– â– â– â– â– â– â– \n&quot;</span>);<br>Sleep(<span class="hljs-number">150</span>);<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125;<br><span class="hljs-comment">//ç©å®¶æ³¨å†Œ</span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">login</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br><span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++)&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n\t\t\tä½ æ˜¯ç‹å­ï¼Œè¯·è¾“å…¥ä½ çš„è§’è‰²åï¼š\n&quot;</span>);<br>Sleep(<span class="hljs-number">5</span>);<br>system(<span class="hljs-string">&quot;color f2&quot;</span>); <br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n\t\t\t ä½ æ˜¯ç‹å­ï¼Œè¯·è¾“å…¥ä½ çš„è§’è‰²åï¼š\n&quot;</span>);<br>Sleep(<span class="hljs-number">5</span>);<br>system(<span class="hljs-string">&quot;color f4&quot;</span>);<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125; <br>system(<span class="hljs-string">&quot;color f0&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\n\t\t\tä½ æ˜¯ç‹å­ï¼Œè¯·è¾“å…¥ä½ çš„è§’è‰²åï¼š\n\t\t\t\t&quot;</span>);<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,&amp;zd.person.name);<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\t\t    äººç‰©å±æ€§\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæ˜µç§°  ï¼š%s\n&quot;</span>,zd.person.name);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tç”Ÿå‘½å€¼ï¼š%d\n&quot;</span>,zd.person.hp);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\tæ”»å‡»  ï¼š%d\n&quot;</span>,zd.person.carry);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\té˜²å¾¡  ï¼š%d\n&quot;</span>,zd.person.defend);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\t\té‡‘å¸  ï¼š%d\n&quot;</span>,zd.person.fortune);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæ¸¸æˆè¿‡ç¨‹ä¸­å¯æŒ‰â€˜câ€™é”®æŸ¥çœ‹äººç‰©å±æ€§\n&quot;</span>);<br>getch();<br>zd.person.is_over=<span class="hljs-number">0</span>;<br>zd.person.actor=<span class="hljs-number">1</span>;<br>zd.person.<span class="hljs-built_in">floor</span>=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">return</span> zd;<br>&#125; <br><span class="hljs-comment">//æ‰“ä¸è¿‡</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">faild</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\täº²çˆ±çš„%sï¼Œä½ è¿˜æ‰“ä¸è¿‡å®ƒï¼\n&quot;</span>,zd.person.name);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br><span class="hljs-comment">//å’Œå°å²è±å§†æ€ªæ‰“æ–— </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">fightM1</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.hp=zd.person.hp-zd.ms.m1Lose; <br>zd.person.fortune=zd.person.fortune+<span class="hljs-number">10</span>;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨æŸå¤±äº†%dç‚¹è¡€ï¼Œæ‰“è´¥äº†%s\n&quot;</span>,zd.ms.m1Lose,zd.ms.m1_name);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè·å¾—é‡‘å¸ï¼š10\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//å’Œå¤§å²è±å§†æ€ªæ‰“æ–— </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">fightM2</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.hp=zd.person.hp-zd.ms.m2Lose; <br>zd.person.fortune=zd.person.fortune+<span class="hljs-number">20</span>;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨æŸå¤±äº†%dç‚¹è¡€ï¼Œæ‰“è´¥äº†%s\n&quot;</span>,zd.ms.m2Lose,zd.ms.m2_name);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè·å¾—é‡‘å¸ï¼š20\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//å’Œé‚ªæ¶å·«å¸ˆæ‰“æ–— </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">fightM3</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.hp=zd.person.hp-zd.ms.m3Lose; <br>zd.person.fortune=zd.person.fortune+<span class="hljs-number">50</span>;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨æŸå¤±äº†%dç‚¹è¡€ï¼Œæ‰“è´¥äº†%s\n&quot;</span>,zd.ms.m3Lose,zd.ms.m3_name);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè·å¾—é‡‘å¸ï¼š50\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//å’ŒåŒå‰‘æ­¦å£«æ‰“æ–— </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">fightM4</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.hp=zd.person.hp-zd.ms.m4Lose; <br>zd.person.fortune=zd.person.fortune+<span class="hljs-number">100</span>;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨æŸå¤±äº†%dç‚¹è¡€ï¼Œæ‰“è´¥äº†%s\n&quot;</span>,zd.ms.m4Lose,zd.ms.m4_name);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè·å¾—é‡‘å¸ï¼š100\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//å’Œå¤§æ³•å¸ˆæ‰“æ–— </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">fightM5</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.hp=zd.person.hp-zd.ms.m5Lose; <br>zd.person.fortune=zd.person.fortune+<span class="hljs-number">1000</span>;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨æŸå¤±äº†%dç‚¹è¡€ï¼Œæ‰“è´¥äº†%s\n&quot;</span>,zd.ms.m5Lose,zd.ms.m5_name);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tè·å¾—é‡‘å¸ï¼š1000\n&quot;</span>); <br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//åŠ æ”»å‡»åŠ›2ç‚¹</span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">addCarry</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.carry=zd.person.carry+<span class="hljs-number">2</span>; <br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨çš„æ”»å‡»åŠ›æå‡äº†2ç‚¹\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125; <br><span class="hljs-comment">//åŠ é˜²å¾¡åŠ›2ç‚¹</span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">addDefend</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.defend=zd.person.defend+<span class="hljs-number">2</span>; <br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨çš„é˜²å¾¡åŠ›æå‡äº†2ç‚¹\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//åŠ æ”»å‡»åŠ›10ç‚¹</span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">addCarry10</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.carry=zd.person.carry+<span class="hljs-number">10</span>; <br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨çš„æ”»å‡»åŠ›æå‡äº†10ç‚¹\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125; <br><span class="hljs-comment">//åŠ é˜²å¾¡åŠ›10ç‚¹</span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">addDefend10</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.defend=zd.person.defend+<span class="hljs-number">10</span>; <br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨çš„é˜²å¾¡åŠ›æå‡äº†10ç‚¹\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//åŠ è¡€ </span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">addHp</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.hp=zd.person.hp+<span class="hljs-number">200</span>;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨çš„è¡€é‡æå‡äº†200ç‚¹\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//å•†åº—</span><br><span class="hljs-keyword">struct</span> contain <span class="hljs-title function_">openshop</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> contain zd)</span>&#123;<br>zd.person.shop=<span class="hljs-number">1</span>;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tæ‚¨å·²ç»æ¿€æ´»å•†åº—\n\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t\tåœ¨æ¸¸æˆè¿›ç¨‹ä¸­æŒ‰&#x27;p&#x27;é”®å¯éšæ—¶è´­ä¹°å•†å“\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®è¿”å›\n&quot;</span>);<br>getch();<br><span class="hljs-keyword">return</span> zd;<br>&#125;<br><span class="hljs-comment">//å…¨å‰§ç»ˆ</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">gameover</span><span class="hljs-params">()</span>&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tç‹å­ï¼šæˆ‘æ‹¿ä¸€ç”Ÿå»ä¿¡ä»°ï¼ŒèµŒæ³¨ä¸ºæˆ‘ç›¸ä¿¡çš„çˆ±æƒ…ã€‚æ¢¦çªï¼Œæˆ‘ä»¬æ°¸è¿œéƒ½ä¸è¦åˆ†å¼€äº†å¥½å—ï¼Ÿ\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\t\tæŒ‰ä»»æ„é”®ç»§ç»­\n&quot;</span>);<br>getch();<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n\n\t\tè°¢è°¢æ‚¨çš„è¯•ç©\n&quot;</span>);<br>getch(); <br>&#125; <br><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
          <category> å¼€æºé¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> å¼€æºié¡¹ç›® </tag>
            
            <tag> çˆ±çš„å¾é€” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Cè¯­è¨€é¡¹ç›®ã€‘è´ªåƒè›‡æ¸¸æˆå¼€æº</title>
      <link href="/2022/06/05/%E8%B4%AA%E5%90%83%E8%9B%87%E6%B8%B8%E6%88%8F%E5%BC%80%E6%BA%90/"/>
      <url>/2022/06/05/%E8%B4%AA%E5%90%83%E8%9B%87%E6%B8%B8%E6%88%8F%E5%BC%80%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<h1>è´ªåƒè›‡æ¸¸æˆå¼€æº</h1><p>ç›´æ¥æ”¾æºä»£ç å§ï¼Œå¤§éƒ¨åˆ†åœ°æ–¹éƒ½å†™æ³¨é‡Šäº†ã€‚å› ä¸ºæ˜¯18å¹´å†™çš„ï¼Œç°åœ¨æˆ‘ä¹Ÿæ²¡åŠæ³•ä»å¤´è®²èµ·ã€‚</p><h2 id="æˆå“å±•ç¤º">æˆå“å±•ç¤º</h2><p><img src="/images/2022-6-5-0002.png" alt="ä¸»é¡µé¢"></p><p><img src="/images/2022-6-5-00003.png" alt="æ¸¸æˆè¯´æ˜"></p><p><img src="/images/2022-6-5-00004.png" alt="æ¸¸æˆå±•ç¤º"></p><h2 id="æºä»£ç å®ç°">æºä»£ç å®ç°</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-comment">//2018-7-10   åˆ›ä½œè€…ï¼šå°é‘« </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;time.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U 1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> D 2</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> L 3</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> R 4       <span class="hljs-comment">//è›‡çš„çŠ¶æ€ï¼ŒUï¼šä¸Š ï¼›Dï¼šä¸‹ï¼›L:å·¦ Rï¼šå³</span></span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SNAKE</span> &#123;</span> <span class="hljs-comment">//è›‡èº«çš„ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="hljs-type">int</span> x;<br><span class="hljs-type">int</span> y;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SNAKE</span> *<span class="hljs-title">next</span>;</span><br>&#125; snake;<br><span class="hljs-comment">//å…¨å±€å˜é‡//</span><br><span class="hljs-type">int</span> score=<span class="hljs-number">0</span>,add=<span class="hljs-number">10</span>;<span class="hljs-comment">//æ€»å¾—åˆ†ä¸æ¯æ¬¡åƒé£Ÿç‰©å¾—åˆ†ã€‚</span><br><span class="hljs-type">int</span> status,sleeptime=<span class="hljs-number">200</span>;<span class="hljs-comment">//æ¯æ¬¡è¿è¡Œçš„æ—¶é—´é—´éš”</span><br>snake *head, *food;<span class="hljs-comment">//è›‡å¤´æŒ‡é’ˆï¼Œé£Ÿç‰©æŒ‡é’ˆ</span><br>snake *q;<span class="hljs-comment">//éå†è›‡çš„æ—¶å€™ç”¨åˆ°çš„æŒ‡é’ˆ</span><br><span class="hljs-type">int</span> endgamestatus=<span class="hljs-number">0</span>; <span class="hljs-comment">//æ¸¸æˆç»“æŸçš„æƒ…å†µï¼Œ1ï¼šæ’åˆ°å¢™ï¼›2ï¼šå’¬åˆ°è‡ªå·±ï¼›3ï¼šä¸»åŠ¨é€€å‡ºæ¸¸æˆã€‚</span><br><span class="hljs-comment">//å£°æ˜å…¨éƒ¨å‡½æ•°//</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">Pos</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">creatMap</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">initsnake</span><span class="hljs-params">()</span>;<br><span class="hljs-type">int</span> <span class="hljs-title function_">biteself</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">createfood</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">cantcrosswall</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">snakemove</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">pause</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">gamecircle</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">welcometogame</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">endgame</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">gamestart</span><span class="hljs-params">()</span>;<br><span class="hljs-type">void</span> <span class="hljs-title function_">Pos</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span><span class="hljs-comment">//è®¾ç½®å…‰æ ‡ä½ç½®</span><br>&#123;<br>COORD pos;<br>HANDLE hOutput;<br>pos.X=x;<br>pos.Y=y;<br>hOutput=GetStdHandle(STD_OUTPUT_HANDLE);<br>SetConsoleCursorPosition(hOutput,pos);<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">creatMap</span><span class="hljs-params">()</span><span class="hljs-comment">//åˆ›å»ºåœ°å›¾</span><br>&#123;<br><span class="hljs-type">int</span> i;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">58</span>; i+=<span class="hljs-number">2</span>) &#123; <span class="hljs-comment">//æ‰“å°ä¸Šä¸‹è¾¹æ¡†</span><br>Pos(i,<span class="hljs-number">0</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>Pos(i,<span class="hljs-number">26</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>&#125;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>; i&lt;<span class="hljs-number">26</span>; i++) &#123; <span class="hljs-comment">//æ‰“å°å·¦å³è¾¹æ¡†</span><br>Pos(<span class="hljs-number">0</span>,i);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>Pos(<span class="hljs-number">56</span>,i);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>&#125;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">initsnake</span><span class="hljs-params">()</span><span class="hljs-comment">//åˆå§‹åŒ–è›‡èº«</span><br>&#123;<br>snake *tail;<br><span class="hljs-type">int</span> i;<br>tail=(snake*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(snake));<span class="hljs-comment">//ä»è›‡å°¾å¼€å§‹ï¼Œå¤´æ’æ³•ï¼Œä»¥x,yè®¾å®šå¼€å§‹çš„ä½ç½®//</span><br>tail-&gt;x=<span class="hljs-number">24</span>;<br>tail-&gt;y=<span class="hljs-number">5</span>;<br>tail-&gt;next=<span class="hljs-literal">NULL</span>;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-number">4</span>; i++) &#123;<br>head=(snake*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(snake));<br>head-&gt;next=tail;<br>head-&gt;x=<span class="hljs-number">24</span>+<span class="hljs-number">2</span>*i;<br>head-&gt;y=<span class="hljs-number">5</span>;<br>tail=head;<br>&#125;<br><span class="hljs-keyword">while</span>(tail!=<span class="hljs-literal">NULL</span>) &#123; <span class="hljs-comment">//ä»å¤´åˆ°ä¸ºï¼Œè¾“å‡ºè›‡èº«</span><br>Pos(tail-&gt;x,tail-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>tail=tail-&gt;next;<br>&#125;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">biteself</span><span class="hljs-params">()</span><span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦å’¬åˆ°äº†è‡ªå·±</span><br>&#123;<br>snake *self;<br>self=head-&gt;next;<br><span class="hljs-keyword">while</span>(self!=<span class="hljs-literal">NULL</span>) &#123;<br><span class="hljs-keyword">if</span>(self-&gt;x==head-&gt;x &amp;&amp; self-&gt;y==head-&gt;y) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br>self=self-&gt;next;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">createfood</span><span class="hljs-params">()</span><span class="hljs-comment">//éšæœºå‡ºç°é£Ÿç‰©</span><br>&#123;<br>snake *food_1;<br>srand((<span class="hljs-type">unsigned</span>)time(<span class="hljs-literal">NULL</span>));<br>food_1=(snake*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(snake));<br><span class="hljs-keyword">while</span>((food_1-&gt;x%<span class="hljs-number">2</span>)!=<span class="hljs-number">0</span>) &#123;  <span class="hljs-comment">//ä¿è¯å…¶ä¸ºå¶æ•°ï¼Œä½¿å¾—é£Ÿç‰©èƒ½ä¸è›‡å¤´å¯¹å…¶</span><br>food_1-&gt;x=rand()%<span class="hljs-number">52</span>+<span class="hljs-number">2</span>;<br>&#125;<br>food_1-&gt;y=rand()%<span class="hljs-number">24</span>+<span class="hljs-number">1</span>;<br>q=head;<br><span class="hljs-keyword">while</span>(q-&gt;next==<span class="hljs-literal">NULL</span>) &#123;<br><span class="hljs-keyword">if</span>(q-&gt;x==food_1-&gt;x &amp;&amp; q-&gt;y==food_1-&gt;y) &#123; <span class="hljs-comment">//åˆ¤æ–­è›‡èº«æ˜¯å¦ä¸é£Ÿç‰©é‡åˆ</span><br><span class="hljs-built_in">free</span>(food_1);<br>createfood();<br>&#125;<br>q=q-&gt;next;<br>&#125;<br>Pos(food_1-&gt;x,food_1-&gt;y);<br>food=food_1;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">cantcrosswall</span><span class="hljs-params">()</span><span class="hljs-comment">//ä¸èƒ½ç©¿å¢™</span><br>&#123;<br><span class="hljs-keyword">if</span>(head-&gt;x==<span class="hljs-number">0</span> || head-&gt;x==<span class="hljs-number">56</span> ||head-&gt;y==<span class="hljs-number">0</span> || head-&gt;y==<span class="hljs-number">26</span>) &#123;<br>endgamestatus=<span class="hljs-number">1</span>;<br>endgame();<br>&#125;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">snakemove</span><span class="hljs-params">()</span><span class="hljs-comment">//è›‡å‰è¿›,ä¸ŠU,ä¸‹D,å·¦L,å³R</span><br>&#123;<br>snake * nexthead;<br>cantcrosswall();<br>nexthead=(snake*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(snake));<br><span class="hljs-keyword">if</span>(status==U) &#123;<br>nexthead-&gt;x=head-&gt;x;<br>nexthead-&gt;y=head-&gt;y<span class="hljs-number">-1</span>;<br><span class="hljs-keyword">if</span>(nexthead-&gt;x==food-&gt;x &amp;&amp; nexthead-&gt;y==food-&gt;y) &#123; <span class="hljs-comment">//å¦‚æœä¸‹ä¸€ä¸ªæœ‰é£Ÿç‰©//</span><br>nexthead-&gt;next=head;<br>head=nexthead;<br>q=head;<br><span class="hljs-keyword">while</span>(q!=<span class="hljs-literal">NULL</span>) &#123;<br>Pos(q-&gt;x,q-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>q=q-&gt;next;<br>&#125;<br>score=score+add;<br>createfood();<br>&#125; <span class="hljs-keyword">else</span> &#123;                                           <span class="hljs-comment">//å¦‚æœæ²¡æœ‰é£Ÿç‰©//</span><br>nexthead-&gt;next=head;<br>head=nexthead;<br>q=head;<br><span class="hljs-keyword">while</span>(q-&gt;next-&gt;next!=<span class="hljs-literal">NULL</span>) &#123;<br>Pos(q-&gt;x,q-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>q=q-&gt;next;<br>&#125;<br>Pos(q-&gt;next-&gt;x,q-&gt;next-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;  &quot;</span>);<br><span class="hljs-built_in">free</span>(q-&gt;next);<br>q-&gt;next=<span class="hljs-literal">NULL</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span>(status==D) &#123;<br>nexthead-&gt;x=head-&gt;x;<br>nexthead-&gt;y=head-&gt;y+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span>(nexthead-&gt;x==food-&gt;x &amp;&amp; nexthead-&gt;y==food-&gt;y) &#123; <span class="hljs-comment">//æœ‰é£Ÿç‰©</span><br>nexthead-&gt;next=head;<br>head=nexthead;<br>q=head;<br><span class="hljs-keyword">while</span>(q!=<span class="hljs-literal">NULL</span>) &#123;<br>Pos(q-&gt;x,q-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>q=q-&gt;next;<br>&#125;<br>score=score+add;<br>createfood();<br>&#125; <span class="hljs-keyword">else</span> &#123;                           <span class="hljs-comment">//æ²¡æœ‰é£Ÿç‰©</span><br>nexthead-&gt;next=head;<br>head=nexthead;<br>q=head;<br><span class="hljs-keyword">while</span>(q-&gt;next-&gt;next!=<span class="hljs-literal">NULL</span>) &#123;<br>Pos(q-&gt;x,q-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>q=q-&gt;next;<br>&#125;<br>Pos(q-&gt;next-&gt;x,q-&gt;next-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;  &quot;</span>);<br><span class="hljs-built_in">free</span>(q-&gt;next);<br>q-&gt;next=<span class="hljs-literal">NULL</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span>(status==L) &#123;<br>nexthead-&gt;x=head-&gt;x<span class="hljs-number">-2</span>;<br>nexthead-&gt;y=head-&gt;y;<br><span class="hljs-keyword">if</span>(nexthead-&gt;x==food-&gt;x &amp;&amp; nexthead-&gt;y==food-&gt;y) &#123; <span class="hljs-comment">//æœ‰é£Ÿç‰©</span><br>nexthead-&gt;next=head;<br>head=nexthead;<br>q=head;<br><span class="hljs-keyword">while</span>(q!=<span class="hljs-literal">NULL</span>) &#123;<br>Pos(q-&gt;x,q-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>q=q-&gt;next;<br>&#125;<br>score=score+add;<br>createfood();<br>&#125; <span class="hljs-keyword">else</span> &#123;                            <span class="hljs-comment">//æ²¡æœ‰é£Ÿç‰©</span><br>nexthead-&gt;next=head;<br>head=nexthead;<br>q=head;<br><span class="hljs-keyword">while</span>(q-&gt;next-&gt;next!=<span class="hljs-literal">NULL</span>) &#123;<br>Pos(q-&gt;x,q-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>q=q-&gt;next;<br>&#125;<br>Pos(q-&gt;next-&gt;x,q-&gt;next-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;  &quot;</span>);<br><span class="hljs-built_in">free</span>(q-&gt;next);<br>q-&gt;next=<span class="hljs-literal">NULL</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span>(status==R) &#123;<br>nexthead-&gt;x=head-&gt;x+<span class="hljs-number">2</span>;<br>nexthead-&gt;y=head-&gt;y;<br><span class="hljs-keyword">if</span>(nexthead-&gt;x==food-&gt;x &amp;&amp; nexthead-&gt;y==food-&gt;y) &#123; <span class="hljs-comment">//æœ‰é£Ÿç‰©</span><br>nexthead-&gt;next=head;<br>head=nexthead;<br>q=head;<br><span class="hljs-keyword">while</span>(q!=<span class="hljs-literal">NULL</span>) &#123;<br>Pos(q-&gt;x,q-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>q=q-&gt;next;<br>&#125;<br>score=score+add;<br>createfood();<br>&#125; <span class="hljs-keyword">else</span> &#123;                                     <span class="hljs-comment">//æ²¡æœ‰é£Ÿç‰©</span><br>nexthead-&gt;next=head;<br>head=nexthead;<br>q=head;<br><span class="hljs-keyword">while</span>(q-&gt;next-&gt;next!=<span class="hljs-literal">NULL</span>) &#123;<br>Pos(q-&gt;x,q-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;â– &quot;</span>);<br>q=q-&gt;next;<br>&#125;<br>Pos(q-&gt;next-&gt;x,q-&gt;next-&gt;y);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;  &quot;</span>);<br><span class="hljs-built_in">free</span>(q-&gt;next);<br>q-&gt;next=<span class="hljs-literal">NULL</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span>(biteself()==<span class="hljs-number">1</span>) &#123;     <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦ä¼šå’¬åˆ°è‡ªå·±</span><br>endgamestatus=<span class="hljs-number">2</span>;<br>endgame();<br>&#125;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">pause</span><span class="hljs-params">()</span><span class="hljs-comment">//æš‚åœ</span><br>&#123;<br><span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>Sleep(<span class="hljs-number">300</span>);<br><span class="hljs-keyword">if</span>(GetAsyncKeyState(VK_SPACE)) &#123;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">gamecircle</span><span class="hljs-params">()</span><span class="hljs-comment">//æ§åˆ¶æ¸¸æˆ</span><br>&#123;<br>Pos(<span class="hljs-number">64</span>,<span class="hljs-number">15</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸èƒ½ç©¿å¢™ï¼Œä¸èƒ½å’¬åˆ°è‡ªå·±\n&quot;</span>);<br>Pos(<span class="hljs-number">64</span>,<span class="hljs-number">16</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç”¨â†‘.â†“.â†.â†’åˆ†åˆ«æ§åˆ¶è›‡çš„ç§»åŠ¨.&quot;</span>);<br>Pos(<span class="hljs-number">64</span>,<span class="hljs-number">17</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;F1 ä¸ºåŠ é€Ÿï¼ŒF2 ä¸ºå‡é€Ÿ\n&quot;</span>);<br>Pos(<span class="hljs-number">64</span>,<span class="hljs-number">18</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ESC ï¼šé€€å‡ºæ¸¸æˆ.spaceï¼šæš‚åœæ¸¸æˆ.&quot;</span>);<br>Pos(<span class="hljs-number">64</span>,<span class="hljs-number">20</span>);<br><span class="hljs-comment">//</span><br>status=R;<br><span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>Pos(<span class="hljs-number">64</span>,<span class="hljs-number">10</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å¾—åˆ†ï¼š%d  &quot;</span>,score);<br>Pos(<span class="hljs-number">64</span>,<span class="hljs-number">11</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ¯ä¸ªé£Ÿç‰©å¾—åˆ†ï¼š%dåˆ†&quot;</span>,add);<br><span class="hljs-keyword">if</span>(GetAsyncKeyState(VK_UP) &amp;&amp; status!=D) &#123;<br>status=U;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(GetAsyncKeyState(VK_DOWN) &amp;&amp; status!=U) &#123;<br>status=D;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(GetAsyncKeyState(VK_LEFT)&amp;&amp; status!=R) &#123;<br>status=L;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(GetAsyncKeyState(VK_RIGHT)&amp;&amp; status!=L) &#123;<br>status=R;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(GetAsyncKeyState(VK_SPACE)) &#123;<br>pause();<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(GetAsyncKeyState(VK_ESCAPE)) &#123;<br>endgamestatus=<span class="hljs-number">3</span>;<br><span class="hljs-keyword">break</span>;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(GetAsyncKeyState(VK_F1)) &#123;<br><span class="hljs-keyword">if</span>(sleeptime&gt;=<span class="hljs-number">50</span>) &#123;<br>sleeptime=sleeptime<span class="hljs-number">-30</span>;<br>add=add+<span class="hljs-number">2</span>;<br><span class="hljs-keyword">if</span>(sleeptime==<span class="hljs-number">320</span>) &#123;<br>add=<span class="hljs-number">2</span>;<span class="hljs-comment">//é˜²æ­¢å‡åˆ°1ä¹‹åå†åŠ å›æ¥æœ‰é”™</span><br>&#125;<br>&#125;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(GetAsyncKeyState(VK_F2)) &#123;<br><span class="hljs-keyword">if</span>(sleeptime&lt;<span class="hljs-number">350</span>) &#123;<br>sleeptime=sleeptime+<span class="hljs-number">30</span>;<br>add=add<span class="hljs-number">-2</span>;<br><span class="hljs-keyword">if</span>(sleeptime==<span class="hljs-number">350</span>) &#123;<br>add=<span class="hljs-number">1</span>;  <span class="hljs-comment">//ä¿è¯æœ€ä½åˆ†ä¸º1</span><br>&#125;<br>&#125;<br>&#125;<br>Sleep(sleeptime);<br>snakemove();<br>&#125;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">welcometogame</span><span class="hljs-params">()</span><span class="hljs-comment">//å¼€å§‹ç•Œé¢</span><br>&#123;<br>Pos(<span class="hljs-number">40</span>,<span class="hljs-number">12</span>);<br><span class="hljs-comment">//</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ¬¢è¿æ¥åˆ°å°é‘«å®¶çš„è´ªé£Ÿè›‡æ¸¸æˆï¼&quot;</span>);<br>Pos(<span class="hljs-number">40</span>,<span class="hljs-number">25</span>);<br><span class="hljs-comment">//</span><br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>Pos(<span class="hljs-number">25</span>,<span class="hljs-number">12</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç”¨â†‘.â†“.â†.â†’åˆ†åˆ«æ§åˆ¶è›‡çš„ç§»åŠ¨ï¼Œ F1 ä¸ºåŠ é€Ÿï¼Œ2 ä¸ºå‡é€Ÿ\n&quot;</span>);<br>Pos(<span class="hljs-number">25</span>,<span class="hljs-number">13</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åŠ é€Ÿå°†èƒ½å¾—åˆ°æ›´é«˜çš„åˆ†æ•°ã€‚\n&quot;</span>);<br>system(<span class="hljs-string">&quot;pause&quot;</span>);<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">endgame</span><span class="hljs-params">()</span><span class="hljs-comment">//ç»“æŸæ¸¸æˆ</span><br>&#123;<br>system(<span class="hljs-string">&quot;cls&quot;</span>);<br>Pos(<span class="hljs-number">24</span>,<span class="hljs-number">12</span>);<br><span class="hljs-keyword">if</span>(endgamestatus==<span class="hljs-number">1</span>) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å¯¹ä¸èµ·ï¼Œæ‚¨æ’åˆ°å¢™äº†ã€‚æ¸¸æˆç»“æŸ.&quot;</span>);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(endgamestatus==<span class="hljs-number">2</span>) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å¯¹ä¸èµ·ï¼Œæ‚¨å’¬åˆ°è‡ªå·±äº†ã€‚æ¸¸æˆç»“æŸ.&quot;</span>);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(endgamestatus==<span class="hljs-number">3</span>) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‚¨çš„å·²ç»ç»“æŸäº†æ¸¸æˆã€‚&quot;</span>);<br>&#125;<br>Pos(<span class="hljs-number">24</span>,<span class="hljs-number">13</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‚¨çš„å¾—åˆ†æ˜¯%d\n&quot;</span>,score);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">gamestart</span><span class="hljs-params">()</span><span class="hljs-comment">//æ¸¸æˆåˆå§‹åŒ–</span><br>&#123;<br>system(<span class="hljs-string">&quot;mode con cols=100 lines=30&quot;</span>);<br>welcometogame();<br>creatMap();<br>initsnake();<br>createfood();<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>gamestart();<br>gamecircle();<br>endgame();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
          <category> å¼€æºé¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> å¼€æºä»£ç  </tag>
            
            <tag> è´ªåƒè›‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°é‘«é™é‡è½¯ä»¶å¼€æº</title>
      <link href="/2022/06/05/%E5%B0%8F%E9%91%AB%E9%99%8D%E9%87%8D%E8%BD%AF%E4%BB%B6%E5%BC%80%E6%BA%90/"/>
      <url>/2022/06/05/%E5%B0%8F%E9%91%AB%E9%99%8D%E9%87%8D%E8%BD%AF%E4%BB%B6%E5%BC%80%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<h2 id="å°é‘«é™é‡è½¯ä»¶å¼€æº">å°é‘«é™é‡è½¯ä»¶å¼€æº</h2><h3 id="æˆå“å±•ç¤º">æˆå“å±•ç¤º</h3><p><img src="/images/2022-6-5-001.png" alt="upload successful"></p><h3 id="ä¸»ç¨‹åºmain-py"><a href="http://xn--main-zh5fy87fgv6b.py">ä¸»ç¨‹åºmain.py</a></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># author ï¼šLiansixin</span><br><span class="hljs-keyword">import</span> hashlib<br><span class="hljs-keyword">import</span> http<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> urllib<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> translate <span class="hljs-keyword">import</span> Translator<br><span class="hljs-keyword">import</span> http.client<br><span class="hljs-keyword">import</span> hashlib<br><span class="hljs-keyword">import</span> urllib<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> json<br><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(sys, <span class="hljs-string">&#x27;frozen&#x27;</span>):<br>    os.environ[<span class="hljs-string">&#x27;PATH&#x27;</span>] = sys._MEIPASS + <span class="hljs-string">&quot;;&quot;</span> + os.environ[<span class="hljs-string">&#x27;PATH&#x27;</span>]<br><br><span class="hljs-keyword">from</span> mainWindow <span class="hljs-keyword">import</span> Ui_MainWindow<br><span class="hljs-keyword">from</span> PyQt5.Qt <span class="hljs-keyword">import</span> *<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWindow</span>(QMainWindow, Ui_MainWindow):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, parent=<span class="hljs-literal">None</span></span>):<br>        <span class="hljs-built_in">super</span>(MyWindow, <span class="hljs-variable language_">self</span>).__init__(parent)<br>        <span class="hljs-variable language_">self</span>.setupUi(<span class="hljs-variable language_">self</span>)<br>        <span class="hljs-variable language_">self</span>.pushButton.clicked.connect(<span class="hljs-variable language_">self</span>.click_pushButton)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">click_pushButton</span>(<span class="hljs-params">self</span>):<br>        tst = <span class="hljs-variable language_">self</span>.textEdit.toPlainText()<br>        tst = youdao_en(tst)<br>        <span class="hljs-built_in">print</span>(tst)<br>        translation = trans_lang(tst)<br>        <span class="hljs-built_in">print</span>(translation)<br>        <span class="hljs-variable language_">self</span>.textEdit_2.setText(translation)<br>        <span class="hljs-keyword">return</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">youdao_en</span>(<span class="hljs-params">query</span>):<br>    url = <span class="hljs-string">&#x27;http://fanyi.youdao.com/translate&#x27;</span><br>    data = &#123;<br>        <span class="hljs-string">&quot;i&quot;</span>: query,  <span class="hljs-comment"># å¾…ç¿»è¯‘çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-string">&quot;from&quot;</span>: <span class="hljs-string">&quot;zh-CHS&quot;</span>,<br>        <span class="hljs-string">&quot;to&quot;</span>: <span class="hljs-string">&quot;en&quot;</span>,<br>        <span class="hljs-string">&quot;smartresult&quot;</span>: <span class="hljs-string">&quot;dict&quot;</span>,<br>        <span class="hljs-string">&quot;client&quot;</span>: <span class="hljs-string">&quot;fanyideskweb&quot;</span>,<br>        <span class="hljs-string">&quot;salt&quot;</span>: <span class="hljs-string">&quot;16081210430989&quot;</span>,<br>        <span class="hljs-string">&quot;doctype&quot;</span>: <span class="hljs-string">&quot;json&quot;</span>,<br>        <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;2.1&quot;</span>,<br>        <span class="hljs-string">&quot;keyfrom&quot;</span>: <span class="hljs-string">&quot;fanyi.web&quot;</span>,<br>        <span class="hljs-string">&quot;action&quot;</span>: <span class="hljs-string">&quot;FY_BY_CLICKBUTTION&quot;</span><br>    &#125;<br>    res = requests.post(url, data=data).json()<br>    <span class="hljs-keyword">return</span> res[<span class="hljs-string">&#x27;translateResult&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;tgt&#x27;</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">trans_lang</span>(<span class="hljs-params">q</span>):<br>    trans_result = q<br>    <span class="hljs-comment"># ç™¾åº¦appidå’Œå¯†é’¥éœ€è¦é€šè¿‡æ³¨å†Œç™¾åº¦ã€ç¿»è¯‘å¼€æ”¾å¹³å°ã€‘è´¦å·åè·å¾—</span><br>    appid = <span class="hljs-string">&#x27;20211103000990117&#x27;</span>  <span class="hljs-comment"># å¡«å†™ä½ çš„appid</span><br>    secretKey = <span class="hljs-string">&#x27;LXQgIXAj9aoKoHGMA7zs&#x27;</span>  <span class="hljs-comment"># å¡«å†™ä½ çš„å¯†é’¥</span><br><br>    httpClient = <span class="hljs-literal">None</span><br>    myurl = <span class="hljs-string">&#x27;/api/trans/vip/translate&#x27;</span>  <span class="hljs-comment"># é€šç”¨ç¿»è¯‘API HTTPåœ°å€</span><br><br>    fromLang = <span class="hljs-string">&#x27;auto&#x27;</span>  <span class="hljs-comment"># åŸæ–‡è¯­ç§</span><br>    toLang = <span class="hljs-string">&#x27;zh&#x27;</span>  <span class="hljs-comment"># è¯‘æ–‡è¯­ç§</span><br>    salt = random.randint(<span class="hljs-number">32768</span>, <span class="hljs-number">65536</span>)<br>    <span class="hljs-comment"># æ‰‹åŠ¨å½•å…¥ç¿»è¯‘å†…å®¹ï¼Œqå­˜æ”¾</span><br>    sign = appid + q + <span class="hljs-built_in">str</span>(salt) + secretKey<br>    sign = hashlib.md5(sign.encode()).hexdigest()<br>    myurl = myurl + <span class="hljs-string">&#x27;?appid=&#x27;</span> + appid + <span class="hljs-string">&#x27;&amp;q=&#x27;</span> + urllib.parse.quote(q) + <span class="hljs-string">&#x27;&amp;from=&#x27;</span> + fromLang + \<br>            <span class="hljs-string">&#x27;&amp;to=&#x27;</span> + toLang + <span class="hljs-string">&#x27;&amp;salt=&#x27;</span> + <span class="hljs-built_in">str</span>(salt) + <span class="hljs-string">&#x27;&amp;sign=&#x27;</span> + sign<br><br>    <span class="hljs-comment"># å»ºç«‹ä¼šè¯ï¼Œè¿”å›ç»“æœ</span><br>    <span class="hljs-keyword">try</span>:<br>        httpClient = http.client.HTTPConnection(<span class="hljs-string">&#x27;api.fanyi.baidu.com&#x27;</span>)<br>        httpClient.request(<span class="hljs-string">&#x27;GET&#x27;</span>, myurl)<br>        <span class="hljs-comment"># responseæ˜¯HTTPResponseå¯¹è±¡</span><br>        response = httpClient.getresponse()<br>        result_all = response.read().decode(<span class="hljs-string">&quot;utf-8&quot;</span>)<br>        result = json.loads(result_all)<br>        trans_result = result[<span class="hljs-string">&#x27;trans_result&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;dst&#x27;</span>]<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(e)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-keyword">if</span> httpClient:<br>            httpClient.close()<br>    <span class="hljs-keyword">return</span> trans_result<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app = QApplication(sys.argv)<br>    show = MyWindow()<br>    show.show()<br>    sys.exit(app.exec_())<br><br><br></code></pre></td></tr></table></figure><h3 id="è§†å›¾å®ç°mainWindow-py"><a href="http://xn--mainWindow-622r675b0i0fsv4c.py">è§†å›¾å®ç°mainWindow.py</a></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># author ï¼šLiansixin</span><br><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5 <span class="hljs-keyword">import</span> QtCore, QtGui, QtWidgets<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ui_MainWindow</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setupUi</span>(<span class="hljs-params">self, MainWindow</span>):<br>        MainWindow.setObjectName(<span class="hljs-string">&quot;MainWindow&quot;</span>)<br>        MainWindow.resize(<span class="hljs-number">1059</span>, <span class="hljs-number">431</span>)<br>        <span class="hljs-variable language_">self</span>.centralWidget = QtWidgets.QWidget(MainWindow)<br>        <span class="hljs-variable language_">self</span>.centralWidget.setObjectName(<span class="hljs-string">&quot;centralWidget&quot;</span>)<br>        <span class="hljs-variable language_">self</span>.textEdit = QtWidgets.QTextEdit(<span class="hljs-variable language_">self</span>.centralWidget)<br>        <span class="hljs-variable language_">self</span>.textEdit.setGeometry(QtCore.QRect(<span class="hljs-number">110</span>, <span class="hljs-number">60</span>, <span class="hljs-number">321</span>, <span class="hljs-number">291</span>))<br>        <span class="hljs-variable language_">self</span>.textEdit.setLocale(QtCore.QLocale(QtCore.QLocale.Chinese, QtCore.QLocale.China))<br>        <span class="hljs-variable language_">self</span>.textEdit.setObjectName(<span class="hljs-string">&quot;textEdit&quot;</span>)<br>        <span class="hljs-variable language_">self</span>.textEdit_2 = QtWidgets.QTextEdit(<span class="hljs-variable language_">self</span>.centralWidget)<br>        <span class="hljs-variable language_">self</span>.textEdit_2.setGeometry(QtCore.QRect(<span class="hljs-number">600</span>, <span class="hljs-number">60</span>, <span class="hljs-number">321</span>, <span class="hljs-number">291</span>))<br>        <span class="hljs-variable language_">self</span>.textEdit_2.setLocale(QtCore.QLocale(QtCore.QLocale.Chinese, QtCore.QLocale.China))<br>        <span class="hljs-variable language_">self</span>.textEdit_2.setObjectName(<span class="hljs-string">&quot;textEdit_2&quot;</span>)<br>        <span class="hljs-variable language_">self</span>.pushButton = QtWidgets.QPushButton(<span class="hljs-variable language_">self</span>.centralWidget)<br>        <span class="hljs-variable language_">self</span>.pushButton.setGeometry(QtCore.QRect(<span class="hljs-number">460</span>, <span class="hljs-number">190</span>, <span class="hljs-number">101</span>, <span class="hljs-number">61</span>))<br>        <span class="hljs-variable language_">self</span>.pushButton.setObjectName(<span class="hljs-string">&quot;pushButton&quot;</span>)<br>        <span class="hljs-variable language_">self</span>.label = QtWidgets.QLabel(<span class="hljs-variable language_">self</span>.centralWidget)<br>        <span class="hljs-variable language_">self</span>.label.setGeometry(QtCore.QRect(<span class="hljs-number">240</span>, <span class="hljs-number">20</span>, <span class="hljs-number">41</span>, <span class="hljs-number">31</span>))<br>        <span class="hljs-variable language_">self</span>.label.setObjectName(<span class="hljs-string">&quot;label&quot;</span>)<br>        <span class="hljs-variable language_">self</span>.label_2 = QtWidgets.QLabel(<span class="hljs-variable language_">self</span>.centralWidget)<br>        <span class="hljs-variable language_">self</span>.label_2.setGeometry(QtCore.QRect(<span class="hljs-number">750</span>, <span class="hljs-number">30</span>, <span class="hljs-number">41</span>, <span class="hljs-number">16</span>))<br>        <span class="hljs-variable language_">self</span>.label_2.setObjectName(<span class="hljs-string">&quot;label_2&quot;</span>)<br>        <span class="hljs-variable language_">self</span>.label_3 = QtWidgets.QLabel(<span class="hljs-variable language_">self</span>.centralWidget)<br>        <span class="hljs-variable language_">self</span>.label_3.setGeometry(QtCore.QRect(<span class="hljs-number">430</span>, <span class="hljs-number">370</span>, <span class="hljs-number">161</span>, <span class="hljs-number">20</span>))<br>        <span class="hljs-variable language_">self</span>.label_3.setObjectName(<span class="hljs-string">&quot;label_3&quot;</span>)<br>        MainWindow.setCentralWidget(<span class="hljs-variable language_">self</span>.centralWidget)<br>        <span class="hljs-variable language_">self</span>.statusBar = QtWidgets.QStatusBar(MainWindow)<br>        <span class="hljs-variable language_">self</span>.statusBar.setObjectName(<span class="hljs-string">&quot;statusBar&quot;</span>)<br>        MainWindow.setStatusBar(<span class="hljs-variable language_">self</span>.statusBar)<br><br>        <span class="hljs-variable language_">self</span>.retranslateUi(MainWindow)<br>        QtCore.QMetaObject.connectSlotsByName(MainWindow)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">retranslateUi</span>(<span class="hljs-params">self, MainWindow</span>):<br>        _translate = QtCore.QCoreApplication.translate<br>        MainWindow.setWindowTitle(_translate(<span class="hljs-string">&quot;MainWindow&quot;</span>, <span class="hljs-string">&quot;å°é‘«é™é‡å·¥å…·&quot;</span>))<br>        <span class="hljs-variable language_">self</span>.pushButton.setText(_translate(<span class="hljs-string">&quot;MainWindow&quot;</span>, <span class="hljs-string">&quot;å¼€å§‹é™é‡&quot;</span>))<br>        <span class="hljs-variable language_">self</span>.label.setText(_translate(<span class="hljs-string">&quot;MainWindow&quot;</span>, <span class="hljs-string">&quot;åŸæ–‡&quot;</span>))<br>        <span class="hljs-variable language_">self</span>.label_2.setText(_translate(<span class="hljs-string">&quot;MainWindow&quot;</span>, <span class="hljs-string">&quot;ç»“æœ&quot;</span>))<br>        <span class="hljs-variable language_">self</span>.label_3.setText(_translate(<span class="hljs-string">&quot;MainWindow&quot;</span>, <span class="hljs-string">&quot;è¯¥å·¥å…·ä½¿ç”¨éœ€è¦è”ç½‘å“¦&quot;</span>))<br><br></code></pre></td></tr></table></figure><h3 id="å¼€æºåº“åœ°å€ï¼š">å¼€æºåº“åœ°å€ï¼š</h3><p><a href="https://github.com/JinBiLianShao/XiaoxinPaper">https://github.com/JinBiLianShao/XiaoxinPaper</a></p><p><a href="https://github.com/JinBiLianShao/XiaoxinPaper">ç‚¹æˆ‘è®¿é—®</a></p>]]></content>
      
      
      <categories>
          
          <category> å°é‘«è½¯ä»¶å¼€æº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> é™é‡è½¯ä»¶ </tag>
            
            <tag> å¼€æºä»£ç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++æ ¸å¿ƒç¼–ç¨‹è®²è§£</title>
      <link href="/2022/06/05/C-%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9%E8%AE%B2%E8%A7%A3/"/>
      <url>/2022/06/05/C-%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1>C++æ ¸å¿ƒç¼–ç¨‹</h1><p>æœ¬é˜¶æ®µä¸»è¦é’ˆå¯¹C++==é¢å‘å¯¹è±¡==ç¼–ç¨‹æŠ€æœ¯åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨C++ä¸­çš„æ ¸å¿ƒå’Œç²¾é«“ã€‚</p><h2 id="1-å†…å­˜åˆ†åŒºæ¨¡å‹">1 å†…å­˜åˆ†åŒºæ¨¡å‹</h2><p>C++ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå°†å†…å­˜å¤§æ–¹å‘åˆ’åˆ†ä¸º<strong>4ä¸ªåŒºåŸŸ</strong></p><ul><li>ä»£ç åŒºï¼šå­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†çš„</li><li>å…¨å±€åŒºï¼šå­˜æ”¾å…¨å±€å˜é‡å’Œé™æ€å˜é‡ä»¥åŠå¸¸é‡</li><li>æ ˆåŒºï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰</li><li>å †åŒºï¼šç”±ç¨‹åºå‘˜åˆ†é…å’Œé‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶</li></ul><p><strong>å†…å­˜å››åŒºæ„ä¹‰ï¼š</strong></p><p>ä¸åŒåŒºåŸŸå­˜æ”¾çš„æ•°æ®ï¼Œèµ‹äºˆä¸åŒçš„ç”Ÿå‘½å‘¨æœŸ, ç»™æˆ‘ä»¬æ›´å¤§çš„çµæ´»ç¼–ç¨‹</p><h3 id="1-1-ç¨‹åºè¿è¡Œå‰">1.1 ç¨‹åºè¿è¡Œå‰</h3><p>â€‹åœ¨ç¨‹åºç¼–è¯‘åï¼Œç”Ÿæˆäº†exeå¯æ‰§è¡Œç¨‹åºï¼Œ<strong>æœªæ‰§è¡Œè¯¥ç¨‹åºå‰</strong>åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸ</p><p>â€‹<strong>ä»£ç åŒºï¼š</strong></p><p>â€‹å­˜æ”¾ CPU æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤</p><p>â€‹ä»£ç åŒºæ˜¯<strong>å…±äº«</strong>çš„ï¼Œå…±äº«çš„ç›®çš„æ˜¯å¯¹äºé¢‘ç¹è¢«æ‰§è¡Œçš„ç¨‹åºï¼Œåªéœ€è¦åœ¨å†…å­˜ä¸­æœ‰ä¸€ä»½ä»£ç å³å¯</p><p>â€‹ä»£ç åŒºæ˜¯<strong>åªè¯»</strong>çš„ï¼Œä½¿å…¶åªè¯»çš„åŸå› æ˜¯é˜²æ­¢ç¨‹åºæ„å¤–åœ°ä¿®æ”¹äº†å®ƒçš„æŒ‡ä»¤</p><p>â€‹<strong>å…¨å±€åŒºï¼š</strong></p><p>â€‹å…¨å±€å˜é‡å’Œé™æ€å˜é‡å­˜æ”¾åœ¨æ­¤.</p><p>â€‹å…¨å±€åŒºè¿˜åŒ…å«äº†å¸¸é‡åŒº, å­—ç¬¦ä¸²å¸¸é‡å’Œå…¶ä»–å¸¸é‡ä¹Ÿå­˜æ”¾åœ¨æ­¤.</p><p>â€‹==è¯¥åŒºåŸŸçš„æ•°æ®åœ¨ç¨‹åºç»“æŸåç”±æ“ä½œç³»ç»Ÿé‡Šæ”¾==.</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//å…¨å±€å˜é‡</span><br><span class="hljs-type">int</span> g_a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> g_b = <span class="hljs-number">10</span>;<br><br><span class="hljs-comment">//å…¨å±€å¸¸é‡</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> c_g_a = <span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> c_g_b = <span class="hljs-number">10</span>;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//å±€éƒ¨å˜é‡</span><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">10</span>;<br><br><span class="hljs-comment">//æ‰“å°åœ°å€</span><br>cout &lt;&lt; <span class="hljs-string">&quot;å±€éƒ¨å˜é‡aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å±€éƒ¨å˜é‡båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;b &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;å…¨å±€å˜é‡g_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt;  (<span class="hljs-type">int</span>)&amp;g_a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å…¨å±€å˜é‡g_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt;  (<span class="hljs-type">int</span>)&amp;g_b &lt;&lt; endl;<br><br><span class="hljs-comment">//é™æ€å˜é‡</span><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> s_a = <span class="hljs-number">10</span>;<br><span class="hljs-type">static</span> <span class="hljs-type">int</span> s_b = <span class="hljs-number">10</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;é™æ€å˜é‡s_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;s_a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;é™æ€å˜é‡s_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;s_b &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;<span class="hljs-string">&quot;hello world&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;<span class="hljs-string">&quot;hello world1&quot;</span> &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;å…¨å±€å¸¸é‡c_g_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;c_g_a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å…¨å±€å¸¸é‡c_g_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;c_g_b &lt;&lt; endl;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> c_l_a = <span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> c_l_b = <span class="hljs-number">10</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;å±€éƒ¨å¸¸é‡c_l_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;c_l_a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å±€éƒ¨å¸¸é‡c_l_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;c_l_b &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼š</p><p><img src="/assets/1545017602518.png" alt="1545017602518"></p><p>æ€»ç»“ï¼š</p><ul><li>C++ä¸­åœ¨ç¨‹åºè¿è¡Œå‰åˆ†ä¸ºå…¨å±€åŒºå’Œä»£ç åŒº</li><li>ä»£ç åŒºç‰¹ç‚¹æ˜¯å…±äº«å’Œåªè¯»</li><li>å…¨å±€åŒºä¸­å­˜æ”¾å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å¸¸é‡</li><li>å¸¸é‡åŒºä¸­å­˜æ”¾ constä¿®é¥°çš„å…¨å±€å¸¸é‡  å’Œ å­—ç¬¦ä¸²å¸¸é‡</li></ul><h3 id="1-2-ç¨‹åºè¿è¡Œå">1.2 ç¨‹åºè¿è¡Œå</h3><p>â€‹<strong>æ ˆåŒºï¼š</strong></p><p>â€‹ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰</p><p>â€‹æ³¨æ„äº‹é¡¹ï¼šä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œæ ˆåŒºå¼€è¾Ÿçš„æ•°æ®ç”±ç¼–è¯‘å™¨è‡ªåŠ¨é‡Šæ”¾</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> * <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">return</span> &amp;a;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> *p = <span class="hljs-built_in">func</span>();<br><br>cout &lt;&lt; *p &lt;&lt; endl;<br>cout &lt;&lt; *p &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹<strong>å †åŒºï¼š</strong></p><p>â€‹ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶</p><p>â€‹åœ¨C++ä¸­ä¸»è¦åˆ©ç”¨newåœ¨å †åŒºå¼€è¾Ÿå†…å­˜</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span>* <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span>* a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">10</span>);<br><span class="hljs-keyword">return</span> a;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> *p = <span class="hljs-built_in">func</span>();<br><br>cout &lt;&lt; *p &lt;&lt; endl;<br>cout &lt;&lt; *p &lt;&lt; endl;<br>    <br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><p>å †åŒºæ•°æ®ç”±ç¨‹åºå‘˜ç®¡ç†å¼€è¾Ÿå’Œé‡Šæ”¾</p><p>å †åŒºæ•°æ®åˆ©ç”¨newå…³é”®å­—è¿›è¡Œå¼€è¾Ÿå†…å­˜</p><h3 id="1-3-newæ“ä½œç¬¦">1.3 newæ“ä½œç¬¦</h3><p>â€‹C++ä¸­åˆ©ç”¨==new==æ“ä½œç¬¦åœ¨å †åŒºå¼€è¾Ÿæ•°æ®</p><p>â€‹å †åŒºå¼€è¾Ÿçš„æ•°æ®ï¼Œç”±ç¨‹åºå‘˜æ‰‹åŠ¨å¼€è¾Ÿï¼Œæ‰‹åŠ¨é‡Šæ”¾ï¼Œé‡Šæ”¾åˆ©ç”¨æ“ä½œç¬¦ ==delete==</p><p>â€‹è¯­æ³•ï¼š<code> new æ•°æ®ç±»å‹</code></p><p>â€‹åˆ©ç”¨newåˆ›å»ºçš„æ•°æ®ï¼Œä¼šè¿”å›è¯¥æ•°æ®å¯¹åº”çš„ç±»å‹çš„æŒ‡é’ˆ</p><p><strong>ç¤ºä¾‹1ï¼š åŸºæœ¬è¯­æ³•</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span>* <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span>* a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">10</span>);<br><span class="hljs-keyword">return</span> a;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> *p = <span class="hljs-built_in">func</span>();<br><br>cout &lt;&lt; *p &lt;&lt; endl;<br>cout &lt;&lt; *p &lt;&lt; endl;<br><br><span class="hljs-comment">//åˆ©ç”¨deleteé‡Šæ”¾å †åŒºæ•°æ®</span><br><span class="hljs-keyword">delete</span> p;<br><br><span class="hljs-comment">//cout &lt;&lt; *p &lt;&lt; endl; //æŠ¥é”™ï¼Œé‡Šæ”¾çš„ç©ºé—´ä¸å¯è®¿é—®</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼šå¼€è¾Ÿæ•°ç»„</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//å †åŒºå¼€è¾Ÿæ•°ç»„</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span>* arr = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>arr[i] = i + <span class="hljs-number">100</span>;<br>&#125;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>cout &lt;&lt; arr[i] &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//é‡Šæ”¾æ•°ç»„ delete ååŠ  []</span><br><span class="hljs-keyword">delete</span>[] arr;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="2-å¼•ç”¨">2 å¼•ç”¨</h2><h3 id="2-1-å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨">2.1 å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨</h3><p>**ä½œç”¨ï¼š **ç»™å˜é‡èµ·åˆ«å</p><p><strong>è¯­æ³•ï¼š</strong> <code>æ•°æ®ç±»å‹ &amp;åˆ«å = åŸå</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> &amp;b = a;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;<br><br>b = <span class="hljs-number">100</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-å¼•ç”¨æ³¨æ„äº‹é¡¹">2.2 å¼•ç”¨æ³¨æ„äº‹é¡¹</h3><ul><li>å¼•ç”¨å¿…é¡»åˆå§‹åŒ–</li><li>å¼•ç”¨åœ¨åˆå§‹åŒ–åï¼Œä¸å¯ä»¥æ”¹å˜</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><span class="hljs-comment">//int &amp;c; //é”™è¯¯ï¼Œå¼•ç”¨å¿…é¡»åˆå§‹åŒ–</span><br><span class="hljs-type">int</span> &amp;c = a; <span class="hljs-comment">//ä¸€æ—¦åˆå§‹åŒ–åï¼Œå°±ä¸å¯ä»¥æ›´æ”¹</span><br>c = b; <span class="hljs-comment">//è¿™æ˜¯èµ‹å€¼æ“ä½œï¼Œä¸æ˜¯æ›´æ”¹å¼•ç”¨</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-3-å¼•ç”¨åšå‡½æ•°å‚æ•°">2.3 å¼•ç”¨åšå‡½æ•°å‚æ•°</h3><p>**ä½œç”¨ï¼š**å‡½æ•°ä¼ å‚æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¼•ç”¨çš„æŠ€æœ¯è®©å½¢å‚ä¿®é¥°å®å‚</p><p>**ä¼˜ç‚¹ï¼š**å¯ä»¥ç®€åŒ–æŒ‡é’ˆä¿®æ”¹å®å‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//1. å€¼ä¼ é€’</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mySwap01</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br><span class="hljs-type">int</span> temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><span class="hljs-comment">//2. åœ°å€ä¼ é€’</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mySwap02</span><span class="hljs-params">(<span class="hljs-type">int</span>* a, <span class="hljs-type">int</span>* b)</span> </span>&#123;<br><span class="hljs-type">int</span> temp = *a;<br>*a = *b;<br>*b = temp;<br>&#125;<br><br><span class="hljs-comment">//3. å¼•ç”¨ä¼ é€’</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mySwap03</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; a, <span class="hljs-type">int</span>&amp; b)</span> </span>&#123;<br><span class="hljs-type">int</span> temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><br><span class="hljs-built_in">mySwap01</span>(a, b);<br>cout &lt;&lt; <span class="hljs-string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;<br><br><span class="hljs-built_in">mySwap02</span>(&amp;a, &amp;b);<br>cout &lt;&lt; <span class="hljs-string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;<br><br><span class="hljs-built_in">mySwap03</span>(a, b);<br>cout &lt;&lt; <span class="hljs-string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šé€šè¿‡å¼•ç”¨å‚æ•°äº§ç”Ÿçš„æ•ˆæœåŒæŒ‰åœ°å€ä¼ é€’æ˜¯ä¸€æ ·çš„ã€‚å¼•ç”¨çš„è¯­æ³•æ›´æ¸…æ¥šç®€å•</p></blockquote><h3 id="2-4-å¼•ç”¨åšå‡½æ•°è¿”å›å€¼">2.4 å¼•ç”¨åšå‡½æ•°è¿”å›å€¼</h3><p>ä½œç”¨ï¼šå¼•ç”¨æ˜¯å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼å­˜åœ¨çš„</p><p>æ³¨æ„ï¼š<strong>ä¸è¦è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨</strong></p><p>ç”¨æ³•ï¼šå‡½æ•°è°ƒç”¨ä½œä¸ºå·¦å€¼</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨</span><br><span class="hljs-function"><span class="hljs-type">int</span>&amp; <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>; <span class="hljs-comment">//å±€éƒ¨å˜é‡</span><br><span class="hljs-keyword">return</span> a;<br>&#125;<br><br><span class="hljs-comment">//è¿”å›é™æ€å˜é‡å¼•ç”¨</span><br><span class="hljs-function"><span class="hljs-type">int</span>&amp; <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-type">static</span> <span class="hljs-type">int</span> a = <span class="hljs-number">20</span>;<br><span class="hljs-keyword">return</span> a;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//ä¸èƒ½è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨</span><br><span class="hljs-type">int</span>&amp; ref = <span class="hljs-built_in">test01</span>();<br>cout &lt;&lt; <span class="hljs-string">&quot;ref = &quot;</span> &lt;&lt; ref &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;ref = &quot;</span> &lt;&lt; ref &lt;&lt; endl;<br><br><span class="hljs-comment">//å¦‚æœå‡½æ•°åšå·¦å€¼ï¼Œé‚£ä¹ˆå¿…é¡»è¿”å›å¼•ç”¨</span><br><span class="hljs-type">int</span>&amp; ref2 = <span class="hljs-built_in">test02</span>();<br>cout &lt;&lt; <span class="hljs-string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;<br><br><span class="hljs-built_in">test02</span>() = <span class="hljs-number">1000</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹</p><h3 id="2-5-å¼•ç”¨çš„æœ¬è´¨">2.5 å¼•ç”¨çš„æœ¬è´¨</h3><p>æœ¬è´¨ï¼š<strong>å¼•ç”¨çš„æœ¬è´¨åœ¨c++å†…éƒ¨å®ç°æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡.</strong></p><p>è®²è§£ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å‘ç°æ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º int* const ref = &amp;a;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; ref)</span></span>&#123;<br>ref = <span class="hljs-number">100</span>; <span class="hljs-comment">// refæ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º*ref = 100</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br>    <br>    <span class="hljs-comment">//è‡ªåŠ¨è½¬æ¢ä¸º int* const ref = &amp;a; æŒ‡é’ˆå¸¸é‡æ˜¯æŒ‡é’ˆæŒ‡å‘ä¸å¯æ”¹ï¼Œä¹Ÿè¯´æ˜ä¸ºä»€ä¹ˆå¼•ç”¨ä¸å¯æ›´æ”¹</span><br><span class="hljs-type">int</span>&amp; ref = a; <br>ref = <span class="hljs-number">20</span>; <span class="hljs-comment">//å†…éƒ¨å‘ç°refæ˜¯å¼•ç”¨ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬è½¬æ¢ä¸º: *ref = 20;</span><br>    <br>cout &lt;&lt; <span class="hljs-string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;ref:&quot;</span> &lt;&lt; ref &lt;&lt; endl;<br>    <br><span class="hljs-built_in">func</span>(a);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“è®ºï¼šC++æ¨èç”¨å¼•ç”¨æŠ€æœ¯ï¼Œå› ä¸ºè¯­æ³•æ–¹ä¾¿ï¼Œå¼•ç”¨æœ¬è´¨æ˜¯æŒ‡é’ˆå¸¸é‡ï¼Œä½†æ˜¯æ‰€æœ‰çš„æŒ‡é’ˆæ“ä½œç¼–è¯‘å™¨éƒ½å¸®æˆ‘ä»¬åšäº†</p><h3 id="2-6-å¸¸é‡å¼•ç”¨">2.6 å¸¸é‡å¼•ç”¨</h3><p>**ä½œç”¨ï¼š**å¸¸é‡å¼•ç”¨ä¸»è¦ç”¨æ¥ä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢è¯¯æ“ä½œ</p><p>åœ¨å‡½æ•°å½¢å‚åˆ—è¡¨ä¸­ï¼Œå¯ä»¥åŠ ==constä¿®é¥°å½¢å‚==ï¼Œé˜²æ­¢å½¢å‚æ”¹å˜å®å‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å¼•ç”¨ä½¿ç”¨çš„åœºæ™¯ï¼Œé€šå¸¸ç”¨æ¥ä¿®é¥°å½¢å‚</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showValue</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; v)</span> </span>&#123;<br><span class="hljs-comment">//v += 10;</span><br>cout &lt;&lt; v &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//int&amp; ref = 10;  å¼•ç”¨æœ¬èº«éœ€è¦ä¸€ä¸ªåˆæ³•çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™è¡Œé”™è¯¯</span><br><span class="hljs-comment">//åŠ å…¥constå°±å¯ä»¥äº†ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–ä»£ç ï¼Œint temp = 10; const int&amp; ref = temp;</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; ref = <span class="hljs-number">10</span>;<br><br><span class="hljs-comment">//ref = 100;  //åŠ å…¥conståä¸å¯ä»¥ä¿®æ”¹å˜é‡</span><br>cout &lt;&lt; ref &lt;&lt; endl;<br><br><span class="hljs-comment">//å‡½æ•°ä¸­åˆ©ç”¨å¸¸é‡å¼•ç”¨é˜²æ­¢è¯¯æ“ä½œä¿®æ”¹å®å‚</span><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-built_in">showValue</span>(a);<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-å‡½æ•°æé«˜">3 å‡½æ•°æé«˜</h2><h3 id="3-1-å‡½æ•°é»˜è®¤å‚æ•°">3.1 å‡½æ•°é»˜è®¤å‚æ•°</h3><p>åœ¨C++ä¸­ï¼Œå‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­çš„å½¢å‚æ˜¯å¯ä»¥æœ‰é»˜è®¤å€¼çš„ã€‚</p><p>è¯­æ³•ï¼š<code> è¿”å›å€¼ç±»å‹  å‡½æ•°å ï¼ˆå‚æ•°= é»˜è®¤å€¼ï¼‰&#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b = <span class="hljs-number">10</span>, <span class="hljs-type">int</span> c = <span class="hljs-number">10</span>)</span> </span>&#123;<br><span class="hljs-keyword">return</span> a + b + c;<br>&#125;<br><br><span class="hljs-comment">//1. å¦‚æœæŸä¸ªä½ç½®å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œé‚£ä¹ˆä»è¿™ä¸ªä½ç½®å¾€åï¼Œä»å·¦å‘å³ï¼Œå¿…é¡»éƒ½è¦æœ‰é»˜è®¤å€¼</span><br><span class="hljs-comment">//2. å¦‚æœå‡½æ•°å£°æ˜æœ‰é»˜è®¤å€¼ï¼Œå‡½æ•°å®ç°çš„æ—¶å€™å°±ä¸èƒ½æœ‰é»˜è®¤å‚æ•°</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, <span class="hljs-type">int</span> b = <span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br><span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;ret = &quot;</span> &lt;&lt; <span class="hljs-built_in">func</span>(<span class="hljs-number">20</span>, <span class="hljs-number">20</span>) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;ret = &quot;</span> &lt;&lt; <span class="hljs-built_in">func</span>(<span class="hljs-number">100</span>) &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-2-å‡½æ•°å ä½å‚æ•°">3.2 å‡½æ•°å ä½å‚æ•°</h3><p>C++ä¸­å‡½æ•°çš„å½¢å‚åˆ—è¡¨é‡Œå¯ä»¥æœ‰å ä½å‚æ•°ï¼Œç”¨æ¥åšå ä½ï¼Œè°ƒç”¨å‡½æ•°æ—¶å¿…é¡»å¡«è¡¥è¯¥ä½ç½®</p><p><strong>è¯­æ³•ï¼š</strong> <code>è¿”å›å€¼ç±»å‹ å‡½æ•°å (æ•°æ®ç±»å‹)&#123;&#125;</code></p><p>åœ¨ç°é˜¶æ®µå‡½æ•°çš„å ä½å‚æ•°å­˜åœ¨æ„ä¹‰ä¸å¤§ï¼Œä½†æ˜¯åé¢çš„è¯¾ç¨‹ä¸­ä¼šç”¨åˆ°è¯¥æŠ€æœ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å‡½æ•°å ä½å‚æ•° ï¼Œå ä½å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å‚æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span>)</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;this is func&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>); <span class="hljs-comment">//å ä½å‚æ•°å¿…é¡»å¡«è¡¥</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-3-å‡½æ•°é‡è½½">3.3 å‡½æ•°é‡è½½</h3><h4 id="3-3-1-å‡½æ•°é‡è½½æ¦‚è¿°">3.3.1 å‡½æ•°é‡è½½æ¦‚è¿°</h4><p>**ä½œç”¨ï¼š**å‡½æ•°åå¯ä»¥ç›¸åŒï¼Œæé«˜å¤ç”¨æ€§</p><p><strong>å‡½æ•°é‡è½½æ»¡è¶³æ¡ä»¶ï¼š</strong></p><ul><li>åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹</li><li>å‡½æ•°åç§°ç›¸åŒ</li><li>å‡½æ•°å‚æ•°<strong>ç±»å‹ä¸åŒ</strong>  æˆ–è€… <strong>ä¸ªæ•°ä¸åŒ</strong> æˆ–è€… <strong>é¡ºåºä¸åŒ</strong></li></ul><p><strong>æ³¨æ„:</strong>  å‡½æ•°çš„è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½çš„æ¡ä»¶</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å‡½æ•°é‡è½½éœ€è¦å‡½æ•°éƒ½åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func (int a) çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">double</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func (double a)çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a ,<span class="hljs-type">double</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func (int a ,double b) çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">double</span> a ,<span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//å‡½æ•°è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½æ¡ä»¶</span><br><span class="hljs-comment">//int func(double a, int b)</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; &quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">func</span>();<br><span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>);<br><span class="hljs-built_in">func</span>(<span class="hljs-number">3.14</span>);<br><span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>,<span class="hljs-number">3.14</span>);<br><span class="hljs-built_in">func</span>(<span class="hljs-number">3.14</span> , <span class="hljs-number">10</span>);<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-3-2-å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹">3.3.2 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</h4><ul><li>å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶</li><li>å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</span><br><span class="hljs-comment">//1ã€å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;a)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func (int &amp;a) è°ƒç”¨ &quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span> &amp;a)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func (const int &amp;a) è°ƒç”¨ &quot;</span> &lt;&lt; endl;<br>&#125;<br><br><br><span class="hljs-comment">//2ã€å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b = <span class="hljs-number">10</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func2(int a, int b = 10) è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func2(int a) è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-built_in">func</span>(a); <span class="hljs-comment">//è°ƒç”¨æ— const</span><br><span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>);<span class="hljs-comment">//è°ƒç”¨æœ‰const</span><br><br><br><span class="hljs-comment">//func2(10); //ç¢°åˆ°é»˜è®¤å‚æ•°äº§ç”Ÿæ­§ä¹‰ï¼Œéœ€è¦é¿å…</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-ç±»å’Œå¯¹è±¡"><strong>4</strong> ç±»å’Œå¯¹è±¡</h2><p>C++é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ä¸ºï¼š==å°è£…ã€ç»§æ‰¿ã€å¤šæ€==</p><p>C++è®¤ä¸º==ä¸‡äº‹ä¸‡ç‰©éƒ½çš†ä¸ºå¯¹è±¡==ï¼Œå¯¹è±¡ä¸Šæœ‰å…¶å±æ€§å’Œè¡Œä¸º</p><p><strong>ä¾‹å¦‚ï¼š</strong></p><p>â€‹äººå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰å§“åã€å¹´é¾„ã€èº«é«˜ã€ä½“é‡â€¦ï¼Œè¡Œä¸ºæœ‰èµ°ã€è·‘ã€è·³ã€åƒé¥­ã€å”±æ­Œâ€¦</p><p>â€‹è½¦ä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰è½®èƒã€æ–¹å‘ç›˜ã€è½¦ç¯â€¦,è¡Œä¸ºæœ‰è½½äººã€æ”¾éŸ³ä¹ã€æ”¾ç©ºè°ƒâ€¦</p><p>â€‹å…·æœ‰ç›¸åŒæ€§è´¨çš„==å¯¹è±¡==ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡ç§°ä¸º==ç±»==ï¼Œäººå±äºäººç±»ï¼Œè½¦å±äºè½¦ç±»</p><h3 id="4-1-å°è£…">4.1 å°è£…</h3><h4 id="4-1-1-å°è£…çš„æ„ä¹‰">4.1.1  å°è£…çš„æ„ä¹‰</h4><p>å°è£…æ˜¯C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</p><p>å°è£…çš„æ„ä¹‰ï¼š</p><ul><li>å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©</li><li>å°†å±æ€§å’Œè¡Œä¸ºåŠ ä»¥æƒé™æ§åˆ¶</li></ul><p><strong>å°è£…æ„ä¹‰ä¸€ï¼š</strong></p><p>â€‹åœ¨è®¾è®¡ç±»çš„æ—¶å€™ï¼Œå±æ€§å’Œè¡Œä¸ºå†™åœ¨ä¸€èµ·ï¼Œè¡¨ç°äº‹ç‰©</p><p><strong>è¯­æ³•ï¼š</strong> <code>class ç±»å&#123;   è®¿é—®æƒé™ï¼š å±æ€§  / è¡Œä¸º  &#125;;</code></p><p>**ç¤ºä¾‹1ï¼š**è®¾è®¡ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿</p><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//åœ†å‘¨ç‡</span><br><span class="hljs-type">const</span> <span class="hljs-type">double</span> PI = <span class="hljs-number">3.14</span>;<br><br><span class="hljs-comment">//1ã€å°è£…çš„æ„ä¹‰</span><br><span class="hljs-comment">//å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œç”¨æ¥è¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©</span><br><br><span class="hljs-comment">//å°è£…ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿</span><br><span class="hljs-comment">//classä»£è¡¨è®¾è®¡ä¸€ä¸ªç±»ï¼Œåé¢è·Ÿç€çš„æ˜¯ç±»å</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span><br>&#123;<br><span class="hljs-keyword">public</span>:  <span class="hljs-comment">//è®¿é—®æƒé™  å…¬å…±çš„æƒé™</span><br><br><span class="hljs-comment">//å±æ€§</span><br><span class="hljs-type">int</span> m_r;<span class="hljs-comment">//åŠå¾„</span><br><br><span class="hljs-comment">//è¡Œä¸º</span><br><span class="hljs-comment">//è·å–åˆ°åœ†çš„å‘¨é•¿</span><br><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">calculateZC</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//2 * pi  * r</span><br><span class="hljs-comment">//è·å–åœ†çš„å‘¨é•¿</span><br><span class="hljs-keyword">return</span>  <span class="hljs-number">2</span> * PI * m_r;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//é€šè¿‡åœ†ç±»ï¼Œåˆ›å»ºåœ†çš„å¯¹è±¡</span><br><span class="hljs-comment">// c1å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„åœ†</span><br>Circle c1;<br>c<span class="hljs-number">1.</span>m_r = <span class="hljs-number">10</span>; <span class="hljs-comment">//ç»™åœ†å¯¹è±¡çš„åŠå¾„ è¿›è¡Œèµ‹å€¼æ“ä½œ</span><br><br><span class="hljs-comment">//2 * pi * 10 = = 62.8</span><br>cout &lt;&lt; <span class="hljs-string">&quot;åœ†çš„å‘¨é•¿ä¸ºï¼š &quot;</span> &lt;&lt; c<span class="hljs-number">1.</span><span class="hljs-built_in">calculateZC</span>() &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**ç¤ºä¾‹2ï¼š**è®¾è®¡ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œå±æ€§æœ‰å§“åå’Œå­¦å·ï¼Œå¯ä»¥ç»™å§“åå’Œå­¦å·èµ‹å€¼ï¼Œå¯ä»¥æ˜¾ç¤ºå­¦ç”Ÿçš„å§“åå’Œå­¦å·</p><p><strong>ç¤ºä¾‹2ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å­¦ç”Ÿç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(string name)</span> </span>&#123;<br>m_name = name;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setID</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span> </span>&#123;<br>m_id = id;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showStudent</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;name:&quot;</span> &lt;&lt; m_name &lt;&lt; <span class="hljs-string">&quot; ID:&quot;</span> &lt;&lt; m_id &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">public</span>:<br>string m_name;<br><span class="hljs-type">int</span> m_id;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>Student stu;<br>stu.<span class="hljs-built_in">setName</span>(<span class="hljs-string">&quot;å¾·ç›è¥¿äºš&quot;</span>);<br>stu.<span class="hljs-built_in">setID</span>(<span class="hljs-number">250</span>);<br>stu.<span class="hljs-built_in">showStudent</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>å°è£…æ„ä¹‰äºŒï¼š</strong></p><p>ç±»åœ¨è®¾è®¡æ—¶ï¼Œå¯ä»¥æŠŠå±æ€§å’Œè¡Œä¸ºæ”¾åœ¨ä¸åŒçš„æƒé™ä¸‹ï¼ŒåŠ ä»¥æ§åˆ¶</p><p>è®¿é—®æƒé™æœ‰ä¸‰ç§ï¼š</p><ol><li>public        å…¬å…±æƒé™</li><li>protected ä¿æŠ¤æƒé™</li><li>private      ç§æœ‰æƒé™</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//ä¸‰ç§æƒé™</span><br><span class="hljs-comment">//å…¬å…±æƒé™  public     ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–å¯ä»¥è®¿é—®</span><br><span class="hljs-comment">//ä¿æŠ¤æƒé™  protected  ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®</span><br><span class="hljs-comment">//ç§æœ‰æƒé™  private    ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-comment">//å§“å  å…¬å…±æƒé™</span><br><span class="hljs-keyword">public</span>:<br>string m_Name;<br><br><span class="hljs-comment">//æ±½è½¦  ä¿æŠ¤æƒé™</span><br><span class="hljs-keyword">protected</span>:<br>string m_Car;<br><br><span class="hljs-comment">//é“¶è¡Œå¡å¯†ç   ç§æœ‰æƒé™</span><br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">int</span> m_Password;<br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>m_Name = <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>m_Car = <span class="hljs-string">&quot;æ‹–æ‹‰æœº&quot;</span>;<br>m_Password = <span class="hljs-number">123456</span>;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>Person p;<br>p.m_Name = <span class="hljs-string">&quot;æå››&quot;</span>;<br><span class="hljs-comment">//p.m_Car = &quot;å¥”é©°&quot;;  //ä¿æŠ¤æƒé™ç±»å¤–è®¿é—®ä¸åˆ°</span><br><span class="hljs-comment">//p.m_Password = 123; //ç§æœ‰æƒé™ç±»å¤–è®¿é—®ä¸åˆ°</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-1-2-structå’ŒclassåŒºåˆ«">4.1.2 structå’ŒclassåŒºåˆ«</h4><p>åœ¨C++ä¸­ structå’Œclasså”¯ä¸€çš„<strong>åŒºåˆ«</strong>å°±åœ¨äº <strong>é»˜è®¤çš„è®¿é—®æƒé™ä¸åŒ</strong></p><p>åŒºåˆ«ï¼š</p><ul><li>struct é»˜è®¤æƒé™ä¸ºå…¬å…±</li><li>class   é»˜è®¤æƒé™ä¸ºç§æœ‰</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">C1</span><br>&#123;<br><span class="hljs-type">int</span>  m_A; <span class="hljs-comment">//é»˜è®¤æ˜¯ç§æœ‰æƒé™</span><br>&#125;;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">C2</span><br>&#123;<br><span class="hljs-type">int</span> m_A;  <span class="hljs-comment">//é»˜è®¤æ˜¯å…¬å…±æƒé™</span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>C1 c1;<br>c<span class="hljs-number">1.</span>m_A = <span class="hljs-number">10</span>; <span class="hljs-comment">//é”™è¯¯ï¼Œè®¿é—®æƒé™æ˜¯ç§æœ‰</span><br><br>C2 c2;<br>c<span class="hljs-number">2.</span>m_A = <span class="hljs-number">10</span>; <span class="hljs-comment">//æ­£ç¡®ï¼Œè®¿é—®æƒé™æ˜¯å…¬å…±</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-1-3-æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰">4.1.3 æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰</h4><p>**ä¼˜ç‚¹1ï¼š**å°†æ‰€æœ‰æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ï¼Œå¯ä»¥è‡ªå·±æ§åˆ¶è¯»å†™æƒé™</p><p>**ä¼˜ç‚¹2ï¼š**å¯¹äºå†™æƒé™ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æµ‹æ•°æ®çš„æœ‰æ•ˆæ€§</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-comment">//å§“åè®¾ç½®å¯è¯»å¯å†™</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(string name)</span> </span>&#123;<br>m_Name = name;<br>&#125;<br><span class="hljs-function">string <span class="hljs-title">getName</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> m_Name;<br>&#125;<br><br><br><span class="hljs-comment">//è·å–å¹´é¾„ </span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getAge</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> m_Age;<br>&#125;<br><span class="hljs-comment">//è®¾ç½®å¹´é¾„</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> </span>&#123;<br><span class="hljs-keyword">if</span> (age &lt; <span class="hljs-number">0</span> || age &gt; <span class="hljs-number">150</span>) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ä½ ä¸ªè€å¦–ç²¾!&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">return</span>;<br>&#125;<br>m_Age = age;<br>&#125;<br><br><span class="hljs-comment">//æƒ…äººè®¾ç½®ä¸ºåªå†™</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setLover</span><span class="hljs-params">(string lover)</span> </span>&#123;<br>m_Lover = lover;<br>&#125;<br><br><span class="hljs-keyword">private</span>:<br>string m_Name; <span class="hljs-comment">//å¯è¯»å¯å†™  å§“å</span><br><br><span class="hljs-type">int</span> m_Age; <span class="hljs-comment">//åªè¯»  å¹´é¾„</span><br><br>string m_Lover; <span class="hljs-comment">//åªå†™  æƒ…äºº</span><br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>Person p;<br><span class="hljs-comment">//å§“åè®¾ç½®</span><br>p.<span class="hljs-built_in">setName</span>(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.<span class="hljs-built_in">getName</span>() &lt;&lt; endl;<br><br><span class="hljs-comment">//å¹´é¾„è®¾ç½®</span><br>p.<span class="hljs-built_in">setAge</span>(<span class="hljs-number">50</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.<span class="hljs-built_in">getAge</span>() &lt;&lt; endl;<br><br><span class="hljs-comment">//æƒ…äººè®¾ç½®</span><br>p.<span class="hljs-built_in">setLover</span>(<span class="hljs-string">&quot;è‹äº•&quot;</span>);<br><span class="hljs-comment">//cout &lt;&lt; &quot;æƒ…äººï¼š &quot; &lt;&lt; p.m_Lover &lt;&lt; endl;  //åªå†™å±æ€§ï¼Œä¸å¯ä»¥è¯»å–</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»ƒä¹ æ¡ˆä¾‹1ï¼šè®¾è®¡ç«‹æ–¹ä½“ç±»</strong></p><p>è®¾è®¡ç«‹æ–¹ä½“ç±»(Cube)</p><p>æ±‚å‡ºç«‹æ–¹ä½“çš„é¢ç§¯å’Œä½“ç§¯</p><p>åˆ†åˆ«ç”¨å…¨å±€å‡½æ•°å’Œæˆå‘˜å‡½æ•°åˆ¤æ–­ä¸¤ä¸ªç«‹æ–¹ä½“æ˜¯å¦ç›¸ç­‰ã€‚</p><p><img src="/assets/1545533548532.png" alt="1545533548532"></p><p><strong>ç»ƒä¹ æ¡ˆä¾‹2ï¼šç‚¹å’Œåœ†çš„å…³ç³»</strong></p><p>è®¾è®¡ä¸€ä¸ªåœ†å½¢ç±»ï¼ˆCircleï¼‰ï¼Œå’Œä¸€ä¸ªç‚¹ç±»ï¼ˆPointï¼‰ï¼Œè®¡ç®—ç‚¹å’Œåœ†çš„å…³ç³»ã€‚</p><p><img src="/assets/1545533829184.png" alt="1545533829184"></p><h3 id="4-2-å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†">4.2 å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†</h3><ul><li>ç”Ÿæ´»ä¸­æˆ‘ä»¬ä¹°çš„ç”µå­äº§å“éƒ½åŸºæœ¬ä¼šæœ‰å‡ºå‚è®¾ç½®ï¼Œåœ¨æŸä¸€å¤©æˆ‘ä»¬ä¸ç”¨æ—¶å€™ä¹Ÿä¼šåˆ é™¤ä¸€äº›è‡ªå·±ä¿¡æ¯æ•°æ®ä¿è¯å®‰å…¨</li><li>C++ä¸­çš„é¢å‘å¯¹è±¡æ¥æºäºç”Ÿæ´»ï¼Œæ¯ä¸ªå¯¹è±¡ä¹Ÿéƒ½ä¼šæœ‰åˆå§‹è®¾ç½®ä»¥åŠ å¯¹è±¡é”€æ¯å‰çš„æ¸…ç†æ•°æ®çš„è®¾ç½®ã€‚</li></ul><h4 id="4-2-1-æ„é€ å‡½æ•°å’Œææ„å‡½æ•°">4.2.1 æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</h4><p>å¯¹è±¡çš„<strong>åˆå§‹åŒ–å’Œæ¸…ç†</strong>ä¹Ÿæ˜¯ä¸¤ä¸ªéå¸¸é‡è¦çš„å®‰å…¨é—®é¢˜</p><p>â€‹ä¸€ä¸ªå¯¹è±¡æˆ–è€…å˜é‡æ²¡æœ‰åˆå§‹çŠ¶æ€ï¼Œå¯¹å…¶ä½¿ç”¨åæœæ˜¯æœªçŸ¥</p><p>â€‹åŒæ ·çš„ä½¿ç”¨å®Œä¸€ä¸ªå¯¹è±¡æˆ–å˜é‡ï¼Œæ²¡æœ‰åŠæ—¶æ¸…ç†ï¼Œä¹Ÿä¼šé€ æˆä¸€å®šçš„å®‰å…¨é—®é¢˜</p><p>c++åˆ©ç”¨äº†<strong>æ„é€ å‡½æ•°</strong>å’Œ<strong>ææ„å‡½æ•°</strong>è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å°†ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œå®Œæˆå¯¹è±¡åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œã€‚</p><p>å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œæ˜¯ç¼–è¯‘å™¨å¼ºåˆ¶è¦æˆ‘ä»¬åšçš„äº‹æƒ…ï¼Œå› æ­¤å¦‚æœ<strong>æˆ‘ä»¬ä¸æä¾›æ„é€ å’Œææ„ï¼Œç¼–è¯‘å™¨ä¼šæä¾›</strong></p><p><strong>ç¼–è¯‘å™¨æä¾›çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ç©ºå®ç°ã€‚</strong></p><ul><li>æ„é€ å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºåˆ›å»ºå¯¹è±¡æ—¶ä¸ºå¯¹è±¡çš„æˆå‘˜å±æ€§èµ‹å€¼ï¼Œæ„é€ å‡½æ•°ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨ã€‚</li><li>ææ„å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºå¯¹è±¡<strong>é”€æ¯å‰</strong>ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚</li></ul><p><strong>æ„é€ å‡½æ•°è¯­æ³•ï¼š</strong><code>ç±»å()&#123;&#125;</code></p><ol><li>æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void</li><li>å‡½æ•°åç§°ä¸ç±»åç›¸åŒ</li><li>æ„é€ å‡½æ•°å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤å¯ä»¥å‘ç”Ÿé‡è½½</li><li>ç¨‹åºåœ¨è°ƒç”¨å¯¹è±¡æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</li></ol><p><strong>ææ„å‡½æ•°è¯­æ³•ï¼š</strong> <code>~ç±»å()&#123;&#125;</code></p><ol><li>ææ„å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void</li><li>å‡½æ•°åç§°ä¸ç±»åç›¸åŒ,åœ¨åç§°å‰åŠ ä¸Šç¬¦å·  ~</li><li>ææ„å‡½æ•°ä¸å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤ä¸å¯ä»¥å‘ç”Ÿé‡è½½</li><li>ç¨‹åºåœ¨å¯¹è±¡é”€æ¯å‰ä¼šè‡ªåŠ¨è°ƒç”¨ææ„ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Person</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Personçš„æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//ææ„å‡½æ•°</span><br>~<span class="hljs-built_in">Person</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Personçš„ææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person p;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-2-2-æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨">4.2.2 æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨</h4><p>ä¸¤ç§åˆ†ç±»æ–¹å¼ï¼š</p><p>â€‹æŒ‰å‚æ•°åˆ†ä¸ºï¼š æœ‰å‚æ„é€ å’Œæ— å‚æ„é€ </p><p>â€‹æŒ‰ç±»å‹åˆ†ä¸ºï¼š æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ </p><p>ä¸‰ç§è°ƒç”¨æ–¹å¼ï¼š</p><p>â€‹æ‹¬å·æ³•</p><p>â€‹æ˜¾ç¤ºæ³•</p><p>â€‹éšå¼è½¬æ¢æ³•</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//1ã€æ„é€ å‡½æ•°åˆ†ç±»</span><br><span class="hljs-comment">// æŒ‰ç…§å‚æ•°åˆ†ç±»åˆ†ä¸º æœ‰å‚å’Œæ— å‚æ„é€    æ— å‚åˆç§°ä¸ºé»˜è®¤æ„é€ å‡½æ•°</span><br><span class="hljs-comment">// æŒ‰ç…§ç±»å‹åˆ†ç±»åˆ†ä¸º æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ </span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Person</span>() &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//æœ‰å‚æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> a) &#123;<br>age = a;<br>cout &lt;&lt; <span class="hljs-string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//æ‹·è´æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person&amp; p) &#123;<br>age = p.age;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//ææ„å‡½æ•°</span><br>~<span class="hljs-built_in">Person</span>() &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> age;<br>&#125;;<br><br><span class="hljs-comment">//2ã€æ„é€ å‡½æ•°çš„è°ƒç”¨</span><br><span class="hljs-comment">//è°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>Person p; <span class="hljs-comment">//è°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span><br>&#125;<br><br><span class="hljs-comment">//è°ƒç”¨æœ‰å‚çš„æ„é€ å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//2.1  æ‹¬å·æ³•ï¼Œå¸¸ç”¨</span><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-comment">//æ³¨æ„1ï¼šè°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä¸èƒ½åŠ æ‹¬å·ï¼Œå¦‚æœåŠ äº†ç¼–è¯‘å™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜</span><br><span class="hljs-comment">//Person p2();</span><br><br><span class="hljs-comment">//2.2 æ˜¾å¼æ³•</span><br>Person p2 = <span class="hljs-built_in">Person</span>(<span class="hljs-number">10</span>); <br>Person p3 = <span class="hljs-built_in">Person</span>(p2);<br><span class="hljs-comment">//Person(10)å•ç‹¬å†™å°±æ˜¯åŒ¿åå¯¹è±¡  å½“å‰è¡Œç»“æŸä¹‹åï¼Œé©¬ä¸Šææ„</span><br><br><span class="hljs-comment">//2.3 éšå¼è½¬æ¢æ³•</span><br>Person p4 = <span class="hljs-number">10</span>; <span class="hljs-comment">// Person p4 = Person(10); </span><br>Person p5 = p4; <span class="hljs-comment">// Person p5 = Person(p4); </span><br><br><span class="hljs-comment">//æ³¨æ„2ï¼šä¸èƒ½åˆ©ç”¨ æ‹·è´æ„é€ å‡½æ•° åˆå§‹åŒ–åŒ¿åå¯¹è±¡ ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯å¯¹è±¡å£°æ˜</span><br><span class="hljs-comment">//Person p5(p4);</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><span class="hljs-comment">//test02();</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-2-3-æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº">4.2.3 æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº</h4><p>C++ä¸­æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœºé€šå¸¸æœ‰ä¸‰ç§æƒ…å†µ</p><ul><li>ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</li><li>å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</li><li>ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>() &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>mAge = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>mAge = age;<br>&#125;<br><span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person&amp; p) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>mAge = p.mAge;<br>&#125;<br><span class="hljs-comment">//ææ„å‡½æ•°åœ¨é‡Šæ”¾å†…å­˜ä¹‹å‰è°ƒç”¨</span><br>~<span class="hljs-built_in">Person</span>() &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> mAge;<br>&#125;;<br><br><span class="hljs-comment">//1. ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-function">Person <span class="hljs-title">man</span><span class="hljs-params">(<span class="hljs-number">100</span>)</span></span>; <span class="hljs-comment">//på¯¹è±¡å·²ç»åˆ›å»ºå®Œæ¯•</span><br><span class="hljs-function">Person <span class="hljs-title">newman</span><span class="hljs-params">(man)</span></span>; <span class="hljs-comment">//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span><br>Person newman2 = man; <span class="hljs-comment">//æ‹·è´æ„é€ </span><br><br><span class="hljs-comment">//Person newman3;</span><br><span class="hljs-comment">//newman3 = man; //ä¸æ˜¯è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œèµ‹å€¼æ“ä½œ</span><br>&#125;<br><br><span class="hljs-comment">//2. å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</span><br><span class="hljs-comment">//ç›¸å½“äºPerson p1 = p;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doWork</span><span class="hljs-params">(Person p1)</span> </span>&#123;&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>&#123;<br>Person p; <span class="hljs-comment">//æ— å‚æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">doWork</span>(p);<br>&#125;<br><br><span class="hljs-comment">//3. ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</span><br><span class="hljs-function">Person <span class="hljs-title">doWork2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person p1;<br>cout &lt;&lt; (<span class="hljs-type">int</span> *)&amp;p1 &lt;&lt; endl;<br><span class="hljs-keyword">return</span> p1;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person p = <span class="hljs-built_in">doWork2</span>();<br>cout &lt;&lt; (<span class="hljs-type">int</span> *)&amp;p &lt;&lt; endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><span class="hljs-comment">//test02();</span><br><span class="hljs-built_in">test03</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-2-4-æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™">4.2.4 æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œc++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 3ä¸ªå‡½æ•°</p><p>1ï¼é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</p><p>2ï¼é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</p><p>3ï¼é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</p><p>æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li><p>å¦‚æœç”¨æˆ·å®šä¹‰æœ‰å‚æ„é€ å‡½æ•°ï¼Œc++ä¸åœ¨æä¾›é»˜è®¤æ— å‚æ„é€ ï¼Œä½†æ˜¯ä¼šæä¾›é»˜è®¤æ‹·è´æ„é€ </p></li><li><p>å¦‚æœç”¨æˆ·å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œc++ä¸ä¼šå†æä¾›å…¶ä»–æ„é€ å‡½æ•°</p></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Person</span>() &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//æœ‰å‚æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> a) &#123;<br>age = a;<br>cout &lt;&lt; <span class="hljs-string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//æ‹·è´æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person&amp; p) &#123;<br>age = p.age;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//ææ„å‡½æ•°</span><br>~<span class="hljs-built_in">Person</span>() &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">18</span>)</span></span>;<br><span class="hljs-comment">//å¦‚æœä¸å†™æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ·»åŠ æ‹·è´æ„é€ ï¼Œå¹¶ä¸”åšæµ…æ‹·è´æ“ä½œ</span><br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(p1)</span></span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;p2çš„å¹´é¾„ä¸ºï¼š &quot;</span> &lt;&lt; p<span class="hljs-number">2.</span>age &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//å¦‚æœç”¨æˆ·æä¾›æœ‰å‚æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›é»˜è®¤æ„é€ ï¼Œä¼šæä¾›æ‹·è´æ„é€ </span><br>Person p1; <span class="hljs-comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™</span><br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>; <span class="hljs-comment">//ç”¨æˆ·æä¾›çš„æœ‰å‚</span><br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(p2)</span></span>; <span class="hljs-comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šæä¾›</span><br><br><span class="hljs-comment">//å¦‚æœç”¨æˆ·æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›å…¶ä»–æ„é€ å‡½æ•°</span><br>Person p4; <span class="hljs-comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™</span><br><span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>; <span class="hljs-comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›æœ‰å‚ï¼Œä¼šå‡ºé”™</span><br><span class="hljs-function">Person <span class="hljs-title">p6</span><span class="hljs-params">(p5)</span></span>; <span class="hljs-comment">//ç”¨æˆ·è‡ªå·±æä¾›æ‹·è´æ„é€ </span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-2-5-æ·±æ‹·è´ä¸æµ…æ‹·è´">4.2.5 æ·±æ‹·è´ä¸æµ…æ‹·è´</h4><p>æ·±æµ…æ‹·è´æ˜¯é¢è¯•ç»å…¸é—®é¢˜ï¼Œä¹Ÿæ˜¯å¸¸è§çš„ä¸€ä¸ªå‘</p><p>æµ…æ‹·è´ï¼šç®€å•çš„èµ‹å€¼æ‹·è´æ“ä½œ</p><p>æ·±æ‹·è´ï¼šåœ¨å †åŒºé‡æ–°ç”³è¯·ç©ºé—´ï¼Œè¿›è¡Œæ‹·è´æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Person</span>() &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//æœ‰å‚æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age ,<span class="hljs-type">int</span> height) &#123;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br><br>m_age = age;<br>m_height = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(height);<br><br>&#125;<br><span class="hljs-comment">//æ‹·è´æ„é€ å‡½æ•°  </span><br><span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person&amp; p) &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br><span class="hljs-comment">//å¦‚æœä¸åˆ©ç”¨æ·±æ‹·è´åœ¨å †åŒºåˆ›å»ºæ–°å†…å­˜ï¼Œä¼šå¯¼è‡´æµ…æ‹·è´å¸¦æ¥çš„é‡å¤é‡Šæ”¾å †åŒºé—®é¢˜</span><br>m_age = p.m_age;<br>m_height = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(*p.m_height);<br><br>&#125;<br><br><span class="hljs-comment">//ææ„å‡½æ•°</span><br>~<span class="hljs-built_in">Person</span>() &#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">if</span> (m_height != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span> m_height;<br>&#125;<br>&#125;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_age;<br><span class="hljs-type">int</span>* m_height;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">18</span>, <span class="hljs-number">180</span>)</span></span>;<br><br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(p1)</span></span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;p1çš„å¹´é¾„ï¼š &quot;</span> &lt;&lt; p<span class="hljs-number">1.</span>m_age &lt;&lt; <span class="hljs-string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; *p<span class="hljs-number">1.</span>m_height &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;p2çš„å¹´é¾„ï¼š &quot;</span> &lt;&lt; p<span class="hljs-number">2.</span>m_age &lt;&lt; <span class="hljs-string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; *p<span class="hljs-number">2.</span>m_height &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå¦‚æœå±æ€§æœ‰åœ¨å †åŒºå¼€è¾Ÿçš„ï¼Œä¸€å®šè¦è‡ªå·±æä¾›æ‹·è´æ„é€ å‡½æ•°ï¼Œé˜²æ­¢æµ…æ‹·è´å¸¦æ¥çš„é—®é¢˜</p></blockquote><h4 id="4-2-6-åˆå§‹åŒ–åˆ—è¡¨">4.2.6 åˆå§‹åŒ–åˆ—è¡¨</h4><p><strong>ä½œç”¨ï¼š</strong></p><p>C++æä¾›äº†åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•ï¼Œç”¨æ¥åˆå§‹åŒ–å±æ€§</p><p><strong>è¯­æ³•ï¼š</strong><code>æ„é€ å‡½æ•°()ï¼šå±æ€§1(å€¼1),å±æ€§2ï¼ˆå€¼2ï¼‰... &#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-comment">////ä¼ ç»Ÿæ–¹å¼åˆå§‹åŒ–</span><br><span class="hljs-comment">//Person(int a, int b, int c) &#123;</span><br><span class="hljs-comment">//m_A = a;</span><br><span class="hljs-comment">//m_B = b;</span><br><span class="hljs-comment">//m_C = c;</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-comment">//åˆå§‹åŒ–åˆ—è¡¨æ–¹å¼åˆå§‹åŒ–</span><br><span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> c) :<span class="hljs-built_in">m_A</span>(a), <span class="hljs-built_in">m_B</span>(b), <span class="hljs-built_in">m_C</span>(c) &#123;&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintPerson</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;mA:&quot;</span> &lt;&lt; m_A &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;mB:&quot;</span> &lt;&lt; m_B &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;mC:&quot;</span> &lt;&lt; m_C &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">int</span> m_A;<br><span class="hljs-type">int</span> m_B;<br><span class="hljs-type">int</span> m_C;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-function">Person <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)</span></span>;<br>p.<span class="hljs-built_in">PrintPerson</span>();<br><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-2-7-ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜">4.2.7 ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜</h4><p>C++ç±»ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span><br>&#123;<br>    A aï¼›<br>&#125;<br></code></pre></td></tr></table></figure><p>Bç±»ä¸­æœ‰å¯¹è±¡Aä½œä¸ºæˆå‘˜ï¼ŒAä¸ºå¯¹è±¡æˆå‘˜</p><p>é‚£ä¹ˆå½“åˆ›å»ºBå¯¹è±¡æ—¶ï¼ŒAä¸Bçš„æ„é€ å’Œææ„çš„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Phone</span>(string name)<br>&#123;<br>m_PhoneName = name;<br>cout &lt;&lt; <span class="hljs-string">&quot;Phoneæ„é€ &quot;</span> &lt;&lt; endl;<br>&#125;<br><br>~<span class="hljs-built_in">Phone</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Phoneææ„&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>string m_PhoneName;<br><br>&#125;;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-comment">//åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨è°ƒç”¨å“ªä¸€ä¸ªæ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Person</span>(string name, string pName) :<span class="hljs-built_in">m_Name</span>(name), <span class="hljs-built_in">m_Phone</span>(pName)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Personæ„é€ &quot;</span> &lt;&lt; endl;<br>&#125;<br><br>~<span class="hljs-built_in">Person</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Personææ„&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">playGame</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; m_Name &lt;&lt; <span class="hljs-string">&quot; ä½¿ç”¨&quot;</span> &lt;&lt; m_Phone.m_PhoneName &lt;&lt; <span class="hljs-string">&quot; ç‰Œæ‰‹æœº! &quot;</span> &lt;&lt; endl;<br>&#125;<br><br>string m_Name;<br>Phone m_Phone;<br><br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//å½“ç±»ä¸­æˆå‘˜æ˜¯å…¶ä»–ç±»å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜</span><br><span class="hljs-comment">//æ„é€ çš„é¡ºåºæ˜¯ ï¼šå…ˆè°ƒç”¨å¯¹è±¡æˆå‘˜çš„æ„é€ ï¼Œå†è°ƒç”¨æœ¬ç±»æ„é€ </span><br><span class="hljs-comment">//ææ„é¡ºåºä¸æ„é€ ç›¸å</span><br><span class="hljs-function">Person <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span> , <span class="hljs-string">&quot;è‹¹æœX&quot;</span>)</span></span>;<br>p.<span class="hljs-built_in">playGame</span>();<br><br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-2-8-é™æ€æˆå‘˜">4.2.8 é™æ€æˆå‘˜</h4><p>é™æ€æˆå‘˜å°±æ˜¯åœ¨æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°å‰åŠ ä¸Šå…³é”®å­—staticï¼Œç§°ä¸ºé™æ€æˆå‘˜</p><p>é™æ€æˆå‘˜åˆ†ä¸ºï¼š</p><ul><li>é™æ€æˆå‘˜å˜é‡<ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®</li><li>åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜</li><li>ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</li></ul></li><li>é™æ€æˆå‘˜å‡½æ•°<ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‡½æ•°</li><li>é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</li></ul></li></ul><p>**ç¤ºä¾‹1 ï¼š**é™æ€æˆå‘˜å˜é‡</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> m_A; <span class="hljs-comment">//é™æ€æˆå‘˜å˜é‡</span><br><br><span class="hljs-comment">//é™æ€æˆå‘˜å˜é‡ç‰¹ç‚¹ï¼š</span><br><span class="hljs-comment">//1 åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜</span><br><span class="hljs-comment">//2 ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</span><br><span class="hljs-comment">//3 æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®</span><br><br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">static</span> <span class="hljs-type">int</span> m_B; <span class="hljs-comment">//é™æ€æˆå‘˜å˜é‡ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„</span><br>&#125;;<br><span class="hljs-type">int</span> Person::m_A = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> Person::m_B = <span class="hljs-number">10</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼</span><br><br><span class="hljs-comment">//1ã€é€šè¿‡å¯¹è±¡</span><br>Person p1;<br>p<span class="hljs-number">1.</span>m_A = <span class="hljs-number">100</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;p1.m_A = &quot;</span> &lt;&lt; p<span class="hljs-number">1.</span>m_A &lt;&lt; endl;<br><br>Person p2;<br>p<span class="hljs-number">2.</span>m_A = <span class="hljs-number">200</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;p1.m_A = &quot;</span> &lt;&lt; p<span class="hljs-number">1.</span>m_A &lt;&lt; endl; <span class="hljs-comment">//å…±äº«åŒä¸€ä»½æ•°æ®</span><br>cout &lt;&lt; <span class="hljs-string">&quot;p2.m_A = &quot;</span> &lt;&lt; p<span class="hljs-number">2.</span>m_A &lt;&lt; endl;<br><br><span class="hljs-comment">//2ã€é€šè¿‡ç±»å</span><br>cout &lt;&lt; <span class="hljs-string">&quot;m_A = &quot;</span> &lt;&lt; Person::m_A &lt;&lt; endl;<br><br><br><span class="hljs-comment">//cout &lt;&lt; &quot;m_B = &quot; &lt;&lt; Person::m_B &lt;&lt; endl; //ç§æœ‰æƒé™è®¿é—®ä¸åˆ°</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**ç¤ºä¾‹2ï¼š**é™æ€æˆå‘˜å‡½æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-comment">//é™æ€æˆå‘˜å‡½æ•°ç‰¹ç‚¹ï¼š</span><br><span class="hljs-comment">//1 ç¨‹åºå…±äº«ä¸€ä¸ªå‡½æ•°</span><br><span class="hljs-comment">//2 é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</span><br><br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;funcè°ƒç”¨&quot;</span> &lt;&lt; endl;<br>m_A = <span class="hljs-number">100</span>;<br><span class="hljs-comment">//m_B = 100; //é”™è¯¯ï¼Œä¸å¯ä»¥è®¿é—®éé™æ€æˆå‘˜å˜é‡</span><br>&#125;<br><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> m_A; <span class="hljs-comment">//é™æ€æˆå‘˜å˜é‡</span><br><span class="hljs-type">int</span> m_B; <span class="hljs-comment">// </span><br><span class="hljs-keyword">private</span>:<br><br><span class="hljs-comment">//é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„</span><br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func2è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><span class="hljs-type">int</span> Person::m_A = <span class="hljs-number">10</span>;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼</span><br><br><span class="hljs-comment">//1ã€é€šè¿‡å¯¹è±¡</span><br>Person p1;<br>p<span class="hljs-number">1.f</span>unc();<br><br><span class="hljs-comment">//2ã€é€šè¿‡ç±»å</span><br>Person::<span class="hljs-built_in">func</span>();<br><br><br><span class="hljs-comment">//Person::func2(); //ç§æœ‰æƒé™è®¿é—®ä¸åˆ°</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-3-C-å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ">4.3 C++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ</h3><h4 id="4-3-1-æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨">4.3.1 æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</h4><p>åœ¨C++ä¸­ï¼Œç±»å†…çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</p><p>åªæœ‰éé™æ€æˆå‘˜å˜é‡æ‰å±äºç±»çš„å¯¹è±¡ä¸Š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>() &#123;<br>mA = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//éé™æ€æˆå‘˜å˜é‡å å¯¹è±¡ç©ºé—´</span><br><span class="hljs-type">int</span> mA;<br><span class="hljs-comment">//é™æ€æˆå‘˜å˜é‡ä¸å å¯¹è±¡ç©ºé—´</span><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> mB; <br><span class="hljs-comment">//å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´ï¼Œæ‰€æœ‰å‡½æ•°å…±äº«ä¸€ä¸ªå‡½æ•°å®ä¾‹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;mA:&quot;</span> &lt;&lt; <span class="hljs-keyword">this</span>-&gt;mA &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//é™æ€æˆå‘˜å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´</span><br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">sfunc</span><span class="hljs-params">()</span> </span>&#123;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(Person) &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-3-2-thisæŒ‡é’ˆæ¦‚å¿µ">4.3.2 thisæŒ‡é’ˆæ¦‚å¿µ</h4><p>é€šè¿‡4.3.1æˆ‘ä»¬çŸ¥é“åœ¨C++ä¸­æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°æ˜¯åˆ†å¼€å­˜å‚¨çš„</p><p>æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°åªä¼šè¯ç”Ÿä¸€ä»½å‡½æ•°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªåŒç±»å‹çš„å¯¹è±¡ä¼šå…±ç”¨ä¸€å—ä»£ç </p><p>é‚£ä¹ˆé—®é¢˜æ˜¯ï¼šè¿™ä¸€å—ä»£ç æ˜¯å¦‚ä½•åŒºåˆ†é‚£ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å‘¢ï¼Ÿ</p><p>c++é€šè¿‡æä¾›ç‰¹æ®Šçš„å¯¹è±¡æŒ‡é’ˆï¼ŒthisæŒ‡é’ˆï¼Œè§£å†³ä¸Šè¿°é—®é¢˜ã€‚<strong>thisæŒ‡é’ˆæŒ‡å‘è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡</strong></p><p>thisæŒ‡é’ˆæ˜¯éšå«æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…çš„ä¸€ç§æŒ‡é’ˆ</p><p>thisæŒ‡é’ˆä¸éœ€è¦å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨å³å¯</p><p>thisæŒ‡é’ˆçš„ç”¨é€”ï¼š</p><ul><li>å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†</li><li>åœ¨ç±»çš„éé™æ€æˆå‘˜å‡½æ•°ä¸­è¿”å›å¯¹è±¡æœ¬èº«ï¼Œå¯ä½¿ç”¨return *this</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)<br>&#123;<br><span class="hljs-comment">//1ã€å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†</span><br><span class="hljs-keyword">this</span>-&gt;age = age;<br>&#125;<br><br><span class="hljs-function">Person&amp; <span class="hljs-title">PersonAddPerson</span><span class="hljs-params">(Person p)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">this</span>-&gt;age += p.age;<br><span class="hljs-comment">//è¿”å›å¯¹è±¡æœ¬èº«</span><br><span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br><br><span class="hljs-type">int</span> age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;p1.age = &quot;</span> &lt;&lt; p<span class="hljs-number">1.</span>age &lt;&lt; endl;<br><br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br>p<span class="hljs-number">2.</span><span class="hljs-built_in">PersonAddPerson</span>(p1).<span class="hljs-built_in">PersonAddPerson</span>(p1).<span class="hljs-built_in">PersonAddPerson</span>(p1);<br>cout &lt;&lt; <span class="hljs-string">&quot;p2.age = &quot;</span> &lt;&lt; p<span class="hljs-number">2.</span>age &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-3-3-ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°">4.3.3 ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</h4><p>C++ä¸­ç©ºæŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°çš„ï¼Œä½†æ˜¯ä¹Ÿè¦æ³¨æ„æœ‰æ²¡æœ‰ç”¨åˆ°thisæŒ‡é’ˆ</p><p>å¦‚æœç”¨åˆ°thisæŒ‡é’ˆï¼Œéœ€è¦åŠ ä»¥åˆ¤æ–­ä¿è¯ä»£ç çš„å¥å£®æ€§</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowClassName</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘æ˜¯Personç±»!&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowPerson</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == <span class="hljs-literal">NULL</span>) &#123;<br><span class="hljs-keyword">return</span>;<br>&#125;<br>cout &lt;&lt; mAge &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> mAge;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person * p = <span class="hljs-literal">NULL</span>;<br>p-&gt;<span class="hljs-built_in">ShowClassName</span>(); <span class="hljs-comment">//ç©ºæŒ‡é’ˆï¼Œå¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°</span><br>p-&gt;<span class="hljs-built_in">ShowPerson</span>();  <span class="hljs-comment">//ä½†æ˜¯å¦‚æœæˆå‘˜å‡½æ•°ä¸­ç”¨åˆ°äº†thisæŒ‡é’ˆï¼Œå°±ä¸å¯ä»¥äº†</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-3-4-constä¿®é¥°æˆå‘˜å‡½æ•°">4.3.4 constä¿®é¥°æˆå‘˜å‡½æ•°</h4><p><strong>å¸¸å‡½æ•°ï¼š</strong></p><ul><li>æˆå‘˜å‡½æ•°ååŠ conståæˆ‘ä»¬ç§°ä¸ºè¿™ä¸ªå‡½æ•°ä¸º<strong>å¸¸å‡½æ•°</strong></li><li>å¸¸å‡½æ•°å†…ä¸å¯ä»¥ä¿®æ”¹æˆå‘˜å±æ€§</li><li>æˆå‘˜å±æ€§å£°æ˜æ—¶åŠ å…³é”®å­—mutableåï¼Œåœ¨å¸¸å‡½æ•°ä¸­ä¾ç„¶å¯ä»¥ä¿®æ”¹</li></ul><p><strong>å¸¸å¯¹è±¡ï¼š</strong></p><ul><li>å£°æ˜å¯¹è±¡å‰åŠ constç§°è¯¥å¯¹è±¡ä¸ºå¸¸å¯¹è±¡</li><li>å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>() &#123;<br>m_A = <span class="hljs-number">0</span>;<br>m_B = <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//thisæŒ‡é’ˆçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ï¼ŒæŒ‡é’ˆçš„æŒ‡å‘ä¸å¯ä¿®æ”¹</span><br><span class="hljs-comment">//å¦‚æœæƒ³è®©æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¹Ÿä¸å¯ä»¥ä¿®æ”¹ï¼Œéœ€è¦å£°æ˜å¸¸å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowPerson</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br><span class="hljs-comment">//const Type* const pointer;</span><br><span class="hljs-comment">//this = NULL; //ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆçš„æŒ‡å‘ Person* const this;</span><br><span class="hljs-comment">//this-&gt;mA = 100; //ä½†æ˜¯thisæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡çš„æ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„</span><br><br><span class="hljs-comment">//constä¿®é¥°æˆå‘˜å‡½æ•°ï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´çš„æ•°æ®ä¸èƒ½ä¿®æ”¹ï¼Œé™¤äº†mutableä¿®é¥°çš„å˜é‡</span><br><span class="hljs-keyword">this</span>-&gt;m_B = <span class="hljs-number">100</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MyFunc</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br><span class="hljs-comment">//mA = 10000;</span><br>&#125;<br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_A;<br><span class="hljs-keyword">mutable</span> <span class="hljs-type">int</span> m_B; <span class="hljs-comment">//å¯ä¿®æ”¹ å¯å˜çš„</span><br>&#125;;<br><br><br><span class="hljs-comment">//constä¿®é¥°å¯¹è±¡  å¸¸å¯¹è±¡</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">const</span> Person person; <span class="hljs-comment">//å¸¸é‡å¯¹è±¡  </span><br>cout &lt;&lt; person.m_A &lt;&lt; endl;<br><span class="hljs-comment">//person.mA = 100; //å¸¸å¯¹è±¡ä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼,ä½†æ˜¯å¯ä»¥è®¿é—®</span><br>person.m_B = <span class="hljs-number">100</span>; <span class="hljs-comment">//ä½†æ˜¯å¸¸å¯¹è±¡å¯ä»¥ä¿®æ”¹mutableä¿®é¥°æˆå‘˜å˜é‡</span><br><br><span class="hljs-comment">//å¸¸å¯¹è±¡è®¿é—®æˆå‘˜å‡½æ•°</span><br>person.<span class="hljs-built_in">MyFunc</span>(); <span class="hljs-comment">//å¸¸å¯¹è±¡ä¸èƒ½è°ƒç”¨constçš„å‡½æ•°</span><br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-4-å‹å…ƒ">4.4 å‹å…ƒ</h3><p>ç”Ÿæ´»ä¸­ä½ çš„å®¶æœ‰å®¢å…(Public)ï¼Œæœ‰ä½ çš„å§å®¤(Private)</p><p>å®¢å…æ‰€æœ‰æ¥çš„å®¢äººéƒ½å¯ä»¥è¿›å»ï¼Œä½†æ˜¯ä½ çš„å§å®¤æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä½ èƒ½è¿›å»</p><p>ä½†æ˜¯å‘¢ï¼Œä½ ä¹Ÿå¯ä»¥å…è®¸ä½ çš„å¥½é—ºèœœå¥½åŸºå‹è¿›å»ã€‚</p><p>åœ¨ç¨‹åºé‡Œï¼Œæœ‰äº›ç§æœ‰å±æ€§ ä¹Ÿæƒ³è®©ç±»å¤–ç‰¹æ®Šçš„ä¸€äº›å‡½æ•°æˆ–è€…ç±»è¿›è¡Œè®¿é—®ï¼Œå°±éœ€è¦ç”¨åˆ°å‹å…ƒçš„æŠ€æœ¯</p><p>å‹å…ƒçš„ç›®çš„å°±æ˜¯è®©ä¸€ä¸ªå‡½æ•°æˆ–è€…ç±» è®¿é—®å¦ä¸€ä¸ªç±»ä¸­ç§æœ‰æˆå‘˜</p><p>å‹å…ƒçš„å…³é”®å­—ä¸º  ==friend==</p><p>å‹å…ƒçš„ä¸‰ç§å®ç°</p><ul><li>å…¨å±€å‡½æ•°åšå‹å…ƒ</li><li>ç±»åšå‹å…ƒ</li><li>æˆå‘˜å‡½æ•°åšå‹å…ƒ</li></ul><h4 id="4-4-1-å…¨å±€å‡½æ•°åšå‹å…ƒ">4.4.1 å…¨å±€å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span><br>&#123;<br><span class="hljs-comment">//å‘Šè¯‰ç¼–è¯‘å™¨ goodGayå…¨å±€å‡½æ•° æ˜¯ Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç±»ä¸­çš„ç§æœ‰å†…å®¹</span><br><span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">goodGay</span><span class="hljs-params">(Building * building)</span></span>;<br><br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-built_in">Building</span>()<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_SittingRoom = <span class="hljs-string">&quot;å®¢å…&quot;</span>;<br><span class="hljs-keyword">this</span>-&gt;m_BedRoom = <span class="hljs-string">&quot;å§å®¤&quot;</span>;<br>&#125;<br><br><br><span class="hljs-keyword">public</span>:<br>string m_SittingRoom; <span class="hljs-comment">//å®¢å…</span><br><br><span class="hljs-keyword">private</span>:<br>string m_BedRoom; <span class="hljs-comment">//å§å®¤</span><br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">goodGay</span><span class="hljs-params">(Building * building)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Building b;<br><span class="hljs-built_in">goodGay</span>(&amp;b);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-4-2-ç±»åšå‹å…ƒ">4.4.2 ç±»åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span>;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">goodGay</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-built_in">goodGay</span>();<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">visit</span><span class="hljs-params">()</span></span>;<br><br><span class="hljs-keyword">private</span>:<br>Building *building;<br>&#125;;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span><br>&#123;<br><span class="hljs-comment">//å‘Šè¯‰ç¼–è¯‘å™¨ goodGayç±»æ˜¯Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®åˆ°Buildingç±»ä¸­ç§æœ‰å†…å®¹</span><br><span class="hljs-keyword">friend</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">goodGay</span>;<br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Building</span>();<br><br><span class="hljs-keyword">public</span>:<br>string m_SittingRoom; <span class="hljs-comment">//å®¢å…</span><br><span class="hljs-keyword">private</span>:<br>string m_BedRoom;<span class="hljs-comment">//å§å®¤</span><br>&#125;;<br><br>Building::<span class="hljs-built_in">Building</span>()<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_SittingRoom = <span class="hljs-string">&quot;å®¢å…&quot;</span>;<br><span class="hljs-keyword">this</span>-&gt;m_BedRoom = <span class="hljs-string">&quot;å§å®¤&quot;</span>;<br>&#125;<br><br>goodGay::<span class="hljs-built_in">goodGay</span>()<br>&#123;<br>building = <span class="hljs-keyword">new</span> Building;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">goodGay::visit</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>goodGay gg;<br>gg.<span class="hljs-built_in">visit</span>();<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-4-3-æˆå‘˜å‡½æ•°åšå‹å…ƒ">4.4.3 æˆå‘˜å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span>;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">goodGay</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-built_in">goodGay</span>();<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">visit</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//åªè®©visitå‡½æ•°ä½œä¸ºBuildingçš„å¥½æœ‹å‹ï¼Œå¯ä»¥å‘è®¿é—®Buildingä¸­ç§æœ‰å†…å®¹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">visit2</span><span class="hljs-params">()</span></span>; <br><br><span class="hljs-keyword">private</span>:<br>Building *building;<br>&#125;;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span><br>&#123;<br><span class="hljs-comment">//å‘Šè¯‰ç¼–è¯‘å™¨  goodGayç±»ä¸­çš„visitæˆå‘˜å‡½æ•° æ˜¯Buildingå¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç§æœ‰å†…å®¹</span><br><span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">goodGay::visit</span><span class="hljs-params">()</span></span>;<br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Building</span>();<br><br><span class="hljs-keyword">public</span>:<br>string m_SittingRoom; <span class="hljs-comment">//å®¢å…</span><br><span class="hljs-keyword">private</span>:<br>string m_BedRoom;<span class="hljs-comment">//å§å®¤</span><br>&#125;;<br><br>Building::<span class="hljs-built_in">Building</span>()<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_SittingRoom = <span class="hljs-string">&quot;å®¢å…&quot;</span>;<br><span class="hljs-keyword">this</span>-&gt;m_BedRoom = <span class="hljs-string">&quot;å§å®¤&quot;</span>;<br>&#125;<br><br>goodGay::<span class="hljs-built_in">goodGay</span>()<br>&#123;<br>building = <span class="hljs-keyword">new</span> Building;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">goodGay::visit</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">goodGay::visit2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;<br><span class="hljs-comment">//cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>goodGay  gg;<br>gg.<span class="hljs-built_in">visit</span>();<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-5-è¿ç®—ç¬¦é‡è½½">4.5 è¿ç®—ç¬¦é‡è½½</h3><p>è¿ç®—ç¬¦é‡è½½æ¦‚å¿µï¼šå¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹</p><h4 id="4-5-1-åŠ å·è¿ç®—ç¬¦é‡è½½">4.5.1 åŠ å·è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼šå®ç°ä¸¤ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»å‹ç›¸åŠ çš„è¿ç®—</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>() &#123;&#125;;<br><span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_A = a;<br><span class="hljs-keyword">this</span>-&gt;m_B = b;<br>&#125;<br><span class="hljs-comment">//æˆå‘˜å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½</span><br>Person <span class="hljs-keyword">operator</span>+(<span class="hljs-type">const</span> Person&amp; p) &#123;<br>Person temp;<br>temp.m_A = <span class="hljs-keyword">this</span>-&gt;m_A + p.m_A;<br>temp.m_B = <span class="hljs-keyword">this</span>-&gt;m_B + p.m_B;<br><span class="hljs-keyword">return</span> temp;<br>&#125;<br><br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_A;<br><span class="hljs-type">int</span> m_B;<br>&#125;;<br><br><span class="hljs-comment">//å…¨å±€å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½</span><br><span class="hljs-comment">//Person operator+(const Person&amp; p1, const Person&amp; p2) &#123;</span><br><span class="hljs-comment">//Person temp(0, 0);</span><br><span class="hljs-comment">//temp.m_A = p1.m_A + p2.m_A;</span><br><span class="hljs-comment">//temp.m_B = p1.m_B + p2.m_B;</span><br><span class="hljs-comment">//return temp;</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-comment">//è¿ç®—ç¬¦é‡è½½ å¯ä»¥å‘ç”Ÿå‡½æ•°é‡è½½ </span><br>Person <span class="hljs-keyword">operator</span>+(<span class="hljs-type">const</span> Person&amp; p2, <span class="hljs-type">int</span> val)  <br>&#123;<br>Person temp;<br>temp.m_A = p<span class="hljs-number">2.</span>m_A + val;<br>temp.m_B = p<span class="hljs-number">2.</span>m_B + val;<br><span class="hljs-keyword">return</span> temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">20</span>, <span class="hljs-number">20</span>)</span></span>;<br><br><span class="hljs-comment">//æˆå‘˜å‡½æ•°æ–¹å¼</span><br>Person p3 = p2 + p1;  <span class="hljs-comment">//ç›¸å½“äº p2.operaor+(p1)</span><br>cout &lt;&lt; <span class="hljs-string">&quot;mA:&quot;</span> &lt;&lt; p<span class="hljs-number">3.</span>m_A &lt;&lt; <span class="hljs-string">&quot; mB:&quot;</span> &lt;&lt; p<span class="hljs-number">3.</span>m_B &lt;&lt; endl;<br><br><br>Person p4 = p3 + <span class="hljs-number">10</span>; <span class="hljs-comment">//ç›¸å½“äº operator+(p3,10)</span><br>cout &lt;&lt; <span class="hljs-string">&quot;mA:&quot;</span> &lt;&lt; p<span class="hljs-number">4.</span>m_A &lt;&lt; <span class="hljs-string">&quot; mB:&quot;</span> &lt;&lt; p<span class="hljs-number">4.</span>m_B &lt;&lt; endl;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“1ï¼šå¯¹äºå†…ç½®çš„æ•°æ®ç±»å‹çš„è¡¨è¾¾å¼çš„çš„è¿ç®—ç¬¦æ˜¯ä¸å¯èƒ½æ”¹å˜çš„</p></blockquote><blockquote><p>æ€»ç»“2ï¼šä¸è¦æ»¥ç”¨è¿ç®—ç¬¦é‡è½½</p></blockquote><h4 id="4-5-2-å·¦ç§»è¿ç®—ç¬¦é‡è½½">4.5.2 å·¦ç§»è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼šå¯ä»¥è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">friend</span> ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; out, Person&amp; p);<br><br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_A = a;<br><span class="hljs-keyword">this</span>-&gt;m_B = b;<br>&#125;<br><br><span class="hljs-comment">//æˆå‘˜å‡½æ•° å®ç°ä¸äº†  p &lt;&lt; cout ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœ</span><br><span class="hljs-comment">//void operator&lt;&lt;(Person&amp; p)&#123;</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">int</span> m_A;<br><span class="hljs-type">int</span> m_B;<br>&#125;;<br><br><span class="hljs-comment">//å…¨å±€å‡½æ•°å®ç°å·¦ç§»é‡è½½</span><br><span class="hljs-comment">//ostreamå¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ª</span><br>ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; out, Person&amp; p) &#123;<br>out &lt;&lt; <span class="hljs-string">&quot;a:&quot;</span> &lt;&lt; p.m_A &lt;&lt; <span class="hljs-string">&quot; b:&quot;</span> &lt;&lt; p.m_B;<br><span class="hljs-keyword">return</span> out;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)</span></span>;<br><br>cout &lt;&lt; p1 &lt;&lt; <span class="hljs-string">&quot;hello world&quot;</span> &lt;&lt; endl; <span class="hljs-comment">//é“¾å¼ç¼–ç¨‹</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šé‡è½½å·¦ç§»è¿ç®—ç¬¦é…åˆå‹å…ƒå¯ä»¥å®ç°è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹</p></blockquote><h4 id="4-5-3-é€’å¢è¿ç®—ç¬¦é‡è½½">4.5.3 é€’å¢è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼š é€šè¿‡é‡è½½é€’å¢è¿ç®—ç¬¦ï¼Œå®ç°è‡ªå·±çš„æ•´å‹æ•°æ®</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyInteger</span> &#123;<br><br><span class="hljs-keyword">friend</span> ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; out, MyInteger myint);<br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">MyInteger</span>() &#123;<br>m_Num = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//å‰ç½®++</span><br>MyInteger&amp; <span class="hljs-keyword">operator</span>++() &#123;<br><span class="hljs-comment">//å…ˆ++</span><br>m_Num++;<br><span class="hljs-comment">//å†è¿”å›</span><br><span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br><br><span class="hljs-comment">//åç½®++</span><br>MyInteger <span class="hljs-keyword">operator</span>++(<span class="hljs-type">int</span>) &#123;<br><span class="hljs-comment">//å…ˆè¿”å›</span><br>MyInteger temp = *<span class="hljs-keyword">this</span>; <span class="hljs-comment">//è®°å½•å½“å‰æœ¬èº«çš„å€¼ï¼Œç„¶åè®©æœ¬èº«çš„å€¼åŠ 1ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯ä»¥å‰çš„å€¼ï¼Œè¾¾åˆ°å…ˆè¿”å›å++ï¼›</span><br>m_Num++;<br><span class="hljs-keyword">return</span> temp;<br>&#125;<br><br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">int</span> m_Num;<br>&#125;;<br><br><br>ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; out, MyInteger myint) &#123;<br>out &lt;&lt; myint.m_Num;<br><span class="hljs-keyword">return</span> out;<br>&#125;<br><br><br><span class="hljs-comment">//å‰ç½®++ å…ˆ++ å†è¿”å›</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>MyInteger myInt;<br>cout &lt;&lt; ++myInt &lt;&lt; endl;<br>cout &lt;&lt; myInt &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//åç½®++ å…ˆè¿”å› å†++</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>&#123;<br><br>MyInteger myInt;<br>cout &lt;&lt; myInt++ &lt;&lt; endl;<br>cout &lt;&lt; myInt &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><span class="hljs-comment">//test02();</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š å‰ç½®é€’å¢è¿”å›å¼•ç”¨ï¼Œåç½®é€’å¢è¿”å›å€¼</p></blockquote><h4 id="4-5-4-èµ‹å€¼è¿ç®—ç¬¦é‡è½½">4.5.4 èµ‹å€¼è¿ç®—ç¬¦é‡è½½</h4><p>c++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 4ä¸ªå‡½æ•°</p><ol><li>é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</li><li>é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</li><li>é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</li><li>èµ‹å€¼è¿ç®—ç¬¦ operator=, å¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</li></ol><p>å¦‚æœç±»ä¸­æœ‰å±æ€§æŒ‡å‘å †åŒºï¼Œåšèµ‹å€¼æ“ä½œæ—¶ä¹Ÿä¼šå‡ºç°æ·±æµ…æ‹·è´é—®é¢˜</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)<br>&#123;<br><span class="hljs-comment">//å°†å¹´é¾„æ•°æ®å¼€è¾Ÿåˆ°å †åŒº</span><br>m_Age = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(age);<br>&#125;<br><br><span class="hljs-comment">//é‡è½½èµ‹å€¼è¿ç®—ç¬¦ </span><br>Person&amp; <span class="hljs-keyword">operator</span>=(Person &amp;p)<br>&#123;<br><span class="hljs-keyword">if</span> (m_Age != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span> m_Age;<br>m_Age = <span class="hljs-literal">NULL</span>;<br>&#125;<br><span class="hljs-comment">//ç¼–è¯‘å™¨æä¾›çš„ä»£ç æ˜¯æµ…æ‹·è´</span><br><span class="hljs-comment">//m_Age = p.m_Age;</span><br><br><span class="hljs-comment">//æä¾›æ·±æ‹·è´ è§£å†³æµ…æ‹·è´çš„é—®é¢˜</span><br>m_Age = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(*p.m_Age);<br><br><span class="hljs-comment">//è¿”å›è‡ªèº«</span><br><span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br><br><br>~<span class="hljs-built_in">Person</span>()<br>&#123;<br><span class="hljs-keyword">if</span> (m_Age != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span> m_Age;<br>m_Age = <span class="hljs-literal">NULL</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//å¹´é¾„çš„æŒ‡é’ˆ</span><br><span class="hljs-type">int</span> *m_Age;<br><br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">18</span>)</span></span>;<br><br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">20</span>)</span></span>;<br><br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-number">30</span>)</span></span>;<br><br>p3 = p2 = p1; <span class="hljs-comment">//èµ‹å€¼æ“ä½œ</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;p1çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p<span class="hljs-number">1.</span>m_Age &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;p2çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p<span class="hljs-number">2.</span>m_Age &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;p3çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p<span class="hljs-number">3.</span>m_Age &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-comment">//int a = 10;</span><br><span class="hljs-comment">//int b = 20;</span><br><span class="hljs-comment">//int c = 30;</span><br><br><span class="hljs-comment">//c = b = a;</span><br><span class="hljs-comment">//cout &lt;&lt; &quot;a = &quot; &lt;&lt; a &lt;&lt; endl;</span><br><span class="hljs-comment">//cout &lt;&lt; &quot;b = &quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="hljs-comment">//cout &lt;&lt; &quot;c = &quot; &lt;&lt; c &lt;&lt; endl;</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-5-5-å…³ç³»è¿ç®—ç¬¦é‡è½½">4.5.5 å…³ç³»è¿ç®—ç¬¦é‡è½½</h4><p>**ä½œç”¨ï¼š**é‡è½½å…³ç³»è¿ç®—ç¬¦ï¼Œå¯ä»¥è®©ä¸¤ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡è¿›è¡Œå¯¹æ¯”æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;m_Name = name;<br><span class="hljs-keyword">this</span>-&gt;m_Age = age;<br>&#125;;<br><br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(Person &amp; p)<br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="hljs-keyword">this</span>-&gt;m_Age == p.m_Age)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>!=(Person &amp; p)<br>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="hljs-keyword">this</span>-&gt;m_Age == p.m_Age)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br>&#125;<br><br>string m_Name;<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//int a = 0;</span><br><span class="hljs-comment">//int b = 0;</span><br><br><span class="hljs-function">Person <span class="hljs-title">a</span><span class="hljs-params">(<span class="hljs-string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="hljs-number">18</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">b</span><span class="hljs-params">(<span class="hljs-string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="hljs-number">18</span>)</span></span>;<br><br><span class="hljs-keyword">if</span> (a == b)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;aå’Œbç›¸ç­‰&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;aå’Œbä¸ç›¸ç­‰&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-keyword">if</span> (a != b)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;aå’Œbä¸ç›¸ç­‰&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;aå’Œbç›¸ç­‰&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-5-6-å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½">4.5.6 å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½</h4><ul><li>å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ ()  ä¹Ÿå¯ä»¥é‡è½½</li><li>ç”±äºé‡è½½åä½¿ç”¨çš„æ–¹å¼éå¸¸åƒå‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ç§°ä¸ºä»¿å‡½æ•°</li><li>ä»¿å‡½æ•°æ²¡æœ‰å›ºå®šå†™æ³•ï¼Œéå¸¸çµæ´»</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(string text)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; text &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//é‡è½½çš„ï¼ˆï¼‰æ“ä½œç¬¦ ä¹Ÿç§°ä¸ºä»¿å‡½æ•°</span><br>MyPrint myFunc;<br><span class="hljs-built_in">myFunc</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br>&#125;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdd</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v1, <span class="hljs-type">int</span> v2)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> v1 + v2;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>MyAdd add;<br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">add</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;ret = &quot;</span> &lt;&lt; ret &lt;&lt; endl;<br><br><span class="hljs-comment">//åŒ¿åå¯¹è±¡è°ƒç”¨  </span><br>cout &lt;&lt; <span class="hljs-string">&quot;MyAdd()(100,100) = &quot;</span> &lt;&lt; <span class="hljs-built_in">MyAdd</span>()(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>) &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-6-ç»§æ‰¿">4.6  ç»§æ‰¿</h3><p><strong>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</strong></p><p>æœ‰äº›ç±»ä¸ç±»ä¹‹é—´å­˜åœ¨ç‰¹æ®Šçš„å…³ç³»ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­ï¼š</p><p><img src="/assets/1544861202252.png" alt="1544861202252"></p><p>æˆ‘ä»¬å‘ç°ï¼Œå®šä¹‰è¿™äº›ç±»æ—¶ï¼Œä¸‹çº§åˆ«çš„æˆå‘˜é™¤äº†æ‹¥æœ‰ä¸Šä¸€çº§çš„å…±æ€§ï¼Œè¿˜æœ‰è‡ªå·±çš„ç‰¹æ€§ã€‚</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘åˆ©ç”¨ç»§æ‰¿çš„æŠ€æœ¯ï¼Œå‡å°‘é‡å¤ä»£ç </p><h4 id="4-6-1-ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•">4.6.1 ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•</h4><p>ä¾‹å¦‚æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šç½‘ç«™ä¸­ï¼Œéƒ½æœ‰å…¬å…±çš„å¤´éƒ¨ï¼Œå…¬å…±çš„åº•éƒ¨ï¼Œç”šè‡³å…¬å…±çš„å·¦ä¾§åˆ—è¡¨ï¼Œåªæœ‰ä¸­å¿ƒå†…å®¹ä¸åŒ</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œç»§æ‰¿çš„å†™æ³•æ¥å®ç°ç½‘é¡µä¸­çš„å†…å®¹ï¼Œçœ‹ä¸€ä¸‹ç»§æ‰¿å­˜åœ¨çš„æ„ä¹‰ä»¥åŠå¥½å¤„</p><p><strong>æ™®é€šå®ç°ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//Javaé¡µé¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Java</span> <br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">header</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">footer</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">left</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">content</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;JAVAå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><span class="hljs-comment">//Pythoné¡µé¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Python</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">header</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">footer</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">left</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">content</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Pythonå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><span class="hljs-comment">//C++é¡µé¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CPP</span> <br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">header</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">footer</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">left</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">content</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;C++å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//Javaé¡µé¢</span><br>cout &lt;&lt; <span class="hljs-string">&quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;<br>Java ja;<br>ja.<span class="hljs-built_in">header</span>();<br>ja.<span class="hljs-built_in">footer</span>();<br>ja.<span class="hljs-built_in">left</span>();<br>ja.<span class="hljs-built_in">content</span>();<br>cout &lt;&lt; <span class="hljs-string">&quot;--------------------&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-comment">//Pythoné¡µé¢</span><br>cout &lt;&lt; <span class="hljs-string">&quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;<br>Python py;<br>py.<span class="hljs-built_in">header</span>();<br>py.<span class="hljs-built_in">footer</span>();<br>py.<span class="hljs-built_in">left</span>();<br>py.<span class="hljs-built_in">content</span>();<br>cout &lt;&lt; <span class="hljs-string">&quot;--------------------&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-comment">//C++é¡µé¢</span><br>cout &lt;&lt; <span class="hljs-string">&quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;<br>CPP cp;<br>cp.<span class="hljs-built_in">header</span>();<br>cp.<span class="hljs-built_in">footer</span>();<br>cp.<span class="hljs-built_in">left</span>();<br>cp.<span class="hljs-built_in">content</span>();<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»§æ‰¿å®ç°ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å…¬å…±é¡µé¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BasePage</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">header</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">footer</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">left</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><br><span class="hljs-comment">//Javaé¡µé¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Java</span> : <span class="hljs-keyword">public</span> BasePage<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">content</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;JAVAå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><span class="hljs-comment">//Pythoné¡µé¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Python</span> : <span class="hljs-keyword">public</span> BasePage<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">content</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Pythonå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><span class="hljs-comment">//C++é¡µé¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CPP</span> : <span class="hljs-keyword">public</span> BasePage<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">content</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;C++å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//Javaé¡µé¢</span><br>cout &lt;&lt; <span class="hljs-string">&quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;<br>Java ja;<br>ja.<span class="hljs-built_in">header</span>();<br>ja.<span class="hljs-built_in">footer</span>();<br>ja.<span class="hljs-built_in">left</span>();<br>ja.<span class="hljs-built_in">content</span>();<br>cout &lt;&lt; <span class="hljs-string">&quot;--------------------&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-comment">//Pythoné¡µé¢</span><br>cout &lt;&lt; <span class="hljs-string">&quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;<br>Python py;<br>py.<span class="hljs-built_in">header</span>();<br>py.<span class="hljs-built_in">footer</span>();<br>py.<span class="hljs-built_in">left</span>();<br>py.<span class="hljs-built_in">content</span>();<br>cout &lt;&lt; <span class="hljs-string">&quot;--------------------&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-comment">//C++é¡µé¢</span><br>cout &lt;&lt; <span class="hljs-string">&quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;<br>CPP cp;<br>cp.<span class="hljs-built_in">header</span>();<br>cp.<span class="hljs-built_in">footer</span>();<br>cp.<span class="hljs-built_in">left</span>();<br>cp.<span class="hljs-built_in">content</span>();<br><br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><p>ç»§æ‰¿çš„å¥½å¤„ï¼š==å¯ä»¥å‡å°‘é‡å¤çš„ä»£ç ==</p><p>class A : public B;</p><p>A ç±»ç§°ä¸ºå­ç±» æˆ– æ´¾ç”Ÿç±»</p><p>B ç±»ç§°ä¸ºçˆ¶ç±» æˆ– åŸºç±»</p><p><strong>æ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜ï¼ŒåŒ…å«ä¸¤å¤§éƒ¨åˆ†</strong>ï¼š</p><p>ä¸€ç±»æ˜¯ä»åŸºç±»ç»§æ‰¿è¿‡æ¥çš„ï¼Œä¸€ç±»æ˜¯è‡ªå·±å¢åŠ çš„æˆå‘˜ã€‚</p><p>ä»åŸºç±»ç»§æ‰¿è¿‡è¿‡æ¥çš„è¡¨ç°å…¶å…±æ€§ï¼Œè€Œæ–°å¢çš„æˆå‘˜ä½“ç°äº†å…¶ä¸ªæ€§ã€‚</p><h4 id="4-6-2-ç»§æ‰¿æ–¹å¼">4.6.2 ç»§æ‰¿æ–¹å¼</h4><p>ç»§æ‰¿çš„è¯­æ³•ï¼š<code>class å­ç±» : ç»§æ‰¿æ–¹å¼  çˆ¶ç±»</code></p><p><strong>ç»§æ‰¿æ–¹å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š</strong></p><ul><li>å…¬å…±ç»§æ‰¿</li><li>ä¿æŠ¤ç»§æ‰¿</li><li>ç§æœ‰ç»§æ‰¿</li></ul><p><img src="/assets/clip_image0020000000.png" alt="img"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base1</span><br>&#123;<br><span class="hljs-keyword">public</span>: <br><span class="hljs-type">int</span> m_A;<br><span class="hljs-keyword">protected</span>:<br><span class="hljs-type">int</span> m_B;<br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">int</span> m_C;<br>&#125;;<br><br><span class="hljs-comment">//å…¬å…±ç»§æ‰¿</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son1</span> :<span class="hljs-keyword">public</span> Base1<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>m_A; <span class="hljs-comment">//å¯è®¿é—® publicæƒé™</span><br>m_B; <span class="hljs-comment">//å¯è®¿é—® protectedæƒé™</span><br><span class="hljs-comment">//m_C; //ä¸å¯è®¿é—®</span><br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myClass</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Son1 s1;<br>s<span class="hljs-number">1.</span>m_A; <span class="hljs-comment">//å…¶ä»–ç±»åªèƒ½è®¿é—®åˆ°å…¬å…±æƒé™</span><br>&#125;<br><br><span class="hljs-comment">//ä¿æŠ¤ç»§æ‰¿</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base2</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_A;<br><span class="hljs-keyword">protected</span>:<br><span class="hljs-type">int</span> m_B;<br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">int</span> m_C;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son2</span>:<span class="hljs-keyword">protected</span> Base2<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>m_A; <span class="hljs-comment">//å¯è®¿é—® protectedæƒé™</span><br>m_B; <span class="hljs-comment">//å¯è®¿é—® protectedæƒé™</span><br><span class="hljs-comment">//m_C; //ä¸å¯è®¿é—®</span><br>&#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myClass2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Son2 s;<br><span class="hljs-comment">//s.m_A; //ä¸å¯è®¿é—®</span><br>&#125;<br><br><span class="hljs-comment">//ç§æœ‰ç»§æ‰¿</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base3</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_A;<br><span class="hljs-keyword">protected</span>:<br><span class="hljs-type">int</span> m_B;<br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">int</span> m_C;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son3</span>:<span class="hljs-keyword">private</span> Base3<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>m_A; <span class="hljs-comment">//å¯è®¿é—® privateæƒé™</span><br>m_B; <span class="hljs-comment">//å¯è®¿é—® privateæƒé™</span><br><span class="hljs-comment">//m_C; //ä¸å¯è®¿é—®</span><br>&#125;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GrandSon3</span> :<span class="hljs-keyword">public</span> Son3<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//Son3æ˜¯ç§æœ‰ç»§æ‰¿ï¼Œæ‰€ä»¥ç»§æ‰¿Son3çš„å±æ€§åœ¨GrandSon3ä¸­éƒ½æ— æ³•è®¿é—®åˆ°</span><br><span class="hljs-comment">//m_A;</span><br><span class="hljs-comment">//m_B;</span><br><span class="hljs-comment">//m_C;</span><br>&#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="4-6-3-ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹">4.6.3 ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹</h4><p>**é—®é¢˜ï¼š**ä»çˆ¶ç±»ç»§æ‰¿è¿‡æ¥çš„æˆå‘˜ï¼Œå“ªäº›å±äºå­ç±»å¯¹è±¡ä¸­ï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_A;<br><span class="hljs-keyword">protected</span>:<br><span class="hljs-type">int</span> m_B;<br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">int</span> m_C; <span class="hljs-comment">//ç§æœ‰æˆå‘˜åªæ˜¯è¢«éšè—äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šç»§æ‰¿ä¸‹å»</span><br>&#125;;<br><br><span class="hljs-comment">//å…¬å…±ç»§æ‰¿</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> :<span class="hljs-keyword">public</span> Base<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_D;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;sizeof Son = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(Son) &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨å·¥å…·æŸ¥çœ‹ï¼š</p><p><img src="/assets/1545881904150.png" alt="1545881904150"></p><p>æ‰“å¼€å·¥å…·çª—å£åï¼Œå®šä½åˆ°å½“å‰CPPæ–‡ä»¶çš„ç›˜ç¬¦</p><p>ç„¶åè¾“å…¥ï¼š cl /d1 reportSingleClassLayoutæŸ¥çœ‹çš„ç±»å   æ‰€å±æ–‡ä»¶å</p><p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p><p><img src="/assets/1545882158050.png" alt="1545882158050"></p><blockquote><p>ç»“è®ºï¼š çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜ä¹Ÿæ˜¯è¢«å­ç±»ç»§æ‰¿ä¸‹å»äº†ï¼Œåªæ˜¯ç”±ç¼–è¯‘å™¨ç»™éšè—åè®¿é—®ä¸åˆ°</p></blockquote><h4 id="4-6-4-ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº">4.6.4 ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº</h4><p>å­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå½“åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</p><p>é—®é¢˜ï¼šçˆ¶ç±»å’Œå­ç±»çš„æ„é€ å’Œææ„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> <br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Base</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Baseæ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br>~<span class="hljs-built_in">Base</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Baseææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> : <span class="hljs-keyword">public</span> Base<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Son</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Sonæ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br>~<span class="hljs-built_in">Son</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Sonææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å</span><br>Son s;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å</p></blockquote><h4 id="4-6-5-ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼">4.6.5 ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼</h4><p>é—®é¢˜ï¼šå½“å­ç±»ä¸çˆ¶ç±»å‡ºç°åŒåçš„æˆå‘˜ï¼Œå¦‚ä½•é€šè¿‡å­ç±»å¯¹è±¡ï¼Œè®¿é—®åˆ°å­ç±»æˆ–çˆ¶ç±»ä¸­åŒåçš„æ•°æ®å‘¢ï¼Ÿ</p><ul><li>è®¿é—®å­ç±»åŒåæˆå‘˜   ç›´æ¥è®¿é—®å³å¯</li><li>è®¿é—®çˆ¶ç±»åŒåæˆå‘˜   éœ€è¦åŠ ä½œç”¨åŸŸ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Base</span>()<br>&#123;<br>m_A = <span class="hljs-number">100</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Base - func()è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Base - func(int a)è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_A;<br>&#125;;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> : <span class="hljs-keyword">public</span> Base &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Son</span>()<br>&#123;<br>m_A = <span class="hljs-number">200</span>;<br>&#125;<br><br><span class="hljs-comment">//å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­æ‰€æœ‰ç‰ˆæœ¬çš„åŒåæˆå‘˜å‡½æ•°</span><br><span class="hljs-comment">//å¦‚æœæƒ³è®¿é—®çˆ¶ç±»ä¸­è¢«éšè—çš„åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ çˆ¶ç±»çš„ä½œç”¨åŸŸ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Son - func()è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_A;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Son s;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;Sonä¸‹çš„m_A = &quot;</span> &lt;&lt; s.m_A &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;Baseä¸‹çš„m_A = &quot;</span> &lt;&lt; s.Base::m_A &lt;&lt; endl;<br><br>s.<span class="hljs-built_in">func</span>();<br>s.Base::<span class="hljs-built_in">func</span>();<br>s.Base::<span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>);<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> EXIT_SUCCESS;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ol><li>å­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®åˆ°å­ç±»ä¸­åŒåæˆå‘˜</li><li>å­ç±»å¯¹è±¡åŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»åŒåæˆå‘˜</li><li>å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­åŒåæˆå‘˜å‡½æ•°ï¼ŒåŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»ä¸­åŒåå‡½æ•°</li></ol><h4 id="4-6-6-ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼">4.6.6 ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼</h4><p>é—®é¢˜ï¼šç»§æ‰¿ä¸­åŒåçš„é™æ€æˆå‘˜åœ¨å­ç±»å¯¹è±¡ä¸Šå¦‚ä½•è¿›è¡Œè®¿é—®ï¼Ÿ</p><p>é™æ€æˆå‘˜å’Œéé™æ€æˆå‘˜å‡ºç°åŒåï¼Œå¤„ç†æ–¹å¼ä¸€è‡´</p><ul><li>è®¿é—®å­ç±»åŒåæˆå‘˜   ç›´æ¥è®¿é—®å³å¯</li><li>è®¿é—®çˆ¶ç±»åŒåæˆå‘˜   éœ€è¦åŠ ä½œç”¨åŸŸ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Base - static void func()&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Base - static void func(int a)&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> m_A;<br>&#125;;<br><br><span class="hljs-type">int</span> Base::m_A = <span class="hljs-number">100</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> : <span class="hljs-keyword">public</span> Base &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Son - static void func()&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-type">static</span> <span class="hljs-type">int</span> m_A;<br>&#125;;<br><br><span class="hljs-type">int</span> Son::m_A = <span class="hljs-number">200</span>;<br><br><span class="hljs-comment">//åŒåæˆå‘˜å±æ€§</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//é€šè¿‡å¯¹è±¡è®¿é—®</span><br>cout &lt;&lt; <span class="hljs-string">&quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot;</span> &lt;&lt; endl;<br>Son s;<br>cout &lt;&lt; <span class="hljs-string">&quot;Son  ä¸‹ m_A = &quot;</span> &lt;&lt; s.m_A &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; s.Base::m_A &lt;&lt; endl;<br><br><span class="hljs-comment">//é€šè¿‡ç±»åè®¿é—®</span><br>cout &lt;&lt; <span class="hljs-string">&quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;Son  ä¸‹ m_A = &quot;</span> &lt;&lt; Son::m_A &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; Son::Base::m_A &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//åŒåæˆå‘˜å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//é€šè¿‡å¯¹è±¡è®¿é—®</span><br>cout &lt;&lt; <span class="hljs-string">&quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot;</span> &lt;&lt; endl;<br>Son s;<br>s.<span class="hljs-built_in">func</span>();<br>s.Base::<span class="hljs-built_in">func</span>();<br><br>cout &lt;&lt; <span class="hljs-string">&quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot;</span> &lt;&lt; endl;<br>Son::<span class="hljs-built_in">func</span>();<br>Son::Base::<span class="hljs-built_in">func</span>();<br><span class="hljs-comment">//å‡ºç°åŒåï¼Œå­ç±»ä¼šéšè—æ‰çˆ¶ç±»ä¸­æ‰€æœ‰åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ ä½œä½œç”¨åŸŸè®¿é—®</span><br>Son::Base::<span class="hljs-built_in">func</span>(<span class="hljs-number">100</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šåŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼å’Œéé™æ€å¤„ç†æ–¹å¼ä¸€æ ·ï¼Œåªä¸è¿‡æœ‰ä¸¤ç§è®¿é—®çš„æ–¹å¼ï¼ˆé€šè¿‡å¯¹è±¡ å’Œ é€šè¿‡ç±»åï¼‰</p></blockquote><h4 id="4-6-7-å¤šç»§æ‰¿è¯­æ³•">4.6.7 å¤šç»§æ‰¿è¯­æ³•</h4><p>C++å…è®¸<strong>ä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªç±»</strong></p><p>è¯­æ³•ï¼š<code> class å­ç±» ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œ ç»§æ‰¿æ–¹å¼ çˆ¶ç±»2...</code></p><p>å¤šç»§æ‰¿å¯èƒ½ä¼šå¼•å‘çˆ¶ç±»ä¸­æœ‰åŒåæˆå‘˜å‡ºç°ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸåŒºåˆ†</p><p><strong>C++å®é™…å¼€å‘ä¸­ä¸å»ºè®®ç”¨å¤šç»§æ‰¿</strong></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base1</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Base1</span>()<br>&#123;<br>m_A = <span class="hljs-number">100</span>;<br>&#125;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_A;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base2</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Base2</span>()<br>&#123;<br>m_A = <span class="hljs-number">200</span>;  <span class="hljs-comment">//å¼€å§‹æ˜¯m_B ä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯æ”¹ä¸ºmAå°±ä¼šå‡ºç°ä¸æ˜ç¡®</span><br>&#125;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_A;<br>&#125;;<br><br><span class="hljs-comment">//è¯­æ³•ï¼šclass å­ç±»ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œç»§æ‰¿æ–¹å¼ çˆ¶ç±»2 </span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> : <span class="hljs-keyword">public</span> Base2, <span class="hljs-keyword">public</span> Base1 <br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Son</span>()<br>&#123;<br>m_C = <span class="hljs-number">300</span>;<br>m_D = <span class="hljs-number">400</span>;<br>&#125;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_C;<br><span class="hljs-type">int</span> m_D;<br>&#125;;<br><br><br><span class="hljs-comment">//å¤šç»§æ‰¿å®¹æ˜“äº§ç”Ÿæˆå‘˜åŒåçš„æƒ…å†µ</span><br><span class="hljs-comment">//é€šè¿‡ä½¿ç”¨ç±»åä½œç”¨åŸŸå¯ä»¥åŒºåˆ†è°ƒç”¨å“ªä¸€ä¸ªåŸºç±»çš„æˆå‘˜</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Son s;<br>cout &lt;&lt; <span class="hljs-string">&quot;sizeof Son = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(s) &lt;&lt; endl;<br>cout &lt;&lt; s.Base1::m_A &lt;&lt; endl;<br>cout &lt;&lt; s.Base2::m_A &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š å¤šç»§æ‰¿ä¸­å¦‚æœçˆ¶ç±»ä¸­å‡ºç°äº†åŒåæƒ…å†µï¼Œå­ç±»ä½¿ç”¨æ—¶å€™è¦åŠ ä½œç”¨åŸŸ</p></blockquote><h4 id="4-6-8-è±å½¢ç»§æ‰¿">4.6.8 è±å½¢ç»§æ‰¿</h4><p><strong>è±å½¢ç»§æ‰¿æ¦‚å¿µï¼š</strong></p><p>â€‹ä¸¤ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿åŒä¸€ä¸ªåŸºç±»</p><p>â€‹åˆæœ‰æŸä¸ªç±»åŒæ—¶ç»§æ‰¿è€…ä¸¤ä¸ªæ´¾ç”Ÿç±»</p><p>â€‹è¿™ç§ç»§æ‰¿è¢«ç§°ä¸ºè±å½¢ç»§æ‰¿ï¼Œæˆ–è€…é’»çŸ³ç»§æ‰¿</p><p><strong>å…¸å‹çš„è±å½¢ç»§æ‰¿æ¡ˆä¾‹ï¼š</strong></p><p><img src="/assets/clip_image002.jpg" alt="IMG_256"></p><p><strong>è±å½¢ç»§æ‰¿é—®é¢˜ï¼š</strong></p><ol><li><pre><code class="hljs">ç¾Šç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œé©¼åŒæ ·ç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œå½“è‰æ³¥é©¬ä½¿ç”¨æ•°æ®æ—¶ï¼Œå°±ä¼šäº§ç”ŸäºŒä¹‰æ€§ã€‚</code></pre></li><li><p>è‰æ³¥é©¬ç»§æ‰¿è‡ªåŠ¨ç‰©çš„æ•°æ®ç»§æ‰¿äº†ä¸¤ä»½ï¼Œå…¶å®æˆ‘ä»¬åº”è¯¥æ¸…æ¥šï¼Œè¿™ä»½æ•°æ®æˆ‘ä»¬åªéœ€è¦ä¸€ä»½å°±å¯ä»¥ã€‚</p></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-comment">//ç»§æ‰¿å‰åŠ virtualå…³é”®å­—åï¼Œå˜ä¸ºè™šç»§æ‰¿</span><br><span class="hljs-comment">//æ­¤æ—¶å…¬å…±çš„çˆ¶ç±»Animalç§°ä¸ºè™šåŸºç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sheep</span> : <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> Animal &#123;&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tuo</span>   : <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> Animal &#123;&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SheepTuo</span> : <span class="hljs-keyword">public</span> Sheep, <span class="hljs-keyword">public</span> Tuo &#123;&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>SheepTuo st;<br>st.Sheep::m_Age = <span class="hljs-number">100</span>;<br>st.Tuo::m_Age = <span class="hljs-number">200</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;st.Sheep::m_Age = &quot;</span> &lt;&lt; st.Sheep::m_Age &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;st.Tuo::m_Age = &quot;</span> &lt;&lt;  st.Tuo::m_Age &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;st.m_Age = &quot;</span> &lt;&lt; st.m_Age &lt;&lt; endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>è±å½¢ç»§æ‰¿å¸¦æ¥çš„ä¸»è¦é—®é¢˜æ˜¯å­ç±»ç»§æ‰¿ä¸¤ä»½ç›¸åŒçš„æ•°æ®ï¼Œå¯¼è‡´èµ„æºæµªè´¹ä»¥åŠæ¯«æ— æ„ä¹‰</li><li>åˆ©ç”¨è™šç»§æ‰¿å¯ä»¥è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜</li></ul><h3 id="4-7-å¤šæ€">4.7  å¤šæ€</h3><h4 id="4-7-1-å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ">4.7.1 å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ</h4><p><strong>å¤šæ€æ˜¯C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</strong></p><p>å¤šæ€åˆ†ä¸ºä¸¤ç±»</p><ul><li>é™æ€å¤šæ€: å‡½æ•°é‡è½½ å’Œ è¿ç®—ç¬¦é‡è½½å±äºé™æ€å¤šæ€ï¼Œå¤ç”¨å‡½æ•°å</li><li>åŠ¨æ€å¤šæ€: æ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶å¤šæ€</li></ul><p>é™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€åŒºåˆ«ï¼š</p><ul><li>é™æ€å¤šæ€çš„å‡½æ•°åœ°å€æ—©ç»‘å®š  -  ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</li><li>åŠ¨æ€å¤šæ€çš„å‡½æ•°åœ°å€æ™šç»‘å®š  -  è¿è¡Œé˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</li></ul><p>ä¸‹é¢é€šè¿‡æ¡ˆä¾‹è¿›è¡Œè®²è§£å¤šæ€</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//Speakå‡½æ•°å°±æ˜¯è™šå‡½æ•°</span><br><span class="hljs-comment">//å‡½æ•°å‰é¢åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šå‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¸èƒ½ç¡®å®šå‡½æ•°è°ƒç”¨äº†ã€‚</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;åŠ¨ç‰©åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> :<span class="hljs-keyword">public</span> Animal<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å°çŒ«åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> :<span class="hljs-keyword">public</span> Animal<br>&#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å°ç‹—åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><span class="hljs-comment">//æˆ‘ä»¬å¸Œæœ›ä¼ å…¥ä»€ä¹ˆå¯¹è±¡ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ä»€ä¹ˆå¯¹è±¡çš„å‡½æ•°</span><br><span class="hljs-comment">//å¦‚æœå‡½æ•°åœ°å€åœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½ç¡®å®šï¼Œé‚£ä¹ˆé™æ€è”ç¼–</span><br><span class="hljs-comment">//å¦‚æœå‡½æ•°åœ°å€åœ¨è¿è¡Œé˜¶æ®µæ‰èƒ½ç¡®å®šï¼Œå°±æ˜¯åŠ¨æ€è”ç¼–</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DoSpeak</span><span class="hljs-params">(Animal &amp; animal)</span></span><br><span class="hljs-function"></span>&#123;<br>animal.<span class="hljs-built_in">speak</span>();<br>&#125;<br><span class="hljs-comment">//</span><br><span class="hljs-comment">//å¤šæ€æ»¡è¶³æ¡ä»¶ï¼š </span><br><span class="hljs-comment">//1ã€æœ‰ç»§æ‰¿å…³ç³»</span><br><span class="hljs-comment">//2ã€å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°</span><br><span class="hljs-comment">//å¤šæ€ä½¿ç”¨ï¼š</span><br><span class="hljs-comment">//çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Cat cat;<br><span class="hljs-built_in">DoSpeak</span>(cat);<br><br><br>Dog dog;<br><span class="hljs-built_in">DoSpeak</span>(dog);<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>å¤šæ€æ»¡è¶³æ¡ä»¶</p><ul><li>æœ‰ç»§æ‰¿å…³ç³»</li><li>å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°</li></ul><p>å¤šæ€ä½¿ç”¨æ¡ä»¶</p><ul><li>çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</li></ul><p>é‡å†™ï¼šå‡½æ•°è¿”å›å€¼ç±»å‹  å‡½æ•°å å‚æ•°åˆ—è¡¨ å®Œå…¨ä¸€è‡´ç§°ä¸ºé‡å†™</p><h4 id="4-7-2-å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»">4.7.2 å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»</h4><p>æ¡ˆä¾‹æè¿°ï¼š</p><p>åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œå¤šæ€æŠ€æœ¯ï¼Œè®¾è®¡å®ç°ä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œè¿ç®—çš„è®¡ç®—å™¨ç±»</p><p>å¤šæ€çš„ä¼˜ç‚¹ï¼š</p><ul><li>ä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°</li><li>å¯è¯»æ€§å¼º</li><li>åˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//æ™®é€šå®ç°</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getResult</span><span class="hljs-params">(string oper)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span> (oper == <span class="hljs-string">&quot;+&quot;</span>) &#123;<br><span class="hljs-keyword">return</span> m_Num1 + m_Num2;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oper == <span class="hljs-string">&quot;-&quot;</span>) &#123;<br><span class="hljs-keyword">return</span> m_Num1 - m_Num2;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oper == <span class="hljs-string">&quot;*&quot;</span>) &#123;<br><span class="hljs-keyword">return</span> m_Num1 * m_Num2;<br>&#125;<br><span class="hljs-comment">//å¦‚æœè¦æä¾›æ–°çš„è¿ç®—ï¼Œéœ€è¦ä¿®æ”¹æºç </span><br>&#125;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_Num1;<br><span class="hljs-type">int</span> m_Num2;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//æ™®é€šå®ç°æµ‹è¯•</span><br>Calculator c;<br>c.m_Num1 = <span class="hljs-number">10</span>;<br>c.m_Num2 = <span class="hljs-number">10</span>;<br>cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="hljs-string">&quot; + &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="hljs-string">&quot; = &quot;</span> &lt;&lt; c.<span class="hljs-built_in">getResult</span>(<span class="hljs-string">&quot;+&quot;</span>) &lt;&lt; endl;<br><br>cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="hljs-string">&quot; - &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="hljs-string">&quot; = &quot;</span> &lt;&lt; c.<span class="hljs-built_in">getResult</span>(<span class="hljs-string">&quot;-&quot;</span>) &lt;&lt; endl;<br><br>cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="hljs-string">&quot; * &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="hljs-string">&quot; = &quot;</span> &lt;&lt; c.<span class="hljs-built_in">getResult</span>(<span class="hljs-string">&quot;*&quot;</span>) &lt;&lt; endl;<br>&#125;<br><br><br><br><span class="hljs-comment">//å¤šæ€å®ç°</span><br><span class="hljs-comment">//æŠ½è±¡è®¡ç®—å™¨ç±»</span><br><span class="hljs-comment">//å¤šæ€ä¼˜ç‚¹ï¼šä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°ï¼Œå¯è¯»æ€§å¼ºï¼Œåˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractCalculator</span><br>&#123;<br><span class="hljs-keyword">public</span> :<br><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">int</span> <span class="hljs-title">getResult</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-type">int</span> m_Num1;<br><span class="hljs-type">int</span> m_Num2;<br>&#125;;<br><br><span class="hljs-comment">//åŠ æ³•è®¡ç®—å™¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AddCalculator</span> :<span class="hljs-keyword">public</span> AbstractCalculator<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getResult</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> m_Num1 + m_Num2;<br>&#125;<br>&#125;;<br><br><span class="hljs-comment">//å‡æ³•è®¡ç®—å™¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubCalculator</span> :<span class="hljs-keyword">public</span> AbstractCalculator<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getResult</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> m_Num1 - m_Num2;<br>&#125;<br>&#125;;<br><br><span class="hljs-comment">//ä¹˜æ³•è®¡ç®—å™¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MulCalculator</span> :<span class="hljs-keyword">public</span> AbstractCalculator<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getResult</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> m_Num1 * m_Num2;<br>&#125;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//åˆ›å»ºåŠ æ³•è®¡ç®—å™¨</span><br>AbstractCalculator *abc = <span class="hljs-keyword">new</span> AddCalculator;<br>abc-&gt;m_Num1 = <span class="hljs-number">10</span>;<br>abc-&gt;m_Num2 = <span class="hljs-number">10</span>;<br>cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="hljs-string">&quot; + &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="hljs-string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="hljs-built_in">getResult</span>() &lt;&lt; endl;<br><span class="hljs-keyword">delete</span> abc;  <span class="hljs-comment">//ç”¨å®Œäº†è®°å¾—é”€æ¯</span><br><br><span class="hljs-comment">//åˆ›å»ºå‡æ³•è®¡ç®—å™¨</span><br>abc = <span class="hljs-keyword">new</span> SubCalculator;<br>abc-&gt;m_Num1 = <span class="hljs-number">10</span>;<br>abc-&gt;m_Num2 = <span class="hljs-number">10</span>;<br>cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="hljs-string">&quot; - &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="hljs-string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="hljs-built_in">getResult</span>() &lt;&lt; endl;<br><span class="hljs-keyword">delete</span> abc;  <br><br><span class="hljs-comment">//åˆ›å»ºä¹˜æ³•è®¡ç®—å™¨</span><br>abc = <span class="hljs-keyword">new</span> MulCalculator;<br>abc-&gt;m_Num1 = <span class="hljs-number">10</span>;<br>abc-&gt;m_Num2 = <span class="hljs-number">10</span>;<br>cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="hljs-string">&quot; * &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="hljs-string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="hljs-built_in">getResult</span>() &lt;&lt; endl;<br><span class="hljs-keyword">delete</span> abc;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//test01();</span><br><br><span class="hljs-built_in">test02</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šC++å¼€å‘æå€¡åˆ©ç”¨å¤šæ€è®¾è®¡ç¨‹åºæ¶æ„ï¼Œå› ä¸ºå¤šæ€ä¼˜ç‚¹å¾ˆå¤š</p></blockquote><h4 id="4-7-3-çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»">4.7.3 çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»</h4><p>åœ¨å¤šæ€ä¸­ï¼Œé€šå¸¸çˆ¶ç±»ä¸­è™šå‡½æ•°çš„å®ç°æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œä¸»è¦éƒ½æ˜¯è°ƒç”¨å­ç±»é‡å†™çš„å†…å®¹</p><p>å› æ­¤å¯ä»¥å°†è™šå‡½æ•°æ”¹ä¸º<strong>çº¯è™šå‡½æ•°</strong></p><p>çº¯è™šå‡½æ•°è¯­æ³•ï¼š<code>virtual è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰= 0 ;</code></p><p>å½“ç±»ä¸­æœ‰äº†çº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»ä¹Ÿç§°ä¸º==æŠ½è±¡ç±»==</p><p><strong>æŠ½è±¡ç±»ç‰¹ç‚¹</strong>ï¼š</p><ul><li>æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</li><li>å­ç±»å¿…é¡»é‡å†™æŠ½è±¡ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//çº¯è™šå‡½æ•°</span><br><span class="hljs-comment">//ç±»ä¸­åªè¦æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°å°±ç§°ä¸ºæŠ½è±¡ç±»</span><br><span class="hljs-comment">//æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span><br><span class="hljs-comment">//å­ç±»å¿…é¡»é‡å†™çˆ¶ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> :<span class="hljs-keyword">public</span> Base<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;funcè°ƒç”¨&quot;</span> &lt;&lt; endl;<br>&#125;;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Base * base = <span class="hljs-literal">NULL</span>;<br><span class="hljs-comment">//base = new Base; // é”™è¯¯ï¼ŒæŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span><br>base = <span class="hljs-keyword">new</span> Son;<br>base-&gt;<span class="hljs-built_in">func</span>();<br><span class="hljs-keyword">delete</span> base;<span class="hljs-comment">//è®°å¾—é”€æ¯</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-7-4-å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“">4.7.4 å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>åˆ¶ä½œé¥®å“çš„å¤§è‡´æµç¨‹ä¸ºï¼šç…®æ°´ -  å†²æ³¡ - å€’å…¥æ¯ä¸­ - åŠ å…¥è¾…æ–™</p><p>åˆ©ç”¨å¤šæ€æŠ€æœ¯å®ç°æœ¬æ¡ˆä¾‹ï¼Œæä¾›æŠ½è±¡åˆ¶ä½œé¥®å“åŸºç±»ï¼Œæä¾›å­ç±»åˆ¶ä½œå’–å•¡å’ŒèŒ¶å¶</p><p><img src="/assets/1545985945198.png" alt="1545985945198"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//æŠ½è±¡åˆ¶ä½œé¥®å“</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractDrinking</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//çƒ§æ°´</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Boil</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><span class="hljs-comment">//å†²æ³¡</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Brew</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><span class="hljs-comment">//å€’å…¥æ¯ä¸­</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PourInCup</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><span class="hljs-comment">//åŠ å…¥è¾…æ–™</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PutSomething</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><span class="hljs-comment">//è§„å®šæµç¨‹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MakeDrink</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-built_in">Boil</span>();<br><span class="hljs-built_in">Brew</span>();<br><span class="hljs-built_in">PourInCup</span>();<br><span class="hljs-built_in">PutSomething</span>();<br>&#125;<br>&#125;;<br><br><span class="hljs-comment">//åˆ¶ä½œå’–å•¡</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Coffee</span> : <span class="hljs-keyword">public</span> AbstractDrinking &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//çƒ§æ°´</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Boil</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç…®å†œå¤«å±±æ³‰!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//å†²æ³¡</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Brew</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å†²æ³¡å’–å•¡!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//å€’å…¥æ¯ä¸­</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PourInCup</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å°†å’–å•¡å€’å…¥æ¯ä¸­!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//åŠ å…¥è¾…æ–™</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PutSomething</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;åŠ å…¥ç‰›å¥¶!&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-comment">//åˆ¶ä½œèŒ¶æ°´</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tea</span> : <span class="hljs-keyword">public</span> AbstractDrinking &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//çƒ§æ°´</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Boil</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç…®è‡ªæ¥æ°´!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//å†²æ³¡</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Brew</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å†²æ³¡èŒ¶å¶!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//å€’å…¥æ¯ä¸­</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PourInCup</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å°†èŒ¶æ°´å€’å…¥æ¯ä¸­!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//åŠ å…¥è¾…æ–™</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PutSomething</span><span class="hljs-params">()</span> </span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;åŠ å…¥æ¸æ!&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-comment">//ä¸šåŠ¡å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DoWork</span><span class="hljs-params">(AbstractDrinking* drink)</span> </span>&#123;<br>drink-&gt;<span class="hljs-built_in">MakeDrink</span>();<br><span class="hljs-keyword">delete</span> drink;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-built_in">DoWork</span>(<span class="hljs-keyword">new</span> Coffee);<br>cout &lt;&lt; <span class="hljs-string">&quot;--------------&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">DoWork</span>(<span class="hljs-keyword">new</span> Tea);<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-7-5-è™šææ„å’Œçº¯è™šææ„">4.7.5 è™šææ„å’Œçº¯è™šææ„</h4><p>å¤šæ€ä½¿ç”¨æ—¶ï¼Œå¦‚æœå­ç±»ä¸­æœ‰å±æ€§å¼€è¾Ÿåˆ°å †åŒºï¼Œé‚£ä¹ˆçˆ¶ç±»æŒ‡é’ˆåœ¨é‡Šæ”¾æ—¶æ— æ³•è°ƒç”¨åˆ°å­ç±»çš„ææ„ä»£ç </p><p>è§£å†³æ–¹å¼ï¼šå°†çˆ¶ç±»ä¸­çš„ææ„å‡½æ•°æ”¹ä¸º<strong>è™šææ„</strong>æˆ–è€…<strong>çº¯è™šææ„</strong></p><p>è™šææ„å’Œçº¯è™šææ„å…±æ€§ï¼š</p><ul><li>å¯ä»¥è§£å†³çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</li><li>éƒ½éœ€è¦æœ‰å…·ä½“çš„å‡½æ•°å®ç°</li></ul><p>è™šææ„å’Œçº¯è™šææ„åŒºåˆ«ï¼š</p><ul><li>å¦‚æœæ˜¯çº¯è™šææ„ï¼Œè¯¥ç±»å±äºæŠ½è±¡ç±»ï¼Œæ— æ³•å®ä¾‹åŒ–å¯¹è±¡</li></ul><p>è™šææ„è¯­æ³•ï¼š</p><p><code>virtual ~ç±»å()&#123;&#125;</code></p><p>çº¯è™šææ„è¯­æ³•ï¼š</p><p><code> virtual ~ç±»å() = 0;</code></p><p><code>ç±»å::~ç±»å()&#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-built_in">Animal</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Animal æ„é€ å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Speak</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><br><span class="hljs-comment">//ææ„å‡½æ•°åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šææ„å‡½æ•°</span><br><span class="hljs-comment">//virtual ~Animal()</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; &quot;Animalè™šææ„å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><br><br><span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Animal</span>() = <span class="hljs-number">0</span>;<br>&#125;;<br><br>Animal::~<span class="hljs-built_in">Animal</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Animal çº¯è™šææ„å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//å’ŒåŒ…å«æ™®é€šçº¯è™šå‡½æ•°çš„ç±»ä¸€æ ·ï¼ŒåŒ…å«äº†çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ä¸èƒ½å¤Ÿè¢«å®ä¾‹åŒ–ã€‚</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> : <span class="hljs-keyword">public</span> Animal &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Cat</span>(string name)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Catæ„é€ å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;<br>m_Name = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>(name);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Speak</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; *m_Name &lt;&lt;  <span class="hljs-string">&quot;å°çŒ«åœ¨è¯´è¯!&quot;</span> &lt;&lt; endl;<br>&#125;<br>~<span class="hljs-built_in">Cat</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Catææ„å‡½æ•°è°ƒç”¨!&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;m_Name != <span class="hljs-literal">NULL</span>) &#123;<br><span class="hljs-keyword">delete</span> m_Name;<br>m_Name = <span class="hljs-literal">NULL</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">public</span>:<br>string *m_Name;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Animal *animal = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Cat</span>(<span class="hljs-string">&quot;Tom&quot;</span>);<br>animal-&gt;<span class="hljs-built_in">Speak</span>();<br><br><span class="hljs-comment">//é€šè¿‡çˆ¶ç±»æŒ‡é’ˆå»é‡Šæ”¾ï¼Œä¼šå¯¼è‡´å­ç±»å¯¹è±¡å¯èƒ½æ¸…ç†ä¸å¹²å‡€ï¼Œé€ æˆå†…å­˜æ³„æ¼</span><br><span class="hljs-comment">//æ€ä¹ˆè§£å†³ï¼Ÿç»™åŸºç±»å¢åŠ ä¸€ä¸ªè™šææ„å‡½æ•°</span><br><span class="hljs-comment">//è™šææ„å‡½æ•°å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</span><br><span class="hljs-keyword">delete</span> animal;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>â€‹1. è™šææ„æˆ–çº¯è™šææ„å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</p><p>â€‹2. å¦‚æœå­ç±»ä¸­æ²¡æœ‰å †åŒºæ•°æ®ï¼Œå¯ä»¥ä¸å†™ä¸ºè™šææ„æˆ–çº¯è™šææ„</p><p>â€‹3. æ‹¥æœ‰çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿå±äºæŠ½è±¡ç±»</p><h4 id="4-7-6-å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…">4.7.6 å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>ç”µè„‘ä¸»è¦ç»„æˆéƒ¨ä»¶ä¸º CPUï¼ˆç”¨äºè®¡ç®—ï¼‰ï¼Œæ˜¾å¡ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰ï¼Œå†…å­˜æ¡ï¼ˆç”¨äºå­˜å‚¨ï¼‰</p><p>å°†æ¯ä¸ªé›¶ä»¶å°è£…å‡ºæŠ½è±¡åŸºç±»ï¼Œå¹¶ä¸”æä¾›ä¸åŒçš„å‚å•†ç”Ÿäº§ä¸åŒçš„é›¶ä»¶ï¼Œä¾‹å¦‚Intelå‚å•†å’ŒLenovoå‚å•†</p><p>åˆ›å»ºç”µè„‘ç±»æä¾›è®©ç”µè„‘å·¥ä½œçš„å‡½æ•°ï¼Œå¹¶ä¸”è°ƒç”¨æ¯ä¸ªé›¶ä»¶å·¥ä½œçš„æ¥å£</p><p>æµ‹è¯•æ—¶ç»„è£…ä¸‰å°ä¸åŒçš„ç”µè„‘è¿›è¡Œå·¥ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//æŠ½è±¡CPUç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CPU</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//æŠ½è±¡çš„è®¡ç®—å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">calculate</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">//æŠ½è±¡æ˜¾å¡ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">VideoCard</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//æŠ½è±¡çš„æ˜¾ç¤ºå‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">//æŠ½è±¡å†…å­˜æ¡ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Memory</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//æŠ½è±¡çš„å­˜å‚¨å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">storage</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">//ç”µè„‘ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Computer</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Computer</span>(CPU * cpu, VideoCard * vc, Memory * mem)<br>&#123;<br>m_cpu = cpu;<br>m_vc = vc;<br>m_mem = mem;<br>&#125;<br><br><span class="hljs-comment">//æä¾›å·¥ä½œçš„å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">work</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//è®©é›¶ä»¶å·¥ä½œèµ·æ¥ï¼Œè°ƒç”¨æ¥å£</span><br>m_cpu-&gt;<span class="hljs-built_in">calculate</span>();<br><br>m_vc-&gt;<span class="hljs-built_in">display</span>();<br><br>m_mem-&gt;<span class="hljs-built_in">storage</span>();<br>&#125;<br><br><span class="hljs-comment">//æä¾›ææ„å‡½æ•° é‡Šæ”¾3ä¸ªç”µè„‘é›¶ä»¶</span><br>~<span class="hljs-built_in">Computer</span>()<br>&#123;<br><br><span class="hljs-comment">//é‡Šæ”¾CPUé›¶ä»¶</span><br><span class="hljs-keyword">if</span> (m_cpu != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span> m_cpu;<br>m_cpu = <span class="hljs-literal">NULL</span>;<br>&#125;<br><br><span class="hljs-comment">//é‡Šæ”¾æ˜¾å¡é›¶ä»¶</span><br><span class="hljs-keyword">if</span> (m_vc != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span> m_vc;<br>m_vc = <span class="hljs-literal">NULL</span>;<br>&#125;<br><br><span class="hljs-comment">//é‡Šæ”¾å†…å­˜æ¡é›¶ä»¶</span><br><span class="hljs-keyword">if</span> (m_mem != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span> m_mem;<br>m_mem = <span class="hljs-literal">NULL</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">private</span>:<br><br>CPU * m_cpu; <span class="hljs-comment">//CPUçš„é›¶ä»¶æŒ‡é’ˆ</span><br>VideoCard * m_vc; <span class="hljs-comment">//æ˜¾å¡é›¶ä»¶æŒ‡é’ˆ</span><br>Memory * m_mem; <span class="hljs-comment">//å†…å­˜æ¡é›¶ä»¶æŒ‡é’ˆ</span><br>&#125;;<br><br><span class="hljs-comment">//å…·ä½“å‚å•†</span><br><span class="hljs-comment">//Intelå‚å•†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelCPU</span> :<span class="hljs-keyword">public</span> CPU<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">calculate</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Intelçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelVideoCard</span> :<span class="hljs-keyword">public</span> VideoCard<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Intelçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelMemory</span> :<span class="hljs-keyword">public</span> Memory<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">storage</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Intelçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-comment">//Lenovoå‚å•†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LenovoCPU</span> :<span class="hljs-keyword">public</span> CPU<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">calculate</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Lenovoçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LenovoVideoCard</span> :<span class="hljs-keyword">public</span> VideoCard<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Lenovoçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LenovoMemory</span> :<span class="hljs-keyword">public</span> Memory<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">storage</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Lenovoçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ç¬¬ä¸€å°ç”µè„‘é›¶ä»¶</span><br>CPU * intelCpu = <span class="hljs-keyword">new</span> IntelCPU;<br>VideoCard * intelCard = <span class="hljs-keyword">new</span> IntelVideoCard;<br>Memory * intelMem = <span class="hljs-keyword">new</span> IntelMemory;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;ç¬¬ä¸€å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;<br><span class="hljs-comment">//åˆ›å»ºç¬¬ä¸€å°ç”µè„‘</span><br>Computer * computer1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Computer</span>(intelCpu, intelCard, intelMem);<br>computer1-&gt;<span class="hljs-built_in">work</span>();<br><span class="hljs-keyword">delete</span> computer1;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;-----------------------&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç¬¬äºŒå°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;<br><span class="hljs-comment">//ç¬¬äºŒå°ç”µè„‘ç»„è£…</span><br>Computer * computer2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Computer</span>(<span class="hljs-keyword">new</span> LenovoCPU, <span class="hljs-keyword">new</span> LenovoVideoCard, <span class="hljs-keyword">new</span> LenovoMemory);;<br>computer2-&gt;<span class="hljs-built_in">work</span>();<br><span class="hljs-keyword">delete</span> computer2;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;-----------------------&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç¬¬ä¸‰å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;<br><span class="hljs-comment">//ç¬¬ä¸‰å°ç”µè„‘ç»„è£…</span><br>Computer * computer3 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Computer</span>(<span class="hljs-keyword">new</span> LenovoCPU, <span class="hljs-keyword">new</span> IntelVideoCard, <span class="hljs-keyword">new</span> LenovoMemory);;<br>computer3-&gt;<span class="hljs-built_in">work</span>();<br><span class="hljs-keyword">delete</span> computer3;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-æ–‡ä»¶æ“ä½œ">5 æ–‡ä»¶æ“ä½œ</h2><p>ç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®éƒ½å±äºä¸´æ—¶æ•°æ®ï¼Œç¨‹åºä¸€æ—¦è¿è¡Œç»“æŸéƒ½ä¼šè¢«é‡Šæ”¾</p><p>é€šè¿‡<strong>æ–‡ä»¶å¯ä»¥å°†æ•°æ®æŒä¹…åŒ–</strong></p><p>C++ä¸­å¯¹æ–‡ä»¶æ“ä½œéœ€è¦åŒ…å«å¤´æ–‡ä»¶ ==&lt; fstream &gt;==</p><p>æ–‡ä»¶ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š</p><ol><li><strong>æ–‡æœ¬æ–‡ä»¶</strong>     -  æ–‡ä»¶ä»¥æ–‡æœ¬çš„<strong>ASCIIç </strong>å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­</li><li><strong>äºŒè¿›åˆ¶æ–‡ä»¶</strong> -  æ–‡ä»¶ä»¥æ–‡æœ¬çš„<strong>äºŒè¿›åˆ¶</strong>å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸èƒ½ç›´æ¥è¯»æ‡‚å®ƒä»¬</li></ol><p>æ“ä½œæ–‡ä»¶çš„ä¸‰å¤§ç±»:</p><ol><li>ofstreamï¼šå†™æ“ä½œ</li><li>ifstreamï¼š è¯»æ“ä½œ</li><li>fstream ï¼š è¯»å†™æ“ä½œ</li></ol><h3 id="5-1æ–‡æœ¬æ–‡ä»¶">5.1æ–‡æœ¬æ–‡ä»¶</h3><h4 id="5-1-1å†™æ–‡ä»¶">5.1.1å†™æ–‡ä»¶</h4><p>å†™æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åŒ…å«å¤´æ–‡ä»¶</p><p>#include &lt;fstream&gt;</p></li><li><p>åˆ›å»ºæµå¯¹è±¡</p><p>ofstream ofs;</p></li><li><p>æ‰“å¼€æ–‡ä»¶</p><p>ofs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼);</p></li><li><p>å†™æ•°æ®</p><p>ofs &lt;&lt; â€œå†™å…¥çš„æ•°æ®â€;</p></li><li><p>å…³é—­æ–‡ä»¶</p><p>ofs.close();</p></li></ol><p>æ–‡ä»¶æ‰“å¼€æ–¹å¼ï¼š</p><table><thead><tr><th>æ‰“å¼€æ–¹å¼</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>ios::in</td><td>ä¸ºè¯»æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶</td></tr><tr><td>ios::out</td><td>ä¸ºå†™æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶</td></tr><tr><td>ios::ate</td><td>åˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾</td></tr><tr><td>ios::app</td><td>è¿½åŠ æ–¹å¼å†™æ–‡ä»¶</td></tr><tr><td>ios::trunc</td><td>å¦‚æœæ–‡ä»¶å­˜åœ¨å…ˆåˆ é™¤ï¼Œå†åˆ›å»º</td></tr><tr><td>ios::binary</td><td>äºŒè¿›åˆ¶æ–¹å¼</td></tr></tbody></table><p><strong>æ³¨æ„ï¼š</strong> æ–‡ä»¶æ‰“å¼€æ–¹å¼å¯ä»¥é…åˆä½¿ç”¨ï¼Œåˆ©ç”¨|æ“ä½œç¬¦</p><p>**ä¾‹å¦‚ï¼š**ç”¨äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ <code>ios::binary |  ios:: out</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>ofstream ofs;<br>ofs.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;test.txt&quot;</span>, ios::out);<br><br>ofs &lt;&lt; <span class="hljs-string">&quot;å§“åï¼šå¼ ä¸‰&quot;</span> &lt;&lt; endl;<br>ofs &lt;&lt; <span class="hljs-string">&quot;æ€§åˆ«ï¼šç”·&quot;</span> &lt;&lt; endl;<br>ofs &lt;&lt; <span class="hljs-string">&quot;å¹´é¾„ï¼š18&quot;</span> &lt;&lt; endl;<br><br>ofs.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ–‡ä»¶æ“ä½œå¿…é¡»åŒ…å«å¤´æ–‡ä»¶ fstream</li><li>è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ofstream  ï¼Œæˆ–è€…fstreamç±»</li><li>æ‰“å¼€æ–‡ä»¶æ—¶å€™éœ€è¦æŒ‡å®šæ“ä½œæ–‡ä»¶çš„è·¯å¾„ï¼Œä»¥åŠæ‰“å¼€æ–¹å¼</li><li>åˆ©ç”¨&lt;&lt;å¯ä»¥å‘æ–‡ä»¶ä¸­å†™æ•°æ®</li><li>æ“ä½œå®Œæ¯•ï¼Œè¦å…³é—­æ–‡ä»¶</li></ul><h4 id="5-1-2è¯»æ–‡ä»¶">5.1.2è¯»æ–‡ä»¶</h4><p>è¯»æ–‡ä»¶ä¸å†™æ–‡ä»¶æ­¥éª¤ç›¸ä¼¼ï¼Œä½†æ˜¯è¯»å–æ–¹å¼ç›¸å¯¹äºæ¯”è¾ƒå¤š</p><p>è¯»æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åŒ…å«å¤´æ–‡ä»¶</p><p>#include &lt;fstream&gt;</p></li><li><p>åˆ›å»ºæµå¯¹è±¡</p><p>ifstream ifs;</p></li><li><p>æ‰“å¼€æ–‡ä»¶å¹¶åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</p><p>ifs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼);</p></li><li><p>è¯»æ•°æ®</p><p>å››ç§æ–¹å¼è¯»å–</p></li><li><p>å…³é—­æ–‡ä»¶</p><p>ifs.close();</p></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>ifstream ifs;<br>ifs.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;test.txt&quot;</span>, ios::in);<br><br><span class="hljs-keyword">if</span> (!ifs.<span class="hljs-built_in">is_open</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-comment">//ç¬¬ä¸€ç§æ–¹å¼</span><br><span class="hljs-comment">//char buf[1024] = &#123; 0 &#125;;</span><br><span class="hljs-comment">//while (ifs &gt;&gt; buf)</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-comment">//ç¬¬äºŒç§</span><br><span class="hljs-comment">//char buf[1024] = &#123; 0 &#125;;</span><br><span class="hljs-comment">//while (ifs.getline(buf,sizeof(buf)))</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-comment">//ç¬¬ä¸‰ç§</span><br><span class="hljs-comment">//string buf;</span><br><span class="hljs-comment">//while (getline(ifs, buf))</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-type">char</span> c;<br><span class="hljs-keyword">while</span> ((c = ifs.<span class="hljs-built_in">get</span>()) != EOF)<br>&#123;<br>cout &lt;&lt; c;<br>&#125;<br><br>ifs.<span class="hljs-built_in">close</span>();<br><br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ifstream  ï¼Œæˆ–è€…fstreamç±»</li><li>åˆ©ç”¨is_openå‡½æ•°å¯ä»¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</li><li>close å…³é—­æ–‡ä»¶</li></ul><h3 id="5-2-äºŒè¿›åˆ¶æ–‡ä»¶">5.2 äºŒè¿›åˆ¶æ–‡ä»¶</h3><p>ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ</p><p>æ‰“å¼€æ–¹å¼è¦æŒ‡å®šä¸º ==ios::binary==</p><h4 id="5-2-1-å†™æ–‡ä»¶">5.2.1 å†™æ–‡ä»¶</h4><p>äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°write</p><p>å‡½æ•°åŸå‹ ï¼š<code>ostream&amp; write(const char * buffer,int len);</code></p><p>å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•°</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">char</span> m_Name[<span class="hljs-number">64</span>];<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-comment">//äºŒè¿›åˆ¶æ–‡ä»¶  å†™æ–‡ä»¶</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//1ã€åŒ…å«å¤´æ–‡ä»¶</span><br><br><span class="hljs-comment">//2ã€åˆ›å»ºè¾“å‡ºæµå¯¹è±¡</span><br><span class="hljs-function">ofstream <span class="hljs-title">ofs</span><span class="hljs-params">(<span class="hljs-string">&quot;person.txt&quot;</span>, ios::out | ios::binary)</span></span>;<br><br><span class="hljs-comment">//3ã€æ‰“å¼€æ–‡ä»¶</span><br><span class="hljs-comment">//ofs.open(&quot;person.txt&quot;, ios::out | ios::binary);</span><br><br>Person p = &#123;<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>  , <span class="hljs-number">18</span>&#125;;<br><br><span class="hljs-comment">//4ã€å†™æ–‡ä»¶</span><br>ofs.<span class="hljs-built_in">write</span>((<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)&amp;p, <span class="hljs-built_in">sizeof</span>(p));<br><br><span class="hljs-comment">//5ã€å…³é—­æ–‡ä»¶</span><br>ofs.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ–‡ä»¶è¾“å‡ºæµå¯¹è±¡ å¯ä»¥é€šè¿‡writeå‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼å†™æ•°æ®</li></ul><h4 id="5-2-2-è¯»æ–‡ä»¶">5.2.2 è¯»æ–‡ä»¶</h4><p>äºŒè¿›åˆ¶æ–¹å¼è¯»æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°read</p><p>å‡½æ•°åŸå‹ï¼š<code>istream&amp; read(char *buffer,int len);</code></p><p>å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•°</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">char</span> m_Name[<span class="hljs-number">64</span>];<br><span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">ifstream <span class="hljs-title">ifs</span><span class="hljs-params">(<span class="hljs-string">&quot;person.txt&quot;</span>, ios::in | ios::binary)</span></span>;<br><span class="hljs-keyword">if</span> (!ifs.<span class="hljs-built_in">is_open</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>Person p;<br>ifs.<span class="hljs-built_in">read</span>((<span class="hljs-type">char</span> *)&amp;p, <span class="hljs-built_in">sizeof</span>(p));<br><br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">test01</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ–‡ä»¶è¾“å…¥æµå¯¹è±¡ å¯ä»¥é€šè¿‡readå‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼è¯»æ•°æ®</li></ul>]]></content>
      
      
      <categories>
          
          <category> C++æ•™ç¨‹ä¸“è¾‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> æ ¸å¿ƒç¼–ç¨‹è®²è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè®¯å½•ç®¡ç†ç³»ç»Ÿçš„å®ç°</title>
      <link href="/2022/06/03/%E9%80%9A%E8%AE%AF%E5%BD%95%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>/2022/06/03/%E9%80%9A%E8%AE%AF%E5%BD%95%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1>é€šè®¯å½•ç®¡ç†ç³»ç»Ÿçš„å®ç°</h1><h2 id="1ã€ç³»ç»Ÿéœ€æ±‚">1ã€ç³»ç»Ÿéœ€æ±‚</h2><p>é€šè®¯å½•æ˜¯ä¸€ä¸ªå¯ä»¥è®°å½•äº²äººã€å¥½å‹ä¿¡æ¯çš„å·¥å…·ã€‚</p><p>æœ¬æ•™ç¨‹ä¸»è¦åˆ©ç”¨C++æ¥å®ç°ä¸€ä¸ªé€šè®¯å½•ç®¡ç†ç³»ç»Ÿ</p><p>ç³»ç»Ÿä¸­éœ€è¦å®ç°çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p><ul><li>æ·»åŠ è”ç³»äººï¼šå‘é€šè®¯å½•ä¸­æ·»åŠ æ–°äººï¼Œä¿¡æ¯åŒ…æ‹¬ï¼ˆå§“åã€æ€§åˆ«ã€å¹´é¾„ã€è”ç³»ç”µè¯ã€å®¶åº­ä½å€ï¼‰æœ€å¤šè®°å½•1000äºº</li><li>æ˜¾ç¤ºè”ç³»äººï¼šæ˜¾ç¤ºé€šè®¯å½•ä¸­æ‰€æœ‰è”ç³»äººä¿¡æ¯</li><li>åˆ é™¤è”ç³»äººï¼šæŒ‰ç…§å§“åè¿›è¡Œåˆ é™¤æŒ‡å®šè”ç³»äºº</li><li>æŸ¥æ‰¾è”ç³»äººï¼šæŒ‰ç…§å§“åæŸ¥çœ‹æŒ‡å®šè”ç³»äººä¿¡æ¯</li><li>ä¿®æ”¹è”ç³»äººï¼šæŒ‰ç…§å§“åé‡æ–°ä¿®æ”¹æŒ‡å®šè”ç³»äºº</li><li>æ¸…ç©ºè”ç³»äººï¼šæ¸…ç©ºé€šè®¯å½•ä¸­æ‰€æœ‰ä¿¡æ¯</li><li>é€€å‡ºé€šè®¯å½•ï¼šé€€å‡ºå½“å‰ä½¿ç”¨çš„é€šè®¯å½•</li></ul><h2 id="2ã€åˆ›å»ºé¡¹ç›®">2ã€åˆ›å»ºé¡¹ç›®</h2><p>åˆ›å»ºé¡¹ç›®æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>åˆ›å»ºæ–°é¡¹ç›®</li><li>æ·»åŠ æ–‡ä»¶</li></ul><h3 id="2-1-åˆ›å»ºé¡¹ç›®">2.1 åˆ›å»ºé¡¹ç›®</h3><p>æ‰“å¼€vs2017åï¼Œç‚¹å‡»åˆ›å»ºæ–°é¡¹ç›®ï¼Œåˆ›å»ºæ–°çš„C++é¡¹ç›®</p><p><img src="/assets/1544151401138.png" alt="1544151401138"></p><p>å¡«å†™é¡¹ç›®åç§°ï¼Œé€‰æ‹©é¡¹ç›®è·¯å¾„</p><p><img src="/assets/1544151579620.png" alt="1544151579620"></p><h3 id="2-2æ·»åŠ æ–‡ä»¶">2.2æ·»åŠ æ–‡ä»¶</h3><p><img src="/assets/1544161551746.png" alt="1544161551746"></p><p><img src="/assets/1544161648175.png" alt="1544161648175"></p><p>æ·»åŠ æˆåŠŸåï¼Œæ•ˆæœå¦‚å›¾ï¼š</p><p><img src="/assets/1544162344057.png" alt="1544162344057"></p><p>è‡³æ­¤ï¼Œé¡¹ç›®å·²åˆ›å»ºå®Œæ¯•</p><h2 id="3ã€èœå•åŠŸèƒ½">3ã€èœå•åŠŸèƒ½</h2><p><strong>åŠŸèƒ½æè¿°ï¼š</strong> ç”¨æˆ·é€‰æ‹©åŠŸèƒ½çš„ç•Œé¢</p><p>èœå•ç•Œé¢æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p><p><img src="/assets/1544149559893.png" alt="1544149559893"></p><p><strong>æ­¥éª¤ï¼š</strong></p><ul><li>å°è£…å‡½æ•°æ˜¾ç¤ºè¯¥ç•Œé¢  å¦‚ <code>void showMenu()</code></li><li>åœ¨mainå‡½æ•°ä¸­è°ƒç”¨å°è£…å¥½çš„å‡½æ•°</li></ul><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//èœå•ç•Œé¢</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showMenu</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;***************************&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;*****  1ã€æ·»åŠ è”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;*****  2ã€æ˜¾ç¤ºè”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;*****  3ã€åˆ é™¤è”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;*****  4ã€æŸ¥æ‰¾è”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;*****  5ã€ä¿®æ”¹è”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;*****  6ã€æ¸…ç©ºè”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;*****  0ã€é€€å‡ºé€šè®¯å½•  *****&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;***************************&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">showMenu</span>();<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4ã€é€€å‡ºåŠŸèƒ½">4ã€é€€å‡ºåŠŸèƒ½</h2><p>åŠŸèƒ½æè¿°ï¼šé€€å‡ºé€šè®¯å½•ç³»ç»Ÿ</p><p>æ€è·¯ï¼šæ ¹æ®ç”¨æˆ·ä¸åŒçš„é€‰æ‹©ï¼Œè¿›å…¥ä¸åŒçš„åŠŸèƒ½ï¼Œå¯ä»¥é€‰æ‹©switchåˆ†æ”¯ç»“æ„ï¼Œå°†æ•´ä¸ªæ¶æ„è¿›è¡Œæ­å»º</p><p>å½“ç”¨æˆ·é€‰æ‹©0æ—¶å€™ï¼Œæ‰§è¡Œé€€å‡ºï¼Œé€‰æ‹©å…¶ä»–å…ˆä¸åšæ“ä½œï¼Œä¹Ÿä¸ä¼šé€€å‡ºç¨‹åº</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> select = <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-built_in">showMenu</span>();<br><br>cin &gt;&gt; select;<br><br><span class="hljs-keyword">switch</span> (select)<br>&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:  <span class="hljs-comment">//æ·»åŠ è”ç³»äºº</span><br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:  <span class="hljs-comment">//æ˜¾ç¤ºè”ç³»äºº</span><br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:  <span class="hljs-comment">//åˆ é™¤è”ç³»äºº</span><br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:  <span class="hljs-comment">//æŸ¥æ‰¾è”ç³»äºº</span><br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:  <span class="hljs-comment">//ä¿®æ”¹è”ç³»äºº</span><br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:  <span class="hljs-comment">//æ¸…ç©ºè”ç³»äºº</span><br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:  <span class="hljs-comment">//é€€å‡ºé€šè®¯å½•</span><br>cout &lt;&lt; <span class="hljs-string">&quot;æ¬¢è¿ä¸‹æ¬¡ä½¿ç”¨&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœå›¾ï¼š</p><p><img src="/assets/1544163868043.png" alt="1544163868043"></p><h2 id="5ã€æ·»åŠ è”ç³»äºº">5ã€æ·»åŠ è”ç³»äºº</h2><p>åŠŸèƒ½æè¿°ï¼š</p><p>å®ç°æ·»åŠ è”ç³»äººåŠŸèƒ½ï¼Œè”ç³»äººä¸Šé™ä¸º1000äººï¼Œè”ç³»äººä¿¡æ¯åŒ…æ‹¬ï¼ˆå§“åã€æ€§åˆ«ã€å¹´é¾„ã€è”ç³»ç”µè¯ã€å®¶åº­ä½å€ï¼‰</p><p>æ·»åŠ è”ç³»äººå®ç°æ­¥éª¤ï¼š</p><ul><li>è®¾è®¡è”ç³»äººç»“æ„ä½“</li><li>è®¾è®¡é€šè®¯å½•ç»“æ„ä½“</li><li>mainå‡½æ•°ä¸­åˆ›å»ºé€šè®¯å½•</li><li>å°è£…æ·»åŠ è”ç³»äººå‡½æ•°</li><li>æµ‹è¯•æ·»åŠ è”ç³»äººåŠŸèƒ½</li></ul><h3 id="5-1-è®¾è®¡è”ç³»äººç»“æ„ä½“">5.1 è®¾è®¡è”ç³»äººç»“æ„ä½“</h3><p>è”ç³»äººä¿¡æ¯åŒ…æ‹¬ï¼šå§“åã€æ€§åˆ«ã€å¹´é¾„ã€è”ç³»ç”µè¯ã€å®¶åº­ä½å€</p><p>è®¾è®¡å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span>  <span class="hljs-comment">//stringå¤´æ–‡ä»¶</span></span><br><span class="hljs-comment">//è”ç³»äººç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span><br>&#123;<br>string m_Name; <span class="hljs-comment">//å§“å</span><br><span class="hljs-type">int</span> m_Sex; <span class="hljs-comment">//æ€§åˆ«ï¼š1ç”· 2å¥³</span><br><span class="hljs-type">int</span> m_Age; <span class="hljs-comment">//å¹´é¾„</span><br>string m_Phone; <span class="hljs-comment">//ç”µè¯</span><br>string m_Addr; <span class="hljs-comment">//ä½å€</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="5-2-è®¾è®¡é€šè®¯å½•ç»“æ„ä½“">5.2 è®¾è®¡é€šè®¯å½•ç»“æ„ä½“</h3><p>è®¾è®¡æ—¶å€™å¯ä»¥åœ¨é€šè®¯å½•ç»“æ„ä½“ä¸­ï¼Œç»´æŠ¤ä¸€ä¸ªå®¹é‡ä¸º1000çš„å­˜æ”¾è”ç³»äººçš„æ•°ç»„ï¼Œå¹¶è®°å½•å½“å‰é€šè®¯å½•ä¸­è”ç³»äººæ•°é‡</p><p>è®¾è®¡å¦‚ä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX 1000 <span class="hljs-comment">//æœ€å¤§äººæ•°</span></span><br><br><span class="hljs-comment">//é€šè®¯å½•ç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Addressbooks</span><br>&#123;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> personArray[MAX]; <span class="hljs-comment">//é€šè®¯å½•ä¸­ä¿å­˜çš„è”ç³»äººæ•°ç»„</span><br><span class="hljs-type">int</span> m_Size; <span class="hljs-comment">//é€šè®¯å½•ä¸­äººå‘˜ä¸ªæ•°</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="5-3-mainå‡½æ•°ä¸­åˆ›å»ºé€šè®¯å½•">5.3 mainå‡½æ•°ä¸­åˆ›å»ºé€šè®¯å½•</h3><p>æ·»åŠ è”ç³»äººå‡½æ•°å°è£…å¥½åï¼Œåœ¨mainå‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªé€šè®¯å½•å˜é‡ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬éœ€è¦ä¸€ç›´ç»´æŠ¤çš„é€šè®¯å½•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++">mianå‡½æ•°èµ·å§‹ä½ç½®æ·»åŠ ï¼š<br><br><span class="hljs-comment">//åˆ›å»ºé€šè®¯å½•</span><br>Addressbooks abs;<br><span class="hljs-comment">//åˆå§‹åŒ–é€šè®¯å½•ä¸­äººæ•°</span><br>abs.m_Size = <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><h3 id="5-4-å°è£…æ·»åŠ è”ç³»äººå‡½æ•°">5.4 å°è£…æ·»åŠ è”ç³»äººå‡½æ•°</h3><p>æ€è·¯ï¼šæ·»åŠ è”ç³»äººå‰å…ˆåˆ¤æ–­é€šè®¯å½•æ˜¯å¦å·²æ»¡ï¼Œå¦‚æœæ»¡äº†å°±ä¸å†æ·»åŠ ï¼Œæœªæ»¡æƒ…å†µå°†æ–°è”ç³»äººä¿¡æ¯é€ä¸ªåŠ å…¥åˆ°é€šè®¯å½•</p><p>æ·»åŠ è”ç³»äººä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//1ã€æ·»åŠ è”ç³»äººä¿¡æ¯</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addPerson</span><span class="hljs-params">(Addressbooks *abs)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//åˆ¤æ–­ç”µè¯æœ¬æ˜¯å¦æ»¡äº†</span><br><span class="hljs-keyword">if</span> (abs-&gt;m_Size == MAX)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;é€šè®¯å½•å·²æ»¡ï¼Œæ— æ³•æ·»åŠ &quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-comment">//å§“å</span><br>string name;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å§“åï¼š&quot;</span> &lt;&lt; endl;<br>cin &gt;&gt; name;<br>abs-&gt;personArray[abs-&gt;m_Size].m_Name = name;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ€§åˆ«ï¼š&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;1 -- ç”·&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;2 -- å¥³&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-comment">//æ€§åˆ«</span><br><span class="hljs-type">int</span> sex = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br>cin &gt;&gt; sex;<br><span class="hljs-keyword">if</span> (sex == <span class="hljs-number">1</span> || sex == <span class="hljs-number">2</span>)<br>&#123;<br>abs-&gt;personArray[abs-&gt;m_Size].m_Sex = sex;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">//å¹´é¾„</span><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å¹´é¾„ï¼š&quot;</span> &lt;&lt; endl;<br><span class="hljs-type">int</span> age = <span class="hljs-number">0</span>;<br>cin &gt;&gt; age;<br>abs-&gt;personArray[abs-&gt;m_Size].m_Age = age;<br><br><span class="hljs-comment">//è”ç³»ç”µè¯</span><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥è”ç³»ç”µè¯ï¼š&quot;</span> &lt;&lt; endl;<br>string phone = <span class="hljs-string">&quot;&quot;</span>;<br>cin &gt;&gt; phone;<br>abs-&gt;personArray[abs-&gt;m_Size].m_Phone = phone;<br><br><span class="hljs-comment">//å®¶åº­ä½å€</span><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å®¶åº­ä½å€ï¼š&quot;</span> &lt;&lt; endl;<br>string address;<br>cin &gt;&gt; address;<br>abs-&gt;personArray[abs-&gt;m_Size].m_Addr = address;<br><br><span class="hljs-comment">//æ›´æ–°é€šè®¯å½•äººæ•°</span><br>abs-&gt;m_Size++;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;æ·»åŠ æˆåŠŸ&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-5-æµ‹è¯•æ·»åŠ è”ç³»äººåŠŸèƒ½">5.5 æµ‹è¯•æ·»åŠ è”ç³»äººåŠŸèƒ½</h3><p>é€‰æ‹©ç•Œé¢ä¸­ï¼Œå¦‚æœç©å®¶é€‰æ‹©äº†1ï¼Œä»£è¡¨æ·»åŠ è”ç³»äººï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸‹è¯¥åŠŸèƒ½</p><p>åœ¨switch case è¯­å¥ä¸­ï¼Œcase1é‡Œæ·»åŠ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:  <span class="hljs-comment">//æ·»åŠ è”ç³»äºº</span><br><span class="hljs-built_in">addPerson</span>(&amp;abs);<br><span class="hljs-keyword">break</span>;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•æ•ˆæœå¦‚å›¾ï¼š</p><p><img src="/assets/1544165554002.png" alt="1544165554002"></p><h2 id="6ã€æ˜¾ç¤ºè”ç³»äºº">6ã€æ˜¾ç¤ºè”ç³»äºº</h2><p>åŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºé€šè®¯å½•ä¸­å·²æœ‰çš„è”ç³»äººä¿¡æ¯</p><p>æ˜¾ç¤ºè”ç³»äººå®ç°æ­¥éª¤ï¼š</p><ul><li>å°è£…æ˜¾ç¤ºè”ç³»äººå‡½æ•°</li><li>æµ‹è¯•æ˜¾ç¤ºè”ç³»äººåŠŸèƒ½</li></ul><h3 id="6-1-å°è£…æ˜¾ç¤ºè”ç³»äººå‡½æ•°">6.1 å°è£…æ˜¾ç¤ºè”ç³»äººå‡½æ•°</h3><p>æ€è·¯ï¼šåˆ¤æ–­å¦‚æœå½“å‰é€šè®¯å½•ä¸­æ²¡æœ‰äººå‘˜ï¼Œå°±æç¤ºè®°å½•ä¸ºç©ºï¼Œäººæ•°å¤§äº0ï¼Œæ˜¾ç¤ºé€šè®¯å½•ä¸­ä¿¡æ¯</p><p>æ˜¾ç¤ºè”ç³»äººä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//2ã€æ˜¾ç¤ºæ‰€æœ‰è”ç³»äººä¿¡æ¯</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span> (abs-&gt;m_Size == <span class="hljs-number">0</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å½“å‰è®°å½•ä¸ºç©º&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; abs-&gt;m_Size; i++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ€§åˆ«ï¼š&quot;</span> &lt;&lt; (abs-&gt;personArray[i].m_Sex == <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;ç”·&quot;</span> : <span class="hljs-string">&quot;å¥³&quot;</span>) &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¹´é¾„ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç”µè¯ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Phone &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;ä½å€ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Addr &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;cls&quot;</span>);<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-2-æµ‹è¯•æ˜¾ç¤ºè”ç³»äººåŠŸèƒ½">6.2 æµ‹è¯•æ˜¾ç¤ºè”ç³»äººåŠŸèƒ½</h3><p>åœ¨switch caseè¯­å¥ä¸­ï¼Œcase 2 é‡Œæ·»åŠ </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:  <span class="hljs-comment">//æ˜¾ç¤ºè”ç³»äºº</span><br><span class="hljs-built_in">showPerson</span>(&amp;abs);<br><span class="hljs-keyword">break</span>;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•æ•ˆæœå¦‚å›¾ï¼š</p><p><img src="/assets/1544166401582.png" alt="1544166401582"></p><h2 id="7ã€åˆ é™¤è”ç³»äºº">7ã€åˆ é™¤è”ç³»äºº</h2><p>åŠŸèƒ½æè¿°ï¼šæŒ‰ç…§å§“åè¿›è¡Œåˆ é™¤æŒ‡å®šè”ç³»äºº</p><p>åˆ é™¤è”ç³»äººå®ç°æ­¥éª¤ï¼š</p><ul><li>å°è£…æ£€æµ‹è”ç³»äººæ˜¯å¦å­˜åœ¨</li><li>å°è£…åˆ é™¤è”ç³»äººå‡½æ•°</li><li>æµ‹è¯•åˆ é™¤è”ç³»äººåŠŸèƒ½</li></ul><h3 id="7-1-å°è£…æ£€æµ‹è”ç³»äººæ˜¯å¦å­˜åœ¨">7.1  å°è£…æ£€æµ‹è”ç³»äººæ˜¯å¦å­˜åœ¨</h3><p>è®¾è®¡æ€è·¯ï¼š</p><p>åˆ é™¤è”ç³»äººå‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„è”ç³»äººæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ é™¤ï¼Œä¸å­˜åœ¨æç¤ºç”¨æˆ·æ²¡æœ‰è¦åˆ é™¤çš„è”ç³»äºº</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠæ£€æµ‹è”ç³»äººæ˜¯å¦å­˜åœ¨å°è£…æˆä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå¦‚æœå­˜åœ¨ï¼Œè¿”å›è”ç³»äººåœ¨é€šè®¯å½•ä¸­çš„ä½ç½®ï¼Œä¸å­˜åœ¨è¿”å›-1</p><p>æ£€æµ‹è”ç³»äººæ˜¯å¦å­˜åœ¨ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸ¥è¯¢çš„äººå‘˜ï¼Œå­˜åœ¨è¿”å›åœ¨æ•°ç»„ä¸­ç´¢å¼•ä½ç½®ï¼Œä¸å­˜åœ¨è¿”å›-1</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">isExist</span><span class="hljs-params">(Addressbooks * abs, string name)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; abs-&gt;m_Size; i++)<br>&#123;<br><span class="hljs-keyword">if</span> (abs-&gt;personArray[i].m_Name == name)<br>&#123;<br><span class="hljs-keyword">return</span> i;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="7-2-å°è£…åˆ é™¤è”ç³»äººå‡½æ•°">7.2 å°è£…åˆ é™¤è”ç³»äººå‡½æ•°</h3><p>æ ¹æ®ç”¨æˆ·è¾“å…¥çš„è”ç³»äººåˆ¤æ–­è¯¥é€šè®¯å½•ä¸­æ˜¯å¦æœ‰æ­¤äºº</p><p>æŸ¥æ‰¾åˆ°è¿›è¡Œåˆ é™¤ï¼Œå¹¶æç¤ºåˆ é™¤æˆåŠŸ</p><p>æŸ¥ä¸åˆ°æç¤ºæŸ¥æ— æ­¤äººã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//3ã€åˆ é™¤æŒ‡å®šè”ç³»äººä¿¡æ¯</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deletePerson</span><span class="hljs-params">(Addressbooks * abs)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ‚¨è¦åˆ é™¤çš„è”ç³»äºº&quot;</span> &lt;&lt; endl;<br>string name;<br>cin &gt;&gt; name;<br><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">isExist</span>(abs, name);<br><span class="hljs-keyword">if</span> (ret != <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = ret; i &lt; abs-&gt;m_Size; i++)<br>&#123;<br>abs-&gt;personArray[i] = abs-&gt;personArray[i + <span class="hljs-number">1</span>];<br>&#125;<br>         abs-&gt;m_Size--;<br>cout &lt;&lt; <span class="hljs-string">&quot;åˆ é™¤æˆåŠŸ&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æŸ¥æ— æ­¤äºº&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-3-æµ‹è¯•åˆ é™¤è”ç³»äººåŠŸèƒ½">7.3 æµ‹è¯•åˆ é™¤è”ç³»äººåŠŸèƒ½</h3><p>åœ¨switch case è¯­å¥ä¸­ï¼Œcase3é‡Œæ·»åŠ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:  <span class="hljs-comment">//åˆ é™¤è”ç³»äºº</span><br><span class="hljs-built_in">deletePerson</span>(&amp;abs);<br><span class="hljs-keyword">break</span>;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•æ•ˆæœå¦‚å›¾ï¼š</p><p>å­˜åœ¨æƒ…å†µï¼š</p><p><img src="/assets/1544167951559.png" alt="1544167951559"></p><p>ä¸å­˜åœ¨æƒ…å†µï¼š</p><p><img src="/assets/1544168010831.png" alt="1544168010831"></p><h2 id="8ã€æŸ¥æ‰¾è”ç³»äºº">8ã€æŸ¥æ‰¾è”ç³»äºº</h2><p>åŠŸèƒ½æè¿°ï¼šæŒ‰ç…§å§“åæŸ¥çœ‹æŒ‡å®šè”ç³»äººä¿¡æ¯</p><p>æŸ¥æ‰¾è”ç³»äººå®ç°æ­¥éª¤</p><ul><li>å°è£…æŸ¥æ‰¾è”ç³»äººå‡½æ•°</li><li>æµ‹è¯•æŸ¥æ‰¾æŒ‡å®šè”ç³»äºº</li></ul><h3 id="8-1-å°è£…æŸ¥æ‰¾è”ç³»äººå‡½æ•°">8.1 å°è£…æŸ¥æ‰¾è”ç³»äººå‡½æ•°</h3><p>å®ç°æ€è·¯ï¼šåˆ¤æ–­ç”¨æˆ·æŒ‡å®šçš„è”ç³»äººæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨æ˜¾ç¤ºä¿¡æ¯ï¼Œä¸å­˜åœ¨åˆ™æç¤ºæŸ¥æ— æ­¤äººã€‚</p><p>æŸ¥æ‰¾è”ç³»äººä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//4ã€æŸ¥æ‰¾æŒ‡å®šè”ç³»äººä¿¡æ¯</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">findPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ‚¨è¦æŸ¥æ‰¾çš„è”ç³»äºº&quot;</span> &lt;&lt; endl;<br>string name;<br>cin &gt;&gt; name;<br><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">isExist</span>(abs, name);<br><span class="hljs-keyword">if</span> (ret != <span class="hljs-number">-1</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ€§åˆ«ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Sex &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;å¹´é¾„ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç”µè¯ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Phone &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;ä½å€ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Addr &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æŸ¥æ— æ­¤äºº&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;cls&quot;</span>);<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-2-æµ‹è¯•æŸ¥æ‰¾æŒ‡å®šè”ç³»äºº">8.2 æµ‹è¯•æŸ¥æ‰¾æŒ‡å®šè”ç³»äºº</h3><p>åœ¨switch case è¯­å¥ä¸­ï¼Œcase4é‡Œæ·»åŠ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:  <span class="hljs-comment">//æŸ¥æ‰¾è”ç³»äºº</span><br><span class="hljs-built_in">findPerson</span>(&amp;abs);<br><span class="hljs-keyword">break</span>;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•æ•ˆæœå¦‚å›¾</p><p>å­˜åœ¨æƒ…å†µï¼š</p><p><img src="/assets/1544170057646.png" alt="1544170057646"></p><p>ä¸å­˜åœ¨æƒ…å†µï¼š</p><p><img src="/assets/1544170254021.png" alt="1544170254021"></p><h2 id="9ã€ä¿®æ”¹è”ç³»äºº">9ã€ä¿®æ”¹è”ç³»äºº</h2><p>åŠŸèƒ½æè¿°ï¼šæŒ‰ç…§å§“åé‡æ–°ä¿®æ”¹æŒ‡å®šè”ç³»äºº</p><p>ä¿®æ”¹è”ç³»äººå®ç°æ­¥éª¤</p><ul><li>å°è£…ä¿®æ”¹è”ç³»äººå‡½æ•°</li><li>æµ‹è¯•ä¿®æ”¹è”ç³»äººåŠŸèƒ½</li></ul><h3 id="9-1-å°è£…ä¿®æ”¹è”ç³»äººå‡½æ•°">9.1 å°è£…ä¿®æ”¹è”ç³»äººå‡½æ•°</h3><p>å®ç°æ€è·¯ï¼šæŸ¥æ‰¾ç”¨æˆ·è¾“å…¥çš„è”ç³»äººï¼Œå¦‚æœæŸ¥æ‰¾æˆåŠŸè¿›è¡Œä¿®æ”¹æ“ä½œï¼ŒæŸ¥æ‰¾å¤±è´¥æç¤ºæŸ¥æ— æ­¤äºº</p><p>ä¿®æ”¹è”ç³»äººä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//5ã€ä¿®æ”¹æŒ‡å®šè”ç³»äººä¿¡æ¯</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">modifyPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ‚¨è¦ä¿®æ”¹çš„è”ç³»äºº&quot;</span> &lt;&lt; endl;<br>string name;<br>cin &gt;&gt; name;<br><br><span class="hljs-type">int</span> ret = <span class="hljs-built_in">isExist</span>(abs, name);<br><span class="hljs-keyword">if</span> (ret != <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-comment">//å§“å</span><br>string name;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å§“åï¼š&quot;</span> &lt;&lt; endl;<br>cin &gt;&gt; name;<br>abs-&gt;personArray[ret].m_Name = name;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ€§åˆ«ï¼š&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;1 -- ç”·&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;2 -- å¥³&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-comment">//æ€§åˆ«</span><br><span class="hljs-type">int</span> sex = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br>cin &gt;&gt; sex;<br><span class="hljs-keyword">if</span> (sex == <span class="hljs-number">1</span> || sex == <span class="hljs-number">2</span>)<br>&#123;<br>abs-&gt;personArray[ret].m_Sex = sex;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">//å¹´é¾„</span><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å¹´é¾„ï¼š&quot;</span> &lt;&lt; endl;<br><span class="hljs-type">int</span> age = <span class="hljs-number">0</span>;<br>cin &gt;&gt; age;<br>abs-&gt;personArray[ret].m_Age = age;<br><br><span class="hljs-comment">//è”ç³»ç”µè¯</span><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥è”ç³»ç”µè¯ï¼š&quot;</span> &lt;&lt; endl;<br>string phone = <span class="hljs-string">&quot;&quot;</span>;<br>cin &gt;&gt; phone;<br>abs-&gt;personArray[ret].m_Phone = phone;<br><br><span class="hljs-comment">//å®¶åº­ä½å€</span><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å®¶åº­ä½å€ï¼š&quot;</span> &lt;&lt; endl;<br>string address;<br>cin &gt;&gt; address;<br>abs-&gt;personArray[ret].m_Addr = address;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æŸ¥æ— æ­¤äºº&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;cls&quot;</span>);<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="9-2-æµ‹è¯•ä¿®æ”¹è”ç³»äººåŠŸèƒ½">9.2 æµ‹è¯•ä¿®æ”¹è”ç³»äººåŠŸèƒ½</h3><p>åœ¨switch case è¯­å¥ä¸­ï¼Œcase 5é‡Œæ·»åŠ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:  <span class="hljs-comment">//ä¿®æ”¹è”ç³»äºº</span><br><span class="hljs-built_in">modifyPerson</span>(&amp;abs);<br><span class="hljs-keyword">break</span>;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•æ•ˆæœå¦‚å›¾ï¼š</p><p>æŸ¥ä¸åˆ°æŒ‡å®šè”ç³»äººæƒ…å†µï¼š</p><p><img src="/assets/1544172265676.png" alt="1544172265676"></p><p>æŸ¥æ‰¾åˆ°è”ç³»äººï¼Œå¹¶ä¿®æ”¹æˆåŠŸï¼š</p><p><img src="/assets/1544172164141.png" alt="1544172164141"></p><p>å†æ¬¡æŸ¥çœ‹é€šè®¯å½•ï¼Œç¡®è®¤ä¿®æ”¹å®Œæ¯•</p><p><img src="/assets/1544172228627.png" alt="1544172228627"></p><h2 id="10ã€æ¸…ç©ºè”ç³»äºº">10ã€æ¸…ç©ºè”ç³»äºº</h2><p>åŠŸèƒ½æè¿°ï¼šæ¸…ç©ºé€šè®¯å½•ä¸­æ‰€æœ‰ä¿¡æ¯</p><p>æ¸…ç©ºè”ç³»äººå®ç°æ­¥éª¤</p><ul><li>å°è£…æ¸…ç©ºè”ç³»äººå‡½æ•°</li><li>æµ‹è¯•æ¸…ç©ºè”ç³»äºº</li></ul><h3 id="10-1-å°è£…æ¸…ç©ºè”ç³»äººå‡½æ•°">10.1 å°è£…æ¸…ç©ºè”ç³»äººå‡½æ•°</h3><p>å®ç°æ€è·¯ï¼š å°†é€šè®¯å½•æ‰€æœ‰è”ç³»äººä¿¡æ¯æ¸…é™¤æ‰ï¼Œåªè¦å°†é€šè®¯å½•è®°å½•çš„è”ç³»äººæ•°é‡ç½®ä¸º0ï¼Œåšé€»è¾‘æ¸…ç©ºå³å¯ã€‚</p><p>æ¸…ç©ºè”ç³»äººä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//6ã€æ¸…ç©ºæ‰€æœ‰è”ç³»äºº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">cleanPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span><br><span class="hljs-function"></span>&#123;<br>abs-&gt;m_Size = <span class="hljs-number">0</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;é€šè®¯å½•å·²æ¸…ç©º&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;cls&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="10-2-æµ‹è¯•æ¸…ç©ºè”ç³»äºº">10.2  æµ‹è¯•æ¸…ç©ºè”ç³»äºº</h3><p>åœ¨switch case è¯­å¥ä¸­ï¼Œcase 6 é‡Œæ·»åŠ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:  <span class="hljs-comment">//æ¸…ç©ºè”ç³»äºº</span><br><span class="hljs-built_in">cleanPerson</span>(&amp;abs);<br><span class="hljs-keyword">break</span>;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•æ•ˆæœå¦‚å›¾ï¼š</p><p>æ¸…ç©ºé€šè®¯å½•</p><p><img src="/assets/1544172909693.png" alt="1544172909693"></p><p>å†æ¬¡æŸ¥çœ‹ä¿¡æ¯ï¼Œæ˜¾ç¤ºè®°å½•ä¸ºç©º</p><p><img src="/assets/1544172943653.png" alt="1544172943653"></p><h2 id="å®Œæ•´ä»£ç å®ç°">å®Œæ•´ä»£ç å®ç°</h2><p><strong>ä»£ç ï¼š</strong> mian.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//</span><br><span class="hljs-comment">// Created by user on 5/31/2022.</span><br><span class="hljs-comment">// author: Liansixin</span><br><span class="hljs-comment">//</span><br><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;BusinessImplementation.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">//åˆ›å»ºé€šè®¯å½•</span><br>    Addressbooks abs;<br>    <span class="hljs-comment">//åˆå§‹åŒ–é€šè®¯å½•ä¸­äººæ•°</span><br>    abs.m_Size = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-type">int</span> select = <span class="hljs-number">0</span>;<br>    BusinessImplementation * pBusinessImplementation;<br>    pBusinessImplementation = BusinessImplementation::<span class="hljs-built_in">GetBusinessImplementation</span>();<br>    <span class="hljs-keyword">if</span> (<span class="hljs-literal">NULL</span> == pBusinessImplementation)<br>    &#123;<br>        <span class="hljs-built_in">abort</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>    &#123;<br>        pBusinessImplementation-&gt;<span class="hljs-built_in">showMenu</span>();<br><br>        cin &gt;&gt; select;<br><br>        <span class="hljs-keyword">switch</span> (select)<br>        &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:  <span class="hljs-comment">//æ·»åŠ è”ç³»äºº</span><br>            pBusinessImplementation-&gt;<span class="hljs-built_in">addPerson</span>(&amp;abs);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:  <span class="hljs-comment">//æ˜¾ç¤ºè”ç³»äºº</span><br>            pBusinessImplementation-&gt;<span class="hljs-built_in">showPerson</span>(&amp;abs);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:  <span class="hljs-comment">//åˆ é™¤è”ç³»äºº</span><br>            pBusinessImplementation-&gt;<span class="hljs-built_in">deletePerson</span>(&amp;abs);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:  <span class="hljs-comment">//æŸ¥æ‰¾è”ç³»äºº</span><br>            pBusinessImplementation-&gt;<span class="hljs-built_in">findPerson</span>(&amp;abs);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:  <span class="hljs-comment">//ä¿®æ”¹è”ç³»äºº</span><br>            pBusinessImplementation-&gt;<span class="hljs-built_in">modifyPerson</span>(&amp;abs);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:  <span class="hljs-comment">//æ¸…ç©ºè”ç³»äºº</span><br>            pBusinessImplementation-&gt;<span class="hljs-built_in">cleanPerson</span>(&amp;abs);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:  <span class="hljs-comment">//é€€å‡ºé€šè®¯å½•</span><br>                cout &lt;&lt; <span class="hljs-string">&quot;æ¬¢è¿ä¸‹æ¬¡ä½¿ç”¨&quot;</span> &lt;&lt; endl;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">default</span>:<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>ä»£ç ï¼š</strong> BusinessImplementation.h</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//</span><br><span class="hljs-comment">// Created by user on 5/31/2022.</span><br><span class="hljs-comment">// author: Liansixin</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> ADDRESSBOOK_BUSINESSIMPLEMENTATION_H</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ADDRESSBOOK_BUSINESSIMPLEMENTATION_H</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX 1000 <span class="hljs-comment">//æœ€å¤§äººæ•°</span></span><br><br><br><span class="hljs-comment">//è”ç³»äººç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span><br>&#123;<br>    string m_Name; <span class="hljs-comment">//å§“å</span><br>    <span class="hljs-type">int</span> m_Sex; <span class="hljs-comment">//æ€§åˆ«ï¼š1ç”· 2å¥³</span><br>    <span class="hljs-type">int</span> m_Age; <span class="hljs-comment">//å¹´é¾„</span><br>    string m_Phone; <span class="hljs-comment">//ç”µè¯</span><br>    string m_Addr; <span class="hljs-comment">//ä½å€</span><br>&#125;;<br><br><span class="hljs-comment">//é€šè®¯å½•ç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Addressbooks</span><br>&#123;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> personArray[MAX]; <span class="hljs-comment">//é€šè®¯å½•ä¸­ä¿å­˜çš„è”ç³»äººæ•°ç»„</span><br>    <span class="hljs-type">int</span> m_Size; <span class="hljs-comment">//é€šè®¯å½•ä¸­äººå‘˜ä¸ªæ•°</span><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BusinessImplementation</span> &#123;<br><span class="hljs-keyword">protected</span>:<br>    <span class="hljs-type">static</span> BusinessImplementation *m_pBusinessImplementation;<br><span class="hljs-keyword">protected</span>:<br>    <span class="hljs-built_in">BusinessImplementation</span>();<br>    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">BusinessImplementation</span>();<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> BusinessImplementation * <span class="hljs-title">GetBusinessImplementation</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showMenu</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addPerson</span><span class="hljs-params">(Addressbooks *abs)</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deletePerson</span><span class="hljs-params">(Addressbooks * abs)</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">findPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">modifyPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">cleanPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span>;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">isExist</span><span class="hljs-params">(Addressbooks * abs, string name)</span></span>;<br><br>&#125;;<br><br><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">//ADDRESSBOOK_BUSINESSIMPLEMENTATION_H</span></span><br><br></code></pre></td></tr></table></figure><p><strong>ä»£ç ï¼š</strong> BusinessImplementation.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//</span><br><span class="hljs-comment">// Created by user on 5/31/2022.</span><br><span class="hljs-comment">// author: Liansixin</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;BusinessImplementation.h&quot;</span></span><br><br>BusinessImplementation* BusinessImplementation::m_pBusinessImplementation = <span class="hljs-literal">NULL</span>;<br><br>BusinessImplementation::<span class="hljs-built_in">BusinessImplementation</span>()<br>&#123;<br><br>&#125;<br><br>BusinessImplementation::~<span class="hljs-built_in">BusinessImplementation</span>()<br>&#123;<br><br>&#125;<br><br><br><span class="hljs-comment">//èœå•ç•Œé¢</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BusinessImplementation::showMenu</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;***************************&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*****  1ã€æ·»åŠ è”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*****  2ã€æ˜¾ç¤ºè”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*****  3ã€åˆ é™¤è”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*****  4ã€æŸ¥æ‰¾è”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*****  5ã€ä¿®æ”¹è”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*****  6ã€æ¸…ç©ºè”ç³»äºº  *****&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;*****  0ã€é€€å‡ºé€šè®¯å½•  *****&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;***************************&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//æ·»åŠ è”ç³»äºº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BusinessImplementation::addPerson</span><span class="hljs-params">(Addressbooks *abs)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//åˆ¤æ–­ç”µè¯æœ¬æ˜¯å¦æ»¡äº†</span><br>    <span class="hljs-keyword">if</span> (abs-&gt;m_Size == MAX)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;é€šè®¯å½•å·²æ»¡ï¼Œæ— æ³•æ·»åŠ &quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-comment">//å§“å</span><br>        string name;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å§“åï¼š&quot;</span> &lt;&lt; endl;<br>        cin &gt;&gt; name;<br>        abs-&gt;personArray[abs-&gt;m_Size].m_Name = name;<br><br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ€§åˆ«ï¼š&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;1 -- ç”·&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;2 -- å¥³&quot;</span> &lt;&lt; endl;<br><br>        <span class="hljs-comment">//æ€§åˆ«</span><br>        <span class="hljs-type">int</span> sex = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>        &#123;<br>            cin &gt;&gt; sex;<br>            <span class="hljs-keyword">if</span> (sex == <span class="hljs-number">1</span> || sex == <span class="hljs-number">2</span>)<br>            &#123;<br>                abs-&gt;personArray[abs-&gt;m_Size].m_Sex = sex;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            cout &lt;&lt; <span class="hljs-string">&quot;è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-comment">//å¹´é¾„</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å¹´é¾„ï¼š&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-type">int</span> age = <span class="hljs-number">0</span>;<br>        cin &gt;&gt; age;<br>        abs-&gt;personArray[abs-&gt;m_Size].m_Age = age;<br><br>        <span class="hljs-comment">//è”ç³»ç”µè¯</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥è”ç³»ç”µè¯ï¼š&quot;</span> &lt;&lt; endl;<br>        string phone = <span class="hljs-string">&quot;&quot;</span>;<br>        cin &gt;&gt; phone;<br>        abs-&gt;personArray[abs-&gt;m_Size].m_Phone = phone;<br><br>        <span class="hljs-comment">//å®¶åº­ä½å€</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å®¶åº­ä½å€ï¼š&quot;</span> &lt;&lt; endl;<br>        string address;<br>        cin &gt;&gt; address;<br>        abs-&gt;personArray[abs-&gt;m_Size].m_Addr = address;<br><br>        <span class="hljs-comment">//æ›´æ–°é€šè®¯å½•äººæ•°</span><br>        abs-&gt;m_Size++;<br><br>        cout &lt;&lt; <span class="hljs-string">&quot;æ·»åŠ æˆåŠŸ&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ˜¾ç¤ºè”ç³»äºº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BusinessImplementation::showPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (abs-&gt;m_Size == <span class="hljs-number">0</span>)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;å½“å‰è®°å½•ä¸ºç©º&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; abs-&gt;m_Size; i++)<br>        &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>            cout &lt;&lt; <span class="hljs-string">&quot;æ€§åˆ«ï¼š&quot;</span> &lt;&lt; (abs-&gt;personArray[i].m_Sex == <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;ç”·&quot;</span> : <span class="hljs-string">&quot;å¥³&quot;</span>) &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>            cout &lt;&lt; <span class="hljs-string">&quot;å¹´é¾„ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>            cout &lt;&lt; <span class="hljs-string">&quot;ç”µè¯ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Phone &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>            cout &lt;&lt; <span class="hljs-string">&quot;ä½å€ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[i].m_Addr &lt;&lt; endl;<br>        &#125;<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸ¥è¯¢çš„äººå‘˜ï¼Œå­˜åœ¨è¿”å›åœ¨æ•°ç»„ä¸­ç´¢å¼•ä½ç½®ï¼Œä¸å­˜åœ¨è¿”å›-1</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">BusinessImplementation::isExist</span><span class="hljs-params">(Addressbooks * abs, string name)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; abs-&gt;m_Size; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (abs-&gt;personArray[i].m_Name == name)<br>        &#123;<br>            <span class="hljs-keyword">return</span> i;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">//åˆ é™¤è”ç³»äºº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BusinessImplementation::deletePerson</span><span class="hljs-params">(Addressbooks * abs)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ‚¨è¦åˆ é™¤çš„è”ç³»äºº&quot;</span> &lt;&lt; endl;<br>    string name;<br>    cin &gt;&gt; name;<br><br>    <span class="hljs-type">int</span> ret = <span class="hljs-built_in">isExist</span>(abs, name);<br>    <span class="hljs-keyword">if</span> (ret != <span class="hljs-number">-1</span>)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = ret; i &lt; abs-&gt;m_Size; i++)<br>        &#123;<br>            abs-&gt;personArray[i] = abs-&gt;personArray[i + <span class="hljs-number">1</span>];<br>        &#125;<br>        abs-&gt;m_Size--;<br>        cout &lt;&lt; <span class="hljs-string">&quot;åˆ é™¤æˆåŠŸ&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æŸ¥æ— æ­¤äºº&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">//æŸ¥æ‰¾è”ç³»äºº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BusinessImplementation::findPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ‚¨è¦æŸ¥æ‰¾çš„è”ç³»äºº&quot;</span> &lt;&lt; endl;<br>    string name;<br>    cin &gt;&gt; name;<br><br>    <span class="hljs-type">int</span> ret = <span class="hljs-built_in">isExist</span>(abs, name);<br>    <span class="hljs-keyword">if</span> (ret != <span class="hljs-number">-1</span>)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Name &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ€§åˆ«ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Sex &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;å¹´é¾„ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Age &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ç”µè¯ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Phone &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ä½å€ï¼š&quot;</span> &lt;&lt; abs-&gt;personArray[ret].m_Addr &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æŸ¥æ— æ­¤äºº&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br><br>&#125;<br><br><span class="hljs-comment">//ä¿®æ”¹æŒ‡å®šè”ç³»äººä¿¡æ¯</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BusinessImplementation::modifyPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ‚¨è¦ä¿®æ”¹çš„è”ç³»äºº&quot;</span> &lt;&lt; endl;<br>    string name;<br>    cin &gt;&gt; name;<br><br>    <span class="hljs-type">int</span> ret = <span class="hljs-built_in">isExist</span>(abs, name);<br>    <span class="hljs-keyword">if</span> (ret != <span class="hljs-number">-1</span>)<br>    &#123;<br>        <span class="hljs-comment">//å§“å</span><br>        string name;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å§“åï¼š&quot;</span> &lt;&lt; endl;<br>        cin &gt;&gt; name;<br>        abs-&gt;personArray[ret].m_Name = name;<br><br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ€§åˆ«ï¼š&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;1 -- ç”·&quot;</span> &lt;&lt; endl;<br>        cout &lt;&lt; <span class="hljs-string">&quot;2 -- å¥³&quot;</span> &lt;&lt; endl;<br><br>        <span class="hljs-comment">//æ€§åˆ«</span><br>        <span class="hljs-type">int</span> sex = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>        &#123;<br>            cin &gt;&gt; sex;<br>            <span class="hljs-keyword">if</span> (sex == <span class="hljs-number">1</span> || sex == <span class="hljs-number">2</span>)<br>            &#123;<br>                abs-&gt;personArray[ret].m_Sex = sex;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            cout &lt;&lt; <span class="hljs-string">&quot;è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-comment">//å¹´é¾„</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å¹´é¾„ï¼š&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-type">int</span> age = <span class="hljs-number">0</span>;<br>        cin &gt;&gt; age;<br>        abs-&gt;personArray[ret].m_Age = age;<br><br>        <span class="hljs-comment">//è”ç³»ç”µè¯</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥è”ç³»ç”µè¯ï¼š&quot;</span> &lt;&lt; endl;<br>        string phone = <span class="hljs-string">&quot;&quot;</span>;<br>        cin &gt;&gt; phone;<br>        abs-&gt;personArray[ret].m_Phone = phone;<br><br>        <span class="hljs-comment">//å®¶åº­ä½å€</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å®¶åº­ä½å€ï¼š&quot;</span> &lt;&lt; endl;<br>        string address;<br>        cin &gt;&gt; address;<br>        abs-&gt;personArray[ret].m_Addr = address;<br><br>        cout &lt;&lt; <span class="hljs-string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æŸ¥æ— æ­¤äºº&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br><br>&#125;<br><br><span class="hljs-comment">//æ¸…ç©ºæ‰€æœ‰è”ç³»äºº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BusinessImplementation::cleanPerson</span><span class="hljs-params">(Addressbooks * abs)</span></span><br><span class="hljs-function"></span>&#123;<br>    abs-&gt;m_Size = <span class="hljs-number">0</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;é€šè®¯å½•å·²æ¸…ç©º&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><br><span class="hljs-comment">//å•ä¾‹ç±»</span><br><span class="hljs-function">BusinessImplementation* <span class="hljs-title">BusinessImplementation::GetBusinessImplementation</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">if</span>(!m_pBusinessImplementation)<br>    &#123;<br>        m_pBusinessImplementation = <span class="hljs-keyword">new</span> <span class="hljs-built_in">BusinessImplementation</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> m_pBusinessImplementation;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è‡³æ­¤ï¼Œé€šè®¯å½•ç®¡ç†ç³»ç»Ÿå®Œæˆï¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> C++é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> é€šè®¯å½• </tag>
            
            <tag> é¡¹ç›®ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°é‘«é™é‡å·¥å…·ä¸Šçº¿å•¦</title>
      <link href="/2022/04/24/%E5%B0%8F%E9%91%AB%E9%99%8D%E9%87%8D%E5%B7%A5%E5%85%B7%E4%B8%8A%E7%BA%BF%E5%95%A6/"/>
      <url>/2022/04/24/%E5%B0%8F%E9%91%AB%E9%99%8D%E9%87%8D%E5%B7%A5%E5%85%B7%E4%B8%8A%E7%BA%BF%E5%95%A6/</url>
      
        <content type="html"><![CDATA[<h1>å°é‘«é™é‡å·¥å…·1.0</h1><h2 id="æ•ˆæœå›¾">æ•ˆæœå›¾</h2><p><img src="/images/2022-4-24-1.png" alt="upload successful"></p><h2 id="è¯´æ˜">è¯´æ˜</h2><ol><li>è¯¥è½¯ä»¶éœ€è¦è”ç½‘</li><li>è¯¥è½¯ä»¶ç›®å‰åªèƒ½ä¸€å¥ä¸€å¥çš„é™é‡ï¼ˆåç»­æœ‰æ—¶é—´ç²¾åŠ›çš„è¯æˆ‘åœ¨ä¿®å¤è¿™ä¸ªbugï¼‰</li><li>åœ¨bugæ²¡ä¿®å¤ä¹‹å‰ï¼Œä½ å¯ä»¥æŠŠå¥å·æ”¹æˆé€—å·è¿›è¡Œå¤§èŒƒå›´é™é‡ï¼ˆpsï¼šå¤§ç¯‡å¹…é™é‡çš„ç²¾åº¦æœ‰å¾…æå‡ï¼‰</li></ol><h2 id="ä¸‹è½½åœ°å€">ä¸‹è½½åœ°å€</h2><p><a href="/download/%E5%B0%8F%E9%91%AB%E9%99%8D%E9%87%8D%E5%B7%A5%E5%85%B7.exe">ç‚¹æˆ‘ä¸‹è½½</a></p><h2 id="æ²¡å•¥è¦è®²çš„äº†ï¼Œç”¨çš„ä¸é”™å¯ä»¥æ‰“ä¸ªèµï¼Œè¯´ä¸å®šæˆ‘å°±æ›´æœ‰åŠ¨åŠ›å¼€å‘ä¸€äº›æ–°ç©æ„">æ²¡å•¥è¦è®²çš„äº†ï¼Œç”¨çš„ä¸é”™å¯ä»¥æ‰“ä¸ªèµï¼Œè¯´ä¸å®šæˆ‘å°±æ›´æœ‰åŠ¨åŠ›å¼€å‘ä¸€äº›æ–°ç©æ„</h2><p><img src="/images/2022-3-12-1.png" alt="å¾®ä¿¡æ‰“èµ"></p><p><img src="/images/2022-3-12-2.png" alt="æ”¯ä»˜å®æ‰“èµ"></p><h4 id="æ„Ÿè°¢æ‰“èµï¼ï¼">æ„Ÿè°¢æ‰“èµï¼ï¼</h4>]]></content>
      
      
      <categories>
          
          <category> å°é‘«ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦åˆ© </tag>
            
            <tag> å°é‘«è½¯ä»¶ </tag>
            
            <tag> é™é‡å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++åŸºç¡€å…¥é—¨è®²è§£</title>
      <link href="/2022/03/24/C-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E8%AE%B2%E8%A7%A3/"/>
      <url>/2022/03/24/C-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1>C++åŸºç¡€å…¥é—¨</h1><h2 id="1-C-åˆè¯†">1 C++åˆè¯†</h2><h3 id="1-1-ç¬¬ä¸€ä¸ªC-ç¨‹åº">1.1  ç¬¬ä¸€ä¸ªC++ç¨‹åº</h3><p>ç¼–å†™ä¸€ä¸ªC++ç¨‹åºæ€»å…±åˆ†ä¸º4ä¸ªæ­¥éª¤</p><ul><li>åˆ›å»ºé¡¹ç›®</li><li>åˆ›å»ºæ–‡ä»¶</li><li>ç¼–å†™ä»£ç </li><li>è¿è¡Œç¨‹åº</li></ul><h4 id="1-1-1-åˆ›å»ºé¡¹ç›®">1.1.1 åˆ›å»ºé¡¹ç›®</h4><p>â€‹Visual Studioæ˜¯æˆ‘ä»¬ç”¨æ¥ç¼–å†™C++ç¨‹åºçš„ä¸»è¦å·¥å…·ï¼Œæˆ‘ä»¬å…ˆå°†å®ƒæ‰“å¼€</p><p><img src="/assets/1541383178746.png" alt="1541383178746"></p><p><img src="/assets/1541384366413.png" alt="1541384366413"></p><h4 id="1-1-2-åˆ›å»ºæ–‡ä»¶">1.1.2 åˆ›å»ºæ–‡ä»¶</h4><p>å³é”®æºæ–‡ä»¶ï¼Œé€‰æ‹©æ·»åŠ -&gt;æ–°å»ºé¡¹</p><p><img src="/assets/1541383817248.png" alt="1541383817248"></p><p>ç»™C++æ–‡ä»¶èµ·ä¸ªåç§°ï¼Œç„¶åç‚¹å‡»æ·»åŠ å³å¯ã€‚</p><p><img src="/assets/1541384140042.png" alt="1541384140042"></p><h4 id="1-1-3-ç¼–å†™ä»£ç ">1.1.3 ç¼–å†™ä»£ç </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;Hello world&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="1-1-4-è¿è¡Œç¨‹åº">1.1.4 è¿è¡Œç¨‹åº</h4><p><img src="/assets/1541384818688.png" alt="1541384818688"></p><h3 id="1-2-æ³¨é‡Š">1.2 æ³¨é‡Š</h3><p><strong>ä½œç”¨</strong>ï¼šåœ¨ä»£ç ä¸­åŠ ä¸€äº›è¯´æ˜å’Œè§£é‡Šï¼Œæ–¹ä¾¿è‡ªå·±æˆ–å…¶ä»–ç¨‹åºå‘˜ç¨‹åºå‘˜é˜…è¯»ä»£ç </p><p><strong>ä¸¤ç§æ ¼å¼</strong></p><ol><li><strong>å•è¡Œæ³¨é‡Š</strong>ï¼š<code>// æè¿°ä¿¡æ¯</code><ul><li>é€šå¸¸æ”¾åœ¨ä¸€è¡Œä»£ç çš„ä¸Šæ–¹ï¼Œæˆ–è€…ä¸€æ¡è¯­å¥çš„æœ«å°¾ï¼Œ==å¯¹è¯¥è¡Œä»£ç è¯´æ˜==</li></ul></li><li><strong>å¤šè¡Œæ³¨é‡Š</strong>ï¼š <code>/* æè¿°ä¿¡æ¯ */</code><ul><li>é€šå¸¸æ”¾åœ¨ä¸€æ®µä»£ç çš„ä¸Šæ–¹ï¼Œ==å¯¹è¯¥æ®µä»£ç åšæ•´ä½“è¯´æ˜==</li></ul></li></ol><blockquote><p>æç¤ºï¼šç¼–è¯‘å™¨åœ¨ç¼–è¯‘ä»£ç æ—¶ï¼Œä¼šå¿½ç•¥æ³¨é‡Šçš„å†…å®¹</p></blockquote><h3 id="1-3-å˜é‡">1.3 å˜é‡</h3><p><strong>ä½œç”¨</strong>ï¼šç»™ä¸€æ®µæŒ‡å®šçš„å†…å­˜ç©ºé—´èµ·åï¼Œæ–¹ä¾¿æ“ä½œè¿™æ®µå†…å­˜</p><p><strong>è¯­æ³•</strong>ï¼š<code>æ•°æ®ç±»å‹ å˜é‡å = åˆå§‹å€¼;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//å˜é‡çš„å®šä¹‰</span><br><span class="hljs-comment">//è¯­æ³•ï¼šæ•°æ®ç±»å‹  å˜é‡å = åˆå§‹å€¼</span><br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šC++åœ¨åˆ›å»ºå˜é‡æ—¶ï¼Œå¿…é¡»ç»™å˜é‡ä¸€ä¸ªåˆå§‹å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p></blockquote><h3 id="1-4-å¸¸é‡">1.4  å¸¸é‡</h3><p><strong>ä½œç”¨</strong>ï¼šç”¨äºè®°å½•ç¨‹åºä¸­ä¸å¯æ›´æ”¹çš„æ•°æ®</p><p>C++å®šä¹‰å¸¸é‡ä¸¤ç§æ–¹å¼</p><ol><li><p><strong>#define</strong> å®å¸¸é‡ï¼š <code>#define å¸¸é‡å å¸¸é‡å€¼</code></p><ul><li>==é€šå¸¸åœ¨æ–‡ä»¶ä¸Šæ–¹å®šä¹‰==ï¼Œè¡¨ç¤ºä¸€ä¸ªå¸¸é‡</li></ul></li><li><p><strong>const</strong>ä¿®é¥°çš„å˜é‡ <code>const æ•°æ®ç±»å‹ å¸¸é‡å = å¸¸é‡å€¼</code></p><ul><li>==é€šå¸¸åœ¨å˜é‡å®šä¹‰å‰åŠ å…³é”®å­—const==ï¼Œä¿®é¥°è¯¥å˜é‡ä¸ºå¸¸é‡ï¼Œä¸å¯ä¿®æ”¹</li></ul></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//1ã€å®å¸¸é‡</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> day 7</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;ä¸€å‘¨é‡Œæ€»å…±æœ‰ &quot;</span> &lt;&lt; day &lt;&lt; <span class="hljs-string">&quot; å¤©&quot;</span> &lt;&lt; endl;<br><span class="hljs-comment">//day = 8;  //æŠ¥é”™ï¼Œå®å¸¸é‡ä¸å¯ä»¥ä¿®æ”¹</span><br><br><span class="hljs-comment">//2ã€constä¿®é¥°å˜é‡</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> month = <span class="hljs-number">12</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;ä¸€å¹´é‡Œæ€»å…±æœ‰ &quot;</span> &lt;&lt; month &lt;&lt; <span class="hljs-string">&quot; ä¸ªæœˆä»½&quot;</span> &lt;&lt; endl;<br><span class="hljs-comment">//month = 24; //æŠ¥é”™ï¼Œå¸¸é‡æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„</span><br><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="1-5-å…³é”®å­—">1.5 å…³é”®å­—</h3><p>**ä½œç”¨ï¼š**å…³é”®å­—æ˜¯C++ä¸­é¢„å…ˆä¿ç•™çš„å•è¯ï¼ˆæ ‡è¯†ç¬¦ï¼‰</p><ul><li><strong>åœ¨å®šä¹‰å˜é‡æˆ–è€…å¸¸é‡æ—¶å€™ï¼Œä¸è¦ç”¨å…³é”®å­—</strong></li></ul><p>C++å…³é”®å­—å¦‚ä¸‹ï¼š</p><table><thead><tr><th>asm</th><th>do</th><th>if</th><th>return</th><th>typedef</th></tr></thead><tbody><tr><td>auto</td><td>double</td><td>inline</td><td>short</td><td>typeid</td></tr><tr><td>bool</td><td>dynamic_cast</td><td>int</td><td>signed</td><td>typename</td></tr><tr><td>break</td><td>else</td><td>long</td><td>sizeof</td><td>union</td></tr><tr><td>case</td><td>enum</td><td>mutable</td><td>static</td><td>unsigned</td></tr><tr><td>catch</td><td>explicit</td><td>namespace</td><td>static_cast</td><td>using</td></tr><tr><td>char</td><td>export</td><td>new</td><td>struct</td><td>virtual</td></tr><tr><td>class</td><td>extern</td><td>operator</td><td>switch</td><td>void</td></tr><tr><td>const</td><td>false</td><td>private</td><td>template</td><td>volatile</td></tr><tr><td>const_cast</td><td>float</td><td>protected</td><td>this</td><td>wchar_t</td></tr><tr><td>continue</td><td>for</td><td>public</td><td>throw</td><td>while</td></tr><tr><td>default</td><td>friend</td><td>register</td><td>true</td><td></td></tr><tr><td>delete</td><td>goto</td><td>reinterpret_cast</td><td>try</td><td></td></tr></tbody></table><p><code>æç¤ºï¼šåœ¨ç»™å˜é‡æˆ–è€…å¸¸é‡èµ·åç§°æ—¶å€™ï¼Œä¸è¦ç”¨C++å¾—å…³é”®å­—ï¼Œå¦åˆ™ä¼šäº§ç”Ÿæ­§ä¹‰ã€‚</code></p><h3 id="1-6-æ ‡è¯†ç¬¦å‘½åè§„åˆ™">1.6 æ ‡è¯†ç¬¦å‘½åè§„åˆ™</h3><p><strong>ä½œç”¨</strong>ï¼šC++è§„å®šç»™æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å¸¸é‡ï¼‰å‘½åæ—¶ï¼Œæœ‰ä¸€å¥—è‡ªå·±çš„è§„åˆ™</p><ul><li>æ ‡è¯†ç¬¦ä¸èƒ½æ˜¯å…³é”®å­—</li><li>æ ‡è¯†ç¬¦åªèƒ½ç”±å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ç»„æˆ</li><li>ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»ä¸ºå­—æ¯æˆ–ä¸‹åˆ’çº¿</li><li>æ ‡è¯†ç¬¦ä¸­å­—æ¯åŒºåˆ†å¤§å°å†™</li></ul><blockquote><p>å»ºè®®ï¼šç»™æ ‡è¯†ç¬¦å‘½åæ—¶ï¼Œäº‰å–åšåˆ°è§åçŸ¥æ„çš„æ•ˆæœï¼Œæ–¹ä¾¿è‡ªå·±å’Œä»–äººçš„é˜…è¯»</p></blockquote><h2 id="2-æ•°æ®ç±»å‹">2 æ•°æ®ç±»å‹</h2><p>C++è§„å®šåœ¨åˆ›å»ºä¸€ä¸ªå˜é‡æˆ–è€…å¸¸é‡æ—¶ï¼Œå¿…é¡»è¦æŒ‡å®šå‡ºç›¸åº”çš„æ•°æ®ç±»å‹ï¼Œå¦åˆ™æ— æ³•ç»™å˜é‡åˆ†é…å†…å­˜</p><h3 id="2-1-æ•´å‹">2.1 æ•´å‹</h3><p><strong>ä½œç”¨</strong>ï¼šæ•´å‹å˜é‡è¡¨ç¤ºçš„æ˜¯==æ•´æ•°ç±»å‹==çš„æ•°æ®</p><p>C++ä¸­èƒ½å¤Ÿè¡¨ç¤ºæ•´å‹çš„ç±»å‹æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼Œ<strong>åŒºåˆ«åœ¨äºæ‰€å å†…å­˜ç©ºé—´ä¸åŒ</strong>ï¼š</p><table><thead><tr><th><strong>æ•°æ®ç±»å‹</strong></th><th><strong>å ç”¨ç©ºé—´</strong></th><th>å–å€¼èŒƒå›´</th></tr></thead><tbody><tr><td>short(çŸ­æ•´å‹)</td><td>2å­—èŠ‚</td><td>(-2^15 ~ 2^15-1)</td></tr><tr><td>int(æ•´å‹)</td><td>4å­—èŠ‚</td><td>(-2^31 ~ 2^31-1)</td></tr><tr><td>long(é•¿æ•´å½¢)</td><td>Windowsä¸º4å­—èŠ‚ï¼ŒLinuxä¸º4å­—èŠ‚(32ä½)ï¼Œ8å­—èŠ‚(64ä½)</td><td>(-2^31 ~ 2^31-1)</td></tr><tr><td>long long(é•¿é•¿æ•´å½¢)</td><td>8å­—èŠ‚</td><td>(-2^63 ~ 2^63-1)</td></tr></tbody></table><h3 id="2-2-sizeofå…³é”®å­—">2.2 sizeofå…³é”®å­—</h3><p>**ä½œç”¨ï¼š**åˆ©ç”¨sizeofå…³é”®å­—å¯ä»¥==ç»Ÿè®¡æ•°æ®ç±»å‹æ‰€å å†…å­˜å¤§å°==</p><p><strong>è¯­æ³•ï¼š</strong> <code>sizeof( æ•°æ®ç±»å‹ / å˜é‡)</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;short ç±»å‹æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">short</span>) &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;int ç±»å‹æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>) &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;long ç±»å‹æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">long</span>) &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;long long ç±»å‹æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">long</span> <span class="hljs-type">long</span>) &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><strong>æ•´å‹ç»“è®º</strong>ï¼š==short &lt; int &lt;= long &lt;= long long==</p></blockquote><h3 id="2-3-å®å‹ï¼ˆæµ®ç‚¹å‹ï¼‰">2.3 å®å‹ï¼ˆæµ®ç‚¹å‹ï¼‰</h3><p><strong>ä½œç”¨</strong>ï¼šç”¨äº==è¡¨ç¤ºå°æ•°==</p><p>æµ®ç‚¹å‹å˜é‡åˆ†ä¸ºä¸¤ç§ï¼š</p><ol><li>å•ç²¾åº¦float</li><li>åŒç²¾åº¦double</li></ol><p>ä¸¤è€…çš„<strong>åŒºåˆ«</strong>åœ¨äºè¡¨ç¤ºçš„æœ‰æ•ˆæ•°å­—èŒƒå›´ä¸åŒã€‚</p><table><thead><tr><th><strong>æ•°æ®ç±»å‹</strong></th><th><strong>å ç”¨ç©ºé—´</strong></th><th><strong>æœ‰æ•ˆæ•°å­—èŒƒå›´</strong></th></tr></thead><tbody><tr><td>float</td><td>4å­—èŠ‚</td><td>7ä½æœ‰æ•ˆæ•°å­—</td></tr><tr><td>double</td><td>8å­—èŠ‚</td><td>15ï½16ä½æœ‰æ•ˆæ•°å­—</td></tr></tbody></table><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">float</span> f1 = <span class="hljs-number">3.14f</span>;<br><span class="hljs-type">double</span> d1 = <span class="hljs-number">3.14</span>;<br><br>cout &lt;&lt; f1 &lt;&lt; endl;<br>cout &lt;&lt; d1&lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;float  sizeof = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(f1) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;double sizeof = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(d1) &lt;&lt; endl;<br><br><span class="hljs-comment">//ç§‘å­¦è®¡æ•°æ³•</span><br><span class="hljs-type">float</span> f2 = <span class="hljs-number">3e2</span>; <span class="hljs-comment">// 3 * 10 ^ 2 </span><br>cout &lt;&lt; <span class="hljs-string">&quot;f2 = &quot;</span> &lt;&lt; f2 &lt;&lt; endl;<br><br><span class="hljs-type">float</span> f3 = <span class="hljs-number">3e-2</span>;  <span class="hljs-comment">// 3 * 0.1 ^ 2</span><br>cout &lt;&lt; <span class="hljs-string">&quot;f3 = &quot;</span> &lt;&lt; f3 &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-4-å­—ç¬¦å‹">2.4 å­—ç¬¦å‹</h3><p>**ä½œç”¨ï¼š**å­—ç¬¦å‹å˜é‡ç”¨äºæ˜¾ç¤ºå•ä¸ªå­—ç¬¦</p><p><strong>è¯­æ³•ï¼š</strong><code>char ch = 'a';</code></p><blockquote><p>æ³¨æ„1ï¼šåœ¨æ˜¾ç¤ºå­—ç¬¦å‹å˜é‡æ—¶ï¼Œç”¨å•å¼•å·å°†å­—ç¬¦æ‹¬èµ·æ¥ï¼Œä¸è¦ç”¨åŒå¼•å·</p></blockquote><blockquote><p>æ³¨æ„2ï¼šå•å¼•å·å†…åªèƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä¸å¯ä»¥æ˜¯å­—ç¬¦ä¸²</p></blockquote><ul><li>Cå’ŒC++ä¸­å­—ç¬¦å‹å˜é‡åªå ç”¨==1ä¸ªå­—èŠ‚==ã€‚</li><li>å­—ç¬¦å‹å˜é‡å¹¶ä¸æ˜¯æŠŠå­—ç¬¦æœ¬èº«æ”¾åˆ°å†…å­˜ä¸­å­˜å‚¨ï¼Œè€Œæ˜¯å°†å¯¹åº”çš„ASCIIç¼–ç æ”¾å…¥åˆ°å­˜å‚¨å•å…ƒ</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">char</span> ch = <span class="hljs-string">&#x27;a&#x27;</span>;<br>cout &lt;&lt; ch &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">char</span>) &lt;&lt; endl;<br><br><span class="hljs-comment">//ch = &quot;abcde&quot;; //é”™è¯¯ï¼Œä¸å¯ä»¥ç”¨åŒå¼•å·</span><br><span class="hljs-comment">//ch = &#x27;abcde&#x27;; //é”™è¯¯ï¼Œå•å¼•å·å†…åªèƒ½å¼•ç”¨ä¸€ä¸ªå­—ç¬¦</span><br><br>cout &lt;&lt; (<span class="hljs-type">int</span>)ch &lt;&lt; endl;  <span class="hljs-comment">//æŸ¥çœ‹å­—ç¬¦aå¯¹åº”çš„ASCIIç </span><br>ch = <span class="hljs-number">97</span>; <span class="hljs-comment">//å¯ä»¥ç›´æ¥ç”¨ASCIIç»™å­—ç¬¦å‹å˜é‡èµ‹å€¼</span><br>cout &lt;&lt; ch &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ASCIIç è¡¨æ ¼ï¼š</p><table><thead><tr><th><strong>ASCII</strong>å€¼</th><th><strong>æ§åˆ¶å­—ç¬¦</strong></th><th><strong>ASCII</strong>å€¼</th><th><strong>å­—ç¬¦</strong></th><th><strong>ASCII</strong>å€¼</th><th><strong>å­—ç¬¦</strong></th><th><strong>ASCII</strong>å€¼</th><th><strong>å­—ç¬¦</strong></th></tr></thead><tbody><tr><td>0</td><td>NUT</td><td>32</td><td>(space)</td><td>64</td><td>@</td><td>96</td><td>ã€</td></tr><tr><td>1</td><td>SOH</td><td>33</td><td>!</td><td>65</td><td>A</td><td>97</td><td>a</td></tr><tr><td>2</td><td>STX</td><td>34</td><td>&quot;</td><td>66</td><td>B</td><td>98</td><td>b</td></tr><tr><td>3</td><td>ETX</td><td>35</td><td>#</td><td>67</td><td>C</td><td>99</td><td>c</td></tr><tr><td>4</td><td>EOT</td><td>36</td><td>$</td><td>68</td><td>D</td><td>100</td><td>d</td></tr><tr><td>5</td><td>ENQ</td><td>37</td><td>%</td><td>69</td><td>E</td><td>101</td><td>e</td></tr><tr><td>6</td><td>ACK</td><td>38</td><td>&amp;</td><td>70</td><td>F</td><td>102</td><td>f</td></tr><tr><td>7</td><td>BEL</td><td>39</td><td>,</td><td>71</td><td>G</td><td>103</td><td>g</td></tr><tr><td>8</td><td>BS</td><td>40</td><td>(</td><td>72</td><td>H</td><td>104</td><td>h</td></tr><tr><td>9</td><td>HT</td><td>41</td><td>)</td><td>73</td><td>I</td><td>105</td><td>i</td></tr><tr><td>10</td><td>LF</td><td>42</td><td>*</td><td>74</td><td>J</td><td>106</td><td>j</td></tr><tr><td>11</td><td>VT</td><td>43</td><td>+</td><td>75</td><td>K</td><td>107</td><td>k</td></tr><tr><td>12</td><td>FF</td><td>44</td><td>,</td><td>76</td><td>L</td><td>108</td><td>l</td></tr><tr><td>13</td><td>CR</td><td>45</td><td>-</td><td>77</td><td>M</td><td>109</td><td>m</td></tr><tr><td>14</td><td>SO</td><td>46</td><td>.</td><td>78</td><td>N</td><td>110</td><td>n</td></tr><tr><td>15</td><td>SI</td><td>47</td><td>/</td><td>79</td><td>O</td><td>111</td><td>o</td></tr><tr><td>16</td><td>DLE</td><td>48</td><td>0</td><td>80</td><td>P</td><td>112</td><td>p</td></tr><tr><td>17</td><td>DCI</td><td>49</td><td>1</td><td>81</td><td>Q</td><td>113</td><td>q</td></tr><tr><td>18</td><td>DC2</td><td>50</td><td>2</td><td>82</td><td>R</td><td>114</td><td>r</td></tr><tr><td>19</td><td>DC3</td><td>51</td><td>3</td><td>83</td><td>S</td><td>115</td><td>s</td></tr><tr><td>20</td><td>DC4</td><td>52</td><td>4</td><td>84</td><td>T</td><td>116</td><td>t</td></tr><tr><td>21</td><td>NAK</td><td>53</td><td>5</td><td>85</td><td>U</td><td>117</td><td>u</td></tr><tr><td>22</td><td>SYN</td><td>54</td><td>6</td><td>86</td><td>V</td><td>118</td><td>v</td></tr><tr><td>23</td><td>TB</td><td>55</td><td>7</td><td>87</td><td>W</td><td>119</td><td>w</td></tr><tr><td>24</td><td>CAN</td><td>56</td><td>8</td><td>88</td><td>X</td><td>120</td><td>x</td></tr><tr><td>25</td><td>EM</td><td>57</td><td>9</td><td>89</td><td>Y</td><td>121</td><td>y</td></tr><tr><td>26</td><td>SUB</td><td>58</td><td>:</td><td>90</td><td>Z</td><td>122</td><td>z</td></tr><tr><td>27</td><td>ESC</td><td>59</td><td>;</td><td>91</td><td>[</td><td>123</td><td>{</td></tr><tr><td>28</td><td>FS</td><td>60</td><td>&lt;</td><td>92</td><td>/</td><td>124</td><td>|</td></tr><tr><td>29</td><td>GS</td><td>61</td><td>=</td><td>93</td><td>]</td><td>125</td><td>}</td></tr><tr><td>30</td><td>RS</td><td>62</td><td>&gt;</td><td>94</td><td>^</td><td>126</td><td>`</td></tr><tr><td>31</td><td>US</td><td>63</td><td>?</td><td>95</td><td>_</td><td>127</td><td>DEL</td></tr></tbody></table><p>ASCII ç å¤§è‡´ç”±ä»¥ä¸‹<strong>ä¸¤éƒ¨åˆ†ç»„</strong>æˆï¼š</p><ul><li>ASCII éæ‰“å°æ§åˆ¶å­—ç¬¦ï¼š ASCII è¡¨ä¸Šçš„æ•°å­— <strong>0-31</strong> åˆ†é…ç»™äº†æ§åˆ¶å­—ç¬¦ï¼Œç”¨äºæ§åˆ¶åƒæ‰“å°æœºç­‰ä¸€äº›å¤–å›´è®¾å¤‡ã€‚</li><li>ASCII æ‰“å°å­—ç¬¦ï¼šæ•°å­— <strong>32-126</strong> åˆ†é…ç»™äº†èƒ½åœ¨é”®ç›˜ä¸Šæ‰¾åˆ°çš„å­—ç¬¦ï¼Œå½“æŸ¥çœ‹æˆ–æ‰“å°æ–‡æ¡£æ—¶å°±ä¼šå‡ºç°ã€‚</li></ul><h3 id="2-5-è½¬ä¹‰å­—ç¬¦">2.5 è½¬ä¹‰å­—ç¬¦</h3><p>**ä½œç”¨ï¼š**ç”¨äºè¡¨ç¤ºä¸€äº›==ä¸èƒ½æ˜¾ç¤ºå‡ºæ¥çš„ASCIIå­—ç¬¦==</p><p>ç°é˜¶æ®µæˆ‘ä»¬å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦æœ‰ï¼š<code> \n  \\  \t</code></p><table><thead><tr><th><strong>è½¬ä¹‰å­—ç¬¦</strong></th><th><strong>å«ä¹‰</strong></th><th><strong>ASCII</strong>ç å€¼ï¼ˆåè¿›åˆ¶ï¼‰</th></tr></thead><tbody><tr><td>\a</td><td>è­¦æŠ¥</td><td>007</td></tr><tr><td>\b</td><td>é€€æ ¼(BS) ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°å‰ä¸€åˆ—</td><td>008</td></tr><tr><td>\f</td><td>æ¢é¡µ(FF)ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°ä¸‹é¡µå¼€å¤´</td><td>012</td></tr><tr><td><strong>\n</strong></td><td><strong>æ¢è¡Œ(LF) ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°ä¸‹ä¸€è¡Œå¼€å¤´</strong></td><td><strong>010</strong></td></tr><tr><td>\r</td><td>å›è½¦(CR) ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°æœ¬è¡Œå¼€å¤´</td><td>013</td></tr><tr><td><strong>\t</strong></td><td><strong>æ°´å¹³åˆ¶è¡¨(HT)  ï¼ˆè·³åˆ°ä¸‹ä¸€ä¸ªTABä½ç½®ï¼‰</strong></td><td><strong>009</strong></td></tr><tr><td>\v</td><td>å‚ç›´åˆ¶è¡¨(VT)</td><td>011</td></tr><tr><td><strong>\\</strong></td><td><strong>ä»£è¡¨ä¸€ä¸ªåæ–œçº¿å­—ç¬¦&quot;&quot;</strong></td><td><strong>092</strong></td></tr><tr><td>'</td><td>ä»£è¡¨ä¸€ä¸ªå•å¼•å·ï¼ˆæ’‡å·ï¼‰å­—ç¬¦</td><td>039</td></tr><tr><td>&quot;</td><td>ä»£è¡¨ä¸€ä¸ªåŒå¼•å·å­—ç¬¦</td><td>034</td></tr><tr><td>?</td><td>ä»£è¡¨ä¸€ä¸ªé—®å·</td><td>063</td></tr><tr><td>\0</td><td>æ•°å­—0</td><td>000</td></tr><tr><td>\ddd</td><td>8è¿›åˆ¶è½¬ä¹‰å­—ç¬¦ï¼ŒdèŒƒå›´0~7</td><td>3ä½8è¿›åˆ¶</td></tr><tr><td>\xhh</td><td>16è¿›åˆ¶è½¬ä¹‰å­—ç¬¦ï¼ŒhèŒƒå›´0~9ï¼Œa~fï¼ŒA~F</td><td>3ä½16è¿›åˆ¶</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><br>cout &lt;&lt; <span class="hljs-string">&quot;\\&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;\tHello&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-6-å­—ç¬¦ä¸²å‹">2.6 å­—ç¬¦ä¸²å‹</h3><p><strong>ä½œç”¨</strong>ï¼šç”¨äºè¡¨ç¤ºä¸€ä¸²å­—ç¬¦</p><p><strong>ä¸¤ç§é£æ ¼</strong></p><ol><li><p><strong>Cé£æ ¼å­—ç¬¦ä¸²</strong>ï¼š <code>char å˜é‡å[] = &quot;å­—ç¬¦ä¸²å€¼&quot;</code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">char</span> str1[] = <span class="hljs-string">&quot;hello world&quot;</span>;<br>cout &lt;&lt; str1 &lt;&lt; endl;<br>    <br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>æ³¨æ„ï¼šCé£æ ¼çš„å­—ç¬¦ä¸²è¦ç”¨åŒå¼•å·æ‹¬èµ·æ¥</p></blockquote><ol><li><p><strong>C++é£æ ¼å­—ç¬¦ä¸²</strong>ï¼š  <code>string  å˜é‡å = &quot;å­—ç¬¦ä¸²å€¼&quot;</code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>string str = <span class="hljs-string">&quot;hello world&quot;</span>;<br>cout &lt;&lt; str &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>æ³¨æ„ï¼šC++é£æ ¼å­—ç¬¦ä¸²ï¼Œéœ€è¦åŠ å…¥å¤´æ–‡ä»¶==#include&lt;string&gt;==</p></blockquote><h3 id="2-7-å¸ƒå°”ç±»å‹-bool">2.7 å¸ƒå°”ç±»å‹ bool</h3><p>**ä½œç”¨ï¼š**å¸ƒå°”æ•°æ®ç±»å‹ä»£è¡¨çœŸæˆ–å‡çš„å€¼</p><p>boolç±»å‹åªæœ‰ä¸¤ä¸ªå€¼ï¼š</p><ul><li>true  â€” çœŸï¼ˆæœ¬è´¨æ˜¯1ï¼‰</li><li>false â€” å‡ï¼ˆæœ¬è´¨æ˜¯0ï¼‰</li></ul><p><strong>boolç±»å‹å ==1ä¸ªå­—èŠ‚==å¤§å°</strong></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">bool</span> flag = <span class="hljs-literal">true</span>;<br>cout &lt;&lt; flag &lt;&lt; endl; <span class="hljs-comment">// 1</span><br><br>flag = <span class="hljs-literal">false</span>;<br>cout &lt;&lt; flag &lt;&lt; endl; <span class="hljs-comment">// 0</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;size of bool = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">bool</span>) &lt;&lt; endl; <span class="hljs-comment">//1</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-8-æ•°æ®çš„è¾“å…¥">2.8 æ•°æ®çš„è¾“å…¥</h3><p><strong>ä½œç”¨ï¼šç”¨äºä»é”®ç›˜è·å–æ•°æ®</strong></p><p>**å…³é”®å­—ï¼š**cin</p><p><strong>è¯­æ³•ï¼š</strong> <code>cin &gt;&gt; å˜é‡ </code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><br><span class="hljs-comment">//æ•´å‹è¾“å…¥</span><br><span class="hljs-type">int</span> a = <span class="hljs-number">0</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æ•´å‹å˜é‡ï¼š&quot;</span> &lt;&lt; endl;<br>cin &gt;&gt; a;<br>cout &lt;&lt; a &lt;&lt; endl;<br><br><span class="hljs-comment">//æµ®ç‚¹å‹è¾“å…¥</span><br><span class="hljs-type">double</span> d = <span class="hljs-number">0</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥æµ®ç‚¹å‹å˜é‡ï¼š&quot;</span> &lt;&lt; endl;<br>cin &gt;&gt; d;<br>cout &lt;&lt; d &lt;&lt; endl;<br><br><span class="hljs-comment">//å­—ç¬¦å‹è¾“å…¥</span><br><span class="hljs-type">char</span> ch = <span class="hljs-number">0</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å­—ç¬¦å‹å˜é‡ï¼š&quot;</span> &lt;&lt; endl;<br>cin &gt;&gt; ch;<br>cout &lt;&lt; ch &lt;&lt; endl;<br><br><span class="hljs-comment">//å­—ç¬¦ä¸²å‹è¾“å…¥</span><br>string str;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å­—ç¬¦ä¸²å‹å˜é‡ï¼š&quot;</span> &lt;&lt; endl;<br>cin &gt;&gt; str;<br>cout &lt;&lt; str &lt;&lt; endl;<br><br><span class="hljs-comment">//å¸ƒå°”ç±»å‹è¾“å…¥</span><br><span class="hljs-type">bool</span> flag = <span class="hljs-literal">true</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥å¸ƒå°”å‹å˜é‡ï¼š&quot;</span> &lt;&lt; endl;<br>cin &gt;&gt; flag;<br>cout &lt;&lt; flag &lt;&lt; endl;<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> EXIT_SUCCESS;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-è¿ç®—ç¬¦">3 è¿ç®—ç¬¦</h2><p>**ä½œç”¨ï¼š**ç”¨äºæ‰§è¡Œä»£ç çš„è¿ç®—</p><p>æœ¬ç« æˆ‘ä»¬ä¸»è¦è®²è§£ä»¥ä¸‹å‡ ç±»è¿ç®—ç¬¦ï¼š</p><table><thead><tr><th><strong>è¿ç®—ç¬¦ç±»å‹</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td>ç®—æœ¯è¿ç®—ç¬¦</td><td>ç”¨äºå¤„ç†å››åˆ™è¿ç®—</td></tr><tr><td>èµ‹å€¼è¿ç®—ç¬¦</td><td>ç”¨äºå°†è¡¨è¾¾å¼çš„å€¼èµ‹ç»™å˜é‡</td></tr><tr><td>æ¯”è¾ƒè¿ç®—ç¬¦</td><td>ç”¨äºè¡¨è¾¾å¼çš„æ¯”è¾ƒï¼Œå¹¶è¿”å›ä¸€ä¸ªçœŸå€¼æˆ–å‡å€¼</td></tr><tr><td>é€»è¾‘è¿ç®—ç¬¦</td><td>ç”¨äºæ ¹æ®è¡¨è¾¾å¼çš„å€¼è¿”å›çœŸå€¼æˆ–å‡å€¼</td></tr></tbody></table><h3 id="3-1-ç®—æœ¯è¿ç®—ç¬¦">3.1 ç®—æœ¯è¿ç®—ç¬¦</h3><p><strong>ä½œç”¨</strong>ï¼šç”¨äºå¤„ç†å››åˆ™è¿ç®—</p><p>ç®—æœ¯è¿ç®—ç¬¦åŒ…æ‹¬ä»¥ä¸‹ç¬¦å·ï¼š</p><table><thead><tr><th><strong>è¿ç®—ç¬¦</strong></th><th><strong>æœ¯è¯­</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>ç»“æœ</strong></th></tr></thead><tbody><tr><td>+</td><td>æ­£å·</td><td>+3</td><td>3</td></tr><tr><td>-</td><td>è´Ÿå·</td><td>-3</td><td>-3</td></tr><tr><td>+</td><td>åŠ </td><td>10 + 5</td><td>15</td></tr><tr><td>-</td><td>å‡</td><td>10 - 5</td><td>5</td></tr><tr><td>*</td><td>ä¹˜</td><td>10 * 5</td><td>50</td></tr><tr><td>/</td><td>é™¤</td><td>10 / 5</td><td>2</td></tr><tr><td>%</td><td>å–æ¨¡(å–ä½™)</td><td>10 % 3</td><td>1</td></tr><tr><td>++</td><td>å‰ç½®é€’å¢</td><td>a=2; b=++a;</td><td>a=3; b=3;</td></tr><tr><td>++</td><td>åç½®é€’å¢</td><td>a=2; b=a++;</td><td>a=3; b=2;</td></tr><tr><td>â€“</td><td>å‰ç½®é€’å‡</td><td>a=2; b=â€“a;</td><td>a=1; b=1;</td></tr><tr><td>â€“</td><td>åç½®é€’å‡</td><td>a=2; b=aâ€“;</td><td>a=1; b=2;</td></tr></tbody></table><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//åŠ å‡ä¹˜é™¤</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a1 = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b1 = <span class="hljs-number">3</span>;<br><br>cout &lt;&lt; a1 + b1 &lt;&lt; endl;<br>cout &lt;&lt; a1 - b1 &lt;&lt; endl;<br>cout &lt;&lt; a1 * b1 &lt;&lt; endl;<br>cout &lt;&lt; a1 / b1 &lt;&lt; endl;  <span class="hljs-comment">//ä¸¤ä¸ªæ•´æ•°ç›¸é™¤ç»“æœä¾ç„¶æ˜¯æ•´æ•°</span><br><br><span class="hljs-type">int</span> a2 = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b2 = <span class="hljs-number">20</span>;<br>cout &lt;&lt; a2 / b2 &lt;&lt; endl; <br><br><span class="hljs-type">int</span> a3 = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b3 = <span class="hljs-number">0</span>;<br><span class="hljs-comment">//cout &lt;&lt; a3 / b3 &lt;&lt; endl; //æŠ¥é”™ï¼Œé™¤æ•°ä¸å¯ä»¥ä¸º0</span><br><br><br><span class="hljs-comment">//ä¸¤ä¸ªå°æ•°å¯ä»¥ç›¸é™¤</span><br><span class="hljs-type">double</span> d1 = <span class="hljs-number">0.5</span>;<br><span class="hljs-type">double</span> d2 = <span class="hljs-number">0.25</span>;<br>cout &lt;&lt; d1 / d2 &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šåœ¨é™¤æ³•è¿ç®—ä¸­ï¼Œé™¤æ•°ä¸èƒ½ä¸º0</p></blockquote><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å–æ¨¡</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a1 = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b1 = <span class="hljs-number">3</span>;<br><br>cout &lt;&lt; <span class="hljs-number">10</span> % <span class="hljs-number">3</span> &lt;&lt; endl;<br><br><span class="hljs-type">int</span> a2 = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b2 = <span class="hljs-number">20</span>;<br><br>cout &lt;&lt; a2 % b2 &lt;&lt; endl;<br><br><span class="hljs-type">int</span> a3 = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b3 = <span class="hljs-number">0</span>;<br><br><span class="hljs-comment">//cout &lt;&lt; a3 % b3 &lt;&lt; endl; //å–æ¨¡è¿ç®—æ—¶ï¼Œé™¤æ•°ä¹Ÿä¸èƒ½ä¸º0</span><br><br><span class="hljs-comment">//ä¸¤ä¸ªå°æ•°ä¸å¯ä»¥å–æ¨¡</span><br><span class="hljs-type">double</span> d1 = <span class="hljs-number">3.14</span>;<br><span class="hljs-type">double</span> d2 = <span class="hljs-number">1.1</span>;<br><br><span class="hljs-comment">//cout &lt;&lt; d1 % d2 &lt;&lt; endl;</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šåªæœ‰æ•´å‹å˜é‡å¯ä»¥è¿›è¡Œå–æ¨¡è¿ç®—</p></blockquote><p><strong>ç¤ºä¾‹3ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//é€’å¢</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//åç½®é€’å¢</span><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br>a++; <span class="hljs-comment">//ç­‰ä»·äºa = a + 1</span><br>cout &lt;&lt; a &lt;&lt; endl; <span class="hljs-comment">// 11</span><br><br><span class="hljs-comment">//å‰ç½®é€’å¢</span><br><span class="hljs-type">int</span> b = <span class="hljs-number">10</span>;<br>++b;<br>cout &lt;&lt; b &lt;&lt; endl; <span class="hljs-comment">// 11</span><br><br><span class="hljs-comment">//åŒºåˆ«</span><br><span class="hljs-comment">//å‰ç½®é€’å¢å…ˆå¯¹å˜é‡è¿›è¡Œ++ï¼Œå†è®¡ç®—è¡¨è¾¾å¼</span><br><span class="hljs-type">int</span> a2 = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b2 = ++a2 * <span class="hljs-number">10</span>;<br>cout &lt;&lt; b2 &lt;&lt; endl;<br><br><span class="hljs-comment">//åç½®é€’å¢å…ˆè®¡ç®—è¡¨è¾¾å¼ï¼Œåå¯¹å˜é‡è¿›è¡Œ++</span><br><span class="hljs-type">int</span> a3 = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b3 = a3++ * <span class="hljs-number">10</span>;<br>cout &lt;&lt; b3 &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå‰ç½®é€’å¢å…ˆå¯¹å˜é‡è¿›è¡Œ++ï¼Œå†è®¡ç®—è¡¨è¾¾å¼ï¼Œåç½®é€’å¢ç›¸å</p></blockquote><h3 id="3-2-èµ‹å€¼è¿ç®—ç¬¦">3.2 èµ‹å€¼è¿ç®—ç¬¦</h3><p>**ä½œç”¨ï¼š**ç”¨äºå°†è¡¨è¾¾å¼çš„å€¼èµ‹ç»™å˜é‡</p><p>èµ‹å€¼è¿ç®—ç¬¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªç¬¦å·ï¼š</p><table><thead><tr><th><strong>è¿ç®—ç¬¦</strong></th><th><strong>æœ¯è¯­</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>ç»“æœ</strong></th></tr></thead><tbody><tr><td>=</td><td>èµ‹å€¼</td><td>a=2; b=3;</td><td>a=2; b=3;</td></tr><tr><td>+=</td><td>åŠ ç­‰äº</td><td>a=0; a+=2;</td><td>a=2;</td></tr><tr><td>-=</td><td>å‡ç­‰äº</td><td>a=5; a-=3;</td><td>a=2;</td></tr><tr><td>*=</td><td>ä¹˜ç­‰äº</td><td>a=2; a*=2;</td><td>a=4;</td></tr><tr><td>/=</td><td>é™¤ç­‰äº</td><td>a=4; a/=2;</td><td>a=2;</td></tr><tr><td>%=</td><td>æ¨¡ç­‰äº</td><td>a=3; a%2;</td><td>a=1;</td></tr></tbody></table><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//èµ‹å€¼è¿ç®—ç¬¦</span><br><br><span class="hljs-comment">// =</span><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br>a = <span class="hljs-number">100</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br><br><span class="hljs-comment">// +=</span><br>a = <span class="hljs-number">10</span>;<br>a += <span class="hljs-number">2</span>; <span class="hljs-comment">// a = a + 2;</span><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br><br><span class="hljs-comment">// -=</span><br>a = <span class="hljs-number">10</span>;<br>a -= <span class="hljs-number">2</span>; <span class="hljs-comment">// a = a - 2</span><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br><br><span class="hljs-comment">// *=</span><br>a = <span class="hljs-number">10</span>;<br>a *= <span class="hljs-number">2</span>; <span class="hljs-comment">// a = a * 2</span><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br><br><span class="hljs-comment">// /=</span><br>a = <span class="hljs-number">10</span>;<br>a /= <span class="hljs-number">2</span>;  <span class="hljs-comment">// a = a / 2;</span><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br><br><span class="hljs-comment">// %=</span><br>a = <span class="hljs-number">10</span>;<br>a %= <span class="hljs-number">2</span>;  <span class="hljs-comment">// a = a % 2;</span><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-3-æ¯”è¾ƒè¿ç®—ç¬¦">3.3 æ¯”è¾ƒè¿ç®—ç¬¦</h3><p>**ä½œç”¨ï¼š**ç”¨äºè¡¨è¾¾å¼çš„æ¯”è¾ƒï¼Œå¹¶è¿”å›ä¸€ä¸ªçœŸå€¼æˆ–å‡å€¼</p><p>æ¯”è¾ƒè¿ç®—ç¬¦æœ‰ä»¥ä¸‹ç¬¦å·ï¼š</p><table><thead><tr><th><strong>è¿ç®—ç¬¦</strong></th><th><strong>æœ¯è¯­</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>ç»“æœ</strong></th></tr></thead><tbody><tr><td>==</td><td>ç›¸ç­‰äº</td><td>4 == 3</td><td>0</td></tr><tr><td>!=</td><td>ä¸ç­‰äº</td><td>4 != 3</td><td>1</td></tr><tr><td>&lt;</td><td>å°äº</td><td>4 &lt; 3</td><td>0</td></tr><tr><td>&gt;</td><td>å¤§äº</td><td>4 &gt; 3</td><td>1</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td><td>4 &lt;= 3</td><td>0</td></tr><tr><td>&gt;=</td><td>å¤§äºç­‰äº</td><td>4 &gt;= 1</td><td>1</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><br>cout &lt;&lt; (a == b) &lt;&lt; endl; <span class="hljs-comment">// 0 </span><br><br>cout &lt;&lt; (a != b) &lt;&lt; endl; <span class="hljs-comment">// 1</span><br><br>cout &lt;&lt; (a &gt; b) &lt;&lt; endl; <span class="hljs-comment">// 0</span><br><br>cout &lt;&lt; (a &lt; b) &lt;&lt; endl; <span class="hljs-comment">// 1</span><br><br>cout &lt;&lt; (a &gt;= b) &lt;&lt; endl; <span class="hljs-comment">// 0</span><br><br>cout &lt;&lt; (a &lt;= b) &lt;&lt; endl; <span class="hljs-comment">// 1</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šCå’ŒC++ è¯­è¨€çš„æ¯”è¾ƒè¿ç®—ä¸­ï¼Œ ==â€œçœŸâ€ç”¨æ•°å­—â€œ1â€æ¥è¡¨ç¤ºï¼Œ â€œå‡â€ç”¨æ•°å­—â€œ0â€æ¥è¡¨ç¤ºã€‚==</p></blockquote><h3 id="3-4-é€»è¾‘è¿ç®—ç¬¦">3.4 é€»è¾‘è¿ç®—ç¬¦</h3><p>**ä½œç”¨ï¼š**ç”¨äºæ ¹æ®è¡¨è¾¾å¼çš„å€¼è¿”å›çœŸå€¼æˆ–å‡å€¼</p><p>é€»è¾‘è¿ç®—ç¬¦æœ‰ä»¥ä¸‹ç¬¦å·ï¼š</p><table><thead><tr><th><strong>è¿ç®—ç¬¦</strong></th><th><strong>æœ¯è¯­</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>ç»“æœ</strong></th></tr></thead><tbody><tr><td>!</td><td>é</td><td>!a</td><td>å¦‚æœaä¸ºå‡ï¼Œåˆ™!aä¸ºçœŸï¼›  å¦‚æœaä¸ºçœŸï¼Œåˆ™!aä¸ºå‡ã€‚</td></tr><tr><td>&amp;&amp;</td><td>ä¸</td><td>a &amp;&amp; b</td><td>å¦‚æœaå’Œbéƒ½ä¸ºçœŸï¼Œåˆ™ç»“æœä¸ºçœŸï¼Œå¦åˆ™ä¸ºå‡ã€‚</td></tr><tr><td>||</td><td>æˆ–</td><td>a || b</td><td>å¦‚æœaå’Œbæœ‰ä¸€ä¸ªä¸ºçœŸï¼Œåˆ™ç»“æœä¸ºçœŸï¼ŒäºŒè€…éƒ½ä¸ºå‡æ—¶ï¼Œç»“æœä¸ºå‡ã€‚</td></tr></tbody></table><p>**ç¤ºä¾‹1ï¼š**é€»è¾‘é</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//é€»è¾‘è¿ç®—ç¬¦  --- é</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><br>cout &lt;&lt; !a &lt;&lt; endl; <span class="hljs-comment">// 0</span><br><br>cout &lt;&lt; !!a &lt;&lt; endl; <span class="hljs-comment">// 1</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š çœŸå˜å‡ï¼Œå‡å˜çœŸ</p></blockquote><p>**ç¤ºä¾‹2ï¼š**é€»è¾‘ä¸</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//é€»è¾‘è¿ç®—ç¬¦  --- ä¸</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">10</span>;<br><br>cout &lt;&lt; (a &amp;&amp; b) &lt;&lt; endl;<span class="hljs-comment">// 1</span><br><br>a = <span class="hljs-number">10</span>;<br>b = <span class="hljs-number">0</span>;<br><br>cout &lt;&lt; (a &amp;&amp; b) &lt;&lt; endl;<span class="hljs-comment">// 0 </span><br><br>a = <span class="hljs-number">0</span>;<br>b = <span class="hljs-number">0</span>;<br><br>cout &lt;&lt; (a &amp;&amp; b) &lt;&lt; endl;<span class="hljs-comment">// 0</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šé€»è¾‘==ä¸==è¿ç®—ç¬¦æ€»ç»“ï¼š ==åŒçœŸä¸ºçœŸï¼Œå…¶ä½™ä¸ºå‡==</p></blockquote><p>**ç¤ºä¾‹3ï¼š**é€»è¾‘æˆ–</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//é€»è¾‘è¿ç®—ç¬¦  --- æˆ–</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">10</span>;<br><br>cout &lt;&lt; (a || b) &lt;&lt; endl;<span class="hljs-comment">// 1</span><br><br>a = <span class="hljs-number">10</span>;<br>b = <span class="hljs-number">0</span>;<br><br>cout &lt;&lt; (a || b) &lt;&lt; endl;<span class="hljs-comment">// 1 </span><br><br>a = <span class="hljs-number">0</span>;<br>b = <span class="hljs-number">0</span>;<br><br>cout &lt;&lt; (a || b) &lt;&lt; endl;<span class="hljs-comment">// 0</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>é€»è¾‘==æˆ–==è¿ç®—ç¬¦æ€»ç»“ï¼š ==åŒå‡ä¸ºå‡ï¼Œå…¶ä½™ä¸ºçœŸ==</p></blockquote><h2 id="4-ç¨‹åºæµç¨‹ç»“æ„">4 ç¨‹åºæµç¨‹ç»“æ„</h2><p>C/C++æ”¯æŒæœ€åŸºæœ¬çš„ä¸‰ç§ç¨‹åºè¿è¡Œç»“æ„ï¼š==é¡ºåºç»“æ„ã€é€‰æ‹©ç»“æ„ã€å¾ªç¯ç»“æ„==</p><ul><li>é¡ºåºç»“æ„ï¼šç¨‹åºæŒ‰é¡ºåºæ‰§è¡Œï¼Œä¸å‘ç”Ÿè·³è½¬</li><li>é€‰æ‹©ç»“æ„ï¼šä¾æ®æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œæœ‰é€‰æ‹©çš„æ‰§è¡Œç›¸åº”åŠŸèƒ½</li><li>å¾ªç¯ç»“æ„ï¼šä¾æ®æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œå¾ªç¯å¤šæ¬¡æ‰§è¡ŒæŸæ®µä»£ç </li></ul><h3 id="4-1-é€‰æ‹©ç»“æ„">4.1 é€‰æ‹©ç»“æ„</h3><h4 id="4-1-1-ifè¯­å¥">4.1.1 ifè¯­å¥</h4><p>**ä½œç”¨ï¼š**æ‰§è¡Œæ»¡è¶³æ¡ä»¶çš„è¯­å¥</p><p>ifè¯­å¥çš„ä¸‰ç§å½¢å¼</p><ul><li><p>å•è¡Œæ ¼å¼ifè¯­å¥</p></li><li><p>å¤šè¡Œæ ¼å¼ifè¯­å¥</p></li><li><p>å¤šæ¡ä»¶çš„ifè¯­å¥</p></li></ul><ol><li><p>å•è¡Œæ ¼å¼ifè¯­å¥ï¼š<code>if(æ¡ä»¶)&#123; æ¡ä»¶æ»¡è¶³æ‰§è¡Œçš„è¯­å¥ &#125;</code></p><p><img src="/assets/clip_image002.png" alt="img"></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//é€‰æ‹©ç»“æ„-å•è¡Œifè¯­å¥</span><br><span class="hljs-comment">//è¾“å…¥ä¸€ä¸ªåˆ†æ•°ï¼Œå¦‚æœåˆ†æ•°å¤§äº600åˆ†ï¼Œè§†ä¸ºè€ƒä¸Šä¸€æœ¬å¤§å­¦ï¼Œå¹¶åœ¨å±å¹•ä¸Šæ‰“å°</span><br><br><span class="hljs-type">int</span> score = <span class="hljs-number">0</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥ä¸€ä¸ªåˆ†æ•°ï¼š&quot;</span> &lt;&lt; endl;<br>cin &gt;&gt; score;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;æ‚¨è¾“å…¥çš„åˆ†æ•°ä¸ºï¼š &quot;</span> &lt;&lt; score &lt;&lt; endl;<br><br><span class="hljs-comment">//ifè¯­å¥</span><br><span class="hljs-comment">//æ³¨æ„äº‹é¡¹ï¼Œåœ¨ifåˆ¤æ–­è¯­å¥åé¢ï¼Œä¸è¦åŠ åˆ†å·</span><br><span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">600</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†ä¸€æœ¬å¤§å­¦ï¼ï¼ï¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>æ³¨æ„ï¼šifæ¡ä»¶è¡¨è¾¾å¼åä¸è¦åŠ åˆ†å·</p></blockquote><ol start="2"><li>å¤šè¡Œæ ¼å¼ifè¯­å¥ï¼š<code>if(æ¡ä»¶)&#123; æ¡ä»¶æ»¡è¶³æ‰§è¡Œçš„è¯­å¥ &#125;else&#123; æ¡ä»¶ä¸æ»¡è¶³æ‰§è¡Œçš„è¯­å¥ &#125;;</code></li></ol><p><img src="/assets/clip_image002-1541662519170.png" alt="img"></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> score = <span class="hljs-number">0</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥è€ƒè¯•åˆ†æ•°ï¼š&quot;</span> &lt;&lt; endl;<br><br>cin &gt;&gt; score;<br><br><span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">600</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†ä¸€æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘æœªè€ƒä¸Šä¸€æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>å¤šæ¡ä»¶çš„ifè¯­å¥ï¼š<code>if(æ¡ä»¶1)&#123; æ¡ä»¶1æ»¡è¶³æ‰§è¡Œçš„è¯­å¥ &#125;else if(æ¡ä»¶2)&#123;æ¡ä»¶2æ»¡è¶³æ‰§è¡Œçš„è¯­å¥&#125;... else&#123; éƒ½ä¸æ»¡è¶³æ‰§è¡Œçš„è¯­å¥&#125;</code></li></ol><p><img src="/assets/clip_image002-1541662566808.png" alt="img"></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> score = <span class="hljs-number">0</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥è€ƒè¯•åˆ†æ•°ï¼š&quot;</span> &lt;&lt; endl;<br><br>cin &gt;&gt; score;<br><br><span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">600</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†ä¸€æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">500</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†äºŒæœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">400</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†ä¸‰æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘æœªè€ƒä¸Šæœ¬ç§‘&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åµŒå¥—ifè¯­å¥</strong>ï¼šåœ¨ifè¯­å¥ä¸­ï¼Œå¯ä»¥åµŒå¥—ä½¿ç”¨ifè¯­å¥ï¼Œè¾¾åˆ°æ›´ç²¾ç¡®çš„æ¡ä»¶åˆ¤æ–­</p><p>æ¡ˆä¾‹éœ€æ±‚ï¼š</p><ul><li>æç¤ºç”¨æˆ·è¾“å…¥ä¸€ä¸ªé«˜è€ƒè€ƒè¯•åˆ†æ•°ï¼Œæ ¹æ®åˆ†æ•°åšå¦‚ä¸‹åˆ¤æ–­</li><li>åˆ†æ•°å¦‚æœå¤§äº600åˆ†è§†ä¸ºè€ƒä¸Šä¸€æœ¬ï¼Œå¤§äº500åˆ†è€ƒä¸ŠäºŒæœ¬ï¼Œå¤§äº400è€ƒä¸Šä¸‰æœ¬ï¼Œå…¶ä½™è§†ä¸ºæœªè€ƒä¸Šæœ¬ç§‘ï¼›</li><li>åœ¨ä¸€æœ¬åˆ†æ•°ä¸­ï¼Œå¦‚æœå¤§äº700åˆ†ï¼Œè€ƒå…¥åŒ—å¤§ï¼Œå¤§äº650åˆ†ï¼Œè€ƒå…¥æ¸…åï¼Œå¤§äº600è€ƒå…¥äººå¤§ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> score = <span class="hljs-number">0</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·è¾“å…¥è€ƒè¯•åˆ†æ•°ï¼š&quot;</span> &lt;&lt; endl;<br><br>cin &gt;&gt; score;<br><br><span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">600</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†ä¸€æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">700</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†åŒ—å¤§&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">650</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†æ¸…å&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†äººå¤§&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">500</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†äºŒæœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (score &gt; <span class="hljs-number">400</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘è€ƒä¸Šäº†ä¸‰æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æˆ‘æœªè€ƒä¸Šæœ¬ç§‘&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç»ƒä¹ æ¡ˆä¾‹ï¼š</strong> ä¸‰åªå°çŒªç§°ä½“é‡</p><p>æœ‰ä¸‰åªå°çŒªABCï¼Œè¯·åˆ†åˆ«è¾“å…¥ä¸‰åªå°çŒªçš„ä½“é‡ï¼Œå¹¶ä¸”åˆ¤æ–­å“ªåªå°çŒªæœ€é‡ï¼Ÿ<img src="/assets/%E4%B8%89%E5%8F%AA%E5%B0%8F%E7%8C%AA.jpg" alt="ä¸‰åªå°çŒª"></p><h4 id="4-1-2-ä¸‰ç›®è¿ç®—ç¬¦">4.1.2 ä¸‰ç›®è¿ç®—ç¬¦</h4><p><strong>ä½œç”¨ï¼š</strong> é€šè¿‡ä¸‰ç›®è¿ç®—ç¬¦å®ç°ç®€å•çš„åˆ¤æ–­</p><p><strong>è¯­æ³•ï¼š</strong><code>è¡¨è¾¾å¼1 ? è¡¨è¾¾å¼2 ï¼šè¡¨è¾¾å¼3</code></p><p><strong>è§£é‡Šï¼š</strong></p><p>å¦‚æœè¡¨è¾¾å¼1çš„å€¼ä¸ºçœŸï¼Œæ‰§è¡Œè¡¨è¾¾å¼2ï¼Œå¹¶è¿”å›è¡¨è¾¾å¼2çš„ç»“æœï¼›</p><p>å¦‚æœè¡¨è¾¾å¼1çš„å€¼ä¸ºå‡ï¼Œæ‰§è¡Œè¡¨è¾¾å¼3ï¼Œå¹¶è¿”å›è¡¨è¾¾å¼3çš„ç»“æœã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><span class="hljs-type">int</span> c = <span class="hljs-number">0</span>;<br><br>c = a &gt; b ? a : b;<br>cout &lt;&lt; <span class="hljs-string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;<br><br><span class="hljs-comment">//C++ä¸­ä¸‰ç›®è¿ç®—ç¬¦è¿”å›çš„æ˜¯å˜é‡,å¯ä»¥ç»§ç»­èµ‹å€¼</span><br><br>(a &gt; b ? a : b) = <span class="hljs-number">100</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå’Œifè¯­å¥æ¯”è¾ƒï¼Œä¸‰ç›®è¿ç®—ç¬¦ä¼˜ç‚¹æ˜¯çŸ­å°æ•´æ´ï¼Œç¼ºç‚¹æ˜¯å¦‚æœç”¨åµŒå¥—ï¼Œç»“æ„ä¸æ¸…æ™°</p></blockquote><h4 id="4-1-3-switchè¯­å¥">4.1.3 switchè¯­å¥</h4><p>**ä½œç”¨ï¼š**æ‰§è¡Œå¤šæ¡ä»¶åˆ†æ”¯è¯­å¥</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">switch</span>(è¡¨è¾¾å¼)<br><br>&#123;<br><br><span class="hljs-keyword">case</span> ç»“æœ<span class="hljs-number">1</span>ï¼šæ‰§è¡Œè¯­å¥;<span class="hljs-keyword">break</span>;<br><br><span class="hljs-keyword">case</span> ç»“æœ<span class="hljs-number">2</span>ï¼šæ‰§è¡Œè¯­å¥;<span class="hljs-keyword">break</span>;<br><br>...<br><br><span class="hljs-keyword">default</span>:æ‰§è¡Œè¯­å¥;<span class="hljs-keyword">break</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//è¯·ç»™ç”µå½±è¯„åˆ† </span><br><span class="hljs-comment">//10 ~ 9   ç»å…¸   </span><br><span class="hljs-comment">// 8 ~ 7   éå¸¸å¥½</span><br><span class="hljs-comment">// 6 ~ 5   ä¸€èˆ¬</span><br><span class="hljs-comment">// 5åˆ†ä»¥ä¸‹ çƒ‚ç‰‡</span><br><br><span class="hljs-type">int</span> score = <span class="hljs-number">0</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·ç»™ç”µå½±æ‰“åˆ†&quot;</span> &lt;&lt; endl;<br>cin &gt;&gt; score;<br><br><span class="hljs-keyword">switch</span> (score)<br>&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">10</span>:<br><span class="hljs-keyword">case</span> <span class="hljs-number">9</span>:<br>cout &lt;&lt; <span class="hljs-string">&quot;ç»å…¸&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">8</span>:<br>cout &lt;&lt; <span class="hljs-string">&quot;éå¸¸å¥½&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:<br><span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<br>cout &lt;&lt; <span class="hljs-string">&quot;ä¸€èˆ¬&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>cout &lt;&lt; <span class="hljs-string">&quot;çƒ‚ç‰‡&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„1ï¼šswitchè¯­å¥ä¸­è¡¨è¾¾å¼ç±»å‹åªèƒ½æ˜¯æ•´å‹æˆ–è€…å­—ç¬¦å‹</p></blockquote><blockquote><p>æ³¨æ„2ï¼šcaseé‡Œå¦‚æœæ²¡æœ‰breakï¼Œé‚£ä¹ˆç¨‹åºä¼šä¸€ç›´å‘ä¸‹æ‰§è¡Œ</p></blockquote><blockquote><p>æ€»ç»“ï¼šä¸ifè¯­å¥æ¯”ï¼Œå¯¹äºå¤šæ¡ä»¶åˆ¤æ–­æ—¶ï¼Œswitchçš„ç»“æ„æ¸…æ™°ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œç¼ºç‚¹æ˜¯switchä¸å¯ä»¥åˆ¤æ–­åŒºé—´</p></blockquote><h3 id="4-2-å¾ªç¯ç»“æ„">4.2 å¾ªç¯ç»“æ„</h3><h4 id="4-2-1-whileå¾ªç¯è¯­å¥">4.2.1 whileå¾ªç¯è¯­å¥</h4><p>**ä½œç”¨ï¼š**æ»¡è¶³å¾ªç¯æ¡ä»¶ï¼Œæ‰§è¡Œå¾ªç¯è¯­å¥</p><p><strong>è¯­æ³•ï¼š</strong><code> while(å¾ªç¯æ¡ä»¶)&#123; å¾ªç¯è¯­å¥ &#125;</code></p><p><strong>è§£é‡Šï¼š</strong>==åªè¦å¾ªç¯æ¡ä»¶çš„ç»“æœä¸ºçœŸï¼Œå°±æ‰§è¡Œå¾ªç¯è¯­å¥==</p><p><img src="/assets/clip_image002-1541668640382.png" alt="img"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> num = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (num &lt; <span class="hljs-number">10</span>)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;<br>num++;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåœ¨æ‰§è¡Œå¾ªç¯è¯­å¥æ—¶å€™ï¼Œç¨‹åºå¿…é¡»æä¾›è·³å‡ºå¾ªç¯çš„å‡ºå£ï¼Œå¦åˆ™å‡ºç°æ­»å¾ªç¯</p></blockquote><p><strong>whileå¾ªç¯ç»ƒä¹ æ¡ˆä¾‹ï¼š</strong>==çŒœæ•°å­—==</p><p>**æ¡ˆä¾‹æè¿°ï¼š**ç³»ç»Ÿéšæœºç”Ÿæˆä¸€ä¸ª1åˆ°100ä¹‹é—´çš„æ•°å­—ï¼Œç©å®¶è¿›è¡ŒçŒœæµ‹ï¼Œå¦‚æœçŒœé”™ï¼Œæç¤ºç©å®¶æ•°å­—è¿‡å¤§æˆ–è¿‡å°ï¼Œå¦‚æœçŒœå¯¹æ­å–œç©å®¶èƒœåˆ©ï¼Œå¹¶ä¸”é€€å‡ºæ¸¸æˆã€‚</p><p><img src="/assets/%E7%8C%9C%E6%95%B0%E5%AD%97.jpg" alt="çŒœæ•°å­—"></p><h4 id="4-2-2-doâ€¦whileå¾ªç¯è¯­å¥">4.2.2 doâ€¦whileå¾ªç¯è¯­å¥</h4><p><strong>ä½œç”¨ï¼š</strong> æ»¡è¶³å¾ªç¯æ¡ä»¶ï¼Œæ‰§è¡Œå¾ªç¯è¯­å¥</p><p><strong>è¯­æ³•ï¼š</strong> <code>do&#123; å¾ªç¯è¯­å¥ &#125; while(å¾ªç¯æ¡ä»¶);</code></p><p>**æ³¨æ„ï¼š**ä¸whileçš„åŒºåˆ«åœ¨äº==doâ€¦whileä¼šå…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯è¯­å¥==ï¼Œå†åˆ¤æ–­å¾ªç¯æ¡ä»¶</p><p><img src="/assets/clip_image002-1541671163478.png" alt="img"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> num = <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">do</span><br>&#123;<br>cout &lt;&lt; num &lt;&lt; endl;<br>num++;<br><br>&#125; <span class="hljs-keyword">while</span> (num &lt; <span class="hljs-number">10</span>);<br><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šä¸whileå¾ªç¯åŒºåˆ«åœ¨äºï¼Œdoâ€¦whileå…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯è¯­å¥ï¼Œå†åˆ¤æ–­å¾ªç¯æ¡ä»¶</p></blockquote><p><strong>ç»ƒä¹ æ¡ˆä¾‹ï¼šæ°´ä»™èŠ±æ•°</strong></p><p>**æ¡ˆä¾‹æè¿°ï¼š**æ°´ä»™èŠ±æ•°æ˜¯æŒ‡ä¸€ä¸ª 3 ä½æ•°ï¼Œå®ƒçš„æ¯ä¸ªä½ä¸Šçš„æ•°å­—çš„ 3æ¬¡å¹‚ä¹‹å’Œç­‰äºå®ƒæœ¬èº«</p><p>ä¾‹å¦‚ï¼š1^3 + 5^3+ 3^3 = 153</p><p>è¯·åˆ©ç”¨doâ€¦whileè¯­å¥ï¼Œæ±‚å‡ºæ‰€æœ‰3ä½æ•°ä¸­çš„æ°´ä»™èŠ±æ•°</p><h4 id="4-2-3-forå¾ªç¯è¯­å¥">4.2.3 forå¾ªç¯è¯­å¥</h4><p><strong>ä½œç”¨ï¼š</strong> æ»¡è¶³å¾ªç¯æ¡ä»¶ï¼Œæ‰§è¡Œå¾ªç¯è¯­å¥</p><p><strong>è¯­æ³•ï¼š</strong><code> for(èµ·å§‹è¡¨è¾¾å¼;æ¡ä»¶è¡¨è¾¾å¼;æœ«å°¾å¾ªç¯ä½“) &#123; å¾ªç¯è¯­å¥; &#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>cout &lt;&lt; i &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¯¦è§£ï¼š</strong></p><p><img src="/assets/1541673704101.png" alt="1541673704101"></p><blockquote><p>æ³¨æ„ï¼šforå¾ªç¯ä¸­çš„è¡¨è¾¾å¼ï¼Œè¦ç”¨åˆ†å·è¿›è¡Œåˆ†éš”</p></blockquote><blockquote><p>æ€»ç»“ï¼šwhile , doâ€¦while, foréƒ½æ˜¯å¼€å‘ä¸­å¸¸ç”¨çš„å¾ªç¯è¯­å¥ï¼Œforå¾ªç¯ç»“æ„æ¯”è¾ƒæ¸…æ™°ï¼Œæ¯”è¾ƒå¸¸ç”¨</p></blockquote><p><strong>ç»ƒä¹ æ¡ˆä¾‹ï¼šæ•²æ¡Œå­</strong></p><p>æ¡ˆä¾‹æè¿°ï¼šä»1å¼€å§‹æ•°åˆ°æ•°å­—100ï¼Œ å¦‚æœæ•°å­—ä¸ªä½å«æœ‰7ï¼Œæˆ–è€…æ•°å­—åä½å«æœ‰7ï¼Œæˆ–è€…è¯¥æ•°å­—æ˜¯7çš„å€æ•°ï¼Œæˆ‘ä»¬æ‰“å°æ•²æ¡Œå­ï¼Œå…¶ä½™æ•°å­—ç›´æ¥æ‰“å°è¾“å‡ºã€‚</p><p><img src="/assets/timg.gif" alt="timg"></p><h4 id="4-2-4-åµŒå¥—å¾ªç¯">4.2.4 åµŒå¥—å¾ªç¯</h4><p><strong>ä½œç”¨ï¼š</strong> åœ¨å¾ªç¯ä½“ä¸­å†åµŒå¥—ä¸€å±‚å¾ªç¯ï¼Œè§£å†³ä¸€äº›å®é™…é—®é¢˜</p><p>ä¾‹å¦‚æˆ‘ä»¬æƒ³åœ¨å±å¹•ä¸­æ‰“å°å¦‚ä¸‹å›¾ç‰‡ï¼Œå°±éœ€è¦åˆ©ç”¨åµŒå¥—å¾ªç¯</p><p><img src="/assets/1541676003486.png" alt="1541676003486"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//å¤–å±‚å¾ªç¯æ‰§è¡Œ1æ¬¡ï¼Œå†…å±‚å¾ªç¯æ‰§è¡Œ1è½®</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10</span>; j++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;*&quot;</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**ç»ƒä¹ æ¡ˆä¾‹ï¼š**ä¹˜æ³•å£è¯€è¡¨</p><p>æ¡ˆä¾‹æè¿°ï¼šåˆ©ç”¨åµŒå¥—å¾ªç¯ï¼Œå®ç°ä¹ä¹ä¹˜æ³•è¡¨</p><p><img src="/assets/0006018857256120_b.jpg" alt="0006018857256120_b"></p><h3 id="4-3-è·³è½¬è¯­å¥">4.3 è·³è½¬è¯­å¥</h3><h4 id="4-3-1-breakè¯­å¥">4.3.1 breakè¯­å¥</h4><p><strong>ä½œç”¨:</strong> ç”¨äºè·³å‡º==é€‰æ‹©ç»“æ„==æˆ–è€…==å¾ªç¯ç»“æ„==</p><p>breakä½¿ç”¨çš„æ—¶æœºï¼š</p><ul><li>å‡ºç°åœ¨switchæ¡ä»¶è¯­å¥ä¸­ï¼Œä½œç”¨æ˜¯ç»ˆæ­¢caseå¹¶è·³å‡ºswitch</li><li>å‡ºç°åœ¨å¾ªç¯è¯­å¥ä¸­ï¼Œä½œç”¨æ˜¯è·³å‡ºå½“å‰çš„å¾ªç¯è¯­å¥</li><li>å‡ºç°åœ¨åµŒå¥—å¾ªç¯ä¸­ï¼Œè·³å‡ºæœ€è¿‘çš„å†…å±‚å¾ªç¯è¯­å¥</li></ul><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">//1ã€åœ¨switch è¯­å¥ä¸­ä½¿ç”¨break</span><br>cout &lt;&lt; <span class="hljs-string">&quot;è¯·é€‰æ‹©æ‚¨æŒ‘æˆ˜å‰¯æœ¬çš„éš¾åº¦ï¼š&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;1ã€æ™®é€š&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;2ã€ä¸­ç­‰&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;3ã€å›°éš¾&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-type">int</span> num = <span class="hljs-number">0</span>;<br><br>cin &gt;&gt; num;<br><br><span class="hljs-keyword">switch</span> (num)<br>&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‚¨é€‰æ‹©çš„æ˜¯æ™®é€šéš¾åº¦&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‚¨é€‰æ‹©çš„æ˜¯ä¸­ç­‰éš¾åº¦&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‚¨é€‰æ‹©çš„æ˜¯å›°éš¾éš¾åº¦&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">//2ã€åœ¨å¾ªç¯è¯­å¥ä¸­ç”¨break</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br><span class="hljs-keyword">if</span> (i == <span class="hljs-number">5</span>)<br>&#123;<br><span class="hljs-keyword">break</span>; <span class="hljs-comment">//è·³å‡ºå¾ªç¯è¯­å¥</span><br>&#125;<br>cout &lt;&lt; i &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">//åœ¨åµŒå¥—å¾ªç¯è¯­å¥ä¸­ä½¿ç”¨breakï¼Œé€€å‡ºå†…å±‚å¾ªç¯</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10</span>; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (j == <span class="hljs-number">5</span>)<br>&#123;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>cout &lt;&lt; <span class="hljs-string">&quot;*&quot;</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-3-2-continueè¯­å¥">4.3.2 continueè¯­å¥</h4><p>**ä½œç”¨ï¼š**åœ¨==å¾ªç¯è¯­å¥==ä¸­ï¼Œè·³è¿‡æœ¬æ¬¡å¾ªç¯ä¸­ä½™ä¸‹å°šæœªæ‰§è¡Œçš„è¯­å¥ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¬¡å¾ªç¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)<br>&#123;<br><span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-keyword">continue</span>;<br>&#125;<br>cout &lt;&lt; i &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šcontinueå¹¶æ²¡æœ‰ä½¿æ•´ä¸ªå¾ªç¯ç»ˆæ­¢ï¼Œè€Œbreakä¼šè·³å‡ºå¾ªç¯</p></blockquote><h4 id="4-3-3-gotoè¯­å¥">4.3.3 gotoè¯­å¥</h4><p>**ä½œç”¨ï¼š**å¯ä»¥æ— æ¡ä»¶è·³è½¬è¯­å¥</p><p><strong>è¯­æ³•ï¼š</strong> <code>goto æ ‡è®°;</code></p><p>**è§£é‡Šï¼š**å¦‚æœæ ‡è®°çš„åç§°å­˜åœ¨ï¼Œæ‰§è¡Œåˆ°gotoè¯­å¥æ—¶ï¼Œä¼šè·³è½¬åˆ°æ ‡è®°çš„ä½ç½®</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;1&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-keyword">goto</span> FLAG;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;2&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;3&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;4&quot;</span> &lt;&lt; endl;<br><br>FLAG:<br><br>cout &lt;&lt; <span class="hljs-string">&quot;5&quot;</span> &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåœ¨ç¨‹åºä¸­ä¸å»ºè®®ä½¿ç”¨gotoè¯­å¥ï¼Œä»¥å…é€ æˆç¨‹åºæµç¨‹æ··ä¹±</p></blockquote><h2 id="5-æ•°ç»„">5 æ•°ç»„</h2><h3 id="5-1-æ¦‚è¿°">5.1 æ¦‚è¿°</h3><p>æ‰€è°“æ•°ç»„ï¼Œå°±æ˜¯ä¸€ä¸ªé›†åˆï¼Œé‡Œé¢å­˜æ”¾äº†ç›¸åŒç±»å‹çš„æ•°æ®å…ƒç´ </p><p>**ç‰¹ç‚¹1ï¼š**æ•°ç»„ä¸­çš„æ¯ä¸ª==æ•°æ®å…ƒç´ éƒ½æ˜¯ç›¸åŒçš„æ•°æ®ç±»å‹==</p><p>**ç‰¹ç‚¹2ï¼š**æ•°ç»„æ˜¯ç”±==è¿ç»­çš„å†…å­˜==ä½ç½®ç»„æˆçš„</p><p><img src="/assets/1541748375356.png" alt="1541748375356"></p><h3 id="5-2-ä¸€ç»´æ•°ç»„">5.2 ä¸€ç»´æ•°ç»„</h3><h4 id="5-2-1-ä¸€ç»´æ•°ç»„å®šä¹‰æ–¹å¼">5.2.1 ä¸€ç»´æ•°ç»„å®šä¹‰æ–¹å¼</h4><p>ä¸€ç»´æ•°ç»„å®šä¹‰çš„ä¸‰ç§æ–¹å¼ï¼š</p><ol><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ æ•°ç»„é•¿åº¦ ];</code></li><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ æ•°ç»„é•¿åº¦ ] = &#123; å€¼1ï¼Œå€¼2 ...&#125;;</code></li><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ ] = &#123; å€¼1ï¼Œå€¼2 ...&#125;;</code></li></ol><p>ç¤ºä¾‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//å®šä¹‰æ–¹å¼1</span><br><span class="hljs-comment">//æ•°æ®ç±»å‹ æ•°ç»„å[å…ƒç´ ä¸ªæ•°];</span><br><span class="hljs-type">int</span> score[<span class="hljs-number">10</span>];<br><br><span class="hljs-comment">//åˆ©ç”¨ä¸‹æ ‡èµ‹å€¼</span><br>score[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span>;<br>score[<span class="hljs-number">1</span>] = <span class="hljs-number">99</span>;<br>score[<span class="hljs-number">2</span>] = <span class="hljs-number">85</span>;<br><br><span class="hljs-comment">//åˆ©ç”¨ä¸‹æ ‡è¾“å‡º</span><br>cout &lt;&lt; score[<span class="hljs-number">0</span>] &lt;&lt; endl;<br>cout &lt;&lt; score[<span class="hljs-number">1</span>] &lt;&lt; endl;<br>cout &lt;&lt; score[<span class="hljs-number">2</span>] &lt;&lt; endl;<br><br><br><span class="hljs-comment">//ç¬¬äºŒç§å®šä¹‰æ–¹å¼</span><br><span class="hljs-comment">//æ•°æ®ç±»å‹ æ•°ç»„å[å…ƒç´ ä¸ªæ•°] =  &#123;å€¼1ï¼Œå€¼2 ï¼Œå€¼3 ...&#125;;</span><br><span class="hljs-comment">//å¦‚æœ&#123;&#125;å†…ä¸è¶³10ä¸ªæ•°æ®ï¼Œå‰©ä½™æ•°æ®ç”¨0è¡¥å…¨</span><br><span class="hljs-type">int</span> score2[<span class="hljs-number">10</span>] = &#123; <span class="hljs-number">100</span>, <span class="hljs-number">90</span>,<span class="hljs-number">80</span>,<span class="hljs-number">70</span>,<span class="hljs-number">60</span>,<span class="hljs-number">50</span>,<span class="hljs-number">40</span>,<span class="hljs-number">30</span>,<span class="hljs-number">20</span>,<span class="hljs-number">10</span> &#125;;<br><br><span class="hljs-comment">//é€ä¸ªè¾“å‡º</span><br><span class="hljs-comment">//cout &lt;&lt; score2[0] &lt;&lt; endl;</span><br><span class="hljs-comment">//cout &lt;&lt; score2[1] &lt;&lt; endl;</span><br><br><span class="hljs-comment">//ä¸€ä¸ªä¸€ä¸ªè¾“å‡ºå¤ªéº»çƒ¦ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨å¾ªç¯è¿›è¡Œè¾“å‡º</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>cout &lt;&lt; score2[i] &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//å®šä¹‰æ–¹å¼3</span><br><span class="hljs-comment">//æ•°æ®ç±»å‹ æ•°ç»„å[] =  &#123;å€¼1ï¼Œå€¼2 ï¼Œå€¼3 ...&#125;;</span><br><span class="hljs-type">int</span> score3[] = &#123; <span class="hljs-number">100</span>,<span class="hljs-number">90</span>,<span class="hljs-number">80</span>,<span class="hljs-number">70</span>,<span class="hljs-number">60</span>,<span class="hljs-number">50</span>,<span class="hljs-number">40</span>,<span class="hljs-number">30</span>,<span class="hljs-number">20</span>,<span class="hljs-number">10</span> &#125;;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>cout &lt;&lt; score3[i] &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“1ï¼šæ•°ç»„åçš„å‘½åè§„èŒƒä¸å˜é‡åå‘½åè§„èŒƒä¸€è‡´ï¼Œä¸è¦å’Œå˜é‡é‡å</p></blockquote><blockquote><p>æ€»ç»“2ï¼šæ•°ç»„ä¸­ä¸‹æ ‡æ˜¯ä»0å¼€å§‹ç´¢å¼•</p></blockquote><h4 id="5-2-2-ä¸€ç»´æ•°ç»„æ•°ç»„å">5.2.2 ä¸€ç»´æ•°ç»„æ•°ç»„å</h4><p>ä¸€ç»´æ•°ç»„åç§°çš„<strong>ç”¨é€”</strong>ï¼š</p><ol><li>å¯ä»¥ç»Ÿè®¡æ•´ä¸ªæ•°ç»„åœ¨å†…å­˜ä¸­çš„é•¿åº¦</li><li>å¯ä»¥è·å–æ•°ç»„åœ¨å†…å­˜ä¸­çš„é¦–åœ°å€</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//æ•°ç»„åç”¨é€”</span><br><span class="hljs-comment">//1ã€å¯ä»¥è·å–æ•´ä¸ªæ•°ç»„å ç”¨å†…å­˜ç©ºé—´å¤§å°</span><br><span class="hljs-type">int</span> arr[<span class="hljs-number">10</span>] = &#123; <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span> &#125;;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;æ•´ä¸ªæ•°ç»„æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(arr) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ¯ä¸ªå…ƒç´ æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>]) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(arr) / <span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>]) &lt;&lt; endl;<br><br><span class="hljs-comment">//2ã€å¯ä»¥é€šè¿‡æ•°ç»„åè·å–åˆ°æ•°ç»„é¦–åœ°å€</span><br>cout &lt;&lt; <span class="hljs-string">&quot;æ•°ç»„é¦–åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)arr &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;arr[<span class="hljs-number">0</span>] &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ•°ç»„ä¸­ç¬¬äºŒä¸ªå…ƒç´ åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="hljs-type">int</span>)&amp;arr[<span class="hljs-number">1</span>] &lt;&lt; endl;<br><br><span class="hljs-comment">//arr = 100; é”™è¯¯ï¼Œæ•°ç»„åæ˜¯å¸¸é‡ï¼Œå› æ­¤ä¸å¯ä»¥èµ‹å€¼</span><br><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šæ•°ç»„åæ˜¯å¸¸é‡ï¼Œä¸å¯ä»¥èµ‹å€¼</p></blockquote><blockquote><p>æ€»ç»“1ï¼šç›´æ¥æ‰“å°æ•°ç»„åï¼Œå¯ä»¥æŸ¥çœ‹æ•°ç»„æ‰€å å†…å­˜çš„é¦–åœ°å€</p></blockquote><blockquote><p>æ€»ç»“2ï¼šå¯¹æ•°ç»„åè¿›è¡Œsizeofï¼Œå¯ä»¥è·å–æ•´ä¸ªæ•°ç»„å å†…å­˜ç©ºé—´çš„å¤§å°</p></blockquote><p><strong>ç»ƒä¹ æ¡ˆä¾‹1</strong>ï¼šäº”åªå°çŒªç§°ä½“é‡</p><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>åœ¨ä¸€ä¸ªæ•°ç»„ä¸­è®°å½•äº†äº”åªå°çŒªçš„ä½“é‡ï¼Œå¦‚ï¼šint arr[5] = {300,350,200,400,250};</p><p>æ‰¾å‡ºå¹¶æ‰“å°æœ€é‡çš„å°çŒªä½“é‡ã€‚</p><p>**ç»ƒä¹ æ¡ˆä¾‹2ï¼š**æ•°ç»„å…ƒç´ é€†ç½®</p><p>**æ¡ˆä¾‹æè¿°ï¼š**è¯·å£°æ˜ä¸€ä¸ª5ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå¹¶ä¸”å°†å…ƒç´ é€†ç½®.</p><p>(å¦‚åŸæ•°ç»„å…ƒç´ ä¸ºï¼š1,3,2,5,4;é€†ç½®åè¾“å‡ºç»“æœä¸º:4,5,2,3,1);</p><h4 id="5-2-3-å†’æ³¡æ’åº">5.2.3 å†’æ³¡æ’åº</h4><p><strong>ä½œç”¨ï¼š</strong> æœ€å¸¸ç”¨çš„æ’åºç®—æ³•ï¼Œå¯¹æ•°ç»„å†…å…ƒç´ è¿›è¡Œæ’åº</p><ol><li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚</li><li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ åšåŒæ ·çš„å·¥ä½œï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ€å¤§å€¼ã€‚</li><li>é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œæ¯æ¬¡æ¯”è¾ƒæ¬¡æ•°-1ï¼Œç›´åˆ°ä¸éœ€è¦æ¯”è¾ƒ</li></ol><p><img src="/assets/1541905327273.png" alt="1541905327273"></p><p><strong>ç¤ºä¾‹ï¼š</strong> å°†æ•°ç»„ { 4,2,8,0,5,7,1,3,9 } è¿›è¡Œå‡åºæ’åº</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> arr[<span class="hljs-number">9</span>] = &#123; <span class="hljs-number">4</span>,<span class="hljs-number">2</span>,<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">9</span> &#125;;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span> - <span class="hljs-number">1</span>; i++)<br>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">9</span> - <span class="hljs-number">1</span> - i; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (arr[j] &gt; arr[j + <span class="hljs-number">1</span>])<br>&#123;<br><span class="hljs-type">int</span> temp = arr[j];<br>arr[j] = arr[j + <span class="hljs-number">1</span>];<br>arr[j + <span class="hljs-number">1</span>] = temp;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++)<br>&#123;<br>cout &lt;&lt; arr[i] &lt;&lt; endl;<br>&#125;<br>    <br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-3-äºŒç»´æ•°ç»„">5.3 äºŒç»´æ•°ç»„</h3><p>äºŒç»´æ•°ç»„å°±æ˜¯åœ¨ä¸€ç»´æ•°ç»„ä¸Šï¼Œå¤šåŠ ä¸€ä¸ªç»´åº¦ã€‚</p><p><img src="/assets/1541905559138.png" alt="1541905559138"></p><h4 id="5-3-1-äºŒç»´æ•°ç»„å®šä¹‰æ–¹å¼">5.3.1 äºŒç»´æ•°ç»„å®šä¹‰æ–¹å¼</h4><p>äºŒç»´æ•°ç»„å®šä¹‰çš„å››ç§æ–¹å¼ï¼š</p><ol><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ è¡Œæ•° ][ åˆ—æ•° ];</code></li><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ è¡Œæ•° ][ åˆ—æ•° ] = &#123; &#123;æ•°æ®1ï¼Œæ•°æ®2 &#125; ï¼Œ&#123;æ•°æ®3ï¼Œæ•°æ®4 &#125; &#125;;</code></li><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ è¡Œæ•° ][ åˆ—æ•° ] = &#123; æ•°æ®1ï¼Œæ•°æ®2ï¼Œæ•°æ®3ï¼Œæ•°æ®4&#125;;</code></li><li><code> æ•°æ®ç±»å‹  æ•°ç»„å[  ][ åˆ—æ•° ] = &#123; æ•°æ®1ï¼Œæ•°æ®2ï¼Œæ•°æ®3ï¼Œæ•°æ®4&#125;;</code></li></ol><blockquote><p>å»ºè®®ï¼šä»¥ä¸Š4ç§å®šä¹‰æ–¹å¼ï¼Œåˆ©ç”¨==ç¬¬äºŒç§æ›´åŠ ç›´è§‚ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§==</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//æ–¹å¼1  </span><br><span class="hljs-comment">//æ•°ç»„ç±»å‹ æ•°ç»„å [è¡Œæ•°][åˆ—æ•°]</span><br><span class="hljs-type">int</span> arr[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>];<br>arr[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>arr[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;<br>arr[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] = <span class="hljs-number">3</span>;<br>arr[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">4</span>;<br>arr[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">5</span>;<br>arr[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] = <span class="hljs-number">6</span>;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span>; i++)<br>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++)<br>&#123;<br>cout &lt;&lt; arr[i][j] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//æ–¹å¼2 </span><br><span class="hljs-comment">//æ•°æ®ç±»å‹ æ•°ç»„å[è¡Œæ•°][åˆ—æ•°] = &#123; &#123;æ•°æ®1ï¼Œæ•°æ®2 &#125; ï¼Œ&#123;æ•°æ®3ï¼Œæ•°æ®4 &#125; &#125;;</span><br><span class="hljs-type">int</span> arr2[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>] =<br>&#123;<br>&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;,<br>&#123;<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>&#125;<br>&#125;;<br><br><span class="hljs-comment">//æ–¹å¼3</span><br><span class="hljs-comment">//æ•°æ®ç±»å‹ æ•°ç»„å[è¡Œæ•°][åˆ—æ•°] = &#123; æ•°æ®1ï¼Œæ•°æ®2 ,æ•°æ®3ï¼Œæ•°æ®4  &#125;;</span><br><span class="hljs-type">int</span> arr3[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>] = &#123; <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span> &#125;; <br><br><span class="hljs-comment">//æ–¹å¼4 </span><br><span class="hljs-comment">//æ•°æ®ç±»å‹ æ•°ç»„å[][åˆ—æ•°] = &#123; æ•°æ®1ï¼Œæ•°æ®2 ,æ•°æ®3ï¼Œæ•°æ®4  &#125;;</span><br><span class="hljs-type">int</span> arr4[][<span class="hljs-number">3</span>] = &#123; <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span> &#125;;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šåœ¨å®šä¹‰äºŒç»´æ•°ç»„æ—¶ï¼Œå¦‚æœåˆå§‹åŒ–äº†æ•°æ®ï¼Œå¯ä»¥çœç•¥è¡Œæ•°</p></blockquote><h4 id="5-3-2-äºŒç»´æ•°ç»„æ•°ç»„å">5.3.2 äºŒç»´æ•°ç»„æ•°ç»„å</h4><ul><li>æŸ¥çœ‹äºŒç»´æ•°ç»„æ‰€å å†…å­˜ç©ºé—´</li><li>è·å–äºŒç»´æ•°ç»„é¦–åœ°å€</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//äºŒç»´æ•°ç»„æ•°ç»„å</span><br><span class="hljs-type">int</span> arr[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>] =<br>&#123;<br>&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;,<br>&#123;<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>&#125;<br>&#125;;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äºŒç»´æ•°ç»„å¤§å°ï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(arr) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;äºŒç»´æ•°ç»„ä¸€è¡Œå¤§å°ï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>]) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;äºŒç»´æ•°ç»„å…ƒç´ å¤§å°ï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]) &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äºŒç»´æ•°ç»„è¡Œæ•°ï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(arr) / <span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>]) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;äºŒç»´æ•°ç»„åˆ—æ•°ï¼š &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>]) / <span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]) &lt;&lt; endl;<br><br><span class="hljs-comment">//åœ°å€</span><br>cout &lt;&lt; <span class="hljs-string">&quot;äºŒç»´æ•°ç»„é¦–åœ°å€ï¼š&quot;</span> &lt;&lt; arr &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;äºŒç»´æ•°ç»„ç¬¬ä¸€è¡Œåœ°å€ï¼š&quot;</span> &lt;&lt; arr[<span class="hljs-number">0</span>] &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;äºŒç»´æ•°ç»„ç¬¬äºŒè¡Œåœ°å€ï¼š&quot;</span> &lt;&lt; arr[<span class="hljs-number">1</span>] &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äºŒç»´æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ åœ°å€ï¼š&quot;</span> &lt;&lt; &amp;arr[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;äºŒç»´æ•°ç»„ç¬¬äºŒä¸ªå…ƒç´ åœ°å€ï¼š&quot;</span> &lt;&lt; &amp;arr[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“1ï¼šäºŒç»´æ•°ç»„åå°±æ˜¯è¿™ä¸ªæ•°ç»„çš„é¦–åœ°å€</p></blockquote><blockquote><p>æ€»ç»“2ï¼šå¯¹äºŒç»´æ•°ç»„åè¿›è¡Œsizeofæ—¶ï¼Œå¯ä»¥è·å–æ•´ä¸ªäºŒç»´æ•°ç»„å ç”¨çš„å†…å­˜ç©ºé—´å¤§å°</p></blockquote><h4 id="5-3-3-äºŒç»´æ•°ç»„åº”ç”¨æ¡ˆä¾‹"><strong>5.3.3 äºŒç»´æ•°ç»„åº”ç”¨æ¡ˆä¾‹</strong></h4><p><strong>è€ƒè¯•æˆç»©ç»Ÿè®¡ï¼š</strong></p><p>æ¡ˆä¾‹æè¿°ï¼šæœ‰ä¸‰ååŒå­¦ï¼ˆå¼ ä¸‰ï¼Œæå››ï¼Œç‹äº”ï¼‰ï¼Œåœ¨ä¸€æ¬¡è€ƒè¯•ä¸­çš„æˆç»©åˆ†åˆ«å¦‚ä¸‹è¡¨ï¼Œ<strong>è¯·åˆ†åˆ«è¾“å‡ºä¸‰ååŒå­¦çš„æ€»æˆç»©</strong></p><table><thead><tr><th></th><th>è¯­æ–‡</th><th>æ•°å­¦</th><th>è‹±è¯­</th></tr></thead><tbody><tr><td>å¼ ä¸‰</td><td>100</td><td>100</td><td>100</td></tr><tr><td>æå››</td><td>90</td><td>50</td><td>100</td></tr><tr><td>ç‹äº”</td><td>60</td><td>70</td><td>80</td></tr></tbody></table><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> scores[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>] =<br>&#123;<br>&#123;<span class="hljs-number">100</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>&#125;,<br>&#123;<span class="hljs-number">90</span>,<span class="hljs-number">50</span>,<span class="hljs-number">100</span>&#125;,<br>&#123;<span class="hljs-number">60</span>,<span class="hljs-number">70</span>,<span class="hljs-number">80</span>&#125;,<br>&#125;;<br><br>string names[<span class="hljs-number">3</span>] = &#123; <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-string">&quot;æå››&quot;</span>,<span class="hljs-string">&quot;ç‹äº”&quot;</span> &#125;;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++)<br>&#123;<br><span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++)<br>&#123;<br>sum += scores[i][j];<br>&#125;<br>cout &lt;&lt; names[i] &lt;&lt; <span class="hljs-string">&quot;åŒå­¦æ€»æˆç»©ä¸ºï¼š &quot;</span> &lt;&lt; sum &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-å‡½æ•°">6 å‡½æ•°</h2><h3 id="6-1-æ¦‚è¿°">6.1 æ¦‚è¿°</h3><p>**ä½œç”¨ï¼š**å°†ä¸€æ®µç»å¸¸ä½¿ç”¨çš„ä»£ç å°è£…èµ·æ¥ï¼Œå‡å°‘é‡å¤ä»£ç </p><p>ä¸€ä¸ªè¾ƒå¤§çš„ç¨‹åºï¼Œä¸€èˆ¬åˆ†ä¸ºè‹¥å¹²ä¸ªç¨‹åºå—ï¼Œæ¯ä¸ªæ¨¡å—å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚</p><h3 id="6-2-å‡½æ•°çš„å®šä¹‰">6.2 å‡½æ•°çš„å®šä¹‰</h3><p>å‡½æ•°çš„å®šä¹‰ä¸€èˆ¬ä¸»è¦æœ‰5ä¸ªæ­¥éª¤ï¼š</p><p>1ã€è¿”å›å€¼ç±»å‹</p><p>2ã€å‡½æ•°å</p><p>3ã€å‚æ•°è¡¨åˆ—</p><p>4ã€å‡½æ•°ä½“è¯­å¥</p><p>5ã€return è¡¨è¾¾å¼</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs C++">è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰<br>&#123;<br><br>       å‡½æ•°ä½“è¯­å¥<br><br>       <span class="hljs-keyword">return</span>è¡¨è¾¾å¼<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>è¿”å›å€¼ç±»å‹ ï¼šä¸€ä¸ªå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå€¼ã€‚åœ¨å‡½æ•°å®šä¹‰ä¸­</li><li>å‡½æ•°åï¼šç»™å‡½æ•°èµ·ä¸ªåç§°</li><li>å‚æ•°åˆ—è¡¨ï¼šä½¿ç”¨è¯¥å‡½æ•°æ—¶ï¼Œä¼ å…¥çš„æ•°æ®</li><li>å‡½æ•°ä½“è¯­å¥ï¼šèŠ±æ‹¬å·å†…çš„ä»£ç ï¼Œå‡½æ•°å†…éœ€è¦æ‰§è¡Œçš„è¯­å¥</li><li>returnè¡¨è¾¾å¼ï¼š å’Œè¿”å›å€¼ç±»å‹æŒ‚é’©ï¼Œå‡½æ•°æ‰§è¡Œå®Œåï¼Œè¿”å›ç›¸åº”çš„æ•°æ®</li></ul><p>**ç¤ºä¾‹ï¼š**å®šä¹‰ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼Œå®ç°ä¸¤ä¸ªæ•°ç›¸åŠ </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å‡½æ•°å®šä¹‰</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> sum = num1 + num2;<br><span class="hljs-keyword">return</span> sum;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-3-å‡½æ•°çš„è°ƒç”¨">6.3 å‡½æ•°çš„è°ƒç”¨</h3><p>**åŠŸèƒ½ï¼š**ä½¿ç”¨å®šä¹‰å¥½çš„å‡½æ•°</p><p><strong>è¯­æ³•ï¼š</strong><code> å‡½æ•°åï¼ˆå‚æ•°ï¼‰</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å‡½æ•°å®šä¹‰</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span> <span class="hljs-comment">//å®šä¹‰ä¸­çš„num1,num2ç§°ä¸ºå½¢å¼å‚æ•°ï¼Œç®€ç§°å½¢å‚</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> sum = num1 + num2;<br><span class="hljs-keyword">return</span> sum;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">10</span>;<br><span class="hljs-comment">//è°ƒç”¨addå‡½æ•°</span><br><span class="hljs-type">int</span> sum = <span class="hljs-built_in">add</span>(a, b);<span class="hljs-comment">//è°ƒç”¨æ—¶çš„aï¼Œbç§°ä¸ºå®é™…å‚æ•°ï¼Œç®€ç§°å®å‚</span><br>cout &lt;&lt; <span class="hljs-string">&quot;sum = &quot;</span> &lt;&lt; sum &lt;&lt; endl;<br><br>a = <span class="hljs-number">100</span>;<br>b = <span class="hljs-number">100</span>;<br><br>sum = <span class="hljs-built_in">add</span>(a, b);<br>cout &lt;&lt; <span class="hljs-string">&quot;sum = &quot;</span> &lt;&lt; sum &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå‡½æ•°å®šä¹‰é‡Œå°æ‹¬å·å†…ç§°ä¸ºå½¢å‚ï¼Œå‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°ç§°ä¸ºå®å‚</p></blockquote><h3 id="6-4-å€¼ä¼ é€’">6.4 å€¼ä¼ é€’</h3><ul><li>æ‰€è°“å€¼ä¼ é€’ï¼Œå°±æ˜¯å‡½æ•°è°ƒç”¨æ—¶å®å‚å°†æ•°å€¼ä¼ å…¥ç»™å½¢å‚</li><li>å€¼ä¼ é€’æ—¶ï¼Œ==å¦‚æœå½¢å‚å‘ç”Ÿï¼Œå¹¶ä¸ä¼šå½±å“å®å‚==</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;äº¤æ¢å‰ï¼š&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;num1 = &quot;</span> &lt;&lt; num1 &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;num2 = &quot;</span> &lt;&lt; num2 &lt;&lt; endl;<br><br><span class="hljs-type">int</span> temp = num1;<br>num1 = num2;<br>num2 = temp;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;äº¤æ¢åï¼š&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;num1 = &quot;</span> &lt;&lt; num1 &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;num2 = &quot;</span> &lt;&lt; num2 &lt;&lt; endl;<br><br><span class="hljs-comment">//return ; å½“å‡½æ•°å£°æ˜æ—¶å€™ï¼Œä¸éœ€è¦è¿”å›å€¼ï¼Œå¯ä»¥ä¸å†™return</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><br><span class="hljs-built_in">swap</span>(a, b);<br><br>cout &lt;&lt; <span class="hljs-string">&quot;mianä¸­çš„ a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;mianä¸­çš„ b = &quot;</span> &lt;&lt; b &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š å€¼ä¼ é€’æ—¶ï¼Œå½¢å‚æ˜¯ä¿®é¥°ä¸äº†å®å‚çš„</p></blockquote><h3 id="6-5-å‡½æ•°çš„å¸¸è§æ ·å¼"><strong>6.5 å‡½æ•°çš„å¸¸è§æ ·å¼</strong></h3><p>å¸¸è§çš„å‡½æ•°æ ·å¼æœ‰4ç§</p><ol><li>æ— å‚æ— è¿”</li><li>æœ‰å‚æ— è¿”</li><li>æ— å‚æœ‰è¿”</li><li>æœ‰å‚æœ‰è¿”</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å‡½æ•°å¸¸è§æ ·å¼</span><br><span class="hljs-comment">//1ã€ æ— å‚æ— è¿”</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//void a = 10; //æ— ç±»å‹ä¸å¯ä»¥åˆ›å»ºå˜é‡,åŸå› æ— æ³•åˆ†é…å†…å­˜</span><br>cout &lt;&lt; <span class="hljs-string">&quot;this is test01&quot;</span> &lt;&lt; endl;<br><span class="hljs-comment">//test01(); å‡½æ•°è°ƒç”¨</span><br>&#125;<br><br><span class="hljs-comment">//2ã€ æœ‰å‚æ— è¿”</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;this is test02&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//3ã€æ— å‚æœ‰è¿”</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;this is test03 &quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>&#125;<br><br><span class="hljs-comment">//4ã€æœ‰å‚æœ‰è¿”</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">test04</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;this is test04 &quot;</span> &lt;&lt; endl;<br><span class="hljs-type">int</span> sum = a + b;<br><span class="hljs-keyword">return</span> sum;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-6-å‡½æ•°çš„å£°æ˜">6.6 å‡½æ•°çš„å£°æ˜</h3><p><strong>ä½œç”¨ï¼š</strong> å‘Šè¯‰ç¼–è¯‘å™¨å‡½æ•°åç§°åŠå¦‚ä½•è°ƒç”¨å‡½æ•°ã€‚å‡½æ•°çš„å®é™…ä¸»ä½“å¯ä»¥å•ç‹¬å®šä¹‰ã€‚</p><ul><li>å‡½æ•°çš„<strong>å£°æ˜å¯ä»¥å¤šæ¬¡</strong>ï¼Œä½†æ˜¯å‡½æ•°çš„<strong>å®šä¹‰åªèƒ½æœ‰ä¸€æ¬¡</strong></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å£°æ˜å¯ä»¥å¤šæ¬¡ï¼Œå®šä¹‰åªèƒ½ä¸€æ¬¡</span><br><span class="hljs-comment">//å£°æ˜</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">max</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">max</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span>;<br><span class="hljs-comment">//å®šä¹‰</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">max</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> a &gt; b ? a : b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">100</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">200</span>;<br><br>cout &lt;&lt; <span class="hljs-built_in">max</span>(a, b) &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-7-å‡½æ•°çš„åˆ†æ–‡ä»¶ç¼–å†™">6.7 å‡½æ•°çš„åˆ†æ–‡ä»¶ç¼–å†™</h3><p>**ä½œç”¨ï¼š**è®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°</p><p>å‡½æ•°åˆ†æ–‡ä»¶ç¼–å†™ä¸€èˆ¬æœ‰4ä¸ªæ­¥éª¤</p><ol><li>åˆ›å»ºåç¼€åä¸º.hçš„å¤´æ–‡ä»¶</li><li>åˆ›å»ºåç¼€åä¸º.cppçš„æºæ–‡ä»¶</li><li>åœ¨å¤´æ–‡ä»¶ä¸­å†™å‡½æ•°çš„å£°æ˜</li><li>åœ¨æºæ–‡ä»¶ä¸­å†™å‡½æ•°çš„å®šä¹‰</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//swap.hæ–‡ä»¶</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//å®ç°ä¸¤ä¸ªæ•°å­—äº¤æ¢çš„å‡½æ•°å£°æ˜</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span>;<br><br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//swap.cppæ–‡ä»¶</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;swap.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> temp = a;<br>a = b;<br>b = temp;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//mainå‡½æ•°æ–‡ä»¶</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;swap.h&quot;</span></span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">100</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">200</span>;<br><span class="hljs-built_in">swap</span>(a, b);<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="7-æŒ‡é’ˆ">7 æŒ‡é’ˆ</h2><h3 id="7-1-æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ">7.1 æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ</h3><p><strong>æŒ‡é’ˆçš„ä½œç”¨ï¼š</strong> å¯ä»¥é€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®å†…å­˜</p><ul><li>å†…å­˜ç¼–å·æ˜¯ä»0å¼€å§‹è®°å½•çš„ï¼Œä¸€èˆ¬ç”¨åå…­è¿›åˆ¶æ•°å­—è¡¨ç¤º</li><li>å¯ä»¥åˆ©ç”¨æŒ‡é’ˆå˜é‡ä¿å­˜åœ°å€</li></ul><h3 id="7-2-æŒ‡é’ˆå˜é‡çš„å®šä¹‰å’Œä½¿ç”¨">7.2 æŒ‡é’ˆå˜é‡çš„å®šä¹‰å’Œä½¿ç”¨</h3><p>æŒ‡é’ˆå˜é‡å®šä¹‰è¯­æ³•ï¼š <code>æ•°æ®ç±»å‹ * å˜é‡åï¼›</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//1ã€æŒ‡é’ˆçš„å®šä¹‰</span><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>; <span class="hljs-comment">//å®šä¹‰æ•´å‹å˜é‡a</span><br><br><span class="hljs-comment">//æŒ‡é’ˆå®šä¹‰è¯­æ³•ï¼š æ•°æ®ç±»å‹ * å˜é‡å ;</span><br><span class="hljs-type">int</span> * p;<br><br><span class="hljs-comment">//æŒ‡é’ˆå˜é‡èµ‹å€¼</span><br>p = &amp;a; <span class="hljs-comment">//æŒ‡é’ˆæŒ‡å‘å˜é‡açš„åœ°å€</span><br>cout &lt;&lt; &amp;a &lt;&lt; endl; <span class="hljs-comment">//æ‰“å°æ•°æ®açš„åœ°å€</span><br>cout &lt;&lt; p &lt;&lt; endl;  <span class="hljs-comment">//æ‰“å°æŒ‡é’ˆå˜é‡p</span><br><br><span class="hljs-comment">//2ã€æŒ‡é’ˆçš„ä½¿ç”¨</span><br><span class="hljs-comment">//é€šè¿‡*æ“ä½œæŒ‡é’ˆå˜é‡æŒ‡å‘çš„å†…å­˜</span><br>cout &lt;&lt; <span class="hljs-string">&quot;*p = &quot;</span> &lt;&lt; *p &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æŒ‡é’ˆå˜é‡å’Œæ™®é€šå˜é‡çš„åŒºåˆ«</p><ul><li>æ™®é€šå˜é‡å­˜æ”¾çš„æ˜¯æ•°æ®,æŒ‡é’ˆå˜é‡å­˜æ”¾çš„æ˜¯åœ°å€</li><li>æŒ‡é’ˆå˜é‡å¯ä»¥é€šè¿‡&quot; * &quot;æ“ä½œç¬¦ï¼Œæ“ä½œæŒ‡é’ˆå˜é‡æŒ‡å‘çš„å†…å­˜ç©ºé—´ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè§£å¼•ç”¨</li></ul><blockquote><p>æ€»ç»“1ï¼š æˆ‘ä»¬å¯ä»¥é€šè¿‡ &amp; ç¬¦å· è·å–å˜é‡çš„åœ°å€</p></blockquote><blockquote><p>æ€»ç»“2ï¼šåˆ©ç”¨æŒ‡é’ˆå¯ä»¥è®°å½•åœ°å€</p></blockquote><blockquote><p>æ€»ç»“3ï¼šå¯¹æŒ‡é’ˆå˜é‡è§£å¼•ç”¨ï¼Œå¯ä»¥æ“ä½œæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜</p></blockquote><h3 id="7-3-æŒ‡é’ˆæ‰€å å†…å­˜ç©ºé—´">7.3 æŒ‡é’ˆæ‰€å å†…å­˜ç©ºé—´</h3><p>æé—®ï¼šæŒ‡é’ˆä¹Ÿæ˜¯ç§æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆè¿™ç§æ•°æ®ç±»å‹å ç”¨å¤šå°‘å†…å­˜ç©ºé—´ï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><br><span class="hljs-type">int</span> * p;<br>p = &amp;a; <span class="hljs-comment">//æŒ‡é’ˆæŒ‡å‘æ•°æ®açš„åœ°å€</span><br><br>cout &lt;&lt; *p &lt;&lt; endl; <span class="hljs-comment">//* è§£å¼•ç”¨</span><br>cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(p) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">char</span> *) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">float</span> *) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">double</span> *) &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šæ‰€æœ‰æŒ‡é’ˆç±»å‹åœ¨32ä½æ“ä½œç³»ç»Ÿä¸‹æ˜¯4ä¸ªå­—èŠ‚</p></blockquote><h3 id="7-4-ç©ºæŒ‡é’ˆå’Œé‡æŒ‡é’ˆ">7.4 ç©ºæŒ‡é’ˆå’Œé‡æŒ‡é’ˆ</h3><p><strong>ç©ºæŒ‡é’ˆ</strong>ï¼šæŒ‡é’ˆå˜é‡æŒ‡å‘å†…å­˜ä¸­ç¼–å·ä¸º0çš„ç©ºé—´</p><p>**ç”¨é€”ï¼š**åˆå§‹åŒ–æŒ‡é’ˆå˜é‡</p><p>**æ³¨æ„ï¼š**ç©ºæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜æ˜¯ä¸å¯ä»¥è®¿é—®çš„</p><p><strong>ç¤ºä¾‹1ï¼šç©ºæŒ‡é’ˆ</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//æŒ‡é’ˆå˜é‡pæŒ‡å‘å†…å­˜åœ°å€ç¼–å·ä¸º0çš„ç©ºé—´</span><br><span class="hljs-type">int</span> * p = <span class="hljs-literal">NULL</span>;<br><br><span class="hljs-comment">//è®¿é—®ç©ºæŒ‡é’ˆæŠ¥é”™ </span><br><span class="hljs-comment">//å†…å­˜ç¼–å·0 ~255ä¸ºç³»ç»Ÿå ç”¨å†…å­˜ï¼Œä¸å…è®¸ç”¨æˆ·è®¿é—®</span><br>cout &lt;&lt; *p &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é‡æŒ‡é’ˆ</strong>ï¼šæŒ‡é’ˆå˜é‡æŒ‡å‘éæ³•çš„å†…å­˜ç©ºé—´</p><p><strong>ç¤ºä¾‹2ï¼šé‡æŒ‡é’ˆ</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//æŒ‡é’ˆå˜é‡pæŒ‡å‘å†…å­˜åœ°å€ç¼–å·ä¸º0x1100çš„ç©ºé—´</span><br><span class="hljs-type">int</span> * p = (<span class="hljs-type">int</span> *)<span class="hljs-number">0x1100</span>;<br><br><span class="hljs-comment">//è®¿é—®é‡æŒ‡é’ˆæŠ¥é”™ </span><br>cout &lt;&lt; *p &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šç©ºæŒ‡é’ˆå’Œé‡æŒ‡é’ˆéƒ½ä¸æ˜¯æˆ‘ä»¬ç”³è¯·çš„ç©ºé—´ï¼Œå› æ­¤ä¸è¦è®¿é—®ã€‚</p></blockquote><h3 id="7-5-constä¿®é¥°æŒ‡é’ˆ">7.5 constä¿®é¥°æŒ‡é’ˆ</h3><p>constä¿®é¥°æŒ‡é’ˆæœ‰ä¸‰ç§æƒ…å†µ</p><ol><li>constä¿®é¥°æŒ‡é’ˆ   â€” å¸¸é‡æŒ‡é’ˆ</li><li>constä¿®é¥°å¸¸é‡   â€” æŒ‡é’ˆå¸¸é‡</li><li>constå³ä¿®é¥°æŒ‡é’ˆï¼Œåˆä¿®é¥°å¸¸é‡</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">10</span>;<br><br><span class="hljs-comment">//constä¿®é¥°çš„æ˜¯æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘å¯ä»¥æ”¹ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸å¯ä»¥æ›´æ”¹</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> * p1 = &amp;a; <br>p1 = &amp;b; <span class="hljs-comment">//æ­£ç¡®</span><br><span class="hljs-comment">//*p1 = 100;  æŠ¥é”™</span><br><br><br><span class="hljs-comment">//constä¿®é¥°çš„æ˜¯å¸¸é‡ï¼ŒæŒ‡é’ˆæŒ‡å‘ä¸å¯ä»¥æ”¹ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å€¼å¯ä»¥æ›´æ”¹</span><br><span class="hljs-type">int</span> * <span class="hljs-type">const</span> p2 = &amp;a;<br><span class="hljs-comment">//p2 = &amp;b; //é”™è¯¯</span><br>*p2 = <span class="hljs-number">100</span>; <span class="hljs-comment">//æ­£ç¡®</span><br><br>    <span class="hljs-comment">//constæ—¢ä¿®é¥°æŒ‡é’ˆåˆä¿®é¥°å¸¸é‡</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> * <span class="hljs-type">const</span> p3 = &amp;a;<br><span class="hljs-comment">//p3 = &amp;b; //é”™è¯¯</span><br><span class="hljs-comment">//*p3 = 100; //é”™è¯¯</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æŠ€å·§ï¼šçœ‹constå³ä¾§ç´§è·Ÿç€çš„æ˜¯æŒ‡é’ˆè¿˜æ˜¯å¸¸é‡, æ˜¯æŒ‡é’ˆå°±æ˜¯å¸¸é‡æŒ‡é’ˆï¼Œæ˜¯å¸¸é‡å°±æ˜¯æŒ‡é’ˆå¸¸é‡</p></blockquote><h3 id="7-6-æŒ‡é’ˆå’Œæ•°ç»„">7.6 æŒ‡é’ˆå’Œæ•°ç»„</h3><p>**ä½œç”¨ï¼š**åˆ©ç”¨æŒ‡é’ˆè®¿é—®æ•°ç»„ä¸­å…ƒç´ </p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> arr[] = &#123; <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span> &#125;;<br><br><span class="hljs-type">int</span> * p = arr;  <span class="hljs-comment">//æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š &quot;</span> &lt;&lt; arr[<span class="hljs-number">0</span>] &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;æŒ‡é’ˆè®¿é—®ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š &quot;</span> &lt;&lt; *p &lt;&lt; endl;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br><span class="hljs-comment">//åˆ©ç”¨æŒ‡é’ˆéå†æ•°ç»„</span><br>cout &lt;&lt; *p &lt;&lt; endl;<br>p++;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-7-æŒ‡é’ˆå’Œå‡½æ•°">7.7 æŒ‡é’ˆå’Œå‡½æ•°</h3><p>**ä½œç”¨ï¼š**åˆ©ç”¨æŒ‡é’ˆä½œå‡½æ•°å‚æ•°ï¼Œå¯ä»¥ä¿®æ”¹å®å‚çš„å€¼</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å€¼ä¼ é€’</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap1</span><span class="hljs-params">(<span class="hljs-type">int</span> a ,<span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> temp = a;<br>a = b; <br>b = temp;<br>&#125;<br><span class="hljs-comment">//åœ°å€ä¼ é€’</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap2</span><span class="hljs-params">(<span class="hljs-type">int</span> * p1, <span class="hljs-type">int</span> *p2)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> temp = *p1;<br>*p1 = *p2;<br>*p2 = temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br><span class="hljs-built_in">swap1</span>(a, b); <span class="hljs-comment">// å€¼ä¼ é€’ä¸ä¼šæ”¹å˜å®å‚</span><br><br><span class="hljs-built_in">swap2</span>(&amp;a, &amp;b); <span class="hljs-comment">//åœ°å€ä¼ é€’ä¼šæ”¹å˜å®å‚</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå¦‚æœä¸æƒ³ä¿®æ”¹å®å‚ï¼Œå°±ç”¨å€¼ä¼ é€’ï¼Œå¦‚æœæƒ³ä¿®æ”¹å®å‚ï¼Œå°±ç”¨åœ°å€ä¼ é€’</p></blockquote><h3 id="7-8-æŒ‡é’ˆã€æ•°ç»„ã€å‡½æ•°">7.8 æŒ‡é’ˆã€æ•°ç»„ã€å‡½æ•°</h3><p>**æ¡ˆä¾‹æè¿°ï¼š**å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œåˆ©ç”¨å†’æ³¡æ’åºï¼Œå®ç°å¯¹æ•´å‹æ•°ç»„çš„å‡åºæ’åº</p><p>ä¾‹å¦‚æ•°ç»„ï¼šint arr[10] = { 4,3,6,9,1,2,10,8,7,5 };</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//å†’æ³¡æ’åºå‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubbleSort</span><span class="hljs-params">(<span class="hljs-type">int</span> * arr, <span class="hljs-type">int</span> len)</span>  <span class="hljs-comment">//int * arr ä¹Ÿå¯ä»¥å†™ä¸ºint arr[]</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len - <span class="hljs-number">1</span>; i++)<br>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; len - <span class="hljs-number">1</span> - i; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (arr[j] &gt; arr[j + <span class="hljs-number">1</span>])<br>&#123;<br><span class="hljs-type">int</span> temp = arr[j];<br>arr[j] = arr[j + <span class="hljs-number">1</span>];<br>arr[j + <span class="hljs-number">1</span>] = temp;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°æ•°ç»„å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printArray</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>&#123;<br>cout &lt;&lt; arr[i] &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-type">int</span> arr[<span class="hljs-number">10</span>] = &#123; <span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">6</span>,<span class="hljs-number">9</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">10</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>,<span class="hljs-number">5</span> &#125;;<br><span class="hljs-type">int</span> len = <span class="hljs-built_in">sizeof</span>(arr) / <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>);<br><br><span class="hljs-built_in">bubbleSort</span>(arr, len);<br><br><span class="hljs-built_in">printArray</span>(arr, len);<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå½“æ•°ç»„åä¼ å…¥åˆ°å‡½æ•°ä½œä¸ºå‚æ•°æ—¶ï¼Œè¢«é€€åŒ–ä¸ºæŒ‡å‘é¦–å…ƒç´ çš„æŒ‡é’ˆ</p></blockquote><h2 id="8-ç»“æ„ä½“">8 ç»“æ„ä½“</h2><h3 id="8-1-ç»“æ„ä½“åŸºæœ¬æ¦‚å¿µ">8.1 ç»“æ„ä½“åŸºæœ¬æ¦‚å¿µ</h3><p>ç»“æ„ä½“å±äºç”¨æˆ·==è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹==ï¼Œå…è®¸ç”¨æˆ·å­˜å‚¨ä¸åŒçš„æ•°æ®ç±»å‹</p><h3 id="8-2-ç»“æ„ä½“å®šä¹‰å’Œä½¿ç”¨">8.2 ç»“æ„ä½“å®šä¹‰å’Œä½¿ç”¨</h3><p><strong>è¯­æ³•ï¼š</strong><code>struct ç»“æ„ä½“å &#123; ç»“æ„ä½“æˆå‘˜åˆ—è¡¨ &#125;ï¼›</code></p><p>é€šè¿‡ç»“æ„ä½“åˆ›å»ºå˜é‡çš„æ–¹å¼æœ‰ä¸‰ç§ï¼š</p><ul><li>struct ç»“æ„ä½“å å˜é‡å</li><li>struct ç»“æ„ä½“å å˜é‡å = { æˆå‘˜1å€¼ ï¼Œ æˆå‘˜2å€¼â€¦}</li><li>å®šä¹‰ç»“æ„ä½“æ—¶é¡ºä¾¿åˆ›å»ºå˜é‡</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//ç»“æ„ä½“å®šä¹‰</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span><br>&#123;<br><span class="hljs-comment">//æˆå‘˜åˆ—è¡¨</span><br>string name;  <span class="hljs-comment">//å§“å</span><br><span class="hljs-type">int</span> age;      <span class="hljs-comment">//å¹´é¾„</span><br><span class="hljs-type">int</span> score;    <span class="hljs-comment">//åˆ†æ•°</span><br>&#125;stu3; <span class="hljs-comment">//ç»“æ„ä½“å˜é‡åˆ›å»ºæ–¹å¼3 </span><br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//ç»“æ„ä½“å˜é‡åˆ›å»ºæ–¹å¼1</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span> stu1; <span class="hljs-comment">//struct å…³é”®å­—å¯ä»¥çœç•¥</span><br><br>stu<span class="hljs-number">1.</span>name = <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>stu<span class="hljs-number">1.</span>age = <span class="hljs-number">18</span>;<br>stu<span class="hljs-number">1.</span>score = <span class="hljs-number">100</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; stu<span class="hljs-number">1.</span>name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; stu<span class="hljs-number">1.</span>age  &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu<span class="hljs-number">1.</span>score &lt;&lt; endl;<br><br><span class="hljs-comment">//ç»“æ„ä½“å˜é‡åˆ›å»ºæ–¹å¼2</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span> stu2 = &#123; <span class="hljs-string">&quot;æå››&quot;</span>,<span class="hljs-number">19</span>,<span class="hljs-number">60</span> &#125;;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; stu<span class="hljs-number">2.</span>name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; stu<span class="hljs-number">2.</span>age  &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu<span class="hljs-number">2.</span>score &lt;&lt; endl;<br><br><br>stu<span class="hljs-number">3.</span>name = <span class="hljs-string">&quot;ç‹äº”&quot;</span>;<br>stu<span class="hljs-number">3.</span>age = <span class="hljs-number">18</span>;<br>stu<span class="hljs-number">3.</span>score = <span class="hljs-number">80</span>;<br><br><br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; stu<span class="hljs-number">3.</span>name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; stu<span class="hljs-number">3.</span>age  &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu<span class="hljs-number">3.</span>score &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“1ï¼šå®šä¹‰ç»“æ„ä½“æ—¶çš„å…³é”®å­—æ˜¯structï¼Œä¸å¯çœç•¥</p></blockquote><blockquote><p>æ€»ç»“2ï¼šåˆ›å»ºç»“æ„ä½“å˜é‡æ—¶ï¼Œå…³é”®å­—structå¯ä»¥çœç•¥</p></blockquote><blockquote><p>æ€»ç»“3ï¼šç»“æ„ä½“å˜é‡åˆ©ç”¨æ“ä½œç¬¦ â€˜â€™.â€˜â€™  è®¿é—®æˆå‘˜</p></blockquote><h3 id="8-3-ç»“æ„ä½“æ•°ç»„">8.3 ç»“æ„ä½“æ•°ç»„</h3><p>**ä½œç”¨ï¼š**å°†è‡ªå®šä¹‰çš„ç»“æ„ä½“æ”¾å…¥åˆ°æ•°ç»„ä¸­æ–¹ä¾¿ç»´æŠ¤</p><p><strong>è¯­æ³•ï¼š</strong><code> struct  ç»“æ„ä½“å æ•°ç»„å[å…ƒç´ ä¸ªæ•°] = &#123;  &#123;&#125; , &#123;&#125; , ... &#123;&#125; &#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//ç»“æ„ä½“å®šä¹‰</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span><br>&#123;<br><span class="hljs-comment">//æˆå‘˜åˆ—è¡¨</span><br>string name;  <span class="hljs-comment">//å§“å</span><br><span class="hljs-type">int</span> age;      <span class="hljs-comment">//å¹´é¾„</span><br><span class="hljs-type">int</span> score;    <span class="hljs-comment">//åˆ†æ•°</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-comment">//ç»“æ„ä½“æ•°ç»„</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span> arr[<span class="hljs-number">3</span>]=<br>&#123;<br>&#123;<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">80</span> &#125;,<br>&#123;<span class="hljs-string">&quot;æå››&quot;</span>,<span class="hljs-number">19</span>,<span class="hljs-number">60</span> &#125;,<br>&#123;<span class="hljs-string">&quot;ç‹äº”&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-number">70</span> &#125;<br>&#125;;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; arr[i].name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; arr[i].age &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; arr[i].score &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-4-ç»“æ„ä½“æŒ‡é’ˆ">8.4 ç»“æ„ä½“æŒ‡é’ˆ</h3><p>**ä½œç”¨ï¼š**é€šè¿‡æŒ‡é’ˆè®¿é—®ç»“æ„ä½“ä¸­çš„æˆå‘˜</p><ul><li>åˆ©ç”¨æ“ä½œç¬¦ <code>-&gt; </code>å¯ä»¥é€šè¿‡ç»“æ„ä½“æŒ‡é’ˆè®¿é—®ç»“æ„ä½“å±æ€§</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//ç»“æ„ä½“å®šä¹‰</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span><br>&#123;<br><span class="hljs-comment">//æˆå‘˜åˆ—è¡¨</span><br>string name;  <span class="hljs-comment">//å§“å</span><br><span class="hljs-type">int</span> age;      <span class="hljs-comment">//å¹´é¾„</span><br><span class="hljs-type">int</span> score;    <span class="hljs-comment">//åˆ†æ•°</span><br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span> stu = &#123; <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">100</span>, &#125;;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span> * p = &amp;stu;<br><br>p-&gt;score = <span class="hljs-number">80</span>; <span class="hljs-comment">//æŒ‡é’ˆé€šè¿‡ -&gt; æ“ä½œç¬¦å¯ä»¥è®¿é—®æˆå‘˜</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; p-&gt;name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; p-&gt;age &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; p-&gt;score &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šç»“æ„ä½“æŒ‡é’ˆå¯ä»¥é€šè¿‡ -&gt; æ“ä½œç¬¦ æ¥è®¿é—®ç»“æ„ä½“ä¸­çš„æˆå‘˜</p></blockquote><h3 id="8-5-ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“">8.5 ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“</h3><p><strong>ä½œç”¨ï¼š</strong> ç»“æ„ä½“ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯å¦ä¸€ä¸ªç»“æ„ä½“</p><p>**ä¾‹å¦‚ï¼š**æ¯ä¸ªè€å¸ˆè¾…å¯¼ä¸€ä¸ªå­¦å‘˜ï¼Œä¸€ä¸ªè€å¸ˆçš„ç»“æ„ä½“ä¸­ï¼Œè®°å½•ä¸€ä¸ªå­¦ç”Ÿçš„ç»“æ„ä½“</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å­¦ç”Ÿç»“æ„ä½“å®šä¹‰</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span><br>&#123;<br><span class="hljs-comment">//æˆå‘˜åˆ—è¡¨</span><br>string name;  <span class="hljs-comment">//å§“å</span><br><span class="hljs-type">int</span> age;      <span class="hljs-comment">//å¹´é¾„</span><br><span class="hljs-type">int</span> score;    <span class="hljs-comment">//åˆ†æ•°</span><br>&#125;;<br><br><span class="hljs-comment">//æ•™å¸ˆç»“æ„ä½“å®šä¹‰</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">teacher</span><br>&#123;<br>    <span class="hljs-comment">//æˆå‘˜åˆ—è¡¨</span><br><span class="hljs-type">int</span> id; <span class="hljs-comment">//èŒå·¥ç¼–å·</span><br>string name;  <span class="hljs-comment">//æ•™å¸ˆå§“å</span><br><span class="hljs-type">int</span> age;   <span class="hljs-comment">//æ•™å¸ˆå¹´é¾„</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span> stu; <span class="hljs-comment">//å­ç»“æ„ä½“ å­¦ç”Ÿ</span><br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">teacher</span> t1;<br>t<span class="hljs-number">1.</span>id = <span class="hljs-number">10000</span>;<br>t<span class="hljs-number">1.</span>name = <span class="hljs-string">&quot;è€ç‹&quot;</span>;<br>t<span class="hljs-number">1.</span>age = <span class="hljs-number">40</span>;<br><br>t<span class="hljs-number">1.</span>stu.name = <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>t<span class="hljs-number">1.</span>stu.age = <span class="hljs-number">18</span>;<br>t<span class="hljs-number">1.</span>stu.score = <span class="hljs-number">100</span>;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;æ•™å¸ˆ èŒå·¥ç¼–å·ï¼š &quot;</span> &lt;&lt; t<span class="hljs-number">1.</span>id &lt;&lt; <span class="hljs-string">&quot; å§“åï¼š &quot;</span> &lt;&lt; t<span class="hljs-number">1.</span>name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; t<span class="hljs-number">1.</span>age &lt;&lt; endl;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;è¾…å¯¼å­¦å‘˜ å§“åï¼š &quot;</span> &lt;&lt; t<span class="hljs-number">1.</span>stu.name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; t<span class="hljs-number">1.</span>stu.age &lt;&lt; <span class="hljs-string">&quot; è€ƒè¯•åˆ†æ•°ï¼š &quot;</span> &lt;&lt; t<span class="hljs-number">1.</span>stu.score &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**åœ¨ç»“æ„ä½“ä¸­å¯ä»¥å®šä¹‰å¦ä¸€ä¸ªç»“æ„ä½“ä½œä¸ºæˆå‘˜ï¼Œç”¨æ¥è§£å†³å®é™…é—®é¢˜</p><h3 id="8-6-ç»“æ„ä½“åšå‡½æ•°å‚æ•°">8.6 ç»“æ„ä½“åšå‡½æ•°å‚æ•°</h3><p>**ä½œç”¨ï¼š**å°†ç»“æ„ä½“ä½œä¸ºå‚æ•°å‘å‡½æ•°ä¸­ä¼ é€’</p><p>ä¼ é€’æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ul><li>å€¼ä¼ é€’</li><li>åœ°å€ä¼ é€’</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å­¦ç”Ÿç»“æ„ä½“å®šä¹‰</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span><br>&#123;<br><span class="hljs-comment">//æˆå‘˜åˆ—è¡¨</span><br>string name;  <span class="hljs-comment">//å§“å</span><br><span class="hljs-type">int</span> age;      <span class="hljs-comment">//å¹´é¾„</span><br><span class="hljs-type">int</span> score;    <span class="hljs-comment">//åˆ†æ•°</span><br>&#125;;<br><br><span class="hljs-comment">//å€¼ä¼ é€’</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printStudent</span><span class="hljs-params">(student stu )</span></span><br><span class="hljs-function"></span>&#123;<br>stu.age = <span class="hljs-number">28</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;å­å‡½æ•°ä¸­ å§“åï¼š&quot;</span> &lt;&lt; stu.name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; stu.age  &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu.score &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//åœ°å€ä¼ é€’</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printStudent2</span><span class="hljs-params">(student *stu)</span></span><br><span class="hljs-function"></span>&#123;<br>stu-&gt;age = <span class="hljs-number">28</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;å­å‡½æ•°ä¸­ å§“åï¼š&quot;</span> &lt;&lt; stu-&gt;name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; stu-&gt;age  &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu-&gt;score &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>student stu = &#123; <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">100</span>&#125;;<br><span class="hljs-comment">//å€¼ä¼ é€’</span><br><span class="hljs-built_in">printStudent</span>(stu);<br>cout &lt;&lt; <span class="hljs-string">&quot;ä¸»å‡½æ•°ä¸­ å§“åï¼š&quot;</span> &lt;&lt; stu.name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; stu.age &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu.score &lt;&lt; endl;<br><br>cout &lt;&lt; endl;<br><br><span class="hljs-comment">//åœ°å€ä¼ é€’</span><br><span class="hljs-built_in">printStudent2</span>(&amp;stu);<br>cout &lt;&lt; <span class="hljs-string">&quot;ä¸»å‡½æ•°ä¸­ å§“åï¼š&quot;</span> &lt;&lt; stu.name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; stu.age  &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu.score &lt;&lt; endl;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå¦‚æœä¸æƒ³ä¿®æ”¹ä¸»å‡½æ•°ä¸­çš„æ•°æ®ï¼Œç”¨å€¼ä¼ é€’ï¼Œåä¹‹ç”¨åœ°å€ä¼ é€’</p></blockquote><h3 id="8-7-ç»“æ„ä½“ä¸­-constä½¿ç”¨åœºæ™¯">8.7 ç»“æ„ä½“ä¸­ constä½¿ç”¨åœºæ™¯</h3><p>**ä½œç”¨ï¼š**ç”¨constæ¥é˜²æ­¢è¯¯æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å­¦ç”Ÿç»“æ„ä½“å®šä¹‰</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span><br>&#123;<br><span class="hljs-comment">//æˆå‘˜åˆ—è¡¨</span><br>string name;  <span class="hljs-comment">//å§“å</span><br><span class="hljs-type">int</span> age;      <span class="hljs-comment">//å¹´é¾„</span><br><span class="hljs-type">int</span> score;    <span class="hljs-comment">//åˆ†æ•°</span><br>&#125;;<br><br><span class="hljs-comment">//constä½¿ç”¨åœºæ™¯</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printStudent</span><span class="hljs-params">(<span class="hljs-type">const</span> student *stu)</span> <span class="hljs-comment">//åŠ consté˜²æ­¢å‡½æ•°ä½“ä¸­çš„è¯¯æ“ä½œ</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//stu-&gt;age = 100; //æ“ä½œå¤±è´¥ï¼Œå› ä¸ºåŠ äº†constä¿®é¥°</span><br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š&quot;</span> &lt;&lt; stu-&gt;name &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; stu-&gt;age &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu-&gt;score &lt;&lt; endl;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>student stu = &#123; <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">18</span>,<span class="hljs-number">100</span> &#125;;<br><br><span class="hljs-built_in">printStudent</span>(&amp;stu);<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-8-ç»“æ„ä½“æ¡ˆä¾‹">8.8 ç»“æ„ä½“æ¡ˆä¾‹</h3><h4 id="8-8-1-æ¡ˆä¾‹1">8.8.1 æ¡ˆä¾‹1</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>å­¦æ ¡æ­£åœ¨åšæ¯•è®¾é¡¹ç›®ï¼Œæ¯åè€å¸ˆå¸¦é¢†5ä¸ªå­¦ç”Ÿï¼Œæ€»å…±æœ‰3åè€å¸ˆï¼Œéœ€æ±‚å¦‚ä¸‹</p><p>è®¾è®¡å­¦ç”Ÿå’Œè€å¸ˆçš„ç»“æ„ä½“ï¼Œå…¶ä¸­åœ¨è€å¸ˆçš„ç»“æ„ä½“ä¸­ï¼Œæœ‰è€å¸ˆå§“åå’Œä¸€ä¸ªå­˜æ”¾5åå­¦ç”Ÿçš„æ•°ç»„ä½œä¸ºæˆå‘˜</p><p>å­¦ç”Ÿçš„æˆå‘˜æœ‰å§“åã€è€ƒè¯•åˆ†æ•°ï¼Œåˆ›å»ºæ•°ç»„å­˜æ”¾3åè€å¸ˆï¼Œé€šè¿‡å‡½æ•°ç»™æ¯ä¸ªè€å¸ˆåŠæ‰€å¸¦çš„å­¦ç”Ÿèµ‹å€¼</p><p>æœ€ç»ˆæ‰“å°å‡ºè€å¸ˆæ•°æ®ä»¥åŠè€å¸ˆæ‰€å¸¦çš„å­¦ç”Ÿæ•°æ®ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Student</span><br>&#123;<br>string name;<br><span class="hljs-type">int</span> score;<br>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Teacher</span><br>&#123;<br>string name;<br>Student sArray[<span class="hljs-number">5</span>];<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">allocateSpace</span><span class="hljs-params">(Teacher tArray[] , <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br>string tName = <span class="hljs-string">&quot;æ•™å¸ˆ&quot;</span>;<br>string sName = <span class="hljs-string">&quot;å­¦ç”Ÿ&quot;</span>;<br>string nameSeed = <span class="hljs-string">&quot;ABCDE&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>&#123;<br>tArray[i].name = tName + nameSeed[i];<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">5</span>; j++)<br>&#123;<br>tArray[i].sArray[j].name = sName + nameSeed[j];<br>tArray[i].sArray[j].score = <span class="hljs-built_in">rand</span>() % <span class="hljs-number">61</span> + <span class="hljs-number">40</span>;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printTeachers</span><span class="hljs-params">(Teacher tArray[], <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>&#123;<br>cout &lt;&lt; tArray[i].name &lt;&lt; endl;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">5</span>; j++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;\tå§“åï¼š&quot;</span> &lt;&lt; tArray[i].sArray[j].name &lt;&lt; <span class="hljs-string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; tArray[i].sArray[j].score &lt;&lt; endl;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-built_in">srand</span>((<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>)); <span class="hljs-comment">//éšæœºæ•°ç§å­ å¤´æ–‡ä»¶ #include &lt;ctime&gt;</span><br><br>Teacher tArray[<span class="hljs-number">3</span>]; <span class="hljs-comment">//è€å¸ˆæ•°ç»„</span><br><br><span class="hljs-type">int</span> len = <span class="hljs-built_in">sizeof</span>(tArray) / <span class="hljs-built_in">sizeof</span>(Teacher);<br><br><span class="hljs-built_in">allocateSpace</span>(tArray, len); <span class="hljs-comment">//åˆ›å»ºæ•°æ®</span><br><br><span class="hljs-built_in">printTeachers</span>(tArray, len); <span class="hljs-comment">//æ‰“å°æ•°æ®</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="8-8-2-æ¡ˆä¾‹2">8.8.2 æ¡ˆä¾‹2</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>è®¾è®¡ä¸€ä¸ªè‹±é›„çš„ç»“æ„ä½“ï¼ŒåŒ…æ‹¬æˆå‘˜å§“åï¼Œå¹´é¾„ï¼Œæ€§åˆ«;åˆ›å»ºç»“æ„ä½“æ•°ç»„ï¼Œæ•°ç»„ä¸­å­˜æ”¾5åè‹±é›„ã€‚</p><p>é€šè¿‡å†’æ³¡æ’åºçš„ç®—æ³•ï¼Œå°†æ•°ç»„ä¸­çš„è‹±é›„æŒ‰ç…§å¹´é¾„è¿›è¡Œå‡åºæ’åºï¼Œæœ€ç»ˆæ‰“å°æ’åºåçš„ç»“æœã€‚</p><p>äº”åè‹±é›„ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs C++">&#123;<span class="hljs-string">&quot;åˆ˜å¤‡&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;å…³ç¾½&quot;</span>,<span class="hljs-number">22</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;å¼ é£&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;èµµäº‘&quot;</span>,<span class="hljs-number">21</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;è²‚è‰&quot;</span>,<span class="hljs-number">19</span>,<span class="hljs-string">&quot;å¥³&quot;</span>&#125;,<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//è‹±é›„ç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">hero</span><br>&#123;<br>string name;<br><span class="hljs-type">int</span> age;<br>string sex;<br>&#125;;<br><span class="hljs-comment">//å†’æ³¡æ’åº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubbleSort</span><span class="hljs-params">(hero arr[] , <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len - <span class="hljs-number">1</span>; i++)<br>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; len - <span class="hljs-number">1</span> - i; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (arr[j].age &gt; arr[j + <span class="hljs-number">1</span>].age)<br>&#123;<br>hero temp = arr[j];<br>arr[j] = arr[j + <span class="hljs-number">1</span>];<br>arr[j + <span class="hljs-number">1</span>] = temp;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">//æ‰“å°æ•°ç»„</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printHeros</span><span class="hljs-params">(hero arr[], <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å§“åï¼š &quot;</span> &lt;&lt; arr[i].name &lt;&lt; <span class="hljs-string">&quot; æ€§åˆ«ï¼š &quot;</span> &lt;&lt; arr[i].sex &lt;&lt; <span class="hljs-string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; arr[i].age &lt;&lt; endl;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">hero</span> arr[<span class="hljs-number">5</span>] =<br>&#123;<br>&#123;<span class="hljs-string">&quot;åˆ˜å¤‡&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;å…³ç¾½&quot;</span>,<span class="hljs-number">22</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;å¼ é£&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;èµµäº‘&quot;</span>,<span class="hljs-number">21</span>,<span class="hljs-string">&quot;ç”·&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;è²‚è‰&quot;</span>,<span class="hljs-number">19</span>,<span class="hljs-string">&quot;å¥³&quot;</span>&#125;,<br>&#125;;<br><br><span class="hljs-type">int</span> len = <span class="hljs-built_in">sizeof</span>(arr) / <span class="hljs-built_in">sizeof</span>(hero); <span class="hljs-comment">//è·å–æ•°ç»„å…ƒç´ ä¸ªæ•°</span><br><br><span class="hljs-built_in">bubbleSort</span>(arr, len); <span class="hljs-comment">//æ’åº</span><br><br><span class="hljs-built_in">printHeros</span>(arr, len); <span class="hljs-comment">//æ‰“å°</span><br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ç»“æŸover</h1>]]></content>
      
      
      <categories>
          
          <category> C++æ•™ç¨‹ä¸“è¾‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> åŸºç¡€è®²è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++å®ç°è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼ˆäºŒï¼‰Socketç¯‡</title>
      <link href="/2022/03/24/C-%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%EF%BC%88%E4%BA%8C%EF%BC%89Socket%E7%AF%87/"/>
      <url>/2022/03/24/C-%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%EF%BC%88%E4%BA%8C%EF%BC%89Socket%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<h1>C++å®ç°è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼ˆäºŒï¼‰Socketç¯‡</h1><h2 id="Socketç®€ä»‹">Socketç®€ä»‹</h2><p>80å¹´ä»£åˆï¼Œäººä»¬åœ¨UNIXæ“ä½œç³»ç»Ÿä¸‹å®ç°TCP/IPåè®®ã€‚</p><p>ç ”ç©¶äººå‘˜ä¸ºTCP/IPç½‘ç»œé€šä¿¡å¼€å‘äº†ä¸€ä¸ªAPIï¼ˆåº”ç”¨ç¨‹åºæ¥å£ï¼‰ã€‚</p><p>è¿™ä¸ªAPIç§°ä¸ºSocketæ¥å£ï¼ˆå¥—æ¥å­—ï¼‰ã€‚</p><p>SOCKETæ¥å£æ˜¯TCP/IPç½‘ç»œæœ€ä¸ºé€šç”¨çš„APIï¼Œä¹Ÿæ˜¯åœ¨INTERNETä¸Šè¿›è¡Œåº”ç”¨å¼€å‘æœ€ä¸ºé€šç”¨çš„APIã€‚</p><p>90å¹´ä»£åˆï¼ŒMicrosoftè”åˆäº†å…¶ä»–å‡ å®¶å…¬å¸å…±åŒåˆ¶å®šäº†ä¸€å¥—WINDOWSä¸‹çš„ç½‘ç»œç¼–ç¨‹æ¥å£ï¼Œå³WindowsSocketsè§„èŒƒã€‚</p><h2 id="Socketçš„æœºåˆ¶æ˜¯ä»€ä¹ˆ">Socketçš„æœºåˆ¶æ˜¯ä»€ä¹ˆ</h2><p>ç®€å•çš„æŠŠSocketç†è§£ä¸ºä¸€ä¸ªå¯ä»¥è¿é€šç½‘ç»œä¸Šä¸åŒè®¡ç®—æœºç¨‹åºä¹‹é—´çš„ç®¡é“ï¼ŒæŠŠä¸€å †æ•°æ®ä»ç®¡é“çš„Aç«¯æ‰”è¿›å»ï¼Œåˆ™ä¼šä»ç®¡é“çš„Bç«¯ï¼ˆä¹Ÿè®¸åŒæ—¶è¿˜å¯ä»¥ä»Cã€Dã€Eã€Fâ€¦â€¦ç«¯å†’å‡ºæ¥ï¼‰ã€‚</p><p>ç®¡é“çš„ç«¯å£ç”±ä¸¤ä¸ªå› ç´ æ¥å”¯ä¸€ç¡®è®¤ï¼Œå³æœºå™¨çš„IPåœ°å€å’Œç¨‹åºæ‰€ä½¿ç”¨çš„ç«¯å£å·ã€‚</p><p>ç«¯å£å·å°±æ˜¯ç¨‹åºå‘˜æŒ‡å®šçš„ä¸€ä¸ªæ•°å­—ï¼Œå¦‚ï¼šhttpçš„80ç«¯å£å’Œftpçš„21ç«¯å£ã€‚</p><p>å»ºè®®å¤§å®¶è‡ªå·±å†™ç¨‹åºä¸è¦ä½¿ç”¨å¤ªå°çš„ç«¯å£å·ï¼Œå®ƒä»¬ä¸€èˆ¬è¢«ç³»ç»Ÿå ç”¨äº†ï¼Œä¹Ÿä¸è¦ä½¿ç”¨ä¸€äº›è‘—åçš„ç«¯å£ï¼Œä¸€èˆ¬æ¥è¯´ä½¿ç”¨1000~5000ä¹‹å†…çš„ç«¯å£æ¯”è¾ƒå¥½ã€‚</p><p>Socketå¯ä»¥æ”¯æŒæ•°æ®çš„å‘é€å’Œæ¥æ”¶</p><p>å®ƒå®šä¹‰ä¸€ç§ç§°ä¸ºå¥—æ¥å­—çš„å˜é‡ï¼Œå‘é€æ•°æ®æ—¶é¦–å…ˆåˆ›å»ºå¥—æ¥å­—ï¼Œç„¶åä½¿ç”¨è¯¥å¥—æ¥å­—çš„sendtoç­‰æ–¹æ³•å¯¹å‡†æŸä¸ªIP/ç«¯å£è¿›è¡Œæ•°æ®å‘é€</p><p>æ¥æ”¶ç«¯ä¹Ÿé¦–å…ˆåˆ›å»ºå¥—æ¥å­—ï¼Œç„¶åå°†è¯¥å¥—æ¥å­—ç»‘å®šåˆ°ä¸€ä¸ªIP/ç«¯å£ä¸Šï¼Œæ‰€æœ‰å‘å‘æ­¤ç«¯å£çš„æ•°æ®ä¼šè¢«è¯¥å¥—æ¥å­—çš„recvç­‰å‡½æ•°è¯»å‡ºã€‚å¦‚åŒè¯»å‡ºæ–‡ä»¶ä¸­çš„æ•°æ®ä¸€æ ·ã€‚</p><p>æ‰€éœ€çš„å¤´æ–‡ä»¶ã€åº“æ–‡ä»¶å’ŒDLL</p><p>æœ€å¹¿æ³›çš„Windows Socket2.0ç‰ˆæœ¬ï¼Œæ‰€éœ€çš„ä¸€äº›æ–‡ä»¶å¦‚ä¸‹ï¼ˆä»¥å®‰è£…äº†VC6ä¸ºä¾‹è¯´æ˜å…¶ç‰©ç†ä½ç½®ï¼‰ï¼š</p><p>ï¼ˆ1ï¼‰å¤´æ–‡ä»¶winsock2.hï¼Œé€šå¸¸å¤„äºC:â€œProgram Filesâ€Microsoft Visual Studioâ€œVC98â€INCLUDEï¼›æŸ¥çœ‹è¯¥å¤´æ–‡ä»¶å¯çŸ¥å…¶ä¸­åˆåŒ…å«äº†windows.hå’Œpshpack4.hå¤´æ–‡ä»¶ï¼Œå› æ­¤åœ¨windowsä¸­çš„ä¸€äº›å¸¸ç”¨APIéƒ½å¯ä»¥ä½¿ç”¨</p><p>ï¼ˆ2ï¼‰åº“æ–‡ä»¶Ws2_32.libï¼Œé€šå¸¸å¤„äºC:&quot;Program Files&quot;Microsoft Visual Studio&quot;VC98&quot;Libï¼›</p><p>ï¼ˆ3ï¼‰DLLæ–‡ä»¶Ws2_32.dllï¼Œé€šå¸¸å¤„äºC:&quot;WINDOWS&quot;system32ã€‚</p><p>ç¼–å†™Socketç¨‹åºéœ€è¦çš„ç¼–ç¨‹åŸºç¡€</p><p>ï¼ˆ1ï¼‰C++è¯­æ³•ï¼›</p><p>ï¼ˆ2ï¼‰ä¸€ç‚¹windows SDKçš„åŸºç¡€ï¼Œäº†è§£ä¸€äº›SDKçš„æ•°æ®ç±»å‹ä¸APIçš„è°ƒç”¨æ–¹å¼ï¼›</p><p>ï¼ˆ3ï¼‰ä¸€ç‚¹ç¼–è¯‘ã€é“¾æ¥å’Œæ‰§è¡Œçš„æŠ€æœ¯ã€‚</p><p>å¢åŠ äº†ä¸€äº›å¼‚æ­¥å‡½æ•°ï¼Œå¹¶å¢åŠ äº†ç¬¦åˆWindowsæ¶ˆæ¯é©±åŠ¨ç‰¹æ€§çš„ç½‘ç»œäº‹ä»¶å¼‚æ­¥é€‰æ‹©æœºåˆ¶ã€‚</p><p>WINDOWSSOCKETSè§„èŒƒæ˜¯ä¸€å¥—å¼€æ”¾çš„ã€æ”¯æŒå¤šç§åè®®çš„Windowsä¸‹çš„ç½‘ç»œç¼–ç¨‹æ¥å£ã€‚</p><p>ä»1991å¹´çš„1.0ç‰ˆåˆ°1995å¹´çš„2.0.8ç‰ˆï¼Œç»è¿‡ä¸æ–­å®Œå–„å¹¶åœ¨Intelã€Microsoftã€Sunã€SGIã€Informixã€Novellç­‰å…¬å¸çš„å…¨åŠ›æ”¯æŒä¸‹ï¼Œå·²æˆä¸ºWindowsç½‘ç»œç¼–ç¨‹çš„äº‹å®ä¸Šçš„æ ‡å‡†ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­çš„WINDOWSSOKCETSè§„èŒƒä¸»è¦æœ‰1.1ç‰ˆå’Œ2.0ç‰ˆã€‚</p><p>ä¸¤è€…çš„æœ€é‡è¦åŒºåˆ«æ˜¯1.1ç‰ˆåªæ”¯æŒTCP/IPåè®®ï¼Œè€Œ2.0ç‰ˆå¯ä»¥æ”¯æŒå¤šåè®®ã€‚</p><p>2.0ç‰ˆæœ‰è‰¯å¥½çš„å‘åå…¼å®¹æ€§ï¼Œä»»ä½•ä½¿ç”¨1.1ç‰ˆçš„æºä»£ç ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåº”ç”¨ç¨‹åºéƒ½å¯ä»¥ä¸åŠ ä¿®æ”¹åœ°åœ¨2.0è§„èŒƒä¸‹ä½¿ç”¨ã€‚</p><p>SOCKETå®é™…åœ¨è®¡ç®—æœºä¸­æä¾›äº†ä¸€ä¸ªé€šä¿¡ç«¯å£ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªç«¯å£ä¸ä»»ä½•ä¸€ä¸ªå…·æœ‰SOCKETæ¥å£çš„è®¡ç®—æœºé€šä¿¡ã€‚</p><p>åº”ç”¨ç¨‹åºåœ¨ç½‘ç»œä¸Šä¼ è¾“ï¼Œæ¥æ”¶çš„ä¿¡æ¯éƒ½é€šè¿‡è¿™ä¸ªSOCKETæ¥å£æ¥å®ç°ã€‚</p><p>åœ¨åº”ç”¨å¼€å‘ä¸­å°±åƒä½¿ç”¨æ–‡ä»¶å¥æŸ„ä¸€æ ·ï¼Œå¯ä»¥å¯¹SOCKETå¥æŸ„è¿›è¡Œè¯»ï¼Œå†™æ“ä½œã€‚</p><h2 id="UDP">UDP</h2><p>æ‰€è°“UDPï¼Œå°±æ˜¯å‘é€å‡ºå»å°±ä¸ç®¡çš„ä¸€ç§ç½‘ç»œåè®®ã€‚</p><p>UDPç¼–ç¨‹çš„å‘é€ç«¯åªç®¡å‘é€å°±å¯ä»¥äº†ï¼Œä¸ç”¨æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€ã€‚</p><p>ä¸‹é¢ç”¨ä¾‹1æ¥è¯´æ˜æ€æ ·ç¼–å†™UDPï¼Œå¹¶ä¼šè¯¦ç»†è§£é‡Šæ¯ä¸ªAPIå’Œæ•°æ®ç±»å‹ã€‚</p><p>SOCKETç±»å‹</p><p>SOCKETæ˜¯socketå¥—æ¥å­—ç±»å‹ï¼Œåœ¨WINSOCK2.Hä¸­æœ‰å¦‚ä¸‹å®šä¹‰ï¼š</p><pre><code class="hljs">  typedef unsigned int    u_int;  typedef u_int           SOCKET;</code></pre><p>å¯çŸ¥å¥—æ¥å­—å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´å‹ï¼Œå®ƒå°†è¢«Socketç¯å¢ƒç®¡ç†å’Œä½¿ç”¨ã€‚</p><p>å¥—æ¥å­—å°†è¢«åˆ›å»ºã€è®¾ç½®ã€ç”¨æ¥å‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œæœ€åä¼šè¢«å…³é—­ã€‚</p><p>WORDç±»å‹ã€MAKEWORDã€LOBYTEå’ŒHIBYTEå®</p><p>WORDç±»å‹æ˜¯ä¸€ä¸ª16ä½çš„æ— ç¬¦å·æ•´å‹ï¼Œåœ¨WTYPES.Hä¸­è¢«å®šä¹‰ä¸ºï¼š</p><pre><code class="hljs">typedef unsigned short WORD;</code></pre><p>ç›®çš„æ˜¯æä¾›ä¸¤ä¸ªå­—èŠ‚çš„å­˜å‚¨ï¼Œåœ¨Socketä¸­è¿™ä¸¤ä¸ªå­—èŠ‚å¯ä»¥è¡¨ç¤ºä¸»ç‰ˆæœ¬å·å’Œå‰¯ç‰ˆæœ¬å·ã€‚</p><p>ä½¿ç”¨MAKEWORDå®å¯ä»¥ç»™ä¸€ä¸ªWORDç±»å‹èµ‹å€¼ã€‚ä¾‹å¦‚è¦è¡¨ç¤ºä¸»ç‰ˆæœ¬å·2ï¼Œå‰¯ç‰ˆæœ¬å·0ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><pre><code class="hljs">WORD wVersionRequested;wVersionRequested = MAKEWORD( 2, 0 ); </code></pre><p>æ³¨æ„ä½ä½å†…å­˜å­˜å‚¨ä¸»ç‰ˆæœ¬å·2ï¼Œé«˜ä½å†…å­˜å­˜å‚¨å‰¯ç‰ˆæœ¬å·0ï¼Œå…¶å€¼ä¸º0x0002ã€‚ä½¿ç”¨å®LOBYTEå¯ä»¥è¯»å–WORDçš„ä½ä½å­—èŠ‚ï¼ŒHIBYTEå¯ä»¥è¯»å–é«˜ä½å­—èŠ‚ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œä¸Šé¡¹ç›®å§~</p><h1>å¥—å­—èŠ‚å®ç°é€šä¿¡</h1><p>æœ¬å®ç°çš„ç¯å¢ƒæ˜¯å»ºç«‹åœ¨linuxä¸Šï¼Œå¦‚éœ€Windowsä¸‹å®ç°ï¼Œè¯·ç»™äºˆå…¶åº“æ–‡ä»¶ä»¥åŠDLLæ–‡ä»¶ã€‚</p><p>å¥—å­—èŠ‚ï¼ˆsocketï¼‰æœåŠ¡ç«¯å®ä¾‹ socket.h</p><pre><code class="hljs">#pragma once#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;sys/socket.h&gt;#include &lt;cstdio&gt;#include &lt;cstdlib&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;cerrno&gt;#include &lt;netinet/in.h&gt;#include &lt;string.h&gt;//ç›‘å¬8000ç«¯å£#define PORT 8000 #define MAXLINE 4096class socket_s&#123;&#125;;</code></pre><p>å¥—å­—èŠ‚ï¼ˆsocketï¼‰æœåŠ¡ç«¯å®ä¾‹ socket.cpp</p><pre><code class="hljs">/*    2022-3-18    æµ‹è¯•å¥—å­—èŠ‚ï¼ˆsocketï¼‰æœåŠ¡ç«¯å®ä¾‹    ä½œè€…ï¼šè¿æ€é‘«*/#include &quot;socket_s.h&quot;using namespace std;int main()&#123;    //è¿™æ˜¯æœåŠ¡å™¨    cout &lt;&lt; &quot;this is server&quot; &lt;&lt; endl;    //socket    //åˆå§‹åŒ–socketï¼Œå¹¶æ£€æµ‹æ˜¯éƒ½æˆåŠŸ    int listenfd = socket(AF_INET, SOCK_STREAM, 0);    if (listenfd == -1)    &#123;        perror(&quot;socket fail&quot;);        exit(1);    &#125;    //bind    //ç»‘å®šsocket    struct sockaddr_in addr;    addr.sin_family = AF_INET;    addr.sin_port = htons(PORT);    addr.sin_addr.s_addr = INADDR_ANY;    //åˆ¤æ–­ç»‘å®šæ˜¯å¦å¤±è´¥    if (bind(listenfd,(struct sockaddr*)&amp;addr, sizeof(addr)) == -1)    &#123;        perror(&quot;bind fail&quot;);        exit(2);    &#125;    //listen    //ç›‘å¬    if (listen(listenfd, 5) == -1)    &#123;        perror(&quot;linsten fail&quot;);        exit(3);    &#125;    //accept    //æ¥æ”¶å®¢æˆ·ç«¯æ•°æ®    int conn;    char clientIP[INET_ADDRSTRLEN] = &quot;&quot;;    struct sockaddr_in clientAddr;    socklen_t clientAddrLen = sizeof(clientAddr);    while (1)    &#123;        cout &lt;&lt; &quot;.....listening&quot; &lt;&lt; endl;        conn = accept(listenfd, (struct sockaddr*)&amp;clientAddr, &amp;clientAddrLen);        if (conn &lt; 0)        &#123;            perror(&quot;accept fail&quot;);            exit(4);        &#125;        inet_ntop(AF_INET, &amp;clientAddr.sin_addr, clientIP, INET_ADDRSTRLEN);        cout &lt;&lt; &quot;.......connect&quot; &lt;&lt; clientIP &lt;&lt; &quot;:&quot; &lt;&lt; ntohs(clientAddr.sin_port) &lt;&lt; endl;        char buf[1024];        while (true)        &#123;            memset(buf, 0, sizeof(buf));            //æ¥å—æ•°æ®            int len = recv(conn, buf, sizeof(buf), 0);            buf[len] = '\0';            if (strcmp(buf, &quot;exit&quot;) == 0)            &#123;                cout &lt;&lt; &quot;.......disconnect&quot; &lt;&lt; clientIP &lt;&lt; &quot;:&quot; &lt;&lt; ntohs(clientAddr.sin_port) &lt;&lt; endl;                break;            &#125;            cout &lt;&lt; buf &lt;&lt; endl;            //å‘é€æ•°æ®            send(conn, buf, len, 0);        &#125;        close(conn);    &#125;    close(listenfd);    return 0;&#125;</code></pre><p>å¥—å­—èŠ‚ï¼ˆsocketï¼‰ç”¨æˆ·ç«¯å®ä¾‹ socket_u.h</p><pre><code class="hljs">#pragma once#include &lt;iostream&gt;#include &lt;sys/socket.h&gt;#include &lt;cstdio&gt;#include &lt;cstdlib&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;cerrno&gt;#include &lt;netinet/in.h&gt;#include &lt;string.h&gt;//ç›‘å¬8000ç«¯å£#define PORT 8000 #define MAXLINE 4096class socket_u&#123;&#125;;</code></pre><p>å¥—å­—èŠ‚ï¼ˆsocketï¼‰ç”¨æˆ·ç«¯å®ä¾‹ socket_u.cpp</p><pre><code class="hljs">/*    2022-3-18    æµ‹è¯•å¥—å­—èŠ‚ï¼ˆsocketï¼‰ç”¨æˆ·ç«¯å®ä¾‹    ä½œè€…ï¼šè¿æ€é‘«*/#include &quot;socket_u.h&quot;#include &lt;iostream&gt;using namespace std;int main()&#123;    //è¿™æ˜¯å®¢æˆ·ç«¯    cout &lt;&lt; &quot;this is user&quot; &lt;&lt; endl;    //socket    //åˆå§‹åŒ–socketï¼Œå¹¶æ£€æµ‹æ˜¯éƒ½æˆåŠŸ    int ulient = socket(AF_INET, SOCK_STREAM, 0);    if (ulient == -1)    &#123;        perror(&quot;socket fail&quot;);        exit(1);    &#125;    //connect    struct sockaddr_in serverAddr;    serverAddr.sin_family = AF_INET;    serverAddr.sin_port = htons(PORT);    serverAddr.sin_addr.s_addr = inet_addr(&quot;127.0.0.1&quot;);    if (connect(ulient, (struct sockaddr*)&amp;serverAddr, sizeof(serverAddr)) &lt; 0)    &#123;        cout &lt;&lt; &quot;connect fail&quot; &lt;&lt; endl;        exit(2);    &#125;    cout &lt;&lt; &quot;.....connect&quot; &lt;&lt; endl;    char data[1024];    char buf[1024];    while (true)    &#123;        cin &gt;&gt; data;        send(ulient, data, strlen(data), 0);        if (strcmp(data, &quot;exit&quot;) == 0)        &#123;            cout &lt;&lt; &quot;......disconnect&quot; &lt;&lt; endl;            break;        &#125;        memset(buf, 0, sizeof(buf));        int len = recv(ulient, buf, sizeof(buf), 0);        buf[len] = '\0';        cout &lt;&lt; buf &lt;&lt; endl;    &#125;    close(ulient);    return 0;&#125;</code></pre><p>ç»“æŸover~</p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> ç¬”è®° </tag>
            
            <tag> è¿›ç¨‹é—´é€šä¿¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++å®ç°è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼ˆä¸€ï¼‰FIFOç¯‡</title>
      <link href="/2022/03/23/%E7%94%A8C-%E5%AE%9E%E7%8E%B0FIFO%E7%9A%84%E5%8A%9F%E8%83%BD/"/>
      <url>/2022/03/23/%E7%94%A8C-%E5%AE%9E%E7%8E%B0FIFO%E7%9A%84%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<h1>C++å®ç°è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼ˆä¸€ï¼‰FIFOç¯‡</h1><h2 id="ä¸€ï¼ŒC-å¸¸ç”¨è¿›ç¨‹é—´é€šä¿¡">ä¸€ï¼ŒC++ å¸¸ç”¨è¿›ç¨‹é—´é€šä¿¡</h2><blockquote><p>ç®¡é“(Pipe)ï¼šç®¡é“å¯ç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»è¿›ç¨‹é—´çš„é€šä¿¡ï¼Œå…è®¸ä¸€ä¸ªè¿›ç¨‹å’Œå¦ä¸€ä¸ªä¸å®ƒæœ‰å…±åŒç¥–å…ˆçš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚</p></blockquote><blockquote><p>å‘½åç®¡é“(named pipe)ï¼šå‘½åç®¡é“å…‹æœäº†ç®¡é“æ²¡æœ‰åå­—çš„é™åˆ¶ï¼Œå› æ­¤ï¼Œé™¤å…·æœ‰ç®¡é“æ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œå®ƒè¿˜å…è®¸æ— äº²ç¼˜å…³ç³»è¿›ç¨‹é—´çš„é€šä¿¡ã€‚å‘½åç®¡é“åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æœ‰å¯¹åº”çš„æ–‡ä»¶åã€‚å‘½åç®¡é“é€šè¿‡å‘½ä»¤mkfifoæˆ–ç³»ç»Ÿè°ƒç”¨mkfifoæ¥åˆ›å»ºã€‚</p></blockquote><blockquote><p>ä¿¡å·(Signal)ï¼šä¿¡å·æ˜¯æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥å—è¿›ç¨‹æœ‰æŸç§äº‹ä»¶å‘ç”Ÿï¼Œé™¤äº†ç”¨äºè¿›ç¨‹é—´é€šä¿¡å¤–ï¼Œè¿›ç¨‹è¿˜å¯ä»¥å‘é€ä¿¡å·ç»™è¿›ç¨‹æœ¬èº«;Linuxé™¤äº†æ”¯æŒUnixæ—©æœŸä¿¡å·è¯­ä¹‰å‡½æ•°sigalå¤–ï¼Œè¿˜æ”¯æŒè¯­ä¹‰ç¬¦åˆPosix.1æ ‡å‡†çš„ä¿¡å·å‡½æ•°sigaction(å®é™…ä¸Šï¼Œè¯¥å‡½æ•°æ˜¯åŸºäºBSDçš„ï¼ŒBSDä¸ºäº†å®ç°å¯é ä¿¡å·æœºåˆ¶ï¼Œåˆèƒ½å¤Ÿç»Ÿä¸€å¯¹å¤–æ¥å£ï¼Œç”¨sigactionå‡½æ•°é‡æ–°å®ç°äº†signalå‡½æ•°)ã€‚</p></blockquote><blockquote><p>æ¶ˆæ¯(Message)é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾æ¥è¡¨ï¼ŒåŒ…æ‹¬Posixæ¶ˆæ¯é˜Ÿåˆ—system Væ¶ˆæ¯é˜Ÿåˆ—ã€‚æœ‰è¶³å¤Ÿæƒé™çš„è¿›ç¨‹å¯ä»¥å‘é˜Ÿåˆ—ä¸­æ·»åŠ æ¶ˆæ¯ï¼Œè¢«èµ‹äºˆè¯»æƒé™çš„è¿›ç¨‹åˆ™å¯ä»¥è¯»èµ°é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹ã€‚</p></blockquote><blockquote><p>å…±äº«å†…å­˜ï¼šä½¿å¾—å¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œæ˜¯æœ€å¿«çš„å¯ç”¨IPCå½¢å¼ã€‚æ˜¯é’ˆå¯¹å…¶ä»–é€šä¿¡æœºåˆ¶è¿è¡Œæ•ˆç‡è¾ƒä½è€Œè®¾è®¡çš„ã€‚å¾€å¾€ä¸å…¶å®ƒé€šä¿¡æœºåˆ¶ï¼Œå¦‚ä¿¡å·é‡ç»“åˆä½¿ç”¨ï¼Œæ¥è¾¾åˆ°è¿›ç¨‹é—´çš„åŒæ­¥åŠäº’æ–¥ã€‚</p></blockquote><blockquote><p>ä¿¡å·é‡(semaphore)ï¼šä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µã€‚</p></blockquote><blockquote><p>å¥—æ¥å­—(Socket)ï¼šæ›´ä¸ºä¸€èˆ¬çš„è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼Œå¯ç”¨äºä¸åŒæœºå™¨ä¹‹é—´çš„è¿›ç¨‹é—´é€šä¿¡ã€‚èµ·åˆæ˜¯ç”±Unixç³»ç»Ÿçš„BSDåˆ†æ”¯å¼€å‘å‡ºæ¥çš„ï¼Œä½†ç°åœ¨ä¸€èˆ¬å¯ä»¥ç§»æ¤åˆ°å…¶å®ƒç±»Unixç³»ç»Ÿä¸Šï¼šLinuxå’ŒSystem Vçš„å˜ç§éƒ½æ”¯æŒå¥—æ¥å­—ã€‚</p></blockquote><p>ä»Šå¤©æˆ‘ä»¬è¦ç ”ç©¶çš„å°±æ˜¯å…¶ä¸­çš„FIFOå®ç°è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p><h2 id="äºŒã€æ— åFIFOçš„å®ç°">äºŒã€æ— åFIFOçš„å®ç°</h2><p>è¯·çœ‹ä»£ç ï¼š</p><pre><code class="hljs">/*    2022-3-17    æµ‹è¯•æ— åç®¡é“å®ä¾‹    ä½œè€…ï¼šè¿æ€é‘«*/#pragma once#include &lt;stdio.h&gt;#include &lt;iostream&gt;#include &lt;fcntl.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/stat.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &quot;main.h&quot;using namespace std;int main()&#123;    int _pipe[2] = &#123; 0, 0 &#125;;    int ret = pipe(_pipe); //åˆ›å»ºæ— åç®¡é“ï¼Œå‚æ•°è¿”å›å†™å’Œè¯»æ–‡ä»¶æ“ä½œç¬¦    if (ret == -1)    &#123;        cout &lt;&lt; &quot;cerate pipe fail&quot; &lt;&lt; endl;        return 1;    &#125;    cout &lt;&lt; &quot;create pipe:&quot; &lt;&lt; _pipe[0] &lt;&lt; _pipe[1] &lt;&lt; endl;    //forkä¸€ä¸ªå­è¿›ç¨‹å‡ºæ¥    pid_t cid = fork();    if (cid &lt; 0)    &#123;        cout &lt;&lt; &quot;fork fail!&quot; &lt;&lt; endl;        return 2;    &#125;    //æµ‹è¯•å­è¿›ç¨‹å†™â€”â€”&gt;çˆ¶è¿›ç¨‹è¯»æ¶ˆæ¯    if (cid == 0)    &#123;        cout &lt;&lt; &quot;Child Writing....&quot; &lt;&lt; endl;        close(_pipe[0]);        //å‘é€æ•°æ®åˆ°pipe        int count = 5;        const char* msg = &quot;I love you !!!&quot;;        while (count--)        &#123;            write(_pipe[1], msg, strlen(msg));            sleep(1);        &#125;        close(_pipe[1]);        exit(1); //é€€å‡ºå­è¿›ç¨‹    &#125;    else    &#123;        cout &lt;&lt; &quot;father reading......&quot; &lt;&lt; endl;        close(_pipe[1]);        // è¯»å–pipeæ•°æ®        char msg[1024];        int count = 5;        while (true)        &#123;            ssize_t n = read(_pipe[0], msg, sizeof(msg) - 1);            if (n &gt; 0)            &#123;                msg[n] = '\0';                cout &lt;&lt; &quot;recive from chil: &quot; &lt;&lt; msg &lt;&lt; endl;            &#125;            else            &#123;                cout &lt;&lt; &quot;read emoty!&quot; &lt;&lt; endl;                break;            &#125;        &#125;        //*ç­‰å­è¿›ç¨‹ç»“æŸååœ¨é€€å‡ºçˆ¶è¿›ç¨‹        //if (waitpid(cid, 0, 0) != -1)        //&#123;        //cout &lt;&lt; &quot;child closed!&quot; &lt;&lt; endl;        //&#125;    &#125;    return 0;&#125;</code></pre><p></p><h2 id="ä¸‰ã€ç®¡é“çš„å»ºç«‹ä¸é€šä¿¡çš„å®ç°">ä¸‰ã€ç®¡é“çš„å»ºç«‹ä¸é€šä¿¡çš„å®ç°</h2><p>ç›´æ¥çœ‹ä»£ç å§ï¼Œæˆ‘éƒ½å†™äº†æ³¨é‡Šâ€¦</p><p>å‘é€ç«¯å¤´æ–‡ä»¶ fifo_s.h</p><pre><code class="hljs">#pragma once#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;fcntl.h&gt;#include &lt;sys/stat.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;iostream&gt;</code></pre><p>å‘é€ç«¯å®ç°fifo_s.cpp</p><pre><code class="hljs">/*    2022-3-18    æµ‹è¯•æœ‰åç®¡é“fifoå‘é€ç«¯å®ä¾‹    ä½œè€…ï¼šè¿æ€é‘«*/#include &quot;fifo_s.h&quot;using namespace std;int main()&#123;    string name = &quot;.myfifo&quot;;    //åˆ›å»ºä¸€ä¸ªå­˜å–æƒé™ä¸º0666çš„å‘½åç®¡é“    unlink(name.c_str());  //name.c_str()æ˜¯å°†stringç±»å‹è½¬æ¢æˆcharç±»å‹ï¼Œå› æœ‰çš„å‡½æ•°åªèƒ½æ‰“å¼€charç±»å‹å‘½åçš„æ–‡ä»¶ã€‚unlinkæ˜¯åˆ é™¤æ–‡ä»¶ï¼Œåˆ é™¤ä¹‹å‰ä¼šæ£€æŸ¥é“¾æ¥ï¼Œå¦‚æœæœ‰é“¾æ¥åˆ™ä¸åˆ     int namepipo = mkfifo(name.c_str(),S_IFIFO | 0666); // mkfifoæ˜¯åˆ›å»ºç®¡é“å¯¹è±¡    if (namepipo == -1)    &#123;        perror(&quot;mkfifo fail!\n&quot;); //åˆ›å»ºå¤±è´¥        exit(1);    &#125;    //åªå†™çš„æ–¹å¼æ‰“å¼€å‘½åçš„ç®¡é“    int fd = open(name.c_str(), O_WRONLY); //O_WRONLYæ˜¯ä»¥åªå†™çš„æ–¹å¼æ‰“å¼€    // int fd = open(name.c_str(), O_RDONLY); //åªè¯»    // int fd = open(name.c_str(), O_RDWR); //å¯è¯»å¯å†™ç­‰ã€‚ã€‚ã€‚    if (fd == -1)    &#123;        perror(&quot;open fifo fail!\n&quot;);  //æ‰“å¼€å¤±è´¥        exit(2);    &#125;    // å‘ç®¡é“å‘é€æ•°æ®    char buf[1024]; //ç¼“å­˜ï¼Œç”¨äºå­˜æ”¾å‘é€æ•°æ®çš„    while (1)    &#123;        printf(&quot;sendto fifo:&quot;);        //è¯¥è¯­å¥æ•´ä½“ä½œç”¨ï¼šä¸€èˆ¬åœ¨printfååŠ ï¼Œå¼ºåˆ¶é©¬ä¸Šè¾“å‡ºç¼“å†²åŒºçš„å†…å®¹ï¼Œé˜²æ­¢è¾“å‡ºé”™è¯¯ã€‚        fflush(stdout); //fflushä½œç”¨ï¼Œæ¸…ç©ºæ–‡ä»¶ç¼“å†²åŒºï¼Œå¦‚æœæ–‡ä»¶æ˜¯æ‰“å¼€çš„åˆ™æŠŠç¼“å†²åŒºå†…å®¹å†™å…¥æ–‡ä»¶ ||stdout:ä¸æ ‡å‡†è¾“å‡ºæµå…³è”ï¼Œç”¨äºå†™å…¥çº¦å®šçš„è¾“å‡ºã€‚ç¨‹åºå¯åŠ¨æ—¶ï¼Œè¯¥æµä¸ºå®Œå…¨ç¼“å†²å½“ä¸”ä»…å½“èƒ½ç¡®å®šæµä¸å¼•ç”¨äº¤äº’å¼è®¾å¤‡        ssize_t n = read(0, buf, sizeof(buf) - 1); //ä»æ ‡å‡†è¾“å…¥è·å¾—æ¶ˆæ¯ï¼Œè¯»å–æ–‡ä»¶ï¼Œå­—èŠ‚æ•°å¤§å°-1,å¾ªç¯è¯»å–å­—èŠ‚        if (n &gt; 0)        &#123;            buf[n - 1] = '\0';  //è¿‡æ»¤æ‰æ¢è¡Œç¬¦            if (write(fd, buf, n) == -1)            &#123;                perror(&quot;write fifo fail!&quot;);                exit(3);            &#125;        &#125;    &#125;    close(fd);    return 0;&#125;</code></pre><p>æ¥å—ç«¯å¤´æ–‡ä»¶fifo_u.h</p><pre><code class="hljs">#pragma once#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;fcntl.h&gt;#include &lt;sys/stat.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;iostream&gt;</code></pre><p>æ¥æ”¶ç«¯å®ç°fifo_u.cpp</p><pre><code class="hljs">  /*      2022-3-18      æµ‹è¯•æœ‰åç®¡é“fifoæ¥å—ç«¯å®ä¾‹      ä½œè€…ï¼šè¿æ€é‘«  */  #include &quot;fifo_u.h&quot;  using namespace std;  int main()  &#123;      string name = &quot;.myfifo&quot;;      int fd = open(name.c_str(), O_RDONLY);      if (fd == -1)      &#123;          perror(&quot;open fifo fail!&quot;);          exit(1);      &#125;      //æ¥å—ç®¡é“æ•°æ®      char buf[1024];      while (1)      &#123;          ssize_t s = read(fd, buf, sizeof(buf) - 1);          if (s &gt;0 )          &#123;              printf(&quot;receive from fifo: %s\n&quot;, buf);          &#125;          else          &#123;              perror(&quot;read fifo fail&quot;);              exit(2);          &#125;      &#125;      close(fd);      return 0;  &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> ç¬”è®° </tag>
            
            <tag> è¿›ç¨‹é—´é€šä¿¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨Linuxå‘½ä»¤æ€»ç»“</title>
      <link href="/2022/03/12/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4/"/>
      <url>/2022/03/12/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1>å¸¸ç”¨Linuxå‘½ä»¤æ€»ç»“</h1><p>å› ä¸ºåœ¨åšåµŒå…¥å¼C/C++å¼€å‘ï¼Œç¦»ä¸å¼€Linuxã€‚æ‰€ä»¥ï¼Œåœ¨æ­¤æ€»ç»“ä¸€ä¸‹å¸¸ç”¨çš„Linuxå‘½ä»¤ï¼Œä»¥å…å¿˜è®°ä¸”æœ‰åˆ©äºæŸ¥è¯¢ã€‚</p><h2 id="ç½‘ç»œ-ï¼ˆä»¥å¤ªç½‘å’ŒWIFIæ— çº¿ï¼‰ï¼ï¼é‡è¦ï¼ï¼">ç½‘ç»œ - ï¼ˆä»¥å¤ªç½‘å’ŒWIFIæ— çº¿ï¼‰ï¼ï¼é‡è¦ï¼ï¼</h2><blockquote><p><strong>ps:æœ€è¿‘ä¸€ä¸¤å‘¨éƒ½åœ¨ä½¿ç”¨è¿™ç©æ„å•Šå–‚</strong>~</p></blockquote><h3 id="1-hostname">1.hostname</h3><p>hostname æ²¡æœ‰é€‰é¡¹ï¼Œæ˜¾ç¤ºä¸»æœºåå­—</p><p>hostname â€“d æ˜¾ç¤ºæœºå™¨æ‰€å±åŸŸå</p><p>hostname â€“f æ˜¾ç¤ºå®Œæ•´çš„ä¸»æœºåå’ŒåŸŸå</p><p>hostname â€“i æ˜¾ç¤ºå½“å‰æœºå™¨çš„ ip åœ°å€</p><blockquote><p>è¡¥å……ï¼šå…¶å®ä½¿ç”¨ â€œhostname+æ–°çš„ä¸»æœºåâ€ å‘½ä»¤è¿˜å¯ä»¥ä¸´æ—¶è®¾ç½®ä¸»æœºå,æ¯”å¦‚hostname newnameè¿™æ ·ç”¨çš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥ä¸´æ—¶ä¿®æ”¹ä¸»æœºåç§°è€Œä¸ç”¨é‡å¯ã€‚è€Œé€šè¿‡/etc/sysconfig/network æ–‡ä»¶æ¥ä¿®æ”¹ä¸»æœºååˆ™éœ€è¦é‡å¯æ‰èƒ½ç”Ÿæ•ˆã€‚å½“ç„¶ï¼Œæˆ‘ä»¬åœ¨åœ¨æ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œå¿…é¡»è®°å¾—æ‰‹åŠ¨ä¿®æ”¹/etc/sysconfig/network æ–‡ä»¶é‡Œé¢çš„ HOSTNAME çš„å€¼ï¼Œä»¥ä¾¿åç»­é‡å¯ç”Ÿæ•ˆï¼Œè¿™ç®—æ˜¯ä¸€ä¸ªå°æŠ€å·§å“¦ï¼</p></blockquote><h3 id="2-ping">2. ping</h3><p>ping å°†æ•°æ®åŒ…å‘å‘ç”¨æˆ·æŒ‡å®šåœ°å€ã€‚å½“åŒ…è¢«æ¥æ”¶ï¼Œç›®æ ‡æœºå™¨å‘é€è¿”å›æ•°æ®åŒ…ã€‚ping ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p><ol><li>ç”¨æ¥ç¡®è®¤ç½‘ç»œè¿æ¥æ˜¯ç•…é€šçš„ã€‚</li><li>ç”¨æ¥æŸ¥çœ‹è¿æ¥çš„é€Ÿåº¦ä¿¡æ¯ã€‚</li></ol><p>å¦‚æœä½  ping <a href="http://zhangge.net">zhangge.net</a>  å®ƒå°†è¿”å›å®ƒçš„ ip åœ°å€ ã€‚ä½ å¯ä»¥é€šè¿‡ ctrl+C æ¥åœæ­¢å‘½ä»¤ã€‚</p><blockquote><p>ps:ä¸Šä¸€å‘¨ä¸€ç›´åœ¨pingå„ç§ipï¼Œå›åˆ°å…¬å¸æ­å»ºå†…éƒ¨å±€åŸŸç½‘ä¼°è®¡åˆè¦pingæ¥pingå»â€¦è¡¥å……ï¼š-c å‚æ•°å¯ä»¥å®šä¹‰ ping çš„æ¬¡æ•°ï¼Œè„šæœ¬ä¸­çš„ç½‘ç»œåˆ¤æ–­ç”¨å¾—æ¯”è¾ƒå¤šã€‚è€Œåœ¨ windows ä¸‹ï¼Œåˆ™ä½¿ç”¨-n å‚æ•°æ¥å®šä¹‰ ping æ¬¡æ•°ï¼Œå¦‚ ping -n 4 <a href="http://zhangge.net">zhangge.net</a></p></blockquote><h3 id="3-ifconfig">3. ifconfig</h3><p>è¿™ä¸ªç±»æ˜¯Windowsçš„ipconfigï¼Œéƒ½æ˜¯æŸ¥çœ‹ç”¨æˆ·çš„ç½‘ç»œé…ç½®çš„ã€‚</p><p>ifconfigæ˜¯Linuxç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„ä¸€ä¸ªç”¨æ¥æ˜¾ç¤ºå’Œè®¾ç½®ç½‘ç»œè®¾å¤‡çš„å·¥å…·ã€‚å…¶ä¸­â€œifâ€æ˜¯â€œinterfaceâ€çš„ç¼©å†™ã€‚å®ƒå¯ä»¥ç”¨æ¥è®¾å¤‡ç½‘å¡çš„çŠ¶æ€ï¼Œæˆ–æ˜¯æ˜¾ç¤ºå½“å‰çš„è®¾ç½®ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ç®€å•åœ°è¯´æ˜å¸¸ç”¨çš„å‘½ä»¤ç»„åˆï¼š</p><p>1ï¼‰ å°†ç¬¬ä¸€å—ç½‘å¡çš„IPåœ°å€è®¾ç½®ä¸º192.168.0.1ï¼š</p><pre><code class="hljs"> ifconfig eth0 192.168.0.1 ï¼ˆæ ¼å¼ï¼šifconfig ç½‘ç»œè®¾å¤‡å IPåœ°å€ï¼‰ </code></pre><p>2ï¼‰ æš‚æ—¶å…³é—­æˆ–å¯ç”¨ç½‘å¡ï¼š</p><pre><code class="hljs"> å…³é—­ç¬¬ä¸€å—ç½‘å¡ï¼šifconfig eth0 down  å¯ç”¨ç¬¬ä¸€å—ç½‘å¡ï¼šifconfig eth0 up </code></pre><p>3ï¼‰ å°†ç¬¬ä¸€å—ç½‘å¡çš„å­ç½‘æ©ç è®¾ç½®ä¸º255.255.255.0ï¼š</p><pre><code class="hljs"> ifconfig eth0 netmask 255.255.255.0ï¼ˆæ ¼å¼ï¼šifconfig ç½‘ç»œè®¾å¤‡å netmask å­ç½‘æ©ç ï¼‰ </code></pre><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åŒæ—¶è®¾ç½®IPåœ°å€å’Œå­ç½‘æ©ç ï¼š</p><pre><code class="hljs"> ifconfig eth0 192.168.0.1 netmask 255.255.255.0 </code></pre><p>4ï¼‰ å°†ç¬¬ä¸€å—ç½‘å¡çš„å¹¿æ’­åœ°å€è®¾ç½®ä¸º192.168.0.255ï¼š</p><pre><code class="hljs"> ifconfig eth0 â€“broadcast 192.168.0.255 </code></pre><p>5ï¼‰ å°†ç¬¬ä¸€å—ç½‘å¡è®¾ç½®ä¸ºä¸æ¥æ”¶å¤šæ’­æ•°æ®åŒ…ï¼š</p><pre><code class="hljs"> ifconifg eth0 allmulti </code></pre><p>å¦‚æœè¦è®©å…¶æ¥æ”¶ï¼Œåˆ™ä½¿ç”¨å‘½ä»¤ï¼š</p><pre><code class="hljs"> ifconfig eth0 -allmulti </code></pre><p>6ï¼‰ æŸ¥çœ‹ç¬¬ä¸€å—ç½‘å¡çš„çŠ¶æ€ï¼š</p><pre><code class="hljs"> ifconfig eth0 </code></pre><p>å¦‚æœè¦æŸ¥çœ‹æ‰€æœ‰çš„ç½‘å¡çŠ¶æ€ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„ifconfigå‘½ä»¤å³å¯ã€‚</p><p>ifconfigè¾“å‡ºçš„çŠ¶æ€ä¿¡æ¯æ˜¯ååˆ†æœ‰ç”¨çš„ï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬å°±ç®€å•è¯´æ˜ä¸€ä¸‹ï¼š</p><p>æœ‰å‡ ä¸ªçŠ¶æ€æ¯”è¾ƒé‡è¦ï¼š</p><pre><code class="hljs"> ? UP/DOWNï¼šç½‘å¡æ˜¯å¦å¯åŠ¨äº†ï¼Œå¦‚æœæ˜¯DOWNçš„è¯ï¼Œé‚£è‚¯å®šæ— æ³•ç”¨çš„ï¼›  ? RX packetsä¸­çš„errorsåŒ…çš„æ•°é‡å¦‚æœè¿‡å¤§è¯´æ˜ç½‘å¡åœ¨æ¥æ”¶æ—¶æœ‰é—®é¢˜ï¼›  ? TX packetsä¸­çš„errorsåŒ…çš„æ•°é‡å¦‚æœè¿‡å¤§è¯´æ˜ç½‘å¡åœ¨å‘é€æ—¶æœ‰é—®é¢˜ï¼› </code></pre><h3 id="4-iwconfig">4. iwconfig</h3><p>iwconfig å·¥å…·ä¸ ifconfig å’Œ ethtool ç±»ä¼¼ã€‚æ˜¯ç”¨äºæ— çº¿ç½‘å¡çš„ã€‚</p><p>ä½ å¯ä»¥ç”¨ä»–æŸ¥çœ‹è®¾ç½®åŸºæœ¬çš„ Wi-Fi ç½‘ç»œä¿¡æ¯,</p><p>ä¾‹å¦‚ SSID, channel å’Œ encryption.è¿˜æœ‰å…¶ä»–å¾ˆå¤šé…ç½®ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹å’Œä¿®æ”¹ï¼Œ, åŒ…æ‹¬ æ¥æ”¶çµæ•åº¦, RTS/CTS, å‘é€æ•°æ®åŒ…çš„åˆ†ç‰‡å¤§å°,ä»¥åŠæ— çº¿ç½‘å¡çš„é‡ä¼ æœºåˆ¶ã€‚</p><h3 id="5-nslookup">5. nslookup</h3><p>nslookup è¿™ä¸ªå‘½ä»¤åœ¨æœ‰ipåœ°å€æ—¶ï¼Œå¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤æ¥æ˜¾ç¤ºä¸»æœºåï¼Œå¯ä»¥æ‰¾åˆ°ç»™å®šåŸŸåçš„æ‰€æœ‰ ip åœ°å€ã€‚è€Œä½ å¿…é¡»è¿æ¥åˆ°äº’è”ç½‘æ‰èƒ½ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ã€‚</p><p>ä¾‹å¦‚ï¼š nslookup <a href="http://marsge.cn">marsge.cn</a></p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ nslookup ä» ip è·å¾—ä¸»æœºåæˆ–ä»ä¸»æœºåè·å¾— ipã€‚</p><h3 id="6-traceroute">6. traceroute</h3><p>ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ã€‚å¯ç”¨æ¥æŸ¥çœ‹æ•°æ®åŒ…åœ¨æäº¤åˆ°è¿œç¨‹ç³»ç»Ÿæˆ–è€…ç½‘ç«™æ—¶å€™æ‰€ç»è¿‡çš„è·¯ç”±å™¨çš„ IP åœ°å€ã€è·³æ•°å’Œå“åº”æ—¶é—´ã€‚åŒæ ·ä½ å¿…é¡»é“¾æ¥åˆ°äº’è”ç½‘æ‰èƒ½ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ã€‚</p><h3 id="7-finger">7. finger</h3><p>æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ã€‚æ˜¾ç¤ºç”¨æˆ·çš„ç™»å½•åå­—ã€çœŸå®åå­—ä»¥åŠç™»å½•ç»ˆç«¯çš„åå­—å’Œç™»å½•æƒé™ã€‚è¿™æ˜¯ unix ä¸€ä¸ªå¾ˆè€çš„å‘½ä»¤ï¼Œç°åœ¨å·²å¾ˆå°‘ä½¿ç”¨äº†ã€‚</p><h3 id="8-telnet">8. telnet</h3><p>é€šè¿‡ telnet åè®®è¿æ¥ç›®æ ‡ä¸»æœºï¼Œå¦‚æœ telnet è¿æ¥å¯ä»¥åœ¨ä»»ä¸€ç«¯å£ä¸Šå®Œæˆå³ä»£è¡¨ç€ä¸¤å°ä¸»æœºé—´çš„è¿æ¥è‰¯å¥½ã€‚</p><p>telnet hostname port - ä½¿ç”¨æŒ‡å®šçš„ç«¯å£ telnet ä¸»æœºåã€‚è¿™é€šå¸¸ç”¨æ¥æµ‹è¯•ä¸»æœºæ˜¯å¦åœ¨çº¿æˆ–è€…ç½‘ç»œæ˜¯å¦æ­£å¸¸ã€‚</p><h3 id="9-ethtool">9. ethtool</h3><p>ethtool å…è®¸ä½ æŸ¥çœ‹å’Œæ›´æ”¹ç½‘å¡çš„è®¸å¤šè®¾ç½®ï¼ˆä¸åŒ…æ‹¬ Wi-Fi ç½‘å¡ï¼‰ã€‚ä½ å¯ä»¥ç®¡ç†è®¸å¤šé«˜çº§è®¾ç½®ï¼ŒåŒ…æ‹¬ tx/rxã€æ ¡éªŒåŠç½‘ç»œå”¤é†’åŠŸèƒ½ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä½ å¯èƒ½æ„Ÿå…´è¶£çš„åŸºæœ¬å‘½ä»¤ï¼š</p><pre><code class="hljs">ethtool -i //æ˜¾ç¤ºä¸€ä¸ªç‰¹å®šç½‘å¡çš„é©±åŠ¨ä¿¡æ¯ï¼Œæ£€æŸ¥è½¯ä»¶å…¼å®¹æ€§æ—¶å°¤å…¶æœ‰ç”¨ethtool -p //å¯åŠ¨ä¸€ä¸ªé€‚é…å™¨çš„æŒ‡å®šè¡Œä¸ºï¼Œæ¯”å¦‚è®©é€‚é…å™¨çš„ LED ç¯é—ªçƒï¼Œä»¥å¸®åŠ©ä½ åœ¨å¤šä¸ªé€‚é…å™¨æˆ–æ¥å£ä¸­æ ‡è¯†æ¥å£åç§°ethtool -s //æ˜¾ç¤ºç½‘ç»œç»Ÿè®¡ä¿¡æ¯ethtool speed &lt;10|100|1000&gt; //è®¾ç½®é€‚é…å™¨çš„è¿æ¥é€Ÿåº¦ï¼Œå•ä½æ˜¯ Mbps</code></pre><h3 id="10-netstat">10. netstat</h3><p>å‘ç°ä¸»æœºè¿æ¥æœ€æœ‰ç”¨æœ€é€šç”¨çš„ Linux å‘½ä»¤ã€‚ä½ å¯ä»¥ä½¿ç”¨â€netstat -gâ€æŸ¥è¯¢è¯¥ä¸»æœºè®¢é˜…çš„æ‰€æœ‰å¤šæ’­ç»„ï¼ˆç½‘ç»œï¼‰</p><pre><code class="hljs">netstat -nap | grep port //å°†ä¼šæ˜¾ç¤ºä½¿ç”¨è¯¥ç«¯å£çš„åº”ç”¨ç¨‹åºçš„è¿›ç¨‹ idnetstat -a or netstat â€“all //å°†ä¼šæ˜¾ç¤ºåŒ…æ‹¬ TCP å’Œ UDP çš„æ‰€æœ‰è¿æ¥netstat â€“tcp or netstat â€“t //å°†ä¼šæ˜¾ç¤º TCP è¿æ¥netstat â€“udp or netstat â€“u //å°†ä¼šæ˜¾ç¤º UDP è¿æ¥netstat -g //å°†ä¼šæ˜¾ç¤ºè¯¥ä¸»æœºè®¢é˜…çš„æ‰€æœ‰å¤šæ’­ç½‘ç»œã€‚</code></pre><h3 id="11-ifup">11. ifup</h3><p>ifupå‘½ä»¤ç”¨äºé‡æ–°å¯åŠ¨æŒ‡å®šçš„ç½‘ç»œè®¾å¤‡ã€‚ifupå‘½ä»¤çš„æ ¼å¼ä¸ºï¼šifup ç½‘ç»œè®¾å¤‡æ–‡ä»¶åã€‚</p><p>ifupå‘½ä»¤ä½¿ç”¨ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="hljs">ifup eth0  //é‡æ–°å¯åŠ¨ç½‘å¡eth0ã€‚ifup lo  //é‡æ–°å¯åŠ¨æœ¬åœ°å›ç»•ç½‘å¡loã€‚</code></pre><h3 id="12-ifdown">12.ifdown</h3><p>ifdownå‘½ä»¤ç”¨äºå…³é—­æŒ‡å®šçš„ç½‘ç»œè®¾å¤‡ã€‚ifdownå‘½ä»¤çš„æ ¼å¼ä¸ºï¼šifdown ç½‘ç»œè®¾å¤‡æ–‡ä»¶åã€‚</p><p>ifdownå‘½ä»¤ä½¿ç”¨ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="hljs">ifdown eth0  //å…³é—­ç½‘å¡eth0ã€‚ifdown lo  //å…³é—­æœ¬åœ°å›ç»•ç½‘å¡loã€‚ </code></pre><h3 id="13ï¼ethtool">13ï¼ethtool</h3><p>ethtoolå‘½ä»¤ç”¨æ¥æŸ¥çœ‹æˆ–è€…ä¿®æ”¹æŒ‡å®šç½‘å¡çš„å·¥ä½œæ–¹å¼ã€‚</p><p>ethtoolå‘½ä»¤çš„ä½¿ç”¨ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="hljs">     ethtool eth0 // æŸ¥çœ‹ç½‘å¡eth0çš„å·¥ä½œæ–¹å¼ï¼Œå†…å®¹åŒ…æ‹¬ç½‘å¡çš„ä¼ è¾“é€Ÿåº¦ã€å…¨åŒå·¥æˆ–åŠåŒå·¥ä¼ è¾“ã€ç½‘å¡è¿æ¥æ£€æµ‹æ˜¯å¦æ¿€æ´»ã€ç½‘å¡æ˜¯å¦å·¥ä½œåœ¨è‡ªåŠ¨åå•†çŠ¶æ€ç­‰ã€‚     ethtool â€“s eth0 speed 10 duplex half   // è®¾ç½®ç½‘å¡eth0çš„ä¼ è¾“é€Ÿåº¦ä¸º10Mã€åŠåŒå·¥ä¼ è¾“æ¨¡å¼ã€‚     ethtool â€“s eth1 speed 100 duplex full autoneg off  // è®¾ç½®ç½‘å¡eth1çš„ä¼ è¾“é€Ÿåº¦ä¸º100Mã€å…¨åŒå·¥ã€éè‡ªåŠ¨åå•†æ¨¡å¼ã€‚        </code></pre><h3 id="14ï¼mii-tool">14ï¼mii-tool</h3><p>mii-toolå‘½ä»¤ç”¨äºæŸ¥çœ‹æˆ–ä¿®æ”¹æŒ‡å®šç½‘å¡çš„é€šä¿¡åå•†æ–¹å¼ã€‚</p><p>mii-toolå‘½ä»¤çš„ä½¿ç”¨ä¸¾ä¾‹å¦‚ä¸‹:</p><pre><code class="hljs">   mii-tool // ä»¥ç®€æ˜çš„å½¢å¼æ˜¾ç¤ºæœ¬æœºç‰©ç†ç½‘å¡çš„å·¥ä½œæ–¹å¼ã€‚   mii-tool â€“v // ä»¥è¯¦ç»†çš„å½¢å¼æ˜¾ç¤ºæœ¬æœºç‰©ç†ç½‘å¡çš„å·¥ä½œæ–¹å¼ã€‚   mii-tool -F 10baseT-FD eth0 // è®¾ç½®ç½‘å¡eth0å·¥ä½œåœ¨10Mã€å…¨åŒå·¥æ¨¡å¼ä¸‹ã€‚   mii-tool â€“r eth0 // è®¾ç½®ç½‘å¡eth0å·¥ä½œåœ¨è‡ªåŠ¨åå•†å·¥ä½œæ¨¡å¼ã€‚   mii-tool â€“w eth0 // å®æ—¶ç›‘æ§ç½‘å¡eth0å·¥ä½œæ¨¡å¼çš„æ”¹å˜ã€‚</code></pre><h3 id="15-route">15.route</h3><p>routeå‘½ä»¤æ˜¯ç”¨æ¥æŸ¥çœ‹å’Œè®¾ç½®Linuxç³»ç»Ÿçš„è·¯ç”±ä¿¡æ¯ï¼Œä»¥å®ç°ä¸å…¶å®ƒç½‘ç»œçš„é€šè®¯ã€‚è¦å®ç°ä¸¤ä¸ªä¸åŒçš„å­ç½‘ä¹‹é—´çš„ç½‘ç»œé€šè®¯ï¼Œéœ€è¦ä¸€å°è¿æ¥ä¸¤ä¸ªç½‘ç»œè·¯ç”±å™¨æˆ–è€…åŒæ—¶ä½äºä¸¤ä¸ªç½‘ç»œçš„ç½‘å…³æ¥å®ç°ã€‚</p><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬é€šå¸¸è®¾ç½®è·¯ç”±æ˜¯ä¸ºäº†è§£å†³ä»¥ä¸‹é—®é¢˜ï¼šè¯¥Linuxæœºå™¨åœ¨ä¸€ä¸ªå±€åŸŸç½‘ä¸­ï¼Œå±€åŸŸç½‘ä¸­æœ‰ä¸€ä¸ªç½‘å…³ï¼Œèƒ½å¤Ÿè®©ä½ çš„æœºå™¨è®¿é—®Internetï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å°†è¿™å°æœºå™¨çš„IPåœ°å€è®¾ç½®ä¸ºLinuxæœºå™¨çš„é»˜è®¤è·¯ç”±ã€‚</p><p>1ï¼‰ å¢åŠ ä¸€ä¸ªé»˜è®¤è·¯ç”±ï¼š</p><pre><code class="hljs">route add 0.0.0.0 gw ç½‘å…³åœ°å€ </code></pre><p>2ï¼‰ åˆ é™¤ä¸€ä¸ªé»˜è®¤è·¯ç”±ï¼š</p><pre><code class="hljs"> route del 0.0.0.0 gw ç½‘å…³åœ°å€ </code></pre><p>3ï¼‰ æ˜¾ç¤ºå‡ºå½“å‰è·¯ç”±è¡¨</p><pre><code class="hljs">route</code></pre><p>routeå‘½ä»¤çš„ä½¿ç”¨ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="hljs"> route // æ˜¾ç¤ºè·¯ç”±ä¿¡æ¯ã€‚ route add â€“host 192.168.1.110 dev eth0  // ç»™ç½‘å¡eth0çš„è·¯ç”±è¡¨ä¸­åŠ å…¥æ–°åœ°å€192.168.1.110ã€‚ route add â€“net 192.168.1.0 netmask 255.255.255.0 gw 192.168.1.1  // ç»™å­ç½‘192.168.1.0æ·»åŠ è·¯ç”±å’Œç½‘å…³ï¼Œæ–°å¢åŠ çš„è·¯ç”±å’Œç½‘å…³åœ°å€ä¸º192.168.1.1ã€‚ route add default gw 192.168.0.1  // ç»™è·¯ç”±è¡¨ä¸­æ·»åŠ é»˜è®¤ç½‘å…³åœ°å€192.168.0.1 route del â€“host 192.168.1.110 dev eth0    // åˆ é™¤ç½‘å¡eth0è·¯ç”±è¡¨ä¸­çš„åœ°å€192.168.1.110ã€‚ route del â€“net 192.168.1.0 netmask 255.255.255.0 // åœ¨è·¯ç”±è¡¨ä¸­åˆ é™¤å­ç½‘192.168.1.0çš„è·¯ç”±ä¿¡æ¯ã€‚ route change 192.168.1.0 mask 255.255.255.0 192.168.10.100   // å°†å­ç½‘ 192.168.1.0 çš„ä¸‹ä¸€è·ƒç‚¹åœ°å€è®¾ç½®ä¸º 192.168.10.100ã€‚</code></pre><h3 id="16ï¼netstat">16ï¼netstat</h3><p>netstatå‘½ä»¤ç”¨äºæ˜¾ç¤ºæœ¬æœºä¸Šä¸IPã€TCPã€UDPå’ŒICMPåè®®ç›¸å…³çš„ç»Ÿè®¡æ•°æ®ï¼Œè¯¥å‘½ä»¤ç»å¸¸è¢«ç”¨äºæ£€éªŒæœ¬æœºå„ç«¯å£çš„ç½‘ç»œè¿æ¥æƒ…å†µã€‚</p><p>netstatå‘½ä»¤ä½¿ç”¨ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="hljs">netstat // æ˜¾ç¤ºæœ¬æœºç½‘ç»œè¿æ¥æƒ…å†µã€‚netstat â€“a // æ˜¾ç¤ºæ‰€æœ‰çš„æœ‰æ•ˆè¿æ¥ä¿¡æ¯ï¼ŒåŒ…æ‹¬å·²å»ºç«‹çš„è¿æ¥ï¼ˆESTABLISHEDï¼‰å’Œç›‘å¬çš„è¿æ¥è¯·æ±‚ï¼ˆLISTENINGï¼‰ã€‚netstat â€“ac  // ä»¥è¿ç»­çš„å½¢å¼æ˜¾ç¤ºæ‰€æœ‰çš„æœ‰æ•ˆè¿æ¥ä¿¡æ¯ï¼Œæ¯éš”1ç§’åˆ·æ–°1æ¬¡æ˜¾ç¤ºï¼Œç›´åˆ°ç”¨æˆ·ä¸­æ–­æ˜¾ç¤ºã€‚netstat -i  // æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰ç½‘ç»œæ¥å£ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç‰©ç†ç½‘å¡ã€ç½‘å¡åˆ«åå’Œæœ¬åœ°å›ç¯ç½‘å¡ã€‚netstat â€“n // æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰å·²å»ºç«‹çš„è¿æ¥ã€‚netstat â€“r // æ˜¾ç¤ºè·¯ç”±è¡¨ã€‚netstat â€“ta // æ˜¾ç¤ºæœ‰æ•ˆçš„TCPè¿æ¥ã€‚netstat â€“ua // æ˜¾ç¤ºæœ‰æ•ˆçš„UDPè¿æ¥ã€‚netstat â€“s // æ˜¾ç¤ºå„ä¸ªåè®®çš„ç»Ÿè®¡ä¿¡æ¯ã€‚netstat -an | grep 2811 // æ˜¾ç¤ºç«¯å£å·ä¸º2811çš„ç½‘ç»œè¿æ¥ä¿¡æ¯ã€‚</code></pre><h3 id="17-service">17. service</h3><p>serviceå‘½ä»¤èƒ½å¤Ÿå°†ç›®å½•â€œ/etc/init.d/â€ä¸­æœ‰å…³ç½‘ç»œæœåŠ¡æˆ–ç³»ç»ŸæœåŠ¡è„šæœ¬ç¨‹åºä»¥ä¸€ç§ç»Ÿä¸€çš„æ ¼å¼æ‰§è¡Œï¼Œæ ¼å¼ä¸ºï¼šâ€œservice è„šæœ¬ç¨‹åº é€‰é¡¹â€ï¼Œå¸¸ç”¨é€‰é¡¹æœ‰ï¼šstatusã€stopã€startã€restartã€‚serviceå‘½ä»¤ä½¿ç”¨ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="hljs">   service network status   // æŸ¥çœ‹ç½‘ç»œçš„å·¥ä½œçŠ¶å†µï¼Œå°†æ˜¾ç¤ºå½“å‰ä¸»æœºä¸­çš„æ‰€æœ‰ç‰©ç†ç½‘å¡å’Œæ¿€æ´»çš„ç½‘å¡ã€‚æ“ä½œç»“æœå¦‚ä¸‹ï¼š   service network stop // å…³é—­å½“å‰ä¸»æœºä¸­çš„ç½‘å¡ï¼Œè¯¥æ“ä½œå°†åœæ­¢å½“å‰ä¸»æœºçš„å¯¹å¤–ç½‘ç»œè¿æ¥ã€‚   service network start // æ‰“å¼€å½“å‰ä¸»æœºä¸­çš„ç½‘å¡ï¼Œè¯¥æ“ä½œä½¿å½“å‰ä¸»æœºè·å–IPåœ°å€ï¼Œè¿›è¡Œå¯¹å¤–ç½‘ç»œè¿æ¥ã€‚   service network restart // å…ˆæ‰§è¡Œservice network stopçš„åŠŸèƒ½ï¼Œå†æ‰§è¡Œservice network startçš„åŠŸèƒ½ã€‚   service named status // æŸ¥çœ‹å½“å‰ä¸»æœºåŸŸåæœåŠ¡çŠ¶æ€ã€‚ </code></pre><h2 id="ç³»ç»Ÿä¿¡æ¯">ç³»ç»Ÿä¿¡æ¯</h2><p>arch æ˜¾ç¤ºæœºå™¨çš„å¤„ç†å™¨æ¶æ„</p><p>uname -m æ˜¾ç¤ºæœºå™¨çš„å¤„ç†å™¨æ¶æ„</p><p>uname -r æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬</p><p>dmidecode -q æ˜¾ç¤ºç¡¬ä»¶ç³»ç»Ÿéƒ¨ä»¶ - (SMBIOS / DMI)</p><p>hdparm -i /dev/hda ç½—åˆ—ä¸€ä¸ªç£ç›˜çš„æ¶æ„ç‰¹æ€§</p><p>hdparm -tT /dev/sda åœ¨ç£ç›˜ä¸Šæ‰§è¡Œæµ‹è¯•æ€§è¯»å–æ“ä½œ</p><p>cat /proc/cpuinfo æ˜¾ç¤ºCPU infoçš„ä¿¡æ¯</p><p>cat /proc/interrupts æ˜¾ç¤ºä¸­æ–­</p><p>cat /proc/meminfo æ ¡éªŒå†…å­˜ä½¿ç”¨</p><p>cat /proc/swaps æ˜¾ç¤ºå“ªäº›swapè¢«ä½¿ç”¨</p><p>cat /proc/version æ˜¾ç¤ºå†…æ ¸çš„ç‰ˆæœ¬</p><p>cat /proc/net/dev æ˜¾ç¤ºç½‘ç»œé€‚é…å™¨åŠç»Ÿè®¡</p><p>cat /proc/mounts æ˜¾ç¤ºå·²åŠ è½½çš„æ–‡ä»¶ç³»ç»Ÿ</p><p>lspci -tv ç½—åˆ— PCI è®¾å¤‡</p><p>lsusb -tv æ˜¾ç¤º USB è®¾å¤‡</p><p>date æ˜¾ç¤ºç³»ç»Ÿæ—¥æœŸ</p><p>cal 2007 æ˜¾ç¤º2007å¹´çš„æ—¥å†è¡¨</p><p>date 041217002007.00 è®¾ç½®æ—¥æœŸå’Œæ—¶é—´ - æœˆæ—¥æ—¶åˆ†å¹´.ç§’</p><p>clock -w å°†æ—¶é—´ä¿®æ”¹ä¿å­˜åˆ° BIOS</p><h2 id="å…³æœº-ç³»ç»Ÿçš„å…³æœºã€é‡å¯ä»¥åŠç™»å‡º">å…³æœº (ç³»ç»Ÿçš„å…³æœºã€é‡å¯ä»¥åŠç™»å‡º )</h2><p>shutdown -h now å…³é—­ç³»ç»Ÿ</p><p>init 0 å…³é—­ç³»ç»Ÿ</p><p>telinit 0 å…³é—­ç³»ç»Ÿ</p><p>shutdown -h hours:minutes &amp; æŒ‰é¢„å®šæ—¶é—´å…³é—­ç³»ç»Ÿ</p><p>shutdown -c å–æ¶ˆæŒ‰é¢„å®šæ—¶é—´å…³é—­ç³»ç»Ÿ</p><p>shutdown -r now é‡å¯</p><p>reboot é‡å¯</p><p>logout æ³¨é”€</p><h2 id="æ–‡ä»¶å’Œç›®å½•">æ–‡ä»¶å’Œç›®å½•</h2><p>cd /home è¿›å…¥ â€˜/ homeâ€™ ç›®å½•â€™</p><p>cd â€¦ è¿”å›ä¸Šä¸€çº§ç›®å½•</p><p>cd â€¦/â€¦ è¿”å›ä¸Šä¸¤çº§ç›®å½•</p><p>cd è¿›å…¥ä¸ªäººçš„ä¸»ç›®å½•</p><p>cd ~user1 è¿›å…¥ä¸ªäººçš„ä¸»ç›®å½•</p><p>cd - è¿”å›ä¸Šæ¬¡æ‰€åœ¨çš„ç›®å½•</p><p>pwd æ˜¾ç¤ºå·¥ä½œè·¯å¾„</p><p>ls æŸ¥çœ‹ç›®å½•ä¸­çš„æ–‡ä»¶</p><p>ls -F æŸ¥çœ‹ç›®å½•ä¸­çš„æ–‡ä»¶</p><p>ls -l æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•çš„è¯¦ç»†èµ„æ–™(æƒé™)</p><p>ls -a æ˜¾ç¤ºéšè—æ–‡ä»¶</p><p>ls <em>[0-9]</em> æ˜¾ç¤ºåŒ…å«æ•°å­—çš„æ–‡ä»¶åå’Œç›®å½•å</p><p>tree æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•ç”±æ ¹ç›®å½•å¼€å§‹çš„æ ‘å½¢ç»“æ„</p><p>lstree æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•ç”±æ ¹ç›®å½•å¼€å§‹çš„æ ‘å½¢ç»“æ„</p><p>mkdir dir1 åˆ›å»ºä¸€ä¸ªå«åš â€˜dir1â€™ çš„ç›®å½•â€™</p><p>mkdir dir1 dir2 åŒæ—¶åˆ›å»ºä¸¤ä¸ªç›®å½•</p><p>mkdir -p /tmp/dir1/dir2 åˆ›å»ºä¸€ä¸ªç›®å½•æ ‘</p><p>rm -f file1 åˆ é™¤ä¸€ä¸ªå«åš â€˜file1â€™ çš„æ–‡ä»¶â€™</p><p>rmdir dir1 åˆ é™¤ä¸€ä¸ªå«åš â€˜dir1â€™ çš„ç›®å½•â€™</p><p>rm -rf dir1 åˆ é™¤ä¸€ä¸ªå«åš â€˜dir1â€™ çš„ç›®å½•å¹¶åŒæ—¶åˆ é™¤å…¶å†…å®¹</p><p>rm -rf dir1 dir2 åŒæ—¶åˆ é™¤ä¸¤ä¸ªç›®å½•åŠå®ƒä»¬çš„å†…å®¹</p><p>mv dir1 new_dir é‡å‘½å/ç§»åŠ¨ ä¸€ä¸ªç›®å½•</p><p>cp file1 file2 å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶</p><p>cp dir/* . å¤åˆ¶ä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ°å½“å‰å·¥ä½œç›®å½•</p><p>cp -a /tmp/dir1 . å¤åˆ¶ä¸€ä¸ªç›®å½•åˆ°å½“å‰å·¥ä½œç›®å½•</p><p>cp -a dir1 dir2 å¤åˆ¶ä¸€ä¸ªç›®å½•</p><p>cp -r dir1 dir2 å¤åˆ¶ä¸€ä¸ªç›®å½•åŠå­ç›®å½•</p><p>ln -s file1 lnk1 åˆ›å»ºä¸€ä¸ªæŒ‡å‘æ–‡ä»¶æˆ–ç›®å½•çš„è½¯é“¾æ¥</p><p>ln file1 lnk1 åˆ›å»ºä¸€ä¸ªæŒ‡å‘æ–‡ä»¶æˆ–ç›®å½•çš„ç‰©ç†é“¾æ¥</p><p>touch -t 0712250000 file1 ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„æ—¶é—´æˆ³ - (YYMMDDhhmm)</p><p>file file1 outputs the mime type of the file as texticonv -l åˆ—å‡ºå·²çŸ¥çš„ç¼–ç </p><h2 id="æ–‡ä»¶æœç´¢">æ–‡ä»¶æœç´¢</h2><p>find / -name file1 ä» â€˜/â€™ å¼€å§‹è¿›å…¥æ ¹æ–‡ä»¶ç³»ç»Ÿæœç´¢æ–‡ä»¶å’Œç›®å½•</p><p>find / -user user1 æœç´¢å±äºç”¨æˆ· â€˜user1â€™ çš„æ–‡ä»¶å’Œç›®å½•</p><p>find /home/user1 -name *.bin åœ¨ç›®å½• â€˜/ home/user1â€™ ä¸­æœç´¢å¸¦æœ‰â€™.binâ€™ ç»“å°¾çš„æ–‡ä»¶</p><p>find /usr/bin -type f -atime +100 æœç´¢åœ¨è¿‡å»100å¤©å†…æœªè¢«ä½¿ç”¨è¿‡çš„æ‰§è¡Œæ–‡ä»¶</p><p>find /usr/bin -type f -mtime -10 æœç´¢åœ¨10å¤©å†…è¢«åˆ›å»ºæˆ–è€…ä¿®æ”¹è¿‡çš„æ–‡ä»¶</p><p>find / -name *.rpm -exec chmod 755 â€˜{}â€™ ; æœç´¢ä»¥ â€˜.rpmâ€™ ç»“å°¾çš„æ–‡ä»¶å¹¶å®šä¹‰å…¶æƒé™</p><p>find / -xdev -name *.rpm æœç´¢ä»¥ â€˜.rpmâ€™ ç»“å°¾çš„æ–‡ä»¶ï¼Œå¿½ç•¥å…‰é©±ã€æ·ç›˜ç­‰å¯ç§»åŠ¨è®¾å¤‡</p><p>locate *.ps å¯»æ‰¾ä»¥ â€˜.psâ€™ ç»“å°¾çš„æ–‡ä»¶ - å…ˆè¿è¡Œ â€˜updatedbâ€™ å‘½ä»¤</p><p>whereis halt æ˜¾ç¤ºä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€æºç æˆ–mançš„ä½ç½®</p><p>which halt æ˜¾ç¤ºä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æˆ–å¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„</p><h2 id="æŒ‚è½½ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ">æŒ‚è½½ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ</h2><p>mount /dev/hda2 /mnt/hda2 æŒ‚è½½ä¸€ä¸ªå«åšhda2çš„ç›˜ - ç¡®å®šç›®å½• â€˜/ mnt/hda2â€™ å·²ç»å­˜åœ¨</p><p>umount /dev/hda2 å¸è½½ä¸€ä¸ªå«åšhda2çš„ç›˜ - å…ˆä»æŒ‚è½½ç‚¹ â€˜/ mnt/hda2â€™ é€€å‡º</p><p>fuser -km /mnt/hda2 å½“è®¾å¤‡ç¹å¿™æ—¶å¼ºåˆ¶å¸è½½</p><p>umount -n /mnt/hda2 è¿è¡Œå¸è½½æ“ä½œè€Œä¸å†™å…¥ /etc/mtab æ–‡ä»¶- å½“æ–‡ä»¶ä¸ºåªè¯»æˆ–å½“ç£ç›˜å†™æ»¡æ—¶éå¸¸æœ‰ç”¨</p><p>mount /dev/fd0 /mnt/floppy æŒ‚è½½ä¸€ä¸ªè½¯ç›˜</p><p>mount /dev/cdrom /mnt/cdrom æŒ‚è½½ä¸€ä¸ªcdromæˆ–dvdrom</p><p>mount /dev/hdc /mnt/cdrecorder æŒ‚è½½ä¸€ä¸ªcdrwæˆ–dvdrom</p><p>mount /dev/hdb /mnt/cdrecorder æŒ‚è½½ä¸€ä¸ªcdrwæˆ–dvdrom</p><p>mount -o loop file.iso /mnt/cdrom æŒ‚è½½ä¸€ä¸ªæ–‡ä»¶æˆ–ISOé•œåƒæ–‡ä»¶</p><p>mount -t vfat /dev/hda5 /mnt/hda5 æŒ‚è½½ä¸€ä¸ªWindows FAT32æ–‡ä»¶ç³»ç»Ÿ</p><p>mount /dev/sda1 /mnt/usbdisk æŒ‚è½½ä¸€ä¸ªusb æ·ç›˜æˆ–é—ªå­˜è®¾å¤‡</p><p>mount -t smbfs -o username=user,password=pass//WinClient/share /mnt/share æŒ‚è½½ä¸€ä¸ªwindowsç½‘ç»œå…±äº«</p><h2 id="ç£ç›˜ç©ºé—´">ç£ç›˜ç©ºé—´</h2><p>df -h æ˜¾ç¤ºå·²ç»æŒ‚è½½çš„åˆ†åŒºåˆ—è¡¨</p><p>ls -lSr |more ä»¥å°ºå¯¸å¤§å°æ’åˆ—æ–‡ä»¶å’Œç›®å½•</p><p>du -sh dir1 ä¼°ç®—ç›®å½• â€˜dir1â€™ å·²ç»ä½¿ç”¨çš„ç£ç›˜ç©ºé—´â€™</p><p>du -sk * | sort -rn ä»¥å®¹é‡å¤§å°ä¸ºä¾æ®ä¾æ¬¡æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•çš„å¤§å°</p><p>rpm -q -a --qf â€˜%10{SIZE}t%{NAME}nâ€™ | sort -k1,1n ä»¥å¤§å°ä¸ºä¾æ®ä¾æ¬¡æ˜¾ç¤ºå·²å®‰è£…çš„rpmåŒ…æ‰€ä½¿ç”¨çš„ç©ºé—´ (fedora, redhatç±»ç³»ç»Ÿ)</p><p>dpkg-query -W -f=â€˜<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>I</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>e</mi><mi>d</mi><mo>âˆ’</mo><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo separator="true">;</mo><mn>10</mn></mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">{Installed-Size;10}t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">ll</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">10</span></span><span class="mord mathnormal">t</span></span></span></span>{Package}nâ€™ | sort -k1,1n ä»¥å¤§å°ä¸ºä¾æ®æ˜¾ç¤ºå·²å®‰è£…çš„debåŒ…æ‰€ä½¿ç”¨çš„ç©ºé—´ (ubuntu, debianç±»ç³»ç»Ÿ)</p><h2 id="ç”¨æˆ·å’Œç¾¤ç»„">ç”¨æˆ·å’Œç¾¤ç»„</h2><p>groupadd group_name åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ç»„</p><p>groupdel group_name åˆ é™¤ä¸€ä¸ªç”¨æˆ·ç»„</p><p>groupmod -n new_group_name old_group_name é‡å‘½åä¸€ä¸ªç”¨æˆ·ç»„</p><p>useradd -c &quot;Name Surname &quot; -g admin -d /home/user1 -s /bin/bash user1 åˆ›å»ºä¸€ä¸ªå±äº â€œadminâ€ ç”¨æˆ·ç»„çš„ç”¨æˆ·</p><p>useradd user1 åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·</p><p>userdel -r user1 åˆ é™¤ä¸€ä¸ªç”¨æˆ· ( â€˜-râ€™ æ’é™¤ä¸»ç›®å½•)</p><p>usermod -c â€œUser FTPâ€ -g system -d /ftp/user1 -s /bin/nologin user1 ä¿®æ”¹ç”¨æˆ·å±æ€§</p><p>passwd ä¿®æ”¹å£ä»¤</p><p>passwd user1 ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·çš„å£ä»¤ (åªå…è®¸rootæ‰§è¡Œ)</p><p>chage -E 2005-12-31 user1 è®¾ç½®ç”¨æˆ·å£ä»¤çš„å¤±æ•ˆæœŸé™</p><p>pwck æ£€æŸ¥ â€˜/etc/passwdâ€™ çš„æ–‡ä»¶æ ¼å¼å’Œè¯­æ³•ä¿®æ­£ä»¥åŠå­˜åœ¨çš„ç”¨æˆ·</p><p>grpck æ£€æŸ¥ â€˜/etc/passwdâ€™ çš„æ–‡ä»¶æ ¼å¼å’Œè¯­æ³•ä¿®æ­£ä»¥åŠå­˜åœ¨çš„ç¾¤ç»„</p><p>newgrp group_name ç™»é™†è¿›ä¸€ä¸ªæ–°çš„ç¾¤ç»„ä»¥æ”¹å˜æ–°åˆ›å»ºæ–‡ä»¶çš„é¢„è®¾ç¾¤ç»„</p><h2 id="æ–‡ä»¶çš„æƒé™-ä½¿ç”¨-â€œ-â€-è®¾ç½®æƒé™ï¼Œä½¿ç”¨-â€œ-â€-ç”¨äºå–æ¶ˆ">æ–‡ä»¶çš„æƒé™ - ä½¿ç”¨ â€œ+â€ è®¾ç½®æƒé™ï¼Œä½¿ç”¨ â€œ-â€ ç”¨äºå–æ¶ˆ</h2><p>ls -lh æ˜¾ç¤ºæƒé™</p><p>ls /tmp | pr -T5 -W$COLUMNS å°†ç»ˆç«¯åˆ’åˆ†æˆ5æ æ˜¾ç¤º</p><p>chmod ugo+rwx directory1 è®¾ç½®ç›®å½•çš„æ‰€æœ‰äºº(u)ã€ç¾¤ç»„(g)ä»¥åŠå…¶ä»–äºº(o)ä»¥è¯»ï¼ˆr ï¼‰ã€å†™(w)å’Œæ‰§è¡Œ(x)çš„æƒé™</p><p>chmod go-rwx directory1 åˆ é™¤ç¾¤ç»„(g)ä¸å…¶ä»–äºº(o)å¯¹ç›®å½•çš„è¯»å†™æ‰§è¡Œæƒé™</p><p>chown user1 file1 æ”¹å˜ä¸€ä¸ªæ–‡ä»¶çš„æ‰€æœ‰äººå±æ€§</p><p>chown -R user1 directory1 æ”¹å˜ä¸€ä¸ªç›®å½•çš„æ‰€æœ‰äººå±æ€§å¹¶åŒæ—¶æ”¹å˜æ”¹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„å±æ€§</p><p>chgrp group1 file1 æ”¹å˜æ–‡ä»¶çš„ç¾¤ç»„</p><p>chown user1:group1 file1 æ”¹å˜ä¸€ä¸ªæ–‡ä»¶çš„æ‰€æœ‰äººå’Œç¾¤ç»„å±æ€§</p><p>find / -perm -u+s ç½—åˆ—ä¸€ä¸ªç³»ç»Ÿä¸­æ‰€æœ‰ä½¿ç”¨äº†SUIDæ§åˆ¶çš„æ–‡ä»¶</p><p>chmod u+s /bin/file1 è®¾ç½®ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ SUID ä½ - è¿è¡Œè¯¥æ–‡ä»¶çš„ç”¨æˆ·ä¹Ÿè¢«èµ‹äºˆå’Œæ‰€æœ‰è€…åŒæ ·çš„æƒé™</p><p>chmod u-s /bin/file1 ç¦ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ SUIDä½</p><p>chmod g+s /home/public è®¾ç½®ä¸€ä¸ªç›®å½•çš„SGID ä½ - ç±»ä¼¼SUID ï¼Œä¸è¿‡è¿™æ˜¯é’ˆå¯¹ç›®å½•çš„</p><p>chmod g-s /home/public ç¦ç”¨ä¸€ä¸ªç›®å½•çš„ SGID ä½</p><p>chmod o+t /home/public è®¾ç½®ä¸€ä¸ªæ–‡ä»¶çš„ STIKY ä½ - åªå…è®¸åˆæ³•æ‰€æœ‰äººåˆ é™¤æ–‡ä»¶</p><p>chmod o-t /home/public ç¦ç”¨ä¸€ä¸ªç›®å½•çš„ STIKY ä½</p><h2 id="æ–‡ä»¶çš„ç‰¹æ®Šå±æ€§-ä½¿ç”¨-â€œ-â€-è®¾ç½®æƒé™ï¼Œä½¿ç”¨-â€œ-â€-ç”¨äºå–æ¶ˆ">æ–‡ä»¶çš„ç‰¹æ®Šå±æ€§ - ä½¿ç”¨ â€œ+â€ è®¾ç½®æƒé™ï¼Œä½¿ç”¨ â€œ-â€ ç”¨äºå–æ¶ˆ</h2><p>chattr +a file1 åªå…è®¸ä»¥è¿½åŠ æ–¹å¼è¯»å†™æ–‡ä»¶</p><p>chattr +c file1 å…è®¸è¿™ä¸ªæ–‡ä»¶èƒ½è¢«å†…æ ¸è‡ªåŠ¨å‹ç¼©/è§£å‹</p><p>chattr +d file1 åœ¨è¿›è¡Œæ–‡ä»¶ç³»ç»Ÿå¤‡ä»½æ—¶ï¼Œdumpç¨‹åºå°†å¿½ç•¥è¿™ä¸ªæ–‡ä»¶</p><p>chattr +i file1 è®¾ç½®æˆä¸å¯å˜çš„æ–‡ä»¶ï¼Œä¸èƒ½è¢«åˆ é™¤ã€ä¿®æ”¹ã€é‡å‘½åæˆ–è€…é“¾æ¥</p><p>chattr +s file1 å…è®¸ä¸€ä¸ªæ–‡ä»¶è¢«å®‰å…¨åœ°åˆ é™¤</p><p>chattr +S file1 ä¸€æ—¦åº”ç”¨ç¨‹åºå¯¹è¿™ä¸ªæ–‡ä»¶æ‰§è¡Œäº†å†™æ“ä½œï¼Œä½¿ç³»ç»Ÿç«‹åˆ»æŠŠä¿®æ”¹çš„ç»“æœå†™åˆ°ç£ç›˜</p><p>chattr +u file1 è‹¥æ–‡ä»¶è¢«åˆ é™¤ï¼Œç³»ç»Ÿä¼šå…è®¸ä½ åœ¨ä»¥åæ¢å¤è¿™ä¸ªè¢«åˆ é™¤çš„æ–‡ä»¶</p><p>lsattr æ˜¾ç¤ºç‰¹æ®Šçš„å±æ€§</p><h2 id="æ‰“åŒ…å’Œå‹ç¼©æ–‡ä»¶">æ‰“åŒ…å’Œå‹ç¼©æ–‡ä»¶</h2><p>bunzip2 file1.bz2 è§£å‹ä¸€ä¸ªå«åš 'file1.bz2â€™çš„æ–‡ä»¶</p><p>bzip2 file1 å‹ç¼©ä¸€ä¸ªå«åš â€˜file1â€™ çš„æ–‡ä»¶</p><p>gunzip file1.gz è§£å‹ä¸€ä¸ªå«åš 'file1.gzâ€™çš„æ–‡ä»¶</p><p>gzip file1 å‹ç¼©ä¸€ä¸ªå«åš 'file1â€™çš„æ–‡ä»¶</p><p>gzip -9 file1 æœ€å¤§ç¨‹åº¦å‹ç¼©</p><p>rar a file1.rar test_file åˆ›å»ºä¸€ä¸ªå«åš â€˜file1.rarâ€™ çš„åŒ…</p><p>rar a file1.rar file1 file2 dir1 åŒæ—¶å‹ç¼© â€˜file1â€™, â€˜file2â€™ ä»¥åŠç›®å½• â€˜dir1â€™</p><p>rar x file1.rar è§£å‹raråŒ…</p><p>unrar x file1.rar è§£å‹raråŒ…</p><p>tar -cvf archive.tar file1 åˆ›å»ºä¸€ä¸ªéå‹ç¼©çš„ tarball</p><p>tar -cvf archive.tar file1 file2 dir1 åˆ›å»ºä¸€ä¸ªåŒ…å«äº† â€˜file1â€™, â€˜file2â€™ ä»¥åŠ 'dir1â€™çš„æ¡£æ¡ˆæ–‡ä»¶</p><p>tar -tf archive.tar æ˜¾ç¤ºä¸€ä¸ªåŒ…ä¸­çš„å†…å®¹</p><p>tar -xvf archive.tar é‡Šæ”¾ä¸€ä¸ªåŒ…</p><p>tar -xvf archive.tar -C /tmp å°†å‹ç¼©åŒ…é‡Šæ”¾åˆ° /tmpç›®å½•ä¸‹</p><p>tar -cvfj archive.tar.bz2 dir1 åˆ›å»ºä¸€ä¸ªbzip2æ ¼å¼çš„å‹ç¼©åŒ…</p><p>tar -jxvf archive.tar.bz2 è§£å‹ä¸€ä¸ªbzip2æ ¼å¼çš„å‹ç¼©åŒ…</p><p>tar -cvfz archive.tar.gz dir1 åˆ›å»ºä¸€ä¸ªgzipæ ¼å¼çš„å‹ç¼©åŒ…</p><p>tar -zxvf archive.tar.gz è§£å‹ä¸€ä¸ªgzipæ ¼å¼çš„å‹ç¼©åŒ…</p><p>zip file1.zip file1 åˆ›å»ºä¸€ä¸ªzipæ ¼å¼çš„å‹ç¼©åŒ…</p><p>zip -r file1.zip file1 file2 dir1 å°†å‡ ä¸ªæ–‡ä»¶å’Œç›®å½•åŒæ—¶å‹ç¼©æˆä¸€ä¸ªzipæ ¼å¼çš„å‹ç¼©åŒ…</p><p>unzip file1.zip è§£å‹ä¸€ä¸ªzipæ ¼å¼å‹ç¼©åŒ…</p><h2 id="RPM-åŒ…-ï¼ˆFedora-RedhatåŠç±»ä¼¼ç³»ç»Ÿï¼‰">RPM åŒ… - ï¼ˆFedora, RedhatåŠç±»ä¼¼ç³»ç»Ÿï¼‰</h2><p>rpm -ivh package.rpm å®‰è£…ä¸€ä¸ªrpmåŒ…</p><p>rpm -ivh --nodeeps package.rpm å®‰è£…ä¸€ä¸ªrpmåŒ…è€Œå¿½ç•¥ä¾èµ–å…³ç³»è­¦å‘Š</p><p>rpm -U package.rpm æ›´æ–°ä¸€ä¸ªrpmåŒ…ä½†ä¸æ”¹å˜å…¶é…ç½®æ–‡ä»¶</p><p>rpm -F package.rpm æ›´æ–°ä¸€ä¸ªç¡®å®šå·²ç»å®‰è£…çš„rpmåŒ…</p><p>rpm -e package_name.rpm åˆ é™¤ä¸€ä¸ªrpmåŒ…</p><p>rpm -qa æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰å·²ç»å®‰è£…çš„rpmåŒ…</p><p>rpm -qa | grep httpd æ˜¾ç¤ºæ‰€æœ‰åç§°ä¸­åŒ…å« â€œhttpdâ€ å­—æ ·çš„rpmåŒ…</p><p>rpm -qi package_name è·å–ä¸€ä¸ªå·²å®‰è£…åŒ…çš„ç‰¹æ®Šä¿¡æ¯</p><p>rpm -qg â€œSystem Environment/Daemonsâ€ æ˜¾ç¤ºä¸€ä¸ªç»„ä»¶çš„rpmåŒ…</p><p>rpm -ql package_name æ˜¾ç¤ºä¸€ä¸ªå·²ç»å®‰è£…çš„rpmåŒ…æä¾›çš„æ–‡ä»¶åˆ—è¡¨</p><p>rpm -qc package_name æ˜¾ç¤ºä¸€ä¸ªå·²ç»å®‰è£…çš„rpmåŒ…æä¾›çš„é…ç½®æ–‡ä»¶åˆ—è¡¨</p><p>rpm -q package_name --whatrequires æ˜¾ç¤ºä¸ä¸€ä¸ªrpmåŒ…å­˜åœ¨ä¾èµ–å…³ç³»çš„åˆ—è¡¨</p><p>rpm -q package_name --whatprovides æ˜¾ç¤ºä¸€ä¸ªrpmåŒ…æ‰€å çš„ä½“ç§¯</p><p>rpm -q package_name --scripts æ˜¾ç¤ºåœ¨å®‰è£…/åˆ é™¤æœŸé—´æ‰€æ‰§è¡Œçš„è„šæœ¬l</p><p>rpm -q package_name --changelog æ˜¾ç¤ºä¸€ä¸ªrpmåŒ…çš„ä¿®æ”¹å†å²</p><p>rpm -qf /etc/httpd/conf/httpd.conf ç¡®è®¤æ‰€ç»™çš„æ–‡ä»¶ç”±å“ªä¸ªrpmåŒ…æ‰€æä¾›</p><p>rpm -qp package.rpm -l æ˜¾ç¤ºç”±ä¸€ä¸ªå°šæœªå®‰è£…çš„rpmåŒ…æä¾›çš„æ–‡ä»¶åˆ—è¡¨</p><p>rpm --import /media/cdrom/RPM-GPG-KEY å¯¼å…¥å…¬é’¥æ•°å­—è¯ä¹¦</p><p>rpm --checksig package.rpm ç¡®è®¤ä¸€ä¸ªrpmåŒ…çš„å®Œæ•´æ€§</p><p>rpm -qa gpg-pubkey ç¡®è®¤å·²å®‰è£…çš„æ‰€æœ‰rpmåŒ…çš„å®Œæ•´æ€§</p><p>rpm -V package_name æ£€æŸ¥æ–‡ä»¶å°ºå¯¸ã€ è®¸å¯ã€ç±»å‹ã€æ‰€æœ‰è€…ã€ç¾¤ç»„ã€MD5æ£€æŸ¥ä»¥åŠæœ€åä¿®æ”¹æ—¶é—´</p><p>rpm -Va æ£€æŸ¥ç³»ç»Ÿä¸­æ‰€æœ‰å·²å®‰è£…çš„rpmåŒ…- å°å¿ƒä½¿ç”¨</p><p>rpm -Vp package.rpm ç¡®è®¤ä¸€ä¸ªrpmåŒ…è¿˜æœªå®‰è£…</p><p>rpm2cpio package.rpm | cpio --extract --make-directories <em>bin</em> ä»ä¸€ä¸ªrpmåŒ…è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶</p><p>rpm -ivh /usr/src/redhat/RPMS/<code>arch</code>/package.rpm ä»ä¸€ä¸ªrpmæºç å®‰è£…ä¸€ä¸ªæ„å»ºå¥½çš„åŒ…</p><p>rpmbuild --rebuild package_name.src.rpm ä»ä¸€ä¸ªrpmæºç æ„å»ºä¸€ä¸ª rpm åŒ…</p><h2 id="YUM-è½¯ä»¶åŒ…å‡çº§å™¨-ï¼ˆFedora-RedHatåŠç±»ä¼¼ç³»ç»Ÿï¼‰">YUM è½¯ä»¶åŒ…å‡çº§å™¨ - ï¼ˆFedora, RedHatåŠç±»ä¼¼ç³»ç»Ÿï¼‰</h2><p>yum install package_name ä¸‹è½½å¹¶å®‰è£…ä¸€ä¸ªrpmåŒ…</p><p>yum localinstall package_name.rpm å°†å®‰è£…ä¸€ä¸ªrpmåŒ…ï¼Œä½¿ç”¨ä½ è‡ªå·±çš„è½¯ä»¶ä»“åº“ä¸ºä½ è§£å†³æ‰€æœ‰ä¾èµ–å…³ç³»</p><p>yum update package_name.rpm æ›´æ–°å½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰å®‰è£…çš„rpmåŒ…</p><p>yum update package_name æ›´æ–°ä¸€ä¸ªrpmåŒ…</p><p>yum remove package_name åˆ é™¤ä¸€ä¸ªrpmåŒ…</p><p>yum list åˆ—å‡ºå½“å‰ç³»ç»Ÿä¸­å®‰è£…çš„æ‰€æœ‰åŒ…</p><p>yum search package_name åœ¨rpmä»“åº“ä¸­æœå¯»è½¯ä»¶åŒ…</p><p>yum clean packages æ¸…ç†rpmç¼“å­˜åˆ é™¤ä¸‹è½½çš„åŒ…</p><p>yum clean headers åˆ é™¤æ‰€æœ‰å¤´æ–‡ä»¶</p><p>yum clean all åˆ é™¤æ‰€æœ‰ç¼“å­˜çš„åŒ…å’Œå¤´æ–‡ä»¶</p><h2 id="DEB-åŒ…-Debian-Ubuntu-ä»¥åŠç±»ä¼¼ç³»ç»Ÿ">DEB åŒ… (Debian, Ubuntu ä»¥åŠç±»ä¼¼ç³»ç»Ÿ)</h2><p>dpkg -i package.deb å®‰è£…/æ›´æ–°ä¸€ä¸ª deb åŒ…</p><p>dpkg -r package_name ä»ç³»ç»Ÿåˆ é™¤ä¸€ä¸ª deb åŒ…</p><p>dpkg -l æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰å·²ç»å®‰è£…çš„ deb åŒ…</p><p>dpkg -l | grep httpd æ˜¾ç¤ºæ‰€æœ‰åç§°ä¸­åŒ…å« â€œhttpdâ€ å­—æ ·çš„debåŒ…</p><p>dpkg -s package_name è·å¾—å·²ç»å®‰è£…åœ¨ç³»ç»Ÿä¸­ä¸€ä¸ªç‰¹æ®ŠåŒ…çš„ä¿¡æ¯</p><p>dpkg -L package_name æ˜¾ç¤ºç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„ä¸€ä¸ªdebåŒ…æ‰€æä¾›çš„æ–‡ä»¶åˆ—è¡¨</p><p>dpkg --contents package.deb æ˜¾ç¤ºå°šæœªå®‰è£…çš„ä¸€ä¸ªåŒ…æ‰€æä¾›çš„æ–‡ä»¶åˆ—è¡¨</p><p>dpkg -S /bin/ping ç¡®è®¤æ‰€ç»™çš„æ–‡ä»¶ç”±å“ªä¸ªdebåŒ…æä¾›</p><h2 id="APT-è½¯ä»¶å·¥å…·-Debian-Ubuntu-ä»¥åŠç±»ä¼¼ç³»ç»Ÿ">APT è½¯ä»¶å·¥å…· (Debian, Ubuntu ä»¥åŠç±»ä¼¼ç³»ç»Ÿ)</h2><p>apt-get install package_name å®‰è£…/æ›´æ–°ä¸€ä¸ª deb åŒ…</p><p>apt-cdrom install package_name ä»å…‰ç›˜å®‰è£…/æ›´æ–°ä¸€ä¸ª deb åŒ…</p><p>apt-get update å‡çº§åˆ—è¡¨ä¸­çš„è½¯ä»¶åŒ…</p><p>apt-get upgrade å‡çº§æ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶</p><p>apt-get remove package_name ä»ç³»ç»Ÿåˆ é™¤ä¸€ä¸ªdebåŒ…</p><p>apt-get check ç¡®è®¤ä¾èµ–çš„è½¯ä»¶ä»“åº“æ­£ç¡®</p><p>apt-get clean ä»ä¸‹è½½çš„è½¯ä»¶åŒ…ä¸­æ¸…ç†ç¼“å­˜</p><p>apt-cache search searched-package è¿”å›åŒ…å«æ‰€è¦æœç´¢å­—ç¬¦ä¸²çš„è½¯ä»¶åŒ…åç§°</p><h2 id="æŸ¥çœ‹æ–‡ä»¶å†…å®¹">æŸ¥çœ‹æ–‡ä»¶å†…å®¹</h2><p>cat file1 ä»ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹æ­£å‘æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹</p><p>tac file1 ä»æœ€åä¸€è¡Œå¼€å§‹åå‘æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹</p><p>more file1 æŸ¥çœ‹ä¸€ä¸ªé•¿æ–‡ä»¶çš„å†…å®¹</p><p>less file1 ç±»ä¼¼äº â€˜moreâ€™ å‘½ä»¤ï¼Œä½†æ˜¯å®ƒå…è®¸åœ¨æ–‡ä»¶ä¸­å’Œæ­£å‘æ“ä½œä¸€æ ·çš„åå‘æ“ä½œ</p><p>head -2 file1 æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å‰ä¸¤è¡Œ</p><p>tail -2 file1 æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„æœ€åä¸¤è¡Œ</p><p>tail -f /var/log/messages å®æ—¶æŸ¥çœ‹è¢«æ·»åŠ åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹</p><h2 id="æ–‡æœ¬å¤„ç†">æ–‡æœ¬å¤„ç†</h2><p>cat file1 | command( sed, grep, awk, grep, etcâ€¦) &gt; result.txt åˆå¹¶ä¸€ä¸ªæ–‡ä»¶çš„è¯¦ç»†è¯´æ˜æ–‡æœ¬ï¼Œå¹¶å°†ç®€ä»‹å†™å…¥ä¸€ä¸ªæ–°æ–‡ä»¶ä¸­</p><p>cat file1 | command( sed, grep, awk, grep, etcâ€¦) &gt;&gt; result.txt åˆå¹¶ä¸€ä¸ªæ–‡ä»¶çš„è¯¦ç»†è¯´æ˜æ–‡æœ¬ï¼Œå¹¶å°†ç®€ä»‹å†™å…¥ä¸€ä¸ªå·²æœ‰çš„æ–‡ä»¶ä¸­</p><p>grep Aug /var/log/messages åœ¨æ–‡ä»¶ '/var/log/messagesâ€™ä¸­æŸ¥æ‰¾å…³é”®è¯&quot;Aug&quot;</p><p>grep ^Aug /var/log/messages åœ¨æ–‡ä»¶ '/var/log/messagesâ€™ä¸­æŸ¥æ‰¾ä»¥&quot;Aug&quot;å¼€å§‹çš„è¯æ±‡</p><p>grep [0-9] /var/log/messages é€‰æ‹© â€˜/var/log/messagesâ€™ æ–‡ä»¶ä¸­æ‰€æœ‰åŒ…å«æ•°å­—çš„è¡Œ</p><p>grep Aug -R /var/log/* åœ¨ç›®å½• â€˜/var/logâ€™ åŠéšåçš„ç›®å½•ä¸­æœç´¢å­—ç¬¦ä¸²&quot;Aug&quot;</p><p>sed â€˜s/stringa1/stringa2/gâ€™ example.txt å°†example.txtæ–‡ä»¶ä¸­çš„ â€œstring1â€ æ›¿æ¢æˆ â€œstring2â€</p><p>sed â€˜/^$/dâ€™ example.txt ä»example.txtæ–‡ä»¶ä¸­åˆ é™¤æ‰€æœ‰ç©ºç™½è¡Œ</p><p>sed â€˜/ *#/d; /^$/dâ€™ example.txt ä»example.txtæ–‡ä»¶ä¸­åˆ é™¤æ‰€æœ‰æ³¨é‡Šå’Œç©ºç™½è¡Œ</p><p>echo â€˜esempioâ€™ | tr â€˜[:lower:]â€™ â€˜[:upper:]â€™ åˆå¹¶ä¸Šä¸‹å•å…ƒæ ¼å†…å®¹</p><p>sed -e â€˜1dâ€™ result.txt ä»æ–‡ä»¶example.txt ä¸­æ’é™¤ç¬¬ä¸€è¡Œ</p><p>sed -n â€˜/stringa1/pâ€™ æŸ¥çœ‹åªåŒ…å«è¯æ±‡ &quot;string1&quot;çš„è¡Œ</p><p>sed -e â€˜s/ *$//â€™ example.txt åˆ é™¤æ¯ä¸€è¡Œæœ€åçš„ç©ºç™½å­—ç¬¦</p><p>sed -e â€˜s/stringa1//gâ€™ example.txt ä»æ–‡æ¡£ä¸­åªåˆ é™¤è¯æ±‡ â€œstring1â€ å¹¶ä¿ç•™å‰©ä½™å…¨éƒ¨</p><p>sed -n â€˜1,5p;5qâ€™ example.txt æŸ¥çœ‹ä»ç¬¬ä¸€è¡Œåˆ°ç¬¬5è¡Œå†…å®¹</p><p>sed -n â€˜5p;5qâ€™ example.txt æŸ¥çœ‹ç¬¬5è¡Œ</p><p>sed -e â€˜s/00*/0/gâ€™ example.txt ç”¨å•ä¸ªé›¶æ›¿æ¢å¤šä¸ªé›¶</p><p>cat -n file1 æ ‡ç¤ºæ–‡ä»¶çš„è¡Œæ•°</p><p>cat example.txt | awk â€˜NR%2==1â€™ åˆ é™¤example.txtæ–‡ä»¶ä¸­çš„æ‰€æœ‰å¶æ•°è¡Œ</p><p>echo a b c | awk â€˜{print $1}â€™ æŸ¥çœ‹ä¸€è¡Œç¬¬ä¸€æ </p><p>echo a b c | awk â€˜{print $1,$3}â€™ æŸ¥çœ‹ä¸€è¡Œçš„ç¬¬ä¸€å’Œç¬¬ä¸‰æ </p><p>paste file1 file2 åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶æˆ–ä¸¤æ çš„å†…å®¹</p><p>paste -d â€˜+â€™ file1 file2 åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶æˆ–ä¸¤æ çš„å†…å®¹ï¼Œä¸­é—´ç”¨&quot;+&quot;åŒºåˆ†</p><p>sort file1 file2 æ’åºä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹</p><p>sort file1 file2 | uniq å–å‡ºä¸¤ä¸ªæ–‡ä»¶çš„å¹¶é›†(é‡å¤çš„è¡Œåªä¿ç•™ä¸€ä»½)</p><p>sort file1 file2 | uniq -u åˆ é™¤äº¤é›†ï¼Œç•™ä¸‹å…¶ä»–çš„è¡Œ</p><p>sort file1 file2 | uniq -d å–å‡ºä¸¤ä¸ªæ–‡ä»¶çš„äº¤é›†(åªç•™ä¸‹åŒæ—¶å­˜åœ¨äºä¸¤ä¸ªæ–‡ä»¶ä¸­çš„æ–‡ä»¶)</p><p>comm -1 file1 file2 æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹åªåˆ é™¤ â€˜file1â€™ æ‰€åŒ…å«çš„å†…å®¹</p><p>comm -2 file1 file2 æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹åªåˆ é™¤ â€˜file2â€™ æ‰€åŒ…å«çš„å†…å®¹</p><p>comm -3 file1 file2 æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹åªåˆ é™¤ä¸¤ä¸ªæ–‡ä»¶å…±æœ‰çš„éƒ¨åˆ†</p><h2 id="å­—ç¬¦è®¾ç½®å’Œæ–‡ä»¶æ ¼å¼è½¬æ¢">å­—ç¬¦è®¾ç½®å’Œæ–‡ä»¶æ ¼å¼è½¬æ¢</h2><p>dos2unix filedos.txt fileunix.txt å°†ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„æ ¼å¼ä»MSDOSè½¬æ¢æˆUNIX</p><p>unix2dos fileunix.txt filedos.txt å°†ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„æ ¼å¼ä»UNIXè½¬æ¢æˆMSDOS</p><p>recode â€¦HTML &lt; page.txt &gt; page.html å°†ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶è½¬æ¢æˆhtml</p><p>recode -l | more æ˜¾ç¤ºæ‰€æœ‰å…è®¸çš„è½¬æ¢æ ¼å¼</p><h2 id="æ–‡ä»¶ç³»ç»Ÿåˆ†æ">æ–‡ä»¶ç³»ç»Ÿåˆ†æ</h2><p>badblocks -v /dev/hda1 æ£€æŸ¥ç£ç›˜hda1ä¸Šçš„åç£å—</p><p>fsck /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šlinuxæ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§</p><p>fsck.ext2 /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šext2æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§</p><p>e2fsck /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šext2æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§</p><p>e2fsck -j /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šext3æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§</p><p>fsck.ext3 /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šext3æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§</p><p>fsck.vfat /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šfatæ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§</p><p>fsck.msdos /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šdosæ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§</p><p>dosfsck /dev/hda1 ä¿®å¤/æ£€æŸ¥hda1ç£ç›˜ä¸Šdosæ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§</p><h2 id="åˆå§‹åŒ–ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ">åˆå§‹åŒ–ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ</h2><p>mkfs /dev/hda1 åœ¨hda1åˆ†åŒºåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ</p><p>mke2fs /dev/hda1 åœ¨hda1åˆ†åŒºåˆ›å»ºä¸€ä¸ªlinux ext2çš„æ–‡ä»¶ç³»ç»Ÿ</p><p>mke2fs -j /dev/hda1 åœ¨hda1åˆ†åŒºåˆ›å»ºä¸€ä¸ªlinux ext3(æ—¥å¿—å‹)çš„æ–‡ä»¶ç³»ç»Ÿ</p><p>mkfs -t vfat 32 -F /dev/hda1 åˆ›å»ºä¸€ä¸ª FAT32 æ–‡ä»¶ç³»ç»Ÿ</p><p>fdformat -n /dev/fd0 æ ¼å¼åŒ–ä¸€ä¸ªè½¯ç›˜</p><p>mkswap /dev/hda3 åˆ›å»ºä¸€ä¸ªswapæ–‡ä»¶ç³»ç»Ÿ</p><h2 id="SWAPæ–‡ä»¶ç³»ç»Ÿ">SWAPæ–‡ä»¶ç³»ç»Ÿ</h2><p>mkswap /dev/hda3 åˆ›å»ºä¸€ä¸ªswapæ–‡ä»¶ç³»ç»Ÿ</p><p>swapon /dev/hda3 å¯ç”¨ä¸€ä¸ªæ–°çš„swapæ–‡ä»¶ç³»ç»Ÿ</p><p>swapon /dev/hda2 /dev/hdb3 å¯ç”¨ä¸¤ä¸ªswapåˆ†åŒº</p><h2 id="å¤‡ä»½">å¤‡ä»½</h2><p>dump -0aj -f /tmp/home0.bak /home åˆ¶ä½œä¸€ä¸ª â€˜/homeâ€™ ç›®å½•çš„å®Œæ•´å¤‡ä»½</p><p>dump -1aj -f /tmp/home0.bak /home åˆ¶ä½œä¸€ä¸ª â€˜/homeâ€™ ç›®å½•çš„äº¤äº’å¼å¤‡ä»½</p><p>restore -if /tmp/home0.bak è¿˜åŸä¸€ä¸ªäº¤äº’å¼å¤‡ä»½</p><p>rsync -rogpav --delete /home /tmp åŒæ­¥ä¸¤è¾¹çš„ç›®å½•</p><p>rsync -rogpav -e ssh --delete /home ip_address:/tmp é€šè¿‡SSHé€šé“rsync</p><p>rsync -az -e ssh --delete ip_addr:/home/public /home/local é€šè¿‡sshå’Œå‹ç¼©å°†ä¸€ä¸ªè¿œç¨‹ç›®å½•åŒæ­¥åˆ°æœ¬åœ°ç›®å½•</p><p>rsync -az -e ssh --delete /home/local ip_addr:/home/public é€šè¿‡sshå’Œå‹ç¼©å°†æœ¬åœ°ç›®å½•åŒæ­¥åˆ°è¿œç¨‹ç›®å½•</p><p>dd bs=1M if=/dev/hda | gzip | ssh user@ip_addr â€˜dd of=hda.gzâ€™ é€šè¿‡sshåœ¨è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œä¸€æ¬¡å¤‡ä»½æœ¬åœ°ç£ç›˜çš„æ“ä½œ</p><p>dd if=/dev/sda of=/tmp/file1 å¤‡ä»½ç£ç›˜å†…å®¹åˆ°ä¸€ä¸ªæ–‡ä»¶</p><p>tar -Puf backup.tar /home/user æ‰§è¡Œä¸€æ¬¡å¯¹ â€˜/home/userâ€™ ç›®å½•çš„äº¤äº’å¼å¤‡ä»½æ“ä½œ</p><p>( cd /tmp/local/ &amp;&amp; tar c . ) | ssh -C user@ip_addr â€˜cd /home/share/ &amp;&amp; tar x -pâ€™ é€šè¿‡sshåœ¨è¿œç¨‹ç›®å½•ä¸­å¤åˆ¶ä¸€ä¸ªç›®å½•å†…å®¹</p><p>( tar c /home ) | ssh -C user@ip_addr â€˜cd /home/backup-home &amp;&amp; tar x -pâ€™ é€šè¿‡sshåœ¨è¿œç¨‹ç›®å½•ä¸­å¤åˆ¶ä¸€ä¸ªæœ¬åœ°ç›®å½•</p><p>tar cf - . | (cd /tmp/backup ; tar xf - ) æœ¬åœ°å°†ä¸€ä¸ªç›®å½•å¤åˆ¶åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼Œä¿ç•™åŸæœ‰æƒé™åŠé“¾æ¥</p><p>find /home/user1 -name â€˜*.txtâ€™ | xargs cp -av --target-directory=/home/backup/ --parents ä»ä¸€ä¸ªç›®å½•æŸ¥æ‰¾å¹¶å¤åˆ¶æ‰€æœ‰ä»¥ â€˜.txtâ€™ ç»“å°¾çš„æ–‡ä»¶åˆ°å¦ä¸€ä¸ªç›®å½•</p><p>find /var/log -name â€˜*.logâ€™ | tar cv --files-from=- | bzip2 &gt; log.tar.bz2 æŸ¥æ‰¾æ‰€æœ‰ä»¥ â€˜.logâ€™ ç»“å°¾çš„æ–‡ä»¶å¹¶åšæˆä¸€ä¸ªbzipåŒ…</p><p>dd if=/dev/hda of=/dev/fd0 bs=512 count=1 åšä¸€ä¸ªå°† MBR (Master Boot Record)å†…å®¹å¤åˆ¶åˆ°è½¯ç›˜çš„åŠ¨ä½œ</p><p>dd if=/dev/fd0 of=/dev/hda bs=512 count=1 ä»å·²ç»ä¿å­˜åˆ°è½¯ç›˜çš„å¤‡ä»½ä¸­æ¢å¤MBRå†…å®¹</p><h2 id="å…‰ç›˜">å…‰ç›˜</h2><p>cdrecord -v gracetime=2 dev=/dev/cdrom -eject blank=fast -force æ¸…ç©ºä¸€ä¸ªå¯å¤å†™çš„å…‰ç›˜å†…å®¹</p><p>mkisofs /dev/cdrom &gt; cd.iso åœ¨ç£ç›˜ä¸Šåˆ›å»ºä¸€ä¸ªå…‰ç›˜çš„isoé•œåƒæ–‡ä»¶</p><p>mkisofs /dev/cdrom | gzip &gt; cd_iso.gz åœ¨ç£ç›˜ä¸Šåˆ›å»ºä¸€ä¸ªå‹ç¼©äº†çš„å…‰ç›˜isoé•œåƒæ–‡ä»¶</p><p>mkisofs -J -allow-leading-dots -R -V â€œLabel CDâ€ -iso-level 4 -o ./cd.iso data_cd åˆ›å»ºä¸€ä¸ªç›®å½•çš„isoé•œåƒæ–‡ä»¶</p><p>cdrecord -v dev=/dev/cdrom cd.iso åˆ»å½•ä¸€ä¸ªISOé•œåƒæ–‡ä»¶</p><p>gzip -dc cd_iso.gz | cdrecord dev=/dev/cdrom - åˆ»å½•ä¸€ä¸ªå‹ç¼©äº†çš„ISOé•œåƒæ–‡ä»¶</p><p>mount -o loop cd.iso /mnt/iso æŒ‚è½½ä¸€ä¸ªISOé•œåƒæ–‡ä»¶</p><p>cd-paranoia -B ä»ä¸€ä¸ªCDå…‰ç›˜è½¬å½•éŸ³è½¨åˆ° wav æ–‡ä»¶ä¸­</p><p>cd-paranoia â€“ â€œ-3â€ ä»ä¸€ä¸ªCDå…‰ç›˜è½¬å½•éŸ³è½¨åˆ° wav æ–‡ä»¶ä¸­ï¼ˆå‚æ•°-3ï¼‰</p><p>cdrecord --scanbus æ‰«ææ€»çº¿ä»¥è¯†åˆ«scsié€šé“</p><p>dd if=/dev/hdc | md5sum æ ¡éªŒä¸€ä¸ªè®¾å¤‡çš„md5sumç¼–ç ï¼Œä¾‹å¦‚ä¸€å¼  CD</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> Linux </tag>
            
            <tag> å‘½ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç¦åˆ©ã€‘è¶…æ˜Ÿå…¨è‡ªåŠ¨åˆ·ç½‘è¯¾åˆ·é¢˜è„šæœ¬å¼€æºã€22.4.23æ›´æ–°ã€‘</title>
      <link href="/2022/03/12/%E3%80%90%E7%A6%8F%E5%88%A9%E3%80%91%E8%B6%85%E6%98%9F%E5%85%A8%E8%87%AA%E5%8A%A8%E5%88%B7%E7%BD%91%E8%AF%BE%E5%88%B7%E9%A2%98%E8%84%9A%E6%9C%AC%E5%BC%80%E6%BA%90/"/>
      <url>/2022/03/12/%E3%80%90%E7%A6%8F%E5%88%A9%E3%80%91%E8%B6%85%E6%98%9F%E5%85%A8%E8%87%AA%E5%8A%A8%E5%88%B7%E7%BD%91%E8%AF%BE%E5%88%B7%E9%A2%98%E8%84%9A%E6%9C%AC%E5%BC%80%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<h1>è¶…æ˜Ÿå…¨è‡ªåŠ¨åˆ·ç½‘è¯¾åˆ·é¢˜è„šæœ¬å¼€æº</h1><h2 id="1-æ•™ç¨‹">1.æ•™ç¨‹</h2><ol><li><p>ä½¿ç”¨ç”µè„‘è‡ªå¸¦çš„Edgeæµè§ˆå™¨</p></li><li><p>ä¸‹è½½tampermonkeyæµè§ˆå™¨è„šæœ¬ç®¡ç†å·¥å…·ã€‚<a href="https://www.tampermonkey.net/?ext=dhdg&amp;browser=edge">ä¸‹è½½åœ°å€ç‚¹æˆ‘</a></p></li><li><p>å®‰è£…tampermonkeyã€‚è¿™æ˜¯ç›´æ¥å®‰è£…åœ¨ä½ Edgeæµè§ˆå™¨ä¸Šçš„ï¼Œå‚»ç“œå¼æ“ä½œã€‚</p></li><li><p>å®‰è£…å®Œæˆåæµè§ˆå™¨çš„å³ä¸Šè§’ä¼šå‡ºç°ä¸€ä¸ªå›¾æ ‡ï¼Œå¦‚ä¸‹å›¾<img src="/images/2022-3-12-3.png" alt="upload successful"></p></li><li><p>ç”¨é¼ æ ‡å·¦é”®ç‚¹å®ƒï¼Œé€‰æ‹©æ·»åŠ æ–°è„šæœ¬ï¼Œç„¶åæŠŠæˆ‘ä¸‹é¢å†™çš„ä»£ç å¤åˆ¶ç²˜è´´è¿›å»ï¼ˆè®°å¾—ä¿å­˜å“¦ï¼ï¼‰ï¼Œæ‰“å¼€è¶…æ˜Ÿç™»å½•ï¼Œä½ å°±ä¼šå‘ç°å®ƒå˜æˆå…¨è‡ªåŠ¨äº†ã€‚<img src="/images/2022-3-12-4.png" alt="upload successful"></p></li><li><p>å¦‚æœä½ æ‡’å¾—å¤åˆ¶ä»£ç ï¼Œå°±ç‚¹æˆ‘å°è£…å¥½çš„jsåº“å»å®‰è£…ï¼Œä¸‹é¢æˆ‘ä¼šæ”¾å…¥ç½‘å€ã€‚ã€æ›´æ–°å†…å®¹ã€‘</p></li><li><p>è„šæœ¬å®‰è£…ç½‘å€<a href="https://greasyfork.org/scripts/443325-%E8%B6%85%E6%98%9F%E5%B0%94%E9%9B%85mooc%E5%AD%A6%E4%B9%A0%E9%80%9A%E7%AB%A0%E8%8A%82%E6%8C%82%E6%9C%BA%E5%8A%A9%E6%89%8B-2022-3-19-%E4%B8%80%E4%BA%BF%E9%A2%98%E5%BA%93/code/%E8%B6%85%E6%98%9F%E5%B0%94%E9%9B%85MOOC%E5%AD%A6%E4%B9%A0%E9%80%9A%E7%AB%A0%E8%8A%82%E6%8C%82%E6%9C%BA%E5%8A%A9%E6%89%8B%E3%80%902022319%E3%80%91%E3%80%90%E4%B8%80%E4%BA%BF%E9%A2%98%E5%BA%93%E3%80%91.user.js">ç‚¹æˆ‘å®‰è£…</a> Â ã€æ›´æ–°å†…å®¹ã€‘</p></li></ol><h2 id="2-è„šæœ¬ä»£ç ">2.è„šæœ¬ä»£ç </h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ==UserScript==</span><br><span class="hljs-comment">// @name         è¶…æ˜Ÿå°”é›…MOOCå­¦ä¹ é€šç« èŠ‚æŒ‚æœºåŠ©æ‰‹ã€2022/3/19ã€‘ã€ä¸€äº¿é¢˜åº“ã€‘</span><br><span class="hljs-comment">// @version      8.0.13</span><br><span class="hljs-comment">// @namespace    Bruce_hai</span><br><span class="hljs-comment">// @description  å‘ç°å¾ˆå¤šè„šæœ¬å¹¶ä¸èƒ½æœç´¢é€‰é¡¹ï¼Œç©ºé—²æ—¶é—´å¼€å‘åŒæ—¶æœç´¢ã€æ ‡é¢˜ã€‘ã€é€‰é¡¹ã€‘å’Œã€è¶…æ˜Ÿidã€‘èƒ½å¤Ÿæ›´åŠ ç²¾å‡†å¹¶è¿…é€Ÿçš„æ‰¾åˆ°ç­”æ¡ˆ[é«˜å‡†ç¡®ç‡å¸¦é€‰é¡¹æŸ¥è¯¢,æ€¥é€Ÿå“åº”,ä»»ä½•é—®é¢˜åŠæ—¶è”ç³»ç¾¤ä¸»æ›´æ–°]è‡ªåŠ¨æŒ‚æœºçœ‹å°”é›…MOOCï¼Œæ”¯æŒè§†é¢‘ã€éŸ³é¢‘ã€æ–‡æ¡£ã€å›¾ä¹¦è‡ªåŠ¨å®Œæˆï¼Œç« èŠ‚æµ‹éªŒè‡ªåŠ¨ç­”é¢˜æäº¤ï¼Œæ”¯æŒè‡ªåŠ¨åˆ‡æ¢ä»»åŠ¡ç‚¹ã€æŒ‚æœºé˜…è¯»æ—¶é•¿ã€è‡ªåŠ¨ç™»å½•ç­‰ï¼Œè§£é™¤å„ç±»åŠŸèƒ½é™åˆ¶ï¼Œå¼€æ”¾è‡ªå®šä¹‰å‚æ•°</span><br><span class="hljs-comment">// @author       Bruce_hai</span><br><span class="hljs-comment">// @match        *://*.chaoxing.com/*</span><br><span class="hljs-comment">// @match        *://*.edu.cn/*</span><br><span class="hljs-comment">// @match        *://*.nbdlib.cn/*</span><br><span class="hljs-comment">// @match        *://*.hnsyu.net/*</span><br><span class="hljs-comment">// @match        *://*.dayi100.com/*</span><br><span class="hljs-comment">// @connect      134.175.72.16</span><br><span class="hljs-comment">// @connect      119.6.233.156</span><br><span class="hljs-comment">// @run-at       document-end</span><br><span class="hljs-comment">// @grant        unsafeWindow</span><br><span class="hljs-comment">// @grant        GM_xmlhttpRequest</span><br><span class="hljs-comment">// @grant        GM_setValue</span><br><span class="hljs-comment">// @grant        GM_getValue</span><br><span class="hljs-comment">// @grant        GM_setClipboard</span><br><span class="hljs-comment">// @license      MIT</span><br><span class="hljs-comment">// @require      https://libs.baidu.com/jquery/2.0.0/jquery.min.js</span><br><span class="hljs-comment">// @original-script https://greasyfork.org/scripts/369625</span><br><span class="hljs-comment">// @original-author wyn665817</span><br><span class="hljs-comment">// @original-script https://scriptcat.org/script-show-page/10/code</span><br><span class="hljs-comment">// @original-author coder_tq</span><br><span class="hljs-comment">// @original-license MIT</span><br><span class="hljs-comment">// ==/UserScript==</span><br><span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;video_url&quot;</span>,<span class="hljs-number">0</span>)<br><span class="hljs-comment">// è®¾ç½®ä¿®æ”¹åï¼Œéœ€è¦åˆ·æ–°æˆ–é‡æ–°æ‰“å¼€ç½‘è¯¾é¡µé¢æ‰ä¼šç”Ÿæ•ˆ è®¾ç½®äº†å“åº”æ—¶é—´ï¼Œæ›´æ–°å†ç­‰ç­‰å§</span><br><span class="hljs-keyword">var</span> setting = &#123;<br>    <span class="hljs-comment">// 5E3 == 5000ï¼Œç§‘å­¦è®°æ•°æ³•ï¼Œè¡¨ç¤ºæ¯«ç§’æ•°</span><br>    <span class="hljs-attr">time</span>: <span class="hljs-number">5E3</span> <span class="hljs-comment">// é»˜è®¤å“åº”é€Ÿåº¦ä¸º5ç§’ï¼Œä¸å»ºè®®å°äº5ç§’</span><br>    , <span class="hljs-attr">review</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// å¤ä¹ æ¨¡å¼ï¼Œå®Œæ•´æŒ‚æœºè§†é¢‘(éŸ³é¢‘)æ—¶é•¿ï¼Œæ”¯æŒæŒ‚æœºä»»åŠ¡ç‚¹å·²å®Œæˆçš„è§†é¢‘å’ŒéŸ³é¢‘ï¼Œé»˜è®¤å…³é—­</span><br>    , <span class="hljs-attr">queue</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// é˜Ÿåˆ—æ¨¡å¼ï¼Œå¼€å¯åä»»åŠ¡ç‚¹é€ä¸€å®Œæˆï¼Œå…³é—­åˆ™å•é¡µé¢æ‰€æœ‰ä»»åŠ¡ç‚¹åŒæ—¶è¿›è¡Œï¼Œé»˜è®¤å¼€å¯</span><br> <br>    <span class="hljs-comment">// 1ä»£è¡¨å¼€å¯ï¼Œ0ä»£è¡¨å…³é—­</span><br>    , <span class="hljs-attr">video</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// è§†é¢‘æ”¯æŒåå°ã€åˆ‡æ¢çª—å£ä¸æš‚åœï¼Œæ”¯æŒå¤šè§†é¢‘ï¼Œé»˜è®¤å¼€å¯</span><br>    , <span class="hljs-attr">work</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// è‡ªåŠ¨ç­”é¢˜åŠŸèƒ½(ç« èŠ‚æµ‹éªŒ)ï¼Œä½œä¸šéœ€è¦æ‰‹åŠ¨å¼€å¯æŸ¥è¯¢ï¼Œé«˜å‡†ç¡®ç‡ï¼Œé»˜è®¤å¼€å¯</span><br>    , <span class="hljs-attr">audio</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// éŸ³é¢‘è‡ªåŠ¨æ’­æ”¾ï¼Œä¸è§†é¢‘åŠŸèƒ½å…±äº«volå’Œrateå‚æ•°ï¼Œé»˜è®¤å¼€å¯</span><br>    , <span class="hljs-attr">book</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// å›¾ä¹¦é˜…è¯»ä»»åŠ¡ç‚¹ï¼Œéè¯¾ç¨‹é˜…è¯»ä»»åŠ¡ç‚¹ï¼Œé»˜è®¤å¼€å¯</span><br>    , <span class="hljs-attr">docs</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// æ–‡æ¡£é˜…è¯»ä»»åŠ¡ç‚¹ï¼ŒPPTç±»ä»»åŠ¡ç‚¹è‡ªåŠ¨å®Œæˆé˜…è¯»ä»»åŠ¡ï¼Œé»˜è®¤å¼€å¯</span><br>    <span class="hljs-comment">// æœ¬åŒºåŸŸå‚æ•°ï¼Œä¸Šæ–¹ä¸ºä»»åŠ¡ç‚¹åŠŸèƒ½ï¼Œä¸‹æ–¹ä¸ºç‹¬ç«‹åŠŸèƒ½</span><br>    , <span class="hljs-attr">jump</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// è‡ªåŠ¨åˆ‡æ¢ä»»åŠ¡ç‚¹ã€ç« èŠ‚ã€è¯¾ç¨‹(éœ€è¦é…ç½®courseå‚æ•°)ï¼Œé»˜è®¤å¼€å¯</span><br>    , <span class="hljs-attr">read</span>: <span class="hljs-string">&#x27;65&#x27;</span> <span class="hljs-comment">// æŒ‚æœºè¯¾ç¨‹é˜…è¯»æ—¶é—´ï¼Œå•ä½æ˜¯åˆ†é’Ÿï¼Œ&#x27;65&#x27;ä»£è¡¨æŒ‚æœº65åˆ†é’Ÿï¼Œè¯·æ‰‹åŠ¨æ‰“å¼€é˜…è¯»é¡µé¢ï¼Œé»˜è®¤&#x27;65&#x27;åˆ†é’Ÿ</span><br>    , <span class="hljs-attr">face</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// è§£é™¤é¢éƒ¨è¯†åˆ«(ä¸æ”¯æŒäºŒç»´ç ç±»é¢éƒ¨é‡‡é›†)ï¼Œæ­¤åŠŸèƒ½ä»…ä¸ºä¸´æ—¶è§£é™¤ï¼Œé»˜è®¤å¼€å¯</span><br>    , <span class="hljs-attr">total</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// æ˜¾ç¤ºè¯¾ç¨‹è¿›åº¦çš„ç»Ÿè®¡æ•°æ®ï¼Œåœ¨å­¦ä¹ è¿›åº¦é¡µé¢çš„ä¸Šæ–¹å±•ç¤ºï¼Œé»˜è®¤å¼€å¯</span><br> <br>    <span class="hljs-comment">// ä»…å¼€å¯video(audio)æ—¶ï¼Œä¿®æ”¹æ­¤å¤„æ‰ä¼šç”Ÿæ•ˆ</span><br>    , <span class="hljs-attr">line</span>: <span class="hljs-string">&#x27;å…¬ç½‘1&#x27;</span> <span class="hljs-comment">// è§†é¢‘æ’­æ”¾çš„é»˜è®¤èµ„æºçº¿è·¯ï¼Œæ­¤åŠŸèƒ½é€‚ç”¨äºç³»ç»Ÿé»˜è®¤çº¿è·¯æ— èµ„æºï¼Œé»˜è®¤&#x27;å…¬ç½‘1&#x27;</span><br>    , <span class="hljs-attr">http</span>: <span class="hljs-string">&#x27;æ ‡æ¸…&#x27;</span> <span class="hljs-comment">// è§†é¢‘æ’­æ”¾çš„é»˜è®¤æ¸…æ™°åº¦ï¼Œæ— æ•ˆå‚æ•°åˆ™ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æ¸…æ™°åº¦ï¼Œé»˜è®¤&#x27;æ ‡æ¸…&#x27;</span><br>    <span class="hljs-comment">// æœ¬åŒºåŸŸå‚æ•°ï¼Œä¸Šæ–¹ä¸ºvideoåŠŸèƒ½ç‹¬äº«ï¼Œä¸‹æ–¹ä¸ºaudioåŠŸèƒ½å…±äº«</span><br>    , <span class="hljs-attr">vol</span>: <span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-comment">// é»˜è®¤éŸ³é‡çš„ç™¾åˆ†æ•°ï¼Œè®¾å®šèŒƒå›´ï¼š[0,100]ï¼Œ&#x27;0&#x27;ä¸ºé™éŸ³ï¼Œé»˜è®¤&#x27;0&#x27;</span><br>    , <span class="hljs-attr">rate</span>: <span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-comment">// è§†é¢‘æ’­æ”¾é»˜è®¤å€ç‡ï¼Œå‚æ•°èŒƒå›´0âˆª[0.0625,16]ï¼Œ&#x27;0&#x27;ä¸ºç§’è¿‡ï¼Œå€é€ŸåŠŸèƒ½å·²å¤±æ•ˆï¼Œå…ˆä¸€å€é€Ÿçœ‹ç€</span><br> <br>    <span class="hljs-comment">// ä»…å¼€å¯workæ—¶ï¼Œä¿®æ”¹æ­¤å¤„æ‰ä¼šç”Ÿæ•ˆ</span><br>    <span class="hljs-comment">// auto: 1 å·²æ”¾ç½®é¢æ¿,è¯·åœ¨é¢æ¿é…ç½®,é»˜è®¤ä¸ºè‡ªåŠ¨æäº¤ // ç­”é¢˜å®Œæˆåè‡ªåŠ¨æäº¤ï¼Œé»˜è®¤å¼€å¯</span><br>    , <span class="hljs-attr">none</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// æ— åŒ¹é…ç­”æ¡ˆæ—¶æ‰§è¡Œé»˜è®¤æ“ä½œï¼Œå…³é—­åè‹¥é¢˜ç›®æ— åŒ¹é…ç­”æ¡ˆåˆ™ä¼šæš‚æ—¶ä¿å­˜å·²ä½œç­”çš„é¢˜ç›®ï¼Œé»˜è®¤å¼€å¯</span><br>    , <span class="hljs-attr">scale</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// å¯Œæ–‡æœ¬ç¼–è¾‘å™¨é«˜åº¦è‡ªåŠ¨æ‹‰ä¼¸ï¼Œç”¨äºæ–‡æœ¬ç±»é¢˜ç›®ï¼Œç­”é¢˜æ¡†æ ¹æ®å†…å®¹è‡ªåŠ¨è°ƒæ•´å¤§å°ï¼Œé»˜è®¤å…³é—­</span><br> <br>    <span class="hljs-comment">// ä»…å¼€å¯jumpæ—¶ï¼Œä¿®æ”¹æ­¤å¤„æ‰ä¼šç”Ÿæ•ˆ</span><br>    , <span class="hljs-attr">course</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// å½“å‰è¯¾ç¨‹å®Œæˆåè‡ªåŠ¨åˆ‡æ¢è¯¾ç¨‹ï¼Œä»…æ”¯æŒæŒ‰ç…§æ ¹ç›®å½•è¯¾ç¨‹é¡ºåºåˆ‡æ¢ï¼Œé»˜è®¤å¼€å¯</span><br>    , <span class="hljs-attr">lock</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// è·³è¿‡æœªå¼€æ”¾(å›¾æ ‡æ˜¯é”)çš„ç« èŠ‚ï¼Œå³é—¯å…³æ¨¡å¼æˆ–å®šæ—¶å‘æ”¾çš„ä»»åŠ¡ç‚¹ï¼Œé»˜è®¤å¼€å¯</span><br>    ,version :<span class="hljs-string">&#x27;8.0.13&#x27;</span><br>    <span class="hljs-comment">// è‡ªåŠ¨ç™»å½•åŠŸèƒ½é…ç½®åŒº</span><br>    , <span class="hljs-attr">school</span>: <span class="hljs-string">&#x27;è´¦å·ä¸ºæ‰‹æœºå·å¯ä»¥ä¸ä¿®æ”¹æ­¤å‚æ•°&#x27;</span> <span class="hljs-comment">// å­¦æ ¡/å•ä½/æœºæ„ç ï¼Œè¦æ±‚å®Œæ•´æœ‰æ•ˆå¯æŸ¥è¯¢ï¼Œä¾‹å¦‚&#x27;æ¸…åå¤§å­¦&#x27;</span><br>    , <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-comment">// å­¦å·/å·¥å·/å€Ÿä¹¦è¯å·(é‚®ç®±/æ‰‹æœºå·/è´¦å·)ï¼Œä¾‹å¦‚&#x27;2018010101&#x27;ï¼Œé»˜è®¤&#x27;&#x27;</span><br>    , <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-comment">// å¯†ç ï¼Œä¾‹å¦‚&#x27;123456&#x27;ï¼Œé»˜è®¤&#x27;&#x27;</span><br> <br>&#125;,<br>    _self = unsafeWindow,<br>    url = location.<span class="hljs-property">pathname</span>,<br>    top = _self,<br>    <span class="hljs-comment">//apihost = &quot;http://134.175.72.16/xuexitong&quot;;//   ä¸‹é¢çš„ä¸èƒ½ç”¨ç”¨è¿™ä¸ª</span><br>    apihost = <span class="hljs-string">&quot;http://119.6.233.156:309/xuexitong&quot;</span>;<span class="hljs-comment">//   é«˜é˜²å¾¡æœåŠ¡å™¨ï¼Œæ‰“æ­»æˆ‘ä¹°20å°ã€‚ä¸¤ä¸ªåªèƒ½å­˜åœ¨ä¸€ä¸ªï¼Œå¦‚æœç”¨è¿™ä¸ªå°±å–æ¶ˆæœ€å‰é¢çš„//</span><br> <br> <br><span class="hljs-keyword">var</span> tmpSubmit = <span class="hljs-number">1</span>;<br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(setting, <span class="hljs-string">&quot;auto&quot;</span>, &#123;<br>    <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span> (tmpSubmit &gt;= <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">return</span> tmpSubmit === <span class="hljs-number">3</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">GM_getValue</span>(<span class="hljs-string">&quot;autosubmit&quot;</span>);<br>    &#125;, <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) &#123;<br>        tmpSubmit = value + <span class="hljs-number">2</span>;<br>    &#125;<br>&#125;);<br> <br>setting.<span class="hljs-property">notice</span> = <span class="hljs-string">&#x27;å…¬å‘Šæ &#x27;</span>;<br> <br><span class="hljs-keyword">if</span> (url != <span class="hljs-string">&#x27;/studyApp/studying&#x27;</span> &amp;&amp; top != _self.<span class="hljs-property">top</span>) <span class="hljs-variable language_">document</span>.<span class="hljs-property">domain</span> = location.<span class="hljs-property">host</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/.+?\./</span>, <span class="hljs-string">&#x27;&#x27;</span>);<br> <br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">while</span> (top != _self.<span class="hljs-property">top</span>) &#123;<br>        top = top.<span class="hljs-property">parent</span>.<span class="hljs-property">document</span> ? top.<span class="hljs-property">parent</span> : _self.<span class="hljs-property">top</span>;<br>        <span class="hljs-keyword">if</span> (top.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span> == <span class="hljs-string">&#x27;/mycourse/studentstudy&#x27;</span>) <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    <span class="hljs-comment">// console.log(err);</span><br>    top = _self;<br>&#125;<br> <br><span class="hljs-keyword">var</span> $ = _self.<span class="hljs-property">jQuery</span> || top.<span class="hljs-property">jQuery</span>,<br>    parent = _self == top ? self : _self.<span class="hljs-property">parent</span>,<br>    <span class="hljs-title class_">Ext</span> = _self.<span class="hljs-property">Ext</span> || parent.<span class="hljs-property">Ext</span> || &#123;&#125;,<br>    <span class="hljs-variable constant_">UE</span> = _self.<span class="hljs-property">UE</span>,<br>    vjs = _self.<span class="hljs-property">videojs</span>;<br> <br>$(<span class="hljs-string">&#x27;.Header&#x27;</span>).<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;a:contains(å›åˆ°æ—§ç‰ˆ)&#x27;</span>)[<span class="hljs-number">0</span>] ? $(<span class="hljs-string">&#x27;.Header&#x27;</span>).<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;a:contains(å›åˆ°æ—§ç‰ˆ)&#x27;</span>)[<span class="hljs-number">0</span>].<span class="hljs-title function_">click</span>() : <span class="hljs-string">&#x27;&#x27;</span>;<br> <br><span class="hljs-title class_">String</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toCDB</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\s/g</span>, <span class="hljs-string">&#x27;&#x27;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[\uff01-\uff5e]/g</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">str</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(str.<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>) - <span class="hljs-number">65248</span>);<br>    &#125;).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[â€œâ€]/g</span>, <span class="hljs-string">&#x27;&quot;&#x27;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[â€˜â€™]/g</span>, <span class="hljs-string">&quot;&#x27;&quot;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/ã€‚/g</span>, <span class="hljs-string">&#x27;.&#x27;</span>);<br>&#125;;<br> <br>setting.<span class="hljs-property">normal</span> = <span class="hljs-string">&#x27;&#x27;</span>; <span class="hljs-comment">// &#x27;:visible&#x27;</span><br><span class="hljs-comment">// setting.time += Math.ceil(setting.time * Math.random()) - setting.time / 2;</span><br>setting.<span class="hljs-property">job</span> = [<span class="hljs-string">&#x27;:not(*)&#x27;</span>];<br> <br>setting.<span class="hljs-property">video</span> &amp;&amp; setting.<span class="hljs-property">job</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;iframe[src*=&quot;/video/index.html&quot;]&#x27;</span>);<br>setting.<span class="hljs-property">work</span> &amp;&amp; setting.<span class="hljs-property">job</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;iframe[src*=&quot;/work/index.html&quot;]&#x27;</span>);<br>setting.<span class="hljs-property">audio</span> &amp;&amp; setting.<span class="hljs-property">job</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;iframe[src*=&quot;/audio/index.html&quot;]&#x27;</span>);<br>setting.<span class="hljs-property">book</span> &amp;&amp; setting.<span class="hljs-property">job</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;iframe[src*=&quot;/innerbook/index.html&quot;]&#x27;</span>);<br>setting.<span class="hljs-property">docs</span> &amp;&amp; setting.<span class="hljs-property">job</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;iframe[src*=&quot;/ppt/index.html&quot;]&#x27;</span>, <span class="hljs-string">&#x27;iframe[src*=&quot;/pdf/index.html&quot;]&#x27;</span>);<br> <br>setting.<span class="hljs-property">tip</span> = !setting.<span class="hljs-property">queue</span> || top != _self &amp;&amp; <span class="hljs-title function_">jobSort</span>($ || <span class="hljs-title class_">Ext</span>.<span class="hljs-property">query</span>);<br> <br><span class="hljs-keyword">if</span> (url == <span class="hljs-string">&#x27;/mycourse/studentstudy&#x27;</span>) &#123;<br>    _self.<span class="hljs-property">checkMobileBrowerLearn</span> = $.noop;<br>    <span class="hljs-keyword">var</span> classId = location.<span class="hljs-property">search</span>.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/cla[zs]&#123;2&#125;id=(\d+)/i</span>)[<span class="hljs-number">1</span>] || <span class="hljs-number">0</span>,<br>        courseId = _self.<span class="hljs-property">courseId</span> || location.<span class="hljs-property">search</span>.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/courseId=(\d+)/i</span>)[<span class="hljs-number">1</span>] || <span class="hljs-number">0</span>;<br>    setting.<span class="hljs-property">lock</span> || $(<span class="hljs-string">&#x27;#coursetree&#x27;</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">&#x27;[onclick*=void], [href*=void]&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        _self.<span class="hljs-title function_">getTeacherAjax</span>(courseId, classId, $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">parent</span>().<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;id&#x27;</span>).<span class="hljs-title function_">slice</span>(<span class="hljs-number">3</span>));<br>    &#125;);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url == <span class="hljs-string">&#x27;/ananas/modules/video/index.html&#x27;</span> &amp;&amp; setting.<span class="hljs-property">video</span>) &#123;<br>    <span class="hljs-keyword">if</span> (setting.<span class="hljs-property">review</span>) _self.<span class="hljs-property">greenligth</span> = <span class="hljs-title class_">Ext</span>.<span class="hljs-property">emptyFn</span>;<br>    <span class="hljs-title function_">checkPlayer</span>(_self.<span class="hljs-title function_">supportH5Video</span>());<br>    <span class="hljs-title function_">click_bo</span>();<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url == <span class="hljs-string">&#x27;/work/doHomeWorkNew&#x27;</span> || url == <span class="hljs-string">&#x27;/api/work&#x27;</span> || url == <span class="hljs-string">&#x27;/work/addStudentWorkNewWeb&#x27;</span> || url == <span class="hljs-string">&#x27;/mooc2/work/dowork&#x27;</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;è¿›å…¥ç­”é¢˜ç•Œé¢ï¼&quot;</span>);<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable constant_">UE</span>) &#123;<br>        <span class="hljs-keyword">var</span> len = ($ || <span class="hljs-title class_">Ext</span>.<span class="hljs-property">query</span> || <span class="hljs-title class_">Array</span>)(<span class="hljs-string">&#x27;font:contains(æœªç™»å½•)&#x27;</span>, <span class="hljs-variable language_">document</span>).<span class="hljs-property">length</span>;<br>        <span class="hljs-built_in">setTimeout</span>(len == <span class="hljs-number">1</span> ? top.<span class="hljs-property">location</span>.<span class="hljs-property">reload</span> : parent.<span class="hljs-property">greenligth</span>, setting.<span class="hljs-property">time</span>);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (setting.<span class="hljs-property">work</span>) &#123;<br>        <span class="hljs-built_in">setTimeout</span>(relieveLimit, <span class="hljs-number">0</span>);<br>        <span class="hljs-title function_">beforeFind</span>();<br>    &#125;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url == <span class="hljs-string">&#x27;/ananas/modules/audio/index.html&#x27;</span> &amp;&amp; setting.<span class="hljs-property">audio</span>) &#123;<br>    <span class="hljs-keyword">if</span> (setting.<span class="hljs-property">review</span>) _self.<span class="hljs-property">greenligth</span> = <span class="hljs-title class_">Ext</span>.<span class="hljs-property">emptyFn</span>;<br>    <span class="hljs-comment">// _self.videojs = hookAudio;</span><br>    _self.<span class="hljs-property">alert</span> = <span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-title class_">OriginPlayer</span> = _self.<span class="hljs-property">videojs</span>.<span class="hljs-title function_">getComponent</span>(<span class="hljs-string">&#x27;Player&#x27;</span>)<br>    <span class="hljs-keyword">let</span> woailiyinhe = <span class="hljs-keyword">function</span> (<span class="hljs-params">tag, options, ready</span>) &#123;<br>        <span class="hljs-keyword">var</span> config = options;<br>        config.<span class="hljs-property">plugins</span>.<span class="hljs-property">studyControl</span>.<span class="hljs-property">enableSwitchWindow</span> = <span class="hljs-number">1</span>;<br>        config.<span class="hljs-property">plugins</span>.<span class="hljs-property">seekBarControl</span>.<span class="hljs-property">enableFastForward</span> = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (!setting.<span class="hljs-property">queue</span>) <span class="hljs-keyword">delete</span> config.<span class="hljs-property">plugins</span>.<span class="hljs-property">studyControl</span>;<br>        <span class="hljs-keyword">let</span> player = <span class="hljs-title class_">OriginPlayer</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, tag, options, ready)<br>        <span class="hljs-keyword">var</span><br>        a = <span class="hljs-string">&#x27;&lt;a href=&quot;https://d0.ananas.chaoxing.com/download/&#x27;</span> + _self.<span class="hljs-title function_">config</span>(<span class="hljs-string">&#x27;objectid&#x27;</span>) + <span class="hljs-string">&#x27;&quot; target=&quot;_blank&quot;&gt;&#x27;</span>,<br>            img = <span class="hljs-string">&#x27;&lt;img src=&quot;https://d0.ananas.chaoxing.com/download/e363b256c0e9bc5bd8266bf99dd6d6bb&quot; style=&quot;margin: 6px 0 0 6px;&quot;&gt;&#x27;</span>;<br>        player.<span class="hljs-title function_">volume</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(setting.<span class="hljs-property">vol</span>) / <span class="hljs-number">100</span> || <span class="hljs-number">0</span>);<br>        player.<span class="hljs-title function_">playbackRate</span>(setting.<span class="hljs-property">rate</span> &gt; <span class="hljs-number">16</span> || setting.<span class="hljs-property">rate</span> &lt; <span class="hljs-number">0.0625</span> ? <span class="hljs-number">1</span> : setting.<span class="hljs-property">rate</span>);<br>        <span class="hljs-title class_">Ext</span>.<span class="hljs-title function_">get</span>(player.<span class="hljs-property">controlBar</span>.<span class="hljs-title function_">addChild</span>(<span class="hljs-string">&#x27;Button&#x27;</span>).<span class="hljs-property">el_</span>).<span class="hljs-title function_">setHTML</span>(a + img + <span class="hljs-string">&#x27;&lt;/a&gt;&#x27;</span>).<span class="hljs-property">dom</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;ä¸‹è½½éŸ³é¢‘&#x27;</span>;<br>        player.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;loadeddata&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            setting.<span class="hljs-property">tip</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">play</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-title class_">Ext</span>.<span class="hljs-property">emptyFn</span>);<br>        &#125;);<br>        player.<span class="hljs-title function_">one</span>(<span class="hljs-string">&#x27;firstplay&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            setting.<span class="hljs-property">rate</span> === <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; config.<span class="hljs-property">plugins</span>.<span class="hljs-property">seekBarControl</span>.<span class="hljs-title function_">sendLog</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">children_</span>[<span class="hljs-number">0</span>], <span class="hljs-string">&#x27;ended&#x27;</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cache_</span>.<span class="hljs-property">duration</span>));<br>        &#125;);<br>        player.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;ended&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-title class_">Ext</span>.<span class="hljs-title function_">fly</span>(frameElement).<span class="hljs-title function_">parent</span>().<span class="hljs-title function_">addCls</span>(<span class="hljs-string">&#x27;ans-job-finished&#x27;</span>);<br>        &#125;);<br>        <span class="hljs-keyword">return</span> player;<br>    &#125;<br>    woailiyinhe.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">OriginPlayer</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>)<br>    _self.<span class="hljs-property">videojs</span>.<span class="hljs-title function_">getComponent</span>(<span class="hljs-string">&#x27;Component&#x27;</span>).<span class="hljs-property">components_</span>[<span class="hljs-string">&#x27;Player&#x27;</span>] = woailiyinhe<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url == <span class="hljs-string">&#x27;/ananas/modules/innerbook/index.html&#x27;</span> &amp;&amp; setting.<span class="hljs-property">book</span> &amp;&amp; setting.<span class="hljs-property">tip</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        _self.<span class="hljs-property">setting</span> ? _self.<span class="hljs-property">top</span>.<span class="hljs-title function_">onchangepage</span>(_self.<span class="hljs-title function_">getFrameAttr</span>(<span class="hljs-string">&#x27;end&#x27;</span>)) : _self.<span class="hljs-title function_">greenligth</span>();<br>    &#125;, setting.<span class="hljs-property">time</span>);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^\/ananas\/modules\/(ppt|pdf)\/index\.html$/</span>) &amp;&amp; setting.<span class="hljs-property">docs</span> &amp;&amp; setting.<span class="hljs-property">tip</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        _self.<span class="hljs-property">setting</span> ? _self.<span class="hljs-title function_">finishJob</span>() : _self.<span class="hljs-title function_">greenligth</span>();<br>    &#125;, setting.<span class="hljs-property">time</span>);<br>    frameElement.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;download&#x27;</span>, <span class="hljs-number">1</span>);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url == <span class="hljs-string">&#x27;/knowledge/cards&#x27;</span>) &#123;<br>    $ &amp;&amp; <span class="hljs-title function_">checkToNext</span>();<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^\/(course|zt)\/\d+\.html$/</span>)) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        +setting.<span class="hljs-property">read</span> &amp;&amp; _self.<span class="hljs-property">sendLogs</span> &amp;&amp; $(<span class="hljs-string">&#x27;.course_section:eq(0) .chapterText&#x27;</span>).<span class="hljs-title function_">click</span>();<br>    &#125;, setting.<span class="hljs-property">time</span>);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url == <span class="hljs-string">&#x27;/ztnodedetailcontroller/visitnodedetail&#x27;</span>) &#123;<br>    setting.<span class="hljs-property">read</span> *= <span class="hljs-number">60</span> / $(<span class="hljs-string">&#x27;.course_section&#x27;</span>).<span class="hljs-property">length</span>;<br>    setting.<span class="hljs-property">read</span> &amp;&amp; _self.<span class="hljs-property">sendLogs</span> &amp;&amp; <span class="hljs-title function_">autoRead</span>();<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url == <span class="hljs-string">&#x27;/mycourse/studentcourse&#x27;</span>) &#123;<br>    <span class="hljs-keyword">var</span> gv = location.<span class="hljs-property">search</span>.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/d=\d+&amp;/g</span>);<br>    setting.<span class="hljs-property">total</span> &amp;&amp; $(<span class="hljs-string">&#x27;&lt;a&gt;&#x27;</span>, &#123;<br>        <span class="hljs-attr">href</span>: <span class="hljs-string">&#x27;/moocAnalysis/chapterStatisticByUser?classI&#x27;</span> + gv[<span class="hljs-number">1</span>] + <span class="hljs-string">&#x27;courseI&#x27;</span> + gv[<span class="hljs-number">0</span>] + <span class="hljs-string">&#x27;userId=&#x27;</span> + _self.<span class="hljs-title function_">getCookie</span>(<span class="hljs-string">&#x27;_uid&#x27;</span>) + <span class="hljs-string">&#x27;&amp;ut=s&#x27;</span>,<br>        <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;_blank&#x27;</span>,<br>        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;ç‚¹å‡»æŸ¥çœ‹ç« èŠ‚ç»Ÿè®¡&#x27;</span>,<br>        <span class="hljs-attr">style</span>: <span class="hljs-string">&#x27;margin: 0 25px;color: #87CEFA;&#x27;</span>,<br>        <span class="hljs-attr">html</span>: <span class="hljs-string">&#x27;æœ¬è¯¾ç¨‹å…±&#x27;</span> + $(<span class="hljs-string">&#x27;.icon&#x27;</span>).<span class="hljs-property">length</span> + <span class="hljs-string">&#x27;èŠ‚ï¼Œå‰©ä½™&#x27;</span> + $(<span class="hljs-string">&#x27;em:not(.openlock)&#x27;</span>).<span class="hljs-property">length</span> + <span class="hljs-string">&#x27;èŠ‚æœªå®Œæˆ&#x27;</span><br>    &#125;).<span class="hljs-title function_">appendTo</span>(<span class="hljs-string">&#x27;.charter&#x27;</span>).<span class="hljs-title function_">parent</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">&#x27;auto&#x27;</span>);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^\/visit\/(courses|interaction)$/</span>)) &#123;<br>    setting.<span class="hljs-property">face</span> &amp;&amp; $(<span class="hljs-string">&#x27;.zmodel&#x27;</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">&#x27;[onclick^=openFaceTip]&#x27;</span>, <span class="hljs-title class_">DisplayURL</span>);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (location.<span class="hljs-property">host</span>.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^passport2/</span>)) &#123;<br>    setting.<span class="hljs-property">username</span> &amp;&amp; <span class="hljs-title function_">getSchoolId</span>();<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (location.<span class="hljs-property">hostname</span> == <span class="hljs-string">&#x27;i.mooc.chaoxing.com&#x27;</span> || location.<span class="hljs-property">hostname</span> == <span class="hljs-string">&#x27;i.chaoxing.com&#x27;</span>) &#123;<br>    _self.<span class="hljs-property">layui</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;layer&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">layer</span>.<span class="hljs-title function_">open</span>(&#123; <span class="hljs-attr">content</span>: <span class="hljs-string">&#x27;æ‹–åŠ¨è¿›åº¦æ¡ã€å€é€Ÿæ’­æ”¾ã€ç§’è¿‡ä¼šå¯¼è‡´ä¸è‰¯è®°å½•ï¼é¢˜åº“åœ¨æ…¢æ…¢è¡¥å……ï¼Œæœä¸åˆ°çš„é¢˜ç›®ç³»ç»Ÿä¼šå°½å¿«è¿›è¡Œè‡ªåŠ¨è¡¥å……&#x27;</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;è¶…æ˜Ÿç½‘è¯¾åŠ©æ‰‹æç¤º&#x27;</span>, <span class="hljs-attr">btn</span>: <span class="hljs-string">&#x27;æˆ‘å·²çŸ¥æ‚‰&#x27;</span>, <span class="hljs-attr">offset</span>: <span class="hljs-string">&#x27;t&#x27;</span>, <span class="hljs-attr">closeBtn</span>: <span class="hljs-number">0</span> &#125;);<br>    &#125;);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url == <span class="hljs-string">&#x27;/widget/pcvote/goStudentVotePage&#x27;</span>) &#123;<br>    $(<span class="hljs-string">&#x27;:checked&#x27;</span>).<span class="hljs-title function_">click</span>();<br>    $(<span class="hljs-string">&#x27;.StudentTimu&#x27;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">index</span>) &#123;<br>        <span class="hljs-keyword">var</span> ans = _self.<span class="hljs-property">questionlist</span>[index].<span class="hljs-property">answer</span>;<br>        $(<span class="hljs-string">&#x27;:radio, :checkbox&#x27;</span>, <span class="hljs-variable language_">this</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">num</span>) &#123;<br>            ans[num].<span class="hljs-property">isanswer</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">click</span>();<br>        &#125;);<br>        $(<span class="hljs-string">&#x27;:text&#x27;</span>, <span class="hljs-variable language_">this</span>).<span class="hljs-title function_">val</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">num</span>) &#123;<br>            <span class="hljs-keyword">return</span> $(ans[num].<span class="hljs-property">content</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>();<br>        &#125;);<br>    &#125;);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url == <span class="hljs-string">&#x27;/work/selectWorkQuestionYiPiYue&#x27;</span>) &#123;<br>    <span class="hljs-title function_">submitAnswer</span>(<span class="hljs-title function_">getIframe</span>().<span class="hljs-title function_">parent</span>(), $.<span class="hljs-title function_">extend</span>(<span class="hljs-literal">true</span>, [], parent.<span class="hljs-property">_data</span>));<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getIframe</span>(<span class="hljs-params">tip, win, job</span>) &#123;<br>    <span class="hljs-keyword">if</span> (!$) <span class="hljs-keyword">return</span> <span class="hljs-title class_">Ext</span>.<span class="hljs-title function_">get</span>(frameElement || []).<span class="hljs-title function_">parent</span>().<span class="hljs-title function_">child</span>(<span class="hljs-string">&#x27;.ans-job-icon&#x27;</span>) || <span class="hljs-title class_">Ext</span>.<span class="hljs-title function_">get</span>([]);<br>    <span class="hljs-keyword">do</span> &#123;<br>        win = win ? win.<span class="hljs-property">parent</span> : _self;<br>        job = $(win.<span class="hljs-property">frameElement</span>).<span class="hljs-title function_">prevAll</span>(<span class="hljs-string">&#x27;.ans-job-icon&#x27;</span>);<br>    &#125; <span class="hljs-keyword">while</span> (!job.<span class="hljs-property">length</span> &amp;&amp; win.<span class="hljs-property">parent</span>.<span class="hljs-property">frameElement</span>);<br>    <span class="hljs-keyword">return</span> tip ? win : job;<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">jobSort</span>(<span class="hljs-params">$</span>) &#123;<br>    <span class="hljs-keyword">var</span> fn = $.fn ? [<span class="hljs-title function_">getIframe</span>(<span class="hljs-number">1</span>), <span class="hljs-string">&#x27;length&#x27;</span>] : [self, <span class="hljs-string">&#x27;dom&#x27;</span>],<br>        sel = setting.<span class="hljs-property">job</span>.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;, :not(.ans-job-finished) &gt; .ans-job-icon&#x27;</span> + setting.<span class="hljs-property">normal</span> + <span class="hljs-string">&#x27; ~ &#x27;</span>);<br>    <span class="hljs-keyword">if</span> ($(sel, fn[<span class="hljs-number">0</span>].<span class="hljs-property">parent</span>.<span class="hljs-property">document</span>)[<span class="hljs-number">0</span>] == fn[<span class="hljs-number">0</span>].<span class="hljs-property">frameElement</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">getIframe</span>()[fn[<span class="hljs-number">1</span>]] || <span class="hljs-title function_">getIframe</span>().<span class="hljs-title function_">parent</span>().<span class="hljs-title function_">is</span>(<span class="hljs-string">&#x27;.ans-job-finished&#x27;</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        $(sel, fn[<span class="hljs-number">0</span>].<span class="hljs-property">parent</span>.<span class="hljs-property">document</span>)[<span class="hljs-number">0</span>] == fn[<span class="hljs-number">0</span>].<span class="hljs-property">frameElement</span> &amp;&amp; fn[<span class="hljs-number">0</span>].<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>();<br>    &#125;, setting.<span class="hljs-property">time</span>);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">click_bo</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æ²¡æœ‰å†™è¿‡è¿™ä¹ˆåƒåœ¾çš„ç©æ„......................................&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;ç–«æƒ…æœŸé—´å½“å¿—æ„¿è€…æ²¡æ—¶é—´ä¿®å¤å€é€Ÿ,ä¸€å€é€Ÿæ…¢æ…¢çœ‹&quot;</span>);<br>    <span class="hljs-keyword">var</span> interval=<span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#video &gt; button&quot;</span>))&#123;<br>            <span class="hljs-keyword">var</span> video=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;video_html5_api&quot;</span>);<br>            <span class="hljs-keyword">var</span> video_url=video.<span class="hljs-property">src</span>;<br>            <span class="hljs-keyword">var</span> suspend=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#video &gt; div.vjs-control-bar &gt; button.vjs-play-control.vjs-control.vjs-button.vjs-paused&quot;</span>);<br>            <span class="hljs-keyword">if</span> (<span class="hljs-title function_">getIframe</span>().<span class="hljs-title function_">parent</span>().<span class="hljs-title function_">is</span>(<span class="hljs-string">&#x27;.ans-job-finished&#x27;</span>))&#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æ’­æ”¾å®Œæ¯•&quot;</span>);<br>                <span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;video_url&quot;</span>,<span class="hljs-number">0</span>);<br>                <span class="hljs-built_in">clearInterval</span>(interval);<br>            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (suspend &amp;&amp;suspend.<span class="hljs-property">textContent</span>==<span class="hljs-string">&quot;æ’­æ”¾&quot;</span>&amp;&amp;video_url==<span class="hljs-title function_">GM_getValue</span>(<span class="hljs-string">&quot;video_url&quot;</span>))&#123;<br>                video.<span class="hljs-title function_">play</span>();<br>            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#video &gt; button&quot;</span>)&amp;&amp;<span class="hljs-title function_">GM_getValue</span>(<span class="hljs-string">&quot;video_url&quot;</span>)==<span class="hljs-number">0</span>)&#123;<br>                video.<span class="hljs-title function_">play</span>();<br>                <span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;video_url&quot;</span>,video_url);<br>            &#125;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#video &gt; div &gt; div &gt; button[title=&quot;é™éŸ³&quot;]&#x27;</span>)&amp;&amp;setting.<span class="hljs-property">vol</span>==<span class="hljs-string">&quot;0&quot;</span>) &#123;<br>                video.<span class="hljs-property">muted</span>=<span class="hljs-string">&quot;0&quot;</span>;<span class="hljs-comment">//ä¸èƒ½ç‚¹å‡»ï¼Œç‚¹å‡»ä¼šæœ‰bug.......</span><br>            &#125;<br> <br>        &#125;<br>    &#125;, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">3000</span>) + <span class="hljs-number">500</span>);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkPlayer</span>(<span class="hljs-params">tip</span>) &#123;<br>    <span class="hljs-comment">//ä»£ç æŠ„çš„ææ’é“çš„ï¼Œæ­£åœ¨å­¦ä¹ .....åœ°å€https://scriptcat.org/script-show-page/10/code</span><br>    _self.<span class="hljs-property">alert</span> = <span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-title class_">OriginPlayer</span> = _self.<span class="hljs-property">videojs</span>.<span class="hljs-title function_">getComponent</span>(<span class="hljs-string">&#x27;Player&#x27;</span>)<br>    <span class="hljs-keyword">let</span> woailiyinhe = <span class="hljs-keyword">function</span> (<span class="hljs-params">tag, options, ready</span>) &#123;<br>        <span class="hljs-keyword">let</span> config = options<br>        <span class="hljs-keyword">if</span> (!config) &#123;<br>            <span class="hljs-keyword">return</span> options;<br>        &#125;<br>        <span class="hljs-keyword">var</span> line = <span class="hljs-title class_">Ext</span>.<span class="hljs-property">Array</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Ext</span>.<span class="hljs-property">Array</span>.<span class="hljs-title function_">map</span>(config.<span class="hljs-property">playlines</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">value, index</span>) &#123;<br>            <span class="hljs-keyword">return</span> value.<span class="hljs-property">label</span> == setting.<span class="hljs-property">line</span> &amp;&amp; index;<br>        &#125;), <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Ext</span>.<span class="hljs-title function_">isNumber</span>(value);<br>        &#125;)[<span class="hljs-number">0</span>] || <span class="hljs-number">0</span>,<br>            http = <span class="hljs-title class_">Ext</span>.<span class="hljs-property">Array</span>.<span class="hljs-title function_">filter</span>(config.<span class="hljs-property">sources</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) &#123;<br>                <span class="hljs-keyword">return</span> value.<span class="hljs-property">label</span> == setting.<span class="hljs-property">http</span>;<br>            &#125;)[<span class="hljs-number">0</span>];<br>        config.<span class="hljs-property">playlines</span>.<span class="hljs-title function_">unshift</span>(config.<span class="hljs-property">playlines</span>[line]);<br>        config.<span class="hljs-property">playlines</span>.<span class="hljs-title function_">splice</span>(line + <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br>        config.<span class="hljs-property">plugins</span>.<span class="hljs-property">videoJsResolutionSwitcher</span>.<span class="hljs-property">default</span> = http ? http.<span class="hljs-property">res</span> : <span class="hljs-number">360</span>;<br>        config.<span class="hljs-property">plugins</span>.<span class="hljs-property">studyControl</span>.<span class="hljs-property">enableSwitchWindow</span> = <span class="hljs-number">1</span>;<br>        config.<span class="hljs-property">plugins</span>.<span class="hljs-property">timelineObjects</span>.<span class="hljs-property">url</span> = <span class="hljs-string">&#x27;/richvideo/initdatawithviewer?&#x27;</span>;<br>        config.<span class="hljs-property">plugins</span>.<span class="hljs-property">seekBarControl</span>.<span class="hljs-property">enableFastForward</span> = <span class="hljs-number">1</span>;<br>        config.<span class="hljs-property">playbackRates</span> = [<span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>];<br>        <span class="hljs-keyword">if</span> (!setting.<span class="hljs-property">queue</span>) <span class="hljs-keyword">delete</span> config.<span class="hljs-property">plugins</span>.<span class="hljs-property">studyControl</span>;<br>        <span class="hljs-keyword">let</span> player = <span class="hljs-title class_">OriginPlayer</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, tag, options, ready)<br>        <span class="hljs-keyword">var</span><br>        a = <span class="hljs-string">&#x27;&lt;a href=&quot;https://d0.ananas.chaoxing.com/download/&#x27;</span> + _self.<span class="hljs-title function_">config</span>(<span class="hljs-string">&#x27;objectid&#x27;</span>) + <span class="hljs-string">&#x27;&quot; target=&quot;_blank&quot;&gt;&#x27;</span>,<br>            img = <span class="hljs-string">&#x27;&lt;img src=&quot;https://d0.ananas.chaoxing.com/download/e363b256c0e9bc5bd8266bf99dd6d6bb&quot; style=&quot;margin: 6px 0 0 6px;&quot;&gt;&#x27;</span>;<br>        player.<span class="hljs-property">playbackRate</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) &#123; <span class="hljs-keyword">if</span> (<span class="hljs-keyword">void</span> <span class="hljs-number">0</span> === t) <span class="hljs-keyword">return</span>; <span class="hljs-variable language_">this</span>.<span class="hljs-property">tech_</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">tech_</span>.<span class="hljs-property">featuresPlaybackRate</span> ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache_</span>.<span class="hljs-property">lastPlaybackRate</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">techGet_</span>(<span class="hljs-string">&quot;playbackRate&quot;</span>) : setting.<span class="hljs-property">rate</span>; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">techCall_</span>(<span class="hljs-string">&quot;setPlaybackRate&quot;</span>, t) &#125;;<br>        player.<span class="hljs-title function_">volume</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(setting.<span class="hljs-property">vol</span>) / <span class="hljs-number">100</span> || <span class="hljs-number">0</span>);<br>        <span class="hljs-title class_">Ext</span>.<span class="hljs-title function_">get</span>(player.<span class="hljs-property">controlBar</span>.<span class="hljs-title function_">addChild</span>(<span class="hljs-string">&#x27;Button&#x27;</span>).<span class="hljs-property">el_</span>).<span class="hljs-title function_">setHTML</span>(a + img + <span class="hljs-string">&#x27;&lt;/a&gt;&#x27;</span>).<span class="hljs-property">dom</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;ä¸‹è½½è§†é¢‘&#x27;</span>;<br>        player.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;loadstart&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            setting.<span class="hljs-property">tip</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">play</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-title class_">Ext</span>.<span class="hljs-property">emptyFn</span>);<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">playbackRate</span>(setting.<span class="hljs-property">rate</span> &gt; <span class="hljs-number">16</span> || setting.<span class="hljs-property">rate</span> &lt; <span class="hljs-number">0.0625</span> ? <span class="hljs-number">1</span> : setting.<span class="hljs-property">rate</span>);<br>        &#125;);<br>        player.<span class="hljs-title function_">one</span>([<span class="hljs-string">&#x27;loadedmetadata&#x27;</span>, <span class="hljs-string">&#x27;firstplay&#x27;</span>], <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            setting.<span class="hljs-property">two</span> = setting.<span class="hljs-property">rate</span> === <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; setting.<span class="hljs-property">two</span> &lt; <span class="hljs-number">1</span>;<br>            setting.<span class="hljs-property">two</span> &amp;&amp; config.<span class="hljs-property">plugins</span>.<span class="hljs-property">seekBarControl</span>.<span class="hljs-title function_">sendLog</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">children_</span>[<span class="hljs-number">0</span>], <span class="hljs-string">&#x27;ended&#x27;</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cache_</span>.<span class="hljs-property">duration</span>));<br>        &#125;);<br>        player.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;ended&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-title class_">Ext</span>.<span class="hljs-title function_">fly</span>(frameElement).<span class="hljs-title function_">parent</span>().<span class="hljs-title function_">addCls</span>(<span class="hljs-string">&#x27;ans-job-finished&#x27;</span>);<br>        &#125;);<br>        <span class="hljs-keyword">return</span> player;<br>    &#125;<br>    woailiyinhe.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">OriginPlayer</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>)<br>    _self.<span class="hljs-property">videojs</span>.<span class="hljs-title function_">getComponent</span>(<span class="hljs-string">&#x27;Component&#x27;</span>).<span class="hljs-property">components_</span>[<span class="hljs-string">&#x27;Player&#x27;</span>] = woailiyinhe<br>    <span class="hljs-title class_">Ext</span>.<span class="hljs-property">isSogou</span> = <span class="hljs-title class_">Ext</span>.<span class="hljs-property">isIos</span> = <span class="hljs-title class_">Ext</span>.<span class="hljs-property">isAndroid</span> = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">var</span> data = <span class="hljs-title class_">Ext</span>.<span class="hljs-title function_">decode</span>(_self.<span class="hljs-title function_">config</span>(<span class="hljs-string">&#x27;data&#x27;</span>)) || &#123;&#125;;<br>    <span class="hljs-keyword">delete</span> data.<span class="hljs-property">danmaku</span>;<br>    data.<span class="hljs-property">doublespeed</span> = <span class="hljs-number">1</span>;<br>    frameElement.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-title class_">Ext</span>.<span class="hljs-title function_">encode</span>(data));<br> <br> <br>    <span class="hljs-comment">//_self.videojs = hookVideo;</span><br>    <span class="hljs-keyword">if</span> (tip) <span class="hljs-keyword">return</span>;<br>    _self.<span class="hljs-property">supportH5Video</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; &#125;;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æ­¤æµè§ˆå™¨ä¸æ”¯æŒhtml5æ’­æ”¾å™¨ï¼Œè¯·æ›´æ¢æµè§ˆå™¨&#x27;</span>);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">hookVideo</span>(<span class="hljs-params"></span>) &#123;<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">relieveLimit</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1221</span>);<br>    <span class="hljs-keyword">if</span> (setting.<span class="hljs-property">scale</span>) _self.<span class="hljs-property">UEDITOR_CONFIG</span>.<span class="hljs-property">scaleEnabled</span> = <span class="hljs-literal">false</span>;<br>    $.<span class="hljs-title function_">each</span>(<span class="hljs-variable constant_">UE</span>.<span class="hljs-property">instants</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> key = <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">ready</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">destroy</span>();<br>            <span class="hljs-variable constant_">UE</span>.<span class="hljs-title function_">getEditor</span>(key);<br>        &#125;);<br>    &#125;);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">beforeFind</span>(<span class="hljs-params"></span>) &#123;<br>    setting.<span class="hljs-property">regl</span> = parent.<span class="hljs-property">greenligth</span> || $.noop;<br>    <span class="hljs-keyword">if</span> ($.<span class="hljs-title function_">type</span>(parent.<span class="hljs-property">_data</span>) == <span class="hljs-string">&#x27;array&#x27;</span>) <span class="hljs-keyword">return</span> setting.<span class="hljs-title function_">regl</span>();<br>    <span class="hljs-keyword">var</span> maximize = $(<br>        <span class="hljs-string">&#x27;&lt;div style=&quot;border: 2px dashed rgb(0, 85, 68); position: fixed; top: 0; right: 0; z-index: 99999; background-color: rgba(184, 247, 255, 0.3); overflow-x: auto;display:none;&quot;&gt;â—»&lt;/div&gt;&#x27;</span><br>    ).<span class="hljs-title function_">appendTo</span>(<span class="hljs-string">&#x27;body&#x27;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        $(setting.<span class="hljs-property">div</span>).<span class="hljs-title function_">css</span>(<span class="hljs-string">&quot;display&quot;</span>, <span class="hljs-string">&quot;block&quot;</span>);<br>        <span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;minimize&quot;</span>, <span class="hljs-string">&quot;0&quot;</span>);<br>        $(maximize).<span class="hljs-title function_">css</span>(<span class="hljs-string">&quot;display&quot;</span>, <span class="hljs-string">&quot;none&quot;</span>);<br>    &#125;);<br> <br>    setting.<span class="hljs-property">div</span> = $(<br>        <span class="hljs-string">&#x27;&lt;div style=&quot;border: 2px dashed rgb(0, 85, 68); width: 330px; position: fixed; top: 0; right: 0; z-index: 99999; background-color: rgba(184, 247, 255, 0.3); overflow-x: auto;&quot;&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;span style=&quot;font-size: medium;&quot;&gt;&lt;/span&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;div style=&quot;font-size: medium;width:70%;display: inline-block;&quot;&gt;æ­£åœ¨æœç´¢ç­”æ¡ˆ...&lt;/div&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;div style=&quot;width:30%;display: inline-block;padding-right: 10px;box-sizing: border-box;text-align: right;&quot;&gt;&lt;minimize style=&quot;width:20px;font-size:16px;line-height: 12px;font-weight: bold;cursor: context-menu;user-select:none;&quot;&gt;ä¸€&lt;/minimize&gt;&lt;/div&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;div id=&quot;cx-notice&quot; style=&quot;border-top: 1px solid #000;border-bottom: 1px solid #000;margin: 4px 0px;overflow: hidden;&quot;&gt;&#x27;</span> + setting.<span class="hljs-property">notice</span> + <span class="hljs-string">&#x27;&lt;/div&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;button style=&quot;margin-right: 10px;&quot;&gt;æš‚åœç­”é¢˜&lt;/button&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;button style=&quot;margin-right: 10px;&quot;&gt;&#x27;</span> + (setting.<span class="hljs-property">auto</span> ? <span class="hljs-string">&#x27;å–æ¶ˆæœ¬æ¬¡è‡ªåŠ¨æäº¤&#x27;</span> : <span class="hljs-string">&#x27;å¼€å¯æœ¬æ¬¡è‡ªåŠ¨æäº¤&#x27;</span>) + <span class="hljs-string">&#x27;&lt;/button&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;button style=&quot;margin-right: 10px;&quot;&gt;é‡æ–°æŸ¥è¯¢&lt;/button&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;button&gt;æŠ˜å é¢æ¿&lt;/button&gt;&lt;br&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;input id=&quot;autosubmit&quot; type=&quot;checkbox&quot;&#x27;</span> + (setting.<span class="hljs-property">auto</span> ? <span class="hljs-string">&#x27; checked&#x27;</span> : <span class="hljs-string">&#x27;&#x27;</span>) + <span class="hljs-string">&#x27;&gt;è‡ªåŠ¨æäº¤&lt;/input&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;div style=&quot;max-height: 300px; overflow-y: auto;&quot;&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;table border=&quot;1&quot; style=&quot;font-size: 12px;&quot;&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;thead&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;tr&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;th style=&quot;width: 25px; min-width: 25px;&quot;&gt;é¢˜å·&lt;/th&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;th style=&quot;width: 60%; min-width: 130px;&quot;&gt;é¢˜ç›®ï¼ˆç‚¹å‡»å¯å¤åˆ¶ï¼‰&lt;/th&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;th style=&quot;min-width: 130px;&quot;&gt;ç­”æ¡ˆï¼ˆç‚¹å‡»å¯å¤åˆ¶ï¼‰&lt;/th&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;/tr&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;/thead&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;tfoot style=&quot;display: none;&quot;&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;tr&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;th colspan=&quot;3&quot;&gt;ç­”æ¡ˆæç¤ºæ¡† å·²æŠ˜å &lt;/th&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;/tr&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;/tfoot&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;tbody&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;tr&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;td colspan=&quot;3&quot; style=&quot;display: none;&quot;&gt;&lt;/td&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;/tr&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;/tbody&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;/table&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;/div&gt;&#x27;</span> +<br>        <span class="hljs-string">&#x27;&lt;/div&gt;&#x27;</span><br>    ).<span class="hljs-title function_">appendTo</span>(<span class="hljs-string">&#x27;body&#x27;</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">&#x27;button, td, input&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> len = $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">prevAll</span>(<span class="hljs-string">&#x27;button&#x27;</span>).<span class="hljs-property">length</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">nodeName</span> == <span class="hljs-string">&#x27;TD&#x27;</span>) &#123;<br>            $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">prev</span>().<span class="hljs-property">length</span> &amp;&amp; <span class="hljs-title function_">GM_setClipboard</span>($(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">text</span>());<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!$(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">siblings</span>().<span class="hljs-property">length</span>) &#123;<br>            $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">parent</span>().<span class="hljs-title function_">text</span>(<span class="hljs-string">&#x27;æ­£åœ¨æœç´¢ç­”æ¡ˆ...&#x27;</span>);<br>            setting.<span class="hljs-property">num</span>++;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (len === <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">if</span> (setting.<span class="hljs-property">loop</span>) &#123;<br>                <span class="hljs-built_in">clearInterval</span>(setting.<span class="hljs-property">loop</span>);<br>                <span class="hljs-keyword">delete</span> setting.<span class="hljs-property">loop</span>;<br>                len = [<span class="hljs-string">&#x27;å·²æš‚åœæœç´¢&#x27;</span>, <span class="hljs-string">&#x27;ç»§ç»­ç­”é¢˜&#x27;</span>];<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                setting.<span class="hljs-property">loop</span> = <span class="hljs-built_in">setInterval</span>(findAnswer, setting.<span class="hljs-property">time</span>);<br>                len = [<span class="hljs-string">&#x27;æ­£åœ¨æœç´¢ç­”æ¡ˆ...&#x27;</span>, <span class="hljs-string">&#x27;æš‚åœç­”é¢˜&#x27;</span>];<br>            &#125;<br>            setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>                <span class="hljs-keyword">return</span> $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">data</span>(<span class="hljs-string">&#x27;html&#x27;</span>) || len[<span class="hljs-number">0</span>];<br>            &#125;).<span class="hljs-title function_">removeData</span>(<span class="hljs-string">&#x27;html&#x27;</span>);<br>            $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">html</span>(len[<span class="hljs-number">1</span>]);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (len == <span class="hljs-number">1</span>) &#123;<br>            setting.<span class="hljs-property">auto</span> = !setting.<span class="hljs-property">auto</span>;<br>            $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">html</span>(setting.<span class="hljs-property">auto</span> ? <span class="hljs-string">&#x27;å–æ¶ˆæœ¬æ¬¡è‡ªåŠ¨æäº¤&#x27;</span> : <span class="hljs-string">&#x27;å¼€å¯æœ¬æ¬¡è‡ªåŠ¨æäº¤&#x27;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (len == <span class="hljs-number">2</span>) &#123;<br>            parent.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>();<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (len == <span class="hljs-number">3</span>) &#123;<br>            setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;tbody, tfoot&#x27;</span>).<span class="hljs-title function_">toggle</span>();<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> == <span class="hljs-string">&quot;autosubmit&quot;</span>) &#123;<br>            <span class="hljs-comment">// é¢˜ç›®è‡ªåŠ¨æäº¤é…ç½®</span><br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">checked</span>);<br>            <span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;autosubmit&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">checked</span>);<br>        &#125;<br>    &#125;).<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">&#x27;minimize&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">parent</span>().<span class="hljs-title function_">parent</span>().<span class="hljs-title function_">css</span>(<span class="hljs-string">&quot;display&quot;</span>, <span class="hljs-string">&quot;none&quot;</span>);<br>        <span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;minimize&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>);<br>        $(maximize).<span class="hljs-title function_">css</span>(<span class="hljs-string">&quot;display&quot;</span>, <span class="hljs-string">&quot;block&quot;</span>);<br>    &#125;).<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;table, td, th&#x27;</span>).<span class="hljs-title function_">css</span>(<span class="hljs-string">&#x27;border&#x27;</span>, <span class="hljs-string">&#x27;1px solid&#x27;</span>).<span class="hljs-title function_">end</span>();<br> <br>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">GM_getValue</span>(<span class="hljs-string">&quot;minimize&quot;</span>) == <span class="hljs-string">&quot;1&quot;</span>) &#123;<br>        $(setting.<span class="hljs-property">div</span>).<span class="hljs-title function_">css</span>(<span class="hljs-string">&quot;display&quot;</span>, <span class="hljs-string">&quot;none&quot;</span>);<br>        $(maximize).<span class="hljs-title function_">css</span>(<span class="hljs-string">&quot;display&quot;</span>, <span class="hljs-string">&quot;block&quot;</span>);<br>    &#125;<br> <br>    setting.<span class="hljs-property">lose</span> = setting.<span class="hljs-property">num</span> = <span class="hljs-number">0</span>;<br>    setting.<span class="hljs-property">data</span> = parent.<span class="hljs-property">_data</span> = [];<br>    setting.<span class="hljs-property">over</span> = <span class="hljs-string">&#x27;&lt;button style=&quot;margin-right: 10px;&quot;&gt;è·³è¿‡æ­¤é¢˜&lt;/button&gt;&#x27;</span>;<br>    setting.<span class="hljs-property">curs</span> = $(<span class="hljs-string">&#x27;script:contains(courseName)&#x27;</span>, top.<span class="hljs-property">document</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/courseName:\&#x27;(.+?)\&#x27;|$/</span>)[<span class="hljs-number">1</span>] || $(<span class="hljs-string">&#x27;h1&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>() || <span class="hljs-string">&#x27;æ— &#x27;</span>;<br>    setting.<span class="hljs-property">loop</span> = <span class="hljs-built_in">setInterval</span>(findAnswer, setting.<span class="hljs-property">time</span>);<br>    <span class="hljs-keyword">var</span> tip = (&#123; <span class="hljs-attr">undefined</span>: <span class="hljs-string">&#x27;ä»»åŠ¡ç‚¹æ’é˜Ÿä¸­&#x27;</span>, <span class="hljs-attr">null</span>: <span class="hljs-string">&#x27;ç­‰å¾…åˆ‡æ¢ä¸­&#x27;</span> &#125;)[setting.<span class="hljs-property">tip</span>];<br>    <span class="hljs-keyword">if</span> ($(<span class="hljs-string">&#x27;.ZyTop&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/å¾…åš/</span>))&#123;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        tip &amp;&amp; setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">data</span>(<span class="hljs-string">&#x27;html&#x27;</span>, tip).<span class="hljs-title function_">siblings</span>(<span class="hljs-string">&#x27;button:eq(0)&#x27;</span>).<span class="hljs-title function_">click</span>();<br>    &#125;<br>    <span class="hljs-title function_">GM_xmlhttpRequest</span>(&#123;<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>        <span class="hljs-attr">url</span>: apihost + <span class="hljs-string">&#x27;/cxtimu/notice&#x27;</span>,<br>        <span class="hljs-attr">timeout</span>: setting.<span class="hljs-property">time</span>,<br>        <span class="hljs-attr">onload</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">xhr</span>) &#123;<br>            <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> == <span class="hljs-number">200</span>) &#123;<br>                <span class="hljs-keyword">var</span> obj = $.<span class="hljs-title function_">parseJSON</span>(xhr.<span class="hljs-property">responseText</span>) || &#123;&#125;;<br>                setting.<span class="hljs-property">notice</span> = obj.<span class="hljs-property">injection</span>;<br>                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#cx-notice&#x27;</span>).<span class="hljs-property">innerHTML</span> = setting.<span class="hljs-property">notice</span>;<br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">ontimeout</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            setting.<span class="hljs-property">loop</span> &amp;&amp; setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">html</span>(setting.<span class="hljs-property">over</span> + <span class="hljs-string">&#x27;æœåŠ¡å™¨è¶…æ—¶ï¼Œæ­£åœ¨é‡è¯•.....å¯ä»¥è‡ªè¡Œæ›¿æ¢æœåŠ¡å™¨ï¼Œåœ¨ä»£ç çš„72è¡Œå·¦å³&#x27;</span>);<br>        &#125;<br>    &#125;);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">findAnswer</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> html=<span class="hljs-string">&quot;&quot;</span>;<br>    html = $(<span class="hljs-string">&quot;.CeYan&quot;</span>).<span class="hljs-title function_">html</span>()||$(<span class="hljs-string">&quot;body&quot;</span>).<span class="hljs-title function_">html</span>();<br>    <span class="hljs-keyword">if</span> (setting.<span class="hljs-property">num</span> &gt;= $(<span class="hljs-string">&#x27;.TiMu&#x27;</span>).<span class="hljs-property">length</span>) &#123;<br>        <span class="hljs-keyword">var</span> arr = setting.<span class="hljs-property">lose</span> ? [<span class="hljs-string">&#x27;å…±æœ‰ &lt;font color=&quot;red&quot;&gt;&#x27;</span> + setting.<span class="hljs-property">lose</span> + <span class="hljs-string">&#x27;&lt;/font&gt; é“é¢˜ç›®å¾…å®Œå–„ï¼ˆå·²æ·±è‰²æ ‡æ³¨ï¼‰&#x27;</span>, saveThis] : [<span class="hljs-string">&#x27;ç­”é¢˜å·²å®Œæˆ&#x27;</span>, submitThis];<br>        setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">data</span>(<span class="hljs-string">&#x27;html&#x27;</span>, arr[<span class="hljs-number">0</span>]).<span class="hljs-title function_">siblings</span>(<span class="hljs-string">&#x27;button:eq(0)&#x27;</span>).<span class="hljs-title function_">hide</span>().<span class="hljs-title function_">click</span>();<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">setTimeout</span>(arr[<span class="hljs-number">1</span>], setting.<span class="hljs-property">time</span>);<br>    &#125;<br>    <span class="hljs-keyword">var</span> $TiMu = $(<span class="hljs-string">&#x27;.TiMu&#x27;</span>).<span class="hljs-title function_">eq</span>(setting.<span class="hljs-property">num</span>),<br>        question = <span class="hljs-title function_">filterImg</span>($TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Zy_TItle:eq(0) .clearfix&#x27;</span>)).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^ã€.*?ã€‘\s*/</span>, <span class="hljs-string">&#x27;&#x27;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\s*ï¼ˆ\d+\.\d+åˆ†ï¼‰$/</span>, <span class="hljs-string">&#x27;&#x27;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\d+[\.ã€]/</span>, <span class="hljs-string">&#x27;&#x27;</span>),<br>        type = $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;input[name^=answertype]:eq(0)&#x27;</span>).<span class="hljs-title function_">val</span>() || <span class="hljs-string">&#x27;-1&#x27;</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>($TiMu);<br> <br>    <span class="hljs-keyword">if</span> (question == <span class="hljs-string">&quot;&quot;</span>) &#123;<br>        question = <span class="hljs-title function_">filterImg</span>($TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.mark_name:eq(0) .colorDeep&#x27;</span>));<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>($TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.mark_name:eq(0) .colorDeep&#x27;</span>));<br>    <span class="hljs-comment">// é—®é¢˜åè¿½åŠ å–å‡ºçš„é€‰é¡¹ 20220211</span><br>    <span class="hljs-keyword">var</span> selectlis = $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&quot;.Zy_ulTop&gt;li&quot;</span>);<br>    <span class="hljs-keyword">var</span> selectstr = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">if</span>(selectlis.<span class="hljs-property">length</span>&gt;<span class="hljs-number">2</span>)&#123;<br>        selectlis.<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">i,item</span>)&#123;<br>            <span class="hljs-comment">//selectstr += &quot; &quot; + $(item).text().replace(/\s+/g,&#x27;&#x27;);</span><br>            <span class="hljs-keyword">var</span> _self = $(item);<br>            <span class="hljs-comment">//filterImg( _self.find(&quot;a.after&quot;)).trim()</span><br>            selectstr += _self.<span class="hljs-title function_">find</span>(<span class="hljs-string">&quot;label.before&quot;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>() + <span class="hljs-string">&quot;ã€&quot;</span> + <span class="hljs-title function_">filterImg</span>( _self.<span class="hljs-title function_">find</span>(<span class="hljs-string">&quot;a.after&quot;</span>)).<span class="hljs-title function_">trim</span>()+<span class="hljs-string">&quot;\n&quot;</span>;<br>        &#125;)<br>        <span class="hljs-comment">//console.log(selectstr);</span><br>    &#125;<br>    <span class="hljs-comment">//question += selectstr;</span><br>    <span class="hljs-keyword">var</span> options=selectstr.<span class="hljs-title function_">trim</span>();<br>    <span class="hljs-comment">// end é—®é¢˜åè¿½åŠ å–å‡ºçš„é€‰é¡¹</span><br>    <span class="hljs-comment">// è¯¥é—®é¢˜çš„ansertype</span><br>    <span class="hljs-keyword">var</span> ansertype = $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;input[name^=answertype]:eq(0)&#x27;</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;id&#x27;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-string">&quot;answertype&quot;</span>,<span class="hljs-string">&quot;&quot;</span>)||<span class="hljs-number">0</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ansertype);<br>    <span class="hljs-comment">// end è¯¥é—®é¢˜çš„ansertype</span><br>    <span class="hljs-keyword">var</span> course = $(<span class="hljs-string">&#x27;script:contains(courseName)&#x27;</span>, top.<span class="hljs-property">document</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/courseName:\&#x27;(.+?)\&#x27;|$/</span>)[<span class="hljs-number">1</span>] || $(<span class="hljs-string">&#x27;h1&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(.*)è¯¾ç¨‹è¯„ä»·/</span>,<span class="hljs-string">&#x27;$1&#x27;</span>).<span class="hljs-title function_">trim</span>() || <span class="hljs-string">&#x27;æ— &#x27;</span>;<br>    <span class="hljs-title function_">GM_xmlhttpRequest</span>(&#123;<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        <span class="hljs-attr">url</span>: apihost + <span class="hljs-string">&#x27;/temporary_sea&#x27;</span>,<br>        <span class="hljs-attr">headers</span>: &#123;<br>            <span class="hljs-string">&#x27;Content-type&#x27;</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span>,<br>        &#125;,<br>        <span class="hljs-attr">data</span>: <span class="hljs-string">&#x27;question=&#x27;</span> + <span class="hljs-built_in">encodeURIComponent</span>(question)+<span class="hljs-string">&#x27;&amp;options=&#x27;</span>+<span class="hljs-built_in">encodeURIComponent</span>(options) + <span class="hljs-string">&#x27;&amp;cx_id=&#x27;</span> + ansertype+ <span class="hljs-string">&#x27;&amp;html=&#x27;</span> + <span class="hljs-built_in">encodeURIComponent</span>($TiMu.<span class="hljs-title function_">html</span>())+ <span class="hljs-string">&#x27;&amp;url=&#x27;</span> + <span class="hljs-built_in">encodeURIComponent</span>(top.<span class="hljs-property">document</span>.<span class="hljs-property">URL</span>)+<span class="hljs-string">&#x27;&amp;course=&#x27;</span>+<span class="hljs-built_in">encodeURIComponent</span>(course)+<span class="hljs-string">&#x27;&amp;version=8.0.13&#x27;</span>,<br>        <span class="hljs-attr">timeout</span>: setting.<span class="hljs-property">time</span>,<br>        <span class="hljs-attr">onload</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">xhr</span>) &#123;<br>            <span class="hljs-keyword">if</span> (!setting.<span class="hljs-property">loop</span>) &#123;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> == <span class="hljs-number">200</span>) &#123;<br>                <span class="hljs-keyword">var</span> obj = $.<span class="hljs-title function_">parseJSON</span>(xhr.<span class="hljs-property">responseText</span>) || &#123;&#125;;<br>                obj.<span class="hljs-property">answer</span> = obj.<span class="hljs-property">data</span>;<br>                <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">code</span>) &#123;<br>                    setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">text</span>(<span class="hljs-string">&#x27;æ­£åœ¨æœç´¢ç­”æ¡ˆ...&#x27;</span>);<br>                    <span class="hljs-keyword">var</span> td = <span class="hljs-string">&#x27;&lt;td style=&quot;border: 1px solid;&#x27;</span>,<br>                        answer = <span class="hljs-title class_">String</span>(obj.<span class="hljs-property">answer</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&amp;/g</span>, <span class="hljs-string">&#x27;&amp;&#x27;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;(?!img)/g</span>, <span class="hljs-string">&#x27;&lt;&#x27;</span>);<br>                    obj.<span class="hljs-property">answer</span> = <span class="hljs-regexp">/^http/</span>.<span class="hljs-title function_">test</span>(answer) ? <span class="hljs-string">&#x27;&lt;img src=&quot;&#x27;</span> + obj.<span class="hljs-property">answer</span> + <span class="hljs-string">&#x27;&quot;&gt;&#x27;</span> : obj.<span class="hljs-property">answer</span>;<br>                    $(<br>                        <span class="hljs-string">&#x27;&lt;tr&gt;&#x27;</span> +<br>                        td + <span class="hljs-string">&#x27; text-align: center;&quot;&gt;&#x27;</span> + $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Zy_TItle:eq(0) i&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>() + <span class="hljs-string">&#x27;&lt;/td&gt;&#x27;</span> +<br>                        td + <span class="hljs-string">&#x27;&quot; title=&quot;ç‚¹å‡»å¯å¤åˆ¶&quot;&gt;&#x27;</span> + (question.<span class="hljs-title function_">match</span>(<span class="hljs-string">&#x27;&lt;img&#x27;</span>) ? question : question.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&amp;/g</span>, <span class="hljs-string">&#x27;&amp;&#x27;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;/g</span>, <span class="hljs-string">&#x27;&lt;&#x27;</span>))+<span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>+options+<span class="hljs-string">&#x27;&lt;br&gt;&lt;/td&gt;&#x27;</span> +<br>                        td + <span class="hljs-string">&#x27;&quot; title=&quot;ç‚¹å‡»å¯å¤åˆ¶&quot;&gt;&#x27;</span> + (<span class="hljs-regexp">/^http/</span>.<span class="hljs-title function_">test</span>(answer) ? obj.<span class="hljs-property">answer</span> : <span class="hljs-string">&#x27;&#x27;</span>) + answer + <span class="hljs-string">&#x27;&lt;/td&gt;&#x27;</span> +<br>                        <span class="hljs-string">&#x27;&lt;/tr&gt;&#x27;</span><br>                    ).<span class="hljs-title function_">appendTo</span>(setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;tbody&#x27;</span>)).<span class="hljs-title function_">css</span>(<span class="hljs-string">&#x27;background-color&#x27;</span>, <span class="hljs-title function_">fillAnswer</span>($TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;ul:eq(0)&#x27;</span>).<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;li&#x27;</span>), obj, type) ? <span class="hljs-string">&#x27;&#x27;</span> : <span class="hljs-string">&#x27;rgba(0, 150, 136, 0.6)&#x27;</span>);<br>                    setting.<span class="hljs-property">data</span>[setting.<span class="hljs-property">num</span>++] = &#123;<br>                        <span class="hljs-attr">code</span>: obj.<span class="hljs-property">code</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>,<br>                        <span class="hljs-attr">question</span>: question,<br>                        <span class="hljs-attr">option</span>: obj.<span class="hljs-property">answer</span>,<br>                        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>(type)<br>                    &#125;;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">html</span>(obj.<span class="hljs-property">answer</span> || setting.<span class="hljs-property">over</span> + <span class="hljs-string">&#x27;æœåŠ¡å™¨ç¹å¿™ï¼Œæ­£åœ¨é‡è¯•...&#x27;</span>);<br>                &#125;<br>                setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;span&#x27;</span>).<span class="hljs-title function_">html</span>(obj.<span class="hljs-property">msg</span> || <span class="hljs-string">&#x27;&#x27;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> == <span class="hljs-number">403</span>) &#123;<br>                <span class="hljs-keyword">var</span> html = xhr.<span class="hljs-property">responseText</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;&#123;&#x27;</span>) ? <span class="hljs-string">&#x27;è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•&#x27;</span> : $.<span class="hljs-title function_">parseJSON</span>(xhr.<span class="hljs-property">responseText</span>).<span class="hljs-property">data</span>;<br>                setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">data</span>(<span class="hljs-string">&#x27;html&#x27;</span>, html).<span class="hljs-title function_">siblings</span>(<span class="hljs-string">&#x27;button:eq(0)&#x27;</span>).<span class="hljs-title function_">click</span>();<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> == <span class="hljs-number">500</span>) &#123;<br>                setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&#x27;é¢˜åº“ç¨‹åºå¼‚å¸¸,è¯·è¿‡ä¸€ä¼šå†è¯•&#x27;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> == <span class="hljs-number">444</span>) &#123;<br>                setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&#x27;IPå¼‚å¸¸ï¼Œå·²è¢«æ‹‰å…¥æœåŠ¡å™¨é»‘åå•ï¼Œè¯·è¿‡å‡ ä¸ªå°æ—¶å†è¯•&#x27;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&#x27;é¢˜åº“å¼‚å¸¸,å¯èƒ½è¢«æ¶æ„æ”»å‡»äº†...è¯·ç­‰å¾…æ¢å¤&#x27;</span>);<br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">ontimeout</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            setting.<span class="hljs-property">loop</span> &amp;&amp; setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;div:eq(0)&#x27;</span>).<span class="hljs-title function_">html</span>(setting.<span class="hljs-property">over</span> + <span class="hljs-string">&#x27;æœåŠ¡å™¨è¶…æ—¶ï¼Œæ­£åœ¨é‡è¯•...&#x27;</span>);<br>        &#125;<br>    &#125;);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fillAnswer</span>(<span class="hljs-params">$li, obj, type</span>) &#123;<br>    <span class="hljs-keyword">var</span> $input = $li.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;:radio, :checkbox&#x27;</span>),<br>        str = <span class="hljs-title class_">String</span>(obj.<span class="hljs-property">answer</span>).<span class="hljs-title function_">toCDB</span>() || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toString</span>(),<br>        data = str.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/#|\x01|\|/</span>),<br>        opt = obj.<span class="hljs-property">opt</span> || str,<br>        state = setting.<span class="hljs-property">lose</span>;<br>    <span class="hljs-comment">// $li.find(&#x27;:radio:checked&#x27;).prop(&#x27;checked&#x27;, false);</span><br>    obj.<span class="hljs-property">code</span> &gt; <span class="hljs-number">0</span> &amp;&amp; $input.<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">index</span>) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> == <span class="hljs-string">&#x27;true&#x27;</span>) &#123;<br>            data.<span class="hljs-title function_">join</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/(^|,)(æ­£ç¡®|æ˜¯|å¯¹|âˆš|T|true|ri)(,|$)/</span>) &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">click</span>();<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> == <span class="hljs-string">&#x27;false&#x27;</span>) &#123;<br>            data.<span class="hljs-title function_">join</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/(^|,)(é”™è¯¯|å¦|é”™|Ã—|F|false|X|wr)(,|$)/</span>) &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">click</span>();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">var</span> tip = <span class="hljs-title function_">filterImg</span>($li.<span class="hljs-title function_">eq</span>(index).<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.after&#x27;</span>)).<span class="hljs-title function_">toCDB</span>() || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toString</span>();<br>            <span class="hljs-title class_">Boolean</span>($.<span class="hljs-title function_">inArray</span>(tip, data) + <span class="hljs-number">1</span> || (type == <span class="hljs-string">&#x27;1&#x27;</span> &amp;&amp; str.<span class="hljs-title function_">indexOf</span>(tip) + <span class="hljs-number">1</span>)) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">checked</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">click</span>();<br>        &#125;<br>    &#125;).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/^A?B?C?D?E?F?G?$/</span>.<span class="hljs-title function_">test</span>(opt)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-title class_">Boolean</span>(opt.<span class="hljs-title function_">match</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>)) == <span class="hljs-variable language_">this</span>.<span class="hljs-property">checked</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">click</span>();<br>    &#125;);<br>    <span class="hljs-keyword">if</span> (type.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^[013]$/</span>)) &#123;<br>        $input.<span class="hljs-title function_">is</span>(<span class="hljs-string">&#x27;:checked&#x27;</span>) || (setting.<span class="hljs-property">none</span> ? ($input[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * $input.<span class="hljs-property">length</span>)] || $()).<span class="hljs-title function_">click</span>() : setting.<span class="hljs-property">lose</span>++);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(2|[4-9]|1[08])$/</span>)) &#123;<br>        data = <span class="hljs-title class_">String</span>(obj.<span class="hljs-property">answer</span>).<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/#|\x01|\|/</span>);<br>        str = $li.<span class="hljs-title function_">end</span>().<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;textarea&#x27;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">index</span>) &#123;<br>            index = (obj.<span class="hljs-property">code</span> &gt; <span class="hljs-number">0</span> &amp;&amp; data[index]) || <span class="hljs-string">&#x27;&#x27;</span>;<br>            <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">code</span> &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-variable constant_">UE</span>.<span class="hljs-title function_">getEditor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>).<span class="hljs-title function_">setContent</span>(index.<span class="hljs-title function_">trim</span>());<br>            &#125;<br>        &#125;).<span class="hljs-property">length</span>;<br>        (obj.<span class="hljs-property">code</span> &gt; <span class="hljs-number">0</span> &amp;&amp; data.<span class="hljs-property">length</span> == str) || setting.<span class="hljs-property">none</span> || setting.<span class="hljs-property">lose</span>++;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        setting.<span class="hljs-property">none</span> || setting.<span class="hljs-property">lose</span>++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> state == setting.<span class="hljs-property">lose</span>;<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">saveThis</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (!setting.<span class="hljs-property">auto</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">setTimeout</span>(saveThis, setting.<span class="hljs-property">time</span>);<br>    setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;button:lt(3)&#x27;</span>).<span class="hljs-title function_">hide</span>().<span class="hljs-title function_">eq</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">click</span>();<br>    _self.<span class="hljs-property">alert</span> = <span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>;<br>    $(<span class="hljs-string">&#x27;#tempsave&#x27;</span>).<span class="hljs-title function_">click</span>();<br>    setting.<span class="hljs-title function_">regl</span>();<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">submitThis</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (!setting.<span class="hljs-property">auto</span>) &#123;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!$(<span class="hljs-string">&#x27;.Btn_blue_1:visible&#x27;</span>).<span class="hljs-property">length</span>) &#123;<br>        setting.<span class="hljs-property">div</span>.<span class="hljs-title function_">children</span>(<span class="hljs-string">&#x27;button:lt(3)&#x27;</span>).<span class="hljs-title function_">hide</span>().<span class="hljs-title function_">eq</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">click</span>();<br>        <span class="hljs-keyword">return</span> setting.<span class="hljs-title function_">regl</span>();<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($(<span class="hljs-string">&#x27;#confirmSubWin:visible&#x27;</span>).<span class="hljs-property">length</span>) &#123;<br>        <span class="hljs-keyword">var</span> btn = $(<span class="hljs-string">&#x27;#tipContent + * &gt; a&#x27;</span>).<span class="hljs-title function_">offset</span>() || &#123; <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">0</span> &#125;,<br>            mouse = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createEvent</span>(<span class="hljs-string">&#x27;MouseEvents&#x27;</span>);<br>        btn = [btn.<span class="hljs-property">left</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">46</span>), btn.<span class="hljs-property">top</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">26</span>)];<br>        mouse.<span class="hljs-title function_">initMouseEvent</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">defaultView</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, btn[<span class="hljs-number">0</span>], btn[<span class="hljs-number">1</span>], <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">null</span>);<br>        _self.<span class="hljs-property">event</span> = $.<span class="hljs-title function_">extend</span>(<span class="hljs-literal">true</span>, &#123;&#125;, mouse);<br>        <span class="hljs-keyword">delete</span> _self.<span class="hljs-property">event</span>.<span class="hljs-property">isTrusted</span>;<br>        _self.<span class="hljs-title function_">form1submit</span>();<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        $(<span class="hljs-string">&#x27;.Btn_blue_1&#x27;</span>)[<span class="hljs-number">0</span>].<span class="hljs-title function_">click</span>();<br>    &#125;<br>    <span class="hljs-built_in">setTimeout</span>(submitThis, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(setting.<span class="hljs-property">time</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()) * <span class="hljs-number">2</span>);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkToNext</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> $tip = $(setting.<span class="hljs-property">job</span>.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;, &#x27;</span>), <span class="hljs-variable language_">document</span>).<span class="hljs-title function_">prevAll</span>(<span class="hljs-string">&#x27;.ans-job-icon&#x27;</span> + setting.<span class="hljs-property">normal</span>);<br>    <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        $tip.<span class="hljs-title function_">parent</span>(<span class="hljs-string">&#x27;:not(.ans-job-finished)&#x27;</span>).<span class="hljs-property">length</span> || setting.<span class="hljs-property">jump</span> &amp;&amp; <span class="hljs-title function_">toNext</span>();<br>    &#125;, setting.<span class="hljs-property">time</span>);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">toNext</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> $cur = $(<span class="hljs-string">&#x27;#cur&#x27;</span> + $(<span class="hljs-string">&#x27;#chapterIdid&#x27;</span>).<span class="hljs-title function_">val</span>()),<br>        $tip = $(<span class="hljs-string">&#x27;span.currents ~ span&#x27;</span>),<br>        sel = setting.<span class="hljs-property">review</span> ? <span class="hljs-string">&#x27;html&#x27;</span> : <span class="hljs-string">&#x27;.blue&#x27;</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;tonext&quot;</span>);<br>    <span class="hljs-keyword">if</span> (!$cur.<span class="hljs-title function_">has</span>(sel).<span class="hljs-property">length</span> &amp;&amp; $tip.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> $tip.<span class="hljs-title function_">eq</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">click</span>();<br>    $tip = $(<span class="hljs-string">&#x27;.roundpointStudent, .roundpoint&#x27;</span>).<span class="hljs-title function_">parent</span>();<br>    $tip = $tip.<span class="hljs-title function_">slice</span>($tip.<span class="hljs-title function_">index</span>($cur) + <span class="hljs-number">1</span>).<span class="hljs-title function_">not</span>(<span class="hljs-string">&#x27;:has(&#x27;</span> + sel + <span class="hljs-string">&#x27;)&#x27;</span>);<br>    $tip.<span class="hljs-title function_">not</span>(setting.<span class="hljs-property">lock</span> ? <span class="hljs-string">&#x27;:has(.lock)&#x27;</span> : <span class="hljs-string">&#x27;html&#x27;</span>).<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;span&#x27;</span>).<span class="hljs-title function_">eq</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">click</span>();<br>    $tip.<span class="hljs-property">length</span> || setting.<span class="hljs-property">course</span> &amp;&amp; <span class="hljs-title function_">switchCourse</span>();<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">switchCourse</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//$(&#x27;#right&#x27;).click()</span><br>    <span class="hljs-comment">//$(&#x27;#right2&#x27;).click()</span><br>    <span class="hljs-keyword">var</span> move_switch=<span class="hljs-literal">false</span>;<br>    $(<span class="hljs-string">&#x27;.orientationright&#x27;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">if</span> ($(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">css</span>(<span class="hljs-string">&#x27;display&#x27;</span>)==<span class="hljs-string">&#x27;block&#x27;</span>)&#123;<br>            move_switch=<span class="hljs-literal">true</span>;<br>            $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">click</span>();<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;ç‚¹å‡»æŒ‰é’®ä¸‹ä¸€ç« &quot;</span>);<br>        &#125;<br>    &#125;)<br>    <span class="hljs-keyword">if</span> (move_switch==<span class="hljs-literal">false</span>)&#123;<br>        <span class="hljs-title function_">GM_xmlhttpRequest</span>(&#123;<br>            <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>            <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/visit/courses/study?isAjax=true&amp;fileId=0&amp;debug=&#x27;</span>,<br>            <span class="hljs-attr">headers</span>: &#123;<br>                <span class="hljs-string">&#x27;Referer&#x27;</span>: location.<span class="hljs-property">origin</span> + <span class="hljs-string">&#x27;/visit/courses&#x27;</span>,<br>                <span class="hljs-string">&#x27;X-Requested-With&#x27;</span>: <span class="hljs-string">&#x27;XMLHttpRequest&#x27;</span><br>            &#125;,<br>            <span class="hljs-attr">onload</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">xhr</span>) &#123;<br>                <span class="hljs-keyword">var</span> list = $(<span class="hljs-string">&#x27;h3 a[target]&#x27;</span>, xhr.<span class="hljs-property">responseText</span>).<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>                    <span class="hljs-keyword">return</span> $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;href&#x27;</span>);<br>                &#125;),<br>                    index = list.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">index</span>) &#123;<br>                        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">match</span>(top.<span class="hljs-property">courseId</span>) &amp;&amp; index;<br>                    &#125;).<span class="hljs-title function_">filter</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>                        <span class="hljs-keyword">return</span> $.<span class="hljs-title function_">isNumeric</span>(<span class="hljs-variable language_">this</span>);<br>                    &#125;)[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span> || <span class="hljs-number">0</span>;<br>                setting.<span class="hljs-property">course</span> = list[index] ? <span class="hljs-title function_">goCourse</span>(list[index]) : <span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;);<br>    &#125;<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">goCourse</span>(<span class="hljs-params">url</span>) &#123;<br>    <span class="hljs-title function_">GM_xmlhttpRequest</span>(&#123;<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>        <span class="hljs-attr">url</span>: url,<br>        <span class="hljs-attr">onload</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">xhr</span>) &#123;<br>            $.<span class="hljs-title function_">globalEval</span>(<span class="hljs-string">&#x27;location.href = &quot;&#x27;</span> + $(<span class="hljs-string">&#x27;.articlename a[href]&#x27;</span>, xhr.<span class="hljs-property">responseText</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;href&#x27;</span>) + <span class="hljs-string">&#x27;&quot;;&#x27;</span>);<br>        &#125;<br>    &#125;);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">autoRead</span>(<span class="hljs-params"></span>) &#123;<br>    $(<span class="hljs-string">&#x27;html, body&#x27;</span>).<span class="hljs-title function_">animate</span>(&#123;<br>        <span class="hljs-attr">scrollTop</span>: $(<span class="hljs-variable language_">document</span>).<span class="hljs-title function_">height</span>() - $(<span class="hljs-variable language_">window</span>).<span class="hljs-title function_">height</span>()<br>    &#125;, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(setting.<span class="hljs-property">read</span>) * <span class="hljs-number">1E3</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        $(<span class="hljs-string">&#x27;.nodeItem.r i&#x27;</span>).<span class="hljs-title function_">click</span>();<br>    &#125;).<span class="hljs-title function_">one</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">&#x27;#top&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>        $(event.<span class="hljs-property">delegateTarget</span>).<span class="hljs-title function_">stop</span>();<br>    &#125;);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">DisplayURL</span>(<span class="hljs-params"></span>) &#123;<br>    _self.<span class="hljs-property">WAY</span>.<span class="hljs-property">box</span>.<span class="hljs-title function_">hide</span>();<br>    <span class="hljs-keyword">var</span> $li = $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">closest</span>(<span class="hljs-string">&#x27;li&#x27;</span>);<br>    $.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/visit/goToCourseByFace&#x27;</span>, &#123;<br>        <span class="hljs-attr">courseId</span>: $li.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;input[name=courseId]&#x27;</span>).<span class="hljs-title function_">val</span>(),<br>        <span class="hljs-attr">clazzId</span>: $li.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;input[name=classId]&#x27;</span>).<span class="hljs-title function_">val</span>()<br>    &#125;, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>        $li.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;[onclick^=openFaceTip]&#x27;</span>).<span class="hljs-title function_">removeAttr</span>(<span class="hljs-string">&#x27;onclick&#x27;</span>).<span class="hljs-title function_">attr</span>(&#123;<br>            <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;_blank&#x27;</span>,<br>            <span class="hljs-attr">href</span>: $(data).<span class="hljs-title function_">filter</span>(<span class="hljs-string">&#x27;script:last&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/n\(&quot;(.+?)&quot;/</span>)[<span class="hljs-number">1</span>]<br>        &#125;);<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æœ¬è¯¾ç¨‹å·²ä¸´æ—¶è§£é™¤é¢éƒ¨è¯†åˆ«&#x27;</span>);<br>    &#125;, <span class="hljs-string">&#x27;html&#x27;</span>);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getSchoolId</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> school = <span class="hljs-regexp">/^1\d&#123;10&#125;$/</span>.<span class="hljs-title function_">test</span>(setting.<span class="hljs-property">username</span>) ? <span class="hljs-string">&#x27;&#x27;</span> : setting.<span class="hljs-property">school</span>;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(school)) <span class="hljs-keyword">return</span> <span class="hljs-built_in">setTimeout</span>(toLogin, setting.<span class="hljs-property">time</span>, school);<br>    <span class="hljs-keyword">if</span> (school == <span class="hljs-string">&#x27;è´¦å·ä¸ºæ‰‹æœºå·å¯ä»¥ä¸ä¿®æ”¹æ­¤å‚æ•°&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;è¯·ä¿®æ”¹schoolå‚æ•°&#x27;</span>);<br>    $.<span class="hljs-title function_">getJSON</span>(<span class="hljs-string">&#x27;/org/searchUnis?filter=&#x27;</span> + <span class="hljs-built_in">encodeURI</span>(school) + <span class="hljs-string">&#x27;&amp;product=44&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>        <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">result</span>) <span class="hljs-keyword">return</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;å­¦æ ¡æŸ¥è¯¢é”™è¯¯&#x27;</span>);<br>        <span class="hljs-keyword">var</span> msg = $.<span class="hljs-title function_">grep</span>(data.<span class="hljs-property">froms</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) &#123;<br>            <span class="hljs-keyword">return</span> value.<span class="hljs-property">name</span> == school;<br>        &#125;)[<span class="hljs-number">0</span>];<br>        msg ? <span class="hljs-built_in">setTimeout</span>(toLogin, setting.<span class="hljs-property">time</span>, msg.<span class="hljs-property">schoolid</span>) : <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;å­¦æ ¡åç§°ä¸å®Œæ•´&#x27;</span>);<br>    &#125;);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">toLogin</span>(<span class="hljs-params">fid</span>) &#123;<br>    <span class="hljs-title function_">GM_xmlhttpRequest</span>(&#123;<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/api/login?name=&#x27;</span> + setting.<span class="hljs-property">username</span> + <span class="hljs-string">&#x27;&amp;pwd=&#x27;</span> + setting.<span class="hljs-property">password</span> + <span class="hljs-string">&#x27;&amp;schoolid=&#x27;</span> + fid + <span class="hljs-string">&#x27;&amp;verify=0&#x27;</span>,<br>        <span class="hljs-attr">onload</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">xhr</span>) &#123;<br>            <span class="hljs-keyword">var</span> obj = $.<span class="hljs-title function_">parseJSON</span>(xhr.<span class="hljs-property">responseText</span>) || &#123;&#125;;<br>            obj.<span class="hljs-property">result</span> ? location.<span class="hljs-property">href</span> = <span class="hljs-built_in">decodeURIComponent</span>($(<span class="hljs-string">&#x27;#ref, #refer_0x001&#x27;</span>).<span class="hljs-title function_">val</span>()) : <span class="hljs-title function_">alert</span>(obj.<span class="hljs-property">errorMsg</span> || <span class="hljs-string">&#x27;Error&#x27;</span>);<br>        &#125;<br>    &#125;);<br>&#125;<br> <br><span class="hljs-comment">// æµ‹éªŒè¯•é¢˜Dom</span><br><span class="hljs-keyword">var</span> html = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">submitAnswer</span>(<span class="hljs-params">$job, data</span>) &#123;<br>    $job.<span class="hljs-title function_">removeClass</span>(<span class="hljs-string">&#x27;ans-job-finished&#x27;</span>);<br>    html = $(<span class="hljs-string">&quot;.CeYan&quot;</span>).<span class="hljs-title function_">html</span>()||$(<span class="hljs-string">&quot;body&quot;</span>).<span class="hljs-title function_">html</span>();<br>    data = data.<span class="hljs-property">length</span> ? $(data) : $(<span class="hljs-string">&#x27;.TiMu&#x27;</span>).<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> question = <span class="hljs-title function_">filterImg</span>($(<span class="hljs-string">&#x27;.Zy_TItle .clearfix&#x27;</span>, <span class="hljs-variable language_">this</span>));<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">title</span>: question.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^ã€.*?ã€‘\s*/</span>, <span class="hljs-string">&#x27;&#x27;</span>),<br>            <span class="hljs-attr">type</span>: (&#123; å•é€‰é¢˜: <span class="hljs-number">0</span>, å¤šé€‰é¢˜: <span class="hljs-number">1</span>, å¡«ç©ºé¢˜: <span class="hljs-number">2</span>, åˆ¤æ–­é¢˜: <span class="hljs-number">3</span> &#125;)[question.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^ã€(.*?)ã€‘|$/</span>)[<span class="hljs-number">1</span>]]||<span class="hljs-number">100</span><br>        &#125;;<br>    &#125;);<br>    data = $.<span class="hljs-title function_">grep</span>(data.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">index</span>) &#123;<br>        <span class="hljs-keyword">var</span> $TiMu = $(<span class="hljs-string">&#x27;.TiMu&#x27;</span>).<span class="hljs-title function_">eq</span>(index);<br>        <span class="hljs-keyword">if</span> (!($.<span class="hljs-title function_">isPlainObject</span>(<span class="hljs-variable language_">this</span>) &amp;&amp; $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.fr&#x27;</span>).<span class="hljs-property">length</span>)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> == <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">var</span> $ans = $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Py_tk, .Py_answer&#x27;</span>).<span class="hljs-title function_">eq</span>(<span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">if</span> (!$TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.cuo&#x27;</span>).<span class="hljs-property">length</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">code</span>) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!$ans.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.cuo&#x27;</span>).<span class="hljs-property">length</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">answer</span> = $ans.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.clearfix&#x27;</span>).<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>                    <span class="hljs-keyword">return</span> $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>();<br>                &#125;).<span class="hljs-title function_">get</span>().<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;#&#x27;</span>) || <span class="hljs-string">&#x27;æ— &#x27;</span>;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">code</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">code</span> = -<span class="hljs-number">1</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> == <span class="hljs-number">3</span>) &#123;<br>            <span class="hljs-keyword">var</span> ans = $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.font20:last&#x27;</span>).<span class="hljs-title function_">text</span>();<br>            <span class="hljs-keyword">if</span> ($TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.cuo&#x27;</span>).<span class="hljs-property">length</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">answer</span> = (&#123; <span class="hljs-string">&#x27;âˆš&#x27;</span>: <span class="hljs-string">&#x27;é”™è¯¯&#x27;</span>, <span class="hljs-string">&#x27;Ã—&#x27;</span>: <span class="hljs-string">&#x27;æ­£ç¡®&#x27;</span> &#125;)[ans] || <span class="hljs-string">&#x27;æ— &#x27;</span>;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">code</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">answer</span> = (&#123; <span class="hljs-string">&#x27;âˆš&#x27;</span>: <span class="hljs-string">&#x27;æ­£ç¡®&#x27;</span>, <span class="hljs-string">&#x27;Ã—&#x27;</span>: <span class="hljs-string">&#x27;é”™è¯¯&#x27;</span> &#125;)[ans] || <span class="hljs-string">&#x27;æ— &#x27;</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">var</span> options=<span class="hljs-string">&quot;&quot;</span>;<br>            <span class="hljs-keyword">var</span> text = $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Py_answer &gt; span:eq(0)&#x27;</span>).<span class="hljs-title function_">text</span>();<br>            <span class="hljs-keyword">if</span> ($TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.dui&#x27;</span>).<span class="hljs-property">length</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">code</span> &amp;&amp; !<span class="hljs-regexp">/^A?B?C?D?E?F?G?$/</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">answer</span>)) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.dui&#x27;</span>).<span class="hljs-property">length</span> || text.<span class="hljs-title function_">match</span>(<span class="hljs-string">&#x27;æ­£ç¡®ç­”æ¡ˆ&#x27;</span>)) &#123;<br>                text = text.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/[A-G]/gi</span>) || [];<br>                $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Zy_ulTop&gt;li&#x27;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>                    options+=<span class="hljs-title function_">filterImg</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">trim</span>()+<span class="hljs-string">&quot;\n&quot;</span>;<br>                &#125;)<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = options.<span class="hljs-title function_">trim</span>();<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">answer</span> = $.<span class="hljs-title function_">map</span>(text, <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-title function_">filterImg</span>($TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.fl:contains(&#x27;</span> + value + <span class="hljs-string">&#x27;) + a&#x27;</span>));<br>                &#125;).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;#&#x27;</span>) || <span class="hljs-string">&#x27;æ— &#x27;</span>;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = text.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;&#x27;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">code</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">code</span> = -<span class="hljs-number">1</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Zy_ulTop&gt;li&#x27;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>                    options+=<span class="hljs-title function_">filterImg</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">trim</span>()+<span class="hljs-string">&quot;\n&quot;</span>;<br>                &#125;)<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = options.<span class="hljs-title function_">trim</span>();<br>                <span class="hljs-keyword">if</span> ($TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Py_answer &gt; span&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-string">&#x27;æ­£ç¡®ç­”æ¡ˆ&#x27;</span>))&#123;<br>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">answer</span> =$TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Py_answer &gt; span&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/æ­£ç¡®ç­”æ¡ˆï¼š(.*?)$|æ­£ç¡®ç­”æ¡ˆï¼š(.*?) $/</span>)[<span class="hljs-number">1</span>];<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">answer</span> = <span class="hljs-string">&quot;&quot;</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">answer</span> ===<span class="hljs-string">&quot;æ— &quot;</span>)&#123;<br>                $TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Zy_ulTop&gt;li&#x27;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>                    options+=<span class="hljs-title function_">filterImg</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">trim</span>()+<span class="hljs-string">&quot;\n&quot;</span>;<br>                &#125;)<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = options.<span class="hljs-title function_">trim</span>();<br>                <span class="hljs-keyword">if</span> ($TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Py_answer &gt; span&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-string">&#x27;æ­£ç¡®ç­”æ¡ˆ&#x27;</span>))&#123;<br>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">answer</span>=$TiMu.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.Py_answer &gt; span&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/æ­£ç¡®ç­”æ¡ˆï¼š(.*?)$|æ­£ç¡®ç­”æ¡ˆï¼š(.*?) $/</span>)[<span class="hljs-number">1</span>];<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æ²¡æœ‰æ‰¾åˆ°æ­£ç¡®ç­”æ¡ˆ&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">question</span>;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;<br>    &#125;), <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) &#123;<br>        <span class="hljs-keyword">return</span> value &amp;&amp; value.<span class="hljs-property">answer</span> != <span class="hljs-string">&#x27;æ— &#x27;</span>;<br>    &#125;);<br>    <span class="hljs-keyword">var</span> jobid=<span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">if</span> ($(<span class="hljs-string">&#x27;#jobid&#x27;</span>).<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>)&#123;<br>        jobid=$(<span class="hljs-string">&#x27;#jobid&#x27;</span>).<span class="hljs-title function_">val</span>().<span class="hljs-title function_">slice</span>(<span class="hljs-number">5</span>);<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        jobid=<span class="hljs-string">&quot;&quot;</span>;<br>    &#125;<br>    setting.<span class="hljs-property">curs</span> = $(<span class="hljs-string">&#x27;script:contains(courseName)&#x27;</span>, top.<span class="hljs-property">document</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/courseName:\&#x27;(.+?)\&#x27;|$/</span>)[<span class="hljs-number">1</span>] || $(<span class="hljs-string">&#x27;h1&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(.*)è¯¾ç¨‹è¯„ä»·/</span>,<span class="hljs-string">&#x27;$1&#x27;</span>).<span class="hljs-title function_">trim</span>() || <span class="hljs-string">&#x27;æ— &#x27;</span>;<br>    <span class="hljs-keyword">var</span> chapter_list = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">getDirList</span>());<br>    <span class="hljs-keyword">var</span> cpi = $(<span class="hljs-string">&quot;#cpi&quot;</span>).<span class="hljs-title function_">val</span>();<br>    <span class="hljs-keyword">var</span> fid = $(<span class="hljs-string">&#x27;script:contains(fid)&#x27;</span>, top.<span class="hljs-property">document</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/fid:\&#x27;(.+?)\&#x27;|$/</span>)[<span class="hljs-number">1</span>] || $(<span class="hljs-string">&#x27;script:contains(fid)&#x27;</span>, top.<span class="hljs-property">document</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/fid=(.+?)&amp;|$/</span>)[<span class="hljs-number">1</span>] || $(<span class="hljs-string">&#x27;script:contains(fid):eq(1)&#x27;</span>,self.<span class="hljs-property">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-property">parent</span>.<span class="hljs-property">document</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/&quot;fid&quot;:&quot;(.+?)&quot;|$/</span>)[<span class="hljs-number">1</span>] || <span class="hljs-string">&#x27;æ— &#x27;</span>;<br>    data.<span class="hljs-property">length</span> &amp;&amp; <span class="hljs-title function_">GM_xmlhttpRequest</span>(&#123;<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        <span class="hljs-attr">url</span>: apihost + <span class="hljs-string">&#x27;/upload&#x27;</span>,<br>        <span class="hljs-attr">headers</span>: &#123;<br>            <span class="hljs-string">&#x27;Content-type&#x27;</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span>,<br>        &#125;,<br>        <span class="hljs-attr">data</span>: <span class="hljs-string">&#x27;course=&#x27;</span> + <span class="hljs-built_in">encodeURIComponent</span>(setting.<span class="hljs-property">curs</span>) + <span class="hljs-string">&#x27;&amp;data=&#x27;</span> + <span class="hljs-built_in">encodeURIComponent</span>((<span class="hljs-title class_">Ext</span>.<span class="hljs-property">encode</span> || <span class="hljs-title class_">JSON</span>.<span class="hljs-property">stringify</span>)(data)) + <span class="hljs-string">&#x27;&amp;id=&#x27;</span> + jobid<br>        + <span class="hljs-string">&#x27;&amp;cpi=&#x27;</span>+ cpi<br>        + <span class="hljs-string">&#x27;&amp;chapter_list=&#x27;</span> + chapter_list<br>        + <span class="hljs-string">&#x27;&amp;html=&#x27;</span> + <span class="hljs-built_in">encodeURIComponent</span>(html)<br>        + <span class="hljs-string">&#x27;&amp;fid=&#x27;</span> + fid<br>        + <span class="hljs-string">&#x27;&amp;url=&#x27;</span> + <span class="hljs-built_in">encodeURIComponent</span>(top.<span class="hljs-property">document</span>.<span class="hljs-property">URL</span>)+<span class="hljs-string">&#x27;&amp;version=8.0.13&#x27;</span><br>    &#125;);<br>    <span class="hljs-comment">//$(&#x27;#right&#x27;).click()</span><br>    <span class="hljs-comment">//$(&#x27;#right2&#x27;).click()</span><br>    $job.<span class="hljs-title function_">addClass</span>(<span class="hljs-string">&#x27;ans-job-finished&#x27;</span>);<br>&#125;<br> <br><span class="hljs-keyword">function</span> <span class="hljs-title function_">filterImg</span>(<span class="hljs-params">dom</span>) &#123;<br>    <span class="hljs-keyword">return</span> $(dom).<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;img[src]&#x27;</span>).<span class="hljs-title function_">replaceWith</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> $(<span class="hljs-string">&#x27;&lt;p&gt;&lt;/p&gt;&#x27;</span>).<span class="hljs-title function_">text</span>(<span class="hljs-string">&#x27;&lt;img src=&quot;&#x27;</span> + $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;src&#x27;</span>) + <span class="hljs-string">&#x27;&quot;&gt;&#x27;</span>);<br>    &#125;).<span class="hljs-title function_">end</span>().<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;iframe[src]&#x27;</span>).<span class="hljs-title function_">replaceWith</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> $(<span class="hljs-string">&#x27;&lt;p&gt;&lt;/p&gt;&#x27;</span>).<span class="hljs-title function_">text</span>(<span class="hljs-string">&#x27;&lt;iframe src=&quot;&#x27;</span> + $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;src&#x27;</span>) + <span class="hljs-string">&#x27;&quot;&gt;&lt;/irame&gt;&#x27;</span>);<br>    &#125;).<span class="hljs-title function_">end</span>().<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>();<br>&#125;<br> <br><span class="hljs-comment">// è·å–æ–‡ç« ä¾§æ åˆ—è¡¨</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getDirList</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">var</span> $ = top.<span class="hljs-property">jQuery</span>;<br>    <span class="hljs-keyword">var</span> json_dir = &#123;<span class="hljs-string">&quot;current&quot;</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;list&quot;</span>:[]&#125;;<br>    <span class="hljs-comment">// æœ‰ä¾§æ åˆ—è¡¨</span><br>    json_dir.<span class="hljs-property">current</span> = $(<span class="hljs-string">&quot;.cells&quot;</span>).<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;.currents&gt;a&gt;span&#x27;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>();<br>    $(<span class="hljs-string">&quot;.cells&quot;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">var</span> temp_json = &#123;<span class="hljs-string">&quot;titlewords&quot;</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;titles&quot;</span>:[]&#125;;<br>        <span class="hljs-keyword">var</span> _this = $(<span class="hljs-variable language_">this</span>);<br>        temp_json.<span class="hljs-property">titlewords</span> = _this.<span class="hljs-title function_">find</span>(<span class="hljs-string">&quot;span.titlewords&quot;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>();<br>        _this.<span class="hljs-title function_">find</span>(<span class="hljs-string">&quot;h4&gt;a&gt;span&quot;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">i,item</span>)&#123;<br>            temp_json.<span class="hljs-property">titles</span>.<span class="hljs-title function_">push</span>($(item).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>());<br>        &#125;);<br>        json_dir.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(temp_json);<br>    &#125;)<br>    <span class="hljs-comment">// æ— ä¾§æ åˆ—è¡¨</span><br>    <span class="hljs-keyword">if</span>(json_dir.<span class="hljs-property">current</span> == <span class="hljs-string">&quot;&quot;</span>)&#123;<br>        json_dir.<span class="hljs-property">current</span> = $(<span class="hljs-string">&quot;.CeYan li.cur&quot;</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>();<br>    &#125;<br> <br>    <span class="hljs-keyword">return</span> json_dir;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¦‚æœè§‰å¾—è¯¥æ•™ç¨‹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ–¹çš„æ”¯ä»˜å®-å¾®ä¿¡æ”¶æ¬¾ç è¿›è¡Œæ‰“èµã€‚">å¦‚æœè§‰å¾—è¯¥æ•™ç¨‹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ–¹çš„æ”¯ä»˜å®/å¾®ä¿¡æ”¶æ¬¾ç è¿›è¡Œæ‰“èµã€‚</h3><p><img src="/images/2022-3-12-1.png" alt="å¾®ä¿¡æ‰“èµ"></p><p><img src="/images/2022-3-12-2.png" alt="æ”¯ä»˜å®æ‰“èµ"></p><h4 id="æ„Ÿè°¢æ‰“èµï¼ï¼">æ„Ÿè°¢æ‰“èµï¼ï¼</h4>]]></content>
      
      
      <categories>
          
          <category> ç¦åˆ© </category>
          
          <category> è¶…æ˜Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦åˆ© </tag>
            
            <tag> è¶…æ˜Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ç¦åˆ©ã€‘å…¨å›½è®¡ç®—æœºç­‰çº§è€ƒè¯•æ¨¡æ‹Ÿè½¯ä»¶</title>
      <link href="/2022/03/12/%E3%80%90%E7%A6%8F%E5%88%A9%E3%80%91%E5%85%A8%E5%9B%BD%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%AD%89%E7%BA%A7%E8%80%83%E8%AF%95%E6%A8%A1%E6%8B%9F%E8%BD%AF%E4%BB%B6/"/>
      <url>/2022/03/12/%E3%80%90%E7%A6%8F%E5%88%A9%E3%80%91%E5%85%A8%E5%9B%BD%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%AD%89%E7%BA%A7%E8%80%83%E8%AF%95%E6%A8%A1%E6%8B%9F%E8%BD%AF%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1>å…¨å›½è®¡ç®—æœºç­‰çº§è€ƒè¯•æ¨¡æ‹Ÿè½¯ä»¶å®‰è£…ç ´è§£æ•™ç¨‹</h1><h2 id="1-ä¸‹è½½å…¨å›½è®¡ç®—æœºè€ƒè¯•æ¨¡æ‹Ÿè½¯ä»¶">1.ä¸‹è½½å…¨å›½è®¡ç®—æœºè€ƒè¯•æ¨¡æ‹Ÿè½¯ä»¶</h2><p>è®¡ç®—æœºä¸€çº§officeä¸‹è½½åœ°å€ï¼š<a href="https://quqi.avyeld.com/s/2960549/3WzQ0c06CEBngG0U">ç‚¹æˆ‘ä¸‹è½½</a></p><p>è®¡ç®—æœºäºŒçº§officeä¸‹è½½åœ°å€ï¼š<a href="https://quqi.avyeld.com/s/2960549/yKRQk3wOCd990UbE">ç‚¹æˆ‘ä¸‹è½½</a></p><p>è®¡ç®—æœºäºŒçº§Cè¯­è¨€ä¸‹è½½åœ°å€ï¼š<a href="https://quqi.avyeld.com/s/2960549/tKuuHKinWyjqQsGr">ç‚¹æˆ‘ä¸‹è½½</a></p><p>è®¡ç®—æœºäºŒçº§Javaä¸‹è½½åœ°å€ï¼š<a href="https://quqi.avyeld.com/s/2960549/UkQmJ8wvSsHP5k5t">ç‚¹æˆ‘ä¸‹è½½</a></p><h2 id="2-ä¸‹è½½å°é‘«ç ´è§£è¡¥ä¸">2.ä¸‹è½½å°é‘«ç ´è§£è¡¥ä¸</h2><p>ï¼ï¼ï¼<strong>æ³¨æ„ä¸€å®šè¦å¯¹åº”ç‰ˆæœ¬ï¼Œå¦åˆ™ç ´è§£è¡¥ä¸ä¸ç”Ÿæ•ˆ</strong>ï¼ï¼ï¼</p><p>è®¡ç®—æœºä¸€çº§officeç ´è§£è¡¥ä¸ä¸‹è½½åœ°å€ï¼š<a href="/download/%E4%B8%80%E7%BA%A7office%E5%B0%8F%E9%91%AB%E7%A0%B4%E8%A7%A3%E8%A1%A5%E4%B8%81.rar">ç‚¹æˆ‘ä¸‹è½½</a></p><p>è®¡ç®—æœºäºŒçº§officeç ´è§£è¡¥ä¸ä¸‹è½½åœ°å€ï¼š<a href="/download/%E4%BA%8C%E7%BA%A7office%E5%B0%8F%E9%91%AB%E7%A0%B4%E8%A7%A3%E8%A1%A5%E4%B8%81.rar">ç‚¹æˆ‘ä¸‹è½½</a></p><p>è®¡ç®—æœºäºŒçº§Cè¯­è¨€ç ´è§£è¡¥ä¸ä¸‹è½½åœ°å€ï¼š<a href="/download/%E4%BA%8C%E7%BA%A7C%E5%B0%8F%E9%91%AB%E7%A0%B4%E8%A7%A3%E8%A1%A5%E4%B8%81.rar">ç‚¹æˆ‘ä¸‹è½½</a></p><p>è®¡ç®—æœºäºŒçº§Javaç ´è§£è¡¥ä¸ä¸‹è½½åœ°å€ï¼š<a href="/download/%E4%BA%8C%E7%BA%A7Java%E5%B0%8F%E9%91%AB%E7%A0%B4%E8%A7%A3%E8%A1%A5%E4%B8%81.rar">ç‚¹æˆ‘ä¸‹è½½</a></p><h2 id="3-æ•™ç¨‹">3.æ•™ç¨‹</h2><ol><li>å°†ä¸Šè¿°æ–‡ä»¶å¯¹åº”ä¸‹è½½ï¼Œæ‰§è¡Œ.exeæ–‡ä»¶å³å¯å®‰è£…ã€‚å¦‚æœå®‰è£…ä¸€çº§officeé‡åˆ°é—®é¢˜ï¼Œè¯·ç‚¹å‡»å¿½ç•¥ç»§ç»­å®‰è£…ï¼Œå…¶ä»–çš„åŒç†ï¼ï¼</li><li>ä¸‹è½½å¯¹åº”çš„å°é‘«ç ´è§£è¡¥ä¸ï¼Œä¸‹è½½åæ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ã€‚è§£å‹åå°†æ–‡ä»¶å¤åˆ¶ç²˜è´´åˆ°ä½ è½¯ä»¶çš„å®‰è£…ç›®å½•ï¼Œç›´æ¥æ›¿æ¢æ‰åŸæ–‡ä»¶å³å¯ã€‚</li><li>æ‰“å¼€è½¯ä»¶å³å¯äº«å—å…è´¹çš„è®¡ç®—æœºé¢˜åº“äº†ã€‚</li></ol><h3 id="æœ€åï¼Œç¥ä½ ä»¬è€ƒè¯•é¡ºåˆ©ï¼">æœ€åï¼Œç¥ä½ ä»¬è€ƒè¯•é¡ºåˆ©ï¼</h3><h3 id="å¦‚æœè§‰å¾—è¯¥è½¯ä»¶å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ–¹çš„æ”¯ä»˜å®-å¾®ä¿¡æ”¶æ¬¾ç è¿›è¡Œæ‰“èµã€‚">å¦‚æœè§‰å¾—è¯¥è½¯ä»¶å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ–¹çš„æ”¯ä»˜å®/å¾®ä¿¡æ”¶æ¬¾ç è¿›è¡Œæ‰“èµã€‚</h3><p><img src="/images/2022-3-12-1.png" alt="å¾®ä¿¡æ‰“èµ"></p><p><img src="/images/2022-3-12-2.png" alt="æ”¯ä»˜å®æ‰“èµ"></p><h4 id="æ„Ÿè°¢æ‰“èµï¼ï¼">æ„Ÿè°¢æ‰“èµï¼ï¼</h4>]]></content>
      
      
      <categories>
          
          <category> ç¦åˆ© </category>
          
          <category> è®¡ç®—æœºè€ƒè¯•ç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦åˆ© </tag>
            
            <tag> è®¡ç®—æœºè€ƒè¯•ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cè¯­è¨€æ’åºç®—æ³•çš„è®²è§£</title>
      <link href="/2021/12/10/%E8%AF%AD%E8%A8%80%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E8%AE%B2%E8%A7%A3/"/>
      <url>/2021/12/10/%E8%AF%AD%E8%A8%80%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1>Cè¯­è¨€æ’åºç®—æ³•çš„è®²è§£</h1><h2 id="ä¸€ã€å¸¸ç”¨æ’åºç®—æ³•">ä¸€ã€å¸¸ç”¨æ’åºç®—æ³•</h2><h3 id="é€‰æ‹©æ’åº">é€‰æ‹©æ’åº</h3><p>é€‰æ‹©æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚</p><p>å®ƒçš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åï¼Œå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚</p><h3 id="æ’å…¥æ’åº">æ’å…¥æ’åº</h3><p>æ’å…¥æ’åºä¹Ÿæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚</p><p>å®ƒçš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><p>æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚</p><h3 id="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº</h3><p>å¿«é€Ÿæ’åºä½¿ç”¨åˆ†æ²»æ³•ç­–ç•¥æ¥æŠŠä¸€ä¸ªåºåˆ—åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—ã€‚ï¼ˆå…¶å®å°±æ˜¯æ‰¾ä¸ªå…ƒç´ æŠŠæ•´ä½“ä¸€åˆ†ä¸ºäºŒï¼‰</p><p>é™¤äº†ç”¨æˆ‘ä¸‹é¢çš„ä»£ç å®ç°ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ç”¨Cè¯­è¨€æä¾›çš„qsortå‡½æ•°è¿›è¡Œå¿«æ’ã€‚</p><p>æ­¥éª¤ä¸ºï¼š</p><ol><li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œä¹¦ä¸Šç§°ä¸ºâ€œåŸºå‡†â€ã€‚</li><li>é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä½•ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†å‰²ç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†å‰²æ“ä½œã€‚</li><li>é€’å½’åœ°æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚</li><li>é€’å½’åˆ°æœ€åº•éƒ¨æ—¶ï¼Œæ•°åˆ—çš„å¤§å°æ˜¯é›¶æˆ–ä¸€ï¼Œä¹Ÿå°±æ˜¯å·²ç»æ’åºå¥½äº†ã€‚è¿™ä¸ªç®—æ³•ä¸€å®šä¼šç»“æŸï¼Œå› ä¸ºåœ¨æ¯æ¬¡çš„è¿­ä»£ä¸­ï¼Œå®ƒè‡³å°‘ä¼šæŠŠä¸€ä¸ªå…ƒç´ æ‘†åˆ°å®ƒæœ€åçš„ä½ç½®å»ã€‚</li></ol><h2 id="ä»£ç æ¼”ç¤º">ä»£ç æ¼”ç¤º</h2><pre><code class="hljs">    #include&lt;stdio.h&gt;    #define N 8 //æ–¹ä¾¿ä¿®æ”¹æ•°ç»„é•¿åº¦    /*        é¡¹ç›®ä»‹ç»ï¼šæ¼”ç¤ºæ’åºç®—æ³•çš„å®ç°è¿‡ç¨‹        ä½œè€…ï¼šè¿æ€é‘«        æ—¶é—´ï¼š2021-12-10    */    //è‡ªå®šä¹‰çš„è¾“å‡ºå‡½æ•°    void print(int a[], int n, int i) &#123;        printf(&quot;%d:&quot;, i);        for (int j = 0; j &lt; n; j++) &#123;            printf(&quot;%d &quot;, a[j]);        &#125;        printf(&quot;\n&quot;);    &#125;    //ç›´æ¥æ’å…¥æ’åºå‡½æ•°    void InsertSort(int a[], int n)    &#123;        for (int i = 1; i &lt; n; i++) &#123;            if (a[i] &lt; a[i - 1]) &#123;//è‹¥ç¬¬ i ä¸ªå…ƒç´ å¤§äº i-1 å…ƒç´ åˆ™ç›´æ¥æ’å…¥ï¼›åä¹‹ï¼Œéœ€è¦æ‰¾åˆ°é€‚å½“çš„æ’å…¥ä½ç½®ååœ¨æ’å…¥ã€‚                int j = i - 1;                int x = a[i];                while (j &gt; -1 &amp;&amp; x &lt; a[j]) &#123;  //é‡‡ç”¨é¡ºåºæŸ¥æ‰¾æ–¹å¼æ‰¾åˆ°æ’å…¥çš„ä½ç½®ï¼Œåœ¨æŸ¥æ‰¾çš„åŒæ—¶ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œåç§»æ“ä½œï¼Œç»™æ’å…¥å…ƒç´ è…¾å‡ºç©ºé—´                    a[j + 1] = a[j];                    j--;                &#125;                a[j + 1] = x;      //æ’å…¥åˆ°æ­£ç¡®ä½ç½®            &#125;            print(a, n, i);//æ‰“å°æ¯æ¬¡æ’åºåçš„ç»“æœ        &#125;    &#125;    //é€‰æ‹©æ’åº    void selection_sort(int a[], int n)    &#123;        int i, j, temp;        for (i = 1; i &lt; n - 1; i++)        &#123;            int min = i;                  // è®°å½•æœ€å°å€¼ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ é»˜è®¤æœ€å°            for (j = i + 1; j &lt; n; j++)     // è®¿é—®æœªæ’åºçš„å…ƒç´             &#123;                if (a[j] &lt; a[min])    // æ‰¾åˆ°ç›®å‰æœ€å°å€¼                &#123;                    min = j;    // è®°å½•æœ€å°å€¼                &#125;            &#125;            if (min != i)            &#123;                temp = a[min];  // äº¤æ¢ä¸¤ä¸ªå˜é‡                a[min] = a[i];                a[i] = temp;            &#125;            print(a, n, i);        &#125;    &#125;    //å¿«é€Ÿæ’åº    //è¿­ä»£æ³•    typedef struct _Range &#123;        int start, end;    &#125; Range;    Range new_Range(int s, int e) &#123;        Range r;        r.start = s;        r.end = e;        return r;    &#125;    void swap(int* x, int* y) &#123;        int t = *x;        *x = *y;        *y = t;    &#125;    void quick_sort(int arr[], const int len) &#123;        if (len &lt;= 0)            return; // é¿å…lenç­‰æ–¼è² å€¼æ™‚å¼•ç™¼æ®µéŒ¯èª¤ï¼ˆSegment Faultï¼‰        // r[]æ¨¡æ“¬åˆ—è¡¨,pç‚ºæ•¸é‡,r[p++]ç‚ºpush,r[--p]ç‚ºpopä¸”å–å¾—å…ƒç´         Range r[N];        int p = 0;        r[p++] = new_Range(0, len - 1);        while (p) &#123;            Range range = r[--p];            if (range.start &gt;= range.end)                continue;            int mid = arr[(range.start + range.end) / 2]; // é¸å–ä¸­é–“é»ç‚ºåŸºæº–é»            int left = range.start, right = range.end;            do            &#123;                while (arr[left] &lt; mid) ++left;   // æª¢æ¸¬åŸºæº–é»å·¦å´æ˜¯å¦ç¬¦åˆè¦æ±‚                while (arr[right] &gt; mid) --right; //æª¢æ¸¬åŸºæº–é»å³å´æ˜¯å¦ç¬¦åˆè¦æ±‚                if (left &lt;= right)                &#123;                    swap(&amp;arr[left], &amp;arr[right]);                    left++; right--;               // ç§»å‹•æŒ‡é‡ä»¥ç¹¼çºŒ                &#125;            &#125; while (left &lt;= right);            if (range.start &lt; right) r[p++] = new_Range(range.start, right);            if (range.end &gt; left) r[p++] = new_Range(left, range.end);            print(arr, len, r);        &#125;    &#125;    //é€’å½’æ³•    void quick_sort_recursive(int arr[], int start, int end) &#123;        if (start &gt;= end)            return;        int mid = arr[end];        int left = start, right = end - 1;        while (left &lt; right) &#123;            while (arr[left] &lt; mid &amp;&amp; left &lt; right)                left++;            while (arr[right] &gt;= mid &amp;&amp; left &lt; right)                right--;            swap(&amp;arr[left], &amp;arr[right]);        &#125;        if (arr[left] &gt;= arr[end])            swap(&amp;arr[left], &amp;arr[end]);        else            left++;        if (left)            quick_sort_recursive(arr, start, left - 1);        quick_sort_recursive(arr, left + 1, end);    &#125;    void quick_sort2(int arr[], int len) &#123;        quick_sort_recursive(arr, 0, len - 1);    &#125;    int main() &#123;        int a[N] = &#123; 14,33,27,10,35,19,42,44 &#125;;        InsertSort(a, N);        //selection_sort(a, N);        //quick_sort(a, N);        //quick_sort2(a, N);        return 0;    &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> æ’åºç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŸå…¬å¸çš„Cè¯­è¨€é¢è¯•é¢˜è¯¦è§£</title>
      <link href="/2021/12/08/%E5%85%AC%E5%8F%B8%E7%9A%84C%E8%AF%AD%E8%A8%80%E9%9D%A2%E8%AF%95%E9%A2%98%E8%AF%A6%E8%A7%A3-1/"/>
      <url>/2021/12/08/%E5%85%AC%E5%8F%B8%E7%9A%84C%E8%AF%AD%E8%A8%80%E9%9D%A2%E8%AF%95%E9%A2%98%E8%AF%A6%E8%A7%A3-1/</url>
      
        <content type="html"><![CDATA[<h1>æŸå…¬å¸Cè¯­è¨€é¢è¯•é¢˜è¯¦è§£</h1><h2 id="ä¸€ã€å•é¡¹é€‰æ‹©é¢˜">ä¸€ã€å•é¡¹é€‰æ‹©é¢˜</h2><p>1.å¯¹äºä¸€ä¸ªæ­£å¸¸è¿è¡Œå’Œæ­£å¸¸é€€å‡ºçš„ C ç¨‹åºï¼Œä»¥ä¸‹å™è¿°æ­£ç¡®çš„æ˜¯()ã€‚</p><p>A. ç¨‹åºä» main å‡½æ•°ç¬¬ä¸€æ¡å¯æ‰§è¡Œè¯­å¥å¼€å§‹æ‰§è¡Œï¼Œåœ¨ main å‡½æ•°ç»“æŸ</p><p>B. ç¨‹åºçš„æ‰§è¡Œæ€»æ˜¯ä»ç¨‹åºçš„ç¬¬ä¸€ä¸ªå‡½æ•°å¼€å§‹ï¼Œåœ¨ main å‡½æ•°ç»“æŸ</p><p>C. ç¨‹åºçš„æ‰§è¡Œæ€»æ˜¯ä» main å‡½æ•°å¼€å§‹ï¼Œåœ¨æœ€åä¸€ä¸ªå‡½æ•°ä¸­ç»“æŸ</p><p>D. ä»ç¨‹åºçš„ç¬¬ä¸€ä¸ªå‡½æ•°å¼€å§‹ï¼Œåœ¨ç¨‹åºçš„æœ€åä¸€ä¸ªå‡½æ•°ä¸­ç»“æŸ</p><p><strong>é¢˜è§£ï¼š</strong> Cè¯­è¨€ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹æ˜¯å…ˆä»mainå‡½æ•°å¼€å§‹ï¼Œmainå‡½æ•°æ˜¯Cè¯­è¨€ç¨‹åºçš„å…¥å£ã€‚ä¸€æ®µCè¯­è¨€ä»£ç çš„ç¼–è¯‘è¿‡ç¨‹æ˜¯ç”±ä¸Šè‡³ä¸‹é€è¡Œç¼–è¯‘ï¼Œä½†ç¼–è¯‘ä¸æ˜¯æ‰§è¡Œï¼Œå¤§å®¶ä¸è¦å¼„æ··äº†å“¦ï¼å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå‡½æ•°æœ‰æ²¡æœ‰åœ¨è¯¥ç¨‹åºé‡Œæ‰§è¡Œï¼Œå¯ä»¥çœ‹mainå‡½æ•°ä¸­æ˜¯å¦è°ƒç”¨äº†å®ƒã€‚ä¾‹å¦‚ï¼š</p><pre><code class="hljs">      int a()&#123;          printf(&quot;æˆ‘æ˜¯ä¸€ä¸ªaå‡½æ•°ï¼æˆ‘è¢«æ‰§è¡Œäº†\n&quot;);      &#125;      int b()&#123;          printf(&quot;æˆ‘æ˜¯ä¸€ä¸ªbå‡½æ•°ï¼Œæˆ‘è¢«æ‰§è¡Œäº†\n&quot;);      &#125;      main()&#123;      a();      &#125;</code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><pre><code class="hljs">      æˆ‘æ˜¯ä¸€ä¸ªaå‡½æ•°ï¼æˆ‘è¢«æ‰§è¡Œäº†      D:\ITæŠ€æœ¯\C&amp;C++\é¢è¯•\Debug\é¢è¯•.exe (è¿›ç¨‹ 16520)å·²é€€å‡º</code></pre><p>ç”±ä¸Šå¯ä»¥çœ‹å‡ºè™½ç„¶bå‡½æ•°è¢«ç¼–è¯‘ï¼Œä½†å®ƒæ²¡æœ‰è¢«æ‰§è¡Œã€‚æ•…Aé€‰é¡¹æ­£ç¡®ï¼</p><p>2.æœ‰å¦‚ä¸‹ç¨‹åºç‰‡æ®µï¼š</p><pre><code class="hljs">      #include&lt;stdio.h&gt;       main( )      &#123;      inta = 5, b = 4, x, y;      x = 2 * a++;      printf(&quot;a=%d, x=%d\n&quot;, a, x);      y = --b * 2;      printf(&quot;b=%d, y=%d\n&quot;, b, y);      &#125;</code></pre><p>åˆ™æ­£ç¡®çš„æ‰§è¡Œç»“æœæ˜¯(  )ã€‚</p><p>A. a=6, x=10, b=3, y=8</p><p>B. a=6, x=10, b=3, y=6</p><p>C. a=6, x=12, b=3, y=6</p><p>D. ä»¥ä¸Šå‡ä¸å¯¹</p><p><strong>é¢˜è§£ï¼š</strong> å¯¹ä¸Šè¿°ä»£ç è¿›è¡Œåˆ†æï¼Œå®šä¹‰äº†æ•´æ•°å‹aï¼Œbï¼Œxï¼Œyã€‚å…¶ä¸­açš„å€¼æ˜¯5ï¼Œbçš„å€¼æ˜¯4ã€‚ç»™å‡ºç®—æœ¯è¡¨è¾¾å¼ x = 2 * a++ã€‚çœ‹æ ·å­è€ƒæŸ¥çš„æ˜¯è‡ªå¢è‡ªå‡çš„è¿ç”¨å’Œä¼˜å…ˆçº§ã€‚è‡ªå¢è‡ªå‡çš„ä¼˜å…ˆçº§é«˜äºä¹˜æ³•è¿ç®—ç¬¦ï¼Œæ•…æ­¤å…ˆè¿›è¡Œè‡ªå¢è‡ªå‡è¿ç®—ã€‚a=5, ++åœ¨açš„åé¢ï¼Œä¹Ÿå°±æ˜¯å…ˆè¿ç®—åè‡ªå¢ã€‚äºæ˜¯x=2*5=10,a=5+1=6ã€‚ç¬¬äºŒä¸ªçš„è‡ªå‡ç¬¦åœ¨å‰é¢ï¼Œå…ˆè‡ªå‡åœ¨è¿ç®—ï¼Œä¹Ÿå°±æ˜¯y=(4-1)*2=6,b=4-1=3ã€‚æ•…é€‰Bï¼</p><p>3.æœ‰ä»¥ä¸‹ç¨‹åºç‰‡æ–­ï¼š</p><pre><code class="hljs">typedef struct&#123;int b; int p;&#125;TYPEA;void f(TYPEA c)&#123;c.b += 1;c.p += 2;&#125;main()&#123;TYPEA a =&#123;1, 2&#125;;f(a);printf(&quot;%d,%d\n&quot;, a.b, a.p);&#125;</code></pre><p>åˆ™ç¨‹åºè¿è¡Œåçš„è¾“å‡ºç»“æœæ˜¯ï¼ˆ  ï¼‰ã€‚</p><p>A. 2,3</p><p>B. 2,4</p><p>C. 1,4</p><p>D. 1,2</p><p><strong>é¢˜è§£ï¼š</strong> typedef struct{int b; int p;}TYPEA;è¿™æ®µå®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ï¼Œç»“æ„ä½“é‡Œæ”¾äº†ä¸¤ä¸ªæ•´æ•°å‹bï¼Œpã€‚ç„¶ååˆå®šä¹‰äº†ä¸€ä¸ªæ— è¿”å›å€¼å«å‚çš„å‡½æ•°fï¼Œè°ƒç”¨äº†ç»“æ„ä½“åšäº†ç®—æœ¯è¿ç®—ã€‚ç„¶åæ˜¯ä¸»å‡½æ•°mainã€‚æ¢³ç†ä¸€ä¸‹æ‰§è¡Œè¿‡ç¨‹ï¼Œå…ˆå£°æ˜å˜é‡a,ç±»å‹ä¸ºTYPEAå¹¶èµ‹å€¼1ï¼Œ2ã€‚è¿™ä¸ªæ—¶å€™ç»“æ„ä½“çš„b=1,p=2ã€‚ç´§æ¥ç€å°†aå˜é‡ä¼ é€’ç»™få‡½æ•°ã€‚ä½†åœ¨få‡½æ•°é‡Œåˆå£°æ˜äº†ä¸€ä¸ªå˜é‡cï¼Œåœ¨è¿™ä¸ªcé‡Œå‘ç”Ÿäº†c.b=1+1=2,c.p=2+2=4ã€‚**ä½†æ˜¯ï¼è¿™ä¸ªé¢˜é‡Œæœ‰ä¸¤ä¸ªå‘ã€‚1.få‡½æ•°å¹¶æ— è¿”å›å€¼ã€‚2.æœ€åè¾“å‡ºå¼•ç”¨çš„æ˜¯aå˜é‡é‡Œçš„å€¼ï¼Œè¿™ä¸ªaå˜é‡å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚**æ•…è¿™ä¸ªé¢˜a.b=1,a.p=2ã€‚é€‰Dï¼</p><p>4.å¯¹äºä»¥ä¸‹ç¨‹åºç‰‡æ®µï¼Œæè¿°æ­£ç¡®çš„æ˜¯(  )ã€‚</p><pre><code class="hljs">int x = -1; do&#123;x = x * x;&#125;while(!x);</code></pre><p>A. æ˜¯æ­»å¾ªç¯</p><p>B. å¾ªç¯æ‰§è¡Œä¸¤æ¬¡</p><p>C. å¾ªç¯æ‰§è¡Œä¸€æ¬¡</p><p>D. æœ‰è¯­æ³•é”™è¯¯</p><p><strong>é¢˜è§£ï¼š</strong> è€ƒæŸ¥do whileå¾ªç¯ï¼Œè¿™ä¸ªè¯­æ³•åœ¨Cé‡Œé¢ç”¨çš„ä¸å¤šå•Šï¼Œä¸ºå•¥ä¼šè€ƒåˆ°å‘¢ï¼Ÿå…ˆåˆ†æï¼Œå®šä¹‰äº†x=-1,x*xæ˜¯è´Ÿè´Ÿå¾—æ­£å˜æˆ1ã€‚åé¢åˆ¤æ–­åŠ äº†ä¸ªï¼ï¼ˆé€»è¾‘éï¼‰ã€‚å¦‚æœä¸åŠ æ˜¯æ­»å¾ªç¯ï¼ŒåŠ äº†å°±ä»å‡å˜æˆçœŸï¼Œå°±æ‰§è¡Œä¸€æ¬¡ã€‚é€‰Cï¼</p><p>5.ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„çš„å®šä¹‰ä¸ºï¼ˆ  ï¼‰ã€‚</p><p>A. int (*ptr)[5]ï¼›</p><p>B. int *ptr[5]ï¼›</p><p>C. int *(ptr[5])ï¼›</p><p>D. int ptr[5]ï¼›</p><p><strong>é¢˜è§£ï¼š</strong> è¿™ä¸ªè€ƒæŸ¥æŒ‡é’ˆæ•°ç»„ï¼Œå°±ä¸€ä¸ªå†™æ³• *name[æ•°]ã€‚è¦æ³¨æ„çš„æ˜¯è¿™ä¸ª[]é‡Œåªèƒ½æ˜¯æ•°ï¼Œä¸èƒ½æ˜¯å˜é‡ã€‚å¦‚æœä½ ä¸æƒ³æŠŠå®ƒå†™æ­»ï¼Œé‚£å°±åœ¨æœ€å¼€å¤´ç”¨ä¸Š#defineæˆ–è€…const intã€‚ç­”æ¡ˆé€‰Bï¼</p><h2 id="äºŒã€å†™å‡ºä¸‹åˆ—ç¨‹åºçš„è¿è¡Œç»“æœã€‚">äºŒã€å†™å‡ºä¸‹åˆ—ç¨‹åºçš„è¿è¡Œç»“æœã€‚</h2><ol><li></li></ol><pre><code class="hljs">#include &lt;stdio.h&gt; main()&#123;int n = 0; char c;while((c=getchar( )) != '\n')&#123;  if (c&gt;='0' &amp;&amp; c&lt;='9')  n = n * 10 + c - '0';&#125;printf(&quot;value=%d\n&quot;, n);&#125;</code></pre><p>ç¨‹åºè¿è¡Œæ—¶è¾“å…¥ï¼š2008ï¼Œåˆ™ç¨‹åºè¿è¡Œç»“æœæ˜¯ï¼š</p><p><strong>é¢˜è§£ï¼š</strong> å…ˆçœ‹æ ¸å¿ƒéƒ¨åˆ†ï¼Œwhile((c=getchar( )) != â€˜\nâ€™)å°†è¾“å…¥çš„å­—ç¬¦ä¸²é€ä¸€æå–ï¼Œç¢°åˆ°\næ¢è¡Œç¬¦ç»“æŸå¾ªç¯ã€‚if (c&gt;=â€˜0â€™ &amp;&amp; c&lt;=â€˜9â€™)åˆ¤æ–­è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯0åˆ°9çš„å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­å®ƒæ˜¯ä¸æ˜¯ä¸ªæ•°ã€‚n = n * 10 + c - '0â€™è¿™å¥è¯è¿˜è¦è¿›ä¸€æ­¥æ‹†åˆ†ï¼Œn * 10æ˜¯ä¸ºäº†ç»™åé¢çš„å­—ç¬¦è…¾ä¸ªç©ºï¼Œæ˜¯åè¿›åˆ¶çš„è¿›ä½åŠŸèƒ½ã€‚c - '0â€™æ˜¯ä¸ºäº†è¿›åˆ¶è½¬æ¢ï¼Œè¦ä¸ç„¶ç›´æ¥è¾“å‡ºæ•´å‹ï¼Œè¾“å‡ºçš„æ˜¯ASCIIç çš„å€¼ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªå°±æŠŠå­—ç¬¦ä¸²å˜æˆä¸ªæ•´æ•°å‹åœ¨è¾“å‡ºå‘—ã€‚ç»“æœè¿˜æ˜¯2008ï¼Œåªä¸è¿‡æ˜¯æ•´æ•°å‹çš„2008ã€‚</p><ol start="2"><li></li></ol><pre><code class="hljs">#include &lt;stdio.h&gt; main()&#123;    int a = 1, b = 0;    switch (a)    &#123;    case 1:        switch (b)        &#123;        case 0: a++;            b++;            printf(&quot;a=%d, b=%d\n&quot;, a, b); break;        case 1: a++;            b++;            printf(&quot;a=%d, b=%d\n&quot;, a, b); break;        &#125;    case 2: a++;        b++;        printf(&quot;a=%d, b=%d\n&quot;, a, b); break;    &#125;&#125;</code></pre><p>è¿è¡Œç»“æœæ˜¯ï¼š</p><p><strong>é¢˜è§£ï¼š</strong> åµŒå¥—é€‰æ‹©ï¼Ÿä¸€æ­¥ä¸€æ­¥æ¥ï¼Œé¦–å…ˆa = 1ï¼Œèµ°ç¬¬ä¸€æ¡çº¿ï¼Œé‡åˆ°åˆ¤æ–­bï¼Œb = 0ï¼Œç»§ç»­ç¬¬ä¸€æ¡çº¿ï¼Œa++,a = 2, b++ , b = 1, è¾“å‡ºåè·³å‡ºå¾ªç¯ <strong>ï¼ˆæ³¨ï¼šè¿™é‡Œè·³å‡ºçš„æ˜¯é‡Œé¢çš„ç»“æ„ä½“ï¼Œä¸æ˜¯å…¨éƒ¨å“¦~ è‡³äºä¸ºå•¥ä¸æ˜¯æ•´ä¸ªè·³å‡ºï¼Ÿå› ä¸ºä¸€å·çº¿å®ƒå°±æ²¡å†™è·³å‡ºï¼ï¼‰</strong> ç„¶åè·‘åˆ°2å·çº¿ï¼Œåˆç»å†äº†ä¸€æ¬¡a++,b++ã€‚a = 2+1=3,b=1+1=2ã€‚æ‰€ä»¥æ‰“å°äº†ä¸¤æ¬¡ï¼Œåˆ†åˆ«æ˜¯a=2, b=1ï¼Œa=3, b=2ã€‚</p><ol start="3"><li></li></ol><pre><code class="hljs">  #include&lt;stdio.h&gt;  #include&lt;string.h&gt;   main()  &#123;  printf(&quot;%d\n&quot;, strlen(&quot;IBM\n012\1\\&quot;));  &#125;</code></pre><p>ç¨‹åºè¿è¡Œç»“æœæ˜¯ï¼š</p><p><strong>é¢˜è§£ï¼š</strong> strlenå‡½æ•°æ˜¯ç”¨æ¥è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦çš„ï¼Œå…¶ä¸­å‰é¢å¸¦åæ–œæ çš„åŠ åé¢çš„ä¸€ä½æ€»å…±å ä¸€ä¸ªå­—ç¬¦ã€‚æ‰€ä»¥æ˜¯9ã€‚è‡³äºä¸ºå•¥ï¼Ÿè½¬ä¹‰å­—ç¬¦åœ¨ASCIIç é‡Œå°±å ä¸€ä¸ªå­—ç¬¦ã€‚</p><ol start="4"><li></li></ol><pre><code class="hljs">  #include&lt;stdio.h&gt;   main()  &#123;  int i, a[10]; // å®šä¹‰iå’Œæ•°ç»„ä¸º10çš„a  int *p; // å£°æ˜ä¸€ä¸ªæŒ‡é’ˆå˜é‡  p = a; // æŠŠæ•°ç»„açš„åœ°å€æ”¾åˆ°äº†æŒ‡é’ˆpä¸­  for (i = 0; i &lt; 10; i++) // å¾ªç¯10æ¬¡  &#123;      scanf(&quot;%d&quot;, p + i); //è¾“å…¥å‡½æ•°ï¼Œå¹¶æŠŠè¾“å…¥çš„å€¼æ”¾è¿›è¿ç»­åœ°å€çš„æ•°ç»„aä¸­ã€‚  &#125;  for (p = a; p &lt; a + 10; p++) // æŠŠaæ•°ç»„çš„åœ°å€åœ¨æ”¾è¿›å»pæŒ‡é’ˆé‡Œï¼Œè®©pæŒ‡é’ˆå†éaæ•°ç»„ï¼ˆ10ä¸ªï¼‰  &#123;      printf(&quot;%d\t&quot;, *p); // é€ä¸€æ ¹æ®åœ°å€æ‹¿å€¼  &#125;  printf(&quot;\n&quot;); // æ¢ä¸ªè¡Œ  for (p = a; p &lt; a + 10; p++) // 1234å†æ¥ä¸€æ¬¡ï¼ŒåŒä¸Š  &#123;      if (*p % 2) printf(&quot;%d\t&quot;, *p); // å¯¹2å…¶ä½™ï¼Œæ±‚å¥‡æ•°  &#125;  &#125;</code></pre><p>ç¨‹åºè¿è¡Œæ—¶è¾“å…¥ï¼š 1 2 3 4 5 6 7 8 9 10 åˆ™ç¨‹åºè¿è¡Œç»“æœä¸ºï¼š</p><p><strong>é¢˜è§£ï¼š</strong> ç›´æ¥åœ¨ä»£ç ä¸Šå†™æ³¨é‡Šå§ã€‚é¢˜è§£å†è¡¥å……ä¸€äº›çŸ¥è¯†ã€‚<strong>è¡¥å……çŸ¥è¯†ï¼šå…³äºæ•°ç»„aèµ‹å€¼ç»™æŒ‡é’ˆpæ—¶ï¼Œpé‡Œé¢æ”¾çš„æ˜¯æ•°ç»„açš„èµ·å§‹åœ°å€ï¼Œæ•°ç»„ä¸€æ—¦ç”³è¯·åœ°å€ç©ºé—´éƒ½æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥çŸ¥é“èµ·å§‹åœ°å€å°±å¯ä»¥æ ¹æ®å…ƒç´ ä¸ªæ•°å¾€ä¸‹æ‰¾äº†ã€‚æ•°ç»„è™½å¥½ï¼Œå¯ä¸è¦è¶Šç•Œå“¦ï¼</strong></p><ol start="5"><li></li></ol><pre><code class="hljs">  #include &lt;stdio.h&gt;   int mod(int x, int y) // å£°æ˜ä¸€ä¸ªå«modçš„å‡½æ•°ï¼Œå«å‚ä¸”è¿”å›å€¼æ˜¯intå‹  &#123;      return (x % y); // è¿”å› x ä¸ y çš„å–ä½™  &#125;  main()  &#123;      intm, n, r;       scanf(&quot;%d %d&quot;, &amp;m, &amp;n);       r = mod(m, n); // å°†mï¼Œnçš„å€¼ä¼ å‚ç»™modå‡½æ•°ï¼Œè¿”å›å€¼èµ‹ç»™r      while (r != 0) //åˆ¤æ–­ræ˜¯ä¸æ˜¯0      &#123;          m = n;           n = r;          r = mod(m, n);      &#125;      printf(&quot;The Result is ï¼š%d\n&quot;, n);  &#125;</code></pre><p>ç¨‹åºè¿è¡Œæ—¶è¾“å…¥ï¼š 81 18  åˆ™è¿è¡Œç»“æœæ˜¯ï¼š</p><p><strong>é¢˜è§£ï¼š</strong> è¾“å…¥çš„å€¼ä¼ é€’åˆ°må’Œnï¼Œm = 81ï¼Œ n = 18ï¼Œç„¶åä¼ å‚åˆ°modï¼Œå¯¹81%18=9ã€‚æ‰€ä»¥r=9ã€‚r!=0,æ•…m=n=18,n=r=9,r=9ã€‚æ‰€ä»¥ç»“æœæ˜¯9ã€‚</p><h2 id="ä¸‰ã€é˜…è¯»ç¨‹åºï¼Œåœ¨æ ‡æœ‰ä¸‹åˆ’çº¿çš„ç©ºç™½å¤„å¡«å…¥é€‚å½“çš„è¡¨è¾¾å¼æˆ–è¯­å¥ï¼Œä½¿ç¨‹åºå®Œæ•´å¹¶ç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚ï¼ˆ-8-åˆ†ï¼Œæ¯ç©º-1-åˆ†ï¼‰">ä¸‰ã€é˜…è¯»ç¨‹åºï¼Œåœ¨æ ‡æœ‰ä¸‹åˆ’çº¿çš„ç©ºç™½å¤„å¡«å…¥é€‚å½“çš„è¡¨è¾¾å¼æˆ–è¯­å¥ï¼Œä½¿ç¨‹åºå®Œæ•´å¹¶ç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚ï¼ˆ 8 åˆ†ï¼Œæ¯ç©º 1 åˆ†ï¼‰</h2><p>1.ä»¥ä¸‹ç¨‹åºå°†è¾“å…¥çš„åè¿›åˆ¶æ•°ä»¥åå…­è¿›åˆ¶çš„å½¢å¼è¾“å‡ºã€‚</p><pre><code class="hljs">  #include &lt;stdio.h&gt;   main()  &#123;  char b[17] = &#123; &quot;0123456789ABCDEF&quot; &#125;; //ç»™å®š16è¿›åˆ¶è¡¨ç¤ºç¬¦  int c[64], d, i = 0, base = 16;   long number;  printf(&quot;è¯·è¾“å…¥ä¸€ä¸ªåè¿›åˆ¶æ•°\n&quot;);   scanf_s(&quot;%ld&quot;, &amp;number); //è¾“å…¥é•¿æ•´å½¢åè¿›åˆ¶  do &#123;      c[i] = number%base; //å¯¹16å–ä½™è·å¾—ä½™æ•°ï¼Œè¿™ä¸ªä½™æ•°å¯ä»¥å¯¹åº”ä¸‹æ ‡ï¼Œå˜æˆ16è¿›åˆ¶æ¯ä¸€ä½çš„è¡¨ç¤ºå€¼ã€‚      number = number / base; //åœ¨è¿™é‡Œé™¤å»16è¿›åˆ¶çš„ä½ä½ï¼Œå¾ªç¯ä»è€Œè¿›ä¸€æ­¥è¡¨ç¤ºé«˜ä½      i++;  &#125; while (number != 0);  printf(&quot;å¯¹åº”çš„åå…­è¿›åˆ¶æ•°ä¸º: \n&quot;);   for (--i; i&gt;=0 ; --i) Â //ç”±é«˜ä½åˆ°ä½ä½é€ä¸€è¾“å‡º  &#123;      d = c[i]; //å–å‡ºåæ”¾å…¥d      printf(&quot;%c&quot;, b[d]); //æŸ¥å­—å…¸ï¼Œå¯¹åº”16è¿›åˆ¶è¡¨ç¤ºç¬¦è¾“å…¥ä¸‹æ ‡  &#125;  printf(&quot;\n&quot;);  &#125;</code></pre><p>2ï¼ç”¨æˆ·ä»é”®ç›˜ä»»æ„è¾“å…¥ä¸€ä¸ªæ•°å­—è¡¨ç¤ºæœˆä»½å€¼ nï¼Œç¨‹åºæ˜¾ç¤ºè¯¥æœˆä»½å¯¹åº”çš„è‹±æ–‡è¡¨ç¤ºï¼Œè‹¥ n ä¸åœ¨ 1ï½12 ä¹‹é—´ï¼Œåˆ™è¾“å‡ºâ€œIllegal monthâ€ã€‚</p><pre><code class="hljs">#include &lt;stdio.h&gt; main()&#123;int n;static char monthName[][20] = &#123;&quot;Illegal month&quot;, &quot;January&quot;,&quot;February&quot;,&quot;March&quot;,    &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;,    &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;&#125;;printf(&quot;Input month number:&quot;); scanf(&quot;%d&quot;, &amp;n);if ((n&lt;=12)&amp;&amp;(n&gt;=1))  //åˆ¤æ–­è¾“å…¥çš„æœˆæ•°æ˜¯å¦æ­£ç¡®&#123;    printf(&quot;month %d is %s\n&quot;, n, monthName[n]); //è¾“å‡ºæ•°ç»„&#125;else&#123;    printf(&quot;%s\n&quot;, monthName[0]); &#125;&#125;</code></pre><p></p><h2 id="å››ã€åœ¨ä¸‹é¢ç»™å‡ºçš„-4-ä¸ªç¨‹åºä¸­ï¼Œå…±æœ‰-16-å¤„é”™è¯¯ï¼ˆåŒ…æ‹¬è¯­æ³•é”™è¯¯å’Œé€»è¾‘é”™è¯¯ï¼‰ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­çš„é”™è¯¯ï¼Œå¹¶æ”¹æ­£ä¹‹ã€‚ï¼ˆ-30-åˆ†ï¼Œ-æ¯æ‰¾å¯¹-1-ä¸ªé”™è¯¯ï¼Œ-åŠ -1-åˆ†ï¼Œ-æ¯ä¿®æ”¹æ­£ç¡®-1-ä¸ªé”™è¯¯ï¼Œ-å†åŠ -1-åˆ†ã€‚åªè¦æ‰¾å¯¹-15-ä¸ªå³å¯ï¼Œå¤šæ‰¾ä¸åŠ åˆ†ã€‚ï¼‰">å››ã€åœ¨ä¸‹é¢ç»™å‡ºçš„ 4 ä¸ªç¨‹åºä¸­ï¼Œå…±æœ‰ 16 å¤„é”™è¯¯ï¼ˆåŒ…æ‹¬è¯­æ³•é”™è¯¯å’Œé€»è¾‘é”™è¯¯ï¼‰ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­çš„é”™è¯¯ï¼Œå¹¶æ”¹æ­£ä¹‹ã€‚ï¼ˆ 30 åˆ†ï¼Œ æ¯æ‰¾å¯¹ 1 ä¸ªé”™è¯¯ï¼Œ åŠ  1 åˆ†ï¼Œ æ¯ä¿®æ”¹æ­£ç¡® 1 ä¸ªé”™è¯¯ï¼Œ å†åŠ  1 åˆ†ã€‚åªè¦æ‰¾å¯¹ 15 ä¸ªå³å¯ï¼Œå¤šæ‰¾ä¸åŠ åˆ†ã€‚ï¼‰</h2><p><strong>è¿™è®©æˆ‘å’‹å†™ï¼Ÿæˆ‘ç»™bugå…¨æ”¹å®Œå§ï¼Œæœ€çƒ¦æ‰¾bugå’Œæ”¹bugäº†ï¼Œä»£ç ä¹¦å†™è§„èŒƒä¸ä»…æ–¹ä¾¿è‡ªå·±æ›´æ–¹ä¾¿ä»–äºº</strong></p><p>1ï¼ä¸‹é¢ç¨‹åºå®ç°çš„æ˜¯æŠ˜åŠæŸ¥æ‰¾ç®—æ³•ã€‚</p><pre><code class="hljs">#include &lt;stdio.h&gt; main()&#123;intup = 9, low = 0, mid, found=0, find; //upæ˜¯è¡¨ç¤ºæœ€åçš„ä¸‹æ ‡ï¼Œlowæ˜¯æœ€åˆçš„æ•°ç»„ä¸‹æ ‡ï¼Œä»0å¼€å§‹ã€‚midç”¨æ¥æ”¾æŸ¥æ‰¾ç»“æœä¸‹æ ‡ï¼Œfindæ˜¯æ”¾è¾“å…¥æ•°æ®ï¼Œfoundæˆ‘æ„£æ˜¯æ²¡çœ‹æ‡‚å®ƒå­˜åœ¨çš„æ„ä¹‰inta[10] = &#123; 1, 5, 6, 9, 11, 17, 25, 34, 38, 41 &#125;;//æ•°æ®é›†scanf_s(&quot;%d&quot; , &amp;find); //è¾“å…¥printf(&quot;\n&quot;);while (up &gt;= low &amp;&amp; !found)&#123;    mid = (up + low) / 2;    if (a[mid] == find)    &#123;        found = 1;  //çœ‹åˆ°è¿™çœ‹æ‡‚äº†...ç”¨æ¥è·³å‡ºçš„,ä½†ä½ éƒ½å†™breakäº†ï¼Œå®ƒæœ‰å•¥æ„ä¹‰ï¼Ÿ        break;    &#125;    else if (a[mid] &lt; find)         low = mid + 1;    else up = mid - 1;&#125;if (found)    printf(&quot;foundnumberis%d th&quot;, mid); else    printf(&quot;nofound&quot;);&#125;</code></pre><p>2ï¼ä¸‹é¢ç¨‹åºæ¨¡æ‹Ÿäº†éª°å­çš„ 6000 æ¬¡æŠ•æ·ï¼Œç”¨ rand å‡½æ•°äº§ç”Ÿ 1ï½6 ä¹‹é—´çš„éšæœºæ•° faceï¼Œç„¶åç»Ÿè®¡ 1ï½6 æ¯ä¸€é¢å‡ºç°çš„æ¬¡æ•°å­˜æ”¾åˆ°æ•°ç»„ frequency ä¸­ã€‚</p><pre><code class="hljs">#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#include &lt;stdio.h&gt;main()&#123;    intface, roll, frequency[7] = &#123; 0 &#125;;    srand(time(NULL));    for (roll = 1; roll &lt;= 6000; roll++)    &#123;        face = rand() % 6 + 1;        ++frequency[face];    &#125;    printf(&quot;%4s%17s\n&quot;, &quot;Face&quot;, &quot;Frequency&quot;);     for (face = 1; face &lt;= 6; face++)    &#123;        printf(&quot;%4d%17d\n&quot;, face, frequency[face]);    &#125;&#125;</code></pre><p>3ï¼è®¡ç®—åä¸ªæ•°æ®çš„å¹³å‡å€¼ã€‚</p><pre><code class="hljs">  #include &lt;stdio.h&gt;   void main(void)  &#123;  int i, sum=0; // sumåˆå§‹åŒ–  floatavg;  intsc[10], * p = sc;   for (i = 0; i &lt; 10; i++)  &#123;      scanf(&quot;%d&quot;, p);       sum += *p;  //ç´¯åŠ ç”¨æˆ·è¾“å…¥å€¼æ”¾sumé‡Œ      p++;   //ç§»æ­¥ä¸‹ä¸€ä¸ªå†…å­˜åœ°å€  &#125;  avg = sum / 10;  printf(&quot;avg=%f\n&quot;, avg);  &#125;</code></pre><p>4ï¼ç¼–ç¨‹å®ç°ä»é”®ç›˜è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†å…¶å­—ç¬¦é¡ºåºé¢ å€’åé‡æ–°å­˜æ”¾ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªå­—ç¬¦ä¸²ã€‚ï¼ˆç”¨å­—ç¬¦æ•°ç»„å®ç°ï¼‰</p><pre><code class="hljs">  #include &lt;stdio.h&gt;  #include &lt;string.h&gt;  void Inverse(char rstr[]); //å£°æ˜  main()  &#123;      char str[80];      printf(&quot;Input a string:\n&quot;);       gets(str);      Inverse(str);      printf(&quot;The inversed string is:\n&quot;);       puts(str);  &#125;  void Inverse(char rstr[])  &#123;      int i, n; char temp;      for (i = 0, n = (strlen(rstr)); i &lt; n; i++, n--)      &#123;          temp = rstr[i];           rstr[i] = rstr[n];           rstr[n] = temp;      &#125;  &#125;</code></pre><h2 id="äº”ã€ç¼–ç¨‹">äº”ã€ç¼–ç¨‹</h2><p>1.ä»é”®ç›˜ä»»æ„è¾“å…¥ä¸€ä¸ª 4 ä½æ•° xï¼Œç¼–ç¨‹è®¡ç®— x çš„æ¯ä¸€ä½æ•°å­—ç›¸åŠ ä¹‹å’Œï¼ˆå¿½ç•¥æ•´æ•°å‰çš„æ­£è´Ÿå·ï¼‰ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ x ä¸º 1234ï¼Œåˆ™ç”± 1234 åˆ†ç¦»å‡ºå…¶åƒä½ 1ã€ç™¾ä½ 2ã€åä½ 3ã€ä¸ªä½ 4ï¼Œç„¶åè®¡ç®— 1+2+3+4=10ï¼Œå¹¶è¾“å‡º 10ã€‚(14 åˆ†)</p><pre><code class="hljs">    #include&lt;stdio.h&gt;    #include&lt;math.h&gt;    /**        é¢˜ç›®ï¼š1.ä»é”®ç›˜ä»»æ„è¾“å…¥ä¸€ä¸ª 4 ä½æ•° xï¼Œç¼–ç¨‹è®¡ç®— x çš„æ¯ä¸€ä½æ•°å­—ç›¸åŠ ä¹‹å’Œï¼ˆå¿½ç•¥æ•´æ•°å‰çš„æ­£è´Ÿå·ï¼‰ã€‚        ä¾‹å¦‚ï¼Œè¾“å…¥ x ä¸º 1234ï¼Œåˆ™ç”± 1234 åˆ†ç¦»å‡ºå…¶åƒä½ 1ã€ç™¾ä½ 2ã€åä½ 3ã€ä¸ªä½ 4ï¼Œç„¶åè®¡ç®— 1+2+3+4=10ï¼Œå¹¶è¾“å‡º 10ã€‚        æ—¶é—´ï¼š2021/12/8        ä½œè€…ï¼šè¿æ€é‘«        åˆ†æï¼šè¿™ä¸ªé¢˜çš„é‡ç‚¹åœ¨äºå¦‚ä½•æ‹†åˆ†è¿›åˆ¶æ•°ï¼Œä¾‹å¦‚1234/1000=1.234ï¼ˆæ•´æ•°å‹å–è¯ï¼‰åˆ†ç¦»å‡ºåƒä½ï¼Œ1234-åˆ†ç¦»å‡ºçš„åƒä½/100å°±å¾—å‡ºäº†ç™¾ä½æ•°å€¼ï¼Œå¾€ä¸‹åŒç†    */    main() &#123;        int x1, x2, x3, x4, x, y; //x1~4ç”¨æ¥å­˜æ”¾å„ä¸ªè¿›åˆ¶ä½æ•°çš„æ•°å€¼ï¼Œxæ˜¯ç”¨æˆ·è¾“å…¥ï¼Œyæ”¾è¾“å‡ºç»“æœ        printf(&quot;è¯·è¾“å…¥ä¸€ä¸ªå››ä½æ•°: \n&quot;);        scanf_s(&quot;%d&quot;, &amp;x);        y = fabs(x); //å–ä¸ªç»å¯¹å€¼ï¼Œé˜²æ­¢è´Ÿæ•°        x1 = y / 1000; //åƒä½æ•°åˆ†ç¦»        x2 = (y - (x1 * 1000)) / 100; //ç™¾ä½æ•°åˆ†ç¦»        x3 = (y - (x1 * 1000)-(x2 * 100)) / 10; //åä½æ•°åˆ†ç¦»        x4 = y % 10; //ä¸ªä½åˆ†ç¦»        y = x1 + x2 + x3 + x4;        printf(&quot;ä½å€¼ç›¸åŠ ç»“æœä¸ºï¼š%d&quot;, y);    &#125;</code></pre><p>2.è¾“å…¥ 20 ä¸ªå­¦ç”Ÿçš„æˆç»©ï¼Œæ±‚å‡ºå…¶ä¸­å¤§äºå¹³å‡æˆç»©å­¦ç”Ÿçš„äººæ•°ï¼Œå¹¶å¯¹ 20 åå­¦ç”Ÿæˆç»©æŒ‰ä»é«˜åˆ°ä½è¿›è¡Œæ’åºã€‚(14 åˆ†)</p><pre><code class="hljs">    #include&lt;stdio.h&gt;    #include&lt;math.h&gt;    /**        é¢˜ç›®ï¼š2.è¾“å…¥ 20 ä¸ªå­¦ç”Ÿçš„æˆç»©ï¼Œæ±‚å‡ºå…¶ä¸­å¤§äºå¹³å‡æˆç»©å­¦ç”Ÿçš„äººæ•°ï¼Œå¹¶å¯¹ 20 åå­¦ç”Ÿæˆç»©æŒ‰ä»é«˜åˆ°ä½è¿›è¡Œæ’åºã€‚        æ—¶é—´ï¼š2021/12/8        ä½œè€…ï¼šè¿æ€é‘«    */    int pingjunshu(int chengji[]);    int paixu(int paixu[]);    int main() &#123;        int  i, j, arr[20];        int num = 0;        for (i = 0; i &lt; 20; i++)        &#123;            scanf_s(&quot;%d&quot;, &amp;arr[i]);        &#125;        j = pingjunshu(arr);        // ç­›é€‰å¤§äºå¹³å‡æ•°çš„äººæ•°        for (i = 0; i &lt; 20; i++)        &#123;            if (arr[i] &gt; j) &#123;                num++;            &#125;        &#125;        printf(&quot;å¤§äºå¹³å‡æ•°çš„äººæ•°ä¸º%d\n&quot;, num);        paixu(arr);        return 0;    &#125;    // å¹³å‡æ•°    int pingjunshu(int chengji[]) &#123;        int s = 0;        for (int i = 0; i &lt; 20; i++)        &#123;            s = s + chengji[i];        &#125;        s = s / 20;        return s;    &#125;    //æ’åºï¼ˆå†’æ³¡ï¼‰    int paixu(int paixu[]) &#123;        int i, j, temp;        for (i = 0; i &lt; 20 - 1; i++)            for (j = 0; j &lt; 20 - 1 - i; j++)                if (paixu[j] &gt; paixu[j + 1]) &#123;                    temp = paixu[j];                    paixu[j] = paixu[j + 1];                    paixu[j + 1] = temp;                &#125;        for (i = 0; i &lt; 20; i++) &#123;            printf(&quot;%d\n&quot;, paixu[i]);        &#125;    &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
          <category> Cè¯­è¨€é¢è¯•é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> é¢è¯•é¢˜ </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cç›˜æ¸…ç†è„šæœ¬ä½¿ç”¨å·¥å…·åŠæ•™ç¨‹</title>
      <link href="/2021/12/01/C%E7%9B%98%E6%B8%85%E7%90%86%E8%84%9A%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7%E5%8F%8A%E6%95%99%E7%A8%8B/"/>
      <url>/2021/12/01/C%E7%9B%98%E6%B8%85%E7%90%86%E8%84%9A%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7%E5%8F%8A%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1>Cç›˜æ¸…ç†å·¥å…·åŠä½¿ç”¨æ•™ç¨‹</h1><h2 id="èµ·å› ">èµ·å› </h2><p>å¥½å¤šäººæ‰¾æˆ‘è¯´ç”µè„‘Cç›˜å¿«æ»¡äº†ï¼Œç”µè„‘å˜å¡äº†ï¼Œæ¥æ‰¾æˆ‘å¸®å¿™æ¸…ç†ä¸€ä¸‹Cç›˜ã€‚</p><p>Cç›˜æ˜¯ç”µè„‘çš„ç³»ç»Ÿç›˜ï¼Œæœ‰è®¸å¤šé‡è¦çš„ç³»ç»Ÿæ–‡ä»¶ï¼Œæ²¡æŠ€æœ¯å’Œç»éªŒçš„åƒä¸‡ä¸è¦ä¹±åˆ ã€‚å› ä¸ºä½ çš„ä¸€ä¸ªä¸ç•™ç¥ï¼Œè½»åˆ™ä¸€äº›è½¯ä»¶æ‰“ä¸å¼€ï¼Œé‡åˆ™ç›´æ¥å¼€ä¸äº†æœºã€‚</p><p>Cç›˜çš„æ¸…ç†åˆæ˜¯ä¸€ä¸ªéå¸¸éº»çƒ¦çš„å·¥ä½œï¼Œä½ è¦ä¸€ä¸ªä¸ªå»åˆ†æåˆ¤æ–­è¿™ä¸ªæ–‡ä»¶èƒ½ä¸èƒ½åˆ ã€‚è€Œä¸”åƒåœ¾æ–‡ä»¶åˆä¸æ˜¯ç»Ÿä¸€å­˜æ”¾åœ¨ä¸€ä¸ªä½ç½®ä¸Šï¼Œæ‰€ä»¥ä½ è¿˜è¦ä¸€ä¸ªä¸ªçš„å»æ‰¾ã€‚</p><p>æ‰€ä»¥ï¼Œå¼€å‘ä¸€ä¸ªæ‰¹é‡çš„æ¸…ç†è„šæœ¬çš„å¿µå¤´ä¾¿è¯ç”Ÿäº†ã€‚</p><h2 id="Cç›˜æ¸…ç†è„šæœ¬">Cç›˜æ¸…ç†è„šæœ¬</h2><p>batæ–‡ä»¶æ˜¯æ‰¹å¤„ç†å¤„ç†æ–‡ä»¶ï¼Œåœ¨dosä¸‹çš„å¯æ‰§è¡Œè„šæœ¬æ–‡ä»¶ã€‚æˆ‘ä»¬å»åˆ†æCç›˜é‡Œå“ªäº›æ˜¯åƒåœ¾æ–‡ä»¶ï¼Œä¾‹å¦‚.tpmã€.logç­‰åç¼€çš„éƒ½æ˜¯å¯æœ‰å¯æ— çš„ç¼“å­˜æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶ï¼Œæ˜¯å¯ä»¥åˆ é™¤çš„ï¼Œä»è€Œå‡è½»Cç›˜çš„å®¹é‡è´Ÿæ‹…ã€‚</p><p>è„šæœ¬å¦‚ä¸‹ï¼š</p><pre><code class="hljs">@echo offecho Cleaning up system junk files, please wait ......del /f /s /q %systemdrive%\*.tmpdel /f /s /q %systemdrive%\*._mpÂ  Â  Â Â  del /f /s /q %systemdrive%\*.logdel /f /s /q %systemdrive%\*.gidÂ  Â  Â  Â Â  del /f /s /q %systemdrive%\*.chkdel /f /s /q %systemdrive%\*.oldÂ  Â  Â  Â  Â del /f /s /q %systemdrive%\recycled\*.*del /f /s /q %windir%\*.bakÂ  Â  Â  Â  Â  Â  Â  Â  Â  del /f /s /q %windir%\prefetch\*.*rd /s /q %windir%\temp &amp; md %windir%\tempdel /f /q %userprofile%\cookies\*.*Â  Â  Â Â Â del /f /q %userprofile%\recent\*.*del /f /s /q &quot;%userprofile%\Local Settings\Temporary Internet Files\*.*&quot;del /f /s /q &quot;%userprofile%\Local Settings\Temp\*.*&quot;Â  Â  del /f /s /q &quot;%userprofile%\recent\*.*&quot;echo Cleaning system garbage complete!Â  Â  Â echo. &amp; pause </code></pre><h2 id="ä½¿ç”¨æ•™ç¨‹">ä½¿ç”¨æ•™ç¨‹</h2><p>1.åœ¨ç”µè„‘æ¡Œé¢æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£</p><p><img src="/images/2021-12-1-001.png" alt="upload successful"></p><p>2.å¤åˆ¶ä¸Šé¢æˆ‘å†™çš„ä»£ç åˆ°ä½ æ–°å»ºçš„æ–‡æœ¬æ–‡æ¡£ä¸­ã€‚</p><p><img src="/images/2021-12-1-002.png" alt="upload successful"></p><p>3.æ›´æ”¹æ–‡ä»¶åä¸ºCç›˜æ¸…ç†è„šæœ¬.batã€‚æ³¨ï¼šåç¼€ <strong>.txt</strong> ä¸€å®šè¦æ”¹æˆ <strong>.bat</strong>ã€‚</p><p><img src="/images/2021-12-1-003.png" alt="upload successful"></p><p>4.å³å‡»ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå³å¯</p><p><img src="/images/2021-12-1-004.png" alt="overwrote existing file"></p><p><strong>æ³¨ï¼šä¸€å®šè¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼Œä¸ç„¶æœ‰çš„ç›®å½•æ²¡æœ‰æƒé™ï¼Œæ¸…ç†ä¸å½»åº•ï¼</strong></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è¶…æ˜Ÿç½‘è¯¾è€ƒè¯•ä¸“ç”¨ç‰ˆè„šæœ¬ä½¿ç”¨æ•™ç¨‹</title>
      <link href="/2021/11/20/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E8%80%83%E8%AF%95%E4%B8%93%E7%94%A8%E7%89%88%E8%84%9A%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
      <url>/2021/11/20/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E8%80%83%E8%AF%95%E4%B8%93%E7%94%A8%E7%89%88%E8%84%9A%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1>è¶…æ˜Ÿç½‘è¯¾è€ƒè¯•ä¸“ç”¨ç‰ˆè„šæœ¬ä½¿ç”¨æ•™ç¨‹</h1><h1>ä¸€.å‡†å¤‡å·¥ä½œ</h1><ol><li>ç”µè„‘ä¸€å°</li><li>ç”µè„‘å†…è£…æœ‰Edgeæµè§ˆå™¨</li><li>è„šæœ¬ç®¡ç†å™¨Tampermonkey</li><li>å¯¼å…¥æˆ‘çš„è„šæœ¬</li><li>æ‰“å¼€è¶…æ˜Ÿè¿›å…¥è€ƒè¯•å³å¯å…¨è‡ªåŠ¨ç­”é¢˜</li></ol><h1>äºŒ.æ­¥éª¤</h1><ol><li>é¦–å…ˆæ‰“å¼€ç”µè„‘ï¼Œè¿ä¸Šç½‘ç»œï¼Œæ‰“å¼€Edgeæµè§ˆå™¨</li><li>å®‰è£…Tampermonkeyè„šæœ¬ç®¡ç†å™¨</li><li>é€‰æ‹©æ·»åŠ è„šæœ¬</li><li>å¤åˆ¶ç²˜è´´ä¸‹æ–¹çš„è„šæœ¬ä»£ç å¹¶ä¿å­˜</li><li>ç™»å½•ä½ çš„è¶…æ˜Ÿè´¦å·è¿›å»è€ƒè¯•ï¼Œä½ ä¼šå‘ç°å®ƒå…¨è‡ªåŠ¨ç­”é¢˜äº†</li></ol><h1>ä¸‰.å·¥å…·å¯¼èˆª</h1><ol><li>Tampermonkeyè„šæœ¬ç®¡ç†å™¨å®‰è£…ç½‘å€ <a href="https://www.tampermonkey.net/">ç‚¹æˆ‘è¿›å…¥</a></li></ol><p>å¦‚å›¾</p><ol><li></li></ol><p><img src="/images/2021-11/20-01.png" alt="å›¾ä¸€"></p><ol start="2"><li></li></ol><p><img src="/images/2021-11/20-02.png" alt="å›¾äºŒ"></p><ol start="3"><li></li></ol><p><img src="/images/2021-11/20-03.png" alt="å›¾ä¸‰"></p><ol start="2"><li><p>è„šæœ¬ä»£ç </p><pre><code class="hljs"> // ==UserScript== // @name         è¶…æ˜Ÿç½‘è¯¾åŠ©æ‰‹(è€ƒè¯•ä¸“ç‰ˆ)(æ”¹) // @namespace    coder_tq // @version      3.3.10 // @description  è‡ªåŠ¨æœç´¢å°”é›…MOOCè€ƒè¯•ç­”æ¡ˆï¼Œæ”¯æŒè‡ªåŠ¨ç­”é¢˜ã€è‡ªåŠ¨åˆ‡æ¢é¢˜ç›®ã€éšè—ç­”æ¡ˆæœç´¢æç¤ºæ¡†ç­‰ï¼Œè§£é™¤å„ç±»åŠŸèƒ½é™åˆ¶ï¼Œå¼€æ”¾è‡ªå®šä¹‰å‚æ•° // @author       coder_tq // @match        *://*.chaoxing.com/exam/test/reVersionTestStartNew* // @match        *://*.edu.cn/exam/test/reVersionTestStartNew* // @match        *://*.nbdlib.cn/exam/test/reVersionTestStartNew* // @match        *://*.hnsyu.net/exam/test/reVersionTestStartNew* // @connect      cx.icodef.com // @run-at       document-end // @grant        unsafeWindow // @grant        GM_xmlhttpRequest // @grant        GM_setClipboard // @grant        GM_setValue // @grant        GM_getValue // @license      MIT // ==/UserScript== // è®¾ç½®ä¿®æ”¹åï¼Œéœ€è¦åˆ·æ–°æˆ–é‡æ–°æ‰“å¼€ç½‘è¯¾é¡µé¢æ‰ä¼šç”Ÿæ•ˆ var setting = &#123;         // 8E3 == 8000ï¼Œç§‘å­¦è®°æ•°æ³•ï¼Œè¡¨ç¤ºæ¯«ç§’æ•°         time: 5E3 // é»˜è®¤å“åº”é€Ÿåº¦ä¸º8ç§’ï¼Œä¸å»ºè®®å°äº5ç§’         ,token: '' // tokenå¯ä»¥å¢åŠ å¹¶å‘æ¬¡æ•°ï¼Œç”¨æ¥æ‰“ç ï¼Œé‡‡é›†é¢˜åº“å¥–åŠ±         // 1ä»£è¡¨å¼€å¯ï¼Œ0ä»£è¡¨å…³é—­         ,none: 0 // æœªæ‰¾åˆ°ç­”æ¡ˆæˆ–æ— åŒ¹é…ç­”æ¡ˆæ—¶æ‰§è¡Œé»˜è®¤æ“ä½œï¼Œé»˜è®¤å…³é—­         ,jump: 1 // ç­”é¢˜å®Œæˆåè‡ªåŠ¨åˆ‡æ¢ï¼Œé»˜è®¤å¼€å¯         ,copy: 0 // è‡ªåŠ¨å¤åˆ¶ç­”æ¡ˆåˆ°å‰ªè´´æ¿ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®æˆ–ç­”æ¡ˆè¿›è¡Œå¤åˆ¶ï¼Œé»˜è®¤å…³é—­         // éè‡ªåŠ¨åŒ–æ“ä½œ         ,hide: 0 // ä¸åŠ è½½ç­”æ¡ˆæœç´¢æç¤ºæ¡†ï¼Œé”®ç›˜â†‘å’Œâ†“å¯ä»¥ä¸´æ—¶ç§»é™¤å’ŒåŠ è½½ï¼Œé»˜è®¤å…³é—­         ,scale: 0 // å¯Œæ–‡æœ¬ç¼–è¾‘å™¨é«˜åº¦è‡ªåŠ¨æ‹‰ä¼¸ï¼Œç”¨äºæ–‡æœ¬ç±»é¢˜ç›®ï¼Œç­”é¢˜æ¡†æ ¹æ®å†…å®¹è‡ªåŠ¨è°ƒæ•´å¤§å°ï¼Œé»˜è®¤å…³é—­     &#125;,     _self = unsafeWindow,     $ = _self.jQuery,     UE = _self.UE; setting.notice = 'å…¬å‘Šæ '; GM_xmlhttpRequest(&#123;     method: 'GET',     url: 'http://cx.icodef.com/update?s=wyn3',     timeout: setting.time,     onload: function (xhr) &#123;         if (xhr.status == 200) &#123;             var obj = $.parseJSON(xhr.responseText) || &#123;&#125;;             setting.notice = obj.injection;             document.querySelector('#cx-notice').innerHTML = setting.notice;         &#125;     &#125;,     ontimeout: function () &#123;         setting.loop &amp;&amp; setting.div.children('div:eq(0)').html(setting.over + 'æœåŠ¡å™¨è¶…æ—¶ï¼Œæ­£åœ¨é‡è¯•...');     &#125; &#125;); String.prototype.toCDB = function() &#123;     return this.replace(/\s/g, '').replace(/[\uff01-\uff5e]/g, function(str) &#123;         return String.fromCharCode(str.charCodeAt(0) - 65248);     &#125;).replace(/[â€œâ€]/g, '&quot;').replace(/[â€˜â€™]/g, &quot;'&quot;).replace(/ã€‚/g, '.'); &#125;; // setting.time += Math.ceil(setting.time * Math.random()) - setting.time / 2; setting.TiMu = [     filterImg('.Cy_TItle .clearfix').replace(/\s*ï¼ˆ\d+\.\d+åˆ†ï¼‰$/, ''),     $('[name^=type]:not([id])').val() || '-1',     $('.cur a').text().trim() || 'æ— ',     $('li .clearfix').map(function() &#123;         return filterImg(this);     &#125;) ]; var maximize=$(     '&lt;div style=&quot;border: 2px dashed rgb(0, 85, 68); position: fixed; top: 0; right: 0; z-index: 99999; background-color: rgba(70, 196, 38, 0.6); overflow-x: auto;display:none;&quot;&gt;â—»&lt;/div&gt;' ).appendTo('body').click(function()&#123;     $(setting.div).css(&quot;display&quot;,&quot;block&quot;);     GM_setValue(&quot;minimize&quot;,&quot;0&quot;);     $(maximize).css(&quot;display&quot;,&quot;none&quot;); &#125;); setting.div = $(     '&lt;div style=&quot;border: 2px dashed rgb(0, 85, 68); width: 330px; position: fixed; top: 0; right: 0; z-index: 99999; background-color: rgba(70, 196, 38, 0.6); overflow-x: auto;&quot;&gt;' +     '&lt;span style=&quot;font-size: medium;&quot;&gt;&lt;/span&gt;' +     '&lt;div style=&quot;font-size: medium;width:70%;display: inline-block;&quot;&gt;æ­£åœ¨æœç´¢ç­”æ¡ˆ...&lt;/div&gt;'+     '&lt;div style=&quot;width:30%;display: inline-block;padding-right: 10px;box-sizing: border-box;text-align: right;&quot;&gt;&lt;minimize style=&quot;width:20px;font-size:16px;line-height: 12px;font-weight: bold;cursor: context-menu;user-select:none;&quot;&gt;ä¸€&lt;/minimize&gt;&lt;/div&gt;' +     '&lt;div id=&quot;cx-notice&quot; style=&quot;border-top: 1px solid #000;border-bottom: 1px solid #000;margin: 4px 0px;overflow: hidden;&quot;&gt;' + setting.notice + '&lt;/div&gt;' +     '&lt;button style=&quot;margin-right: 10px;&quot;&gt;æš‚åœç­”é¢˜&lt;/button&gt;' +     '&lt;button style=&quot;margin-right: 10px;' + (setting.jump ? '' : ' display: none;') + '&quot;&gt;ç‚¹å‡»åœæ­¢æœ¬æ¬¡åˆ‡æ¢&lt;/button&gt;' +     '&lt;button style=&quot;margin-right: 10px;&quot;&gt;é‡æ–°æŸ¥è¯¢&lt;/button&gt;' +     '&lt;button style=&quot;margin-right: 10px; display: none;&quot;&gt;å¤åˆ¶ç­”æ¡ˆ&lt;/button&gt;' +     '&lt;button&gt;ç­”é¢˜è¯¦æƒ…&lt;/button&gt;' +     '&lt;div style=&quot;max-height: 200px; overflow-y: auto;&quot;&gt;' +     '&lt;table border=&quot;1&quot; style=&quot;font-size: 12px;&quot;&gt;' +     '&lt;thead&gt;' +     '&lt;tr&gt;' +     '&lt;th colspan=&quot;2&quot;&gt;' + ($('#randomOptions').val() == 'false' ? '' : '&lt;font color=&quot;red&quot;&gt;æœ¬æ¬¡è€ƒè¯•çš„é€‰é¡¹ä¸ºä¹±åº è„šæœ¬ä¼šé€‰æ‹©æ­£ç¡®çš„é€‰é¡¹&lt;/font&gt;') + '&lt;/th&gt;' +     '&lt;/tr&gt;' +     '&lt;tr&gt;' +     '&lt;th style=&quot;width: 60%; min-width: 130px;&quot;&gt;é¢˜ç›®ï¼ˆç‚¹å‡»å¯å¤åˆ¶ï¼‰&lt;/th&gt;' +     '&lt;th style=&quot;min-width: 130px;&quot;&gt;ç­”æ¡ˆï¼ˆç‚¹å‡»å¯å¤åˆ¶ï¼‰&lt;/th&gt;' +     '&lt;/tr&gt;' +     '&lt;/thead&gt;' +     '&lt;tfoot style=&quot;' + (setting.jump ? ' display: none;' : '') + '&quot;&gt;' +     '&lt;tr&gt;' +     '&lt;th colspan=&quot;2&quot;&gt;å·²å…³é—­ æœ¬æ¬¡è‡ªåŠ¨åˆ‡æ¢&lt;/th&gt;' +     '&lt;/tr&gt;' +     '&lt;/tfoot&gt;' +     '&lt;tbody&gt;' +     '&lt;tr&gt;' +     '&lt;td colspan=&quot;2&quot; style=&quot;display: none;&quot;&gt;&lt;/td&gt;' +     '&lt;/tr&gt;' +     '&lt;/tbody&gt;' +     '&lt;/table&gt;' +     '&lt;/div&gt;' +     '&lt;/div&gt;' ).appendTo('body').on('click', 'button, td', function() &#123;     var num = setting.$btn.index(this);     if (num == -1) &#123;         GM_setClipboard($(this).text());     &#125; else if (num === 0) &#123;         if (setting.loop) &#123;             clearInterval(setting.loop);             delete setting.loop;             num = ['å·²æš‚åœæœç´¢', 'ç»§ç»­ç­”é¢˜'];         &#125; else &#123;             setting.loop = setInterval(findTiMu, setting.time);             num = ['æ­£åœ¨æœç´¢ç­”æ¡ˆ...', 'æš‚åœç­”é¢˜'];         &#125;         setting.$div.html(function() &#123;             return $(this).data('html') || num[0];         &#125;).removeData('html');         $(this).html(num[1]);     &#125; else if (num == 1) &#123;         setting.jump = 0;         setting.$div.html(function() &#123;             return arguments[1].replace('å³å°†åˆ‡æ¢ä¸‹ä¸€é¢˜', 'æœªå¼€å¯è‡ªåŠ¨åˆ‡æ¢');         &#125;);         setting.div.find('tfoot').add(this).toggle();     &#125; else if (num == 2) &#123;         location.reload();     &#125; else if (num == 3) &#123;         GM_setClipboard(setting.div.find('td:last').text());     &#125; else if (num == 4) &#123;         ($('.leftCard .saveYl')[0] || $()).click();     &#125; else if (num == 5) &#123;         setting.tk_num++;         GM_setValue('tk_num_1',setting.tk_num);         setting.tk_num = GM_getValue('tk_num_1');         console.log(setting.tk_num);         parent.location.reload();     &#125; &#125;).on('click','minimize', function() &#123;     $(this).parent().parent().css(&quot;display&quot;,&quot;none&quot;);     GM_setValue(&quot;minimize&quot;,&quot;1&quot;);     $(maximize).css(&quot;display&quot;,&quot;block&quot;); &#125;).detach(setting.hide ? '*' : 'html'); if(GM_getValue(&quot;minimize&quot;)==&quot;1&quot;)&#123;     $(setting.div).css(&quot;display&quot;,&quot;none&quot;);     $(maximize).css(&quot;display&quot;,&quot;block&quot;); &#125; setting.$btn = setting.div.children('button'); setting.$div = setting.div.children('div:eq(0)'); $(document).keydown(function(event) &#123;     if (event.keyCode == 38) &#123;         setting.div.detach();     &#125; else if (event.keyCode == 40) &#123;         setting.div.appendTo('body');     &#125; &#125;); if (setting.scale) _self.UEDITOR_CONFIG.scaleEnabled = false; $.each(UE.instants, function() &#123;     var key = this.key;     this.ready(function() &#123;         this.destroy();         UE.getEditor(key);     &#125;); &#125;); setting.loop = setInterval(findTiMu, setting.time); function findTiMu() &#123;     GM_xmlhttpRequest(&#123;         method: 'POST',         url: 'http://cx.icodef.com/wyn-nb?v=4',         headers: &#123;             'Content-type': 'application/x-www-form-urlencoded',             'Authorization': setting.token,         &#125;,         data: 'question=' + encodeURIComponent(setting.TiMu[0]) + '&amp;type=' + setting.TiMu[1] + '&amp;id=' + $('#paperId').val(),         timeout: setting.time,         onload: function(xhr) &#123;             if (!setting.loop) &#123;             &#125; else if (xhr.status == 200) &#123;                 var obj = $.parseJSON(xhr.responseText) || &#123;&#125;;                 obj.answer = obj.data;                 if (obj.code) &#123;                     var answer = String(obj.answer).replace(/&amp;/g, '&amp;').replace(/&lt;(?!img)/g, '&lt;'),                         que = setting.TiMu[0].match('&lt;img') ? setting.TiMu[0] : setting.TiMu[0].replace(/&amp;/g, '&amp;').replace(/&lt;/g, '&lt;');                     obj.answer = /^http/.test(answer) ? '&lt;img src=&quot;' + obj.answer + '&quot;&gt;' : obj.answer;                     setting.div.find('tbody').append(                         '&lt;tr&gt;' +                         '&lt;td title=&quot;ç‚¹å‡»å¯å¤åˆ¶&quot;&gt;' + que + '&lt;/td&gt;' +                         '&lt;td title=&quot;ç‚¹å‡»å¯å¤åˆ¶&quot;&gt;' + (/^http/.test(answer) ? obj.answer : '') + answer + '&lt;/td&gt;' +                         '&lt;/tr&gt;'                     );                     setting.copy &amp;&amp; GM_setClipboard(obj.answer);                     setting.$btn.eq(3).show();                     fillAnswer(obj);                 &#125; else &#123;                     setting.$div.html(obj.answer || 'æœåŠ¡å™¨ç¹å¿™ï¼Œæ­£åœ¨é‡è¯•...');                 &#125;                 setting.div.children('span').html(obj.msg || '');             &#125; else if (xhr.status == 403) &#123;                 var html = xhr.responseText.indexOf('&#123;') ? 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œå»ºè®®ç¨åå†è¯•' : $.parseJSON(xhr.responseText).data;                 setting.$div.data('html', html).siblings('button:eq(0)').click();             &#125; else &#123;                 setting.$div.text('æœåŠ¡å™¨å¼‚å¸¸ï¼Œæ­£åœ¨é‡è¯•...');             &#125;         &#125;,         ontimeout: function() &#123;             setting.loop &amp;&amp; setting.$div.text('æœåŠ¡å™¨è¶…æ—¶ï¼Œæ­£åœ¨é‡è¯•...');         &#125;     &#125;); &#125; function fillAnswer(obj, tip) &#123;     var $input = $(':radio, :checkbox', '.Cy_ulBottom'),         str = String(obj.answer).toCDB() || new Date().toString(),         data = str.split(/#|\x01|\|/),         opt = obj.opt || str,         btn = $('.saveYl:contains(ä¸‹ä¸€é¢˜)').offset();     // $input.filter(':radio:checked').prop('checked', false);     obj.code &gt; 0 &amp;&amp; $input.each(function(index) &#123;         if (this.value == 'true') &#123;             data.join().match(/(^|,)(æ­£ç¡®|æ˜¯|å¯¹|âˆš|T|ri)(,|$)/) &amp;&amp; this.click();         &#125; else if (this.value == 'false') &#123;             data.join().match(/(^|,)(é”™è¯¯|å¦|é”™|Ã—|F|wr)(,|$)/) &amp;&amp; this.click();         &#125; else &#123;             index = setting.TiMu[3][index].toCDB() || new Date().toString();             index = $.inArray(index, data) + 1 || (setting.TiMu[1] == '1' &amp;&amp; str.indexOf(index) + 1);             Boolean(index) == this.checked || this.click();         &#125;     &#125;).each(function() &#123;         if (!/^A?B?C?D?E?F?G?$/.test(opt)) return false;         Boolean(opt.match(this.value)) == this.checked || this.click();     &#125;);     if (setting.TiMu[1].match(/^[013]$/)) &#123;         tip = $input.is(':checked') || setting.none &amp;&amp; (($input[Math.floor(Math.random() * $input.length)] || $()).click(), ' ');     &#125; else if (setting.TiMu[1].match(/^(2|[4-9]|1[08])$/)) &#123;         data = String(obj.answer).split(/#|\x01|\|/);         tip = $('.Cy_ulTk textarea').each(function(index) &#123;             index = (obj.code &gt; 0 &amp;&amp; data[index]) || '';             UE.getEditor(this.name).setContent(index.trim());         &#125;).length;         tip = (obj.code &gt; 0 &amp;&amp; data.length == tip) || setting.none &amp;&amp; ' ';         setting.len = str.length * setting.time / 10;     &#125;     if (tip == ' ') &#123;         tip = 'å·²æ‰§è¡Œé»˜è®¤æ“ä½œ';     &#125; else if (tip) &#123;         tip = 'è‡ªåŠ¨ç­”é¢˜å·²å®Œæˆ';     &#125; else if (tip === undefined) &#123;         tip = 'è¯¥é¢˜å‹ä¸æ”¯æŒè‡ªåŠ¨ç­”é¢˜';     &#125; else &#123;         tip = 'æœªæ‰¾åˆ°æœ‰æ•ˆç­”æ¡ˆ';     &#125;     if (btn) &#123;         tip += setting.jump ? 'ï¼Œå³å°†åˆ‡æ¢ä¸‹ä¸€é¢˜' : 'ï¼Œæœªå¼€å¯è‡ªåŠ¨åˆ‡æ¢';         setInterval(function() &#123;             if (!setting.jump) return;             var mouse = document.createEvent('MouseEvents'),                 arr = [btn.left + Math.ceil(Math.random() * 80), btn.top + Math.ceil(Math.random() * 26)];             mouse.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, arr[0], arr[1], false, false, false, false, 0, null);             _self.event = $.extend(true, &#123;&#125;, mouse);             delete _self.event.isTrusted;             _self.getTheNextQuestion(1);         &#125;, setting.len || Math.ceil(setting.time * Math.random()) * 2);     &#125; else &#123;         setting.$btn.eq(1).hide();         tip = 'ç­”é¢˜å·²å®Œæˆï¼Œè¯·è‡ªè¡ŒæŸ¥çœ‹ç­”é¢˜è¯¦æƒ…';     &#125;     setting.$div.data('html', tip).siblings('button:eq(0)').hide().click(); &#125; function filterImg(dom) &#123;     return $(dom).clone().find('img[src]').replaceWith(function() &#123;         return $('&lt;p&gt;&lt;/p&gt;').text('');     &#125;).end().find('iframe[src]').replaceWith(function() &#123;         return $('&lt;p&gt;&lt;/p&gt;').text('');     &#125;).end().text().trim(); &#125;</code></pre></li><li><p>å¯¼å…¥è„šæœ¬</p></li></ol><p>æ ¹æ®å›¾ä¸­æ­¥éª¤æ¥å³å¯</p><ol start="4"><li></li></ol><p><img src="/images/2021-11/20-04.png" alt="å›¾4"></p><ol start="5"><li></li></ol><p><img src="/images/2021-11/20-05.png" alt="å›¾5"></p><ol start="6"><li></li></ol><p><img src="/images/2021-11/20-06.png" alt="å›¾6"></p><ol start="4"><li>æ‰“å¼€è¶…æ˜Ÿï¼Œç™»å½•ï¼Œè¿›å»è€ƒè¯•å³å¯</li></ol><p>ï¼ˆå®Œï¼ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
          <category> è„šæœ¬ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦åˆ© </tag>
            
            <tag> è¶…æ˜Ÿ </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> è„šæœ¬ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæ·±åº¦å­¦ä¹ å…¥é—¨ã€‹å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</title>
      <link href="/2021/11/06/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2021/11/06/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1>ã€Šæ·±åº¦å­¦ä¹ å…¥é—¨ã€‹å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</h1><h2 id="ç¬¬äºŒç« -æ„ŸçŸ¥æœº">ç¬¬äºŒç«  æ„ŸçŸ¥æœº</h2><p>æœ¬ç« å°†ä»‹ç»æ„ŸçŸ¥æœºè¿™ä¸€ç®—æ³•ã€‚æ„ŸçŸ¥æœºæ˜¯ç”±ç¾å›½å­¦è€…Frank Rosenblattåœ¨1957å¹´æå‡ºæ¥çš„ã€‚ä¸ºä½•æˆ‘ä»¬ç°åœ¨è¿˜è¦å­¦ä¹ è¿™ä¸€å¾ˆä¹…ä»¥å‰å°±æœ‰çš„ç®—æ³•å‘¢ï¼Ÿå› ä¸ºæ„ŸçŸ¥æœºä¹Ÿæ˜¯ä½œä¸ºç¥ç»ç½‘ç»œï¼ˆæ·±åº¦å­¦ä¹ ï¼‰çš„èµ·æºçš„ç®—æ³•ã€‚å› æ­¤ï¼Œå­¦ä¹ æ„ŸçŸ¥æœºçš„æ„é€ ä¹Ÿå°±æ˜¯å­¦ä¹ é€šå‘ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ çš„ä¸€ç§é‡è¦æ€æƒ³ã€‚æœ¬ç« æˆ‘ä»¬å°†ç®€å•ä»‹ç»ä¸€ä¸‹æ„ŸçŸ¥æœºï¼Œå¹¶ç”¨æ„ŸçŸ¥æœºè§£å†³ä¸€äº›ç®€å•çš„é—®é¢˜ã€‚å¸Œæœ›å¤§å®¶èƒ½å’Œæˆ‘ä¸€èµ·é€šè¿‡è¿™ä¸ªè¿‡ç¨‹èƒ½ç†Ÿæ‚‰æ„ŸçŸ¥æœºã€‚</p><h3 id="2-1-ä»€ä¹ˆæ˜¯æ„ŸçŸ¥æœº">2.1 ä»€ä¹ˆæ˜¯æ„ŸçŸ¥æœº</h3><p>æ„ŸçŸ¥æœºæ¥æ”¶å¤šä¸ªè¾“å…¥ä¿¡å·ï¼Œè¾“å‡ºä¸€ä¸ªä¿¡å·ã€‚è¿™é‡Œæ‰€è¯´çš„â€œä¿¡å·â€å¯ä»¥æƒ³è±¡æˆç”µæµæˆ–æ²³æµé‚£æ ·å…·å¤‡â€œæµåŠ¨æ€§â€çš„ä¸œè¥¿ã€‚åƒç”µæµæµè¿‡å¯¼çº¿ï¼Œå‘å‰æ–¹è¾“é€ç”µå­ä¸€æ ·ï¼Œæ„ŸçŸ¥æœºçš„ä¿¡å·ä¹Ÿä¼šå½¢æˆæµï¼Œå‘å‰æ–¹è¾“é€ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œå’Œå®é™…çš„ç”µæµä¸åŒçš„æ˜¯ï¼Œæ„ŸçŸ¥æœºçš„ä¿¡å·åªæœ‰â€œæµ/ä¸æµâ€ï¼ˆ1/0ï¼‰ä¸¤ç§å–å€¼ã€‚åœ¨è®¡ç®—æœºç¼–ç¨‹é‡Œï¼Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„å°±æ˜¯boolå‹çš„trueå’Œfalseä¸¤ç§çŠ¶æ€ï¼Œæ­£å¥½å¯¹åº”æ„ŸçŸ¥æœºä¸¤ç§å–å€¼ä¿¡å·ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦é‡ç‚¹æŒæ¡çš„ã€‚</p><p>è€Œåœ¨æ„ŸçŸ¥æœºé‡Œè¿˜æœ‰ä¸€äº›æ¦‚å¿µéœ€è¦å»æŒæ¡ï¼Œä¾‹å¦‚ï¼šè¾“å…¥ä¿¡å·ã€è¾“å‡ºä¿¡å·ã€æƒé‡ã€é˜ˆå€¼ç­‰ã€‚æ¥ä¸‹æ¥æˆ‘å°†ä»¥ä¸€ä¸ªä¾‹å­è¯´æ˜ã€‚</p><p><img src="/images/2021-11-7-001.png" alt="upload successful"></p><p>å¦‚ä¸Šå›¾ï¼Œx1ã€x2æ˜¯<strong>è¾“å…¥ä¿¡å·</strong>ï¼Œyæ˜¯<strong>è¾“å‡ºä¿¡å·</strong>ï¼Œw1ã€w2æ˜¯<strong>æƒé‡</strong>ã€‚å›¾ä¸­çš„å¤§åœ†åœˆè¢«æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>ç¥ç»å…ƒ</strong>æˆ–è€…<strong>èŠ‚ç‚¹</strong>ã€‚å½“è¾“å…¥ä¿¡å·è¢«é€å¾€ç¥ç»å…ƒæ—¶ï¼Œä¼šè¢«åˆ†åˆ«ä¹˜ä¸Šå›ºå®šçš„<strong>æƒé‡</strong>ï¼ˆå³w1x1ã€w2x2ï¼‰ã€‚ç¥ç»å…ƒä¼šè®¡ç®—ä¼ é€è¿‡æ¥çš„ä¿¡å·æ€»å’Œï¼Œå½“è¿™ä¸ªæ€»å’Œè¶…è¿‡æŸä¸ªç‰¹å®šçš„ç•Œé™å€¼æ—¶ï¼Œä¼šè§¦å‘æŸç§å“åº”ä»è€Œè¾“å‡º1ï¼ˆtrueï¼‰ã€‚æˆ‘ä»¬æŠŠè¿™ç§å“åº”ç§°ä¹‹ä¸º<strong>ç¥ç»å…ƒè¢«æ¿€æ´»</strong>ã€‚è¿™é‡Œå°†è¿™ä¸ªç•Œé™å€¼ç§°ä¸º<strong>é˜ˆå€¼</strong>ï¼Œç”¨ç¬¦å·Î¸è¡¨ç¤ºã€‚</p><p>æˆ‘ä»¬ç”¨æ•°å­¦å…¬å¼æ¥è¡¨ç¤ºæ„ŸçŸ¥æœºçš„åŸç†å¯å¾—ä¸‹å¼ï¼š</p><p><img src="/images/2021-11-7-002.png" alt="upload successful"></p><p>æ„ŸçŸ¥æœºçš„å¤šä¸ªè¾“å…¥ä¿¡å·éƒ½æœ‰å„è‡ªå›ºæœ‰çš„æƒé‡ï¼Œè¿™äº›æƒé‡å‘æŒ¥ç€æ§åˆ¶å„ä¸ªä¿¡å·çš„é‡è¦æ€§çš„ä½œç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæƒé‡è¶Šå¤§ï¼Œå¯¹åº”è¯¥æƒé‡çš„ä¿¡å·çš„é‡è¦æ€§å°±è¶Šé«˜ã€‚</p><p>ä¸ªäººç†è§£ï¼šæƒé‡ç›¸å½“äºç”µæµé‡Œæ‰€è¯´çš„ç”µé˜»ã€‚ç”µé˜»æ˜¯å†³å®šç”µæµæµåŠ¨éš¾åº¦çš„å‚æ•°ï¼Œç”µé˜»è¶Šä½ï¼Œé€šè¿‡çš„ç”µæµå°±è¶Šå¤§ã€‚è€Œæ„ŸçŸ¥æœºçš„æƒé‡åˆ™æ˜¯å€¼è¶Šå¤§ï¼Œé€šè¿‡çš„ä¿¡å·å°±è¶Šå¤§ã€‚ä¸ç®¡æ˜¯ç”µé˜»è¿˜æ˜¯æƒé‡ï¼Œåœ¨æ§åˆ¶ä¿¡å·æµåŠ¨éš¾åº¦ï¼ˆæˆ–è€…æµåŠ¨å®¹æ˜“åº¦ï¼‰è¿™ä¸€ç‚¹ä¸Šçš„ä½œç”¨éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="2-2-ç®€å•é€»è¾‘ç”µè·¯">2.2 ç®€å•é€»è¾‘ç”µè·¯</h3><p>çœ‹åˆ°è¿™ï¼Œä¹Ÿè®¸æœ‰äººé—®äº†ï¼Œæˆ‘ä»¬ä¸æ˜¯å­¦æ„ŸçŸ¥æœºå˜›ï¼Ÿæ€ä¹ˆå¼€å§‹è®²é€»è¾‘ç”µè·¯äº†ï¼Ÿå…¶å®æ„ŸçŸ¥æœºçš„å·¥ä½œæ¨¡å¼è·Ÿé€»è¾‘ç”µè·¯å¾ˆç›¸ä¼¼ï¼Œä¾‹å¦‚å‰é¢è¯´çš„è™šæ‹Ÿæœºåªå­˜åœ¨ä¸¤ç§ä¿¡å·çŠ¶æ€ï¼ˆ0/1ï¼‰ï¼Œè€Œé€»è¾‘ç”µè·¯ä¸­ä¹Ÿæ˜¯åªæœ‰0/1ä¸¤ç§é€šç”µçŠ¶æ€ã€‚å¦å¤–è¿˜å¯ä»¥ç”¨æ„ŸçŸ¥æœºå®ç°é€»è¾‘ç”µè·¯ï¼Œä»è€Œå»ç†è§£æ„ŸçŸ¥æœºçš„åŸç†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¼€å§‹å§ã€‚</p><h4 id="2-2-1-ä¸é—¨">2.2.1 ä¸é—¨</h4><p>ç°åœ¨è®©æˆ‘ä»¬è€ƒè™‘ç”¨æ„ŸçŸ¥æœºæ¥è§£å†³ç®€å•çš„é€»è¾‘ç”µè·¯çš„é—®é¢˜ï¼ˆä¸é—¨ï¼‰ã€‚ä¸é—¨æ˜¯æœ‰ä¸¤ä¸ªè¾“å…¥å’Œä¸€ä¸ªè¾“å‡ºçš„é—¨ç”µè·¯ã€‚å¦‚ä¸‹å›¾çš„è¾“å…¥ä¿¡å·å’Œè¾“å‡ºä¿¡å·çš„çœŸå€¼è¡¨ã€‚</p><p><img src="/images/2021-11-7-003.png" alt="ä¸é—¨çœŸå€¼è¡¨"></p><p>ä¸‹é¢æˆ‘ä»¬ç”¨æ„ŸçŸ¥æœºçš„å½¢å¼æ¨¡æ‹Ÿä¸é—¨çš„é€»è¾‘æµç¨‹ã€‚æ ¹æ®ä¸Šé¢å·²æœ‰çš„x1,x2,yæ¥ç¡®å®šw1,w2, Î¸çš„å€¼ã€‚æœ¬è´¨ä¸Šæœ‰ç‚¹åƒæ•°å­¦è§£æ–¹ç¨‹çš„è¿‡ç¨‹ï¼Œå…¶å®ä¸æ˜¯åƒï¼Œå®ƒå°±æ˜¯ï¼æ‰€ä»¥æƒ³å­¦å¥½æ·±åº¦å­¦ä¹ ï¼Œæ•°å­¦æ˜¯å¿…ä¸å¯å°‘çš„åŠŸè¯¾ã€‚é‚£æˆ‘ä»¬æ€ä¹ˆè§£å‡ºw1,w2, Î¸çš„å€¼å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œæ»¡è¶³ä¸Šå›¾æ¡ä»¶çš„å‚æ•°çš„é€‰æ‹©æ–¹æ³•æœ‰æ— æ•°å¤šä¸ªã€‚æ¯”å¦‚ï¼Œå½“(w1, w2, Î¸) = (0.5, 0.5, 0.7) æ—¶ï¼Œå¯ä»¥æ»¡è¶³ä¸Šå›¾çš„æ¡ä»¶ã€‚æ­¤å¤–ï¼Œå½“(w1, w2, Î¸)ä¸º(0.5, 0.5, 0.8)æˆ–è€…(1.0, 1.0, 1.0)æ—¶ï¼ŒåŒæ ·ä¹Ÿæ»¡è¶³ä¸é—¨çš„æ¡ä»¶ã€‚è®¾å®šè¿™æ ·çš„å‚æ•°åï¼Œä»…å½“x1å’Œx2åŒæ—¶ä¸º1æ—¶ï¼Œä¿¡å·çš„åŠ æƒæ€»å’Œæ‰ä¼šè¶…è¿‡ç»™å®šçš„é˜ˆå€¼Î¸ã€‚</p><h4 id="2-2-2-ä¸éé—¨å’Œæˆ–é—¨">2.2.2 ä¸éé—¨å’Œæˆ–é—¨</h4><p>æ¥ç€ï¼Œæˆ‘ä»¬å†æ¥è€ƒè™‘ä¸€ä¸‹ä¸éé—¨ï¼ˆNAND gateï¼‰ã€‚ NANDæ˜¯Not ANDçš„æ„æ€ï¼Œä¸éé—¨å°±æ˜¯é¢ å€’äº†ä¸é—¨çš„è¾“å‡ºã€‚ç”¨çœŸå€¼è¡¨è¡¨ç¤ºçš„è¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»…å½“x1å’Œx2åŒæ—¶ä¸º1æ—¶è¾“å‡º0ï¼Œå…¶ä»–æ—¶å€™åˆ™è¾“å‡º1ã€‚é‚£ä¹ˆä¸éé—¨çš„å‚æ•°åˆå¯ä»¥æ˜¯ä»€ä¹ˆæ ·çš„ç»„åˆå‘¢ï¼Ÿ</p><p><img src="/images/2021-11-7-004.png" alt="ä¸éé—¨çœŸå€¼è¡¨"></p><p>è¦è¡¨ç¤ºä¸éé—¨ï¼Œå¯ä»¥ç”¨(w1, w2, Î¸) = (âˆ’0.5, âˆ’0.5, âˆ’0.7)è¿™æ ·çš„ç»„åˆï¼ˆå…¶ä»–çš„ç»„åˆä¹Ÿæ˜¯æ— é™å­˜åœ¨çš„ï¼‰ã€‚å®é™…ä¸Šï¼Œåªè¦æŠŠå®ç°ä¸é—¨çš„å‚æ•°å€¼çš„ç¬¦å·å–åï¼Œå°±å¯ä»¥å®ç°ä¸éé—¨ã€‚</p><p>æ¥ä¸‹æ¥åœ¨çœ‹ä¸€ä¸‹æˆ–é—¨çš„çœŸå€¼è¡¨ï¼Œå¹¶è®¾ç½®å‚æ•°ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/2021-11-7-005.png" alt="æˆ–é—¨çœŸå€¼è¡¨"></p><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ä½¿ç”¨æ„ŸçŸ¥æœºå¯ä»¥è¡¨ç¤ºä¸é—¨ã€ä¸éé—¨ã€æˆ–é—¨çš„é€»è¾‘ç”µè·¯ã€‚è¿™é‡Œé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼šä¸é—¨ã€ä¸éé—¨ã€æˆ–é—¨çš„æ„ŸçŸ¥æœºæ„é€ æ˜¯ä¸€æ ·çš„ã€‚å®é™…ä¸Šï¼Œ 3ä¸ªé—¨ç”µè·¯åªæœ‰å‚æ•°çš„å€¼ï¼ˆæƒé‡å’Œé˜ˆå€¼ï¼‰ä¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸åŒæ„é€ çš„æ„ŸçŸ¥æœºï¼Œåªéœ€é€šè¿‡é€‚å½“åœ°è°ƒæ•´å‚æ•°çš„å€¼ï¼Œå°±å¯ä»¥åƒâ€œå˜è‰²é¾™æ¼”å‘˜â€è¡¨æ¼”ä¸åŒçš„è§’è‰²ä¸€æ ·ï¼Œå˜èº«ä¸ºä¸é—¨ã€ä¸éé—¨ã€æˆ–é—¨ã€‚</p><p>ä¸ªäººç†è§£ï¼šåšæ·±åº¦å­¦ä¹ ç®—æ³•çš„ï¼Œåœ¨è¡Œä¸šå†…æœ‰å‡ å¤§åˆ†ç±»ï¼Œæœ€é¡¶å±‚æ˜¯é€ è½®å­çš„ï¼ˆå†™ç®—æ³•æ¨¡å‹ï¼‰ï¼Œå¾€ä¸‹æ˜¯æ”¹è½®å­çš„ï¼ˆä¼˜åŒ–ç®—æ³•æ¨¡å‹ï¼‰ï¼Œåœ¨å¾€ä¸‹å°±æ˜¯ç”¨è½®å­çš„ï¼ˆè°ƒå‚å·¥ç¨‹å¸ˆï¼‰ã€‚ä¸Šä¸¤å±‚æ˜¯çœŸå¤§ä½¬ï¼Œä½†å¤§å¤šæ•°äººéƒ½æ˜¯åè€…çš„è°ƒå‚å·¥ç¨‹å¸ˆã€‚è¿™é‡Œå†³å®šæ„ŸçŸ¥æœºå‚æ•°çš„å¹¶ä¸æ˜¯è®¡ç®—æœºï¼Œè€Œæ˜¯æˆ‘ä»¬äººã€‚æˆ‘ä»¬çœ‹ç€çœŸå€¼è¡¨è¿™ç§â€œè®­ç»ƒæ•°æ®â€ï¼Œäººå·¥è€ƒè™‘ï¼ˆæƒ³åˆ°ï¼‰äº†å‚æ•°çš„å€¼ã€‚è€Œæœºå™¨å­¦ä¹ çš„è¯¾é¢˜å°±æ˜¯å°†è¿™ä¸ªå†³å®šå‚æ•°å€¼çš„å·¥ä½œäº¤ç”±è®¡ç®—æœºè‡ªåŠ¨è¿›è¡Œã€‚ å­¦ä¹ æ˜¯ç¡®å®šåˆé€‚çš„å‚æ•°çš„è¿‡ç¨‹ï¼Œè€Œäººè¦åšçš„æ˜¯æ€è€ƒæ„ŸçŸ¥æœºçš„æ„é€ ï¼ˆæ¨¡å‹ï¼‰ï¼Œå¹¶æŠŠè®­ç»ƒæ•°æ®äº¤ç»™è®¡ç®—æœºã€‚</p><h3 id="2-3-æ„ŸçŸ¥æœºçš„å®ç°">2.3 æ„ŸçŸ¥æœºçš„å®ç°</h3><h4 id="2-3-1-ç®€å•çš„å®ç°">2.3.1 ç®€å•çš„å®ç°</h4><h4 id="2-3-2-å¯¼å…¥æƒé‡å’Œåç½®">2.3.2 å¯¼å…¥æƒé‡å’Œåç½®</h4><h4 id="2-3-3-ä½¿ç”¨æƒé‡å’Œåç½®çš„å®ç°">2.3.3 ä½¿ç”¨æƒé‡å’Œåç½®çš„å®ç°</h4><h3 id="2-4-æ„ŸçŸ¥æœºçš„å±€é™æ€§">2.4 æ„ŸçŸ¥æœºçš„å±€é™æ€§</h3><h4 id="2-4-1-å¼‚æˆ–é—¨">2.4.1 å¼‚æˆ–é—¨</h4><h4 id="2-4-2-çº¿æ€§å’Œéçº¿æ€§">2.4.2 çº¿æ€§å’Œéçº¿æ€§</h4><h3 id="2-5-å¤šå±‚æ„ŸçŸ¥æœº">2.5 å¤šå±‚æ„ŸçŸ¥æœº</h3><h4 id="2-5-1-å·²æœ‰é—¨ç”µè·¯ç»„åˆ">2.5.1 å·²æœ‰é—¨ç”µè·¯ç»„åˆ</h4><h4 id="2-5-2-å¼‚æˆ–é—¨çš„å®ç°">2.5.2 å¼‚æˆ–é—¨çš„å®ç°</h4><h3 id="2-6-ä»ä¸éé—¨åˆ°è®¡ç®—æœº">2.6 ä»ä¸éé—¨åˆ°è®¡ç®—æœº</h3><h3 id="æ€»ç»“">æ€»ç»“</h3>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæ·±åº¦å­¦ä¹ å…¥é—¨ã€‹å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
      <link href="/2021/10/22/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2021/10/22/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1>ã€Šæ·±åº¦å­¦ä¹ å…¥é—¨ã€‹å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</h1><h2 id="ç¬¬ä¸€ç« -Pythonå…¥é—¨">ç¬¬ä¸€ç«  Pythonå…¥é—¨</h2><p>ç¬¬ä¸€æ¬¡æ¥è§¦pythonæ˜¯åœ¨æˆ‘å¤§ä¸€çš„æ—¶å€™ï¼Œé‚£æ—¶å€™pythonå¾ˆç«ï¼ŒåŒæ—¶ç«çš„è¿˜æœ‰å¤§æ•°æ®ã€äº‘è®¡ç®—ã€äººå·¥æ™ºèƒ½ã€‚ç°åœ¨ï¼Œå¤§æ•°æ®ï¼Œäº‘è®¡ç®—çš„å‘¼å£°æ¸æ¸è¤ªå»ï¼Œäººå·¥æ™ºèƒ½å´è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„ç«çƒ­ã€‚åŒæ—¶ï¼Œä¹Ÿè®©pythonæˆä¸ºäº†æœ€å…·æœ‰äººæ°”çš„ç¼–ç¨‹è¯­è¨€ã€‚</p><h3 id="1-1-ä»€ä¹ˆæ˜¯Python">1.1 ä»€ä¹ˆæ˜¯Python</h3><p>ä»€ä¹ˆæ˜¯pythonï¼Ÿpythonæ˜¯ä¸€é—¨ç®€å•ã€æ˜“è¯»ã€æ˜“è®°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œä¸”æ˜¯å¼€æºçš„ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ã€‚ä¸Šé¢è¿™å¥è¯æ¥æºäºæˆ‘æ‰‹å¤´çš„ä¸€æœ¬ä¹¦ã€Šæ·±åº¦å­¦ä¹ å…¥é—¨ã€‹ã€‚å¯¹äºè¿™å¥è¯ï¼Œæˆ‘è¿˜æ˜¯æŒºæƒ³åæ§½çš„ã€‚æˆ‘è‡ªå­¦pythonä¹Ÿæœ‰å°†è¿‘ä¸€å¹´å¤šäº†ï¼Œç®€å•æ˜¯å…¥é—¨ç®€å•ï¼Œæ˜“è¯»æ˜¯å°ä»£ç æ®µæ˜“è¯»ï¼Œåœ¨å¤§é‡ä»£ç ä½“ä¸­ï¼Œpythonçš„ç¼©è¿›æ’ç‰ˆçœŸçš„å¾ˆéš¾å»åˆ†æ¸…ä»£ç å—ã€‚å®ƒä¸åƒCè¯­è¨€ä¸€æ ·æœ‰ä¸€ä¸ªå¤§æ‹¬å·æ‹¬èµ·æ¥ï¼Œåœ¨åºå¤§çš„ä»£ç ä½“ä¸­å¯ä»¥ä¸€ä¸€å¯¹åº”ã€‚è€Œpythonå‘¢ï¼Ÿæ˜¯ä»¥ç¼©è¿›çš„å½¢å¼ï¼Œéš¾ä»¥å»å½¢æˆä¸€ä¸€å¯¹åº”å…³ç³»ã€‚æ˜“è®°æ˜¯æ˜“è®°ï¼Œå› ä¸ºåº“æ˜¯çœŸçš„å¤šï¼Œè¢«åˆ«äººå°è£…å¥½çš„åº“ä½ ç›´æ¥å»è°ƒç”¨ï¼Œæ ¹æœ¬ä¸ç”¨å»æ€è€ƒå®ƒçš„åŸç†ï¼Œåªè¦ä¼šç”¨ä½ å°±èƒ½å®Œæˆä½ çš„ä»»åŠ¡ã€‚æ‰€ä»¥ï¼Œé€ æˆäº†å…¥é—¨ç®€å•ï¼Œç²¾é€šå¾ˆéš¾ã€‚ä»¥ä¸Šä¾¿æ˜¯æˆ‘å¯¹pythonçš„ç†è§£å’Œè¯„ä»·ï¼Œä¸‹é¢è¿›å…¥æ­£é¢˜ã€‚</p><h3 id="1-2-Pythonçš„å®‰è£…">1.2 Pythonçš„å®‰è£…</h3><p>æƒ³ä½¿ç”¨pythonå°±å¿…é¡»è¦å®‰è£…pythonçš„å¼€å‘ç¯å¢ƒï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„æ˜¯åœ¨ç”µè„‘ï¼ˆwindowsæˆ–linuxï¼‰ä¸Šã€‚å› ä¸ºæ‰‹æœºçš„å®‰å“æ˜¯åŸºäºlinuxå†…æ ¸çš„å¼€å‘çš„ï¼Œæ‰€ä»¥åœ¨ä¸€äº›ç‰¹å®šçš„è½¯ä»¶ä¸Šä¹Ÿæ˜¯å¯ä»¥åšpythonçš„å¼€å‘ã€‚å¦‚Termux,QPython3Hç­‰appï¼Œéƒ½å¯ä»¥åœ¨æ‰‹æœºä¸Šä½¿ç”¨å’Œå¼€å‘pythonçš„ç›¸å…³é¡¹ç›®ã€‚</p><p>å…·ä½“å®‰è£…æ­¥éª¤è¯·ç™¾åº¦ï¼Œæœ‰å¾ˆå¤šå›¾æ–‡æ•™ç¨‹ï¼Œæˆ‘åœ¨è¿™é‡Œå°±ä¸å†æ¬¡æè¿°äº†ã€‚</p><h4 id="1-2-1-Pythonçš„ç‰ˆæœ¬">1.2.1 Pythonçš„ç‰ˆæœ¬</h4><p>Pythonæœ‰python2å’Œpython3ä¸¤ä¸ªç‰ˆæœ¬ï¼Œç°é˜¶æ®µpython2åŸºæœ¬ä¸Šå·²ç»è¢«é—å¼ƒäº†ï¼Œä½†è¿˜æ˜¯æœ‰ä¸å°‘çš„äººå»ä½¿ç”¨ã€‚å¾ˆå¥‡æ€ªçš„æ˜¯pythonè·Ÿåˆ«çš„ç¼–ç¨‹è¯­è¨€ä¸ä¸€æ ·ã€‚å®ƒå¯¹äºç‰ˆæœ¬é€‚é…ä¸Šæ²¡æœ‰åˆ«çš„ç¼–ç¨‹è¯­è¨€å¥½ã€‚ä¾‹å¦‚python2çš„ä¸€äº›è¯­æ³•è·Ÿpython3å°±ä¸ä¸€æ ·ã€‚ä½ ç”¨python3å†™çš„ä»£ç å°±ä¸èƒ½è¢«python2æ‰§è¡Œï¼Œæ²¡æœ‰å‘åå…¼å®¹æ€§ã€‚æ‰€ä»¥ï¼Œè¿˜æ˜¯ç”¨æœ€æ–°çš„ç‰ˆæœ¬python3æ¥å­¦ä¹ æ·±åº¦å­¦ä¹ å§ã€‚</p><h4 id="1-2-2-ä½¿ç”¨çš„å¤–éƒ¨åº“">1.2.2 ä½¿ç”¨çš„å¤–éƒ¨åº“</h4><p>å‰é¢æˆ‘è¯´è¿‡ï¼Œpythonå¾ˆç®€å•ï¼Œæ˜“è®°æ˜¯å› ä¸ºå®ƒæœ‰ä¸€ä¸ªæå…¶åºå¤§çš„å¤–éƒ¨åº“ã€‚è®¸è®¸å¤šå¤šçš„å¤§ä½¬å°†ä¸€äº›åŠŸèƒ½å°è£…æˆå¤–éƒ¨åº“ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨å®ƒç•™ç»™æˆ‘ä»¬çš„æ¥å£å°±èƒ½å¾ˆå¿«çš„å®ç°æŸç§åŠŸèƒ½ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³ç²¾é€špythonï¼Œå°±ä¸è¦è¿‡å¤šçš„ä½¿ç”¨å¤–éƒ¨åº“ï¼Œå°½å¯èƒ½è‡ªå·±å»å®ç°ç›¸å…³çš„ä¸€äº›åŠŸèƒ½ã€‚</p><p>å…³äºå¤–éƒ¨åº“çš„å®‰è£…ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡pipè¿™ä¸ªåŒ…ç®¡ç†å™¨å»å®‰è£…ã€‚ä½¿ç”¨æ–¹å¼å°±æ˜¯åœ¨å‘½ä»¤çª—å£è¾“å…¥</p><pre><code class="hljs">pip install ä½ è¦å®‰è£…çš„å¤–éƒ¨åº“å</code></pre><p>ç„¶åç­‰å¾…å®‰è£…å³å¯ã€‚</p><p>ä¾‹å¦‚å®‰è£…æˆ‘ä»¬è¦ä½¿ç”¨çš„NumPyåº“ã€Matplotlibåº“ç­‰ï¼Œå¦‚ä¸‹ï¼š</p><pre><code class="hljs">pip install numpy,matplotlib</code></pre><p>å›è½¦å³å¯å®‰è£…ã€‚</p><h3 id="1-3-Pythonè§£é‡Šå™¨">1.3 Pythonè§£é‡Šå™¨</h3><p>pythonå®‰è£…åï¼Œéœ€è¦å…ˆç¡®è®¤ä¸€ä¸‹ä½ çš„pythonçš„ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®ã€‚æ‰“å¼€å‘½ä»¤æç¤ºç¬¦çª—å£ï¼Œè¾“å…¥ï¼š</p><pre><code class="hljs">python --version</code></pre><p>å³å¯çœ‹åˆ°ä½ å®‰è£…çš„pythonç‰ˆæœ¬å·ã€‚</p><p>ä»€ä¹ˆæ˜¯è§£æå™¨?</p><p>è§£æå™¨å°±åƒæ˜¯ä¸¤ä¸ªäººå¯¹è¯ä¸€æ ·ï¼Œä½ ä¸€å¥ï¼Œæˆ‘ä¸€å¥çš„å¯¹è¯æ¨¡å¼ã€‚ä¾‹å¦‚æˆ‘é—®ä½ 1+1=ï¼Ÿï¼Œç„¶åä½ ä¼šå›ç­”æˆ‘ç­‰äº2.pythonå°±æ˜¯è¿™æ ·ï¼Œä¸éœ€è¦ç¼–è¯‘ï¼Œå°±å¯ä»¥ç›´æ¥è·Ÿä½ äº’åŠ¨ã€‚è¿™å°±æ˜¯å¯¹è¯å¼ï¼ˆäº¤äº’å¼ï¼‰çš„ç¼–ç¨‹ã€‚</p><p>å¦‚ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; 1+12</code></pre><h4 id="1-3-1-ç®—æœ¯è®¡ç®—">1.3.1 ç®—æœ¯è®¡ç®—</h4><p>ç®—æœ¯è®¡ç®—åŠ æ³•å’Œå‡æ³•å¯ä»¥ç›´æ¥å†™æ•°å­¦ç®—æœ¯è®¡ç®—è¿›è¡Œï¼Œå¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; 1+1 //+æ˜¯åŠ æ³•2&gt;&gt;&gt; 2-1 //-æ˜¯å‡æ³•1&gt;&gt;&gt; 4/2 // /æ˜¯é™¤æ³•2.0&gt;&gt;&gt; 2*2 // *æ˜¯ä¹˜æ³•4&gt;&gt;&gt; 2**2 // **æ˜¯ä¹˜æ–¹4</code></pre><h4 id="1-3-2-æ•°æ®ç±»å‹">1.3.2 æ•°æ®ç±»å‹</h4><p>ç¼–ç¨‹é‡Œçš„å„ç§æ•°æ®éƒ½æ˜¯æœ‰ç±»å‹çš„ï¼Œæœ‰åˆ©äºå¯¹æ•°æ®è¿›è¡Œåˆ†ç±»ã€‚ä½†æ•°æ®ç±»å‹è¿™ä¸€æ¦‚å¿µåœ¨pythoné‡Œæˆ‘è§‰å¾—æ˜¯ä¸€ä¸ªå‘ã€‚å› ä¸ºä½ ä¸ç”¨åƒCè¯­è¨€é‚£æ ·æå‰å®šä¹‰å¥½æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯pythonè‡ªå·±è¯†åˆ«å¹¶å®šä¹‰æ•°æ®ç±»å‹ã€‚æ‰€ä»¥ï¼Œåœ¨å†™pythoné¡¹ç›®æ—¶ï¼Œæœ‰æ—¶å€™ä¼šå› ä¸ºæ•°æ®ç±»å‹å‡ºç°ä¸€äº›bugï¼Œä½†ä½ æœ‰æ—¶å€™è¿˜çœŸæ— æ³•åˆ†è¾¨pythonç»™ä½ å®šä¹‰çš„å˜é‡åˆ†é…äº†ä»€ä¹ˆæ•°æ®ç±»å‹ï¼Œå¾€å¾€éœ€è¦å¼ºåˆ¶è½¬æ¢å˜æˆè‡ªå·±æƒ³è¦çš„æ•°æ®ç±»å‹ã€‚</p><p>æ•°æ®ç±»å‹æœ‰å“ªäº›å‘¢ï¼Ÿ</p><p>å¸¸ç”¨çš„æ•°æ®ç±»å‹æœ‰ï¼šæ•´æ•°å‹ï¼Œæµ®ç‚¹å‹ï¼ˆå°æ•°ï¼‰ï¼Œå­—ç¬¦å‹å’Œå­—ç¬¦ä¸²å‹ã€‚</p><p>ä½ å¦‚ä½•å»åˆ¤æ–­ä½ å®šä¹‰çš„å˜é‡æˆ–è€…å¸¸é‡çš„æ•°æ®ç±»å‹å‘¢ï¼Ÿ</p><p>åœ¨pythonä¸­æä¾›äº†type()å‡½æ•°æ¥æŸ¥çœ‹æ•°æ®ç±»å‹</p><p>ä¾‹å¦‚ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; type(10)&lt;class 'int'&gt;&gt;&gt;&gt; type(2.66)&lt;class 'float'&gt;&gt;&gt;&gt; type(&quot;hello&quot;)&lt;class 'str'&gt;&gt;&gt;&gt; type('a')&lt;class 'str'&gt;</code></pre><h4 id="1-3-3-å˜é‡">1.3.3 å˜é‡</h4><p>å˜é‡ï¼Œçœ‹åå­—å°±å¯ä»¥ç†è§£ï¼Œæ˜¯ä¸€ä¸ªå˜åŒ–çš„é‡ã€‚æœ¬è´¨ä¸Šä¸æ˜¯ç‰¹å®šçš„ä¸€ä¸ªæ•°ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘é€šå¸¸æŠŠå®ƒæ¯”ä½œæˆä¸€ä¸ªç›’å­ï¼Œè¿™ä¸ªç›’å­æ˜¯æœ‰å±æ€§çš„ï¼Œä¹Ÿå°±æ˜¯æ•°æ®ç±»å‹ã€‚ä¹Ÿå°±æ˜¯ç¬¦åˆæ”¾å…¥ç›’å­çš„æ¡ä»¶ï¼ˆæ•°æ®ç±»å‹ï¼‰çš„æ•°æ®æ‰èƒ½æ”¾å…¥å…¶ä¸­ã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; x = 10&gt;&gt;&gt; print(x)10</code></pre><p>å˜é‡ä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œæ•°å­¦è¿ç®—çš„ï¼Œä¾‹å¦‚ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; x = x + 1&gt;&gt;&gt; print(x)11</code></pre><p>printæ˜¯pythonçš„è¾“å‡ºæ‰“å°å‡½æ•°ï¼Œå°±æ˜¯æŠŠæ•°æ®å‘ˆç°åœ¨ä½ çš„ç”µè„‘å±å¹•ä¸Šçš„å‡½æ•°ã€‚</p><h4 id="1-3-4-åˆ—è¡¨">1.3.4 åˆ—è¡¨</h4><p>åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œé™¤äº†æˆ‘ä»¬ç”¨çš„å•ä¸€æ•°å€¼ï¼Œå¾€å¾€è¿˜éœ€è¦æ±‡æ€»çš„æ•°æ®ã€‚è¿™æ—¶å€™å°±éœ€è¦å¼•å…¥åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰çš„æ¦‚å¿µäº†ã€‚å¦‚ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; a = [1,2,3,4,5] #ç”Ÿæˆåˆ—è¡¨&gt;&gt;&gt; print(a) #æ‰“å°åˆ—è¡¨[1, 2, 3, 4, 5]</code></pre><p>é™¤æ­¤ä¹‹å¤–è¿˜è¦å¯¹åˆ—è¡¨æœ‰ä¸€ç³»åˆ—æ•°æ®æ“ä½œï¼Œå¦‚ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; len(a) #è·å–åˆ—è¡¨é•¿åº¦5&gt;&gt;&gt; a[0] #è®¿é—®åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ 1&gt;&gt;&gt; a[4] #è®¿é—®åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ 5&gt;&gt;&gt; a[4] = 100 # å¯¹åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ é‡æ–°èµ‹å€¼&gt;&gt;&gt; print(a)[1, 2, 3, 4, 100]</code></pre><p>è¦æ³¨æ„çš„æ˜¯åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¼€å§‹éƒ½æ˜¯ä»¥0ä¸ºå¼€å§‹ï¼Œå¹¶ä¸æ˜¯1ã€‚</p><p>è¿™äº›æ•°æ®å¤„ç†å¾€å¾€è¿˜æ˜¯ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜è¦å¼•å…¥â€œæ•°æ®åˆ‡ç‰‡â€ã€‚è¿™ä¸ªè¯ä¹Ÿæ˜¯æˆ‘è‡ªå·±èµ·çš„ï¼ˆå¥½åƒæœ‰äº›ä¹¦ä¹Ÿæ˜¯è¿™ä¹ˆå†™çš„ï¼‰ï¼Œå°±åƒåˆ‡ç‰‡ä¸€æ ·ï¼Œåˆ‡ä¸‹æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ç‰‡æ®µã€‚ç”¨æ³•å¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; print(a)[1, 2, 3, 4, 100]&gt;&gt;&gt; a[0:2] #æ³¨æ„ï¼Œè¯¥åˆ‡ç‰‡ä»0åˆ°2ï¼Œä½†å¹¶ä¸åŒ…æ‹¬2ã€‚[1, 2]&gt;&gt;&gt; a[1:] #ä»1å¼€å§‹å¾€åæ‰€æœ‰[2, 3, 4, 100]&gt;&gt;&gt; a[:3] #ä»0å¼€å§‹åˆ°3ï¼Œä¸åŒ…æ‹¬3[1, 2, 3]&gt;&gt;&gt; a[:-1] # ä»0å¼€å§‹åˆ°æœ€åä¸€ä¸ªå…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´ [1, 2, 3, 4]&gt;&gt;&gt; a[:-2] # åŒä¸Šï¼Œæœ€åä¸€ä¸ªå…ƒç´ çš„å‰ä¸¤ä¸ªå…ƒç´ [1, 2, 3]</code></pre><h4 id="1-3-5-å­—å…¸">1.3.5 å­—å…¸</h4><p>å­—å…¸ï¼Œå°±åƒå­—å…¸ä¸€æ ·ï¼Œæ˜¯ä¸€ç§ç´¢å¼•çš„æ–¹æ³•ã€‚åƒæ–°åå­—å…¸ä¸€æ ·å¯¹åº”çš„å•è¯ä¸å¯¹åº”çš„å«ä¹‰å…³è”èµ·æ¥ã€‚ä¾‹å¦‚ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; me = &#123;&quot;æˆ‘çš„åå­—&quot;:&quot;è¿æ€é‘«&quot;&#125;&gt;&gt;&gt; me[&quot;æˆ‘çš„åå­—&quot;]'è¿æ€é‘«'</code></pre><h4 id="1-3-6-å¸ƒå°”å‹">1.3.6 å¸ƒå°”å‹</h4><p>å¸ƒå°”å‹ï¼Œè¿™æ˜¯æˆ‘ä»¬å­¦ä¹ æ·±åº¦å­¦ä¹ æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ¦‚å¿µã€‚boolå‹æ˜¯åªæœ‰ä¸¤ç§çŠ¶æ€ï¼šTrueå’ŒFalseã€‚åé¢è¦å­¦çš„æ„ŸçŸ¥æœºå°±è¦ç”¨åˆ°å¤§é‡çš„boolå‹ã€‚</p><p>è€Œå¯¹äºboolå‹çš„è¿ç®—åŒ…æ‹¬ï¼šandã€orã€notè¿™äº›é€»è¾‘è¿ç®—ç¬¦ã€‚å¦‚æœæ¶‰åŠåˆ°æ•°å€¼åˆ™æœ‰ï¼š+ã€-ã€*ã€/ç­‰ã€‚</p><p>å®ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; hungry = True # é¥¿äº†ï¼Ÿ é¥¿&gt;&gt;&gt; sleepy = False #å›°äº†ï¼Ÿ ä¸å›°&gt;&gt;&gt; type(hungry)&lt;class 'bool'&gt;&gt;&gt;&gt; not hungry # ä¸é¥¿False&gt;&gt;&gt; hungry and sleepy #é¥¿å¹¶ä¸”å›°False&gt;&gt;&gt; hungry or sleepy #é¥¿æˆ–è€…å›°True</code></pre><h4 id="1-3-7-ifè¯­å¥">1.3.7 ifè¯­å¥</h4><p>ifè¯­å¥æ˜¯åˆ¤æ–­è¯­å¥ï¼Œç°åœ¨çš„æµè¡Œè¯­è¨€ä¸­éƒ½æœ‰å®ƒçš„èº«å½±ã€‚æ— è®ºCï¼ŒC++ï¼ŒJavaã€JavaScriptç­‰éƒ½æœ‰ifè¯­å¥ï¼Œç”¨æ³•ä¹Ÿéƒ½å¤§ç›¸å¾„åº­ã€‚å¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; hungry = True&gt;&gt;&gt; if hungry:print(&quot;é¥¿äº†&quot;)é¥¿äº†</code></pre><p>éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œpythonçš„ä»£ç å—æ ¼å¼æ˜¯é€šè¿‡ç¼©è¿›çš„å½¢å¼ï¼ˆ4ä¸ªç©ºæ ¼ï¼‰ã€‚ä¸ªäººä¸å¤ªå–œæ¬¢è¿™ç§å½¢å¼ï¼Œä¸å®¹æ˜“çœ‹ï¼Œä½†æ˜¯æ²¡åŠæ³•ï¼Œè°è®©å’±æ²¡èƒ½åŠ›å¼€å‘ç¼–ç¨‹è¯­è¨€å‘¢ï¼Ÿ</p><h4 id="1-3-8-forè¯­å¥">1.3.8 forè¯­å¥</h4><p>forè¯­å¥æ˜¯å¾ªç¯è¯­å¥ï¼ŒåŒifè¯­å¥ä¸€æ ·ï¼Œå„å¤§ä¸»æµè¯­è¨€ä¹Ÿéƒ½æœ‰å®ƒçš„èº«å½±ï¼Œä¸”ç”¨æ³•å¤§ç›¸å¾„åº­ã€‚ä¾‹å¦‚ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; for i in [1,2,3]:print(i)123</code></pre><p>è¯¥è¯­å¥çš„æ„æ€æ˜¯å¾ªç¯æ‰“å°åˆ—è¡¨å…ƒç´ ã€‚forè¯­æ³•é€šå¸¸ç”¨forâ€¦inâ€¦:çš„è¯­å¥ç»“æ„ï¼Œiæ˜¯ç”¨æ¥å­˜æ”¾æ¯æ¬¡å¾ªç¯æ•°æ®çš„ç›’å­ï¼ˆå˜é‡ï¼‰ã€‚</p><h4 id="1-3-9-å‡½æ•°">1.3.9 å‡½æ•°</h4><p>æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€éƒ½æœ‰å‡½æ•°çš„æ¦‚å¿µï¼Œä¸ºäº†æ–¹ä¾¿å¯¹æ•°æ®çš„å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠä¸€è¿ä¸²çš„å¤„ç†å®šä¹‰æˆå‡½æ•°ã€‚å³å¦‚ä¸‹çš„æ‰“å°helloçš„å‡½æ•°ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; def hello():...     print(&quot;hello&quot;)...&gt;&gt;&gt; hello()hello</code></pre><p>hello()å°±æ˜¯å¯¹è¯¥å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œå‡½æ•°é™¤äº†å¯ä»¥è¢«è°ƒç”¨ï¼Œè¿˜å¯ä»¥è¿›è¡Œä¼ å‚ã€‚å¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; def hello(s): # sæ˜¯å®šä¹‰çš„å˜é‡...     print(&quot;hello&quot; + s)...&gt;&gt;&gt; hello(&quot;è¿æ€é‘«&quot;)helloè¿æ€é‘«</code></pre><p>+å·åœ¨pythonä¸­é™¤äº†æ˜¯ç”¨äºç®—æœ¯è¿ç®—ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ç”¨äºæ‹¼æ¥å­—ç¬¦ä¸²ã€‚äºŒè€…çš„åŒºåˆ«åœ¨äºæ•°æ®ç±»å‹çš„ä¸åŒï¼Œ+å·çš„ç”¨æ³•æˆ–ä½“ç°çš„åŠŸèƒ½ä¸åŒã€‚</p><h3 id="1-4-Pythonè„šæœ¬æ–‡ä»¶">1.4 Pythonè„šæœ¬æ–‡ä»¶</h3><p>pythoné™¤äº†è§£é‡Šå™¨ç¼–ç¨‹å¤–ï¼Œä¹Ÿæ”¯æŒä¿å­˜æˆè„šæœ¬æ–‡ä»¶ã€‚å› ä¸ºä»¥å¯¹è¯çš„å½¢å¼ä¸èƒ½æ›´å¥½çš„å»ä¿ç•™å¯¹è¯å†…å®¹ï¼Œæ‰€ä»¥äººä»¬å‘æ˜äº†çº¸å¼ ã€‚åŒæ ·çš„ï¼Œè¿™ä¸ªè„šæœ¬æ–‡ä»¶çš„å­˜åœ¨å°±åƒæ˜¯ä¸€å¼ çº¸ï¼Œä½ å¯ä»¥æŠŠæƒ³å¯¹pythonè¯´çš„è¯åŒä¸€å†™åœ¨çº¸ä¸Šï¼Œç„¶åpythonæŒ‰ä½ è¯´çš„åšã€‚</p><p>emmmmmâ€¦æˆ‘å–œæ¬¢è®¡ç®—æœºçš„åŸå› ä¹Ÿåœ¨å…¶ä¸­ã€‚è®¡ç®—æœºå°±åƒæ˜¯ä½ å¿ å®çš„å¥´ä»†ä¸€æ ·ï¼Œåªè¦ä½ è¯´çš„å®ƒèƒ½å¬æ‡‚ï¼Œå®ƒå°±ä¼šæ¯«æ— ç½®ç–‘çš„å»åšã€‚å°±åƒçš‡å¸å‘½ä»¤è‡£å­ï¼Œè€Œè¿™ä¸ªè‡£å­ä¸ä¼šåæŠ—ä¸”éå¸¸å¬è¯ã€‚åœ¨linuxç³»ç»Ÿä¸‹ï¼Œä½ è¦æ˜¯çœ‹ç³»ç»Ÿä¸é¡ºçœ¼ï¼Œå®Œå…¨å¯ä»¥å‘½ä»¤å®ƒè‡ªæ€ï¼Œå¦‚ï¼š</p><pre><code class="hljs">rm -rf /</code></pre><p>ç¥ä½ å¥½è¿ï¼</p><h4 id="1-4-1-ä¿å­˜ä¸ºæ–‡ä»¶">1.4.1 ä¿å­˜ä¸ºæ–‡ä»¶</h4><p>å¦‚ä½•ä¿å­˜ä¸ºpythonçš„è„šæœ¬æ–‡ä»¶å‘¢ï¼Ÿå…¶å®æœ‰å¾ˆå¤šå¾ˆå¤šåŠæ³•ï¼Œæœ€ç®€å•çš„å°±æ˜¯ç”¨è®°äº‹æœ¬ï¼Œå†™ä¸€äº›pythonä»£ç ï¼Œç„¶åæŠŠæ–‡ä»¶çš„åç¼€æ”¹æˆ.pyå³å¯ã€‚</p><p>å¦‚ä½•è¿è¡Œå®ƒå‘¢ï¼Ÿä¸ç®¡æ˜¯windowsè¿˜æ˜¯linuxåªè¦å®‰è£…å¥½pythonçš„ç¯å¢ƒï¼Œåœ¨ç»ˆç«¯è¾“å…¥</p><pre><code class="hljs">python xxx.py</code></pre><p>å³å¯è¿è¡Œä½ å†™çš„è„šæœ¬æ–‡ä»¶ã€‚</p><h4 id="1-4-2-ç±»">1.4.2 ç±»</h4><p>ä»€ä¹ˆæ˜¯ç±»ï¼Ÿæœ‰è¯´çš„å¥½ï¼Œå«ç‰©ä»¥ç±»èšï¼Œäººä»¥ç¾¤åˆ†ã€‚è¿™ä¸ªç±»ä¾¿æ˜¯æˆ‘ä»¬å¯¹æ•°æ®å’Œå¤„ç†æ•°æ®çš„æ–¹æ³•é›†ç»“åœ¨ä¸€èµ·çš„å…±åŒä½“ï¼ˆæˆ–è€…å«å®ƒç±»å‹ï¼‰ã€‚å¦‚æˆ‘ä»¬å‰é¢ç”¨åˆ°çš„intå’Œstrè¿™äº›æ•°æ®ç±»å‹ï¼Œå®ƒä»¬æ˜¯pythonå†…ç½®çš„æ•°æ®ç±»å‹ï¼Œæ˜¯pythonå¼€å‘è€…å®šä¹‰å’Œè®¾è®¡çš„ç±»ã€‚è€Œæˆ‘ä»¬å­¦å¥½ç±»è¿™ä¸€æ¦‚å¿µï¼Œä¾¿å¯ä»¥è‡ªå·±å»åˆ›é€ å®šä¹‰ä¸€ä¸ªç±»ã€‚</p><p>å„å¤§è¯­è¨€ä¸­ä¹Ÿéƒ½æœ‰ç±»çš„æ¦‚å¿µï¼Œç±»åŒ…å«äº†æ–¹æ³•å’Œå±æ€§ï¼Œå…¶ä¸­çš„æ–¹æ³•å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„å‡½æ•°çš„æ¦‚å¿µã€‚åœ¨pythonä¸­ç±»çš„å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š</p><pre><code class="hljs">class ç±»å:def __init__(self,å‚æ•°,...): #è¿™æ˜¯æ„é€ å‡½æ•°ï¼ˆå¯ä»¥æŠŠå®ƒç†è§£æˆç±»å…¥å£ï¼Œæˆ–è€…é»˜è®¤å‡½æ•°ï¼‰å‡½æ•°ä½“ï¼ˆæ–¹æ³•ä½“ï¼‰def æ–¹æ³•å1(self,å‚æ•°,...):å‡½æ•°ä½“def æ–¹æ³•å2(self,å‚æ•°,...):å‡½æ•°ä½“.....</code></pre><p>å…³äº__init__æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ç§åˆå§‹åŒ–çš„æ–¹æ³•ï¼Œå®é™…åªè¢«è°ƒç”¨ä¸€æ¬¡ï¼ˆåœ¨ç”Ÿæˆå®ä¾‹æ—¶ï¼‰ã€‚è€Œselfæ˜¯ç”¨æ¥ä¼ å‚çš„å˜é‡ã€‚ç¤ºä¾‹å¦‚ä¸‹</p><pre><code class="hljs">class Man:def __init__(self, name):self.name = nameprint(&quot;æˆ‘è¿›å…¥äº†è¿™ä¸ªç±»å–½ï¼&quot;)def hello(self):print(&quot;hello&quot;+self.name)def goodbye(self):print(&quot;å†è§&quot;+self.name)    m = Man(&quot;è¿æ€é‘«&quot;)m.hello()m.goodbye()</code></pre><p>è¿è¡Œç»“æœå¦‚å›¾ï¼š</p><p><img src="/images/2021-10-26-01.png" alt="upload successful"></p><p>è®²è§£ï¼šè¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ–°çš„ç±»ï¼Œåå­—å«Manã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨Manç±»ç”Ÿæˆç±»å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰mã€‚ä¸€å¼€å§‹ï¼Œç±»Mançš„æ„é€ å‡½æ•°æ¥å—åˆ°äº†nameï¼Œè¿™ä¸ªæ—¶å€™è¯´æ˜æˆ‘çš„åå­—å·²ç»è¿›å…¥åˆ°äº†Manç±»ä¸­ã€‚ç„¶åæˆ‘çš„åå­—ä¾¿éšç€å®ä¾‹å˜é‡self.nameæ¼‚æµåˆ°ä¸‹ä¸€ä¸ªæ–¹æ³•helloä¸­ï¼Œè¿™æ—¶ä½ å°±èƒ½ç†è§£selfæ˜¯å¹²ä»€ä¹ˆç”¨çš„äº†ã€‚å®ä¾‹å˜é‡æ˜¯å‚¨å­˜åœ¨å„ä¸ªå®ä¾‹ä¸­çš„å˜é‡ï¼Œå¯ä»¥é€šè¿‡selfåŠ å±æ€§åçš„æ–¹å¼æ¥ç”Ÿæˆæˆ–è®¿é—®å®ä¾‹å˜é‡ã€‚</p><h3 id="1-5-NumPyåº“">1.5 NumPyåº“</h3><p>åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œç»å¸¸å‡ºç°æ•°ç»„å’ŒçŸ©é˜µçš„è¿ç®—ã€‚æˆ‘ä»¬å¤§å®¶çœ‹åˆ°çš„å›¾ç‰‡ï¼Œç”µå½±ï¼Œæ¸¸æˆç­‰ï¼Œå…¶å®éƒ½æ˜¯1010çš„äºŒè¿›åˆ¶ä»¥å¤šç»´æ•°ç»„æˆ–çŸ©é˜µç»„åˆè€Œæˆã€‚å°±æ‹¿å›¾åƒæ¥è¯´ï¼Œå›¾åƒå°±æ˜¯ç”±è®¸è®¸å¤šå¤šçš„åƒç´ ä»¥çŸ©é˜µçš„å½¢å¼æ’åˆ—è€Œæˆï¼Œæ¯ä¸ªåƒç´ åˆæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«ç±»RGBç­‰è‰²å½©å±æ€§ï¼Œæ˜æš—å±æ€§ç­‰ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å­¦ä¹ æ·±åº¦å­¦ä¹ å°±ç¦»ä¸å¼€æ•°ç»„å’ŒçŸ©é˜µçš„è¿ç®—ï¼Œè€Œæ•°ç»„å’ŒçŸ©é˜µçš„è®¡ç®—å¸¸ç”¨è¿™èŠ‚è¦å­¦çš„å¤–éƒ¨åº“Numpyã€‚Numpyçš„ä¼˜å¼‚ä¹‹å¤„åœ¨äºå®ƒæä¾›äº†è®¸å¤šæœ‰å…³äºæ•°ç»„è¿ç®—çš„ä¾¿æ·æ–¹æ³•ï¼Œå¦‚numpy.arrayã€‚å…·ä½“ç”¨æ³•åé¢ä¼šè¯¦ç»†çš„è¯´ã€‚</p><h4 id="1-5-1-å¯¼å…¥NumPy">1.5.1 å¯¼å…¥NumPy</h4><p>Numpyæ˜¯pythonçš„å¤–éƒ¨åº“ï¼Œæ‰€ä»¥éœ€è¦å…ˆä¸‹è½½è¿™ä¸ªå¤–éƒ¨åº“æ‰èƒ½ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥ç”¨pipåŒ…ç®¡ç†å™¨è¿›è¡Œä¸‹è½½ï¼Œå¦‚ä½•ä½¿ç”¨ä¸Šé¢ç« èŠ‚å·²ç»è®²è¿°ï¼Œæˆ‘å°±ä¸å†èµ˜è¿°ã€‚</p><p>ä¸‹è½½å¥½ä¹‹åå¹¶ä¸æ˜¯å°±èƒ½ç›´æ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒå¯¼å…¥åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œå¯¼å…¥æ–¹æ³•å¦‚ä¸‹ï¼š</p><pre><code class="hljs">import numpy as np # as npçš„æ„æ€æ˜¯æŠŠnumpyå¯¼å…¥ä½œä¸ºnpæ¥ä½¿ç”¨ã€‚</code></pre><h4 id="1-5-2-ç”ŸæˆNumPyæ•°ç»„">1.5.2 ç”ŸæˆNumPyæ•°ç»„</h4><p>å¯¼å…¥æˆåŠŸåï¼Œæˆ‘ä»¬ä¾¿è¦å¯¹å®ƒæ“ä½œä½¿ç”¨ï¼Œè¦ç”Ÿæˆæˆ‘ä»¬æ‰€éœ€è¦çš„æ•°ç»„ï¼Œéœ€è¦è°ƒç”¨numpyçš„array()æ–¹æ³•ã€‚å¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; x  = np.array([1,2,3,4,5])&gt;&gt;&gt; print(x)[1 2 3 4 5]&gt;&gt;&gt; type(x)&lt;class 'numpy.ndarray'&gt;</code></pre><h4 id="1-5-3-NumPyçš„ç®—æœ¯è¿ç®—">1.5.3 NumPyçš„ç®—æœ¯è¿ç®—</h4><p>å…³äºè¿ç®—ï¼Œä¸çŸ¥é“æ€ä¹ˆè¯´ï¼Œè¿˜æ˜¯ä¸¾ä¾‹è¯´æ˜å§ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; x = np.array([1.0,2.0,3.0])&gt;&gt;&gt; y = np.array([2.0,3.0,4.0])&gt;&gt;&gt; x + y #å¯¹åº”å…ƒç´ ç›¸åŠ /å‡/ä¹˜/é™¤array([3., 5., 7.])&gt;&gt;&gt; x - yarray([-1., -1., -1.])&gt;&gt;&gt; x * yarray([ 2.,  6., 12.])&gt;&gt;&gt; x / yarray([0.5       , 0.66666667, 0.75      ])</code></pre><p>å…³äºæ•°ç»„çš„è®¡ç®—æ–¹å¼ï¼Œå‚è€ƒçº¿æ€§ä»£æ•°ã€‚</p><p>æ³¨ï¼šæ•°ç»„xå’Œæ•°ç»„yçš„å…ƒç´ ä¸ªæ•°æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œç®—æœ¯è¿ç®—ã€‚å¦‚æœå…ƒç´ ä¸ªæ•°ä¸åŒï¼Œåœ¨è¿›è¡Œç®—æœ¯è¿ç®—æ—¶pythonå°±ä¼šæŠ¥é”™ã€‚</p><p>Numpyä¸ä»…å¯ä»¥è¿›è¡Œå¯¹åº”å…ƒç´ çš„ç®—æœ¯è¿ç®—ï¼Œè¿˜æ”¯æŒå„å…ƒç´ ä¹‹é—´è·Ÿæ ‡é‡ä¹‹é—´è¿ç®—ï¼Œå¦‚ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; x = np.array([1.0,2.0,3.0])&gt;&gt;&gt; x / 2.0array([0.5, 1. , 1.5])</code></pre><h4 id="1-5-4-NumPyçš„Nç»´æ•°ç»„">1.5.4 NumPyçš„Nç»´æ•°ç»„</h4><p>ä¸Šä¸€èŠ‚æ¼”ç¤ºçš„æ˜¯ä¸€ç»´æ•°ç»„ï¼ŒNumpyä¸ä»…å¯ä»¥åˆ›å»ºä¸€ç»´æ•°ç»„ï¼Œè¿˜å¯ä»¥åˆ›å»ºå¤šç»´æ•°ç»„ã€‚å¦‚äºŒç»´æ•°ç»„å°±æ˜¯çº¿ä»£é‡Œçš„çŸ©é˜µäº†ã€‚ä¾‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; A = np.array([[1,2],[3,4]])&gt;&gt;&gt; print(A)[[1 2] [3 4]]&gt;&gt;&gt; A.shape(2, 2)&gt;&gt;&gt; A.dtypedtype('int64')</code></pre><p>è¿™é‡Œæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ª2x2çš„çŸ©é˜µAã€‚å¦å¤–ï¼ŒçŸ©é˜µAçš„å½¢çŠ¶å¯ä»¥é€šè¿‡shapeæ¥çœ‹ï¼Œä¸Šé¢è¡¨ç¤ºçš„æ„æ€å°±æ˜¯2è¡Œ2åˆ—çš„æ•°ç»„ã€‚è€Œæ•°æ®å…ƒç´ çš„æ•°æ®ç±»å‹å¯ä»¥é€šè¿‡dtypeæ¥æŸ¥çœ‹ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹å¤šç»´æ•°ç»„çš„ç®—æœ¯è¿ç®—ã€‚å¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; A = np.array([[1,2],[3,4]])&gt;&gt;&gt; B = np.array([[3,0],[0,6]])&gt;&gt;&gt; A + Barray([[ 4,  2],       [ 3, 10]])&gt;&gt;&gt; A * Barray([[ 3,  0],       [ 0, 24]])</code></pre><p>å’Œä¸€ç»´æ•°ç»„è¿ç®—ä¸€æ ·ï¼Œè¦éµå¾ªå…ƒç´ å¯¹åº”çš„æ³•åˆ™ï¼Œä¸ç„¶å®¹æ˜“æŠ¥é”™ã€‚åŒæ—¶ä¹Ÿæ”¯æŒé€šè¿‡æ ‡é‡ï¼ˆå•ä¸€æ•°å€¼ï¼‰è¿›è¡ŒçŸ©é˜µçš„ç®—æœ¯è¿ç®—ï¼Œä¹Ÿå°±æ˜¯åé¢è¦è¯´çš„å¹¿æ’­ã€‚å¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; print(A)[[1 2] [3 4]]&gt;&gt;&gt; A * 10array([[10, 20],       [30, 40]])</code></pre><p>æ³¨è§£ï¼šåœ¨æ•°å­¦é¢†åŸŸä¸­ï¼Œ<strong>ä¸€ç»´æ•°ç»„</strong>çš„æ¦‚å¿µåœ¨æ•°å­¦ä¸­æ˜¯ä»¥<strong>å‘é‡</strong>çš„å½¢å¼å­˜åœ¨çš„ï¼Œ<strong>äºŒç»´æ•°ç»„</strong>æ˜¯<strong>çŸ©é˜µ</strong>ã€‚è€Œçº¿ä»£é‡Œç»Ÿä¸€æŠŠè¿™äº›ç§°ä¹‹ä¸º<strong>å¼ é‡</strong>æˆ–<strong>å¤šç»´æ•°ç»„</strong>ã€‚</p><h4 id="1-5-5-å¹¿æ’­">1.5.5 å¹¿æ’­</h4><p>åœ¨Numpyä¸­ï¼Œå½¢çŠ¶ä¸åŒçš„æ•°ç»„ä¹‹é—´ä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œè¿ç®—ã€‚ä¹‹å‰å’±ä»¬çš„ä¾‹å­ä¸­ï¼Œåœ¨ä¸€ä¸ª2x2çš„çŸ©é˜µAå’Œæ ‡é‡10ä¹‹é—´è¿›è¡Œäº†ä¹˜æ³•è¿ç®—ã€‚åœ¨è¿ç®—è¿‡ç¨‹ä¸­ï¼Œ10è¢«æ‹“å±•æˆ2x2çš„å½¢çŠ¶ä¾æ¬¡å’ŒAçŸ©é˜µçš„æ¯ä¸ªå…ƒç´ è¿›è¡Œè¿ç®—ã€‚è€Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸ºå¹¿æ’­ã€‚</p><p>å…³äºå¹¿æ’­æ›´é€šä¿—çš„è§£é‡Šï¼ˆä¸ªäººè§£é‡Šï¼‰ï¼šå¹¿æ’­å°±åƒå†œæ‘é‡Œçš„å¤§å–‡å­ï¼Œå®ƒå–Šå‡ºæ¥çš„ä¿¡æ¯å¤§å®¶ä¼™éƒ½èƒ½æ¥å—åˆ°å¬åˆ°ã€‚ä¹Ÿå°±æ˜¯è¿™ä¸ªä¿¡æ¯ä¼ é€’åˆ°æ¯ä¸€ä¸ªäººï¼Œæ¯ä¸ªäººåœ¨å¯¹å…¶åšç›¸åº”çš„å¤„ç†ã€‚</p><p>ä¾‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; A = np.array([[1,2],[3,4]])&gt;&gt;&gt; B = np.array([10,20])&gt;&gt;&gt; A * Barray([[10, 40],       [30, 80]])</code></pre><p>åœ¨è¿™ä¸ªè¿ç®—ä¸­ï¼Œä¸€ç»´æ•°ç»„è¢«å±•å¼€æˆå’ŒäºŒç»´æ•°ç»„ç›¸åŒçš„å½¢çŠ¶ï¼ˆæ³¨æ„ï¼Œåªæ˜¯å½¢çŠ¶ç›¸åŒï¼Œè€Œä¸æ˜¯å˜æˆäº†äºŒç»´æ•°ç»„ï¼‰ï¼Œä¸çŸ©é˜µAè¿›è¡Œè¿ç®—(å…ƒç´ å¯¹åº”)ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒNumpyæœ‰å¹¿æ’­çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å¯ä»¥å¯¹ä¸åŒå½¢çŠ¶çš„æ•°ç»„ä¹‹é—´è¿›è¡Œè¿ç®—ã€‚</p><h4 id="1-5-6-è®¿é—®å…ƒç´ ">1.5.6 è®¿é—®å…ƒç´ </h4><p>Numpyæ•°ç»„çš„å…ƒç´ è®¿é—®å’Œåˆ—è¡¨ç›¸ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡ä¸‹æ ‡è¿›è¡Œè®¿é—®ã€‚å¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; x = np.array([[1,2],[3,4]])&gt;&gt;&gt; print(x)[[1 2] [3 4]]&gt;&gt;&gt; x[0] #ç¬¬0è¡Œçš„æ‰€æœ‰å…ƒç´ array([1, 2])&gt;&gt;&gt; x[0][1] #ç¬¬0è¡Œç¬¬2ä¸ªå…ƒç´ ï¼ˆç¼–ç¨‹è¯­è¨€æ˜¯ä»0å¼€å§‹ç®—èµ·çš„ï¼‰2</code></pre><p>ä¹Ÿå¯ä»¥ç”¨forå¾ªç¯å†éå„ä¸ªå…ƒç´ ã€‚å¦‚ä¸‹ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; for i in x:...     print(i)... [1 2][3 4]</code></pre><p>é™¤äº†ä¸Šé¢è¯´çš„ç´¢å¼•æ“ä½œï¼ŒNumpyè¿˜æ”¯æŒç”¨æ•°ç»„çš„å½¢å¼è®¿é—®å„ä¸ªå…ƒç´ ã€‚</p><pre><code class="hljs">&gt;&gt;&gt; import numpy as np&gt;&gt;&gt; x = np.array([[11,22],[33,44],[55,66]])&gt;&gt;&gt; print(x)[[11 22] [33 44] [55 66]]&gt;&gt;&gt; x = x.flatten() #å°†xè½¬æ¢æˆä¸€ç»´æ•°ç»„&gt;&gt;&gt; print(x)[11 22 33 44 55 66]&gt;&gt;&gt; x[np.array([1,3,5])] #ä»¥æ•°ç»„çš„å½¢å¼è®¿é—®xæ•°ç»„çš„å„é¡¹å…ƒç´ ï¼ˆ1ï¼Œ3ï¼Œ5ï¼‰array([22, 44, 66])</code></pre><p>è¿ç”¨è¿™ç§æ–¹æ³•å¯ä»¥è®¾å®šä¸€å®šæ¡ä»¶ï¼Œæ»¡è¶³æ¡ä»¶çš„å¯ä»¥ä»xæ•°ç»„ä¸­æŠ½å‡ºè‡ªå·±æƒ³è¦çš„ç»“æœã€‚</p><p>ä¾‹å¦‚æå–xä¸­å¤§äº20çš„å…ƒç´ ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ–¹å¼å®ç°ï¼š</p><pre><code class="hljs">&gt;&gt;&gt; print(x)[11 22 33 44 55 66]&gt;&gt;&gt; x &gt; 20array([False,  True,  True,  True,  True,  True])&gt;&gt;&gt; x[x&gt;20]array([22, 33, 44, 55, 66])</code></pre><p>å¯¹Numpyæ•°ç»„ä½¿ç”¨ä¸ç­‰å·è¿ç®—ç¬¦ç­‰å¾—åˆ°çš„ç»“æœæ˜¯ä¸ªå¸ƒå°”å‹çš„æ•°ç»„ï¼Œåœ¨è·Ÿæ®æ»¡è¶³tureæ¡ä»¶çš„å…ƒç´ å–å‡ºæ˜¾ç¤ºã€‚</p><p>æ³¨è§£ï¼šNumpyå¥½ç”¨çš„åœ°æ–¹åœ¨äºå®ƒæœ‰è®¸å¤šå¤„ç†æ˜¯ç”¨C/C++å®ç°çš„ï¼Œpythonåœ¨ä¸šå†…æœ‰èƒ¶æ°´è¯­è¨€çš„ç§°å·ï¼Œå¯ä»¥ä½œä¸ºä¸­é—´äººï¼Œå¤åˆä½¿ç”¨æ˜¯æ•ˆç‡æœ€å¤§åŒ–ã€‚ç›¸è¾ƒäºé™æ€ç±»å‹è¯­è¨€ï¼ˆC/C++ï¼‰ï¼Œpythonçš„è¿ç®—é€Ÿåº¦å°±å¾ˆæ…¢ã€‚</p><h3 id="1-6-Matplotlibåº“">1.6 Matplotlibåº“</h3><p>æœ‰äº†å„ç§æ•°æ®çš„æ“ä½œå¾€å¾€è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬åœ¨å­¦æ•°å­¦æ—¶æœ‰ä¸ªæ•°å½¢ç»“åˆçš„æ€æƒ³ã€‚æƒ³è¦æ›´å¥½çš„ç†è§£è¿™äº›æ•°æ®çš„è§„å¾‹ã€å½¢å¼ã€æ„ä¹‰ç­‰ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸è¦å¯¹å…¶è¿›è¡Œå¯è§†åŒ–æ“ä½œã€‚è€ŒMatplotlibåº“ä¾¿å¯ä»¥è½»æ¾çš„ç»˜åˆ¶å›¾å½¢ä½¿æ•°æ®å¯è§†åŒ–ã€‚</p><p>æˆ‘ä¹‹å‰è¿˜æ‰“ç®—ç”¨Matplotlibåº“ç»“åˆNumpyåº“æ¥æ€»ç»“å’Œå­¦ä¹ é«˜æ•°çš„å†…å®¹ï¼Œç®—æ˜¯åŠé€”è€ŒåºŸäº†ï¼Œæœ€åæˆ‘ä¼šå±•ç¤ºæˆ‘ä¹‹å‰æ‰€åšçš„åŠæˆå“ã€‚</p><h4 id="1-6-1-ç»˜åˆ¶ç®€å•å›¾å½¢">1.6.1 ç»˜åˆ¶ç®€å•å›¾å½¢</h4><p>matplotlibåº“çš„pyplotæ¨¡å—å¯ä»¥ç»˜åˆ¶å›¾å½¢ï¼Œç›´æ¥ä¸¾ä¾‹ï¼š</p><pre><code class="hljs">import numpy as npimport matplotlib.pyplot as plt#ç”Ÿæˆæ•°æ®x = np.arange(0, 6, 0.1) # ä»¥0.1ä¸ºå•ä½ï¼Œç”Ÿæˆ0åˆ°6çš„æ•°æ®y = np.sin(x)#ç»˜å›¾plt.plot(x,y)plt.show()</code></pre><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†Numoyåº“çš„arangeæ–¹æ³•ç”Ÿæˆäº†ä¸€ä¸ª[0,0.1,0.2â€¦5.9]çš„æ•°æ®ï¼Œå¹¶è®¾å®ƒä¸ºxã€‚å¯¹xçš„æ•°æ®é€ä¸€åº”ç”¨Numpyçš„sinå‡½æ•°å¾—åˆ°çš„æ•°æ®å®šä¹‰ä¸ºyã€‚æœ€åå°†xï¼Œyçš„å€¼ä¼ é€’ç»™plt.plotæ–¹æ³•ï¼Œç„¶åç»˜å›¾ã€‚é€šè¿‡plt.show()æ˜¾ç¤ºå›¾åƒã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/2021-1.-27-02.png" alt="upload successful"></p><h4 id="1-6-2-pyplotçš„åŠŸèƒ½">1.6.2 pyplotçš„åŠŸèƒ½</h4><p>åœ¨åˆšæ‰çš„sinå‡½æ•°çš„å›¾å½¢ä¸­ï¼Œæˆ‘ä»¬å°è¯•è¿½åŠ coså‡½æ•°çš„å›¾å½¢ï¼Œå¹¶å°è¯•ä½¿ç”¨pyplotçš„æ·»åŠ æ ‡é¢˜å’Œxè½´æ ‡ç­¾åç­‰å…¶ä»–åŠŸèƒ½ã€‚</p><pre><code class="hljs">import numpy as npimport matplotlib.pyplot as plt#ç”Ÿæˆæ•°æ®x = np.arange(0, 6, 0.1) # ä»¥0.1ä¸ºå•ä½ï¼Œç”Ÿæˆ0åˆ°6çš„æ•°æ®y1 = np.sin(x)y2 = np.cos(x)# ç»˜å›¾plt.plot(x, y1, label=&quot;sin&quot;)plt.plot(x, y2, linestyle=&quot;--&quot;, label=&quot;cos&quot;) # ç”¨è™šçº¿è¡¨ç¤ºplt.xlabel(&quot;x&quot;)plt.ylabel(&quot;y&quot;)plt.title(&quot;sin &amp; cos&quot;)plt.legend()plt.show()</code></pre><p>å±•ç¤ºç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/images/2021-10-27-04.png" alt="upload successful"></p><h4 id="1-6-3-æ˜¾ç¤ºå›¾åƒ">1.6.3 æ˜¾ç¤ºå›¾åƒ</h4><p>pyplot ä¸­è¿˜æä¾›äº†ç”¨äºæ˜¾ç¤ºå›¾åƒçš„æ–¹æ³• imshow()ã€‚å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨matplotlib.imageæ¨¡å—çš„imread()æ–¹æ³•è¯»å…¥å›¾åƒã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p><pre><code class="hljs">import matplotlib.pyplot as pltfrom matplotlib.image import imreadimg = imread('001.jpg') # è¯»å…¥å›¾åƒï¼ˆè®¾å®šåˆé€‚çš„è·¯å¾„ï¼ï¼‰plt.imshow(img)plt.show()</code></pre><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/images/2021-10-27-5.png" alt="upload successful"></p><p>è¿™é‡Œï¼Œæˆ‘ä»¬å‡å®šå›¾åƒlena.pngåœ¨å½“å‰ç›®å½•ä¸‹ã€‚å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„ç¯å¢ƒï¼Œå¯èƒ½éœ€è¦å˜æ›´æ–‡ä»¶åæˆ–æ–‡ä»¶è·¯å¾„ã€‚å°†å›¾åƒçš„è·¯å¾„ '001.jpgâ€™æ”¹ä¸ºä½ ç”µè„‘ä¸Šå›¾ç‰‡æ‰€åœ¨ç›®å½•å³å¯æ­£ç¡®è¿è¡Œã€‚</p><h4 id="1-6-4-åŠæˆå“é¡¹ç›®">1.6.4 åŠæˆå“é¡¹ç›®</h4><p>ä¸‹é¢æ˜¯æˆ‘å¾ˆä¹…å¾ˆä¹…ä»¥å‰è‡ªå­¦pythonæ—¶çš„æƒ³æ³•ï¼Œæƒ³ç»“åˆé«˜æ•°ç”¨pythonå»ç†è§£æ•°å­¦ã€‚</p><p><a href="http://xn--SetsAndCommonLogics-4883bu340c.py">è¿™æ˜¯SetsAndCommonLogics.py</a></p><pre><code class="hljs">#ç¬¬ä¸€ç« ï¼šé›†åˆä¸å¸¸ç”¨é€»è¾‘##é›†åˆæ˜¯åªå…·æœ‰æŸç§ç‰¹å®šæ€§è´¨çš„äº‹ç‰©çš„æ€»ä½“ã€‚ç»„æˆè¿™ä¸ªé›†åˆçš„äº‹ç‰©ç§°ä¹‹ä¸ºè¯¥é›†åˆçš„å…ƒç´ ã€‚#ä¸€ä¸ªé›†åˆï¼Œè‹¥å®ƒçš„å…ƒç´ æ˜¯æœ‰é™çš„è¯ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæœ‰é™é›†ã€‚åä¹‹ä¸æ˜¯æœ‰é™çš„æˆ‘ä»¬ç§°ä¹‹ä¸ºæ— é™é›†ã€‚import numpy as npimport math#å£°æ˜ä¸¤ä¸ªç©ºé›†åˆï¼Œå‘½åä¸ºA,Bã€‚A = &#123;&#125;  #Aé›†åˆB = &#123;&#125; #Bé›†åˆ#é›†åˆä¹‹é—´çš„å…³ç³»ï¼š#ç›¸ç­‰:é›†åˆAå’Œé›†åˆBä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ç›¸åŒA = &#123;1,2,3&#125;B = &#123;1,3,2&#125;if A==B:    print(&quot;Aé›†åˆä¸Bé›†åˆç›¸ç­‰ï¼&quot;)else:    print(&quot;Aé›†åˆä¸ç­‰äºBé›†åˆï¼&quot;)#å­é›†ï¼šé›†åˆAä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯é›†åˆBä¸­çš„å…ƒç´ A = &#123;1,2,3&#125;B = &#123;1,2,3,4,5&#125;result = A &lt;= Bif result:    print(&quot;Aæ˜¯Bçš„å­é›†ï¼&quot;)else:    print(&quot;Aä¸æ˜¯Bçš„å­é›†ï¼&quot;)#çœŸå­é›†ï¼šé›†åˆAä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯é›†åˆBä¸­çš„å…ƒç´ ï¼Œä¸”é›†åˆBä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ ä¸æ˜¯é›†åˆAä¸­çš„å…ƒç´ A = &#123;1,2,3&#125;B = &#123;1,2,3&#125;result = A &lt; Bif result:    print(&quot;Aæ˜¯Bçš„çœŸå­é›†ï¼&quot;)else:    print(&quot;Aä¸æ˜¯Bçš„çœŸå­é›†ï¼&quot;)#ç©ºé›†ï¼šæ˜¯ä»»ä½•é›†åˆçš„å­é›†ï¼Œæ˜¯ä»»ä½•éç©ºé›†åˆçš„çœŸå­é›†A = &#123;&#125;B = &#123;&#125;#å¹¶é›†ï¼šç”±é›†åˆAå’Œé›†åˆBå…±åŒç»„æˆçš„é›†åˆå«å¹¶é›†ï¼ˆAå¹¶Bï¼‰A = &#123;1,2,3,4&#125;B = &#123;5,6,7,8,9&#125;result = A | Bprint(result)#äº¤é›†ï¼šé›†åˆAå’ŒBå…±åŒæ‹¥æœ‰çš„å…ƒç´ æ„æˆçš„é›†åˆA = &#123;1,2,3,4&#125;B = &#123;3,4,5,6&#125;result = A &amp; Bprint(result)#è¡¥é›†ä¸å…¨é›†U = &#123;1,2,3,4,5,6,7,8,9&#125; #å…¨é›†A = &#123;1,2,3,4,5&#125;result = U - A #è¡¥é›†print(result)'''å‡½æ•°ä»‹ç»ï¼šnumpyåº“ä¸­çš„arangeæ–¹æ³•ç”Ÿæˆçš„æ˜¯å·¦å¼€å³é—­çš„åŒºé—´ã€‚'''#å¼€åŒºé—´x = np.arange(1+1,10)print(&quot;è¿™æ˜¯ï¼ˆ1ï¼Œ10ï¼‰çš„å¼€åŒºé—´:&quot; + str(x))#é—­åŒºé—´x = np.arange(1,10+1)print(&quot;è¿™æ˜¯[1ï¼Œ10]çš„é—­åŒºé—´:&quot; + str(x))'''æ— ç©·æ•°çš„ä»‹ç»ï¼šåœ¨pythonä¸­å…¶å®ä¹Ÿæ˜¯å¯ä»¥è¡¨ç¤ºæ­£è´Ÿæ— ç©·æ•°çš„ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨float('inf')æ¥è¡¨ç¤ºæ­£æ— ç©·æ•°ï¼Œfloat('inf')æ¥è¡¨ç¤ºè´Ÿæ— ç©·æ•°ã€‚å¦‚ä½•æ£€æµ‹æ— ç©·æ•°å‘¢ï¼Ÿæˆ‘ä»¬ç”¨åˆ°mathåº“çš„isinf()æ–¹æ³•æ¥åˆ¤æ–­'''# æ— ç©·å¤§x = float('inf') #ç”¨äºè¡¨ç¤ºæ— ç©·å¤§y = 100000000000000000print(math.isinf(x))print(math.isinf(y))#é€»è¾‘é—¨ï¼ˆä¸ï¼Œæˆ–ï¼Œéï¼‰class Logic:    def __init__(self,x):        self.x = x    def AND(self):  #ä¸é—¨è¿ç®—        w = np.array([0.5,0.5])        t = 0.7        sum = np.sum(self.x*w)-t        print(str(self.x[0]) + &quot;ä¸&quot; + str(self.x[1]) + &quot;ä¸ºï¼š&quot;)        if sum &lt;= 0:            print(0)        elif sum &gt; 0:            print(1)    def OR(self):  #æˆ–é—¨è¿ç®—        w = np.array([0.7, 0.7])        t = 0.5        sum = np.sum(self.x * w) - t        print(str(self.x[0]) + &quot;æˆ–&quot; + str(self.x[1]) + &quot;ä¸ºï¼š&quot;)        if sum &lt;= 0:            print(0)        elif sum &gt; 0:            print(1)s = np.array([[1,0],[0,1],[0,0],[1,1]])for x in s:    # å®ä¾‹åŒ–å¯¹è±¡    logic = Logic(x)    #ä¸é—¨    logic.AND()    #æˆ–é—¨    logic.OR()</code></pre><p><a href="http://xn--MathematicalFunction-vi06bl972c.py">è¿™æ˜¯MathematicalFunction.py</a></p><pre><code class="hljs"># ç¬¬äºŒç« ï¼šå‡½æ•°import numpy as np  # è®¡ç®—import mathimport matplotlib.pyplot as plt  # ç”»å›¾import sympy as sp  # å‡½æ•°åº“import interval as iv  # åŒºé—´åº“# å‡½æ•° ï¼šç”±ä¸¤ä¸ªéç©ºé›†åˆç›¸äº’å¯¹åº”çš„ä¸€ç§è¡¨ç¤ºï¼ˆå¯ä¸€å¯¹ä¸€ï¼Œå¤šå¯¹ä¸€ï¼‰x = sp.symbols(&quot;x&quot;)  # å®šä¹‰æœªçŸ¥æ•°xï¼Œxä¸ºéç©ºé›†åˆä¸­çš„ä¸€ä¸ªæœªçŸ¥å…ƒç´ ã€‚y = sp.solve(x, x)  # å‡½æ•°å…³ç³»å¼ï¼Œè¯¥æ–¹æ³•æ˜¯åœ¨å‡½æ•°ç­‰ç”¨0çš„æ—¶å€™å‚ä¸è¿ç®—æ±‚è§£ï¼Œå¾—åˆ°çš„ç»“æœä¸ºæ•°ç»„ã€‚print(y)x = np.arange(-5.0, 5.0, 0.1)  # å®šä¹‰xçš„åŒºé—´å’Œè¡¨ç¤ºå•ä½y = x  # å‡½æ•°ä½“plt.plot(x, y)plt.ylim(-10, 10)  # å®šä¹‰yçš„åŒºé—´plt.show()# å‡½æ•°ç›¸ç­‰ï¼šå¦‚æœä¸¤ä¸ªå‡½æ•°å®šä¹‰åŸŸç›¸åŒï¼Œå¯¹åº”å…³ç³»å®Œå…¨ä¸€è‡´ï¼Œç§°è¿™ä¸¤ä¸ªå‡½æ•°ç›¸ç­‰ã€‚x1 = np.arange(-5.0, 5.0, 0.1)x2 = np.arange(-5.0, 5.0, 0.1)y1 = x1y2 = pow(pow(x2, 2), 0.5)  # y2 = x2çš„å¹³æ–¹å¼€ç®—æœ¯å¹³æ–¹æ ¹ï¼Œpowæ˜¯ç®—å¹³æ–¹çš„å†…ç½®æ–¹æ³•plt.plot(x1, y1)plt.plot(x2, y2, linestyle=&quot;--&quot;)plt.ylim(-10, 10)plt.show()  # å¦‚å›¾æ‰€ç¤ºï¼Œä¸æ˜¯ç›¸ç­‰å‡½æ•°ã€‚# å‡½æ•°å¥‡å¶æ€§ï¼šå¦‚ä¸Šå›¾å¯çœ‹å‡ºï¼Œyï¼ˆ-xï¼‰=-y(x)æ˜¯å¥‡å‡½æ•°ï¼Œyï¼ˆ-xï¼‰=yï¼ˆxï¼‰æ˜¯å¶å‡½æ•°# åˆ†æ®µå‡½æ•°ï¼š ç»™å®šä¸åŒçš„åŒºé—´æœ‰ä¸åŒçš„å¯¹åº”å…³ç³»çš„å‡½æ•°x1 = np.arange(-5.0, 0.0, 0.1)x2 = np.arange(0.0, 5.0, 0.1)y1 = x1y2 = pow(x2, 2)plt.plot(x1, y1)plt.plot(x2, y2, linestyle=&quot;--&quot;)plt.ylim(-10, 10)plt.show()  # å¦‚å›¾æ˜¯åˆ†æ®µå‡½æ•°# ä¸€æ¬¡å‡½æ•°ï¼šåˆå«çº¿æ€§å‡½æ•°ã€‚y=kx+b(k!=0)x = np.arange(-5.0, 5.0, 0.1)y = 2 * x + 2plt.plot(x, y)plt.ylim(-10, 10)plt.show()  # å¦‚å›¾ï¼Œæ˜¯ä¸€æ¡ç›´çº¿ï¼Œkæ˜¯ç›´çº¿çš„æ–œç‡ï¼Œbæ˜¯yè½´ä¸Šçš„æˆªè·ã€‚# äºŒæ¬¡å‡½æ•°ï¼šéçº¿æ€§å‡½æ•°ï¼ŒæŠ›ç‰©çº¿ã€‚x = np.arange(-5.0, 5.0, 0.1)y = 2 * x ** 2 + 3 * x + 2plt.plot(x, y)plt.ylim(-10, 10)plt.show()# æŒ‡æ•°å‡½æ•°ï¼šéçº¿æ€§x = np.arange(-1, 3, 0.1)y = -2 ** xplt.plot(x, y)plt.ylim(-2, 25)plt.show()# ä¸‰è§’å‡½æ•°# sinå‡½æ•°x = np.arange(-5,5,0.1)y = np.sin(x)plt.plot(x,y)plt.ylim(-2,2)plt.show()#coså‡½æ•°å›¾åƒx = np.arange(-5,5,0.1)y = np.cos(x)plt.plot(x,y)plt.ylim(-2,2)plt.show()</code></pre><p><a href="http://xn--DynamicRoseLine-5835av628b.py">è¿™æ˜¯DynamicRoseLine.py</a></p><pre><code class="hljs">####  åŠ¨ç”»æ¼”ç¤ºç«ç‘°çº¿çš„ç»˜ç”»è¿‡ç¨‹###from matplotlib import pyplot as pltimport numpy as npimport mathi = np.linspace(0,2*math.pi,500)theta=5*np.sin(3*i)plt.title('p=5*sin(3*i)',color='r')i_list=[]theta_list=[]for (i_tmp,theta_tmp) in zip(i,theta):    i_list.append(i_tmp)    theta_list.append(theta_tmp)#å»é™¤è´Ÿå€¼ï¼Œä½¿å¾—åŠ¨ç”»æ›´é¡ºç•…    if(theta_tmp&gt;=0):        plt.plot(i_list,theta_list)        plt.pause(0.01)        plt.axes(polar=True)        plt.ylim(0,5)#ä¿å­˜åŠ¨ç”»import numpy as npimport matplotlib.pyplot as pltimport matplotlib.animation as animation# ç”Ÿæˆå›¾ä¾‹fig = plt.figure(figsize=(5,5))ax = plt.subplot(projection='polar')# ç»˜åˆ¶åŠ¨æ€å‡½æ•°çš„å˜é‡x = np.linspace(0, 2*np.pi, 500)# å®ä¾‹åŒ–çº¿æ¡line, = ax.plot([], [], color='r')r,theta=[],[]def init():    # è®¾ç½®yè½´çš„èŒƒå›´    ax.set_ylim(0, 5)    return line# æ›´æ–°å‡½æ•°ï¼Œnæ˜¯åŠ¨æ€å˜é‡def update(n):    # æ›´æ–°æ•°æ®    theta.append(n)    r.append(5*np.sin(3*n))    line.set_xdata(theta)    line.set_ydata(r)    return line# framesåœ¨è°ƒç”¨updateå‡½æ•°æ—¶ï¼Œä¼šå°†framesåé¢çš„æ•°æ®ä½œä¸ºå®å‚ä¼ é€’ç»™â€œnâ€# intervalæ›´æ–°é¢‘ç‡ï¼Œå•ä½msani = animation.FuncAnimation(fig, update,frames=x,init_func=init,interval=10)ani.save('sin.gif',writer='pillow')</code></pre><p><a href="http://xn--RoseCurve-pr6su00jt6bh20ddb4c.py">è¿™æ˜¯ç«ç‘°çº¿RoseCurve.py</a></p><pre><code class="hljs">###  ç«ç‘°çº¿##from matplotlib import pyplot as pltimport numpy as npimport mathi = np.linspace(-2*math.pi,2*math.pi,500)theta=5*np.sin(3*i)plt.subplot(221,projection='polar')plt.plot(i,theta)plt.title('p=5*sin(3*i)',color='r')theta=5*np.sin(2*i)plt.subplot(222,projection='polar')plt.plot(i,theta)plt.title('p=5*sin(2*i)',color='r')theta=5*np.sin(3/2*i)plt.subplot(223,projection='polar')plt.plot(i,theta)plt.title('p=5*sin(3/2i)',color='r')theta=5*np.sin(1*i)plt.subplot(224,projection='polar',title='p=5*sin(3*i)')plt.plot(i,theta)plt.title('p=5*sin(1*i)',color='r')plt.show()</code></pre><h3 id="æ€»ç»“">æ€»ç»“</h3><p>æœ¬ç« é‡ç‚¹ä»‹ç»äº†å®ç°æ·±åº¦å­¦ä¹ ï¼ˆç¥ç»ç½‘ç»œï¼‰æ‰€éœ€çš„ç¼–ç¨‹çŸ¥è¯†ï¼Œä»¥ä¸ºå­¦ä¹ æ·±åº¦å­¦ä¹ åšå¥½å‡†å¤‡ã€‚ä»ä¸‹ä¸€ç« å¼€å§‹ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨Pythonå®é™…è¿è¡Œä»£ç ï¼Œé€æ­¥äº†è§£æ·±åº¦å­¦ä¹ ã€‚</p><p>ï¼ˆæœ¬ç« å®Œç»“ï¼‰ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°é‘«çˆ±ç™½å«–ï¼Œç™½å«–èµ„æºåˆ†äº«</title>
      <link href="/2021/10/16/%E5%B0%8F%E9%91%AB%E7%88%B1%E7%99%BD%E5%AB%96%EF%BC%8C%E7%99%BD%E5%AB%96%E8%B5%84%E6%BA%90%E5%88%86%E4%BA%AB/"/>
      <url>/2021/10/16/%E5%B0%8F%E9%91%AB%E7%88%B1%E7%99%BD%E5%AB%96%EF%BC%8C%E7%99%BD%E5%AB%96%E8%B5%84%E6%BA%90%E5%88%86%E4%BA%AB/</url>
      
        <content type="html"><![CDATA[<h1>å°é‘«çˆ±ç™½å«–</h1><p>åœ¨è¿™ä¸ªç½‘ç»œæ—¶ä»£ï¼Œæˆ‘ä»¬æ¯ä¸ªäººéƒ½èƒ½äº«å—äº’è”ç½‘å¸¦æ¥çš„æ–¹ä¾¿å¿«æ·ä»¥åŠåºå¤§çš„çŸ¥è¯†å‚¨å¤‡ã€‚æˆ‘ä»¬è¦å­¦ä¼šåˆ©ç”¨ç½‘ç»œçš„ä¾¿åˆ©æ€§ä¸°å¯Œæˆ‘ä»¬è‡ªå·±çš„æŠ€èƒ½å’ŒçŸ¥è¯†å‚¨å¤‡ã€‚æ‰€ä»¥ï¼Œæˆ‘å†™äº†è¿™ä¸ªåšå®¢æ¥æ¨å¹¿è¿™äº›å…è´¹çš„èµ„æºç½‘ç«™ã€‚</p><h2 id="ä¸€ã€è§†é¢‘ç±»">ä¸€ã€è§†é¢‘ç±»</h2><ol><li>é¢„å‘Šç‰‡ä¸–ç•Œï¼š<a href="https://www.yugaopian.cn/">https://www.yugaopian.cn/</a></li><li>33å°è¯ï¼š<a href="http://33.agilestudio.cn/">http://33.agilestudio.cn/</a></li><li>MixKitï¼š<a href="https://mixkit.co/free-stock-video/">https://mixkit.co/free-stock-video/</a></li><li>Pexelï¼š<a href="https://www.pexels.com/zh-cn/video/">https://www.pexels.com/zh-cn/video/</a></li><li>Videezyï¼š<a href="https://www.videezy.com/">https://www.videezy.com/</a></li><li>VJShiï¼š<a href="https://www.vjshi.com/">https://www.vjshi.com/</a></li></ol><h2 id="äºŒã€PPTæ¨¡æ¿ç±»">äºŒã€PPTæ¨¡æ¿ç±»</h2><ol><li>51PPTæ¨¡æ¿ï¼š<a href="http://www.51pptmoban.com/">http://www.51pptmoban.com/</a></li><li>ä¼˜å“PPTï¼š<a href="https://www.ypppt.com/">https://www.ypppt.com/</a></li><li>ç¬¬ä¸€PPTï¼š<a href="http://www.1ppt.com/">http://www.1ppt.com/</a></li><li>å®å½“è®¾è®¡ï¼š<a href="https://www.dingdangsheji.com/">https://www.dingdangsheji.com/</a></li><li>PPTè¶…çº§å¸‚åœºï¼š<a href="http://ppt.sotary.com/web/wxapp/index.html">http://ppt.sotary.com/web/wxapp/index.html</a></li></ol><h2 id="ä¸‰ã€é™æ€å›¾ç‰‡">ä¸‰ã€é™æ€å›¾ç‰‡</h2><ol><li>PHï¼š<a href="https://pxhere.com/">https://pxhere.com/</a></li><li>CC0å›¾ç‰‡ç½‘ï¼š<a href="https://cc0.cn/">https://cc0.cn/</a></li><li>Foodiesfeedï¼š<a href="https://www.foodiesfeed.com/">https://www.foodiesfeed.com/</a></li><li>Unplashï¼š<a href="https://unsplash.com/">https://unsplash.com/</a></li><li>Pixabayï¼š<a href="https://pixabay.com/">https://pixabay.com/</a></li></ol><h2 id="å››ã€åŠ¨æ€å›¾">å››ã€åŠ¨æ€å›¾</h2><ol><li>Giphyï¼š<a href="https://giphy.com/">https://giphy.com/</a></li><li>GfyCatï¼š<a href="https://gfycat.com/">https://gfycat.com/</a></li><li>Tenorï¼š<a href="https://tenor.com/">https://tenor.com/</a></li><li>GIF ABYSSï¼š<a href="https://gifs.alphacoders.com/">https://gifs.alphacoders.com/</a></li><li>åŠ¨å›¾å®‡å®™ï¼š<a href="https://biaoqingsoso.com/">https://biaoqingsoso.com/</a></li><li>Soogifï¼š<a href="https://www.soogif.com/">https://www.soogif.com/</a></li><li>é—ªèŒï¼š<a href="http://www.weshineapp.com/">http://www.weshineapp.com/</a></li></ol><h2 id="äº”ã€å£çº¸">äº”ã€å£çº¸</h2><ol><li>WallHavenï¼š<a href="https://wallhaven.cc/">https://wallhaven.cc/</a></li><li>10Wallpaperï¼š<a href="https://www.10wallpaper.com/">https://www.10wallpaper.com/</a></li><li>alphacodersï¼š<a href="https://wall.alphacoders.com/?lang=Chinese">https://wall.alphacoders.com/?lang=Chinese</a></li><li>æç®€å£çº¸ï¼š<a href="https://bz.zzzmh.cn/index">https://bz.zzzmh.cn/index</a></li><li>3Gå£çº¸ï¼š<a href="https://www.3gbizhi.com/">https://www.3gbizhi.com/</a></li><li>å¿…åº”å£çº¸ï¼š<a href="https://bing.ioliu.cn/">https://bing.ioliu.cn/</a></li></ol><h2 id="å…­ã€å›¾æ ‡ç±»">å…­ã€å›¾æ ‡ç±»</h2><ol><li>é˜¿é‡Œå·´å·´çŸ¢é‡å›¾åº“ï¼š<a href="https://www.iconfont.cn/">https://www.iconfont.cn/</a></li><li>Ikonateï¼š<a href="https://ikonate.com/">https://ikonate.com/</a></li><li>iconstoreï¼š<a href="https://iconstore.co/">https://iconstore.co/</a></li><li>icoonï¼š<a href="https://icooon-mono.com/">https://icooon-mono.com/</a></li><li>iconfinderï¼š<a href="https://www.iconfinder.com/">https://www.iconfinder.com/</a></li></ol><h2 id="ä¸ƒã€PSDæ¨¡æ¿">ä¸ƒã€PSDæ¨¡æ¿</h2><ol><li>ç´ æä¸­å›½ï¼š<a href="http://www.sccnn.com/">http://www.sccnn.com/</a></li><li>ç«™é•¿ç´ æï¼š<a href="https://sc.chinaz.com/psd/">https://sc.chinaz.com/psd/</a></li><li>365PSDï¼š<a href="https://cn.365psd.com/free-psd">https://cn.365psd.com/free-psd</a></li><li>freepikï¼š<a href="https://www.freepik.com/psd">https://www.freepik.com/psd</a></li><li>freebiesbugï¼š <a href="https://freebiesbug.com/">https://freebiesbug.com/</a></li></ol><h2 id="å…«ã€éŸ³é¢‘ç±»">å…«ã€éŸ³é¢‘ç±»</h2><ol><li>Mixkitï¼š<a href="https://mixkit.co/free-stock-music/">https://mixkit.co/free-stock-music/</a></li><li>çˆ±ç»™ç½‘ï¼š<a href="https://www.aigei.com/">https://www.aigei.com/</a></li><li>æ·˜å£°ç½‘ï¼š<a href="https://www.tosound.com/">https://www.tosound.com/</a></li><li>è€³è†ï¼š<a href="https://www.ear0.com/">https://www.ear0.com/</a></li></ol><h2 id="ä¹ã€å­—ä½“ç±»">ä¹ã€å­—ä½“ç±»</h2><ol><li>ç´ æä¸­å›½ï¼š<a href="http://www.sccnn.com/ziku/">http://www.sccnn.com/ziku/</a></li><li>100Fontï¼š<a href="https://www.100font.com/">https://www.100font.com/</a></li><li>DaFontï¼š<a href="https://www.dafont.com/">https://www.dafont.com/</a></li><li>è‡ªç”±å­—ä½“ï¼š<a href="https://ziyouziti.com/">https://ziyouziti.com/</a></li></ol><h2 id="åã€é…è‰²">åã€é…è‰²</h2><ol><li>ä¸­å›½è‰²å½©ï¼š<a href="http://zhongguose.com/">http://zhongguose.com/</a></li><li>ColorHexï¼š<a href="https://www.colorhexa.com/">https://www.colorhexa.com/</a></li><li>ä¼˜è‰²ç½‘é…è‰²ä¸“åŒºï¼š<a href="https://color.uisdc.com/">https://color.uisdc.com/</a></li><li>ColorDropï¼š<a href="https://www.colordrop.io/">https://www.colordrop.io/</a></li><li>LOL Colorsï¼š<a href="https://www.webdesignrankings.com/resources/lolcolors/">https://www.webdesignrankings.com/resources/lolcolors/</a></li><li>colorHuntï¼š<a href="https://colorhunt.co/">https://colorhunt.co/</a></li><li>Adobe Colorï¼š<a href="https://color.adobe.com/zh/create/color-wheel">https://color.adobe.com/zh/create/color-wheel</a></li><li>uigradientsï¼š<a href="https://uigradients.com/#PiggyPink">https://uigradients.com/#PiggyPink</a></li><li>webgradientï¼š<a href="https://webgradients.com/">https://webgradients.com/</a></li></ol><h2 id="åä¸€ã€ç»¼åˆè§†é¢‘ç±»">åä¸€ã€ç»¼åˆè§†é¢‘ç±»</h2><ol><li>CCTVå®˜ç½‘ï¼š<a href="https://tv.cctv.com">https://tv.cctv.com</a></li><li>bç«™ï¼š<a href="https://bilibili.com">https://bilibili.com</a></li><li>ç¬¬ä¸€æ•™å­¦ç½‘ï¼š<a href="https://www.diyijc.com">https://www.diyijc.com</a></li><li>è¥¿ä¸œè§†é¢‘æ•™ç¨‹ç½‘ï¼š<a href="https://xidongv.com">https://xidongv.com</a></li><li>å¤§å­¦èµ„æºç½‘ï¼š<a href="https://www.dxzy163.com">https://www.dxzy163.com</a></li><li>Crash Courseï¼š<a href="https://crashcourse.club/">https://crashcourse.club/</a></li><li>è¯‘å­¦é¦†ï¼š<a href="https://www.yxgapp.com">https://www.yxgapp.com</a></li></ol><h2 id="åäºŒã€åˆ›æ„è®¾è®¡ç±»">åäºŒã€åˆ›æ„è®¾è®¡ç±»</h2><ol><li>åŒ…å°ç›’ï¼š<a href="https://www.baoxiaohe.com">https://www.baoxiaohe.com</a></li><li>ç«™é…·ï¼š<a href="https://www.zcool.com.cn">https://www.zcool.com.cn</a></li><li>ä¼˜è®¾ç½‘ï¼š<a href="https://www.uisdc.com">https://www.uisdc.com</a></li><li>èŠ±ç“£ç½‘ï¼š<a href="https://huaban.com">https://huaban.com</a></li><li>èœ‚é¸Ÿç½‘ï¼ˆæ‘„å½±è®ºå›ï¼‰ï¼š<a href="https://www.fengniao.com">https://www.fengniao.com</a></li><li>è®¾è®¡å¯¼èˆªï¼š<a href="https://hao.shejidaren.com">https://hao.shejidaren.com</a></li><li>è®¾è®¡å¸ˆå¯¼èˆªç½‘ï¼š<a href="https://hao.uisdc.com">https://hao.uisdc.com</a></li></ol><h2 id="åä¸‰ã€è®ºæ–‡æœç´¢ä¸ä¸‹è½½">åä¸‰ã€è®ºæ–‡æœç´¢ä¸ä¸‹è½½</h2><ol><li>å…¨å›½å›¾ä¹¦é¦†å‚è€ƒè”ç›Ÿï¼š<a href="https://www.ucdrs.superlib.net">https://www.ucdrs.superlib.net</a></li><li>OALibï¼š<a href="https://www.oalib.com">https://www.oalib.com</a></li><li>å›½å®¶å“²å­¦ç¤¾ä¼šç§‘å­¦æ–‡çŒ®ä¸­å¿ƒï¼š<a href="https://www.ncpssd.org">https://www.ncpssd.org</a></li><li>å¹¿è¥¿å£®æ—è‡ªæ²»åŒºå›¾ä¹¦é¦†ï¼š<a href="https://www.gxlib.org.cn">https://www.gxlib.org.cn</a></li><li>i-Dataï¼š<a href="https://www.cn-ki.net">https://www.cn-ki.net</a></li><li>æ™¨æ›¦æ•°å­—å›¾ä¹¦é¦†ï¼š<a href="https://31sanyi.neocities.org/ywsjk.html">https://31sanyi.neocities.org/ywsjk.html</a></li><li>ç§˜å¡”å­¦æœ¯å¯¼èˆªï¼š<a href="https://site.sciping.com">https://site.sciping.com</a></li><li>è™«éƒ¨è½å­¦æœ¯æœç´¢ï¼š<a href="https://scholar.chongbuluo.com">https://scholar.chongbuluo.com</a></li></ol><h2 id="åå››ã€å…¬å¼€è¯¾">åå››ã€å…¬å¼€è¯¾</h2><ol><li>ç½‘æ˜“å…¬å¼€è¯¾ï¼š<a href="https://open.163.com">https://open.163.com</a></li><li>æ–°æµªå…¬å¼€è¯¾ï¼š<a href="https://open.sina.com.cn">https://open.sina.com.cn</a></li><li>å­¦å ‚åœ¨çº¿ï¼š<a href="https://www.xuetangx.com">https://www.xuetangx.com</a></li><li>ä¸­å›½å¤§å­¦MOOCï¼š<a href="https://www.icourse163.org">https://www.icourse163.org</a></li><li>çˆ±è¯¾ç¨‹ï¼š<a href="https://www.icourses.edu.cn">https://www.icourses.edu.cn</a></li><li>å¤§å­¦ç”Ÿè‡ªå­¦ç½‘ï¼š<a href="https://v.dxsbb.com">https://v.dxsbb.com</a></li><li>MOOCä¸­å›½ï¼ˆæœç´¢å¼•æ“ï¼‰ï¼š<a href="https://www.cmooc.com">https://www.cmooc.com</a></li><li>Courseraï¼š<a href="https://www.coursera.org">https://www.coursera.org</a></li><li>EDXï¼š<a href="https://www.edx.org">https://www.edx.org</a></li><li>Coursadeï¼ˆæœç´¢å¼•æ“ï¼‰ï¼š<a href="https://www.coursade.com">https://www.coursade.com</a></li><li>å›½å®¶ä¸­å°å­¦äº‘è¯¾å ‚ï¼š<a href="https://ykt.eduyun.cn/ykt/index.html">https://ykt.eduyun.cn/ykt/index.html</a></li><li>ä¸€å¸ˆä¸€ä¼˜è¯¾ï¼š<a href="https://1s1k.eduyun.cn/portal/html/1s1k/course/1.html">https://1s1k.eduyun.cn/portal/html/1s1k/course/1.html</a></li><li>å­¦ä¹ å•¦ï¼š<a href="https://www.xuexila.net">https://www.xuexila.net</a></li><li>å¤§å­¦èµ„æºç½‘ï¼š<a href="https://www.dxzy163.com">https://www.dxzy163.com</a></li></ol><h2 id="åäº”ã€æ¼”è®²ç±»">åäº”ã€æ¼”è®²ç±»</h2><ol><li>TEDå®˜ç½‘ï¼š<a href="https://www.ted.com">https://www.ted.com</a></li><li>ç½‘æ˜“å…¬å¼€è¯¾TEDï¼š<a href="https://open.163.com/ted/">https://open.163.com/ted/</a></li><li>ä¸€å¸­ï¼š<a href="https://yixi.tv">https://yixi.tv</a></li><li>å¼€è®²å•¦ï¼š<a href="http://tv.cctv.com/lm/kjl/">http://tv.cctv.com/lm/kjl/</a></li><li>æ ¼è‡´è®ºé“ï¼š<a href="https://www.self.org.cn">https://www.self.org.cn</a></li><li>å¬é“ï¼š<a href="https://www.tndao.com">https://www.tndao.com</a></li><li>CCè®²å›ï¼š<a href="https://www.ccjt.tv">https://www.ccjt.tv</a></li></ol><h2 id="åå…­ã€çºªå½•ç‰‡ç±»">åå…­ã€çºªå½•ç‰‡ç±»</h2><ol><li>å¤®è§†ç½‘çºªå½•ç‰‡å®˜ç½‘ï¼š<a href="https://jishi.cctv.com">https://jishi.cctv.com</a></li><li>ä¸­å›½çºªå½•ç‰‡ç½‘ï¼š<a href="https://www.docuchina.cn">https://www.docuchina.cn</a></li><li>Bç«™çºªå½•ç‰‡é¢‘é“ï¼š<a href="https://www.bilibili.com/documentary">https://www.bilibili.com/documentary</a></li><li>è…¾è®¯è§†é¢‘çºªå½•ç‰‡é¢‘é“ï¼š<a href="https://v.qq.com/channel/doco">https://v.qq.com/channel/doco</a></li><li>çˆ±å¥‡è‰ºçºªå½•ç‰‡é¢‘é“ï¼š<a href="https://www.iqiyi.com/jilupian/">https://www.iqiyi.com/jilupian/</a></li></ol><h2 id="åä¸ƒã€è½¯ä»¶æ•™ç¨‹">åä¸ƒã€è½¯ä»¶æ•™ç¨‹</h2><ol><li>doyoudoï¼š<a href="https://doyoudo.com">https://doyoudo.com</a></li><li>ä¼˜ä¼˜æ•™ç¨‹ç½‘ï¼š<a href="https://uiiiuiii.com">https://uiiiuiii.com</a></li><li>å¥½çŸ¥ç½‘ï¼š<a href="https://www.howzhi.com">https://www.howzhi.com</a></li><li>WPSå­¦é™¢ï¼š<a href="https://www.wps.cn/learning/">https://www.wps.cn/learning/</a></li><li>Wordè”ç›Ÿï¼š<a href="https://www.wordlm.com">https://www.wordlm.com</a></li><li>ExcelHomeï¼š<a href="https://www.excelhome.net">https://www.excelhome.net</a></li><li>HiPPTerï¼š<a href="https://www.hippter.com">https://www.hippter.com</a></li><li>Oeasyï¼š<a href="https://www.oeasy.org">https://www.oeasy.org</a></li><li>æˆ‘çˆ±è‡ªå­¦ç½‘ï¼š<a href="https://www.52zxw.com">https://www.52zxw.com</a></li><li>æˆ‘è¦è‡ªå­¦ç½‘ï¼š<a href="https://www.51zxw.net">https://www.51zxw.net</a></li><li>è½¯ä»¶è‡ªå­¦ç½‘ï¼š<a href="https://rjzxw.com">https://rjzxw.com</a></li></ol><h2 id="åå…«ã€å¤–è¯­å­¦ä¹ ">åå…«ã€å¤–è¯­å­¦ä¹ </h2><ol><li>å¬åŠ›è¯¾å ‚ï¼š<a href="https://www.tingclass.net">https://www.tingclass.net</a></li><li>YouZackï¼š<a href="https://www.youzack.com">https://www.youzack.com</a></li><li>æ¯æ—¥è‹±è¯­å¬åŠ›ï¼š<a href="https://dict.eudic.net/ting">https://dict.eudic.net/ting</a></li><li>CHINADAILYï¼š<a href="https://www.chinadaily.com.cn">https://www.chinadaily.com.cn</a></li><li>MAGZINELIBï¼š<a href="https://magazinelib.com">https://magazinelib.com</a></li><li>è‹±è¯­è¯­æ³•ç½‘ï¼š<a href="https://www.yygrammar.com">https://www.yygrammar.com</a></li><li>è‹±è¯­è¯­æ³•æ£€æµ‹ï¼š<a href="https://www.nounplus.net">https://www.nounplus.net</a></li><li>50Languageï¼š<a href="https://www.goethe-verlag.com/book2/ZH/">https://www.goethe-verlag.com/book2/ZH/</a></li><li>å£°åŒå°è¯­ç§ï¼š<a href="https://www.somdom.com">https://www.somdom.com</a></li><li>ç®€æ˜æ—¥è¯­æ•™ç¨‹ï¼š<a href="https://www.nhk.or.jp/lesson/zh">https://www.nhk.or.jp/lesson/zh</a></li><li>ä¸­å›½é«˜æ ¡å¤–è¯­æ…•è¯¾å¹³å°ï¼š<a href="https://moocs.unipus.cn">https://moocs.unipus.cn</a></li></ol><h2 id="åä¹ã€è¯•å·è¯¾æœ¬ä¸‹è½½">åä¹ã€è¯•å·è¯¾æœ¬ä¸‹è½½</h2><ol><li>ç”µå­è¯¾æœ¬ç½‘ï¼ˆä¸­å°å­¦è¯¾æœ¬ï¼‰ï¼š<a href="https://www.dzkbw.com">https://www.dzkbw.com</a></li><li>è€ƒè¯•é…·ï¼š<a href="https://www.examcoo.com/index/ku">https://www.examcoo.com/index/ku</a></li><li>ç¬¬ä¸€è¯•å·ç½‘ï¼š<a href="https://www.shijuan1.com">https://www.shijuan1.com</a></li><li>é«˜ä¸­è¯•å·ç½‘ï¼ˆç™»é™†åèƒ½ä¸‹è½½ç»å¤§å¤šæ•°èµ„æºï¼‰ï¼š<a href="https://sj.smez.net">https://sj.smez.net</a></li><li>å°è·è¯•å·ç½‘ï¼š<a href="https://shijuan.zww.cn">https://shijuan.zww.cn</a></li><li>æ–°è¯¾æ ‡ç¬¬ä¸€ç½‘ï¼š<a href="https://www.xkb1.com">https://www.xkb1.com</a></li></ol><h2 id="äºŒåã€åŒ»å­¦å¥åº·">äºŒåã€åŒ»å­¦å¥åº·</h2><ol><li>MUSCLEWIKIï¼ˆå¥èº«ï¼‰ï¼š<a href="https://musclewiki.cn">https://musclewiki.cn</a></li><li>åŒ»å­¦å¾®è§†ï¼š<a href="https://www.mvyxws.com">https://www.mvyxws.com</a></li><li>é»˜æ²™ä¸œè¯Šç–—æ‰‹å†Œ å¤§ä¼—ç‰ˆï¼š<a href="https://www.msdmanuals.cn/home">https://www.msdmanuals.cn/home</a></li><li>ç™¾ç§‘ååŒ»ï¼š<a href="https://www-baikemy.xiaohe-jiankang.com">https://www-baikemy.xiaohe-jiankang.com</a></li><li>ä¸é¦™åŒ»ç”Ÿï¼š<a href="https://dxy.com">https://dxy.com</a></li><li>39å¥åº·ç½‘ï¼š<a href="https://www.39.net">https://www.39.net</a></li><li>äººå«æ…•è¯¾ï¼š<a href="https://www.pmphmooc.com">https://www.pmphmooc.com</a></li></ol><h2 id="äºŒåä¸€ã€äººæ–‡å†å²">äºŒåä¸€ã€äººæ–‡å†å²</h2><ol><li>å…¨å†å²ï¼š<a href="https://www.allhistory.com">https://www.allhistory.com</a></li><li>ä¸–ç•Œæ•°å­—å›¾ä¹¦é¦†ï¼š<a href="https://www.wdl.org/zh">https://www.wdl.org/zh</a></li><li>ä¹¦æ ¼ï¼š<a href="https://new.shuge.org">https://new.shuge.org</a></li><li>å›½å›¾å…¬å¼€è¯¾ï¼š<a href="https://open.nlc.cn">https://open.nlc.cn</a></li><li>å¤è¯—æ–‡ç½‘ï¼š<a href="https://www.gushiwen.cn">https://www.gushiwen.cn</a></li></ol><h2 id="äºŒåäºŒã€ç§‘æ™®æ¶¨çŸ¥è¯†">äºŒåäºŒã€ç§‘æ™®æ¶¨çŸ¥è¯†</h2><ol><li>wikihowï¼š<a href="https://zh.wikihow.com">https://zh.wikihow.com</a></li><li>å°é¸¡ç™¾ç§‘ï¼š<a href="https://jikipedia.com">https://jikipedia.com</a></li><li>æœå£³ï¼š<a href="https://www.guokr.com">https://www.guokr.com</a></li><li>ç§‘æ™®ä¸­å›½ï¼š<a href="https://www.kepuchina.cn">https://www.kepuchina.cn</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¦åˆ© </category>
          
          <category> ç™½å«– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦åˆ© </tag>
            
            <tag> ç™½å«– </tag>
            
            <tag> èµ„æºç½‘ç«™ </tag>
            
            <tag> è‡ªå­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¶…æ˜Ÿç½‘è¯¾åˆ·ç« èŠ‚æ¬¡æ•°è„šæœ¬</title>
      <link href="/2021/10/15/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E5%88%B7%E7%AB%A0%E8%8A%82%E6%AC%A1%E6%95%B0%E8%84%9A%E6%9C%AC/"/>
      <url>/2021/10/15/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E5%88%B7%E7%AB%A0%E8%8A%82%E6%AC%A1%E6%95%B0%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<h1>è¶…æ˜Ÿç½‘è¯¾åˆ·ç« èŠ‚æ¬¡æ•°çš„è„šæœ¬</h1><h2 id="jsä»£ç ">jsä»£ç </h2><pre><code class="hljs">  var current = location.href;   var timeout=30;   if(timeout&gt; 0) &#123;   setTimeout('reload()', 1000 * timeout);  &#125; else &#123;   location.replace(current);  &#125;function reload() &#123;   setTimeout('reload()', 1000 * timeout);   var fr4me ='&lt;frameset cols=\'*\'&gt;\n&lt;frame src=\'' + current +'\' /&gt;';   fr4me +='&lt;/frameset&gt;';   with(document)&#123; write(fr4me);   void(close());   &#125;;   &#125;</code></pre><h2 id="ç”¨æ³•">ç”¨æ³•</h2><p>æ‰“å¼€è¶…æ˜Ÿå­¦ä¹ è¯¾ç¨‹çš„é¦–é¡µï¼ˆå…¶å®ç›´æ¥åœ¨è¯¾ç¨‹é¦–é¡µåˆ·å°±è¡Œï¼Œä¸ç”¨è¿›å…¥åˆ°å…·ä½“ç« èŠ‚ï¼‰ï¼ŒæŒ‰F12æ‰“å¼€å®¡æŸ¥å…ƒç´ ï¼Œé€‰æ‹©æ§åˆ¶å°ï¼Œå°†ä¸Šè¿°ä»£ç å¤åˆ¶è¿›å»åå›è½¦ç­‰å¾…å³å¯ï¼Œæœ¬è„šæœ¬å®šä¹‰çš„æ˜¯30sä¸€æ¬¡çš„åˆ·æ–°ï¼Œç¬¬äºŒè¡Œçš„timeoutåé¢å®šä¹‰çš„å°±æ˜¯åˆ·æ–°ç­‰å¾…æ—¶é—´ã€‚ä¸ªäººå»ºè®®å°½é‡é«˜äº20s,å¦åˆ™è¶…æ˜Ÿå¹³å°æ— æ³•è¯†åˆ«ï¼Œä¸è®¡å…¥æ¬¡æ•°ã€‚</p><p><img src="/images/2021-10-15-01.png" alt="upload successful"></p>]]></content>
      
      
      <categories>
          
          <category> è¶…æ˜Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¶…æ˜Ÿè„šæœ¬ </tag>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç½‘ç»œè€ƒç ”å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
      <link href="/2021/10/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%80%83%E7%A0%94%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2021/10/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%80%83%E7%A0%94%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1>è®¡ç®—æœºç½‘ç»œè€ƒç ”å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</h1><h2 id="ä¸€-è®¡ç®—æœºç½‘ç»œæ¦‚è¿°">ä¸€.è®¡ç®—æœºç½‘ç»œæ¦‚è¿°</h2><ol><li><p>æœ€ç®€æ´çš„å®šä¹‰ï¼š è®¡ç®—æœºç½‘ç»œæ˜¯ä¸€äº›äº’è¿çš„ï¼Œè‡ªæ´½çš„è®¡ç®—æœºç³»ç»Ÿçš„é›†åˆã€‚</p></li><li><p>å¹¿ä¹‰è§‚ç‚¹çš„å®šä¹‰ï¼šè®¡ç®—æœºç½‘ç»œæ˜¯æŒ‡èƒ½å®ç°è¿œç¨‹ä¿¡æ¯å¤„ç†çš„ç³»ç»Ÿæˆ–è¿›ä¸€æ­¥èƒ½è¾¾åˆ°èµ„æºå…±äº«çš„ç³»ç»Ÿã€‚</p></li><li><p>èµ„æºå…±äº«è§‚ç‚¹çš„å®šä¹‰ï¼šè®¡ç®—æœºç½‘ç»œæ˜¯æŒ‡èƒ½ä»¥èµ„æºå…±äº«çš„å½¢å¼äº’è¿çš„è‡ªæ´½çš„è®¡ç®—æœºç³»ç»Ÿçš„é›†åˆã€‚</p></li><li><p>ç”¨æˆ·é€æ˜æ€§è§‚ç‚¹çš„å®šä¹‰ï¼šè®¡ç®—æœºç½‘ç»œæ˜¯ä¸€ä¸ªèƒ½ä¸ºç”¨æˆ·è‡ªåŠ¨ç®¡ç†èµ„æºçš„ç½‘ç»œæ“ä½œç³»ç»Ÿï¼Œå®ƒèƒ½å¤Ÿè°ƒç”¨ç”¨æˆ·æ‰€éœ€è¦çš„èµ„æºï¼Œæ•´åˆç½‘ç»œåƒæ˜¯ä¸€ä¸ªå¤§å‹çš„è®¡ç®—æœºç³»ç»Ÿä¸€æ ·å¯¹ç”¨æˆ·é€æ˜ã€‚</p></li></ol><p>ç­”ç–‘ï¼šä»€ä¹ˆæ˜¯è‡ªæ´½è®¡ç®—æœºï¼Ÿ</p><p>ç­”ï¼šè‡ªæ´½è®¡ç®—æœºæ˜¯æŒ‡èƒ½å¤Ÿè‡ªæˆ‘ç®¡ç†ï¼Œé…ç½®å’Œç»´æŠ¤çš„è®¡ç®—æœºã€‚ä¾‹å¦‚å¤§å®¶è‡ªå·±ç”¨çš„ä¸ªäººè®¡ç®—æœºï¼Œç”¨æˆ·ä¾¿èƒ½å¯¹å…¶ç®¡ç†ï¼Œé…ç½®å’Œç»´æŠ¤ã€‚è€Œä»¥å‰çš„ç»ˆç«¯ï¼Œä¾‹å¦‚æ˜¾ç¤ºå™¨åªæ˜¾ç¤ºæ•°æ®åˆ™ä¸èƒ½ç§°ä¹‹ä¸ºè‡ªæ´½è®¡ç®—æœºã€‚</p><h2 id="äºŒ-è®¡ç®—æœºç½‘ç»œçš„ç»„æˆ">äºŒ.è®¡ç®—æœºç½‘ç»œçš„ç»„æˆ</h2><h3 id="ç‰©ç†ç»„æˆ">ç‰©ç†ç»„æˆ</h3><ol><li>ç¡¬ä»¶ï¼šç”±ä¸»æœºï¼Œé€šä¿¡å¤„ç†å™¨ï¼Œé€šä¿¡çº¿è·¯ï¼Œäº¤æ¢è®¾å¤‡ç»„æˆã€‚</li><li>è½¯ä»¶ï¼šä¸»è¦åŒ…æ‹¬å®ç°èµ„æºå…±äº«çš„è½¯ä»¶å’Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨çš„å„ç§å·¥å…·è½¯ä»¶ï¼ˆå¦‚QQï¼‰</li><li>åè®®ï¼šä¸€ç§ç½‘ç»œä½¿ç”¨çš„è§„åˆ™ï¼Œå¦‚æ±½è½¦ä¸Šè·¯çš„äº¤é€šè§„åˆ™ä¸€æ ·ï¼Œæ•°æ®åœ¨ç½‘ç»œä¸­ä¹Ÿè¦éµå¾ªä¸€å®šçš„è§„åˆ™ã€‚</li></ol><h3 id="å·¥ä½œæ–¹å¼ç»„æˆ">å·¥ä½œæ–¹å¼ç»„æˆ</h3><p>ä»å·¥ä½œæ–¹å¼ä¸Šçœ‹ï¼Œè®¡ç®—æœºç½‘ç»œå¯åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šè¾¹ç¼˜éƒ¨åˆ†å’Œæ ¸å¿ƒéƒ¨åˆ†ã€‚</p><ol><li>è¾¹ç¼˜éƒ¨åˆ†ï¼šç”±æ‰€æœ‰è¿æ¥åœ¨äº’è”ç½‘ä¸Šçš„ä¾›ç”¨æˆ·ç›´æ¥ä½¿ç”¨çš„ä¸»æœºç»„æˆï¼Œç”¨æ¥è¿›è¡Œé€šä¿¡å’Œèµ„æºå…±äº«ã€‚</li><li>æ ¸å¿ƒéƒ¨åˆ†ï¼šç”±å¤§é‡çš„ç½‘ç»œï¼ˆé“¾è·¯ï¼‰å’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆï¼Œå®ƒä½è¾¹ç¼˜éƒ¨åˆ†æä¾›è¿é€šæ€§å’Œäº¤æ¢æœåŠ¡ã€‚</li></ol><p>ä¸ªäººç†è§£ï¼šè¾¹ç¼˜éƒ¨åˆ†æ˜¯æ•°æ®çš„è½½ä½“ï¼Œæ ¸å¿ƒéƒ¨åˆ†æ˜¯æŠŠè¿™äº›è½½ä½“è¿æ¥èµ·æ¥ï¼Œå½¢æˆäº’é€šæ€§çš„ç½‘ç»œç»“æ„ã€‚</p><h3 id="åŠŸèƒ½ç»„æˆ">åŠŸèƒ½ç»„æˆ</h3><p>ä»åŠŸèƒ½ä¸Šçœ‹ï¼Œè®¡ç®—æœºç½‘ç»œæ˜¯ç”±é€šä¿¡å­ç½‘å’Œèµ„æºå­ç½‘ä¸¤éƒ¨åˆ†ç»„æˆã€‚</p><ol><li>é€šä¿¡å­ç½‘ï¼šç”±å„ç§ä¼ è¾“ä»‹è´¨ã€é€šä¿¡è®¾å¤‡å’Œç›¸åº”çš„ç½‘ç»œåè®®ç»„æˆï¼Œä¸ºç½‘ç»œæä¾›æ•°æ®ä¼ è¾“ã€äº¤æ¢å’Œæ§åˆ¶èƒ½åŠ›ã€å®ç°è”ç½‘è®¡ç®—æœºä¹‹é—´çš„æ•°æ®é€šä¿¡ã€‚</li><li>èµ„æºå­ç½‘ï¼šç”±ä¸»æœºã€ç»ˆç«¯ä»¥åŠå„ç§è½¯ä»¶èµ„æºã€ä¿¡æ¯èµ„æºç»„æˆï¼Œè´Ÿè´£å…¨ç½‘çš„æ•°æ®å¤„ç†ä¸šåŠ¡ï¼Œå‘ç½‘ç»œç”¨æˆ·æä¾›å„ç§ç½‘ç»œèµ„æºå’ŒæœåŠ¡ã€‚</li></ol><p>æ³¨æ„ï¼š<strong>é€šä¿¡å­ç½‘åŒ…æ‹¬ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚å’Œç½‘ç»œå±‚ï¼</strong></p><h2 id="è®¡ç®—æœºç½‘ç»œçš„åŠŸèƒ½">è®¡ç®—æœºç½‘ç»œçš„åŠŸèƒ½</h2><p><strong>æ•°æ®é€šä¿¡ï¼š</strong> è®¡ç®—æœºç½‘ç»œ<strong>æœ€åŸºæœ¬å’Œé‡è¦</strong>çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¿æ¥æ§åˆ¶ã€ä¼ è¾“æ§åˆ¶ã€å·®é”™æ§åˆ¶ã€æµé‡æ§åˆ¶ã€è·¯ç”±é€‰æ‹©ã€å¤šè·¯å¤ç”¨ç­‰å­åŠŸèƒ½ã€‚</p><p>**èµ„æºå…±äº«ï¼š**åŒ…æ‹¬æ•°æ®èµ„æºã€è½¯ä»¶èµ„æºä»¥åŠç¡¬ä»¶èµ„æºã€‚</p><p>**åˆ†å¸ƒå¼å¤„ç†ï¼š**å½“è®¡ç®—æœºç½‘ç»œä¸­çš„æŸä¸ªè®¡ç®—æœºç³»ç»Ÿè´Ÿè·è¿‡é‡æ—¶ï¼Œå¯ä»¥å°†å…¶å¤„ç†çš„ä»»åŠ¡é€šè¿‡ç½‘ç»œä¼ é€åˆ°ç½‘ç»œä¸­å…¶å®ƒè®¡ç®—æœºç³»ç»Ÿå¤„ç†ï¼Œåˆ©ç”¨ç©ºé—²è®¡ç®—æœºèµ„æºæé«˜æ•´ä¸ªç³»ç»Ÿçš„åˆ©ç”¨ç‡ã€‚</p><p>**ä¿¡æ¯ç»¼åˆå¤„ç†ï¼š**å°†åˆ†æ•£åœ¨å„åœ°è®¡ç®—æœºä¸­çš„æ•°æ®èµ„æ–™é›†ä¸­å¤„ç†æˆ–åˆ†çº§å¤„ç†ï¼Œå¦‚è‡ªåŠ¨è®¢ç¥¨ç³»ç»Ÿã€é“¶è¡Œé‡‘èç³»ç»Ÿã€æ•°æ®é‡‡é›†ç­‰ã€‚</p><p>**è´Ÿè½½å‡è¡¡ï¼š**å°†å·¥ä½œä»»åŠ¡å‡è¡¡çš„åˆ†é…ç»™è®¡ç®—æœºç½‘ç»œä¸­çš„å„å°è®¡ç®—æœºã€‚</p><p>**æé«˜å¯é æ€§ï¼š**è®¡ç®—æœºç½‘ç»œä¸­çš„å„å°è®¡ç®—æœºå¯ä»¥é€šè¿‡ç½‘ç»œäº’ä¸ºæ›¿ä»£æœºã€‚</p><p>é™¤äº†ä»¥ä¸Šçš„é‡è¦åŠŸèƒ½å¤–ï¼Œè®¡ç®—æœºè¿˜æœ‰å…¶å®ƒä¸€äº›èƒ½æ»¡è¶³å·¥ä½œç”Ÿæ´»å’Œå¨±ä¹çš„å…¶å®ƒåŠŸèƒ½ã€‚</p><p>ç­”ç–‘ï¼šä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼è®¡ç®—æœºç³»ç»Ÿï¼Ÿä¸è®¡ç®—æœºç½‘ç»œæ¯”è¾ƒæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>ç­”ï¼šåˆ†å¸ƒå¼è®¡ç®—æœºç³»ç»Ÿæ˜¯è¿‘å‡ å¹´æµè¡Œçš„ï¼Œåˆ†å¸ƒå¼è®¡ç®—æœºç³»ç»Ÿçš„æœ€ä¸»è¦çš„ç‰¹ç‚¹æ˜¯æ•´ä¸ªç³»ç»Ÿä¸­çš„å„å°è®¡ç®—æœºå¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œä¹Ÿå°±æ˜¯ç”±è®¸å¤šè®¡ç®—æœºä¼ è¿èµ·æ¥æ„æˆçš„ä¸€ä¸ªå¤§å‹çš„è®¡ç®—æœºã€‚ç”¨æˆ·åœ¨é€šè¿‡è¾“å…¥å‘½ä»¤å¯ä»¥è¿è¡Œç¨‹åºï¼Œä½†ç”¨æˆ·ä¸çŸ¥é“ä½ çš„ç¨‹åºå…·ä½“è·‘åœ¨å“ªä¸€å°è®¡ç®—æœºã€‚å› ä¸ºé¢å‘ç”¨æˆ·çš„ä¸æ˜¯å•ä¸€çš„è®¡ç®—æœºï¼Œè€Œæ˜¯è®¸å¤šè®¡ç®—æœºç»„åˆæ„æˆçš„æ•´ä½“ã€‚åœ¨è¿™ä¸ªæ•´ä½“è®¡ç®—æœºä¸­ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºç”¨æˆ·é€‰æ‹©æ•´ä½“ä¸­çš„ä¸€å°æœ€åˆé€‚çš„è®¡ç®—æœºæ¥è¿è¡Œç¨‹åºï¼Œå¹¶æŠŠç¨‹åºè¿è¡Œçš„ç»“æœä¼ é€åˆ°åˆé€‚çš„åœ°æ–¹ã€‚</p><p>è®¡ç®—æœºç½‘ç»œçš„ä¸åŒæ˜¯åœ¨äºï¼Œç”¨æˆ·å¿…é¡»é¦–å…ˆåœ¨ä¸è¿è¡Œçš„ç¨‹åºçš„è®¡ç®—æœºç™»å½•ï¼Œç„¶åæŒ‰ç…§è®¡ç®—æœºçš„åœ°å€ï¼ˆipï¼‰ï¼Œå°†ç¨‹åºé€šè¿‡è®¡ç®—æœºç½‘ç»œä¼ é€åˆ°è¯¥è®¡ç®—æœºä¸Šå»è¿è¡Œï¼Œæœ€åæ ¹æ®ç”¨æˆ·çš„å‘½ä»¤å°†ç»“æœä¼ é€åˆ°ç”¨æˆ·æŒ‡å®šçš„è®¡ç®—æœºã€‚</p><h2 id="è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»">è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»</h2><ol><li>æŒ‰åˆ†å¸ƒèŒƒå›´ï¼šå¹¿åŸŸç½‘ã€åŸåŸŸç½‘ã€å±€åŸŸç½‘ã€ä¸ªäººåŒºåŸŸç½‘ã€‚</li><li>æŒ‰æ‹“æ‰‘ç»“æ„ï¼šæ˜Ÿå‹ç½‘ç»œã€æ€»çº¿å‹ç½‘ç»œã€ç¯å½¢ç½‘ç»œã€ç½‘çŠ¶å‹ç½‘ç»œã€‚</li><li>æŒ‰ä¼ è¾“æŠ€æœ¯ï¼šå¹¿æ’­å¼ç½‘ç»œã€ç‚¹å¯¹ç‚¹å¼ç½‘ç»œã€‚</li><li>æŒ‰ä½¿ç”¨è€…ï¼šå…¬ç”¨ç½‘ã€ä¸“ç”¨ç½‘ã€‚</li><li>æŒ‰æ•°æ®äº¤æ¢æŠ€æœ¯ï¼šç”µè·¯äº¤æ¢ç½‘ç»œã€æŠ¥æ–‡äº¤æ¢ç½‘ç»œã€åˆ†ç»„äº¤æ¢ç½‘ç»œã€‚</li></ol><p><strong>æ³¨ï¼šæ¥å…¥ç½‘ï¼ˆANï¼‰äº†è§£å³å¯ï¼</strong></p><h2 id="è®¡ç®—æœºç½‘ç»œçš„æ ‡å‡†åŒ–å·¥ä½œåŠç›¸å…³ç»„ç»‡">è®¡ç®—æœºç½‘ç»œçš„æ ‡å‡†åŒ–å·¥ä½œåŠç›¸å…³ç»„ç»‡</h2><h3 id="1-è®¡ç®—æœºç½‘ç»œæ ‡å‡†åŒ–å·¥ä½œ">1.è®¡ç®—æœºç½‘ç»œæ ‡å‡†åŒ–å·¥ä½œ</h3><p>è®¡ç®—æœºç½‘ç»œçš„æ ‡å‡†åŒ–éœ€è¦ç»å†ä»¥ä¸‹4ä¸ªæ­¥éª¤ï¼š</p><ol><li>äº’è”ç½‘è‰æ¡ˆ</li><li>å»ºè®®æ ‡å‡†ï¼ˆRFCæ–‡æ¡£ï¼‰</li><li>è‰æ¡ˆæ ‡å‡†</li><li>äº’è”ç½‘æ ‡å‡†</li></ol><h3 id="2-ç›¸å…³ç»„ç»‡">2.ç›¸å…³ç»„ç»‡</h3><ol><li>å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰</li><li>å›½é™…ç”µä¿¡è”ç›Ÿï¼ˆITUï¼‰</li><li>ç¾å›½ç”µæ°”å’Œç”µå­å·¥ç¨‹å¸ˆåä¼šï¼ˆIEEEï¼‰ç­‰</li></ol><p>ï¼ˆæœ¬ç« å®Œç»“ï¼ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
            <tag> è€ƒç ” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä¸ªå¥½ç”¨çš„è§†é¢‘å€æ•°æ’ä»¶ï¼ˆæ”¯æŒç™¾åº¦äº‘ï¼Œè¶…æ˜Ÿç­‰å¹³å°ï¼‰</title>
      <link href="/2021/09/29/%E4%B8%80%E4%B8%AA%E5%A5%BD%E7%94%A8%E7%9A%84%E8%A7%86%E9%A2%91%E5%80%8D%E6%95%B0%E6%8F%92%E4%BB%B6%EF%BC%88%E6%94%AF%E6%8C%81%E7%99%BE%E5%BA%A6%E4%BA%91%EF%BC%8C%E8%B6%85%E6%98%9F%E7%AD%89%E5%B9%B3%E5%8F%B0%EF%BC%89/"/>
      <url>/2021/09/29/%E4%B8%80%E4%B8%AA%E5%A5%BD%E7%94%A8%E7%9A%84%E8%A7%86%E9%A2%91%E5%80%8D%E6%95%B0%E6%8F%92%E4%BB%B6%EF%BC%88%E6%94%AF%E6%8C%81%E7%99%BE%E5%BA%A6%E4%BA%91%EF%BC%8C%E8%B6%85%E6%98%9F%E7%AD%89%E5%B9%B3%E5%8F%B0%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1>è¿™æ˜¯ä¸€ä¸ªæ•™ç¨‹ï¼Œæ•™ä½ å¦‚ä½•å®‰è£…ä¸€ä¸ªå¥½ç”¨çš„æµè§ˆå™¨è§†é¢‘æ§åˆ¶æ’ä»¶ã€‚</h1><h3 id="èµ·æº">èµ·æº</h3><p>å› ä¸ºæˆ‘é€šå¸¸åœ¨ç™¾åº¦ç½‘ç›˜ä¸Šçœ‹ä¸€äº›å­¦ä¹ èµ„æ–™çš„è§†é¢‘ï¼Œä½†è¿«äºæ²¡é’±å¼€vipï¼Œäº«å—ä¸äº†å€æ•°æ’­æ”¾ï¼Œå¢åŠ ä¸äº†å­¦ä¹ çš„æ•ˆç‡ã€‚å…¶å®æˆ‘ä¹‹å‰éƒ½æ˜¯ç”¨ä¸€æ®µä»£ç æ¤å…¥æ§åˆ¶å°ï¼Œæ§åˆ¶ç™¾åº¦ç½‘ç›˜çš„è§†é¢‘æ’­æ”¾çš„å€æ•°ã€‚ä½†è¿‘ä¸€æ®µæ—¶é—´ï¼Œè¯¥æ–¹æ³•æ— æ³•åœ¨æ§åˆ¶ç™¾åº¦ç½‘ç›˜è§†é¢‘çš„æ’­æ”¾å€æ•°ã€‚äºæ˜¯æˆ‘åˆå»äº†æ²¹çŒ´å®˜ç½‘ï¼Œå‘ç°é‚£äº›è„šæœ¬åŸºæœ¬ä¸Šè·Ÿæˆ‘ä¹‹å‰æ¤å…¥jsè¯­å¥æ˜¯åŒæ ·çš„åŸç†ï¼Œæ•…æ­¤ï¼Œåªèƒ½å¦å¯»å®ƒæ³•ã€‚</p><h3 id="ä»‹ç»ä¸€ä¸‹ä¹‹å‰çš„jsæ§åˆ¶åŠæ³•">ä»‹ç»ä¸€ä¸‹ä¹‹å‰çš„jsæ§åˆ¶åŠæ³•</h3><p>å…¶å®å°±ä¸€æ¡è¯­å¥å³å¯</p><pre><code class="hljs">videojs.getPlayers(&quot;video-player&quot;).html5player.tech_.setPlaybackRate(è¿™é‡Œå¡«ä½ éœ€è¦çš„å€æ•°)</code></pre><p>å¤åˆ¶ä¸Šæ®µä»£ç ï¼Œåœ¨ä½ æµè§ˆå™¨é¡µé¢æŒ‰f12ï¼Œç„¶åç‚¹Consoleã€‚å°†ä»£ç è¾“å…¥åˆ°é‡Œé¢æŒ‰å›è½¦å³å¯</p><p><img src="/images/2021-9-29-01.png" alt="upload successful"></p><p><img src="/images/2021-9-29-02.png" alt="upload successful"></p><h3 id="ä¸Šé¢çš„æ–¹æ³•å·²å¤±æ•ˆï¼Œæœ€æ–°æ–¹æ³•">ä¸Šé¢çš„æ–¹æ³•å·²å¤±æ•ˆï¼Œæœ€æ–°æ–¹æ³•</h3><p>è¿™é‡Œå°±éœ€è¦ç”¨åˆ°æµè§ˆå™¨æ’ä»¶ï¼Œè¯¥æ’ä»¶çš„ä½œè€…å·²ç»æŠŠè¯¥æ’ä»¶åœ¨githubä¸Šå¼€æºï¼Œä½†æ˜¯æˆ‘æ°´å¹³æœ‰é™ï¼Œè¿˜æ²¡çœ‹å¾—å¤ªæ‡‚ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»ä½œè€…çš„githubä¸Šå­¦ä¹ å­¦ä¹ ã€‚</p><h4 id="å®‰è£…è¯¥æ’ä»¶">å®‰è£…è¯¥æ’ä»¶</h4><h5 id="Edgeæµè§ˆå™¨ç”¨æˆ·ç‚¹æˆ‘è·³è½¬å®‰è£…">Edgeæµè§ˆå™¨ç”¨æˆ·<a href="https://microsoftedge.microsoft.com/addons/detail/global-speed-%E8%A7%86%E9%A2%91%E9%80%9F%E5%BA%A6%E6%8E%A7%E5%88%B6/mjhlabbcmjflkpjknnicihkfnmbdfced">ç‚¹æˆ‘è·³è½¬å®‰è£…</a></h5><h5 id="Firefoxæµè§ˆå™¨ç”¨æˆ·ç‚¹æˆ‘è·³è½¬å®‰è£…">Firefoxæµè§ˆå™¨ç”¨æˆ·<a href="https://addons.mozilla.org/zh-CN/firefox/addon/global-speed/">ç‚¹æˆ‘è·³è½¬å®‰è£…</a></h5><h5 id="Chromeæµè§ˆå™¨ç”¨æˆ·ç‚¹æˆ‘è·³è½¬å®‰è£…">Chromeæµè§ˆå™¨ç”¨æˆ·<a href="https://chrome.google.com/webstore/detail/global-speed/jpbjcnkcffbooppibceonlgknpkniiff">ç‚¹æˆ‘è·³è½¬å®‰è£…</a></h5><p>å› ä¸ºè°·æ­Œè¢«å¢™ï¼Œæ‰€ä»¥éœ€è¦ç¿»å¢™æ‰å¯ï¼</p><h3 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h3><p>æ’­æ”¾è§†é¢‘æ—¶ç‚¹å®ƒï¼Œåœ¨ç‚¹ä½ è¦æ’­æ”¾çš„å€æ•°å³å¯ï¼Œæœ€é«˜æ”¯æŒ16å€æ•°ï¼Œæ‰€æœ‰è§†é¢‘é€šç”¨ã€‚</p><p><img src="/images/2021-9-29-03.png" alt="upload successful"></p><p><img src="/images/2021-9-29-04.png" alt="upload successful"></p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦åˆ© </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> æ’ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°é‘«äº‘ ç§‘æ–‡å…±äº«ç½‘ç›˜ä½¿ç”¨æ•™ç¨‹ï¼ˆä½¿ç”¨æ–‡æ¡£ï¼‰</title>
      <link href="/2021/09/22/%E5%B0%8F%E9%91%AB%E4%BA%91-%E7%A7%91%E6%96%87%E5%85%B1%E4%BA%AB%E7%BD%91%E7%9B%98%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3%EF%BC%89/"/>
      <url>/2021/09/22/%E5%B0%8F%E9%91%AB%E4%BA%91-%E7%A7%91%E6%96%87%E5%85%B1%E4%BA%AB%E7%BD%91%E7%9B%98%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1>å°é‘«äº‘ ç§‘æ–‡å…±äº«ç½‘ç›˜ä½¿ç”¨æ•™ç¨‹æ–‡æ¡£</h1><h2 id="ä»€ä¹ˆæ˜¯å°é‘«äº‘-ç§‘æ–‡å…±äº«">ä»€ä¹ˆæ˜¯å°é‘«äº‘ ç§‘æ–‡å…±äº«?</h2><p>å°é‘«äº‘ ç§‘æ–‡å…±äº«æ˜¯ä¸€ä¸ªæ­å»ºåœ¨å±€åŸŸç½‘ï¼ˆè¿™é‡ŒæŒ‡æ ¡å›­ç½‘ï¼‰çš„ç§æœ‰ç½‘ç»œäº‘ç›˜ç³»ç»Ÿã€‚å®ƒå¯ä»¥è®©ä½¿ç”¨è€…åœ¨æ ¡å›­ç½‘çš„è¦†ç›–èŒƒå›´å†…ï¼Œè½»æ¾çš„å…±äº«å„ç±»èµ„æºæ–‡ä»¶ã€‚è€Œä¸”æ‘†è„±äº†æœåŠ¡å™¨å¸¦å®½çš„é™åˆ¶ï¼Œä»è€Œäº«æœ‰é£é€Ÿçš„ç½‘ç»œä½“æ£€ã€‚å°é‘«äº‘æ˜¯ä¸€æ¬¾å…·å¤‡éŸ³è§†é¢‘åœ¨çº¿æ’­æ”¾ï¼Œæ–‡æ¡£åœ¨çº¿é¢„è§ˆï¼Œå›¾ç‰‡åœ¨çº¿æŸ¥çœ‹ï¼Œå¹¶æ”¯æŒofficeæ–‡ä»¶çš„åœ¨çº¿é¢„è§ˆç­‰è¯¸å¤šåŠŸèƒ½ã€‚èƒ½å¤Ÿæ»¡è¶³åœ¨çº¿å¸ˆç”Ÿçš„åŸºæœ¬éœ€æ±‚ã€‚å¹¶ä¸”æ‹¥æœ‰å…¬å…±ä¸ç§äººåŒºåŸŸï¼Œæœ‰åˆ©äºç”¨æˆ·å¯¹è‡ªå·±çš„æ•°æ®è¿›è¡Œå®‰å…¨çš„å¤„ç†ã€‚</p><h2 id="ç™»å½•ä¸æ³¨å†Œ">ç™»å½•ä¸æ³¨å†Œ</h2><p>å°é‘«äº‘ ç§‘æ–‡å…±äº«æ”¯æŒéç”¨æˆ·çš„é¢„è§ˆå’Œä¸‹è½½ã€‚åœ¨æ‚¨ä¸æ˜¯ç™»å½•çŠ¶æ€æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹å…¬å…±åŒºåŸŸçš„æ–‡ä»¶èµ„æºã€‚ä½†æ‚¨æ— æ³•ä¸Šä¼ æ–‡ä»¶å’Œå¯¹å·²æœ‰æ–‡ä»¶è¿›è¡Œä¿®æ”¹ç®¡ç†ï¼Œæ‚¨åªæœ‰ä¸‹è½½çš„æƒåˆ©ã€‚</p><p>ç™»å½•ä¸æ³¨å†Œéƒ½åœ¨å°é‘«äº‘ ç§‘æ–‡å…±äº«çš„ä¸Šæ–¹è¾ƒä¸ºæ˜¾çœ¼å¤„ã€‚å¦‚æœæ‚¨æƒ³ä¸Šä¼ å’Œç®¡ç†æ–‡ä»¶èµ„æºï¼Œå»ºè®®æ‚¨æ³¨å†Œä¸€ä¸ªå¸å·ï¼Œå¹¶è®°ä½å®ƒã€‚</p><p>å›¾ç‰‡å±•ç¤ºï¼šç”µè„‘ç‰ˆ<img src="/images/2021-9-22-01.png" alt="upload successful"></p><p>æ‰‹æœºç‰ˆ</p><p><img src="/images/2021-9-22-02.png" alt="upload successful"></p><h2 id="ç”¨æˆ·æƒé™">ç”¨æˆ·æƒé™</h2><h3 id="æ¸¸å®¢ï¼ˆéç”¨æˆ·ï¼‰">æ¸¸å®¢ï¼ˆéç”¨æˆ·ï¼‰</h3><p>æ²¡æœ‰æ³¨å†Œçš„éç”¨æˆ·ï¼Œæˆ‘æŠŠå®ƒå®šä¹‰ä¸ºæ¸¸å®¢ã€‚ä½ ä»¬äº«æœ‰å°é‘«äº‘çš„ä¸‹è½½å’Œé¢„è§ˆåŠŸèƒ½ã€‚</p><h3 id="ç”¨æˆ·">ç”¨æˆ·</h3><p>å®Œæˆæ³¨å†Œçš„æˆ‘æŠŠå®ƒç§°ä¹‹ä¸ºç”¨æˆ·ï¼Œä½ ä»¬äº«æœ‰ä¸Šä¼ /ä¸‹è½½/åˆ›å»ºæ–‡ä»¶å¤¹/åˆ é™¤æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰/ç§»åŠ¨ï¼Œå¤åˆ¶ï¼Œç²˜è´´æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰ã€‚</p><h3 id="ç®¡ç†å‘˜">ç®¡ç†å‘˜</h3><p>å®Œæˆæ³¨å†Œåï¼Œè”ç³»æˆ‘æƒ³æˆä¸ºç®¡ç†å‘˜çš„ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™ã€‚</p><h2 id="ä½¿ç”¨æ•™ç¨‹ï¼ˆåŠŸèƒ½è¯´æ˜ï¼‰">ä½¿ç”¨æ•™ç¨‹ï¼ˆåŠŸèƒ½è¯´æ˜ï¼‰</h2><h3 id="æ–‡ä»¶æœç´¢">æ–‡ä»¶æœç´¢</h3><p>å°é‘«äº‘æä¾›äº†ä¸¤ç§æœç´¢æ–¹å¼</p><ol><li>å¿«é€Ÿæœç´¢ï¼šåœ¨ä½ å½“å‰çš„æ–‡ä»¶å¤¹å†…è¾“å…¥ä½ è¦æœç´¢å†…å®¹çš„å…³é”®å­—å¹¶ç‚¹å‡»æœç´¢å³å¯ã€‚</li><li>å…¨å±€æœç´¢ï¼šåœ¨ä½ ä¸çŸ¥é“ä½ è¦æœç´¢çš„æ–‡ä»¶å†…å®¹æ—¶ï¼Œè¾“å…¥allï¼šå…³é”®å­— å¹¶ç‚¹å‡»æœç´¢å³å¯å®Œæˆæœç´¢</li></ol><p>ç¤ºä¾‹ï¼š</p><p>å¿«é€Ÿæœç´¢</p><p><img src="/images/2021-9-22-03.png" alt="upload successful"></p><p>å…¨å±€æœç´¢</p><p><img src="/images/2021-9-22-04.png" alt="upload successful"></p><h3 id="æ‹–æ‹½ä¸Šä¼ ">æ‹–æ‹½ä¸Šä¼ </h3><p>è¯¥åŠŸèƒ½åªåœ¨ç”µè„‘ä¸Šæœ‰æ•ˆï¼Œç”¨æµè§ˆå™¨æ‰“å¼€å°é‘«äº‘ ç§‘æ–‡å…±äº«ï¼Œå¹¶ç™»å½•ã€‚åˆ°è¾¾è‡ªå·±æƒ³è¦ä¸Šä¼ çš„æ–‡ä»¶ç›®å½•ï¼Œåœ¨æœ¬åœ°ï¼ˆä½ çš„ç”µè„‘æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ï¼‰å°†ä½ è¦ä¸Šä¼ çš„æ–‡ä»¶æ‹–è¿›å°é‘«äº‘çš„çª—å£ï¼Œå³å¯å®Œæˆä¸Šä¼ ã€‚</p><p>æ³¨ï¼šåªèƒ½æ‹–æ‹½æ–‡ä»¶ä¸Šä¼ ï¼Œä¸æ”¯æŒæ‹–æ‹½æ–‡ä»¶å¤¹ä¸Šä¼ ã€‚</p><h3 id="ä¸Šä¼ æ–‡ä»¶-æ–‡ä»¶å¤¹">ä¸Šä¼ æ–‡ä»¶/æ–‡ä»¶å¤¹</h3><p>æƒ³è¦ä¸Šä¼ è¯·å…ˆæ³¨å†Œç™»å½•ã€‚åŠŸèƒ½æ‰€åœ¨ä½ç½®ï¼š</p><p>ç”µè„‘ç«¯ï¼šæ“ä½œ-&gt;ä¸Šä¼ æ–‡ä»¶ï¼ˆä¸Šä¼ æ–‡ä»¶å¤¹ï¼‰</p><p><img src="/images/2021-9-22-05.png" alt="upload successful"></p><p><img src="/images/2021-9-22-06.png" alt="upload successful"></p><p>æ‰‹æœºç«¯ï¼šç‚¹å‡»å±•å¼€/æŠ˜å èœå•-&gt;æ“ä½œ-&gt;ä¸Šä¼ æ–‡ä»¶ï¼ˆä¸Šä¼ æ–‡ä»¶å¤¹ï¼‰</p><p><img src="/images/2021-9-22-07.png" alt="upload successful"></p><p><img src="/images/2021-9-22-08.png" alt="upload successful"></p><p><img src="/images/2021-9-22-09.png" alt="overwrote existing file"></p><h3 id="æ‰“åŒ…ä¸‹è½½">æ‰“åŒ…ä¸‹è½½</h3><p>æœ¬åŠŸèƒ½æ˜¯ä¸ºäº†æ»¡è¶³ç”¨æˆ·è¦ä¸‹è½½å¾ˆå¤šæ•°ç›®æ–‡ä»¶æ—¶è€Œå‡†å¤‡çš„ã€‚æ‰“åŒ…æ ¼å¼ç»Ÿä¸€æ˜¯zipæ ¼å¼ã€‚è¯¥åŠŸèƒ½æ¯”è¾ƒå½±å“å’Œå ç”¨æœåŠ¡å™¨ç¡¬ä»¶èµ„æºï¼Œå¦‚éå¿…è¦ï¼Œè¯·å‹¿ä½¿ç”¨ã€‚</p><h3 id="æ–‡ä»¶åˆ†äº«">æ–‡ä»¶åˆ†äº«</h3><p>å°é‘«äº‘æ”¯æŒåˆ†äº«ä¸‹è½½é“¾æ¥çš„åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥åˆ†äº«æ‚¨ç§æœ‰ç©ºé—´çš„æ–‡ä»¶ç»™å…¶ä»–äººã€‚ä»–äººå¯é€šè¿‡æ‚¨åˆ†äº«çš„é“¾æ¥ç›´æ¥ä¸‹è½½ã€‚</p><p>æ¼”ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="/images/2021-9-22-10.png" alt="upload successful"></p><h3 id="è®¾ç½®æ–‡ä»¶å¤¹è®¿é—®çº§åˆ«">è®¾ç½®æ–‡ä»¶å¤¹è®¿é—®çº§åˆ«</h3><p>å°é‘«äº‘æ”¯æŒç§æœ‰åŒºåŸŸï¼Œä½†å¿…é¡»è¦æ˜¯æ–‡ä»¶å¤¹çš„å½¢å¼å»åˆ’åˆ†ç§æœ‰åŒºåŸŸã€‚åœ¨ä½ æ–°å»ºæ–‡ä»¶å¤¹æ—¶ï¼Œå¯ä»¥è®¾ç½®è®¿é—®çº§åˆ«ã€‚å³ï¼šå…¬å¼€çš„/ä»…å°ç»„/ä»…åˆ›å»ºè€…</p><p>å…¬å¼€çš„ï¼šæŒ‡ä»»ä½•äººéƒ½å¯ä»¥æµè§ˆè®¿é—®ä¸‹è½½</p><p>ä»…å°ç»„ï¼šè¯¥åŠŸèƒ½åœ¨äºä¸­åæœŸä¸æ ¡æ–¹æˆ–è€…æ ¡å†…ç»„ç»‡è¾¾æˆåˆä½œåå¼€æ”¾ã€‚æŒ‡åœ¨åŒä¸€å°ç»„çš„æˆå‘˜å¯ä»¥æµè§ˆè®¿é—®ç®¡ç†ã€‚</p><p>ä»…åˆ›å»ºè€…ï¼šæŒ‡åªæœ‰åˆ›å»ºè¿™ä¸ªæ–‡ä»¶å¤¹çš„ç”¨æˆ·è‡ªå·±æ‰å¯ä»¥è®¿é—®ï¼Œæ˜¯ç§æœ‰çš„ç©ºé—´ã€‚ï¼ˆæ³¨ï¼šæˆ‘è™½ç„¶æ˜¯ç®¡ç†å‘˜ï¼Œä½†ä¹Ÿæ— æ³•æŸ¥çœ‹ä½ çš„ç§äººç©ºé—´ï¼Œæ‰€ä»¥è¯·ä¸è¦ä¸Šä¼ å¤ªå¤šåƒåœ¾æ–‡ä»¶å ç”¨èµ„æºã€‚åç»­è¿˜åœ¨è€ƒè™‘æ˜¯å¦è¦å‰²æ‰è¿™ä¸ªåŠŸèƒ½ï¼‰</p><h3 id="å„ç§é¢„è§ˆä¸æ’­æ”¾">å„ç§é¢„è§ˆä¸æ’­æ”¾</h3><p>è¿™ä¸ªè‡ªå·±æ‘¸ç´¢ï¼Œä¸åšè§£é‡Šã€‚</p><h2 id="ç½‘é€Ÿæµ‹è¯•">ç½‘é€Ÿæµ‹è¯•</h2><p>åœ¨è¿ä¸Šæ ¡å›­ç½‘æ—¶ï¼Œå®æµ‹ç½‘é€Ÿå¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/2021-9-24-01.png" alt="overwrote existing file"></p><h2 id="å°é‘«äº‘-ç§‘æ–‡å…±äº«ç½‘å€">å°é‘«äº‘ ç§‘æ–‡å…±äº«ç½‘å€</h2><h3 id="ç‚¹æˆ‘è¿›å…¥å°é‘«äº‘-ç§‘æ–‡å…±äº«"><a href="http://10.102.0.155:1314/home.html">ç‚¹æˆ‘è¿›å…¥å°é‘«äº‘ ç§‘æ–‡å…±äº«</a></h3><h3 id="æ‰‹æœºç«¯appä¸‹è½½åœ°å€-ç‚¹æˆ‘ä¸‹è½½">æ‰‹æœºç«¯appä¸‹è½½åœ°å€ <a href="http://10.102.0.155:1314/externalLinksController/chain/%E5%B0%8F%E9%91%AB%E4%BA%91(%E5%AE%89%E5%8D%93%E6%89%8B%E6%9C%BA%E8%BD%AF%E4%BB%B6).apk?ckey=LswV8YmkJEsb4e8ttQCsYbCpj3HUYTSQopjyKQIiRYTBXiWr1nWzxJkyq%2FsgXLUJ">ç‚¹æˆ‘ä¸‹è½½</a></h3><h2 id="å£°æ˜ï¼">å£°æ˜ï¼</h2><p>è¯¥è½¯ä»¶æ˜¯æˆ‘æ­å»ºçš„ä¸€ä¸ªéè¥åˆ©æ€§å…¬ç›Šé¡¹ç›®ï¼Œæˆ‘æƒ³è®©å®ƒåœ¨ç§‘æ–‡ä¹…ç»ä¸è¡°ã€‚æ‰€ä»¥ï¼Œåœ¨æˆ‘ç¦»å¼€ç§‘æ–‡ä¹‹åï¼Œæˆ‘å¸Œæœ›æ¥æ‰‹äººèƒ½å¤Ÿä¸€ç›´ä¿æŒæˆ‘åˆ›å»ºå®ƒçš„åˆè¡·ã€‚åˆ«æŠŠå®ƒèµ‹äºˆå•†ä¸šæ°”æ¯ï¼Œéå¸¸æ„Ÿè°¢ï¼ï¼</p><h1>æ³¨æ„ï¼æœ¬ç½‘ç›˜æ­å»ºåœ¨æ ¡å›­ç½‘çš„æœåŠ¡èŒƒå›´å†…ï¼Œå¦‚è¦ä½¿ç”¨è¯·é“¾æ¥æ ¡å›­ç½‘ä½¿ç”¨ï¼å¦‚è¦ä½¿ç”¨è¯·è¿ä¸Šæ ¡å›­ç½‘ä½¿ç”¨ï¼ä»…é™æ±Ÿè‹å¸ˆèŒƒå¤§å­¦ç§‘æ–‡å­¦é™¢ï¼ï¼ï¼ï¼</h1>]]></content>
      
      
      <categories>
          
          <category> å°é‘«ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°é‘«äº‘ </tag>
            
            <tag> ä½¿ç”¨æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘å¼€å‘çš„ä¸€ä¸ªå¯ä»¥å…è´¹çœ‹è§†é¢‘çš„è½¯ä»¶</title>
      <link href="/2021/09/19/%E6%88%91%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E5%85%8D%E8%B4%B9%E7%9C%8B%E8%A7%86%E9%A2%91%E7%9A%84%E8%BD%AF%E4%BB%B6/"/>
      <url>/2021/09/19/%E6%88%91%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E5%85%8D%E8%B4%B9%E7%9C%8B%E8%A7%86%E9%A2%91%E7%9A%84%E8%BD%AF%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1>æˆ‘å¼€å‘çš„ä¸€ä¸ªå¯ä»¥å…è´¹çœ‹è§†é¢‘çš„app</h1><h2 id="1-å‰è¨€">1.å‰è¨€</h2><p>æˆ‘ä¸ºä»€ä¹ˆå¼€å‘è¿™ä¸ªè½¯ä»¶å‘¢ï¼Ÿå› ä¸ºé’±åŒ…ç©ºç©ºï¼Œå„å¤§å¹³å°çš„vipå´åˆæ¶¨ä»·ã€‚</p><p>ä¸ºäº†é™ä½æˆæœ¬çš„ä¸°å¯Œæˆ‘çš„å¨±ä¹ç”Ÿæ´»ï¼Œæ‰€ä»¥å°é‘«å½±è§†appä¾¿åœ¨æˆ‘çš„æ»¡æ€€æœŸå¾…ä¸­è¯ç”Ÿäº†ã€‚</p><p>äºæ˜¯ä¹ï¼Œä¾¿å¼€å§‹èŠ±æ—¶é—´å¦‚ä½•å»ç ´è§£ï¼Œéšç€äº†è§£çš„æ·±å…¥ï¼Œæˆ‘å‘ç°ç ´è§£å¹³å°çš„è§†é¢‘ç®€ç›´æ˜¯ä¸€ä»¶æ¯”ç™»å¤©è¿˜éš¾çš„äº‹ã€‚</p><p>åŸå› åœ¨äºæˆ‘ä»¬ç”¨çˆ±å¥‡è‰ºè…¾è®¯ä¼˜é…·ç­‰çœ‹vipè§†é¢‘ï¼Œå…¶å®æ˜¯ç”¨æˆ·æœ‰ä¸€ä¸ªç§æœ‰ä¸”å”¯ä¸€çš„å¯†é’¥ã€‚åœ¨ç”¨æˆ·çœ‹è§†é¢‘æ—¶ä¸Šä¼ è¿™æ®µå¯†é’¥å¯¹æ¯”å¹³å°ç”¨æˆ·çš„æ•°æ®åº“ï¼Œæˆç«‹åæ‰è¿”å›å®Œæ•´çš„è§†é¢‘æµã€‚ä¹Ÿå°±æ˜¯æ²¡æœ‰è¿™ä¸ªå¯†é’¥ï¼Œä½ å°±æ— æ³•æŠ“å–å®Œæ•´çš„æ•°æ®åŒ…ï¼ˆè§†é¢‘æµï¼‰ã€‚é™¤éä½ èƒ½é»‘è¿›çˆ±å¥‡è‰ºè…¾è®¯ä¼˜é…·ç­‰å¹³å°çš„æœåŠ¡å™¨å»ç¯¡æ”¹æ•°æ®åº“çš„ç”¨æˆ·æ•°æ®ã€‚å½“ç„¶ï¼Œè¿™å¯¹æˆ‘æ¥è¯´è¿˜æ˜¯å¾ˆé¥è¿œçš„äº‹ï¼Œä¸”é£é™©å¤ªå¤ªå¤ªå¤§äº†ã€‚ä¸€ä½†æŠ“åˆ°è½»åˆ™èµ”ä»˜å·¨é¢èµ”å¿ï¼Œé‡åˆ™å¯èƒ½æœ‰ç‰¢ç‹±ä¹‹ç¾ã€‚</p><p>ä¸è¿‡å¥½åœ¨ï¼Œè¿˜æ˜¯æœ‰åˆ«çš„è§£å†³æ‰‹æ®µã€‚æ¯”å¦‚ï¼šè§£ææºï¼ï¼</p><p>è§£ææºæ˜¯ä»–äººæä¾›çš„ä¸€ä¸ªæ¥å£ï¼Œæ¥å£çš„å¦ä¸€è¾¹æ˜¯ä¸°å¯Œçš„è§†é¢‘åº“ã€‚æ¥å£å¦ä¸€è¾¹çš„è§†é¢‘åº“çš„èµ„æºæ˜¯åŒæ­¥äºå„å¹³å°çš„è§†é¢‘åº“ã€‚æ‰€ä»¥ä¾¿å¯ä»¥åšåˆ°å…è´¹çœ‹å„å¹³å°çš„vipï¼Œä»˜è´¹ï¼Œç”šè‡³è¶…å‰ç‚¹æ’­äº†ã€‚</p><h1>2.ä¸‹è½½åœ°å€</h1><p>è¿™é‡Œå°±è¦ä»‹ç»æˆ‘æ­å»ºçš„å¦ä¸€ä¸ªç½‘ç«™äº†ã€‚&quot;å°é‘«appå•†åŸâ€ <a href="https://jinbilianshao.github.io/xiaoxinapp/">ç‚¹æˆ‘è¿›å»å°é‘«appå•†åŸ</a></p><p>å°é‘«appå•†åŸæ­å»ºçš„åŸå› æ˜¯éšç€æˆ‘å¼€å‘çš„appè¶Šæ¥è¶Šå¤šï¼Œä¾¿å¼€å§‹æƒ³æŠŠè¿™äº›ä¸€å¼€å§‹æœåŠ¡äºæˆ‘çš„åº”ç”¨ä¹Ÿèƒ½æœåŠ¡äºå¤§ä¼—ï¼Œä»è€Œå‘æŒ¥å®ƒåº”æœ‰çš„å­˜åœ¨ä»·å€¼ã€‚å°é‘«appå•†åŸå±•ç¤ºå¦‚ä¸‹å›¾ï¼š</p><p>ç”µè„‘ç«¯å±•ç¤ºï¼š</p><p><img src="/images/2021-9-19-01.png" alt="overwrote existing file"></p><p><img src="/images/2021-9-19-02.png" alt="upload successful"></p><p><img src="/images/2021-9-19-03.png" alt="upload successful"></p><h2 id="æ³¨æ„ï¼ï¼ï¼æœ¬å•†åŸçš„appå‡ä¸ºå®‰å“æ‰‹æœºä¸Šçš„åº”ç”¨ï¼ï¼ioså’Œç”µè„‘éƒ½ä¸èƒ½ç”¨ï¼ï¼">æ³¨æ„ï¼ï¼ï¼æœ¬å•†åŸçš„appå‡ä¸ºå®‰å“æ‰‹æœºä¸Šçš„åº”ç”¨ï¼ï¼ioså’Œç”µè„‘éƒ½ä¸èƒ½ç”¨ï¼ï¼</h2><p>æ‰‹æœºç«¯å±•ç¤ºï¼š</p><p><img src="/images/2021-9-19-04.png" alt="upload successful"></p><p><img src="/images/2021-9-19-05.png" alt="upload successful"></p><h1>å°é‘«å½±è§†appä½¿ç”¨æ•™ç¨‹</h1><p>é¦–å…ˆåœ¨å°é‘«appå•†åŸä¸‹è½½å°é‘«å½±è§†appï¼Œå¹¶å®‰è£…åœ¨è‡ªå·±çš„å®‰å“æ‰‹æœºä¸Šã€‚</p><p>1.æ‰“å¼€å°é‘«å½±è§†app</p><p>æ‰“å¼€å°é‘«å½±è§†appåï¼Œä¼šå¼¹å‡ºä¸€ä¸ªä½¿ç”¨è¯´æ˜çš„çª—å£ï¼Œè¯·è®¤çœŸé˜…è¯»è¯¥è¯´æ˜ã€‚</p><p><img src="/images/2021-9-19-06.png" alt="upload successful"></p><p>2.é€‰æ‹©ä½ è¦è§‚çœ‹çš„å¹³å°</p><p>åœ¨è½¯ä»¶çš„æœ€ä¸‹æ–¹ï¼Œæœ‰å››å®¶è§†é¢‘çš„å¹³å°ï¼ˆçˆ±å¥‡è‰ºï¼Œè…¾è®¯ï¼Œä¼˜é…·ï¼ŒèŠ’æœï¼‰è¿™å››å®¶åŸºæœ¬ä¸Šåº”è¯¥èƒ½æ»¡è¶³å¤§å¤šæ•°äººçš„å½±è§†éœ€æ±‚äº†ã€‚</p><p>é€‰æ‹©å¹³å°åï¼Œä¼šå¼¹å‡ºä¸€ä¸ªé€‰é¡¹ï¼Œæˆ‘ä»¬é€‰æ‹©æµè§ˆå™¨å³å¯ï¼Œä¸è¦ç‚¹æ‰“å¼€æŸå¹³å°appï¼Œä¼šè®©ä½ ä¸‹è½½çš„ã€‚è¯¯ç‚¹çš„è¯å¼¹å‡ºä¸‹è½½ç•Œé¢æ—¶ï¼Œç‚¹å‘¨å›´çš„ç©ºç™½å¤„å³å¯å…³é—­å–æ¶ˆã€‚</p><p><img src="/images/2021-9-19-07.png" alt="upload successful"></p><p>3.é€‰æ‹©ä½ è¦è§‚çœ‹çš„è§†é¢‘ç›´æ¥æ‰“å¼€å³å¯è§‚çœ‹</p><p>æœ¬è½¯ä»¶å®ç°äº†å…¨è‡ªåŠ¨åŒ–ï¼Œä¸ç”¨æ‰‹åŠ¨æ“ä½œï¼Œæ‰“å¼€åç¨ç­‰å³å¯å…è´¹è§‚çœ‹ã€‚</p><p>å…³äºæ— æ³•è§‚çœ‹çš„ç‚¹å‡»å³ä¸‹è§’è§†é¢‘çš„æ‚¬æµ®å›¾æ ‡ï¼Œæ‰‹åŠ¨æŒ‡å®šè§£ææºã€‚</p><p>è¿™é‡Œä¸»æ¨ åŸ-ä¹ä¹ è¿™ä¸ªè§£ææºï¼Œå¿«é€Ÿä¸”ç¨³å®šï¼ï¼ï¼</p><p><img src="/images/2021-9-19-08.png" alt="overwrote existing file"></p><p><img src="/images/2021-9-19-10.png" alt="upload successful"></p><p><img src="/images/2021-9-19-09.png" alt="upload successful"></p><p><img src="/images/2021-9-19-11.png" alt="upload successful"></p><p><img src="/images/2021-9-19-12.png" alt="upload successful"></p><h1>ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼Œå¯¹äº†è½¯ä»¶é‡Œå†…åµŒäº†æˆ‘çš„ä¸ªäººç½‘ç«™å’Œæˆ‘çš„QQè”ç³»æ–¹å¼ã€‚åœ¨å·¦ä¸Šè§’å“¦ï½</h1>]]></content>
      
      
      <categories>
          
          <category> å°é‘«ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦åˆ© </tag>
            
            <tag> ä½¿ç”¨æ•™ç¨‹ </tag>
            
            <tag> å°é‘«ç³»åˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•é¢˜ï¼šCè¯­è¨€åˆ¤æ–­å›æ–‡æ•°</title>
      <link href="/2021/09/17/OJ%E9%A2%98C%E8%AF%AD%E8%A8%80%E5%88%A4%E6%96%AD%E5%9B%9E%E6%96%87%E6%95%B0/"/>
      <url>/2021/09/17/OJ%E9%A2%98C%E8%AF%AD%E8%A8%80%E5%88%A4%E6%96%AD%E5%9B%9E%E6%96%87%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1>Cè¯­è¨€åˆ¤æ–­å›æ–‡æ•°</h1><h2 id="ä»€ä¹ˆæ˜¯å›æ–‡æ•°ï¼Ÿ">ä»€ä¹ˆæ˜¯å›æ–‡æ•°ï¼Ÿ</h2><p>å›æ–‡æ•°æ˜¯æŒ‡ä¸€ä¸ªæ•°åè¿‡æ¥å’ŒåŸæ¥æ•°å€¼ä¸å˜çš„æ•°</p><h2 id="Cè¯­è¨€è®¾è®¡å›æ–‡æ•°çš„æ€æƒ³">Cè¯­è¨€è®¾è®¡å›æ–‡æ•°çš„æ€æƒ³</h2><p>1.é¦–å…ˆæˆ‘ä»¬çŸ¥é“å›æ–‡æ•°æ˜¯æŒ‡ä¸€ä¸ªæ•°åè¿‡æ¥å’ŒåŸæ¥çš„æ•°å€¼ç›¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆæŠŠæ•°å€¼åè¿‡æ¥</p><p>2.å°†åè¿‡æ¥çš„æ•°å€¼å’ŒåŸæ•°å€¼æ¯”å¯¹å¤§å°ï¼Œç›¸åŒåˆ™æ˜¯å›æ–‡æ•°ï¼Œä¸åŒåˆ™ä¸æ˜¯å›æ–‡æ•°</p><h2 id="å®ç°æ­¥éª¤">å®ç°æ­¥éª¤</h2><p>1.é¦–å…ˆè¦å°†æœ‰è¾“å…¥</p><pre><code class="hljs">printf(&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°ï¼š&quot;);scanf(&quot;%d&quot;, &amp;s);</code></pre><p>è¿™é‡Œæˆ‘ä»¬ç”¨scanfï¼ˆï¼‰è¾“å…¥å‡½æ•°è·å–ç”¨æˆ·è¾“å…¥ï¼Œ%dæ˜¯æŒ‡è¾“å…¥çš„æ˜¯ä¸ªæ•´æ•°å‹ã€‚</p><p>printfï¼ˆï¼‰æ˜¯è¾“å‡ºï¼Œè¿™é‡Œç”¨äºæç¤ºç”¨æˆ·è¾“å…¥æ•°å€¼ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å†™æˆ</p><pre><code class="hljs">scanf(&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°ï¼š%d&quot;, &amp;s);</code></pre><p>ä¸ªäººä¸å»ºè®®è¿™æ ·å†™ï¼Œå› ä¸ºscanfï¼ˆï¼‰å‡½æ•°çš„ä¸€äº›ç‰¹æ€§ï¼Œå¾€å¾€å®¹æ˜“å‡ºé—®é¢˜ã€‚å°¤å…¶æ˜¯åœ¨å­—ç¬¦çš„å¤„ç†ä¸Šï¼Œä¾‹å¦‚ç”¨æˆ·è¾“å…¥çš„æ•°æ®æ˜¯é€šè¿‡é”®ç›˜ï¼Œé”®ç›˜ä¸Šçš„æ‰€æœ‰æŒ‰é”®è¾“å…¥åˆ°ç”µè„‘éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚ä½ æŒ‰å›è½¦ä¹Ÿæ˜¯å‘ç”µè„‘è¾“å…¥äº†ä¸€ä¸ªå­—ç¬¦/nã€‚è¿™ä¸ªè¾“å…¥çš„æ•°æ®å­˜æ”¾åœ¨å†…å­˜ç¼“å†²åŒºï¼Œscanfä¾¿æ˜¯å¾ªç¯å–å‡ºå†…å­˜ç¼“å†²åŒºçš„æ•°æ®ã€‚å¦‚æœæ˜¯å­—ç¬¦å‹ï¼Œåˆ™åŒ…å«äº†ä½ è¾“å…¥çš„æ‰€æœ‰æ•°æ®ï¼Œè¿™ä¹Ÿæ˜¯ç”¨scanfæ‰€è¦æ³¨æ„çš„åœ°æ–¹ã€‚</p><p>å…³äºscanfçš„ç”¨æ³•å’Œæ³¨æ„äº‹é¡¹ï¼Œæˆ‘ä¼šå•ç‹¬åˆ—å‡ºä¸€ä¸ªç« èŠ‚å»è®²ï¼Œè¿™é‡Œå…ˆä¸æ·±å…¥äº†ã€‚</p><p>2.æ•°å€¼åè½¬</p><p>æƒ³è¦æ•°å€¼åè½¬ï¼Œé¦–å…ˆè¦çŸ¥é“ä½ è¾“å…¥çš„æ•°å€¼æ˜¯å¤šå°‘ä½ï¼Œç„¶åæ ¹æ®ä½æ•°åŠ ä¸ªå¾ªç¯ï¼ŒæŠŠæ•°å€¼ä¸€ä¸ªä¸ªåè½¬åœ¨å­˜æ”¾åœ¨å¤‡ç”¨çš„å˜é‡ä¸­ã€‚</p><pre><code class="hljs">//å¾ªç¯è®¡ç®—è¾“å…¥æ•°æ˜¯å¤šå°‘ä½while ( s != 0)&#123;    s = s / 10;    ++t;</code></pre><p>}ä¸Šé¢ä¾¿æ˜¯ç”¨äºè®¡ç®—è¾“å…¥æ•°çš„ä½æ•°çš„å®ç°ï¼Œå¾ˆç®€å•ï¼Œå› ä¸ºæ˜¯æ•´æ•°å‹ï¼Œå¾—ä¸åˆ°å°æ•°ï¼Œæ‰€ä»¥åªèƒ½æ•´é™¤å¹¶ä¸¢å¤±ä½™æ•°ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>int s = 11/2; //=5ä½™1ï¼Œè€Œè¿”å›ç»™sçš„åªæœ‰5ï¼Œ1ä¾¿ä¸è¦äº†ã€‚Â  Â æ‰€ä»¥é€šè¿‡è¿™ç§æ•´é™¤çš„å½¢å¼é™¤ä»¥10ï¼Œæœ€åç­‰äº0æ—¶ï¼Œæ‰€ç´¯è®¡çš„æ•°ä¾¿æ˜¯è¾“å…¥æ•°çš„ä½æ•°äº†ã€‚</p><p>ä½æ•°çŸ¥é“äº†ï¼Œæ¥ä¸‹æ¥ä¾¿æ˜¯æ•°å€¼çš„åè½¬ã€‚</p><pre><code class="hljs">//wæ˜¯ä½æ•°ï¼Œsæ˜¯è¾“å…¥çš„å€¼ï¼Œä¹‹å‰è¦å®šä¹‰ä¸€ä¸ªå®¹å™¨å˜é‡æ”¾åè½¬æ•°è¿™é‡Œh,dæ˜¯é‚£ä¸ªå®¹å™¨ã€‚for(int i = 0, i &lt; w, i++) &#123;d = s % 10; //%æ˜¯å–ä½™è¿ç®—ç¬¦h = h * 10 + d;s = s / 10;&#125;</code></pre><p>æ€è·¯è®²è§£ï¼šå…ˆå¯¹è¾“å…¥æ•°å–ä½™è·å–æœ€åçš„ä½™æ•°ï¼Œä¾‹å¦‚ï¼š</p><pre><code class="hljs">s = 21 % 10; // 21 / 10 = 2 ..1ã€‚sæ˜¯1ï¼Œä½™æ•°</code></pre><p>è¿™æ ·å°±å¯ä»¥å¾—åˆ°å€’æ•°ç¬¬ä¸€ä¸ªæ•°äº†,ç„¶åå®šä¹‰ä¸€ä¸ªintç±»å‹çš„hï¼Œåˆå§‹å€¼ç»™0ï¼Œç”¨æ¥å­˜æ”¾åè¿‡æ¥çš„æ•°çš„å®¹å™¨ã€‚æˆ‘ä»¬ä¸Šä¸€æ­¥è·å–å€’æ•°ç¬¬ä¸€ä¸ªæ•°ï¼Œä½†æ€ä¹ˆæé«˜å®ƒçš„ä½çº§å‘¢ï¼Ÿæ‰€ä»¥ï¼Œæ¥ä¸‹æ¥é€šè¿‡hå­˜æ”¾ä¸Šä¸€æ¬¡å¾ªç¯çš„ä¸­é—´ä»¶dï¼Œä¹Ÿå°±æ˜¯ä¸ªä½æ•°çš„å€¼ï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ªå¾ªç¯æå‡å®ƒçš„ä½çº§ï¼Œå³ä¹˜10ã€‚æ‰€ä»¥</p><pre><code class="hljs">h = h * 10 + d; //è¿™ä¸ªæ‰æ˜¯é‡ç‚¹ï¼ï¼æ ¸å¿ƒæ‰€åœ¨ï¼ï¼</code></pre><p>3.æ¥ä¸‹æ¥å°±æ˜¯åˆ¤æ–­</p><p>ç”¨ifè¯­å¥åˆ¤æ–­åŸæ•°å€¼så’Œåè½¬åå­˜æ”¾å®¹å™¨å˜é‡hï¼Œä¸€æ ·åˆ™è¾“å‡ºæ˜¯å›æ–‡æ•°ï¼Œä¸ä¸€æ ·åˆ™ä¸æ˜¯å›æ–‡æ•°ã€‚</p><pre><code class="hljs">//å¯¹åè½¬çš„æ•°è¿›è¡Œå›æ–‡æ•°åˆ¤æ–­if(s == h)&#123;printf(&quot;%d æ˜¯å›æ–‡æ•°ï¼ï¼\n&quot;, s);&#125;else&#123;printf(&quot;%d ä¸æ˜¯å›æ–‡æ•°ï¼ï¼\n&quot;,s);&#125;</code></pre><h2 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h2><pre><code class="hljs">#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;/**  ojié¢˜ï¼šè¾“å…¥ä¸€ä¸ªæ•°åˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡æ•°* å›æ–‡æ•°ï¼šä¾‹å¦‚123321è¿™ç§æ•°ï¼Œåè¿‡æ¥å’Œæ­£è¿™æ˜¯åŒä¸€ä¸ªæ•°çš„å«å›æ–‡æ•°** */int main()&#123;int i,h,s;int v = 0;printf(&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°ï¼š&quot;);scanf(&quot;%d&quot;, &amp;i);s = i;while( i !=0)  //å¾ªç¯å†éï¼Œåè½¬å›æ–‡æ•°&#123;        h = i % 10; //å¯¹iè¿›è¡Œ10çš„å–ä½™ï¼Œå¾—åˆ°çš„æ•°æ”¾åˆ°hä¸­        v = v *10 + h; // æœ¬é¢˜çš„ç²¾åæ‰€åœ¨ã€‚        i = i / 10; // å› ä¸ºæ˜¯æ•´æ•°ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è¿™å¥æ¥è®¡ç®—è¾“å…¥æ•°çš„ä½æ•°    &#125;    //å¯¹åè½¬çš„æ•°è¿›è¡Œå›æ–‡æ•°åˆ¤æ–­    if(s == v)    &#123;        printf(&quot;%d æ˜¯å›æ–‡æ•°ï¼ï¼\n&quot;, s);    &#125;else&#123;        printf(&quot;%d ä¸æ˜¯å›æ–‡æ•°ï¼ï¼\n&quot;,s);    &#125;&#125;</code></pre><p>è¿™æ˜¯ç®€åŒ–ç‰ˆï¼Œä¸åˆ©äºç†è§£ï¼Œæ‰€ä»¥ä¸Šé¢æˆ‘æ‹†åˆ†çš„å†™çš„ã€‚å®Œæ•´ç‰ˆæˆ‘å°†ä½æ•°å’Œåè½¬åˆå¹¶äº†ã€‚</p><h2 id="è¿è¡Œæ•ˆæœå›¾">è¿è¡Œæ•ˆæœå›¾</h2><p>ç¯å¢ƒï¼šmanjaro ï¼ˆlinuxç³»ç»Ÿï¼‰å·¥å…·ï¼švscod</p><p><img src="/images/2021-9-1701.png" alt="upload successful"></p><p><img src="/images/2021-9-1702.png" alt="upload successful"></p><p><img src="/images/2021-9-1703.png" alt="upload successful"></p><p><img src="/images/2021-9-1704.png" alt="upload successful"></p>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€çªå…”å­</title>
      <link href="/2021/09/17/%E4%B8%80%E7%AA%9D%E5%85%94%E5%AD%90/"/>
      <url>/2021/09/17/%E4%B8%80%E7%AA%9D%E5%85%94%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<h1>ä½ ä»¬çˆ±çœ‹çš„å…”å­</h1><h3 id="1">1.</h3><p><img src="/images/001.png" alt="upload successful"></p><h3 id="2">2.</h3><p><img src="/images/002.png" alt="upload successful"></p><h3 id="3">3.</h3><p><img src="/images/003.png" alt="upload successful"></p><h3 id="4">4.</h3><p><img src="/images/004.png" alt="overwrote existing file"></p><h3 id="5">5.</h3><p><img src="/images/005.png" alt="overwrote existing file"></p><h3 id="6">6.</h3><p><img src="/images/006.png" alt="overwrote existing file"></p><h3 id="7">7.</h3><p><img src="/images/007.png" alt="overwrote existing file"></p><h3 id="8">8.</h3><p><img src="/images/008.png" alt="overwrote existing file"></p><h3 id="9">9.</h3><p><img src="/images/009.png" alt="overwrote existing file"></p><h3 id="10">10.</h3><p><img src="/images/010.png" alt="upload successful"></p><h3 id="11">11.</h3><p><img src="/images/011.png" alt="upload successful"></p><h3 id="12">12.</h3><p><img src="/images/012.png" alt="upload successful"></p><h3 id="13">13.</h3><p><img src="/images/013.png" alt="upload successful"></p><h3 id="14">14.</h3><p><img src="/images/000.png" alt="upload successful"></p>]]></content>
      
      
      <categories>
          
          <category> å£çº¸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦åˆ© </tag>
            
            <tag> å£çº¸ </tag>
            
            <tag> å…”å­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ ä»¬è¦å¾—å›¾</title>
      <link href="/2021/09/17/%E4%BD%A0%E4%BB%AC%E8%A6%81%E5%BE%97%E5%9B%BE/"/>
      <url>/2021/09/17/%E4%BD%A0%E4%BB%AC%E8%A6%81%E5%BE%97%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<h1>ä½ ä»¬è¦å¾—å£çº¸</h1><ol><li></li></ol><p><img src="/images/1313.png" alt="upload successful"></p><ol start="2"><li></li></ol><p><img src="/images/15151.png" alt="upload successful"></p><ol start="3"><li></li></ol><p><img src="/images/11111.png" alt="upload successful"></p>]]></content>
      
      
      <categories>
          
          <category> å£çº¸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å£çº¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å£°æ˜ï¼šå‰ä¸€ä¸ªåšå®¢å¤ªèŠ±é‡Œèƒ¡å“¨ï¼Œå½±å“æ€§èƒ½</title>
      <link href="/2021/09/17/%E5%A3%B0%E6%98%8E%EF%BC%9A%E5%89%8D%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2%E5%A4%AA%E8%8A%B1%E9%87%8C%E8%83%A1%E5%93%A8%EF%BC%8C%E5%BD%B1%E5%93%8D%E6%80%A7%E8%83%BD/"/>
      <url>/2021/09/17/%E5%A3%B0%E6%98%8E%EF%BC%9A%E5%89%8D%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2%E5%A4%AA%E8%8A%B1%E9%87%8C%E8%83%A1%E5%93%A8%EF%BC%8C%E5%BD%B1%E5%93%8D%E6%80%A7%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<h1>å£°æ˜ï¼šå‰ä¸€ä¸ªç‰ˆæœ¬å¤ªèŠ±é‡Œèƒ¡å“¨ï¼Œå½±å“æœåŠ¡å™¨è®¿é—®å’Œå“åº”é€Ÿåº¦ï¼Œæ¢äº†è¿™ä¸ªæ¸…æ–°å¤šäº†ï½</h1>]]></content>
      
      
      
        <tags>
            
            <tag> å£°æ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä¸ªç®€å•çš„æºç çˆ¬è™«çš„å®ç°</title>
      <link href="/2021/09/16/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%BA%90%E7%A0%81%E7%88%AC%E8%99%AB%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>/2021/09/16/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%BA%90%E7%A0%81%E7%88%AC%E8%99%AB%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1>ä¸€ä¸ªç®€å•çš„æºä»£ç çˆ¬è™«çš„å®ç°ï¼ˆåŸºäºpythonï¼‰</h1><h2 id="1-ä¸‹è½½pythonå’Œpythonçš„ideï¼ˆæ‡’ï¼Œä¸‹è½½å®‰è£…è‡ªè¡Œç™¾åº¦ï¼Œæœ¬æ–‡ä¸“æ³¨æºä»£ç çš„å®ç°ï¼‰">1.ä¸‹è½½pythonå’Œpythonçš„ideï¼ˆæ‡’ï¼Œä¸‹è½½å®‰è£…è‡ªè¡Œç™¾åº¦ï¼Œæœ¬æ–‡ä¸“æ³¨æºä»£ç çš„å®ç°ï¼‰</h2><h2 id="2-Requstsç®€ä»‹">2.Requstsç®€ä»‹</h2><h3 id="è¿™æ˜¯ä¸€ä¸ªpythonåº“ï¼Œå…¶åŠŸèƒ½æ˜¯ç”¨äºçˆ¬ç½‘é¡µæ•°æ®ã€‚winç”¨æˆ·åœ¨cmdä¸­è¾“å…¥">è¿™æ˜¯ä¸€ä¸ªpythonåº“ï¼Œå…¶åŠŸèƒ½æ˜¯ç”¨äºçˆ¬ç½‘é¡µæ•°æ®ã€‚winç”¨æˆ·åœ¨cmdä¸­è¾“å…¥</h3><pre><code class="hljs">pip install requsts</code></pre><h3 id="å³å¯å®‰è£…">å³å¯å®‰è£…</h3><h3 id="Requests-is-an-Apache2-Licensed-HTTP-library-written-inPython-for-human-beings">Requests is an Apache2 Licensed HTTP library, written inPython, for human beings.</h3><p>Pythonâ€™s standard urllib2 module provides most ofthe HTTP capabilities you need, but the API is <a href="http://thoroughlybroken.It">thoroughlybroken.It</a> was built for a different time â€” and a different web. It requires anenormous amount of work (even method overrides) to perform the simplest oftasks.</p><p>Requests takes all of the work out of Python HTTP/1.1 â€” making your integrationwith web services seamless. Thereâ€™s no need to manually add query strings toyour URLs, or to form-encode your POST data. Keep-alive and HTTP connectionpooling are 100% automatic, powered by urllib3,which is embedded within Requests.</p><p>------from   <a href="http://www.python-requests.org/en/latest/">http://www.python-requests.org/en/latest/</a></p><h3 id="ä»¥ä¸Šæ˜¯æ¥è‡ªRequstså®˜ç½‘çš„ä»‹ç»">ä»¥ä¸Šæ˜¯æ¥è‡ªRequstså®˜ç½‘çš„ä»‹ç»</h3><h2 id="3-æœ€ç®€å•çš„çˆ¬è™«ä»£ç ">3.æœ€ç®€å•çš„çˆ¬è™«ä»£ç </h2><h3 id="ç›´æ¥é€šè¿‡getè·å–">ç›´æ¥é€šè¿‡getè·å–</h3><pre><code class="hljs">import requests #å¯¼å…¥RequstsåŒ…html = requests.get('http://www.baidu.com')#é€šè¿‡getæ–¹æ³•ç›´æ¥è·å–æºç ä¸”å­˜æ”¾åœ¨htmlä¸­print html.text #æ‰“å°è¾“å‡ºhtmlå˜é‡ä¸­çš„æ•°æ®</code></pre><h3 id="ä¿®æ”¹httpå¤´ï¼ˆè§£å†³ä¸­æ–‡ä¹±ç ï¼Œä»¿çœŸæµè§ˆå™¨å¯¹æŠ—åçˆ¬è™«ï¼‰">ä¿®æ”¹httpå¤´ï¼ˆè§£å†³ä¸­æ–‡ä¹±ç ï¼Œä»¿çœŸæµè§ˆå™¨å¯¹æŠ—åçˆ¬è™«ï¼‰</h3><pre><code class="hljs">import requestsimport re#ä¸‹é¢ä¸‰è¡Œæ˜¯ç¼–ç è½¬æ¢çš„åŠŸèƒ½import sysreload(sys)sys.setdefaultencoding(&quot;utf-8&quot;)#heaæ˜¯æˆ‘ä»¬è‡ªå·±æ„é€ çš„ä¸€ä¸ªå­—å…¸ï¼Œé‡Œé¢ä¿å­˜äº†user-agentã€‚#è®©ç›®æ ‡ç½‘ç«™è¯¯ä»¥ä¸ºæœ¬ç¨‹åºæ˜¯æµè§ˆå™¨ï¼Œå¹¶éçˆ¬è™«ã€‚#ä»ç½‘ç«™çš„Requests Headerä¸­è·å–ã€‚ã€å®¡æŸ¥å…ƒç´ ã€‘hea = &#123;'User-Agent':'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.118 Safari/537.36'&#125;html = requests.get('http://jp.tingroom.com/yuedu/yd300p/',headers = hea)html.encoding = 'utf-8' #è¿™ä¸€è¡Œæ˜¯å°†ç¼–ç è½¬ä¸ºutf-8å¦åˆ™ä¸­æ–‡ä¼šæ˜¾ç¤ºä¹±ç ã€‚print html.text</code></pre><h2 id="4-å®Œæ•´ä»£ç ">4.å®Œæ•´ä»£ç </h2><pre><code class="hljs">import requestsdef get_html(url): #çˆ¬å–æºç å‡½æ•°  headers = &#123;      'User-Agent': 'Mozilla/5.0(Macintosh; Intel Mac OS X 10_11_4)\      AppleWebKit/537.36(KHTML, like Gecko) Chrome/52 .0.2743. 116 Safari/537.36'  &#125;  # æ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®    response = requests.get(url, headers=headers)  # è¯·æ±‚è®¿é—®ç½‘ç«™    response.encoding = response.apparent_encoding #è®¾ç½®å­—ç¬¦ç¼–ç æ ¼å¼    html = response.text  # è·å–ç½‘é¡µæºç     return html  # è¿”å›ç½‘é¡µæºç if __name__ == '__main__':#éœ€è¦çˆ¬çš„ç½‘å€t = get_html(&quot;https://jinbilianshao.github.io&quot;)#æŸ¥æ‰¾æ›¿æ¢t = t.replace(&quot;https://jinbilianshao.github.io&quot;, &quot;123456789&quot;)#å»ºç«‹æ–‡ä»¶å¹¶å¾ªç¯å†™å…¥æ•°æ®åˆ°æ–‡æœ¬ä¸­with open('index.html', 'w' ,encoding=&quot;utf-8&quot;) as s:    for i in t:        s.write(i)</code></pre><h3 id="è¿è¡Œæ•ˆæœ">è¿è¡Œæ•ˆæœ</h3><p><img src="/images/000003.png" alt="upload successful"></p><h4 id="å¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ä¸ªindex-htmlæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯çˆ¬ä¸‹æ¥çš„æºæ–‡ä»¶">å¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯çˆ¬ä¸‹æ¥çš„æºæ–‡ä»¶</h4><p><img src="/images/000008.png" alt="upload successful"></p><p><img src="/images/0026.png" alt="upload successful"></p><h2 id="é¡¹ç›®æºç åœ°å€-https-github-com-JinBiLianShao-pachong">é¡¹ç›®æºç åœ°å€&gt;&gt;&gt;<a href="https://github.com/JinBiLianShao/pachong">https://github.com/JinBiLianShao/pachong</a></h2>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
          <category> çˆ¬è™« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>officeå„ç‰ˆæœ¬ç ´è§£æ•™ç¨‹</title>
      <link href="/2021/09/16/office%E5%90%84%E7%89%88%E6%9C%AC%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/"/>
      <url>/2021/09/16/office%E5%90%84%E7%89%88%E6%9C%AC%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1>officeå„ç‰ˆæœ¬ç ´è§£æ•™ç¨‹</h1><h2 id="office2021ç‰ˆæœ¬">office2021ç‰ˆæœ¬</h2><p>[è½¯ä»¶åç§°]ï¼šoffice2021</p><p>[è½¯ä»¶è¯­è¨€]ï¼šç®€ä½“ä¸­æ–‡</p><p>[è½¯ä»¶å¤§å°]ï¼š4.16G</p><p>[å®‰è£…ç¯å¢ƒ]ï¼šWin11/win10</p><p>[ç¡¬ä»¶è¦æ±‚]ï¼šCPU@1GHz å†…å­˜@2G(æˆ–æ›´é«˜)</p><p>[ä¸‹è½½é“¾æ¥]ï¼š<a href="https://pan.baidu.com/s/1NZFcvEHDQLvdj6f58KgsYg">https://pan.baidu.com/s/1NZFcvEHDQLvdj6f58KgsYg</a></p><p>[æå–ç ]ï¼š5678</p><p>1.é¼ æ ‡å³å‡»ã€Office2021(64bit)ã€‘å‹ç¼©åŒ…é€‰æ‹©ã€è§£å‹åˆ° Office2021(64bit)ã€‘ã€‚</p><p><img src="/images/image001.png" alt="upload successful"></p><p>2.åŒå‡»æ‰“å¼€è§£å‹åçš„ã€Office2021(64bit)ã€‘æ–‡ä»¶å¤¹ã€‚</p><p><img src="/images/image002.png" alt="upload successful"></p><p>3.é¼ æ ‡å³å‡»ã€Office_2021ã€‘é€‰æ‹©ã€è£…è½½ã€‘ã€‚</p><p><img src="/images/image003.png" alt="upload successful"></p><p>4.è¿›å…¥è£…è½½ä¹‹åçš„æ–‡ä»¶å¤¹ï¼Œé¼ æ ‡å³å‡»ã€Setupã€‘é€‰æ‹©ã€ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‘ã€‚</p><p><img src="/images/image004.png" alt="upload successful"></p><p>5.è½¯ä»¶å®‰è£…ä¸­â€¦â€¦<img src="/images/0005.png" alt="upload successful"></p><p>6.ç‚¹å‡»ã€Closeã€‘ã€‚<img src="/images/0006.png" alt="upload successful"></p><p>7.æ‰“å¼€è§£å‹åçš„ã€Office2021(64bit)ã€‘æ–‡ä»¶å¤¹ï¼Œé¼ æ ‡å³å‡»ã€OfficeSetupã€‘é€‰æ‹©ã€ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‘ã€‚</p><p><img src="/images/0007.png" alt="upload successful"></p><p>8.ä¸‹è½½å®‰è£…ä¸­â€¦â€¦</p><p><img src="/images/0008.png" alt="upload successful"></p><p>9.ç‚¹å‡»ã€å…³é—­ã€‘ã€‚</p><p><img src="/images/0009.png" alt="upload successful"></p><p>10.æ‰“å¼€è§£å‹åçš„ã€Office2021(64bit)ã€‘æ–‡ä»¶å¤¹ï¼Œé¼ æ ‡å³å‡»ã€Crackã€‘å‹ç¼©åŒ…é€‰æ‹©ã€è§£å‹åˆ°å½“å‰æ–‡ä»¶å¤¹ã€‘ã€‚</p><blockquote><p>æ¸©é¦¨æç¤ºï¼šè§£å‹ã€Crackã€‘å‰ï¼Œå…ˆå…³é—­â€œæ‰€æœ‰æ€æ¯’è½¯ä»¶(éƒ¨åˆ†ç”µè„‘è‡ªå¸¦â€œè¿ˆå…‹è²â€ä¹Ÿè¦å…³é—­ï¼‰ã€é˜²ç«å¢™ã€Windows Defenderâ€ï¼Œå¦åˆ™å¯èƒ½ä¼šè¢«æ€æ¯’è½¯ä»¶è¯¯æ€æ— æ³•è¿è¡Œã€‚</p></blockquote><p><img src="/images/0010.png" alt="upload successful"></p><p>11.åŒå‡»è¿è¡Œã€Crackã€‘ã€‚</p><p><img src="/images/0011.png" alt="upload successful"></p><p>12.è¾“å…¥ã€6ã€‘ï¼ˆè½¯ä»¶ä¼šè‡ªåŠ¨è¿è¡Œæ¿€æ´»ç¨‹åºï¼Œofficeæ¿€æ´»çš„æœ‰æ•ˆæœŸä¸º180å¤©ï¼Œåˆ°æœŸåéœ€ç”¨æ­¤å·¥å…·æ¿€æ´»ä½¿ç”¨ï¼‰ã€‚</p><p><img src="/images/0012.png" alt="upload successful"></p><p>13.å›åˆ°ç”µè„‘æ¡Œé¢ï¼Œåœ¨ç©ºç™½å¤„é¼ æ ‡å³å‡»ã€æ–°å»ºã€‘å¯çœ‹åˆ°å·²ç»æˆåŠŸå®‰è£…officeç»„ä»¶äº§å“ï¼šAcessã€wordã€projectã€pptã€excelã€publishâ€¦â€¦</p><p><img src="/images/0013.png" alt="upload successful"></p><p>14.ç‚¹å‡»æ¡Œé¢å·¦ä¸‹è§’ã€å¼€å§‹èœå•ã€‘å›¾æ ‡ï¼Œåœ¨æ‰€æœ‰åº”ç”¨ä¸­æ‰¾åˆ°å¹¶ç‚¹å‡»ã€Wordã€‘å¯åŠ¨è½¯ä»¶ã€‚</p><p><img src="/images/0014.png" alt="upload successful"></p><p>15.ç‚¹å‡»ã€æ¥å—ã€‘ã€‚</p><p><img src="/images/0015.png" alt="upload successful"></p><p>16.å®‰è£…æˆåŠŸï¼</p><p><img src="/images/0016.png" alt="upload successful"></p><h2 id="officeå…¶ä»–ç‰ˆæœ¬å®‰è£…æ­¥éª¤åŸºæœ¬ç›¸åŒï¼ˆæ‡’ä¸æƒ³å†™äº†qaqï¼‰">officeå…¶ä»–ç‰ˆæœ¬å®‰è£…æ­¥éª¤åŸºæœ¬ç›¸åŒï¼ˆæ‡’ä¸æƒ³å†™äº†qaqï¼‰</h2><h3 id="office2019">office2019</h3><p>[è½¯ä»¶åç§°]ï¼šoffice2019</p><p>[è½¯ä»¶è¯­è¨€]ï¼šç®€ä½“ä¸­æ–‡</p><p>[è½¯ä»¶å¤§å°]ï¼š3.33G</p><p>[å®‰è£…ç¯å¢ƒ]ï¼šWin10</p><p>[ç¡¬ä»¶è¦æ±‚]ï¼šCPU@1GHz å†…å­˜@2G(æˆ–æ›´é«˜)</p><p>[ä¸‹è½½é“¾æ¥]ï¼š<a href="https://pan.baidu.com/s/1DU1955Oqtsg8ddolsA0N5w">https://pan.baidu.com/s/1DU1955Oqtsg8ddolsA0N5w</a></p><p>[æå–ç ]ï¼š6789</p><h3 id="ofice2016">ofice2016</h3><p>[è½¯ä»¶åç§°]ï¼šoffice2016</p><p>[è½¯ä»¶è¯­è¨€]ï¼šç®€ä½“ä¸­æ–‡</p><p>[è½¯ä»¶å¤§å°]ï¼š64ä½ï¼š1.77G 32ä½ï¼š840.54M</p><p>[å®‰è£…ç¯å¢ƒ]ï¼šWin10/Win8/Win7</p><p>[ç¡¬ä»¶è¦æ±‚]ï¼šCPU@1GHz å†…å­˜@2G(æˆ–æ›´é«˜)</p><p>[64ä½ä¸‹è½½é“¾æ¥]ï¼š<a href="https://pan.baidu.com/s/1GbcoqgAa3YOCTWq9vXVYJg">https://pan.baidu.com/s/1GbcoqgAa3YOCTWq9vXVYJg</a></p><p>[æå–ç ]ï¼š6789</p><p>[32ä½ä¸‹è½½é“¾æ¥]ï¼š<a href="https://pan.baidu.com/s/1Hns2c8RNQg8d6Neewni1nw">https://pan.baidu.com/s/1Hns2c8RNQg8d6Neewni1nw</a></p><p>[æå–ç ]ï¼š6789</p><h3 id="åœ¨å¾€å‰çš„ç‰ˆæœ¬åŸºæœ¬ä¸Šæ²¡äººç”¨äº†ï¼Œoffice2016æ˜¯è®¡ç®—æœºäºŒçº§æŒ‡å®šofficeå·¥å…·ï¼Œå°±æ”¾åˆ°2016å§ï½">åœ¨å¾€å‰çš„ç‰ˆæœ¬åŸºæœ¬ä¸Šæ²¡äººç”¨äº†ï¼Œoffice2016æ˜¯è®¡ç®—æœºäºŒçº§æŒ‡å®šofficeå·¥å…·ï¼Œå°±æ”¾åˆ°2016å§ï½</h3>]]></content>
      
      
      <categories>
          
          <category> ç ´è§£å·¥å…·æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦åˆ© </tag>
            
            <tag> office </tag>
            
            <tag> ç ´è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»£ç æµ‹è¯•</title>
      <link href="/2021/09/16/%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95/"/>
      <url>/2021/09/16/%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h1>ä»£ç æµ‹è¯•</h1><pre><code class="hljs">#include&lt;stdio.h&gt;int main()&#123;printf(&quot;ä½ å¥½ï¼Cè¯­è¨€\n&quot;);return 0;&#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
